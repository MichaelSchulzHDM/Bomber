/*! For license information please see main.bf630363.js.LICENSE.txt */
(()=>{"use strict";var e={4(e,t,i){var o=i(853),n=i(43),s=i(950);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function d(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(r(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),y=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope");var D=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var T=Symbol.for("react.client.reference");function k(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===T?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case f:return"Fragment";case w:return"Profiler";case C:return"StrictMode";case x:return"Suspense";case F:return"SuspenseList";case D:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case y:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:k(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return k(e(t))}catch(i){}}return null}var I=Array.isArray,L=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},G=[],B=-1;function V(e){return{current:e}}function H(e){0>B||(e.current=G[B],G[B]=null,B--)}function z(e,t){B++,G[B]=e.current,e.current=t}var W,U,j=V(null),_=V(null),K=V(null),Y=V(null);function q(e,t){switch(z(K,t),z(_,e),z(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?fu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=Cu(t=fu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(j),z(j,e)}function Q(){H(j),H(_),H(K)}function X(e){null!==e.memoizedState&&z(Y,e);var t=j.current,i=Cu(t,e.type);t!==i&&(z(_,e),z(j,i))}function $(e){_.current===e&&(H(j),H(_)),Y.current===e&&(H(Y),ch._currentValue=O)}function Z(e){if(void 0===W)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);W=t&&t[1]||"",U=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+W+e+U}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(n){var o=n}Reflect.construct(e,[],i)}else{try{i.call()}catch(s){o=s}e.call(i.prototype)}}else{try{throw Error()}catch(r){o=r}(i=e())&&"function"===typeof i.catch&&i.catch(function(){})}}catch(a){if(a&&o&&"string"===typeof a.stack)return[a.stack,o.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=o.DetermineComponentFrameRoot(),r=s[0],a=s[1];if(r&&a){var l=r.split("\n"),d=a.split("\n");for(n=o=0;o<l.length&&!l[o].includes("DetermineComponentFrameRoot");)o++;for(;n<d.length&&!d[n].includes("DetermineComponentFrameRoot");)n++;if(o===l.length||n===d.length)for(o=l.length-1,n=d.length-1;1<=o&&0<=n&&l[o]!==d[n];)n--;for(;1<=o&&0<=n;o--,n--)if(l[o]!==d[n]){if(1!==o||1!==n)do{if(o--,0>--n||l[o]!==d[n]){var c="\n"+l[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=n);break}}}finally{J=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Z(i):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return e.child!==t&&null!==t?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Z("Activity");default:return""}}function ie(e){try{var t="",i=null;do{t+=te(e,i),i=e,e=e.return}while(e);return t}catch(o){return"\nError generating stack: "+o.message+"\n"+o.stack}}var oe=Object.prototype.hasOwnProperty,ne=o.unstable_scheduleCallback,se=o.unstable_cancelCallback,re=o.unstable_shouldYield,ae=o.unstable_requestPaint,le=o.unstable_now,de=o.unstable_getCurrentPriorityLevel,ce=o.unstable_ImmediatePriority,ue=o.unstable_UserBlockingPriority,he=o.unstable_NormalPriority,pe=o.unstable_LowPriority,ge=o.unstable_IdlePriority,ve=o.log,me=o.unstable_setDisableYieldValue,fe=null,Ce=null;function we(e){if("function"===typeof ve&&me(e),Ce&&"function"===typeof Ce.setStrictMode)try{Ce.setStrictMode(fe,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ye(e)/Se|0)|0},ye=Math.log,Se=Math.LN2;var xe=256,Fe=262144,Re=4194304;function Pe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function De(e,t,i){var o=e.pendingLanes;if(0===o)return 0;var n=0,s=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var a=134217727&o;return 0!==a?0!==(o=a&~s)?n=Pe(o):0!==(r&=a)?n=Pe(r):i||0!==(i=a&~e)&&(n=Pe(i)):0!==(a=o&~s)?n=Pe(a):0!==r?n=Pe(r):i||0!==(i=o&~e)&&(n=Pe(i)),0===n?0:0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(i=t&-t)||32===s&&0!==(4194048&i))?t:n}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ae(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Me(){var e=Re;return 0===(62914560&(Re<<=1))&&(Re=4194304),e}function Te(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-be(t);e.entangledLanes|=t,e.entanglements[o]=1073741824|e.entanglements[o]|261930&i}function Le(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-be(i),n=1<<o;n&t|e[o]&t&&(e[o]|=t),i&=~n}}function Ne(e,t){var i=t&-t;return 0!==((i=0!==(42&i)?1:Oe(i))&(e.suspendedLanes|t))?0:i}function Oe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ge(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Be(){var e=N.p;return 0!==e?e:void 0===(e=window.event)?32:Ph(e.type)}function Ve(e,t){var i=N.p;try{return N.p=e,t()}finally{N.p=i}}var He=Math.random().toString(36).slice(2),ze="__reactFiber$"+He,We="__reactProps$"+He,Ue="__reactContainer$"+He,je="__reactEvents$"+He,_e="__reactListeners$"+He,Ke="__reactHandles$"+He,Ye="__reactResources$"+He,qe="__reactMarker$"+He;function Qe(e){delete e[ze],delete e[We],delete e[je],delete e[_e],delete e[Ke]}function Xe(e){var t=e[ze];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ue]||i[ze]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=Ou(e);null!==e;){if(i=e[ze])return i;e=Ou(e)}return t}i=(e=i).parentNode}return null}function $e(e){if(e=e[ze]||e[Ue]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function Je(e){var t=e[Ye];return t||(t=e[Ye]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[qe]=!0}var tt=new Set,it={};function ot(e,t){nt(e,t),nt(e+"Capture",t)}function nt(e,t){for(it[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rt={},at={};function lt(e,t,i){if(n=t,oe.call(at,n)||!oe.call(rt,n)&&(st.test(n)?at[n]=!0:(rt[n]=!0,0)))if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var o=t.toLowerCase().slice(0,5);if("data-"!==o&&"aria-"!==o)return void e.removeAttribute(t)}e.setAttribute(t,""+i)}var n}function dt(e,t,i){if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+i)}}function ct(e,t,i,o){if(null===o)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(i)}e.setAttributeNS(t,i,""+o)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof o&&"function"===typeof o.get&&"function"===typeof o.set){var n=o.get,s=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=ht(e)?e.checked?"true":"false":e.value),(e=o)!==i&&(t.setValue(e),!0)}function vt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function ft(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Ct(e,t,i,o,n,s,r,a){e.name="",null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r?e.type=r:e.removeAttribute("type"),null!=t?"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==r&&"reset"!==r||e.removeAttribute("value"),null!=t?bt(e,r,ut(t)):null!=i?bt(e,r,ut(i)):null!=o&&e.removeAttribute("value"),null==n&&null!=s&&(e.defaultChecked=!!s),null!=n&&(e.checked=n&&"function"!==typeof n&&"symbol"!==typeof n),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ut(a):e.removeAttribute("name")}function wt(e,t,i,o,n,s,r,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=i){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void pt(e);i=null!=i?""+ut(i):"",t=null!=t?""+ut(t):i,a||t===e.value||(e.value=t),e.defaultValue=t}o="function"!==typeof(o=null!=o?o:n)&&"symbol"!==typeof o&&!!o,e.checked=a?e.checked:!!o,e.defaultChecked=!!o,null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.name=r),pt(e)}function bt(e,t,i){"number"===t&&vt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function yt(e,t,i,o){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&o&&(e[i].defaultSelected=!0)}else{for(i=""+ut(i),t=null,n=0;n<e.length;n++){if(e[n].value===i)return e[n].selected=!0,void(o&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function St(e,t,i){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=i)?e.defaultValue=null!=i?""+ut(i):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,i,o){if(null==t){if(null!=o){if(null!=i)throw Error(r(92));if(I(o)){if(1<o.length)throw Error(r(93));o=o[0]}i=o}null==i&&(i=""),t=i}i=ut(t),e.defaultValue=i,(o=e.textContent)===i&&""!==o&&null!==o&&(e.value=o),pt(e)}function Ft(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var Rt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pt(e,t,i){var o=0===t.indexOf("--");null==i||"boolean"===typeof i||""===i?o?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":o?e.setProperty(t,i):"number"!==typeof i||0===i||Rt.has(t)?"float"===t?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Dt(e,t,i){if(null!=t&&"object"!==typeof t)throw Error(r(62));if(e=e.style,null!=i){for(var o in i)!i.hasOwnProperty(o)||null!=t&&t.hasOwnProperty(o)||(0===o.indexOf("--")?e.setProperty(o,""):"float"===o?e.cssFloat="":e[o]="");for(var n in t)o=t[n],t.hasOwnProperty(n)&&i[n]!==o&&Pt(e,n,o)}else for(var s in t)t.hasOwnProperty(s)&&Pt(e,s,t[s])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return Mt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kt(){}var It=null;function Lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,Ot=null;function Gt(e){var t=$e(e);if(t&&(e=t.stateNode)){var i=e[We]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ct(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var n=o[We]||null;if(!n)throw Error(r(90));Ct(o,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<i.length;t++)(o=i[t]).form===e.form&&gt(o)}break e;case"textarea":St(e,i.value,i.defaultValue);break e;case"select":null!=(t=i.value)&&yt(e,!!i.multiple,t,!1)}}}var Bt=!1;function Vt(e,t,i){if(Bt)return e(t,i);Bt=!0;try{return e(t)}finally{if(Bt=!1,(null!==Nt||null!==Ot)&&(Jd(),Nt&&(t=Nt,e=Ot,Ot=Nt=null,Gt(t),e)))for(t=0;t<e.length;t++)Gt(e[t])}}function Ht(e,t){var i=e.stateNode;if(null===i)return null;var o=i[We]||null;if(null===o)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(r(231,t,typeof i));return i}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Wt=!1;if(zt)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch($h){Wt=!1}var jt=null,_t=null,Kt=null;function Yt(){if(Kt)return Kt;var e,t,i=_t,o=i.length,n="value"in jt?jt.value:jt.textContent,s=n.length;for(e=0;e<o&&i[e]===n[e];e++);var r=o-e;for(t=1;t<=r&&i[o-t]===n[s-t];t++);return Kt=n.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Qt(){return!0}function Xt(){return!1}function $t(e){function t(t,i,o,n,s){for(var r in this._reactName=t,this._targetInst=o,this.type=i,this.nativeEvent=n,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(n):n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qt:Xt,this.isPropagationStopped=Xt,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qt)},persist:function(){},isPersistent:Qt}),t}var Zt,Jt,ei,ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ii=$t(ti),oi=p({},ti,{view:0,detail:0}),ni=$t(oi),si=p({},oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ei&&(ei&&"mousemove"===e.type?(Zt=e.screenX-ei.screenX,Jt=e.screenY-ei.screenY):Jt=Zt=0,ei=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),ri=$t(si),ai=$t(p({},si,{dataTransfer:0})),li=$t(p({},oi,{relatedTarget:0})),di=$t(p({},ti,{animationName:0,elapsedTime:0,pseudoElement:0})),ci=$t(p({},ti,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ui=$t(p({},ti,{data:0})),hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=gi[e])&&!!t[e]}function mi(){return vi}var fi=$t(p({},oi,{key:function(e){if(e.key){var t=hi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mi,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Ci=$t(p({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wi=$t(p({},oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mi})),bi=$t(p({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0})),yi=$t(p({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Si=$t(p({},ti,{newState:0,oldState:0})),xi=[9,13,27,32],Fi=zt&&"CompositionEvent"in window,Ri=null;zt&&"documentMode"in document&&(Ri=document.documentMode);var Pi=zt&&"TextEvent"in window&&!Ri,Di=zt&&(!Fi||Ri&&8<Ri&&11>=Ri),Ei=String.fromCharCode(32),Ai=!1;function Mi(e,t){switch(e){case"keyup":return-1!==xi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ti(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var ki=!1;var Ii={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Li(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ii[e.type]:"textarea"===t}function Ni(e,t,i,o){Nt?Ot?Ot.push(o):Ot=[o]:Nt=o,0<(t=ou(t,"onChange")).length&&(i=new ii("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Oi=null,Gi=null;function Bi(e){Qc(e,0)}function Vi(e){if(gt(Ze(e)))return e}function Hi(e,t){if("change"===e)return t}var zi=!1;if(zt){var Wi;if(zt){var Ui="oninput"in document;if(!Ui){var ji=document.createElement("div");ji.setAttribute("oninput","return;"),Ui="function"===typeof ji.oninput}Wi=Ui}else Wi=!1;zi=Wi&&(!document.documentMode||9<document.documentMode)}function _i(){Oi&&(Oi.detachEvent("onpropertychange",Ki),Gi=Oi=null)}function Ki(e){if("value"===e.propertyName&&Vi(Gi)){var t=[];Ni(t,Gi,e,Lt(e)),Vt(Bi,t)}}function Yi(e,t,i){"focusin"===e?(_i(),Gi=i,(Oi=t).attachEvent("onpropertychange",Ki)):"focusout"===e&&_i()}function qi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vi(Gi)}function Qi(e,t){if("click"===e)return Vi(t)}function Xi(e,t){if("input"===e||"change"===e)return Vi(t)}var $i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zi(e,t){if($i(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var n=i[o];if(!oe.call(t,n)||!$i(e[n],t[n]))return!1}return!0}function Ji(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eo(e,t){var i,o=Ji(e);for(e=0;o;){if(3===o.nodeType){if(i=e+o.textContent.length,e<=t&&i>=t)return{node:o,offset:t-e};e=i}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ji(o)}}function to(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?to(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function io(e){for(var t=vt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(o){i=!1}if(!i)break;t=vt((e=t.contentWindow).document)}return t}function oo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var no=zt&&"documentMode"in document&&11>=document.documentMode,so=null,ro=null,ao=null,lo=!1;function co(e,t,i){var o=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;lo||null==so||so!==vt(o)||("selectionStart"in(o=so)&&oo(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},ao&&Zi(ao,o)||(ao=o,0<(o=ou(ro,"onSelect")).length&&(t=new ii("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=so)))}function uo(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var ho={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},po={},go={};function vo(e){if(po[e])return po[e];if(!ho[e])return e;var t,i=ho[e];for(t in i)if(i.hasOwnProperty(t)&&t in go)return po[e]=i[t];return e}zt&&(go=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);var mo=vo("animationend"),fo=vo("animationiteration"),Co=vo("animationstart"),wo=vo("transitionrun"),bo=vo("transitionstart"),yo=vo("transitioncancel"),So=vo("transitionend"),xo=new Map,Fo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ro(e,t){xo.set(e,t),ot(t,[e])}Fo.push("scrollEnd");var Po="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Do=[],Eo=0,Ao=0;function Mo(){for(var e=Eo,t=Ao=Eo=0;t<e;){var i=Do[t];Do[t++]=null;var o=Do[t];Do[t++]=null;var n=Do[t];Do[t++]=null;var s=Do[t];if(Do[t++]=null,null!==o&&null!==n){var r=o.pending;null===r?n.next=n:(n.next=r.next,r.next=n),o.pending=n}0!==s&&Lo(i,n,s)}}function To(e,t,i,o){Do[Eo++]=e,Do[Eo++]=t,Do[Eo++]=i,Do[Eo++]=o,Ao|=o,e.lanes|=o,null!==(e=e.alternate)&&(e.lanes|=o)}function ko(e,t,i,o){return To(e,t,i,o),No(e)}function Io(e,t){return To(e,null,null,t),No(e)}function Lo(e,t,i){e.lanes|=i;var o=e.alternate;null!==o&&(o.lanes|=i);for(var n=!1,s=e.return;null!==s;)s.childLanes|=i,null!==(o=s.alternate)&&(o.childLanes|=i),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(n=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,n&&null!==t&&(n=31-be(i),null===(o=(e=s.hiddenUpdates)[n])?e[n]=[t]:o.push(t),t.lane=536870912|i),s):null}function No(e){if(50<jd)throw jd=0,_d=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Oo={};function Go(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bo(e,t,i,o){return new Go(e,t,i,o)}function Vo(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ho(e,t){var i=e.alternate;return null===i?((i=Bo(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=65011712&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function zo(e,t){e.flags&=65011714;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wo(e,t,i,o,n,s){var a=0;if(o=e,"function"===typeof e)Vo(e)&&(a=1);else if("string"===typeof e)a=function(e,t,i){if(1===i||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,i,j.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case D:return(e=Bo(31,i,t,n)).elementType=D,e.lanes=s,e;case f:return Uo(i.children,n,s,t);case C:a=8,n|=24;break;case w:return(e=Bo(12,i,t,2|n)).elementType=w,e.lanes=s,e;case x:return(e=Bo(13,i,t,n)).elementType=x,e.lanes=s,e;case F:return(e=Bo(19,i,t,n)).elementType=F,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:a=10;break e;case b:a=9;break e;case S:a=11;break e;case R:a=14;break e;case P:a=16,o=null;break e}a=29,i=Error(r(130,null===e?"null":typeof e,"")),o=null}return(t=Bo(a,i,t,n)).elementType=e,t.type=o,t.lanes=s,t}function Uo(e,t,i,o){return(e=Bo(7,e,o,t)).lanes=i,e}function jo(e,t,i){return(e=Bo(6,e,null,t)).lanes=i,e}function _o(e){var t=Bo(18,null,null,0);return t.stateNode=e,t}function Ko(e,t,i){return(t=Bo(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Yo=new WeakMap;function qo(e,t){if("object"===typeof e&&null!==e){var i=Yo.get(e);return void 0!==i?i:(t={value:e,source:t,stack:ie(t)},Yo.set(e,t),t)}return{value:e,source:t,stack:ie(t)}}var Qo=[],Xo=0,$o=null,Zo=0,Jo=[],en=0,tn=null,on=1,nn="";function sn(e,t){Qo[Xo++]=Zo,Qo[Xo++]=$o,$o=e,Zo=t}function rn(e,t,i){Jo[en++]=on,Jo[en++]=nn,Jo[en++]=tn,tn=e;var o=on;e=nn;var n=32-be(o)-1;o&=~(1<<n),i+=1;var s=32-be(t)+n;if(30<s){var r=n-n%5;s=(o&(1<<r)-1).toString(32),o>>=r,n-=r,on=1<<32-be(t)+n|i<<n|o,nn=s+e}else on=1<<s|i<<n|o,nn=e}function an(e){null!==e.return&&(sn(e,1),rn(e,1,0))}function ln(e){for(;e===$o;)$o=Qo[--Xo],Qo[Xo]=null,Zo=Qo[--Xo],Qo[Xo]=null;for(;e===tn;)tn=Jo[--en],Jo[en]=null,nn=Jo[--en],Jo[en]=null,on=Jo[--en],Jo[en]=null}function dn(e,t){Jo[en++]=on,Jo[en++]=nn,Jo[en++]=tn,on=t.id,nn=t.overflow,tn=e}var cn=null,un=null,hn=!1,pn=null,gn=!1,vn=Error(r(519));function mn(e){throw Sn(qo(Error(r(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),vn}function fn(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[ze]=e,t[We]=o,i){case"dialog":Xc("cancel",t),Xc("close",t);break;case"iframe":case"object":case"embed":Xc("load",t);break;case"video":case"audio":for(i=0;i<Yc.length;i++)Xc(Yc[i],t);break;case"source":Xc("error",t);break;case"img":case"image":case"link":Xc("error",t),Xc("load",t);break;case"details":Xc("toggle",t);break;case"input":Xc("invalid",t),wt(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Xc("invalid",t);break;case"textarea":Xc("invalid",t),xt(t,o.value,o.defaultValue,o.children)}"string"!==typeof(i=o.children)&&"number"!==typeof i&&"bigint"!==typeof i||t.textContent===""+i||!0===o.suppressHydrationWarning||du(t.textContent,i)?(null!=o.popover&&(Xc("beforetoggle",t),Xc("toggle",t)),null!=o.onScroll&&Xc("scroll",t),null!=o.onScrollEnd&&Xc("scrollend",t),null!=o.onClick&&(t.onclick=kt),t=!0):t=!1,t||mn(e,!0)}function Cn(e){for(cn=e.return;cn;)switch(cn.tag){case 5:case 31:case 13:return void(gn=!1);case 27:case 3:return void(gn=!0);default:cn=cn.return}}function wn(e){if(e!==cn)return!1;if(!hn)return Cn(e),hn=!0,!1;var t,i=e.tag;if((t=3!==i&&27!==i)&&((t=5===i)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wu(e.type,e.memoizedProps)),t=!t),t&&un&&mn(e),Cn(e),13===i){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));un=Nu(e)}else if(31===i){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));un=Nu(e)}else 27===i?(i=un,Pu(e.type)?(e=Lu,Lu=null,un=e):un=i):un=cn?Iu(e.stateNode.nextSibling):null;return!0}function bn(){un=cn=null,hn=!1}function yn(){var e=pn;return null!==e&&(null===Md?Md=e:Md.push.apply(Md,e),pn=null),e}function Sn(e){null===pn?pn=[e]:pn.push(e)}var xn=V(null),Fn=null,Rn=null;function Pn(e,t,i){z(xn,t._currentValue),t._currentValue=i}function Dn(e){e._currentValue=xn.current,H(xn)}function En(e,t,i){for(;null!==e;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==o&&(o.childLanes|=t)):null!==o&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function An(e,t,i,o){var n=e.child;for(null!==n&&(n.return=e);null!==n;){var s=n.dependencies;if(null!==s){var a=n.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=n;for(var d=0;d<t.length;d++)if(l.context===t[d]){s.lanes|=i,null!==(l=s.alternate)&&(l.lanes|=i),En(s.return,i,e),o||(a=null);break e}s=l.next}}else if(18===n.tag){if(null===(a=n.return))throw Error(r(341));a.lanes|=i,null!==(s=a.alternate)&&(s.lanes|=i),En(a,i,e),a=null}else a=n.child;if(null!==a)a.return=n;else for(a=n;null!==a;){if(a===e){a=null;break}if(null!==(n=a.sibling)){n.return=a.return,a=n;break}a=a.return}n=a}}function Mn(e,t,i,o){e=null;for(var n=t,s=!1;null!==n;){if(!s)if(0!==(524288&n.flags))s=!0;else if(0!==(262144&n.flags))break;if(10===n.tag){var a=n.alternate;if(null===a)throw Error(r(387));if(null!==(a=a.memoizedProps)){var l=n.type;$i(n.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(n===Y.current){if(null===(a=n.alternate))throw Error(r(387));a.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(null!==e?e.push(ch):e=[ch])}n=n.return}null!==e&&An(t,e,i,o),t.flags|=262144}function Tn(e){for(e=e.firstContext;null!==e;){if(!$i(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function kn(e){Fn=e,Rn=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function In(e){return Nn(Fn,e)}function Ln(e,t){return null===Fn&&kn(e),Nn(e,t)}function Nn(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},null===Rn){if(null===e)throw Error(r(308));Rn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Rn=Rn.next=t;return i}var On="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Gn=o.unstable_scheduleCallback,Bn=o.unstable_NormalPriority,Vn={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hn(){return{controller:new On,data:new Map,refCount:0}}function zn(e){e.refCount--,0===e.refCount&&Gn(Bn,function(){e.controller.abort()})}var Wn=null,Un=0,jn=0,_n=null;function Kn(){if(0===--Un&&null!==Wn){null!==_n&&(_n.status="fulfilled");var e=Wn;Wn=null,jn=0,_n=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Yn=L.S;L.S=function(e,t){Id=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Wn){var i=Wn=[];Un=0,jn=Wc(),_n={status:"pending",value:void 0,then:function(e){i.push(e)}}}Un++,t.then(Kn,Kn)}(0,t),null!==Yn&&Yn(e,t)};var qn=V(null);function Qn(){var e=qn.current;return null!==e?e:gd.pooledCache}function Xn(e,t){z(qn,null===t?qn.current:t.pool)}function $n(){var e=Qn();return null===e?null:{parent:Vn._currentValue,pool:e}}var Zn=Error(r(460)),Jn=Error(r(474)),es=Error(r(542)),ts={then:function(){}};function is(e){return"fulfilled"===(e=e.status)||"rejected"===e}function os(e,t,i){switch(void 0===(i=e[i])?e.push(t):i!==t&&(t.then(kt,kt),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e;default:if("string"===typeof t.status)t.then(kt,kt);else{if(null!==(e=gd)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}},function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e}throw ss=t,Zn}}function ns(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ss=t,Zn;throw t}}var ss=null;function rs(){if(null===ss)throw Error(r(459));var e=ss;return ss=null,e}function as(e){if(e===Zn||e===es)throw Error(r(483))}var ls=null,ds=0;function cs(e){var t=ds;return ds+=1,null===ls&&(ls=[]),os(ls,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hs(e,t){if(t.$$typeof===g)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ps(e){function t(t,i){if(e){var o=t.deletions;null===o?(t.deletions=[i],t.flags|=16):o.push(i)}}function i(i,o){if(!e)return null;for(;null!==o;)t(i,o),o=o.sibling;return null}function o(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(e,t){return(e=Ho(e,t)).index=0,e.sibling=null,e}function s(t,i,o){return t.index=o,e?null!==(o=t.alternate)?(o=o.index)<i?(t.flags|=67108866,i):o:(t.flags|=67108866,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,i,o){return null===t||6!==t.tag?((t=jo(i,e.mode,o)).return=e,t):((t=n(t,i)).return=e,t)}function d(e,t,i,o){var s=i.type;return s===f?u(e,t,i.props.children,o,i.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ns(s)===t.type)?(us(t=n(t,i.props),i),t.return=e,t):(us(t=Wo(i.type,i.key,i.props,null,e.mode,o),i),t.return=e,t)}function c(e,t,i,o){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Ko(i,e.mode,o)).return=e,t):((t=n(t,i.children||[])).return=e,t)}function u(e,t,i,o,s){return null===t||7!==t.tag?((t=Uo(i,e.mode,o,s)).return=e,t):((t=n(t,i)).return=e,t)}function h(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=jo(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case v:return us(i=Wo(t.type,t.key,t.props,null,e.mode,i),t),i.return=e,i;case m:return(t=Ko(t,e.mode,i)).return=e,t;case P:return h(e,t=ns(t),i)}if(I(t)||M(t))return(t=Uo(t,e.mode,i,null)).return=e,t;if("function"===typeof t.then)return h(e,cs(t),i);if(t.$$typeof===y)return h(e,Ln(e,t),i);hs(e,t)}return null}function p(e,t,i,o){var n=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return null!==n?null:l(e,t,""+i,o);if("object"===typeof i&&null!==i){switch(i.$$typeof){case v:return i.key===n?d(e,t,i,o):null;case m:return i.key===n?c(e,t,i,o):null;case P:return p(e,t,i=ns(i),o)}if(I(i)||M(i))return null!==n?null:u(e,t,i,o,null);if("function"===typeof i.then)return p(e,t,cs(i),o);if(i.$$typeof===y)return p(e,t,Ln(e,i),o);hs(e,i)}return null}function g(e,t,i,o,n){if("string"===typeof o&&""!==o||"number"===typeof o||"bigint"===typeof o)return l(t,e=e.get(i)||null,""+o,n);if("object"===typeof o&&null!==o){switch(o.$$typeof){case v:return d(t,e=e.get(null===o.key?i:o.key)||null,o,n);case m:return c(t,e=e.get(null===o.key?i:o.key)||null,o,n);case P:return g(e,t,i,o=ns(o),n)}if(I(o)||M(o))return u(t,e=e.get(i)||null,o,n,null);if("function"===typeof o.then)return g(e,t,i,cs(o),n);if(o.$$typeof===y)return g(e,t,i,Ln(t,o),n);hs(t,o)}return null}function C(l,d,c,u){if("object"===typeof c&&null!==c&&c.type===f&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case v:e:{for(var w=c.key;null!==d;){if(d.key===w){if((w=c.type)===f){if(7===d.tag){i(l,d.sibling),(u=n(d,c.props.children)).return=l,l=u;break e}}else if(d.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===P&&ns(w)===d.type){i(l,d.sibling),us(u=n(d,c.props),c),u.return=l,l=u;break e}i(l,d);break}t(l,d),d=d.sibling}c.type===f?((u=Uo(c.props.children,l.mode,u,c.key)).return=l,l=u):(us(u=Wo(c.type,c.key,c.props,null,l.mode,u),c),u.return=l,l=u)}return a(l);case m:e:{for(w=c.key;null!==d;){if(d.key===w){if(4===d.tag&&d.stateNode.containerInfo===c.containerInfo&&d.stateNode.implementation===c.implementation){i(l,d.sibling),(u=n(d,c.children||[])).return=l,l=u;break e}i(l,d);break}t(l,d),d=d.sibling}(u=Ko(c,l.mode,u)).return=l,l=u}return a(l);case P:return C(l,d,c=ns(c),u)}if(I(c))return function(n,r,a,l){for(var d=null,c=null,u=r,v=r=0,m=null;null!==u&&v<a.length;v++){u.index>v?(m=u,u=null):m=u.sibling;var f=p(n,u,a[v],l);if(null===f){null===u&&(u=m);break}e&&u&&null===f.alternate&&t(n,u),r=s(f,r,v),null===c?d=f:c.sibling=f,c=f,u=m}if(v===a.length)return i(n,u),hn&&sn(n,v),d;if(null===u){for(;v<a.length;v++)null!==(u=h(n,a[v],l))&&(r=s(u,r,v),null===c?d=u:c.sibling=u,c=u);return hn&&sn(n,v),d}for(u=o(u);v<a.length;v++)null!==(m=g(u,n,v,a[v],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?v:m.key),r=s(m,r,v),null===c?d=m:c.sibling=m,c=m);return e&&u.forEach(function(e){return t(n,e)}),hn&&sn(n,v),d}(l,d,c,u);if(M(c)){if("function"!==typeof(w=M(c)))throw Error(r(150));return function(n,a,l,d){if(null==l)throw Error(r(151));for(var c=null,u=null,v=a,m=a=0,f=null,C=l.next();null!==v&&!C.done;m++,C=l.next()){v.index>m?(f=v,v=null):f=v.sibling;var w=p(n,v,C.value,d);if(null===w){null===v&&(v=f);break}e&&v&&null===w.alternate&&t(n,v),a=s(w,a,m),null===u?c=w:u.sibling=w,u=w,v=f}if(C.done)return i(n,v),hn&&sn(n,m),c;if(null===v){for(;!C.done;m++,C=l.next())null!==(C=h(n,C.value,d))&&(a=s(C,a,m),null===u?c=C:u.sibling=C,u=C);return hn&&sn(n,m),c}for(v=o(v);!C.done;m++,C=l.next())null!==(C=g(v,n,m,C.value,d))&&(e&&null!==C.alternate&&v.delete(null===C.key?m:C.key),a=s(C,a,m),null===u?c=C:u.sibling=C,u=C);return e&&v.forEach(function(e){return t(n,e)}),hn&&sn(n,m),c}(l,d,c=w.call(c),u)}if("function"===typeof c.then)return C(l,d,cs(c),u);if(c.$$typeof===y)return C(l,d,Ln(l,c),u);hs(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==d&&6===d.tag?(i(l,d.sibling),(u=n(d,c)).return=l,l=u):(i(l,d),(u=jo(c,l.mode,u)).return=l,l=u),a(l)):i(l,d)}return function(e,t,i,o){try{ds=0;var n=C(e,t,i,o);return ls=null,n}catch(r){if(r===Zn||r===es)throw r;var s=Bo(29,r,null,e.mode);return s.lanes=o,s.return=e,s}}}var gs=ps(!0),vs=ps(!1),ms=!1;function fs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ws(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bs(e,t,i){var o=e.updateQueue;if(null===o)return null;if(o=o.shared,0!==(2&pd)){var n=o.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),o.pending=t,t=No(e),Lo(e,null,i),t}return To(e,o,t,i),No(e)}function ys(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&i))){var o=t.lanes;i|=o&=e.pendingLanes,t.lanes=i,Le(e,i)}}function Ss(e,t){var i=e.updateQueue,o=e.alternate;if(null!==o&&i===(o=o.updateQueue)){var n=null,s=null;if(null!==(i=i.firstBaseUpdate)){do{var r={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===s?n=s=r:s=s.next=r,i=i.next}while(null!==i);null===s?n=s=t:s=s.next=t}else n=s=t;return i={baseState:o.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:o.shared,callbacks:o.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var xs=!1;function Fs(){if(xs){if(null!==_n)throw _n}}function Rs(e,t,i,o){xs=!1;var n=e.updateQueue;ms=!1;var s=n.firstBaseUpdate,r=n.lastBaseUpdate,a=n.shared.pending;if(null!==a){n.shared.pending=null;var l=a,d=l.next;l.next=null,null===r?s=d:r.next=d,r=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==r&&(null===a?c.firstBaseUpdate=d:a.next=d,c.lastBaseUpdate=l))}if(null!==s){var u=n.baseState;for(r=0,c=d=l=null,a=s;;){var h=-536870913&a.lane,g=h!==a.lane;if(g?(md&h)===h:(o&h)===h){0!==h&&h===jn&&(xs=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var v=e,m=a;h=t;var f=i;switch(m.tag){case 1:if("function"===typeof(v=m.payload)){u=v.call(f,u,h);break e}u=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=m.payload)?v.call(f,u,h):v)||void 0===h)break e;u=p({},u,h);break e;case 2:ms=!0}}null!==(h=a.callback)&&(e.flags|=64,g&&(e.flags|=8192),null===(g=n.callbacks)?n.callbacks=[h]:g.push(h))}else g={lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(d=c=g,l=u):c=c.next=g,r|=h;if(null===(a=a.next)){if(null===(a=n.shared.pending))break;a=(g=a).next,g.next=null,n.lastBaseUpdate=g,n.shared.pending=null}}null===c&&(l=u),n.baseState=l,n.firstBaseUpdate=d,n.lastBaseUpdate=c,null===s&&(n.shared.lanes=0),Fd|=r,e.lanes=r,e.memoizedState=u}}function Ps(e,t){if("function"!==typeof e)throw Error(r(191,e));e.call(t)}function Ds(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)Ps(i[e],t)}var Es=V(null),As=V(0);function Ms(e,t){z(As,e=Sd),z(Es,t),Sd=e|t.baseLanes}function Ts(){z(As,Sd),z(Es,Es.current)}function ks(){Sd=As.current,H(Es),H(As)}var Is=V(null),Ls=null;function Ns(e){var t=e.alternate;z(Hs,1&Hs.current),z(Is,e),null===Ls&&(null===t||null!==Es.current||null!==t.memoizedState)&&(Ls=e)}function Os(e){z(Hs,Hs.current),z(Is,e),null===Ls&&(Ls=e)}function Gs(e){22===e.tag?(z(Hs,Hs.current),z(Is,e),null===Ls&&(Ls=e)):Bs()}function Bs(){z(Hs,Hs.current),z(Is,Is.current)}function Vs(e){H(Is),Ls===e&&(Ls=null),H(Hs)}var Hs=V(0);function zs(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||Tu(i)||ku(i)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ws=0,Us=null,js=null,_s=null,Ks=!1,Ys=!1,qs=!1,Qs=0,Xs=0,$s=null,Zs=0;function Js(){throw Error(r(321))}function er(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!$i(e[i],t[i]))return!1;return!0}function tr(e,t,i,o,n,s){return Ws=s,Us=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?ma:fa,qs=!1,s=i(o,n),qs=!1,Ys&&(s=or(t,i,o,n)),ir(e),s}function ir(e){L.H=va;var t=null!==js&&null!==js.next;if(Ws=0,_s=js=Us=null,Ks=!1,Xs=0,$s=null,t)throw Error(r(300));null===e||Ia||null!==(e=e.dependencies)&&Tn(e)&&(Ia=!0)}function or(e,t,i,o){Us=e;var n=0;do{if(Ys&&($s=null),Xs=0,Ys=!1,25<=n)throw Error(r(301));if(n+=1,_s=js=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}L.H=Ca,s=t(i,o)}while(Ys);return s}function nr(){var e=L.H,t=e.useState()[0];return t="function"===typeof t.then?cr(t):t,e=e.useState()[0],(null!==js?js.memoizedState:null)!==e&&(Us.flags|=1024),t}function sr(){var e=0!==Qs;return Qs=0,e}function rr(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function ar(e){if(Ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ks=!1}Ws=0,_s=js=Us=null,Ys=!1,Xs=Qs=0,$s=null}function lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_s?Us.memoizedState=_s=e:_s=_s.next=e,_s}function dr(){if(null===js){var e=Us.alternate;e=null!==e?e.memoizedState:null}else e=js.next;var t=null===_s?Us.memoizedState:_s.next;if(null!==t)_s=t,js=e;else{if(null===e){if(null===Us.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(js=e).memoizedState,baseState:js.baseState,baseQueue:js.baseQueue,queue:js.queue,next:null},null===_s?Us.memoizedState=_s=e:_s=_s.next=e}return _s}function cr(e){var t=Xs;return Xs+=1,null===$s&&($s=[]),e=os($s,e,t),t=Us,null===(null===_s?t.memoizedState:_s.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?ma:fa),e}function ur(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return cr(e);if(e.$$typeof===y)return In(e)}throw Error(r(438,String(e)))}function hr(e){var t=null,i=Us.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var o=Us.alternate;null!==o&&(null!==(o=o.updateQueue)&&(null!=(o=o.memoCache)&&(t={data:o.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},Us.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index]))for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=E;return t.index++,i}function pr(e,t){return"function"===typeof t?t(e):t}function gr(e){return vr(dr(),js,e)}function vr(e,t,i){var o=e.queue;if(null===o)throw Error(r(311));o.lastRenderedReducer=i;var n=e.baseQueue,s=o.pending;if(null!==s){if(null!==n){var a=n.next;n.next=s.next,s.next=a}t.baseQueue=n=s,o.pending=null}if(s=e.baseState,null===n)e.memoizedState=s;else{var l=a=null,d=null,c=t=n.next,u=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(md&h)===h:(Ws&h)===h){var p=c.revertLane;if(0===p)null!==d&&(d=d.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===jn&&(u=!0);else{if((Ws&p)===p){c=c.next,p===jn&&(u=!0);continue}h={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(l=d=h,a=s):d=d.next=h,Us.lanes|=p,Fd|=p}h=c.action,qs&&i(s,h),s=c.hasEagerState?c.eagerState:i(s,h)}else p={lane:h,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(l=d=p,a=s):d=d.next=p,Us.lanes|=h,Fd|=h;c=c.next}while(null!==c&&c!==t);if(null===d?a=s:d.next=l,!$i(s,e.memoizedState)&&(Ia=!0,u&&null!==(i=_n)))throw i;e.memoizedState=s,e.baseState=a,e.baseQueue=d,o.lastRenderedState=s}return null===n&&(o.lanes=0),[e.memoizedState,o.dispatch]}function mr(e){var t=dr(),i=t.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=e;var o=i.dispatch,n=i.pending,s=t.memoizedState;if(null!==n){i.pending=null;var a=n=n.next;do{s=e(s,a.action),a=a.next}while(a!==n);$i(s,t.memoizedState)||(Ia=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),i.lastRenderedState=s}return[s,o]}function fr(e,t,i){var o=Us,n=dr(),s=hn;if(s){if(void 0===i)throw Error(r(407));i=i()}else i=t();var a=!$i((js||n).memoizedState,i);if(a&&(n.memoizedState=i,Ia=!0),n=n.queue,Wr(br.bind(null,o,n,e),[e]),n.getSnapshot!==t||a||null!==_s&&1&_s.memoizedState.tag){if(o.flags|=2048,Gr(9,{destroy:void 0},wr.bind(null,o,n,i,t),null),null===gd)throw Error(r(349));s||0!==(127&Ws)||Cr(o,t,i)}return i}function Cr(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=Us.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Us.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function wr(e,t,i,o){t.value=i,t.getSnapshot=o,yr(t)&&Sr(e)}function br(e,t,i){return i(function(){yr(t)&&Sr(e)})}function yr(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!$i(e,i)}catch(o){return!0}}function Sr(e){var t=Io(e,2);null!==t&&qd(t,e,2)}function xr(e){var t=lr();if("function"===typeof e){var i=e;if(e=i(),qs){we(!0);try{i()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:e},t}function Fr(e,t,i,o){return e.baseState=i,vr(e,js,"function"===typeof o?o:pr)}function Rr(e,t,i,o,n){if(ha(e))throw Error(r(485));if(null!==(e=t.action)){var s={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==L.T?i(!0):s.isTransition=!1,o(s),null===(i=t.pending)?(s.next=t.pending=s,Pr(t,s)):(s.next=i.next,t.pending=i.next=s)}}function Pr(e,t){var i=t.action,o=t.payload,n=e.state;if(t.isTransition){var s=L.T,r={};L.T=r;try{var a=i(n,o),l=L.S;null!==l&&l(r,a),Dr(e,t,a)}catch(d){Ar(e,t,d)}finally{null!==s&&null!==r.types&&(s.types=r.types),L.T=s}}else try{Dr(e,t,s=i(n,o))}catch(c){Ar(e,t,c)}}function Dr(e,t,i){null!==i&&"object"===typeof i&&"function"===typeof i.then?i.then(function(i){Er(e,t,i)},function(i){return Ar(e,t,i)}):Er(e,t,i)}function Er(e,t,i){t.status="fulfilled",t.value=i,Mr(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,Pr(e,i)))}function Ar(e,t,i){var o=e.pending;if(e.pending=null,null!==o){o=o.next;do{t.status="rejected",t.reason=i,Mr(t),t=t.next}while(t!==o)}e.action=null}function Mr(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tr(e,t){return t}function kr(e,t){if(hn){var i=gd.formState;if(null!==i){e:{var o=Us;if(hn){if(un){t:{for(var n=un,s=gn;8!==n.nodeType;){if(!s){n=null;break t}if(null===(n=Iu(n.nextSibling))){n=null;break t}}n="F!"===(s=n.data)||"F"===s?n:null}if(n){un=Iu(n.nextSibling),o="F!"===n.data;break e}}mn(o)}o=!1}o&&(t=i[0])}}return(i=lr()).memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:t},i.queue=o,i=da.bind(null,Us,o),o.dispatch=i,o=xr(!1),s=ua.bind(null,Us,!1,o.queue),n={state:t,dispatch:null,action:e,pending:null},(o=lr()).queue=n,i=Rr.bind(null,Us,n,s,i),n.dispatch=i,o.memoizedState=e,[t,i,!1]}function Ir(e){return Lr(dr(),js,e)}function Lr(e,t,i){if(t=vr(e,t,Tr)[0],e=gr(pr)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var o=cr(t)}catch(r){if(r===Zn)throw es;throw r}else o=t;var n=(t=dr()).queue,s=n.dispatch;return i!==t.memoizedState&&(Us.flags|=2048,Gr(9,{destroy:void 0},Nr.bind(null,n,i),null)),[o,s,e]}function Nr(e,t){e.action=t}function Or(e){var t=dr(),i=js;if(null!==i)return Lr(t,i,e);dr(),t=t.memoizedState;var o=(i=dr()).queue.dispatch;return i.memoizedState=e,[t,o,!1]}function Gr(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},null===(t=Us.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Us.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function Br(){return dr().memoizedState}function Vr(e,t,i,o){var n=lr();Us.flags|=e,n.memoizedState=Gr(1|t,{destroy:void 0},i,void 0===o?null:o)}function Hr(e,t,i,o){var n=dr();o=void 0===o?null:o;var s=n.memoizedState.inst;null!==js&&null!==o&&er(o,js.memoizedState.deps)?n.memoizedState=Gr(t,s,i,o):(Us.flags|=e,n.memoizedState=Gr(1|t,s,i,o))}function zr(e,t){Vr(8390656,8,e,t)}function Wr(e,t){Hr(2048,8,e,t)}function Ur(e){var t=dr().memoizedState;return function(e){Us.flags|=4;var t=Us.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Us.updateQueue=t,t.events=[e];else{var i=t.events;null===i?t.events=[e]:i.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pd))throw Error(r(440));return t.impl.apply(void 0,arguments)}}function jr(e,t){return Hr(4,2,e,t)}function _r(e,t){return Hr(4,4,e,t)}function Kr(e,t){if("function"===typeof t){e=e();var i=t(e);return function(){"function"===typeof i?i():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Yr(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,Hr(4,4,Kr.bind(null,t,e),i)}function qr(){}function Qr(e,t){var i=dr();t=void 0===t?null:t;var o=i.memoizedState;return null!==t&&er(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function Xr(e,t){var i=dr();t=void 0===t?null:t;var o=i.memoizedState;if(null!==t&&er(t,o[1]))return o[0];if(o=e(),qs){we(!0);try{e()}finally{we(!1)}}return i.memoizedState=[o,t],o}function $r(e,t,i){return void 0===i||0!==(1073741824&Ws)&&0===(261930&md)?e.memoizedState=t:(e.memoizedState=i,e=Yd(),Us.lanes|=e,Fd|=e,i)}function Zr(e,t,i,o){return $i(i,t)?i:null!==Es.current?(e=$r(e,i,o),$i(e,t)||(Ia=!0),e):0===(42&Ws)||0!==(1073741824&Ws)&&0===(261930&md)?(Ia=!0,e.memoizedState=i):(e=Yd(),Us.lanes|=e,Fd|=e,t)}function Jr(e,t,i,o,n){var s=N.p;N.p=0!==s&&8>s?s:8;var r=L.T,a={};L.T=a,ua(e,!1,t,i);try{var l=n(),d=L.S;if(null!==d&&d(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ca(e,t,function(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(e){i.push(e)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var e=0;e<i.length;e++)(0,i[e])(t)},function(e){for(o.status="rejected",o.reason=e,e=0;e<i.length;e++)(0,i[e])(void 0)}),o}(l,o),Kd());else ca(e,t,o,Kd())}catch(c){ca(e,t,{then:function(){},status:"rejected",reason:c},Kd())}finally{N.p=s,null!==r&&null!==a.types&&(r.types=a.types),L.T=r}}function ea(){}function ta(e,t,i,o){if(5!==e.tag)throw Error(r(476));var n=ia(e).queue;Jr(e,n,t,O,null===i?ea:function(){return oa(e),i(o)})}function ia(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:O},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function oa(e){var t=ia(e);null===t.next&&(t=e.alternate.memoizedState),ca(e,t.next.queue,{},Kd())}function na(){return In(ch)}function sa(){return dr().memoizedState}function ra(){return dr().memoizedState}function aa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var i=Kd(),o=bs(t,e=ws(i),i);return null!==o&&(qd(o,t,i),ys(o,t,i)),t={cache:Hn()},void(e.payload=t)}t=t.return}}function la(e,t,i){var o=Kd();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ha(e)?pa(t,i):null!==(i=ko(e,t,i,o))&&(qd(i,e,o),ga(i,t,o))}function da(e,t,i){ca(e,t,i,Kd())}function ca(e,t,i,o){var n={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(ha(e))pa(t,n);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var r=t.lastRenderedState,a=s(r,i);if(n.hasEagerState=!0,n.eagerState=a,$i(a,r))return To(e,t,n,0),null===gd&&Mo(),!1}catch(l){}if(null!==(i=ko(e,t,n,o)))return qd(i,e,o),ga(i,t,o),!0}return!1}function ua(e,t,i,o){if(o={lane:2,revertLane:Wc(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ha(e)){if(t)throw Error(r(479))}else null!==(t=ko(e,i,o,2))&&qd(t,e,2)}function ha(e){var t=e.alternate;return e===Us||null!==t&&t===Us}function pa(e,t){Ys=Ks=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function ga(e,t,i){if(0!==(4194048&i)){var o=t.lanes;i|=o&=e.pendingLanes,t.lanes=i,Le(e,i)}}var va={readContext:In,use:ur,useCallback:Js,useContext:Js,useEffect:Js,useImperativeHandle:Js,useLayoutEffect:Js,useInsertionEffect:Js,useMemo:Js,useReducer:Js,useRef:Js,useState:Js,useDebugValue:Js,useDeferredValue:Js,useTransition:Js,useSyncExternalStore:Js,useId:Js,useHostTransitionStatus:Js,useFormState:Js,useActionState:Js,useOptimistic:Js,useMemoCache:Js,useCacheRefresh:Js};va.useEffectEvent=Js;var ma={readContext:In,use:ur,useCallback:function(e,t){return lr().memoizedState=[e,void 0===t?null:t],e},useContext:In,useEffect:zr,useImperativeHandle:function(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,Vr(4194308,4,Kr.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Vr(4194308,4,e,t)},useInsertionEffect:function(e,t){Vr(4,2,e,t)},useMemo:function(e,t){var i=lr();t=void 0===t?null:t;var o=e();if(qs){we(!0);try{e()}finally{we(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=lr();if(void 0!==i){var n=i(t);if(qs){we(!0);try{i(t)}finally{we(!1)}}}else n=t;return o.memoizedState=o.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},o.queue=e,e=e.dispatch=la.bind(null,Us,e),[o.memoizedState,e]},useRef:function(e){return e={current:e},lr().memoizedState=e},useState:function(e){var t=(e=xr(e)).queue,i=da.bind(null,Us,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:qr,useDeferredValue:function(e,t){return $r(lr(),e,t)},useTransition:function(){var e=xr(!1);return e=Jr.bind(null,Us,e.queue,!0,!1),lr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=Us,n=lr();if(hn){if(void 0===i)throw Error(r(407));i=i()}else{if(i=t(),null===gd)throw Error(r(349));0!==(127&md)||Cr(o,t,i)}n.memoizedState=i;var s={value:i,getSnapshot:t};return n.queue=s,zr(br.bind(null,o,s,e),[e]),o.flags|=2048,Gr(9,{destroy:void 0},wr.bind(null,o,s,i,t),null),i},useId:function(){var e=lr(),t=gd.identifierPrefix;if(hn){var i=nn;t="_"+t+"R_"+(i=(on&~(1<<32-be(on)-1)).toString(32)+i),0<(i=Qs++)&&(t+="H"+i.toString(32)),t+="_"}else t="_"+t+"r_"+(i=Zs++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:na,useFormState:kr,useActionState:kr,useOptimistic:function(e){var t=lr();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=ua.bind(null,Us,!0,i),i.dispatch=t,[e,t]},useMemoCache:hr,useCacheRefresh:function(){return lr().memoizedState=aa.bind(null,Us)},useEffectEvent:function(e){var t=lr(),i={impl:e};return t.memoizedState=i,function(){if(0!==(2&pd))throw Error(r(440));return i.impl.apply(void 0,arguments)}}},fa={readContext:In,use:ur,useCallback:Qr,useContext:In,useEffect:Wr,useImperativeHandle:Yr,useInsertionEffect:jr,useLayoutEffect:_r,useMemo:Xr,useReducer:gr,useRef:Br,useState:function(){return gr(pr)},useDebugValue:qr,useDeferredValue:function(e,t){return Zr(dr(),js.memoizedState,e,t)},useTransition:function(){var e=gr(pr)[0],t=dr().memoizedState;return["boolean"===typeof e?e:cr(e),t]},useSyncExternalStore:fr,useId:sa,useHostTransitionStatus:na,useFormState:Ir,useActionState:Ir,useOptimistic:function(e,t){return Fr(dr(),0,e,t)},useMemoCache:hr,useCacheRefresh:ra};fa.useEffectEvent=Ur;var Ca={readContext:In,use:ur,useCallback:Qr,useContext:In,useEffect:Wr,useImperativeHandle:Yr,useInsertionEffect:jr,useLayoutEffect:_r,useMemo:Xr,useReducer:mr,useRef:Br,useState:function(){return mr(pr)},useDebugValue:qr,useDeferredValue:function(e,t){var i=dr();return null===js?$r(i,e,t):Zr(i,js.memoizedState,e,t)},useTransition:function(){var e=mr(pr)[0],t=dr().memoizedState;return["boolean"===typeof e?e:cr(e),t]},useSyncExternalStore:fr,useId:sa,useHostTransitionStatus:na,useFormState:Or,useActionState:Or,useOptimistic:function(e,t){var i=dr();return null!==js?Fr(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:hr,useCacheRefresh:ra};function wa(e,t,i,o){i=null===(i=i(o,t=e.memoizedState))||void 0===i?t:p({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}Ca.useEffectEvent=Ur;var ba={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=Kd(),n=ws(o);n.payload=t,void 0!==i&&null!==i&&(n.callback=i),null!==(t=bs(e,n,o))&&(qd(t,e,o),ys(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=Kd(),n=ws(o);n.tag=1,n.payload=t,void 0!==i&&null!==i&&(n.callback=i),null!==(t=bs(e,n,o))&&(qd(t,e,o),ys(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Kd(),o=ws(i);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=bs(e,o,i))&&(qd(t,e,i),ys(t,e,i))}};function ya(e,t,i,o,n,s,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(o,s,r):!t.prototype||!t.prototype.isPureReactComponent||(!Zi(i,o)||!Zi(n,s))}function Sa(e,t,i,o){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,o),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&ba.enqueueReplaceState(t,t.state,null)}function xa(e,t){var i=t;if("ref"in t)for(var o in i={},t)"ref"!==o&&(i[o]=t[o]);if(e=e.defaultProps)for(var n in i===t&&(i=p({},i)),e)void 0===i[n]&&(i[n]=e[n]);return i}function Fa(e){Po(e)}function Ra(e){console.error(e)}function Pa(e){Po(e)}function Da(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Ea(e,t,i){try{(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Aa(e,t,i){return(i=ws(i)).tag=3,i.payload={element:null},i.callback=function(){Da(e,t)},i}function Ma(e){return(e=ws(e)).tag=3,e}function Ta(e,t,i,o){var n=i.type.getDerivedStateFromError;if("function"===typeof n){var s=o.value;e.payload=function(){return n(s)},e.callback=function(){Ea(t,i,o)}}var r=i.stateNode;null!==r&&"function"===typeof r.componentDidCatch&&(e.callback=function(){Ea(t,i,o),"function"!==typeof n&&(null===Od?Od=new Set([this]):Od.add(this));var e=o.stack;this.componentDidCatch(o.value,{componentStack:null!==e?e:""})})}var ka=Error(r(461)),Ia=!1;function La(e,t,i,o){t.child=null===e?vs(t,null,i,o):gs(t,e.child,i,o)}function Na(e,t,i,o,n){i=i.render;var s=t.ref;if("ref"in o){var r={};for(var a in o)"ref"!==a&&(r[a]=o[a])}else r=o;return kn(t),o=tr(e,t,i,r,s,n),a=sr(),null===e||Ia?(hn&&a&&an(t),t.flags|=1,La(e,t,o,n),t.child):(rr(e,t,n),nl(e,t,n))}function Oa(e,t,i,o,n){if(null===e){var s=i.type;return"function"!==typeof s||Vo(s)||void 0!==s.defaultProps||null!==i.compare?((e=Wo(i.type,null,o,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ga(e,t,s,o,n))}if(s=e.child,!sl(e,n)){var r=s.memoizedProps;if((i=null!==(i=i.compare)?i:Zi)(r,o)&&e.ref===t.ref)return nl(e,t,n)}return t.flags|=1,(e=Ho(s,o)).ref=t.ref,e.return=t,t.child=e}function Ga(e,t,i,o,n){if(null!==e){var s=e.memoizedProps;if(Zi(s,o)&&e.ref===t.ref){if(Ia=!1,t.pendingProps=o=s,!sl(e,n))return t.lanes=e.lanes,nl(e,t,n);0!==(131072&e.flags)&&(Ia=!0)}}return ja(e,t,i,o,n)}function Ba(e,t,i,o){var n=o.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===o.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|i:i,null!==e){for(o=t.child=e.child,n=0;null!==o;)n=n|o.lanes|o.childLanes,o=o.sibling;o=n&~s}else o=0,t.child=null;return Ha(e,t,s,i,o)}if(0===(536870912&i))return o=t.lanes=536870912,Ha(e,t,null!==s?s.baseLanes|i:i,i,o);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xn(0,null!==s?s.cachePool:null),null!==s?Ms(t,s):Ts(),Gs(t)}else null!==s?(Xn(0,s.cachePool),Ms(t,s),Bs(),t.memoizedState=null):(null!==e&&Xn(0,null),Ts(),Bs());return La(e,t,n,i),t.child}function Va(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ha(e,t,i,o,n){var s=Qn();return s=null===s?null:{parent:Vn._currentValue,pool:s},t.memoizedState={baseLanes:i,cachePool:s},null!==e&&Xn(0,null),Ts(),Gs(t),null!==e&&Mn(e,t,o,!0),t.childLanes=n,null}function za(e,t){return(t=Ja({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Wa(e,t,i){return gs(t,e.child,null,i),(e=za(t,t.pendingProps)).flags|=2,Vs(t),t.memoizedState=null,e}function Ua(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof i&&"object"!==typeof i)throw Error(r(284));null!==e&&e.ref===i||(t.flags|=4194816)}}function ja(e,t,i,o,n){return kn(t),i=tr(e,t,i,o,void 0,n),o=sr(),null===e||Ia?(hn&&o&&an(t),t.flags|=1,La(e,t,i,n),t.child):(rr(e,t,n),nl(e,t,n))}function _a(e,t,i,o,n,s){return kn(t),t.updateQueue=null,i=or(t,o,i,n),ir(e),o=sr(),null===e||Ia?(hn&&o&&an(t),t.flags|=1,La(e,t,i,s),t.child):(rr(e,t,s),nl(e,t,s))}function Ka(e,t,i,o,n){if(kn(t),null===t.stateNode){var s=Oo,r=i.contextType;"object"===typeof r&&null!==r&&(s=In(r)),s=new i(o,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=ba,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=o,s.state=t.memoizedState,s.refs={},fs(t),r=i.contextType,s.context="object"===typeof r&&null!==r?In(r):Oo,s.state=t.memoizedState,"function"===typeof(r=i.getDerivedStateFromProps)&&(wa(t,i,r,o),s.state=t.memoizedState),"function"===typeof i.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(r=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),r!==s.state&&ba.enqueueReplaceState(s,s.state,null),Rs(t,o,s,n),Fs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),o=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=xa(i,a);s.props=l;var d=s.context,c=i.contextType;r=Oo,"object"===typeof c&&null!==c&&(r=In(c));var u=i.getDerivedStateFromProps;c="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||d!==r)&&Sa(t,s,o,r),ms=!1;var h=t.memoizedState;s.state=h,Rs(t,o,s,n),Fs(),d=t.memoizedState,a||h!==d||ms?("function"===typeof u&&(wa(t,i,u,o),d=t.memoizedState),(l=ms||ya(t,i,l,o,h,d,r))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=d),s.props=o,s.state=d,s.context=r,o=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),o=!1)}else{s=t.stateNode,Cs(e,t),c=xa(i,r=t.memoizedProps),s.props=c,u=t.pendingProps,h=s.context,d=i.contextType,l=Oo,"object"===typeof d&&null!==d&&(l=In(d)),(d="function"===typeof(a=i.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(r!==u||h!==l)&&Sa(t,s,o,l),ms=!1,h=t.memoizedState,s.state=h,Rs(t,o,s,n),Fs();var p=t.memoizedState;r!==u||h!==p||ms||null!==e&&null!==e.dependencies&&Tn(e.dependencies)?("function"===typeof a&&(wa(t,i,a,o),p=t.memoizedState),(c=ms||ya(t,i,c,o,h,p,l)||null!==e&&null!==e.dependencies&&Tn(e.dependencies))?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(o,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(o,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=p),s.props=o,s.state=p,s.context=l,o=c):("function"!==typeof s.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),o=!1)}return s=o,Ua(e,t),o=0!==(128&t.flags),s||o?(s=t.stateNode,i=o&&"function"!==typeof i.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&o?(t.child=gs(t,e.child,null,n),t.child=gs(t,null,i,n)):La(e,t,i,n),t.memoizedState=s.state,e=t.child):e=nl(e,t,n),e}function Ya(e,t,i,o){return bn(),t.flags|=256,La(e,t,i,o),t.child}var qa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qa(e){return{baseLanes:e,cachePool:$n()}}function Xa(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=Dd),e}function $a(e,t,i){var o,n=t.pendingProps,s=!1,a=0!==(128&t.flags);if((o=a)||(o=(null===e||null!==e.memoizedState)&&0!==(2&Hs.current)),o&&(s=!0,t.flags&=-129),o=0!==(32&t.flags),t.flags&=-33,null===e){if(hn){if(s?Ns(t):Bs(),(e=un)?null!==(e=null!==(e=Mu(e,gn))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tn?{id:on,overflow:nn}:null,retryLane:536870912,hydrationErrors:null},(i=_o(e)).return=t,t.child=i,cn=t,un=null):e=null,null===e)throw mn(t);return ku(e)?t.lanes=32:t.lanes=536870912,null}var l=n.children;return n=n.fallback,s?(Bs(),l=Ja({mode:"hidden",children:l},s=t.mode),n=Uo(n,s,i,null),l.return=t,n.return=t,l.sibling=n,t.child=l,(n=t.child).memoizedState=Qa(i),n.childLanes=Xa(e,o,i),t.memoizedState=qa,Va(null,n)):(Ns(t),Za(t,l))}var d=e.memoizedState;if(null!==d&&null!==(l=d.dehydrated)){if(a)256&t.flags?(Ns(t),t.flags&=-257,t=el(e,t,i)):null!==t.memoizedState?(Bs(),t.child=e.child,t.flags|=128,t=null):(Bs(),l=n.fallback,s=t.mode,n=Ja({mode:"visible",children:n.children},s),(l=Uo(l,s,i,null)).flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,gs(t,e.child,null,i),(n=t.child).memoizedState=Qa(i),n.childLanes=Xa(e,o,i),t.memoizedState=qa,t=Va(null,n));else if(Ns(t),ku(l)){if(o=l.nextSibling&&l.nextSibling.dataset)var c=o.dgst;o=c,(n=Error(r(419))).stack="",n.digest=o,Sn({value:n,source:null,stack:null}),t=el(e,t,i)}else if(Ia||Mn(e,t,i,!1),o=0!==(i&e.childLanes),Ia||o){if(null!==(o=gd)&&(0!==(n=Ne(o,i))&&n!==d.retryLane))throw d.retryLane=n,Io(e,n),qd(o,e,n),ka;Tu(l)||rc(),t=el(e,t,i)}else Tu(l)?(t.flags|=192,t.child=e.child,t=null):(e=d.treeContext,un=Iu(l.nextSibling),cn=t,hn=!0,pn=null,gn=!1,null!==e&&dn(t,e),(t=Za(t,n.children)).flags|=4096);return t}return s?(Bs(),l=n.fallback,s=t.mode,c=(d=e.child).sibling,(n=Ho(d,{mode:"hidden",children:n.children})).subtreeFlags=65011712&d.subtreeFlags,null!==c?l=Ho(c,l):(l=Uo(l,s,i,null)).flags|=2,l.return=t,n.return=t,n.sibling=l,t.child=n,Va(null,n),n=t.child,null===(l=e.child.memoizedState)?l=Qa(i):(null!==(s=l.cachePool)?(d=Vn._currentValue,s=s.parent!==d?{parent:d,pool:d}:s):s=$n(),l={baseLanes:l.baseLanes|i,cachePool:s}),n.memoizedState=l,n.childLanes=Xa(e,o,i),t.memoizedState=qa,Va(e.child,n)):(Ns(t),e=(i=e.child).sibling,(i=Ho(i,{mode:"visible",children:n.children})).return=t,i.sibling=null,null!==e&&(null===(o=t.deletions)?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=i,t.memoizedState=null,i)}function Za(e,t){return(t=Ja({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ja(e,t){return(e=Bo(22,e,null,t)).lanes=0,e}function el(e,t,i){return gs(t,e.child,null,i),(e=Za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,i){e.lanes|=t;var o=e.alternate;null!==o&&(o.lanes|=t),En(e.return,t,i)}function il(e,t,i,o,n,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:n,treeForkCount:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=o,r.tail=i,r.tailMode=n,r.treeForkCount=s)}function ol(e,t,i){var o=t.pendingProps,n=o.revealOrder,s=o.tail;o=o.children;var r=Hs.current,a=0!==(2&r);if(a?(r=1&r|2,t.flags|=128):r&=1,z(Hs,r),La(e,t,o,i),o=hn?Zo:0,!a&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,i,t);else if(19===e.tag)tl(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(i=t.child,n=null;null!==i;)null!==(e=i.alternate)&&null===zs(e)&&(n=i),i=i.sibling;null===(i=n)?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),il(t,!1,n,i,s,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===zs(e)){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}il(t,!0,i,null,s,o);break;case"together":il(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function nl(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Fd|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(Mn(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(i=Ho(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Ho(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Tn(e))}function rl(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ia=!0;else{if(!sl(e,i)&&0===(128&t.flags))return Ia=!1,function(e,t,i){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),Pn(0,Vn,e.memoizedState.cache),bn();break;case 27:case 5:X(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:Pn(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Os(t),null;break;case 13:var o=t.memoizedState;if(null!==o)return null!==o.dehydrated?(Ns(t),t.flags|=128,null):0!==(i&t.child.childLanes)?$a(e,t,i):(Ns(t),null!==(e=nl(e,t,i))?e.sibling:null);Ns(t);break;case 19:var n=0!==(128&e.flags);if((o=0!==(i&t.childLanes))||(Mn(e,t,i,!1),o=0!==(i&t.childLanes)),n){if(o)return ol(e,t,i);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),z(Hs,Hs.current),o)break;return null;case 22:return t.lanes=0,Ba(e,t,i,t.pendingProps);case 24:Pn(0,Vn,e.memoizedState.cache)}return nl(e,t,i)}(e,t,i);Ia=0!==(131072&e.flags)}else Ia=!1,hn&&0!==(1048576&t.flags)&&rn(t,Zo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=ns(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var n=e.$$typeof;if(n===S){t.tag=11,t=Na(null,t,e,o,i);break e}if(n===R){t.tag=14,t=Oa(null,t,e,o,i);break e}}throw t=k(e)||e,Error(r(306,t,""))}Vo(e)?(o=xa(e,o),t.tag=1,t=Ka(null,t,e,o,i)):(t.tag=0,t=ja(null,t,e,o,i))}return t;case 0:return ja(e,t,t.type,t.pendingProps,i);case 1:return Ka(e,t,o=t.type,n=xa(o,t.pendingProps),i);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(r(387));o=t.pendingProps;var s=t.memoizedState;n=s.element,Cs(e,t),Rs(t,o,null,i);var a=t.memoizedState;if(o=a.cache,Pn(0,Vn,o),o!==s.cache&&An(t,[Vn],i,!0),Fs(),o=a.element,s.isDehydrated){if(s={element:o,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ya(e,t,o,i);break e}if(o!==n){Sn(n=qo(Error(r(424)),t)),t=Ya(e,t,o,i);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(un=Iu(e.firstChild),cn=t,hn=!0,pn=null,gn=!0,i=vs(t,null,o,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(bn(),o===n){t=nl(e,t,i);break e}La(e,t,o,i)}t=t.child}return t;case 26:return Ua(e,t),null===e?(i=_u(t.type,null,t.pendingProps,null))?t.memoizedState=i:hn||(i=t.type,e=t.pendingProps,(o=mu(K.current).createElement(i))[ze]=t,o[We]=e,hu(o,i,e),et(o),t.stateNode=o):t.memoizedState=_u(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&hn&&(o=t.stateNode=Gu(t.type,t.pendingProps,K.current),cn=t,gn=!0,n=un,Pu(t.type)?(Lu=n,un=Iu(o.firstChild)):un=n),La(e,t,t.pendingProps.children,i),Ua(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hn&&((n=o=un)&&(null!==(o=function(e,t,i,o){for(;1===e.nodeType;){var n=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(o){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==n.rel||e.getAttribute("href")!==(null==n.href||""===n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===s)return e}if(null===(e=Iu(e.nextSibling)))break}return null}(o,t.type,t.pendingProps,gn))?(t.stateNode=o,cn=t,un=Iu(o.firstChild),gn=!1,n=!0):n=!1),n||mn(t)),X(t),n=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,wu(n,s)?o=null:null!==a&&wu(n,a)&&(t.flags|=32),null!==t.memoizedState&&(n=tr(e,t,nr,null,null,i),ch._currentValue=n),Ua(e,t),La(e,t,o,i),t.child;case 6:return null===e&&hn&&((e=i=un)&&(null!==(i=function(e,t,i){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!i)return null;if(null===(e=Iu(e.nextSibling)))return null}return e}(i,t.pendingProps,gn))?(t.stateNode=i,cn=t,un=null,e=!0):e=!1),e||mn(t)),null;case 13:return $a(e,t,i);case 4:return q(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=gs(t,null,o,i):La(e,t,o,i),t.child;case 11:return Na(e,t,t.type,t.pendingProps,i);case 7:return La(e,t,t.pendingProps,i),t.child;case 8:case 12:return La(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,Pn(0,t.type,o.value),La(e,t,o.children,i),t.child;case 9:return n=t.type._context,o=t.pendingProps.children,kn(t),o=o(n=In(n)),t.flags|=1,La(e,t,o,i),t.child;case 14:return Oa(e,t,t.type,t.pendingProps,i);case 15:return Ga(e,t,t.type,t.pendingProps,i);case 19:return ol(e,t,i);case 31:return function(e,t,i){var o=t.pendingProps,n=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hn){if("hidden"===o.mode)return e=za(t,o),t.lanes=536870912,Va(null,e);if(Os(t),(e=un)?null!==(e=null!==(e=Mu(e,gn))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tn?{id:on,overflow:nn}:null,retryLane:536870912,hydrationErrors:null},(i=_o(e)).return=t,t.child=i,cn=t,un=null):e=null,null===e)throw mn(t);return t.lanes=536870912,null}return za(t,o)}var s=e.memoizedState;if(null!==s){var a=s.dehydrated;if(Os(t),n)if(256&t.flags)t.flags&=-257,t=Wa(e,t,i);else{if(null===t.memoizedState)throw Error(r(558));t.child=e.child,t.flags|=128,t=null}else if(Ia||Mn(e,t,i,!1),n=0!==(i&e.childLanes),Ia||n){if(null!==(o=gd)&&0!==(a=Ne(o,i))&&a!==s.retryLane)throw s.retryLane=a,Io(e,a),qd(o,e,a),ka;rc(),t=Wa(e,t,i)}else e=s.treeContext,un=Iu(a.nextSibling),cn=t,hn=!0,pn=null,gn=!1,null!==e&&dn(t,e),(t=za(t,o)).flags|=4096;return t}return(e=Ho(e.child,{mode:o.mode,children:o.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,i);case 22:return Ba(e,t,i,t.pendingProps);case 24:return kn(t),o=In(Vn),null===e?(null===(n=Qn())&&(n=gd,s=Hn(),n.pooledCache=s,s.refCount++,null!==s&&(n.pooledCacheLanes|=i),n=s),t.memoizedState={parent:o,cache:n},fs(t),Pn(0,Vn,n)):(0!==(e.lanes&i)&&(Cs(e,t),Rs(t,null,null,i),Fs()),n=e.memoizedState,s=t.memoizedState,n.parent!==o?(n={parent:o,cache:o},t.memoizedState=n,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=n),Pn(0,Vn,o)):(o=s.cache,Pn(0,Vn,o),o!==n.cache&&An(t,[Vn],i,!0))),La(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function al(e){e.flags|=4}function ll(e,t,i,o,n){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&n)===n)if(e.stateNode.complete)e.flags|=8192;else{if(!oc())throw ss=ts,Jn;e.flags|=8192}}else e.flags&=-16777217}function dl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!nh(t)){if(!oc())throw ss=ts,Jn;e.flags|=8192}}function cl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Me():536870912,e.lanes|=t,Ed|=t)}function ul(e,t){if(!hn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;null!==i;)null!==i.alternate&&(o=i),i=i.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,o=0;if(t)for(var n=e.child;null!==n;)i|=n.lanes|n.childLanes,o|=65011712&n.subtreeFlags,o|=65011712&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)i|=n.lanes|n.childLanes,o|=n.subtreeFlags,o|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function pl(e,t,i){var o=t.pendingProps;switch(ln(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return i=t.stateNode,o=null,null!==e&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Dn(Vn),Q(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(wn(t)?al(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,yn())),hl(t),null;case 26:var n=t.type,s=t.memoizedState;return null===e?(al(t),null!==s?(hl(t),dl(t,s)):(hl(t),ll(t,n,0,0,i))):s?s!==e.memoizedState?(al(t),hl(t),dl(t,s)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==o&&al(t),hl(t),ll(t,n,0,0,i)),null;case 27:if($(t),i=K.current,n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==o&&al(t);else{if(!o){if(null===t.stateNode)throw Error(r(166));return hl(t),null}e=j.current,wn(t)?fn(t):(e=Gu(n,o,i),t.stateNode=e,al(t))}return hl(t),null;case 5:if($(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==o&&al(t);else{if(!o){if(null===t.stateNode)throw Error(r(166));return hl(t),null}if(s=j.current,wn(t))fn(t);else{var a=mu(K.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(s=a.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof o.is?a.createElement("select",{is:o.is}):a.createElement("select"),o.multiple?s.multiple=!0:o.size&&(s.size=o.size);break;default:s="string"===typeof o.is?a.createElement(n,{is:o.is}):a.createElement(n)}}s[ze]=t,s[We]=o;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)s.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=s;e:switch(hu(s,n,o),n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&al(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==o&&al(t);else{if("string"!==typeof o&&null===t.stateNode)throw Error(r(166));if(e=K.current,wn(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,null!==(n=cn))switch(n.tag){case 27:case 5:o=n.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===i||null!==o&&!0===o.suppressHydrationWarning||du(e.nodeValue,i)))||mn(t,!0)}else(e=mu(e).createTextNode(o))[ze]=t,t.stateNode=e}return hl(t),null;case 31:if(i=t.memoizedState,null===e||null!==e.memoizedState){if(o=wn(t),null!==i){if(null===e){if(!o)throw Error(r(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(557));e[ze]=t}else bn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else i=yn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return 256&t.flags?(Vs(t),t):(Vs(t),null);if(0!==(128&t.flags))throw Error(r(558))}return hl(t),null;case 13:if(o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(n=wn(t),null!==o&&null!==o.dehydrated){if(null===e){if(!n)throw Error(r(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(r(317));n[ze]=t}else bn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),n=!1}else n=yn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return 256&t.flags?(Vs(t),t):(Vs(t),null)}return Vs(t),0!==(128&t.flags)?(t.lanes=i,t):(i=null!==o,e=null!==e&&null!==e.memoizedState,i&&(n=null,null!==(o=t.child).alternate&&null!==o.alternate.memoizedState&&null!==o.alternate.memoizedState.cachePool&&(n=o.alternate.memoizedState.cachePool.pool),s=null,null!==o.memoizedState&&null!==o.memoizedState.cachePool&&(s=o.memoizedState.cachePool.pool),s!==n&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),cl(t,t.updateQueue),hl(t),null);case 4:return Q(),null===e&&Jc(t.stateNode.containerInfo),hl(t),null;case 10:return Dn(t.type),hl(t),null;case 19:if(H(Hs),null===(o=t.memoizedState))return hl(t),null;if(n=0!==(128&t.flags),null===(s=o.rendering))if(n)ul(o,!1);else{if(0!==xd||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=zs(e))){for(t.flags|=128,ul(o,!1),e=s.updateQueue,t.updateQueue=e,cl(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)zo(i,e),i=i.sibling;return z(Hs,1&Hs.current|2),hn&&sn(t,o.treeForkCount),t.child}e=e.sibling}null!==o.tail&&le()>Ld&&(t.flags|=128,n=!0,ul(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=zs(s))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,cl(t,e),ul(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!hn)return hl(t),null}else 2*le()-o.renderingStartTime>Ld&&536870912!==i&&(t.flags|=128,n=!0,ul(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=o.last)?e.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=le(),e.sibling=null,i=Hs.current,z(Hs,n?1&i|2:1&i),hn&&sn(t,o.treeForkCount),e):(hl(t),null);case 22:case 23:return Vs(t),ks(),o=null!==t.memoizedState,null!==e?null!==e.memoizedState!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?0!==(536870912&i)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(i=t.updateQueue)&&cl(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),o=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),null!==e&&H(qn),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Dn(Vn),hl(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function gl(e,t){switch(ln(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Dn(Vn),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(Vs(t),null===t.alternate)throw Error(r(340));bn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Vs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));bn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return H(Hs),null;case 4:return Q(),null;case 10:return Dn(t.type),null;case 22:case 23:return Vs(t),ks(),null!==e&&H(qn),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Dn(Vn),null;default:return null}}function vl(e,t){switch(ln(t),t.tag){case 3:Dn(Vn),Q();break;case 26:case 27:case 5:$(t);break;case 4:Q();break;case 31:null!==t.memoizedState&&Vs(t);break;case 13:Vs(t);break;case 19:H(Hs);break;case 10:Dn(t.type);break;case 22:case 23:Vs(t),ks(),null!==e&&H(qn);break;case 24:Dn(Vn)}}function ml(e,t){try{var i=t.updateQueue,o=null!==i?i.lastEffect:null;if(null!==o){var n=o.next;i=n;do{if((i.tag&e)===e){o=void 0;var s=i.create,r=i.inst;o=s(),r.destroy=o}i=i.next}while(i!==n)}}catch(a){xc(t,t.return,a)}}function fl(e,t,i){try{var o=t.updateQueue,n=null!==o?o.lastEffect:null;if(null!==n){var s=n.next;o=s;do{if((o.tag&e)===e){var r=o.inst,a=r.destroy;if(void 0!==a){r.destroy=void 0,n=t;var l=i,d=a;try{d()}catch(c){xc(n,l,c)}}}o=o.next}while(o!==s)}}catch(c){xc(t,t.return,c)}}function Cl(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;try{Ds(t,i)}catch(o){xc(e,e.return,o)}}}function wl(e,t,i){i.props=xa(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){xc(e,t,o)}}function bl(e,t){try{var i=e.ref;if(null!==i){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;default:o=e.stateNode}"function"===typeof i?e.refCleanup=i(o):i.current=o}}catch(n){xc(e,t,n)}}function yl(e,t){var i=e.ref,o=e.refCleanup;if(null!==i)if("function"===typeof o)try{o()}catch(n){xc(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof i)try{i(null)}catch(s){xc(e,t,s)}else i.current=null}function Sl(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(n){xc(e,e.return,n)}}function xl(e,t,i){try{var o=e.stateNode;!function(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,s=null,a=null,l=null,d=null,c=null,u=null;for(g in i){var h=i[g];if(i.hasOwnProperty(g)&&null!=h)switch(g){case"checked":case"value":break;case"defaultValue":d=h;default:o.hasOwnProperty(g)||cu(e,t,g,null,o,h)}}for(var p in o){var g=o[p];if(h=i[p],o.hasOwnProperty(p)&&(null!=g||null!=h))switch(p){case"type":s=g;break;case"name":n=g;break;case"checked":c=g;break;case"defaultChecked":u=g;break;case"value":a=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(null!=g)throw Error(r(137,t));break;default:g!==h&&cu(e,t,p,g,o,h)}}return void Ct(e,a,l,d,c,u,s,n);case"select":for(s in g=a=l=p=null,i)if(d=i[s],i.hasOwnProperty(s)&&null!=d)switch(s){case"value":break;case"multiple":g=d;default:o.hasOwnProperty(s)||cu(e,t,s,null,o,d)}for(n in o)if(s=o[n],d=i[n],o.hasOwnProperty(n)&&(null!=s||null!=d))switch(n){case"value":p=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==d&&cu(e,t,n,s,o,d)}return t=l,i=a,o=g,void(null!=p?yt(e,!!i,p,!1):!!o!==!!i&&(null!=t?yt(e,!!i,t,!0):yt(e,!!i,i?[]:"",!1)));case"textarea":for(l in g=p=null,i)if(n=i[l],i.hasOwnProperty(l)&&null!=n&&!o.hasOwnProperty(l))switch(l){case"value":case"children":break;default:cu(e,t,l,null,o,n)}for(a in o)if(n=o[a],s=i[a],o.hasOwnProperty(a)&&(null!=n||null!=s))switch(a){case"value":p=n;break;case"defaultValue":g=n;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=n)throw Error(r(91));break;default:n!==s&&cu(e,t,a,n,o,s)}return void St(e,p,g);case"option":for(var v in i)if(p=i[v],i.hasOwnProperty(v)&&null!=p&&!o.hasOwnProperty(v))if("selected"===v)e.selected=!1;else cu(e,t,v,null,o,p);for(d in o)if(p=o[d],g=i[d],o.hasOwnProperty(d)&&p!==g&&(null!=p||null!=g))if("selected"===d)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else cu(e,t,d,p,o,g);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in i)p=i[m],i.hasOwnProperty(m)&&null!=p&&!o.hasOwnProperty(m)&&cu(e,t,m,null,o,p);for(c in o)if(p=o[c],g=i[c],o.hasOwnProperty(c)&&p!==g&&(null!=p||null!=g))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:cu(e,t,c,p,o,g)}return;default:if(Et(t)){for(var f in i)p=i[f],i.hasOwnProperty(f)&&void 0!==p&&!o.hasOwnProperty(f)&&uu(e,t,f,void 0,o,p);for(u in o)p=o[u],g=i[u],!o.hasOwnProperty(u)||p===g||void 0===p&&void 0===g||uu(e,t,u,p,o,g);return}}for(var C in i)p=i[C],i.hasOwnProperty(C)&&null!=p&&!o.hasOwnProperty(C)&&cu(e,t,C,null,o,p);for(h in o)p=o[h],g=i[h],!o.hasOwnProperty(h)||p===g||null==p&&null==g||cu(e,t,h,p,o,g)}(o,e.type,i,t),o[We]=t}catch(n){xc(e,e.return,n)}}function Fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Pu(e.type)||4===e.tag}function Rl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Pu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Pl(e,t,i){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?(9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).insertBefore(e,t):((t=9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=kt));else if(4!==o&&(27===o&&Pu(e.type)&&(i=e.stateNode,t=null),null!==(e=e.child)))for(Pl(e,t,i),e=e.sibling;null!==e;)Pl(e,t,i),e=e.sibling}function Dl(e,t,i){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==o&&(27===o&&Pu(e.type)&&(i=e.stateNode),null!==(e=e.child)))for(Dl(e,t,i),e=e.sibling;null!==e;)Dl(e,t,i),e=e.sibling}function El(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);hu(t,o,i),t[ze]=e,t[We]=i}catch(s){xc(e,e.return,s)}}var Al=!1,Ml=!1,Tl=!1,kl="function"===typeof WeakSet?WeakSet:Set,Il=null;function Ll(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:ql(e,i),4&o&&ml(5,i);break;case 1:if(ql(e,i),4&o)if(e=i.stateNode,null===t)try{e.componentDidMount()}catch(r){xc(i,i.return,r)}else{var n=xa(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){xc(i,i.return,a)}}64&o&&Cl(i),512&o&&bl(i,i.return);break;case 3:if(ql(e,i),64&o&&null!==(e=i.updateQueue)){if(t=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:t=i.child.stateNode}try{Ds(e,t)}catch(r){xc(i,i.return,r)}}break;case 27:null===t&&4&o&&El(i);case 26:case 5:ql(e,i),null===t&&4&o&&Sl(i),512&o&&bl(i,i.return);break;case 12:ql(e,i);break;case 31:ql(e,i),4&o&&Hl(e,i);break;case 13:ql(e,i),4&o&&zl(e,i),64&o&&(null!==(e=i.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var i=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==i.readyState)t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}(e,i=Dc.bind(null,i))));break;case 22:if(!(o=null!==i.memoizedState||Al)){t=null!==t&&null!==t.memoizedState||Ml,n=Al;var s=Ml;Al=o,(Ml=t)&&!s?Xl(e,i,0!==(8772&i.subtreeFlags)):ql(e,i),Al=n,Ml=s}break;case 30:break;default:ql(e,i)}}function Nl(e){var t=e.alternate;null!==t&&(e.alternate=null,Nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ol=null,Gl=!1;function Bl(e,t,i){for(i=i.child;null!==i;)Vl(e,t,i),i=i.sibling}function Vl(e,t,i){if(Ce&&"function"===typeof Ce.onCommitFiberUnmount)try{Ce.onCommitFiberUnmount(fe,i)}catch(s){}switch(i.tag){case 26:Ml||yl(i,t),Bl(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:Ml||yl(i,t);var o=Ol,n=Gl;Pu(i.type)&&(Ol=i.stateNode,Gl=!1),Bl(e,t,i),Bu(i.stateNode),Ol=o,Gl=n;break;case 5:Ml||yl(i,t);case 6:if(o=Ol,n=Gl,Ol=null,Bl(e,t,i),Gl=n,null!==(Ol=o))if(Gl)try{(9===Ol.nodeType?Ol.body:"HTML"===Ol.nodeName?Ol.ownerDocument.body:Ol).removeChild(i.stateNode)}catch(r){xc(i,t,r)}else try{Ol.removeChild(i.stateNode)}catch(r){xc(i,t,r)}break;case 18:null!==Ol&&(Gl?(Du(9===(e=Ol).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,i.stateNode),jh(e)):Du(Ol,i.stateNode));break;case 4:o=Ol,n=Gl,Ol=i.stateNode.containerInfo,Gl=!0,Bl(e,t,i),Ol=o,Gl=n;break;case 0:case 11:case 14:case 15:fl(2,i,t),Ml||fl(4,i,t),Bl(e,t,i);break;case 1:Ml||(yl(i,t),"function"===typeof(o=i.stateNode).componentWillUnmount&&wl(i,t,o)),Bl(e,t,i);break;case 21:Bl(e,t,i);break;case 22:Ml=(o=Ml)||null!==i.memoizedState,Bl(e,t,i),Ml=o;break;default:Bl(e,t,i)}}function Hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{jh(e)}catch(i){xc(t,t.return,i)}}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{jh(e)}catch(i){xc(t,t.return,i)}}function Wl(e,t){var i=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){if(!i.has(t)){i.add(t);var o=Ec.bind(null,e,t);t.then(o,o)}})}function Ul(e,t){var i=t.deletions;if(null!==i)for(var o=0;o<i.length;o++){var n=i[o],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(Pu(l.type)){Ol=l.stateNode,Gl=!1;break e}break;case 5:Ol=l.stateNode,Gl=!1;break e;case 3:case 4:Ol=l.stateNode.containerInfo,Gl=!0;break e}l=l.return}if(null===Ol)throw Error(r(160));Vl(s,a,n),Ol=null,Gl=!1,null!==(s=n.alternate)&&(s.return=null),n.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)_l(t,e),t=t.sibling}var jl=null;function _l(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ul(t,e),Kl(e),4&o&&(fl(3,e,e.return),ml(3,e),fl(5,e,e.return));break;case 1:Ul(t,e),Kl(e),512&o&&(Ml||null===i||yl(i,i.return)),64&o&&Al&&(null!==(e=e.updateQueue)&&(null!==(o=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?o:i.concat(o))));break;case 26:var n=jl;if(Ul(t,e),Kl(e),512&o&&(Ml||null===i||yl(i,i.return)),4&o){var s=null!==i?i.memoizedState:null;if(o=e.memoizedState,null===i)if(null===o)if(null===e.stateNode){e:{o=e.type,i=e.memoizedProps,n=n.ownerDocument||n;t:switch(o){case"title":(!(s=n.getElementsByTagName("title")[0])||s[qe]||s[ze]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=n.createElement(o),n.head.insertBefore(s,n.querySelector("head > title"))),hu(s,o,i),s[ze]=e,et(s),o=s;break e;case"link":var a=ih("link","href",n).get(o+(i.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==i.href||""===i.href?null:i.href)&&s.getAttribute("rel")===(null==i.rel?null:i.rel)&&s.getAttribute("title")===(null==i.title?null:i.title)&&s.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){a.splice(l,1);break t}hu(s=n.createElement(o),o,i),n.head.appendChild(s);break;case"meta":if(a=ih("meta","content",n).get(o+(i.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==i.content?null:""+i.content)&&s.getAttribute("name")===(null==i.name?null:i.name)&&s.getAttribute("property")===(null==i.property?null:i.property)&&s.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&s.getAttribute("charset")===(null==i.charSet?null:i.charSet)){a.splice(l,1);break t}hu(s=n.createElement(o),o,i),n.head.appendChild(s);break;default:throw Error(r(468,o))}s[ze]=e,et(s),o=s}e.stateNode=o}else oh(n,e.type,e.stateNode);else e.stateNode=$u(n,o,e.memoizedProps);else s!==o?(null===s?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):s.count--,null===o?oh(n,e.type,e.stateNode):$u(n,o,e.memoizedProps)):null===o&&null!==e.stateNode&&xl(e,e.memoizedProps,i.memoizedProps)}break;case 27:Ul(t,e),Kl(e),512&o&&(Ml||null===i||yl(i,i.return)),null!==i&&4&o&&xl(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Ul(t,e),Kl(e),512&o&&(Ml||null===i||yl(i,i.return)),32&e.flags){n=e.stateNode;try{Ft(n,"")}catch(v){xc(e,e.return,v)}}4&o&&null!=e.stateNode&&xl(e,n=e.memoizedProps,null!==i?i.memoizedProps:n),1024&o&&(Tl=!0);break;case 6:if(Ul(t,e),Kl(e),4&o){if(null===e.stateNode)throw Error(r(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(v){xc(e,e.return,v)}}break;case 3:if(th=null,n=jl,jl=zu(t.containerInfo),Ul(t,e),jl=n,Kl(e),4&o&&null!==i&&i.memoizedState.isDehydrated)try{jh(t.containerInfo)}catch(v){xc(e,e.return,v)}Tl&&(Tl=!1,Yl(e));break;case 4:o=jl,jl=zu(e.stateNode.containerInfo),Ul(t,e),Kl(e),jl=o;break;case 12:default:Ul(t,e),Kl(e);break;case 31:case 19:Ul(t,e),Kl(e),4&o&&(null!==(o=e.updateQueue)&&(e.updateQueue=null,Wl(e,o)));break;case 13:Ul(t,e),Kl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==i&&null!==i.memoizedState)&&(kd=le()),4&o&&(null!==(o=e.updateQueue)&&(e.updateQueue=null,Wl(e,o)));break;case 22:n=null!==e.memoizedState;var d=null!==i&&null!==i.memoizedState,c=Al,u=Ml;if(Al=c||n,Ml=u||d,Ul(t,e),Ml=u,Al=c,Kl(e),8192&o)e:for(t=e.stateNode,t._visibility=n?-2&t._visibility:1|t._visibility,n&&(null===i||d||Al||Ml||Ql(e)),i=null,t=e;;){if(5===t.tag||26===t.tag){if(null===i){d=i=t;try{if(s=d.stateNode,n)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=d.stateNode;var h=d.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(v){xc(d,d.return,v)}}}else if(6===t.tag){if(null===i){d=t;try{d.stateNode.nodeValue=n?"":d.memoizedProps}catch(v){xc(d,d.return,v)}}}else if(18===t.tag){if(null===i){d=t;try{var g=d.stateNode;n?Eu(g,!0):Eu(d.stateNode,!1)}catch(v){xc(d,d.return,v)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&o&&(null!==(o=e.updateQueue)&&(null!==(i=o.retryQueue)&&(o.retryQueue=null,Wl(e,i))));case 30:case 21:}}function Kl(e){var t=e.flags;if(2&t){try{for(var i,o=e.return;null!==o;){if(Fl(o)){i=o;break}o=o.return}if(null==i)throw Error(r(160));switch(i.tag){case 27:var n=i.stateNode;Dl(e,Rl(e),n);break;case 5:var s=i.stateNode;32&i.flags&&(Ft(s,""),i.flags&=-33),Dl(e,Rl(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;Pl(e,Rl(e),a);break;default:throw Error(r(161))}}catch(l){xc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Yl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Yl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ll(e,t.alternate,t),t=t.sibling}function Ql(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:fl(4,t,t.return),Ql(t);break;case 1:yl(t,t.return);var i=t.stateNode;"function"===typeof i.componentWillUnmount&&wl(t,t.return,i),Ql(t);break;case 27:Bu(t.stateNode);case 26:case 5:yl(t,t.return),Ql(t);break;case 22:null===t.memoizedState&&Ql(t);break;default:Ql(t)}e=e.sibling}}function Xl(e,t,i){for(i=i&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var o=t.alternate,n=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:Xl(n,s,i),ml(4,s);break;case 1:if(Xl(n,s,i),"function"===typeof(n=(o=s).stateNode).componentDidMount)try{n.componentDidMount()}catch(d){xc(o,o.return,d)}if(null!==(n=(o=s).updateQueue)){var a=o.stateNode;try{var l=n.shared.hiddenCallbacks;if(null!==l)for(n.shared.hiddenCallbacks=null,n=0;n<l.length;n++)Ps(l[n],a)}catch(d){xc(o,o.return,d)}}i&&64&r&&Cl(s),bl(s,s.return);break;case 27:El(s);case 26:case 5:Xl(n,s,i),i&&null===o&&4&r&&Sl(s),bl(s,s.return);break;case 12:Xl(n,s,i);break;case 31:Xl(n,s,i),i&&4&r&&Hl(n,s);break;case 13:Xl(n,s,i),i&&4&r&&zl(n,s);break;case 22:null===s.memoizedState&&Xl(n,s,i),bl(s,s.return);break;case 30:break;default:Xl(n,s,i)}t=t.sibling}}function $l(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&e.refCount++,null!=i&&zn(i))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zn(e))}function Jl(e,t,i,o){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ed(e,t,i,o),t=t.sibling}function ed(e,t,i,o){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Jl(e,t,i,o),2048&n&&ml(9,t);break;case 1:case 31:case 13:default:Jl(e,t,i,o);break;case 3:Jl(e,t,i,o),2048&n&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zn(e)));break;case 12:if(2048&n){Jl(e,t,i,o),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,a=s.onPostCommit;"function"===typeof a&&a(r,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){xc(t,t.return,l)}}else Jl(e,t,i,o);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,null!==t.memoizedState?2&s._visibility?Jl(e,t,i,o):id(e,t):2&s._visibility?Jl(e,t,i,o):(s._visibility|=2,td(e,t,i,o,0!==(10256&t.subtreeFlags)||!1)),2048&n&&$l(r,t);break;case 24:Jl(e,t,i,o),2048&n&&Zl(t.alternate,t)}}function td(e,t,i,o,n){for(n=n&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,r=t,a=i,l=o,d=r.flags;switch(r.tag){case 0:case 11:case 15:td(s,r,a,l,n),ml(8,r);break;case 23:break;case 22:var c=r.stateNode;null!==r.memoizedState?2&c._visibility?td(s,r,a,l,n):id(s,r):(c._visibility|=2,td(s,r,a,l,n)),n&&2048&d&&$l(r.alternate,r);break;case 24:td(s,r,a,l,n),n&&2048&d&&Zl(r.alternate,r);break;default:td(s,r,a,l,n)}t=t.sibling}}function id(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,o=t,n=o.flags;switch(o.tag){case 22:id(i,o),2048&n&&$l(o.alternate,o);break;case 24:id(i,o),2048&n&&Zl(o.alternate,o);break;default:id(i,o)}t=t.sibling}}var od=8192;function nd(e,t,i){if(e.subtreeFlags&od)for(e=e.child;null!==e;)sd(e,t,i),e=e.sibling}function sd(e,t,i){switch(e.tag){case 26:nd(e,t,i),e.flags&od&&null!==e.memoizedState&&function(e,t,i,o){if("stylesheet"===i.type&&("string"!==typeof o.media||!1!==matchMedia(o.media).matches)&&0===(4&i.state.loading)){if(null===i.instance){var n=Ku(o.href),s=t.querySelector(Yu(n));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=rh.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=s,void et(s);s=t.ownerDocument||t,o=qu(o),(n=Vu.get(n))&&Ju(o,n),et(s=s.createElement("link"));var r=s;r._p=new Promise(function(e,t){r.onload=e,r.onerror=t}),hu(s,"link",o),i.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&0===(3&i.state.loading)&&(e.count++,i=rh.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}(i,jl,e.memoizedState,e.memoizedProps);break;case 5:default:nd(e,t,i);break;case 3:case 4:var o=jl;jl=zu(e.stateNode.containerInfo),nd(e,t,i),jl=o;break;case 22:null===e.memoizedState&&(null!==(o=e.alternate)&&null!==o.memoizedState?(o=od,od=16777216,nd(e,t,i),od=o):nd(e,t,i))}}function rd(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function ad(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var o=t[i];Il=o,cd(o,e)}rd(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)ld(e),e=e.sibling}function ld(e){switch(e.tag){case 0:case 11:case 15:ad(e),2048&e.flags&&fl(9,e,e.return);break;case 3:case 12:default:ad(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,dd(e)):ad(e)}}function dd(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var o=t[i];Il=o,cd(o,e)}rd(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:fl(8,t,t.return),dd(t);break;case 22:2&(i=t.stateNode)._visibility&&(i._visibility&=-3,dd(t));break;default:dd(t)}e=e.sibling}}function cd(e,t){for(;null!==Il;){var i=Il;switch(i.tag){case 0:case 11:case 15:fl(8,i,t);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var o=i.memoizedState.cachePool.pool;null!=o&&o.refCount++}break;case 24:zn(i.memoizedState.cache)}if(null!==(o=i.child))o.return=i,Il=o;else e:for(i=e;null!==Il;){var n=(o=Il).sibling,s=o.return;if(Nl(o),o===i){Il=null;break e}if(null!==n){n.return=s,Il=n;break e}Il=s}}}var ud={getCacheForType:function(e){var t=In(Vn),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return In(Vn).controller.signal}},hd="function"===typeof WeakMap?WeakMap:Map,pd=0,gd=null,vd=null,md=0,fd=0,Cd=null,wd=!1,bd=!1,yd=!1,Sd=0,xd=0,Fd=0,Rd=0,Pd=0,Dd=0,Ed=0,Ad=null,Md=null,Td=!1,kd=0,Id=0,Ld=1/0,Nd=null,Od=null,Gd=0,Bd=null,Vd=null,Hd=0,zd=0,Wd=null,Ud=null,jd=0,_d=null;function Kd(){return 0!==(2&pd)&&0!==md?md&-md:null!==L.T?Wc():Be()}function Yd(){if(0===Dd)if(0===(536870912&md)||hn){var e=Fe;0===(3932160&(Fe<<=1))&&(Fe=262144),Dd=e}else Dd=536870912;return null!==(e=Is.current)&&(e.flags|=32),Dd}function qd(e,t,i){(e!==gd||2!==fd&&9!==fd)&&null===e.cancelPendingCommit||(tc(e,0),Zd(e,md,Dd,!1)),ke(e,i),0!==(2&pd)&&e===gd||(e===gd&&(0===(2&pd)&&(Rd|=i),4===xd&&Zd(e,md,Dd,!1)),Nc(e))}function Qd(e,t,i){if(0!==(6&pd))throw Error(r(327));for(var o=!i&&0===(127&t)&&0===(t&e.expiredLanes)||Ee(e,t),n=o?function(e,t){var i=pd;pd|=2;var o=nc(),n=sc();gd!==e||md!==t?(Nd=null,Ld=le()+500,tc(e,t)):bd=Ee(e,t);e:for(;;)try{if(0!==fd&&null!==vd){t=vd;var s=Cd;t:switch(fd){case 1:fd=0,Cd=null,hc(e,t,s,1);break;case 2:case 9:if(is(s)){fd=0,Cd=null,uc(t);break}t=function(){2!==fd&&9!==fd||gd!==e||(fd=7),Nc(e)},s.then(t,t);break e;case 3:fd=7;break e;case 4:fd=5;break e;case 7:is(s)?(fd=0,Cd=null,uc(t)):(fd=0,Cd=null,hc(e,t,s,7));break;case 5:var a=null;switch(vd.tag){case 26:a=vd.memoizedState;case 5:case 27:var l=vd;if(a?nh(a):l.stateNode.complete){fd=0,Cd=null;var d=l.sibling;if(null!==d)vd=d;else{var c=l.return;null!==c?(vd=c,pc(c)):vd=null}break t}}fd=0,Cd=null,hc(e,t,s,5);break;case 6:fd=0,Cd=null,hc(e,t,s,6);break;case 8:ec(),xd=6;break e;default:throw Error(r(462))}}dc();break}catch(u){ic(e,u)}return Rn=Fn=null,L.H=o,L.A=n,pd=i,null!==vd?0:(gd=null,md=0,Mo(),xd)}(e,t):ac(e,t,!0),s=o;;){if(0===n){bd&&!o&&Zd(e,t,0,!1);break}if(i=e.current.alternate,!s||$d(i)){if(2===n){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;n=Ad;var d=l.current.memoizedState.isDehydrated;if(d&&(tc(l,a).flags|=256),2!==(a=ac(l,a,!1))){if(yd&&!d){l.errorRecoveryDisabledLanes|=s,Rd|=s,n=4;break e}s=Md,Md=n,null!==s&&(null===Md?Md=s:Md.push.apply(Md,s))}n=a}if(s=!1,2!==n)continue}}if(1===n){tc(e,0),Zd(e,t,0,!0);break}e:{switch(o=e,s=n){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:Zd(o,t,Dd,!wd);break e;case 2:Md=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(n=kd+300-le())){if(Zd(o,t,Dd,!wd),0!==De(o,0,!0))break e;Hd=t,o.timeoutHandle=yu(Xd.bind(null,o,i,Md,Nd,Td,t,Dd,Rd,Ed,wd,s,"Throttled",-0,0),n)}else Xd(o,i,Md,Nd,Td,t,Dd,Rd,Ed,wd,s,null,-0,0)}break}n=ac(e,t,!1),s=!1}Nc(e)}function Xd(e,t,i,o,n,s,r,a,l,d,c,u,h,p){if(e.timeoutHandle=-1,8192&(u=t.subtreeFlags)||16785408===(16785408&u)){sd(t,s,u={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kt});var g=(62914560&s)===s?kd-le():(4194048&s)===s?Id-le():0;if(null!==(g=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sh&&(sh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var n=i[o],s=n.transferSize,r=n.initiatorType,a=n.duration;if(s&&a&&pu(r)){for(r=0,a=n.responseEnd,o+=1;o<i.length;o++){var l=i[o],d=l.startTime;if(d>a)break;var c=l.transferSize,u=l.initiatorType;c&&pu(u)&&(r+=c*((l=l.responseEnd)<a?1:(a-d)/(l-d)))}if(--o,t+=8*(s+r)/(n.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var n=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sh?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(n)}}:null}(u,g)))return Hd=s,e.cancelPendingCommit=g(vc.bind(null,e,t,s,i,o,n,r,a,l,c,u,null,h,p)),void Zd(e,s,r,!d)}vc(e,t,s,i,o,n,r,a,l)}function $d(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&(null!==(i=t.updateQueue)&&null!==(i=i.stores)))for(var o=0;o<i.length;o++){var n=i[o],s=n.getSnapshot;n=n.value;try{if(!$i(s(),n))return!1}catch(r){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zd(e,t,i,o){t&=~Pd,t&=~Rd,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var n=t;0<n;){var s=31-be(n),r=1<<s;o[s]=-1,n&=~r}0!==i&&Ie(e,i,t)}function Jd(){return 0!==(6&pd)||(Oc(0,!1),!1)}function ec(){if(null!==vd){if(0===fd)var e=vd.return;else Rn=Fn=null,ar(e=vd),ls=null,ds=0,e=vd;for(;null!==e;)vl(e.alternate,e),e=e.return;vd=null}}function tc(e,t){var i=e.timeoutHandle;-1!==i&&(e.timeoutHandle=-1,Su(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),Hd=0,ec(),gd=e,vd=i=Ho(e.current,null),md=t,fd=0,Cd=null,wd=!1,bd=Ee(e,t),yd=!1,Ed=Dd=Pd=Rd=Fd=xd=0,Md=Ad=null,Td=!1,0!==(8&t)&&(t|=32&t);var o=e.entangledLanes;if(0!==o)for(e=e.entanglements,o&=t;0<o;){var n=31-be(o),s=1<<n;t|=e[n],o&=~s}return Sd=t,Mo(),i}function ic(e,t){Us=null,L.H=va,t===Zn||t===es?(t=rs(),fd=3):t===Jn?(t=rs(),fd=4):fd=t===ka?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,Cd=t,null===vd&&(xd=1,Da(e,qo(t,e.current)))}function oc(){var e=Is.current;return null===e||((4194048&md)===md?null===Ls:((62914560&md)===md||0!==(536870912&md))&&e===Ls)}function nc(){var e=L.H;return L.H=va,null===e?va:e}function sc(){var e=L.A;return L.A=ud,e}function rc(){xd=4,wd||(4194048&md)!==md&&null!==Is.current||(bd=!0),0===(134217727&Fd)&&0===(134217727&Rd)||null===gd||Zd(gd,md,Dd,!1)}function ac(e,t,i){var o=pd;pd|=2;var n=nc(),s=sc();gd===e&&md===t||(Nd=null,tc(e,t)),t=!1;var r=xd;e:for(;;)try{if(0!==fd&&null!==vd){var a=vd,l=Cd;switch(fd){case 8:ec(),r=6;break e;case 3:case 2:case 9:case 6:null===Is.current&&(t=!0);var d=fd;if(fd=0,Cd=null,hc(e,a,l,d),i&&bd){r=0;break e}break;default:d=fd,fd=0,Cd=null,hc(e,a,l,d)}}lc(),r=xd;break}catch(c){ic(e,c)}return t&&e.shellSuspendCounter++,Rn=Fn=null,pd=o,L.H=n,L.A=s,null===vd&&(gd=null,md=0,Mo()),r}function lc(){for(;null!==vd;)cc(vd)}function dc(){for(;null!==vd&&!re();)cc(vd)}function cc(e){var t=rl(e.alternate,e,Sd);e.memoizedProps=e.pendingProps,null===t?pc(e):vd=t}function uc(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=_a(i,t,t.pendingProps,t.type,void 0,md);break;case 11:t=_a(i,t,t.pendingProps,t.type.render,t.ref,md);break;case 5:ar(t);default:vl(i,t),t=rl(i,t=vd=zo(t,Sd),Sd)}e.memoizedProps=e.pendingProps,null===t?pc(e):vd=t}function hc(e,t,i,o){Rn=Fn=null,ar(t),ls=null,ds=0;var n=t.return;try{if(function(e,t,i,o,n){if(i.flags|=32768,null!==o&&"object"===typeof o&&"function"===typeof o.then){if(null!==(t=i.alternate)&&Mn(t,i,n,!0),null!==(i=Is.current)){switch(i.tag){case 31:case 13:return null===Ls?rc():null===i.alternate&&0===xd&&(xd=3),i.flags&=-257,i.flags|=65536,i.lanes=n,o===ts?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([o]):t.add(o),Fc(e,o,n)),!1;case 22:return i.flags|=65536,o===ts?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([o]):i.add(o),Fc(e,o,n)),!1}throw Error(r(435,i.tag))}return Fc(e,o,n),rc(),!1}if(hn)return null!==(t=Is.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=n,o!==vn&&Sn(qo(e=Error(r(422),{cause:o}),i))):(o!==vn&&Sn(qo(t=Error(r(423),{cause:o}),i)),(e=e.current.alternate).flags|=65536,n&=-n,e.lanes|=n,o=qo(o,i),Ss(e,n=Aa(e.stateNode,o,n)),4!==xd&&(xd=2)),!1;var s=Error(r(520),{cause:o});if(s=qo(s,i),null===Ad?Ad=[s]:Ad.push(s),4!==xd&&(xd=2),null===t)return!0;o=qo(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=n&-n,i.lanes|=e,Ss(i,e=Aa(i.stateNode,o,e)),!1;case 1:if(t=i.type,s=i.stateNode,0===(128&i.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Od||!Od.has(s))))return i.flags|=65536,n&=-n,i.lanes|=n,Ta(n=Ma(n),e,i,o),Ss(i,n),!1}i=i.return}while(null!==i);return!1}(e,n,t,i,md))return xd=1,Da(e,qo(i,e.current)),void(vd=null)}catch(s){if(null!==n)throw vd=n,s;return xd=1,Da(e,qo(i,e.current)),void(vd=null)}32768&t.flags?(hn||1===o?e=!0:bd||0!==(536870912&md)?e=!1:(wd=e=!0,(2===o||9===o||3===o||6===o)&&(null!==(o=Is.current)&&13===o.tag&&(o.flags|=16384))),gc(t,e)):pc(t)}function pc(e){var t=e;do{if(0!==(32768&t.flags))return void gc(t,wd);e=t.return;var i=pl(t.alternate,t,Sd);if(null!==i)return void(vd=i);if(null!==(t=t.sibling))return void(vd=t);vd=t=e}while(null!==t);0===xd&&(xd=5)}function gc(e,t){do{var i=gl(e.alternate,e);if(null!==i)return i.flags&=32767,void(vd=i);if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(vd=e);vd=e=i}while(null!==e);xd=6,vd=null}function vc(e,t,i,o,n,s,a,l,d){e.cancelPendingCommit=null;do{bc()}while(0!==Gd);if(0!==(6&pd))throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(s=t.lanes|t.childLanes,function(e,t,i,o,n,s){var r=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,d=e.hiddenUpdates;for(i=r&~i;0<i;){var c=31-be(i),u=1<<c;a[c]=0,l[c]=-1;var h=d[c];if(null!==h)for(d[c]=null,c=0;c<h.length;c++){var p=h[c];null!==p&&(p.lane&=-536870913)}i&=~u}0!==o&&Ie(e,o,0),0!==s&&0===n&&0!==e.tag&&(e.suspendedLanes|=s&~(r&~t))}(e,i,s|=Ao,a,l,d),e===gd&&(vd=gd=null,md=0),Vd=t,Bd=e,Hd=i,zd=s,Wd=n,Ud=o,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ne(he,function(){return yc(),null})):(e.callbackNode=null,e.callbackPriority=0),o=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||o){o=L.T,L.T=null,n=N.p,N.p=2,a=pd,pd|=4;try{!function(e,t){if(e=e.containerInfo,gu=wh,oo(e=io(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(o&&0!==o.rangeCount){i=o.anchorNode;var n=o.anchorOffset,s=o.focusNode;o=o.focusOffset;try{i.nodeType,s.nodeType}catch(m){i=null;break e}var a=0,l=-1,d=-1,c=0,u=0,h=e,p=null;t:for(;;){for(var g;h!==i||0!==n&&3!==h.nodeType||(l=a+n),h!==s||0!==o&&3!==h.nodeType||(d=a+o),3===h.nodeType&&(a+=h.nodeValue.length),null!==(g=h.firstChild);)p=h,h=g;for(;;){if(h===e)break t;if(p===i&&++c===n&&(l=a),p===s&&++u===o&&(d=a),null!==(g=h.nextSibling))break;p=(h=p).parentNode}h=g}i=-1===l||-1===d?null:{start:l,end:d}}else i=null}i=i||{start:0,end:0}}else i=null;for(vu={focusedElem:e,selectionRange:i},wh=!1,Il=t;null!==Il;)if(e=(t=Il).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Il=e;else for(;null!==Il;){switch(s=(t=Il).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(i=0;i<e.length;i++)(n=e[i]).ref.impl=n.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,i=t,n=s.memoizedProps,s=s.memoizedState,o=i.stateNode;try{var v=xa(i.type,n);e=o.getSnapshotBeforeUpdate(v,s),o.__reactInternalSnapshotBeforeUpdate=e}catch(f){xc(i,i.return,f)}}break;case 3:if(0!==(1024&e))if(9===(i=(e=t.stateNode.containerInfo).nodeType))Au(e);else if(1===i)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Au(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,Il=e;break}Il=t.return}}(e,t)}finally{pd=a,N.p=n,L.T=o}}Gd=1,mc(),fc(),Cc()}}function mc(){if(1===Gd){Gd=0;var e=Bd,t=Vd,i=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||i){i=L.T,L.T=null;var o=N.p;N.p=2;var n=pd;pd|=4;try{_l(t,e);var s=vu,r=io(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(r!==a&&a&&a.ownerDocument&&to(a.ownerDocument.documentElement,a)){if(null!==l&&oo(a)){var d=l.start,c=l.end;if(void 0===c&&(c=d),"selectionStart"in a)a.selectionStart=d,a.selectionEnd=Math.min(c,a.value.length);else{var u=a.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var p=h.getSelection(),g=a.textContent.length,v=Math.min(l.start,g),m=void 0===l.end?v:Math.min(l.end,g);!p.extend&&v>m&&(r=m,m=v,v=r);var f=eo(a,v),C=eo(a,m);if(f&&C&&(1!==p.rangeCount||p.anchorNode!==f.node||p.anchorOffset!==f.offset||p.focusNode!==C.node||p.focusOffset!==C.offset)){var w=u.createRange();w.setStart(f.node,f.offset),p.removeAllRanges(),v>m?(p.addRange(w),p.extend(C.node,C.offset)):(w.setEnd(C.node,C.offset),p.addRange(w))}}}}for(u=[],p=a;p=p.parentNode;)1===p.nodeType&&u.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<u.length;a++){var b=u[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}wh=!!gu,vu=gu=null}finally{pd=n,N.p=o,L.T=i}}e.current=t,Gd=2}}function fc(){if(2===Gd){Gd=0;var e=Bd,t=Vd,i=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||i){i=L.T,L.T=null;var o=N.p;N.p=2;var n=pd;pd|=4;try{Ll(e,t.alternate,t)}finally{pd=n,N.p=o,L.T=i}}Gd=3}}function Cc(){if(4===Gd||3===Gd){Gd=0,ae();var e=Bd,t=Vd,i=Hd,o=Ud;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Gd=5:(Gd=0,Vd=Bd=null,wc(e,e.pendingLanes));var n=e.pendingLanes;if(0===n&&(Od=null),Ge(i),t=t.stateNode,Ce&&"function"===typeof Ce.onCommitFiberRoot)try{Ce.onCommitFiberRoot(fe,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==o){t=L.T,n=N.p,N.p=2,L.T=null;try{for(var s=e.onRecoverableError,r=0;r<o.length;r++){var a=o[r];s(a.value,{componentStack:a.stack})}}finally{L.T=t,N.p=n}}0!==(3&Hd)&&bc(),Nc(e),n=e.pendingLanes,0!==(261930&i)&&0!==(42&n)?e===_d?jd++:(jd=0,_d=e):jd=0,Oc(0,!1)}}function wc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,zn(t)))}function bc(){return mc(),fc(),Cc(),yc()}function yc(){if(5!==Gd)return!1;var e=Bd,t=zd;zd=0;var i=Ge(Hd),o=L.T,n=N.p;try{N.p=32>i?32:i,L.T=null,i=Wd,Wd=null;var s=Bd,a=Hd;if(Gd=0,Vd=Bd=null,Hd=0,0!==(6&pd))throw Error(r(331));var l=pd;if(pd|=4,ld(s.current),ed(s,s.current,a,i),pd=l,Oc(0,!1),Ce&&"function"===typeof Ce.onPostCommitFiberRoot)try{Ce.onPostCommitFiberRoot(fe,s)}catch(d){}return!0}finally{N.p=n,L.T=o,wc(e,t)}}function Sc(e,t,i){t=qo(i,t),null!==(e=bs(e,t=Aa(e.stateNode,t,2),2))&&(ke(e,2),Nc(e))}function xc(e,t,i){if(3===e.tag)Sc(e,e,i);else for(;null!==t;){if(3===t.tag){Sc(t,e,i);break}if(1===t.tag){var o=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===Od||!Od.has(o))){e=qo(i,e),null!==(o=bs(t,i=Ma(2),2))&&(Ta(i,o,t,e),ke(o,2),Nc(o));break}}t=t.return}}function Fc(e,t,i){var o=e.pingCache;if(null===o){o=e.pingCache=new hd;var n=new Set;o.set(t,n)}else void 0===(n=o.get(t))&&(n=new Set,o.set(t,n));n.has(i)||(yd=!0,n.add(i),e=Rc.bind(null,e,t,i),t.then(e,e))}function Rc(e,t,i){var o=e.pingCache;null!==o&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,gd===e&&(md&i)===i&&(4===xd||3===xd&&(62914560&md)===md&&300>le()-kd?0===(2&pd)&&tc(e,0):Pd|=i,Ed===md&&(Ed=0)),Nc(e)}function Pc(e,t){0===t&&(t=Me()),null!==(e=Io(e,t))&&(ke(e,t),Nc(e))}function Dc(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Pc(e,i)}function Ec(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,n=e.memoizedState;null!==n&&(i=n.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==o&&o.delete(t),Pc(e,i)}var Ac=null,Mc=null,Tc=!1,kc=!1,Ic=!1,Lc=0;function Nc(e){e!==Mc&&null===e.next&&(null===Mc?Ac=Mc=e:Mc=Mc.next=e),kc=!0,Tc||(Tc=!0,Fu(function(){0!==(6&pd)?ne(ce,Gc):Bc()}))}function Oc(e,t){if(!Ic&&kc){Ic=!0;do{for(var i=!1,o=Ac;null!==o;){if(!t)if(0!==e){var n=o.pendingLanes;if(0===n)var s=0;else{var r=o.suspendedLanes,a=o.pingedLanes;s=(1<<31-be(42|e)+1)-1,s=201326741&(s&=n&~(r&~a))?201326741&s|1:s?2|s:0}0!==s&&(i=!0,zc(o,s))}else s=md,0===(3&(s=De(o,o===gd?s:0,null!==o.cancelPendingCommit||-1!==o.timeoutHandle)))||Ee(o,s)||(i=!0,zc(o,s));o=o.next}}while(i);Ic=!1}}function Gc(){Bc()}function Bc(){kc=Tc=!1;var e=0;0!==Lc&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bu&&(bu=e,!0);return bu=null,!1}()&&(e=Lc);for(var t=le(),i=null,o=Ac;null!==o;){var n=o.next,s=Vc(o,t);0===s?(o.next=null,null===i?Ac=n:i.next=n,null===n&&(Mc=i)):(i=o,(0!==e||0!==(3&s))&&(kc=!0)),o=n}0!==Gd&&5!==Gd||Oc(e,!1),0!==Lc&&(Lc=0)}function Vc(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,n=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var r=31-be(s),a=1<<r,l=n[r];-1===l?0!==(a&i)&&0===(a&o)||(n[r]=Ae(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(i=md,i=De(e,e===(t=gd)?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),o=e.callbackNode,0===i||e===t&&(2===fd||9===fd)||null!==e.cancelPendingCommit)return null!==o&&null!==o&&se(o),e.callbackNode=null,e.callbackPriority=0;if(0===(3&i)||Ee(e,i)){if((t=i&-i)===e.callbackPriority)return t;switch(null!==o&&se(o),Ge(i)){case 2:case 8:i=ue;break;case 32:default:i=he;break;case 268435456:i=ge}return o=Hc.bind(null,e),i=ne(i,o),e.callbackPriority=t,e.callbackNode=i,t}return null!==o&&null!==o&&se(o),e.callbackPriority=2,e.callbackNode=null,2}function Hc(e,t){if(0!==Gd&&5!==Gd)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(bc()&&e.callbackNode!==i)return null;var o=md;return 0===(o=De(e,e===gd?o:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Qd(e,o,t),Vc(e,le()),null!=e.callbackNode&&e.callbackNode===i?Hc.bind(null,e):null)}function zc(e,t){if(bc())return null;Qd(e,t,!0)}function Wc(){if(0===Lc){var e=jn;0===e&&(e=xe,0===(261888&(xe<<=1))&&(xe=256)),Lc=e}return Lc}function Uc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function jc(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}for(var _c=0;_c<Fo.length;_c++){var Kc=Fo[_c];Ro(Kc.toLowerCase(),"on"+(Kc[0].toUpperCase()+Kc.slice(1)))}Ro(mo,"onAnimationEnd"),Ro(fo,"onAnimationIteration"),Ro(Co,"onAnimationStart"),Ro("dblclick","onDoubleClick"),Ro("focusin","onFocus"),Ro("focusout","onBlur"),Ro(wo,"onTransitionRun"),Ro(bo,"onTransitionStart"),Ro(yo,"onTransitionCancel"),Ro(So,"onTransitionEnd"),nt("onMouseEnter",["mouseout","mouseover"]),nt("onMouseLeave",["mouseout","mouseover"]),nt("onPointerEnter",["pointerout","pointerover"]),nt("onPointerLeave",["pointerout","pointerover"]),ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ot("onBeforeInput",["compositionend","keypress","textInput","paste"]),ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yc));function Qc(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var o=e[i],n=o.event;o=o.listeners;e:{var s=void 0;if(t)for(var r=o.length-1;0<=r;r--){var a=o[r],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;s=a,n.currentTarget=d;try{s(n)}catch(c){Po(c)}n.currentTarget=null,s=l}else for(r=0;r<o.length;r++){if(l=(a=o[r]).instance,d=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;s=a,n.currentTarget=d;try{s(n)}catch(c){Po(c)}n.currentTarget=null,s=l}}}}function Xc(e,t){var i=t[je];void 0===i&&(i=t[je]=new Set);var o=e+"__bubble";i.has(o)||(eu(t,e,2,!1),i.add(o))}function $c(e,t,i){var o=0;t&&(o|=4),eu(i,e,o,t)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function Jc(e){if(!e[Zc]){e[Zc]=!0,tt.forEach(function(t){"selectionchange"!==t&&(qc.has(t)||$c(t,!1,e),$c(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zc]||(t[Zc]=!0,$c("selectionchange",!1,t))}}function eu(e,t,i,o){switch(Ph(t)){case 2:var n=bh;break;case 8:n=yh;break;default:n=Sh}i=n.bind(null,t,i,e),n=void 0,!Wt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),o?void 0!==n?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):void 0!==n?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function tu(e,t,i,o,n){var s=o;if(0===(1&t)&&0===(2&t)&&null!==o)e:for(;;){if(null===o)return;var r=o.tag;if(3===r||4===r){var a=o.stateNode.containerInfo;if(a===n)break;if(4===r)for(r=o.return;null!==r;){var d=r.tag;if((3===d||4===d)&&r.stateNode.containerInfo===n)return;r=r.return}for(;null!==a;){if(null===(r=Xe(a)))return;if(5===(d=r.tag)||6===d||26===d||27===d){o=s=r;continue e}a=a.parentNode}}o=o.return}Vt(function(){var o=s,n=Lt(i),r=[];e:{var a=xo.get(e);if(void 0!==a){var d=ii,c=e;switch(e){case"keypress":if(0===qt(i))break e;case"keydown":case"keyup":d=fi;break;case"focusin":c="focus",d=li;break;case"focusout":c="blur",d=li;break;case"beforeblur":case"afterblur":d=li;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=ri;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=wi;break;case mo:case fo:case Co:d=di;break;case So:d=bi;break;case"scroll":case"scrollend":d=ni;break;case"wheel":d=yi;break;case"copy":case"cut":case"paste":d=ci;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Ci;break;case"toggle":case"beforetoggle":d=Si}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),p=u?null!==a?a+"Capture":null:a;u=[];for(var g,v=o;null!==v;){var m=v;if(g=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===g||null===p||null!=(m=Ht(v,p))&&u.push(iu(v,m,g)),h)break;v=v.return}0<u.length&&(a=new d(a,c,null,i,n),r.push({event:a,listeners:u}))}}if(0===(7&t)){if(d="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===It||!(c=i.relatedTarget||i.fromElement)||!Xe(c)&&!c[Ue])&&(d||a)&&(a=n.window===n?n:(a=n.ownerDocument)?a.defaultView||a.parentWindow:window,d?(d=o,null!==(c=(c=i.relatedTarget||i.toElement)?Xe(c):null)&&(h=l(c),u=c.tag,c!==h||5!==u&&27!==u&&6!==u)&&(c=null)):(d=null,c=o),d!==c)){if(u=ri,m="onMouseLeave",p="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ci,m="onPointerLeave",p="onPointerEnter",v="pointer"),h=null==d?a:Ze(d),g=null==c?a:Ze(c),(a=new u(m,v+"leave",d,i,n)).target=h,a.relatedTarget=g,m=null,Xe(n)===o&&((u=new u(p,v+"enter",c,i,n)).target=g,u.relatedTarget=h,m=u),h=m,d&&c)e:{for(u=nu,v=c,g=0,m=p=d;m;m=u(m))g++;m=0;for(var f=v;f;f=u(f))m++;for(;0<g-m;)p=u(p),g--;for(;0<m-g;)v=u(v),m--;for(;g--;){if(p===v||null!==v&&p===v.alternate){u=p;break e}p=u(p),v=u(v)}u=null}else u=null;null!==d&&su(r,a,d,u,!1),null!==c&&null!==h&&su(r,h,c,u,!0)}if("select"===(d=(a=o?Ze(o):window).nodeName&&a.nodeName.toLowerCase())||"input"===d&&"file"===a.type)var C=Hi;else if(Li(a))if(zi)C=Xi;else{C=qi;var w=Yi}else!(d=a.nodeName)||"input"!==d.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?o&&Et(o.elementType)&&(C=Hi):C=Qi;switch(C&&(C=C(e,o))?Ni(r,C,i,n):(w&&w(e,a,o),"focusout"===e&&o&&"number"===a.type&&null!=o.memoizedProps.value&&bt(a,"number",a.value)),w=o?Ze(o):window,e){case"focusin":(Li(w)||"true"===w.contentEditable)&&(so=w,ro=o,ao=null);break;case"focusout":ao=ro=so=null;break;case"mousedown":lo=!0;break;case"contextmenu":case"mouseup":case"dragend":lo=!1,co(r,i,n);break;case"selectionchange":if(no)break;case"keydown":case"keyup":co(r,i,n)}var b;if(Fi)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ki?Mi(e,i)&&(y="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(y="onCompositionStart");y&&(Di&&"ko"!==i.locale&&(ki||"onCompositionStart"!==y?"onCompositionEnd"===y&&ki&&(b=Yt()):(_t="value"in(jt=n)?jt.value:jt.textContent,ki=!0)),0<(w=ou(o,y)).length&&(y=new ui(y,e,null,i,n),r.push({event:y,listeners:w}),b?y.data=b:null!==(b=Ti(i))&&(y.data=b))),(b=Pi?function(e,t){switch(e){case"compositionend":return Ti(t);case"keypress":return 32!==t.which?null:(Ai=!0,Ei);case"textInput":return(e=t.data)===Ei&&Ai?null:e;default:return null}}(e,i):function(e,t){if(ki)return"compositionend"===e||!Fi&&Mi(e,t)?(e=Yt(),Kt=_t=jt=null,ki=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Di&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(y=ou(o,"onBeforeInput")).length&&(w=new ui("onBeforeInput","beforeinput",null,i,n),r.push({event:w,listeners:y}),w.data=b)),function(e,t,i,o,n){if("submit"===t&&i&&i.stateNode===n){var s=Uc((n[We]||null).action),r=o.submitter;r&&null!==(t=(t=r[We]||null)?Uc(t.formAction):r.getAttribute("formAction"))&&(s=t,r=null);var a=new ii("action","action",null,o,n);e.push({event:a,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(0!==Lc){var e=r?jc(n,r):new FormData(n);ta(i,{pending:!0,data:e,method:n.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=r?jc(n,r):new FormData(n),ta(i,{pending:!0,data:e,method:n.method,action:s},s,e))},currentTarget:n}]})}}(r,e,o,i,n)}Qc(r,t)})}function iu(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ou(e,t){for(var i=t+"Capture",o=[];null!==e;){var n=e,s=n.stateNode;if(5!==(n=n.tag)&&26!==n&&27!==n||null===s||(null!=(n=Ht(e,i))&&o.unshift(iu(e,n,s)),null!=(n=Ht(e,t))&&o.push(iu(e,n,s))),3===e.tag)return o;e=e.return}return[]}function nu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function su(e,t,i,o,n){for(var s=t._reactName,r=[];null!==i&&i!==o;){var a=i,l=a.alternate,d=a.stateNode;if(a=a.tag,null!==l&&l===o)break;5!==a&&26!==a&&27!==a||null===d||(l=d,n?null!=(d=Ht(i,s))&&r.unshift(iu(i,d,l)):n||null!=(d=Ht(i,s))&&r.push(iu(i,d,l))),i=i.return}0!==r.length&&e.push({event:t,listeners:r})}var ru=/\r\n?/g,au=/\u0000|\uFFFD/g;function lu(e){return("string"===typeof e?e:""+e).replace(ru,"\n").replace(au,"")}function du(e,t){return t=lu(t),lu(e)===t}function cu(e,t,i,o,n,s){switch(i){case"children":"string"===typeof o?"body"===t||"textarea"===t&&""===o||Ft(e,o):("number"===typeof o||"bigint"===typeof o)&&"body"!==t&&Ft(e,""+o);break;case"className":dt(e,"class",o);break;case"tabIndex":dt(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(e,i,o);break;case"style":Dt(e,o,s);break;case"data":if("object"!==t){dt(e,"data",o);break}case"src":case"href":if(""===o&&("a"!==t||"href"!==i)){e.removeAttribute(i);break}if(null==o||"function"===typeof o||"symbol"===typeof o||"boolean"===typeof o){e.removeAttribute(i);break}o=Tt(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if("function"===typeof o){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===i?("input"!==t&&cu(e,t,"name",n.name,n,null),cu(e,t,"formEncType",n.formEncType,n,null),cu(e,t,"formMethod",n.formMethod,n,null),cu(e,t,"formTarget",n.formTarget,n,null)):(cu(e,t,"encType",n.encType,n,null),cu(e,t,"method",n.method,n,null),cu(e,t,"target",n.target,n,null))),null==o||"symbol"===typeof o||"boolean"===typeof o){e.removeAttribute(i);break}o=Tt(""+o),e.setAttribute(i,o);break;case"onClick":null!=o&&(e.onclick=kt);break;case"onScroll":null!=o&&Xc("scroll",e);break;case"onScrollEnd":null!=o&&Xc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=o){if("object"!==typeof o||!("__html"in o))throw Error(r(61));if(null!=(i=o.__html)){if(null!=n.children)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&"function"!==typeof o&&"symbol"!==typeof o;break;case"muted":e.muted=o&&"function"!==typeof o&&"symbol"!==typeof o;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==o||"function"===typeof o||"boolean"===typeof o||"symbol"===typeof o){e.removeAttribute("xlink:href");break}i=Tt(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=o&&"function"!==typeof o&&"symbol"!==typeof o?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&"function"!==typeof o&&"symbol"!==typeof o?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":!0===o?e.setAttribute(i,""):!1!==o&&null!=o&&"function"!==typeof o&&"symbol"!==typeof o?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":null==o||"function"===typeof o||"symbol"===typeof o||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":Xc("beforetoggle",e),Xc("toggle",e),lt(e,"popover",o);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":lt(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&lt(e,i=At.get(i)||i,o)}}function uu(e,t,i,o,n,s){switch(i){case"style":Dt(e,o,s);break;case"dangerouslySetInnerHTML":if(null!=o){if("object"!==typeof o||!("__html"in o))throw Error(r(61));if(null!=(i=o.__html)){if(null!=n.children)throw Error(r(60));e.innerHTML=i}}break;case"children":"string"===typeof o?Ft(e,o):("number"===typeof o||"bigint"===typeof o)&&Ft(e,""+o);break;case"onScroll":null!=o&&Xc("scroll",e);break;case"onScrollEnd":null!=o&&Xc("scrollend",e);break;case"onClick":null!=o&&(e.onclick=kt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:it.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(n=i.endsWith("Capture"),t=i.slice(2,n?i.length-7:void 0),"function"===typeof(s=null!=(s=e[We]||null)?s[i]:null)&&e.removeEventListener(t,s,n),"function"!==typeof o)?i in e?e[i]=o:!0===o?e.setAttribute(i,""):lt(e,i,o):("function"!==typeof s&&null!==s&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,n)))}}function hu(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xc("error",e),Xc("load",e);var o,n=!1,s=!1;for(o in i)if(i.hasOwnProperty(o)){var a=i[o];if(null!=a)switch(o){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:cu(e,t,o,a,i,null)}}return s&&cu(e,t,"srcSet",i.srcSet,i,null),void(n&&cu(e,t,"src",i.src,i,null));case"input":Xc("invalid",e);var l=o=a=s=null,d=null,c=null;for(n in i)if(i.hasOwnProperty(n)){var u=i[n];if(null!=u)switch(n){case"name":s=u;break;case"type":a=u;break;case"checked":d=u;break;case"defaultChecked":c=u;break;case"value":o=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(r(137,t));break;default:cu(e,t,n,u,i,null)}}return void wt(e,o,l,d,c,a,s,!1);case"select":for(s in Xc("invalid",e),n=a=o=null,i)if(i.hasOwnProperty(s)&&null!=(l=i[s]))switch(s){case"value":o=l;break;case"defaultValue":a=l;break;case"multiple":n=l;default:cu(e,t,s,l,i,null)}return t=o,i=a,e.multiple=!!n,void(null!=t?yt(e,!!n,t,!1):null!=i&&yt(e,!!n,i,!0));case"textarea":for(a in Xc("invalid",e),o=s=n=null,i)if(i.hasOwnProperty(a)&&null!=(l=i[a]))switch(a){case"value":n=l;break;case"defaultValue":s=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:cu(e,t,a,l,i,null)}return void xt(e,n,s,o);case"option":for(d in i)if(i.hasOwnProperty(d)&&null!=(n=i[d]))if("selected"===d)e.selected=n&&"function"!==typeof n&&"symbol"!==typeof n;else cu(e,t,d,n,i,null);return;case"dialog":Xc("beforetoggle",e),Xc("toggle",e),Xc("cancel",e),Xc("close",e);break;case"iframe":case"object":Xc("load",e);break;case"video":case"audio":for(n=0;n<Yc.length;n++)Xc(Yc[n],e);break;case"image":Xc("error",e),Xc("load",e);break;case"details":Xc("toggle",e);break;case"embed":case"source":case"link":Xc("error",e),Xc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in i)if(i.hasOwnProperty(c)&&null!=(n=i[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:cu(e,t,c,n,i,null)}return;default:if(Et(t)){for(u in i)i.hasOwnProperty(u)&&(void 0!==(n=i[u])&&uu(e,t,u,n,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(null!=(n=i[l])&&cu(e,t,l,n,i,null))}function pu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gu=null,vu=null;function mu(e){return 9===e.nodeType?e:e.ownerDocument}function fu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bu=null;var yu="function"===typeof setTimeout?setTimeout:void 0,Su="function"===typeof clearTimeout?clearTimeout:void 0,xu="function"===typeof Promise?Promise:void 0,Fu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof xu?function(e){return xu.resolve(null).then(e).catch(Ru)}:yu;function Ru(e){setTimeout(function(){throw e})}function Pu(e){return"head"===e}function Du(e,t){var i=t,o=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&8===n.nodeType)if("/$"===(i=n.data)||"/&"===i){if(0===o)return e.removeChild(n),void jh(t);o--}else if("$"===i||"$?"===i||"$~"===i||"$!"===i||"&"===i)o++;else if("html"===i)Bu(e.ownerDocument.documentElement);else if("head"===i){Bu(i=e.ownerDocument.head);for(var s=i.firstChild;s;){var r=s.nextSibling,a=s.nodeName;s[qe]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===s.rel.toLowerCase()||i.removeChild(s),s=r}}else"body"===i&&Bu(e.ownerDocument.body);i=n}while(i);jh(t)}function Eu(e,t){var i=e;e=0;do{var o=i.nextSibling;if(1===i.nodeType?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",""===i.getAttribute("style")&&i.removeAttribute("style")):3===i.nodeType&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&8===o.nodeType)if("/$"===(i=o.data)){if(0===e)break;e--}else"$"!==i&&"$?"!==i&&"$~"!==i&&"$!"!==i||e++;i=o}while(i)}function Au(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Au(i),Qe(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}e.removeChild(i)}}function Mu(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Iu(e.nextSibling)))return null}return e}function Tu(e){return"$?"===e.data||"$~"===e.data}function ku(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Iu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Lu=null;function Nu(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i||"/&"===i){if(0===t)return Iu(e.nextSibling);t--}else"$"!==i&&"$!"!==i&&"$?"!==i&&"$~"!==i&&"&"!==i||t++}e=e.nextSibling}return null}function Ou(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i||"$~"===i||"&"===i){if(0===t)return e;t--}else"/$"!==i&&"/&"!==i||t++}e=e.previousSibling}return null}function Gu(e,t,i){switch(t=mu(i),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function Bu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qe(e)}var Vu=new Map,Hu=new Set;function zu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Wu=N.d;N.d={f:function(){var e=Wu.f(),t=Jd();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?oa(t):Wu.r(e)},D:function(e){Wu.D(e),ju("dns-prefetch",e,null)},C:function(e,t){Wu.C(e,t),ju("preconnect",e,t)},L:function(e,t,i){Wu.L(e,t,i);var o=Uu;if(o&&e&&t){var n='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&i&&i.imageSrcSet?(n+='[imagesrcset="'+ft(i.imageSrcSet)+'"]',"string"===typeof i.imageSizes&&(n+='[imagesizes="'+ft(i.imageSizes)+'"]')):n+='[href="'+ft(e)+'"]';var s=n;switch(t){case"style":s=Ku(e);break;case"script":s=Qu(e)}Vu.has(s)||(e=p({rel:"preload",href:"image"===t&&i&&i.imageSrcSet?void 0:e,as:t},i),Vu.set(s,e),null!==o.querySelector(n)||"style"===t&&o.querySelector(Yu(s))||"script"===t&&o.querySelector(Xu(s))||(hu(t=o.createElement("link"),"link",e),et(t),o.head.appendChild(t)))}},m:function(e,t){Wu.m(e,t);var i=Uu;if(i&&e){var o=t&&"string"===typeof t.as?t.as:"script",n='link[rel="modulepreload"][as="'+ft(o)+'"][href="'+ft(e)+'"]',s=n;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Qu(e)}if(!Vu.has(s)&&(e=p({rel:"modulepreload",href:e},t),Vu.set(s,e),null===i.querySelector(n))){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Xu(s)))return}hu(o=i.createElement("link"),"link",e),et(o),i.head.appendChild(o)}}},X:function(e,t){Wu.X(e,t);var i=Uu;if(i&&e){var o=Je(i).hoistableScripts,n=Qu(e),s=o.get(n);s||((s=i.querySelector(Xu(n)))||(e=p({src:e,async:!0},t),(t=Vu.get(n))&&eh(e,t),et(s=i.createElement("script")),hu(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},o.set(n,s))}},S:function(e,t,i){Wu.S(e,t,i);var o=Uu;if(o&&e){var n=Je(o).hoistableStyles,s=Ku(e);t=t||"default";var r=n.get(s);if(!r){var a={loading:0,preload:null};if(r=o.querySelector(Yu(s)))a.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Vu.get(s))&&Ju(e,i);var l=r=o.createElement("link");et(l),hu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Zu(r,t,o)}r={type:"stylesheet",instance:r,count:1,state:a},n.set(s,r)}}},M:function(e,t){Wu.M(e,t);var i=Uu;if(i&&e){var o=Je(i).hoistableScripts,n=Qu(e),s=o.get(n);s||((s=i.querySelector(Xu(n)))||(e=p({src:e,async:!0,type:"module"},t),(t=Vu.get(n))&&eh(e,t),et(s=i.createElement("script")),hu(s,"link",e),i.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},o.set(n,s))}}};var Uu="undefined"===typeof document?null:document;function ju(e,t,i){var o=Uu;if(o&&"string"===typeof t&&t){var n=ft(t);n='link[rel="'+e+'"][href="'+n+'"]',"string"===typeof i&&(n+='[crossorigin="'+i+'"]'),Hu.has(n)||(Hu.add(n),e={rel:e,crossOrigin:i,href:t},null===o.querySelector(n)&&(hu(t=o.createElement("link"),"link",e),et(t),o.head.appendChild(t)))}}function _u(e,t,i,o){var n,s,a,l,d=(d=K.current)?zu(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof i.precedence&&"string"===typeof i.href?(t=Ku(i.href),(o=(i=Je(d).hoistableStyles).get(t))||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"===typeof i.href&&"string"===typeof i.precedence){e=Ku(i.href);var c=Je(d).hoistableStyles,u=c.get(e);if(u||(d=d.ownerDocument||d,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,u),(c=d.querySelector(Yu(e)))&&!c._p&&(u.instance=c,u.state.loading=5),Vu.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Vu.set(e,i),c||(n=d,s=e,a=i,l=u.state,n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),hu(s,"link",a),et(s),n.head.appendChild(s))))),t&&null===o)throw Error(r(528,""));return u}if(t&&null!==o)throw Error(r(529,""));return null;case"script":return t=i.async,"string"===typeof(i=i.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Qu(i),(o=(i=Je(d).hoistableScripts).get(t))||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ku(e){return'href="'+ft(e)+'"'}function Yu(e){return'link[rel="stylesheet"]['+e+"]"}function qu(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Qu(e){return'[src="'+ft(e)+'"]'}function Xu(e){return"script[async]"+e}function $u(e,t,i){if(t.count++,null===t.instance)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+ft(i.href)+'"]');if(o)return t.instance=o,et(o),o;var n=p({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return et(o=(e.ownerDocument||e).createElement("style")),hu(o,"style",n),Zu(o,i.precedence,e),t.instance=o;case"stylesheet":n=Ku(i.href);var s=e.querySelector(Yu(n));if(s)return t.state.loading|=4,t.instance=s,et(s),s;o=qu(i),(n=Vu.get(n))&&Ju(o,n),et(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),hu(s,"link",o),t.state.loading|=4,Zu(s,i.precedence,e),t.instance=s;case"script":return s=Qu(i.src),(n=e.querySelector(Xu(s)))?(t.instance=n,et(n),n):(o=i,(n=Vu.get(s))&&eh(o=p({},i),n),et(n=(e=e.ownerDocument||e).createElement("script")),hu(n,"link",o),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(o=t.instance,t.state.loading|=4,Zu(o,i.precedence,e));return t.instance}function Zu(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=o.length?o[o.length-1]:null,s=n,r=0;r<o.length;r++){var a=o[r];if(a.dataset.precedence===t)s=a;else if(s!==n)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===i.nodeType?i.head:i).insertBefore(e,t.firstChild)}function Ju(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function ih(e,t,i){if(null===th){var o=new Map,n=th=new Map;n.set(i,o)}else(o=(n=th).get(i))||(o=new Map,n.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),n=0;n<i.length;n++){var s=i[n];if(!(s[qe]||s[ze]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var r=s.getAttribute(t)||"";r=e+r;var a=o.get(r);a?a.push(s):o.set(r,[s])}}return o}function oh(e,t,i){(e=e.ownerDocument||e).head.insertBefore(i,"title"===t?e.querySelector("head > title"):null)}function nh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sh=0;function rh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ah=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ah=new Map,t.forEach(dh,e),ah=null,rh.call(e))}function dh(e,t){if(!(4&t.state.loading)){var i=ah.get(e);if(i)var o=i.get(null);else{i=new Map,ah.set(e,i);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<n.length;s++){var r=n[s];"LINK"!==r.nodeName&&"not all"===r.getAttribute("media")||(i.set(r.dataset.precedence,r),o=r)}o&&i.set(null,o)}r=(n=t.instance).getAttribute("data-precedence"),(s=i.get(r)||o)===o&&i.set(null,n),i.set(r,n),this.count++,o=rh.bind(this),n.addEventListener("load",o),n.addEventListener("error",o),s?s.parentNode.insertBefore(n,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(n,e.firstChild),t.state.loading|=4}}var ch={$$typeof:y,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function uh(e,t,i,o,n,s,r,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=o,this.onUncaughtError=n,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,i,o,n,s,r,a,l,d,c,u){return e=new uh(e,t,i,r,l,d,c,u,a),t=1,!0===s&&(t|=24),s=Bo(3,null,null,t),e.current=s,s.stateNode=e,(t=Hn()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:o,isDehydrated:i,cache:t},fs(s),e}function ph(e){return e?e=Oo:Oo}function gh(e,t,i,o,n,s){n=ph(n),null===o.context?o.context=n:o.pendingContext=n,(o=ws(t)).payload={element:i},null!==(s=void 0===s?null:s)&&(o.callback=s),null!==(i=bs(e,o,t))&&(qd(i,0,t),ys(i,e,t))}function vh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function mh(e,t){vh(e,t),(e=e.alternate)&&vh(e,t)}function fh(e){if(13===e.tag||31===e.tag){var t=Io(e,67108864);null!==t&&qd(t,0,67108864),mh(e,67108864)}}function Ch(e){if(13===e.tag||31===e.tag){var t=Kd(),i=Io(e,t=Oe(t));null!==i&&qd(i,0,t),mh(e,t)}}var wh=!0;function bh(e,t,i,o){var n=L.T;L.T=null;var s=N.p;try{N.p=2,Sh(e,t,i,o)}finally{N.p=s,L.T=n}}function yh(e,t,i,o){var n=L.T;L.T=null;var s=N.p;try{N.p=8,Sh(e,t,i,o)}finally{N.p=s,L.T=n}}function Sh(e,t,i,o){if(wh){var n=xh(o);if(null===n)tu(e,t,o,Fh,i),Nh(e,o);else if(function(e,t,i,o,n){switch(t){case"focusin":return Eh=Oh(Eh,e,t,i,o,n),!0;case"dragenter":return Ah=Oh(Ah,e,t,i,o,n),!0;case"mouseover":return Mh=Oh(Mh,e,t,i,o,n),!0;case"pointerover":var s=n.pointerId;return Th.set(s,Oh(Th.get(s)||null,e,t,i,o,n)),!0;case"gotpointercapture":return s=n.pointerId,kh.set(s,Oh(kh.get(s)||null,e,t,i,o,n)),!0}return!1}(n,e,t,i,o))o.stopPropagation();else if(Nh(e,o),4&t&&-1<Lh.indexOf(e)){for(;null!==n;){var s=$e(n);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var r=Pe(s.pendingLanes);if(0!==r){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;r;){var l=1<<31-be(r);a.entanglements[1]|=l,r&=~l}Nc(s),0===(6&pd)&&(Ld=le()+500,Oc(0,!1))}}break;case 31:case 13:null!==(a=Io(s,2))&&qd(a,0,2),Jd(),mh(s,2)}if(null===(s=xh(o))&&tu(e,t,o,Fh,i),s===n)break;n=s}null!==n&&o.stopPropagation()}else tu(e,t,o,null,i)}}function xh(e){return Rh(e=Lt(e))}var Fh=null;function Rh(e){if(Fh=null,null!==(e=Xe(e))){var t=l(e);if(null===t)e=null;else{var i=t.tag;if(13===i){if(null!==(e=d(t)))return e;e=null}else if(31===i){if(null!==(e=c(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Fh=e,null}function Ph(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case ce:return 2;case ue:return 8;case he:case pe:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Dh=!1,Eh=null,Ah=null,Mh=null,Th=new Map,kh=new Map,Ih=[],Lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nh(e,t){switch(e){case"focusin":case"focusout":Eh=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":Mh=null;break;case"pointerover":case"pointerout":Th.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kh.delete(t.pointerId)}}function Oh(e,t,i,o,n,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:s,targetContainers:[n]},null!==t&&(null!==(t=$e(t))&&fh(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Gh(e){var t=Xe(e.target);if(null!==t){var i=l(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=d(i)))return e.blockedOn=t,void Ve(e.priority,function(){Ch(i)})}else if(31===t){if(null!==(t=c(i)))return e.blockedOn=t,void Ve(e.priority,function(){Ch(i)})}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Bh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=xh(e.nativeEvent);if(null!==i)return null!==(t=$e(i))&&fh(t),e.blockedOn=i,!1;var o=new(i=e.nativeEvent).constructor(i.type,i);It=o,i.target.dispatchEvent(o),It=null,t.shift()}return!0}function Vh(e,t,i){Bh(e)&&i.delete(t)}function Hh(){Dh=!1,null!==Eh&&Bh(Eh)&&(Eh=null),null!==Ah&&Bh(Ah)&&(Ah=null),null!==Mh&&Bh(Mh)&&(Mh=null),Th.forEach(Vh),kh.forEach(Vh)}function zh(e,t){e.blockedOn===t&&(e.blockedOn=null,Dh||(Dh=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Hh)))}var Wh=null;function Uh(e){Wh!==e&&(Wh=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Wh===e&&(Wh=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],n=e[t+2];if("function"!==typeof o){if(null===Rh(o||i))continue;break}var s=$e(i);null!==s&&(e.splice(t,3),t-=3,ta(s,{pending:!0,data:n,method:i.method,action:o},o,n))}}))}function jh(e){function t(t){return zh(t,e)}null!==Eh&&zh(Eh,e),null!==Ah&&zh(Ah,e),null!==Mh&&zh(Mh,e),Th.forEach(t),kh.forEach(t);for(var i=0;i<Ih.length;i++){var o=Ih[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ih.length&&null===(i=Ih[0]).blockedOn;)Gh(i),null===i.blockedOn&&Ih.shift();if(null!=(i=(e.ownerDocument||e).$$reactFormReplay))for(o=0;o<i.length;o+=3){var n=i[o],s=i[o+1],r=n[We]||null;if("function"===typeof s)r||Uh(i);else if(r){var a=null;if(s&&s.hasAttribute("formAction")){if(n=s,r=s[We]||null)a=r.formAction;else if(null!==Rh(n))continue}else a=r.action;"function"===typeof a?i[o+1]=a:(i.splice(o,3),o-=3),Uh(i)}}}function _h(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return n=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==n&&(n(),n=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var o=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==n&&(n(),n=null)}}}function Kh(e){this._internalRoot=e}function Yh(e){this._internalRoot=e}Yh.prototype.render=Kh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));gh(t.current,Kd(),e,t,null,null)},Yh.prototype.unmount=Kh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gh(e.current,2,null,e,null,null),Jd(),t[Ue]=null}},Yh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Be();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ih.length&&0!==t&&t<Ih[i].priority;i++);Ih.splice(i,0,e),0===i&&Gh(e)}};var qh=n.version;if("19.2.3"!==qh)throw Error(r(527,qh,"19.2.3"));N.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(r(188));return t!==e?null:e}for(var i=e,o=t;;){var n=i.return;if(null===n)break;var s=n.alternate;if(null===s){if(null!==(o=n.return)){i=o;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return u(n),e;if(s===o)return u(n),t;s=s.sibling}throw Error(r(188))}if(i.return!==o.return)i=n,o=s;else{for(var a=!1,d=n.child;d;){if(d===i){a=!0,i=n,o=s;break}if(d===o){a=!0,o=n,i=s;break}d=d.sibling}if(!a){for(d=s.child;d;){if(d===i){a=!0,i=s,o=n;break}if(d===o){a=!0,o=s,i=n;break}d=d.sibling}if(!a)throw Error(r(189))}}if(i.alternate!==o)throw Error(r(190))}if(3!==i.tag)throw Error(r(188));return i.stateNode.current===i?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Qh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{fe=Xh.inject(Qh),Ce=Xh}catch(Zh){}}t.createRoot=function(e,t){if(!a(e))throw Error(r(299));var i=!1,o="",n=Fa,s=Ra,l=Pa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(n=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,i,o,null,n,s,l,_h),e[Ue]=t.current,Jc(e),new Kh(t)},t.hydrateRoot=function(e,t,i){if(!a(e))throw Error(r(299));var o=!1,n="",s=Fa,l=Ra,d=Pa,c=null;return null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(o=!0),void 0!==i.identifierPrefix&&(n=i.identifierPrefix),void 0!==i.onUncaughtError&&(s=i.onUncaughtError),void 0!==i.onCaughtError&&(l=i.onCaughtError),void 0!==i.onRecoverableError&&(d=i.onRecoverableError),void 0!==i.formState&&(c=i.formState)),(t=hh(e,1,!0,t,0,o,n,c,s,l,d,_h)).context=ph(null),i=t.current,(n=ws(o=Oe(o=Kd()))).callback=null,bs(i,n,o),i=o,t.current.lanes=i,ke(t,i),Nc(t),e[Ue]=t.current,Jc(e),new Yh(t)},t.version="19.2.3"},31(e,t,i){i.d(t,{A:()=>o});const o=e=>{e&&e instanceof Function&&i.e(453).then(i.bind(i,453)).then(t=>{let{getCLS:i,getFID:o,getFCP:n,getLCP:s,getTTFB:r}=t;i(e),o(e),n(e),s(e),r(e)})}},43(e,t,i){e.exports=i(288)},50(){},288(e,t){var i=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,f={};function C(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||v}function w(){}function b(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||v}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=C.prototype;var y=b.prototype=new w;y.constructor=b,m(y,C.prototype),y.isPureReactComponent=!0;var S=Array.isArray;function x(){}var F={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function P(e,t,o){var n=o.ref;return{$$typeof:i,type:e,key:t,ref:void 0!==n?n:null,props:o}}function D(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function M(e,t,n,s,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,d,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case o:c=!0;break;case h:return M((c=e._init)(e._payload),t,n,s,r)}}if(c)return r=r(e),c=""===s?"."+A(e,0):s,S(r)?(n="",null!=c&&(n=c.replace(E,"$&/")+"/"),M(r,t,n,"",function(e){return e})):null!=r&&(D(r)&&(l=r,d=n+(null==r.key||e&&e.key===r.key?"":(""+r.key).replace(E,"$&/")+"/")+c,r=P(l.type,d,l.props)),t.push(r)),1;c=0;var u,p=""===s?".":s+":";if(S(e))for(var v=0;v<e.length;v++)c+=M(s=e[v],t,n,a=p+A(s,v),r);else if("function"===typeof(v=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=g&&u[g]||u["@@iterator"])?u:null))for(e=v.call(e),v=0;!(s=e.next()).done;)c+=M(s=s.value,t,n,a=p+A(s,v++),r);else if("object"===a){if("function"===typeof e.then)return M(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(x,x):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,s,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function T(e,t,i){if(null==e)return e;var o=[],n=0;return M(e,o,"","",function(e){return t.call(i,e,n++)}),o}function k(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},L={map:T,forEach:function(e,t,i){T(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!D(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=L,t.Component=C,t.Fragment=n,t.Profiler=r,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return F.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var o=m({},e.props),n=e.key;if(null!=t)for(s in void 0!==t.key&&(n=""+t.key),t)!R.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(o[s]=t[s]);var s=arguments.length-2;if(1===s)o.children=i;else if(1<s){for(var r=Array(s),a=0;a<s;a++)r[a]=arguments[a+2];o.children=r}return P(e.type,n,o)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,i){var o,n={},s=null;if(null!=t)for(o in void 0!==t.key&&(s=""+t.key),t)R.call(t,o)&&"key"!==o&&"__self"!==o&&"__source"!==o&&(n[o]=t[o]);var r=arguments.length-2;if(1===r)n.children=i;else if(1<r){for(var a=Array(r),l=0;l<r;l++)a[l]=arguments[l+2];n.children=a}if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===n[o]&&(n[o]=r[o]);return P(e,s,n)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=D,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=F.T,i={};F.T=i;try{var o=e(),n=F.S;null!==n&&n(i,o),"object"===typeof o&&null!==o&&"function"===typeof o.then&&o.then(x,I)}catch(s){I(s)}finally{null!==t&&null!==i.types&&(t.types=i.types),F.T=t}},t.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},t.use=function(e){return F.H.use(e)},t.useActionState=function(e,t,i){return F.H.useActionState(e,t,i)},t.useCallback=function(e,t){return F.H.useCallback(e,t)},t.useContext=function(e){return F.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return F.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return F.H.useEffect(e,t)},t.useEffectEvent=function(e){return F.H.useEffectEvent(e)},t.useId=function(){return F.H.useId()},t.useImperativeHandle=function(e,t,i){return F.H.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return F.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return F.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return F.H.useMemo(e,t)},t.useOptimistic=function(e,t){return F.H.useOptimistic(e,t)},t.useReducer=function(e,t,i){return F.H.useReducer(e,t,i)},t.useRef=function(e){return F.H.useRef(e)},t.useState=function(e){return F.H.useState(e)},t.useSyncExternalStore=function(e,t,i){return F.H.useSyncExternalStore(e,t,i)},t.useTransition=function(){return F.H.useTransition()},t.version="19.2.3"},303(e,t,i){i.a(e,async(e,t)=>{try{var o=i(782),n=(i(43),i(579),e([o]));o=(n.then?(await n)():n)[0],t()}catch(s){t(s)}})},391(e,t,i){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(4)},424(e,t,i){i.d(t,{W6:()=>Se});var o=i(986),n=i(936),s=i(43),r=i(955),a=i(950);const l=["key"];var d,c=s.createContext({}),u=s.createContext("default"),h=(e,t,i,o)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const n=e.newAgStackInstance();let s,r,a=!1;return n.then(e=>{a?t.destroyBean(e):(s=e,r=s.getGui(),i.appendChild(r),p(o,s))}),()=>{var e;a=!0,s&&(null===(e=r)||void 0===e||e.remove(),t.destroyBean(s),o&&p(o,void 0))}},p=(e,t)=>{if(e)if(e instanceof Function){e(t)}else{e.current=t}},g=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(e=>null!=e&&""!==e).join(" ")},v=class e{constructor(){this.classesMap={};for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const o of t)this.classesMap[o]=!0}setClass(t,i){if(!!this.classesMap[t]==i)return this;const o=new e;return o.classesMap=(0,n.A)({},this.classesMap),o.classesMap[t]=i,o}toString(){return Object.keys(this.classesMap).filter(e=>this.classesMap[e]).join(" ")}},m=e=>"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===("function"===typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),f=null===(d=s.version)||void 0===d?void 0:d.split(".")[0],C="16"===f||"17"===f;var w=!1;var b=(e,t)=>{C||!e||w?t():a.flushSync(t)};function y(e,t,i){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(i||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const o=[],n=[],s=new Map,r=new Map;for(let a=0;a<t.length;a++){const e=t[a];r.set(e.instanceId,e)}for(let a=0;a<e.length;a++){const t=e[a];s.set(t.instanceId,t),r.has(t.instanceId)&&o.push(t)}for(let a=0;a<t.length;a++){const e=t[a],i=e.instanceId;s.has(i)||n.push(e)}return o.length===e.length&&0===n.length?e:0===o.length&&n.length===t.length?t:0===o.length?n:0===n.length?o:[...o,...n]}var S=(0,s.forwardRef)((e,t)=>{var i;const{registry:o,context:a}=(0,s.useContext)(c),l=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(null),g=(0,s.useRef)(null),m=(0,s.useRef)(),[f,C]=(0,s.useState)(),[w,b]=(0,s.useState)(),[y,x]=(0,s.useState)(),[F,R]=(0,s.useState)(()=>new v),[P,D]=(0,s.useState)(()=>new v("ag-hidden")),[E,A]=(0,s.useState)(()=>new v("ag-hidden")),[M,T]=(0,s.useState)(()=>new v("ag-invisible"));(0,s.useImperativeHandle)(t,()=>({refresh:()=>!1})),(0,s.useLayoutEffect)(()=>h(f,a,d.current),[f]);const k=(0,s.useCallback)(t=>{if(l.current=t,!t||a.isDestroyed())return void(m.current=a.destroyBean(m.current));const i={setInnerRenderer:(e,t)=>{C(e),x(t)},setChildCount:e=>b(e),toggleCss:(e,t)=>R(i=>i.setClass(e,t)),setContractedDisplayed:e=>A(t=>t.setClass("ag-hidden",!e)),setExpandedDisplayed:e=>D(t=>t.setClass("ag-hidden",!e)),setCheckboxVisible:e=>T(t=>t.setClass("ag-invisible",!e)),setCheckboxSpacing:e=>T(t=>t.setClass("ag-group-checkbox-spacing",e))},n=o.createDynamicBean("groupCellRendererCtrl",!0);n&&(m.current=a.createBean(n),m.current.init(i,t,u.current,p.current,g.current,S,e))},[]),I=(0,s.useMemo)(()=>"ag-cell-wrapper ".concat(F.toString()),[F]),L=(0,s.useMemo)(()=>"ag-group-expanded ".concat(P.toString()),[P]),N=(0,s.useMemo)(()=>"ag-group-contracted ".concat(E.toString()),[E]),O=(0,s.useMemo)(()=>"ag-group-checkbox ".concat(M.toString()),[M]),G=null===f||void 0===f?void 0:f.componentFromFramework,B=G?f.componentClass:void 0,V=null==f&&null!=y,H=(0,r.SjP)(y);return s.createElement("span",(0,n.A)({className:I,ref:k},e.colDef?{}:{role:null===(i=m.current)||void 0===i?void 0:i.getCellAriaRole()}),s.createElement("span",{className:L,ref:p}),s.createElement("span",{className:N,ref:g}),s.createElement("span",{className:O,ref:u}),s.createElement("span",{className:"ag-group-value",ref:d},V?H:G?s.createElement(B,(0,n.A)({},f.params)):null),s.createElement("span",{className:"ag-group-child-count"},w))}),x=S,F=(0,s.createContext)({setMethods:()=>{}}),R=(0,s.memo)(e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:r,setMethods:a}=e,[d,c]=(0,s.useState)(t),{key:u}=d,h=(0,o.A)(d,l);return(0,s.useEffect)(()=>{i(e=>c(e))},[]),s.createElement(F.Provider,{value:{setMethods:a}},s.createElement(r,(0,n.A)({key:u},h)))}),P=0;function D(){return"agPortalKey_".concat(++P)}var E=class{constructor(e,t,i,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=D(),this.portalKey=D(),this.instanceCreated=this.isStatelessComponent()?r.oY$.resolve(!1):new r.oY$(e=>{this.resolveInstanceCreated=e})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"===typeof Symbol&&Symbol.for}isStateless(e){return"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i)return void setTimeout(()=>this.callMethod(e,t));const o=i[e];return o?o.apply(i,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new r.oY$(e=>this.createReactComponent(e))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{var t;this.componentInstance=e,null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,(0,n.A)((0,n.A)({},e),{},{key:this.key})),this.portal=(0,a.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,s.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){if(this.suppressFallbackMethods)return!1;return!!this["".concat(e,"Component")]}};function A(e,t,i){for(const o of e){const e=t[o];e&&(i[o]=e)}}var M=class extends E{constructor(){super(...arguments),this.awaitUpdateCallback=new r.oY$(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=R}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new r.oY$(e=>{setTimeout(()=>{e()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,A(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return(0,n.A)((0,n.A)({},this.sourceParams),{},{key:this.key,ref:this.ref})}refreshProps(){return this.updateCallback?this.updateCallback():new r.oY$(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},T=class extends M{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},k=class extends M{refresh(e){this.sourceParams=e,this.refreshProps()}},I=class extends M{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},L=class extends M{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:o}=this;return e.label=t,e.icon=i,e.shake=o,e}},N=class extends M{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new r.oY$(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;var i;t?null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e):this.awaitSetMethodsCallback.then(()=>{var t,i;return null===(t=this.providedMethods)||void 0===t||null===(i=t.afterGuiAttached)||void 0===i?void 0:i.call(t,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t,i;!1===this.expectingNewMethods&&this.hasBeenActive&&(null===(t=this.providedMethods)||void 0===t?void 0:t.doesFilterPass)!==(null===e||void 0===e?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),null===(i=this.resolveFilterPassCallback)||void 0===i||i.call(this),this.resolveFilterPassCallback=void 0}updateModel(e){var t;null===(t=this.resolveFilterPassCallback)||void 0===t||t.call(this);const i=new r.oY$(e=>{this.resolveFilterPassCallback=e});this.setModel(e).then(()=>{i.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},O=class extends M{constructor(){super(...arguments),this.awaitSetMethodsCallback=new r.oY$(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;var i;t?null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e):this.awaitSetMethodsCallback.then(()=>{var t,i;return null===(t=this.providedMethods)||void 0===t||null===(i=t.afterGuiAttached)||void 0===i?void 0:i.call(t,e)})}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function G(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||r.oY$.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var B=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return(0,n.A)((0,n.A)({},this.floatingFilterParams),{},{model:this.model,onModelChange:this.onModelChange})}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){A(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),G(this.floatingFilterParams,e)}},V=class extends M{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),G(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},H=class extends M{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},z=class extends M{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},W=class extends M{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},U=class extends M{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},j=class extends M{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function _(){(0,r.ujB)(231)}var K=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return b(!0,()=>this.refresher()),void(e.rendered()&&t(e));window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},Y=(0,s.memo)(e=>{let{ctrl:t}=e;const i=t.isAlive(),{context:o}=(0,s.useContext)(c),[a,l]=(0,s.useState)(),[d,u]=(0,s.useState)(),p=(0,s.useRef)(),g=(0,s.useRef)(null),v=(0,s.useRef)(null),f=(0,s.useRef)(null),C=(0,s.useRef)(),w=(0,s.useRef)();i&&!w.current&&(w.current=new r.hv8(()=>g.current));const b=(0,s.useCallback)(e=>{if(g.current=e,!e||!t.isAlive()||o.isDestroyed())return void(p.current=o.destroyBean(p.current));p.current=o.createBean(new r.dQD);const i=()=>{const e=t.getSelectAllGui();var i;e&&(null===(i=v.current)||void 0===i||i.insertAdjacentElement("afterend",e),p.current.addDestroyFunc(()=>e.remove()))},n={setWidth:e=>{g.current&&(g.current.style.width=e)},toggleCss:(e,t)=>w.current.toggleCss(e,t),setUserStyles:e=>u(e),setAriaSort:e=>{g.current&&(e?(0,r.JJT)(g.current,e):(0,r.T2p)(g.current))},setUserCompDetails:e=>l(e),getUserCompInstance:()=>C.current||void 0,refreshSelectAllGui:i,removeSelectAllGui:()=>{var e;return null===(e=t.getSelectAllGui())||void 0===e?void 0:e.remove()}};t.setComp(n,e,v.current,f.current,p.current),i()},[]);(0,s.useLayoutEffect)(()=>h(a,o,f.current,C),[a]),(0,s.useEffect)(()=>{t.setDragSource(g.current)},[a]);const y=(0,s.useMemo)(()=>!!((null===a||void 0===a?void 0:a.componentFromFramework)&&m(a.componentClass)),[a]),S=null===a||void 0===a?void 0:a.componentFromFramework,x=null===a||void 0===a?void 0:a.componentClass;return s.createElement("div",{ref:b,style:d,className:"ag-header-cell",role:"columnheader"},s.createElement("div",{ref:v,className:"ag-header-cell-resize",role:"presentation"}),s.createElement("div",{ref:f,className:"ag-header-cell-comp-wrapper",role:"presentation"},S?y?s.createElement(x,(0,n.A)({},a.params)):s.createElement(x,(0,n.A)((0,n.A)({},a.params),{},{ref:C})):null))}),q=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){A(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Q=(0,s.memo)(e=>{let{ctrl:t}=e;const{context:i,gos:o}=(0,s.useContext)(c),[a,l]=(0,s.useState)(),[d,u]=(0,s.useState)(()=>new v("ag-header-cell","ag-floating-filter")),[p,g]=(0,s.useState)(()=>new v),[f,C]=(0,s.useState)(()=>new v("ag-floating-filter-button","ag-hidden")),[w,b]=(0,s.useState)("false"),[y,S]=(0,s.useState)(),[,x]=(0,s.useState)(1),R=(0,s.useRef)(),P=(0,s.useRef)(null),D=(0,s.useRef)(null),E=(0,s.useRef)(null),A=(0,s.useRef)(null),M=(0,s.useRef)(),T=(0,s.useRef)(),k=e=>{null!=e&&M.current&&M.current(e)},I=(0,s.useCallback)(e=>{if(P.current=e,!e||!t.isAlive()||i.isDestroyed())return void(R.current=i.destroyBean(R.current));R.current=i.createBean(new r.dQD),T.current=new r.oY$(e=>{M.current=e});const o={toggleCss:(e,t)=>u(i=>i.setClass(e,t)),setUserStyles:e=>l(e),addOrRemoveBodyCssClass:(e,t)=>g(i=>i.setClass(e,t)),setButtonWrapperDisplayed:e=>{C(t=>t.setClass("ag-hidden",!e)),b(e?"false":"true")},setWidth:e=>{P.current&&(P.current.style.width=e)},setCompDetails:e=>S(e),getFloatingFilterComp:()=>T.current?T.current:null,setMenuIcon:e=>{var t;return null===(t=A.current)||void 0===t?void 0:t.appendChild(e)}};t.setComp(o,e,A.current,D.current,R.current)},[]);(0,s.useLayoutEffect)(()=>h(y,i,D.current,k),[y]);const L=(0,s.useMemo)(()=>d.toString(),[d]),N=(0,s.useMemo)(()=>p.toString(),[p]),O=(0,s.useMemo)(()=>f.toString(),[f]),G=(0,s.useMemo)(()=>!!(y&&y.componentFromFramework&&m(y.componentClass)),[y]),V=(0,s.useMemo)(()=>o.get("reactiveCustomComponents"),[]),H=(0,s.useMemo)(()=>o.get("enableFilterHandlers"),[]),[z,W]=(0,s.useState)();(0,s.useEffect)(()=>{if(null!==y&&void 0!==y&&y.componentFromFramework)if(V){const e=new(H?q:B)(y.params,()=>x(e=>e+1));k(e),W(e)}else _()},[y]);const U=null===z||void 0===z?void 0:z.getProps(),j=null===y||void 0===y?void 0:y.componentFromFramework,K=null===y||void 0===y?void 0:y.componentClass;return s.createElement("div",{ref:I,style:a,className:L,role:"gridcell"},s.createElement("div",{ref:D,className:N,role:"presentation"},j?V?U&&s.createElement(F.Provider,{value:{setMethods:e=>z.setMethods(e)}},s.createElement(K,(0,n.A)({},U))):s.createElement(K,(0,n.A)((0,n.A)({},y.params),{},{ref:G?()=>{}:k})):null),s.createElement("div",{ref:E,"aria-hidden":w,className:O,role:"presentation"},s.createElement("button",{ref:A,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))}),X=(0,s.memo)(e=>{let{ctrl:t}=e;const{context:i}=(0,s.useContext)(c),[o,a]=(0,s.useState)(),[l,d]=(0,s.useState)(()=>new v),[u,p]=(0,s.useState)(()=>new v),[g,f]=(0,s.useState)("false"),[C,w]=(0,s.useState)(),[b,y]=(0,s.useState)(),S=(0,s.useRef)(),x=(0,s.useRef)(null),F=(0,s.useRef)(null),R=(0,s.useRef)(null),P=(0,s.useRef)(),D=(0,s.useCallback)(e=>{if(x.current=e,!e||!t.isAlive()||i.isDestroyed())return void(S.current=i.destroyBean(S.current));S.current=i.createBean(new r.dQD);const o={setWidth:e=>{x.current&&(x.current.style.width=e)},toggleCss:(e,t)=>d(i=>i.setClass(e,t)),setUserStyles:e=>a(e),setHeaderWrapperHidden:e=>{const t=R.current;t&&(e?t.style.setProperty("display","none"):t.style.removeProperty("display"))},setHeaderWrapperMaxHeight:e=>{const t=R.current;t&&(null!=e?t.style.setProperty("max-height","".concat(e,"px")):t.style.removeProperty("max-height"),t.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e))},setUserCompDetails:e=>y(e),setResizableDisplayed:e=>{p(t=>t.setClass("ag-hidden",!e)),f(e?"false":"true")},setAriaExpanded:e=>w(e),getUserCompInstance:()=>P.current||void 0};t.setComp(o,e,F.current,R.current,S.current)},[]);(0,s.useLayoutEffect)(()=>h(b,i,R.current),[b]),(0,s.useEffect)(()=>{x.current&&t.setDragSource(x.current)},[b]);const E=(0,s.useMemo)(()=>!!((null===b||void 0===b?void 0:b.componentFromFramework)&&m(b.componentClass)),[b]),A=(0,s.useMemo)(()=>"ag-header-group-cell "+l.toString(),[l]),M=(0,s.useMemo)(()=>"ag-header-cell-resize "+u.toString(),[u]),T=null===b||void 0===b?void 0:b.componentFromFramework,k=null===b||void 0===b?void 0:b.componentClass;return s.createElement("div",{ref:D,style:o,className:A,role:"columnheader","aria-expanded":C},s.createElement("div",{ref:R,className:"ag-header-cell-comp-wrapper",role:"presentation"},T?E?s.createElement(k,(0,n.A)({},b.params)):s.createElement(k,(0,n.A)((0,n.A)({},b.params),{},{ref:P})):null),s.createElement("div",{ref:F,"aria-hidden":g,className:M}))}),$=(0,s.memo)(e=>{let{ctrl:t}=e;const{gos:i,context:o}=(0,s.useContext)(c),{topOffset:n,rowHeight:a}=(0,s.useMemo)(()=>t.getTopAndHeight(),[]),l=(0,s.useMemo)(()=>i.get("tabIndex"),[]),[d,u]=(0,s.useState)(()=>t.getAriaRowIndex()),h=t.headerRowClass,[p,g]=(0,s.useState)(()=>a+"px"),[v,m]=(0,s.useState)(()=>n+"px"),f=(0,s.useRef)(null),[C,w]=(0,s.useState)(()=>t.getUpdatedHeaderCtrls()),S=(0,s.useRef)(),x=(0,s.useRef)(null),F=(0,s.useCallback)(e=>{if(x.current=e,!e||!t.isAlive()||o.isDestroyed())return void(S.current=o.destroyBean(S.current));S.current=o.createBean(new r.dQD);const i={setHeight:e=>g(e),setTop:e=>m(e),setHeaderCtrls:(e,t,i)=>{const o=f.current,n=y(o,e,t);n!==o&&(f.current=n,b(i,()=>w(n)))},setWidth:e=>{x.current&&(x.current.style.width=e)},setRowIndex:e=>{u(e)}};t.setComp(i,S.current,!1)},[]),R=(0,s.useMemo)(()=>({height:p,top:v}),[p,v]),P=(0,s.useCallback)(e=>{switch(t.type){case"group":return s.createElement(X,{ctrl:e,key:e.instanceId});case"filter":return s.createElement(Q,{ctrl:e,key:e.instanceId});default:return s.createElement(Y,{ctrl:e,key:e.instanceId})}},[]);return s.createElement("div",{ref:F,className:h,role:"row",style:R,tabIndex:l,"aria-rowindex":d},C.map(P))}),Z=(0,s.memo)(e=>{let{pinned:t}=e;const[i,o]=(0,s.useState)(!0),[n,a]=(0,s.useState)([]),{context:l}=(0,s.useContext)(c),d=(0,s.useRef)(null),u=(0,s.useRef)(null),h=(0,s.useRef)(),p="left"===t,g="right"===t,v=!p&&!g,m=(0,s.useCallback)(e=>{if(d.current=e,!e||l.isDestroyed())return void(h.current=l.destroyBean(h.current));h.current=l.createBean(new r.OPU(t));const i={setDisplayed:o,setCtrls:e=>a(e),setCenterWidth:e=>{u.current&&(u.current.style.width=e)},setViewportScrollLeft:e=>{d.current&&(d.current.scrollLeft=e)},setPinnedContainerWidth:e=>{d.current&&(d.current.style.width=e,d.current.style.minWidth=e,d.current.style.maxWidth=e)}};h.current.setComp(i,d.current)},[]),f=i?"":"ag-hidden",C=()=>n.map(e=>s.createElement($,{ctrl:e,key:e.instanceId}));return p?s.createElement("div",{ref:m,className:"ag-pinned-left-header "+f,"aria-hidden":!i,role:"rowgroup"},C()):g?s.createElement("div",{ref:m,className:"ag-pinned-right-header "+f,"aria-hidden":!i,role:"rowgroup"},C()):v?s.createElement("div",{ref:m,className:"ag-header-viewport "+f,role:"rowgroup",tabIndex:-1},s.createElement("div",{ref:u,className:"ag-header-container",role:"presentation"},C())):null}),J=(0,s.memo)(()=>{const[e,t]=(0,s.useState)(()=>new v),[i,o]=(0,s.useState)(),{context:n}=(0,s.useContext)(c),a=(0,s.useRef)(null),l=(0,s.useRef)(),d=(0,s.useCallback)(e=>{if(a.current=e,!e||n.isDestroyed())return void(l.current=n.destroyBean(l.current));l.current=n.createBean(new r.vBt);const i={toggleCss:(e,i)=>t(t=>t.setClass(e,i)),setHeightAndMinHeight:e=>o(e)};l.current.setComp(i,e,e)},[]),u=(0,s.useMemo)(()=>"ag-header "+e.toString(),[e]),h=(0,s.useMemo)(()=>({height:i,minHeight:i}),[i]);return s.createElement("div",{ref:d,className:u,style:h,role:"presentation"},s.createElement(Z,{pinned:"left"}),s.createElement(Z,{pinned:null}),s.createElement(Z,{pinned:"right"}))}),ee=(e,t)=>{(0,s.useEffect)(()=>{const i=t.current;if(i){const t=i.parentElement;if(t){const o=document.createComment(e);return t.insertBefore(o,i),()=>{o.remove()}}}},[e])},te=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new r.oY$(e=>{this.resolveInstanceCreated=e}),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return(0,n.A)((0,n.A)({},this.cellEditorParams),{},{initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange})}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){A(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},ie=(0,s.memo)(e=>{const[t,i]=(0,s.useState)(),o=(0,s.useContext)(c),{context:n,popupSvc:l,gos:d,editSvc:u}=o,{editDetails:h,cellCtrl:p,eParentCell:g}=e;return(e=>{const t=(0,s.useRef)(e),i=(0,s.useRef)(),o=(0,s.useRef)(!1),n=(0,s.useRef)(!1),[,r]=(0,s.useState)(0);o.current&&(n.current=!0),(0,s.useEffect)(()=>(o.current||(i.current=t.current(),o.current=!0),r(e=>e+1),()=>{var e;n.current&&(null===(e=i.current)||void 0===e||e.call(i))}),[])})(()=>{const{compDetails:t}=h,o=d.get("stopEditingWhenCellsLoseFocus");let s,r;if(!n.isDestroyed()){var a,c;r=n.createBean(u.createPopupEditorWrapper(t.params));const d=r.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&d.appendChild(t)}const{column:v,rowNode:m}=p,f={column:v,rowNode:m,type:"popupCellEditor",eventSource:g,ePopup:d,position:h.popupPosition,keepWithinBounds:!0},C=null===l||void 0===l?void 0:l.positionPopupByComponent.bind(l,f),w=null===l||void 0===l?void 0:l.addPopup({modal:o,eChild:d,closeOnEsc:!0,closedCallback:()=>{p.onPopupEditorClosed()},anchorToElement:g,positionCallback:C,ariaOwns:g});s=w?w.hideFunc:void 0,i(r),null===(a=e.jsChildComp)||void 0===a||null===(c=a.afterGuiAttached)||void 0===c||c.call(a)}return()=>{var e;null===(e=s)||void 0===e||e(),n.destroyBean(r)}}),(0,s.useLayoutEffect)(()=>()=>{p.isCellFocused()&&null!==t&&void 0!==t&&t.getGui().contains((0,r.UlD)(o))&&g.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?(0,a.createPortal)(e.wrappedContent,t.getGui()):null}),oe=(e,t,i)=>e.compProxy?((e,t,i)=>{const{compProxy:o}=e;i(o);const r=o.getProps(),a=m(t);return s.createElement(F.Provider,{value:{setMethods:e=>o.setMethods(e)}},a?s.createElement(t,(0,n.A)({},r)):s.createElement(t,(0,n.A)((0,n.A)({},r),{},{ref:e=>o.setRef(e)})))})(e,t,i):s.createElement(t,(0,n.A)((0,n.A)({},e.compDetails.params),{},{ref:i})),ne=function(e,t,i,o,n,r){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const{context:l}=(0,s.useContext)(c),d=(0,s.useCallback)(()=>{const e=n.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.remove(),l.destroyBean(e),n.current=void 0},[]);(0,s.useEffect)(()=>{const o=null!=e&&!a,s=(null===e||void 0===e?void 0:e.compDetails)&&!e.compDetails.componentFromFramework;if(!(o&&s&&!(t&&null==i)))return void d();const l=e.compDetails;if(n.current){const t=n.current,i=!!(null!=t.refresh&&0==e.force)&&t.refresh(l.params);if(!0===i||void 0===i)return;d()}l.newAgStackInstance().then(e=>{if(!e)return;const o=e.getGui();if(!o)return;(t?i:r.current).appendChild(o),n.current=e})},[e,t,o,a]),(0,s.useEffect)(()=>d,[])},se=e=>{var t;let{cellCtrl:i,parent:o}=e;const r=(0,s.useRef)(),a=(0,s.useMemo)(()=>{const{loadingComp:e}=i.getDeferLoadingCellRenderer();return e?{value:void 0,compDetails:e,force:!1}:void 0},[i]);if(ne(a,!1,void 0,1,r,o),null!==a&&void 0!==a&&null!==(t=a.compDetails)&&void 0!==t&&t.componentFromFramework){const e=a.compDetails.componentClass;return s.createElement(e,(0,n.A)({},a.compDetails.params))}return s.createElement(s.Fragment,null)},re=(0,s.memo)(e=>{let{cellCtrl:t,printLayout:i,editingCell:o}=e;const a=(0,s.useContext)(c),{context:l}=a,{column:{colIdSanitised:d},instanceId:u}=t,h=(0,s.useRef)(),[p,g]=(0,s.useState)(()=>t.isCellRenderer()?void 0:{compDetails:void 0,value:t.getValueToDisplay(),force:!1}),[v,f]=(0,s.useState)(),[w,b]=(0,s.useState)(1),[y,S]=(0,s.useState)(),[x,F]=(0,s.useState)(!1),[R,P]=(0,s.useState)(!1),[D,E]=(0,s.useState)(!1),[A,M]=(0,s.useState)(),T=(0,s.useMemo)(()=>t.isForceWrapper(),[t]),k=(0,s.useMemo)(()=>t.getCellAriaRole(),[t]),I=(0,s.useRef)(null),L=(0,s.useRef)(null),N=(0,s.useRef)(null),O=(0,s.useRef)(),G=(0,s.useRef)(),B=(0,s.useRef)(),V=(0,s.useRef)([]),H=(0,s.useRef)(),z=(0,s.useRef)(),[W,U]=(0,s.useState)(0),j=(0,s.useCallback)(e=>{z.current=e,U(e=>e+1)},[]),K=null!=p&&(x||D||R)&&(null==v||!!v.popup),Y=T||K,q=(0,s.useMemo)(()=>t.getCellValueClass(),[t]),Q=(0,s.useCallback)(e=>{if(G.current=e,e){const i=e.isCancelBeforeStart&&e.isCancelBeforeStart();setTimeout(()=>{i?(t.stopEditing(!0),t.focusCell(!0)):(t.cellEditorAttached(),t.enableEditorTooltipFeature(e))})}},[t]),X=(0,s.useRef)();X.current||(X.current=new r.hv8(()=>I.current));const $=!!v&&!v.popup;ne(p,Y,z.current,W,O,I,$);const Z=(0,s.useRef)();(0,s.useLayoutEffect)(()=>{var e,t;const i=Z.current,o=p;if(Z.current=p,null==i||null==i.compDetails||null==o||null==o.compDetails)return;null===(e=H.current)||void 0===e||e.refreshVisibility();const n=i.compDetails,s=o.compDetails;if(n.componentClass!=s.componentClass)return;if(null==(null===(t=N.current)||void 0===t?void 0:t.refresh))return;1!=N.current.refresh(s.params)&&b(e=>e+1)},[p]),(0,s.useLayoutEffect)(()=>{if(!(v&&!v.compDetails.componentFromFramework)||l.isDestroyed())return;const e=v.compDetails,i=!0===v.popup,o=e.newAgStackInstance();return o.then(e=>{if(!e)return;const t=e.getGui();if(Q(e),!i){var o;const i=(T?B:I).current;null===i||void 0===i||i.appendChild(t),null===(o=e.afterGuiAttached)||void 0===o||o.call(e)}M(e)}),()=>{o.then(e=>{const i=e.getGui();t.disableEditorTooltipFeature(),l.destroyBean(e),Q(void 0),M(void 0),null===i||void 0===i||i.remove()})}},[v]);const J=(0,s.useCallback)(e=>{if(B.current=e,!e||l.isDestroyed()||!t.isAlive()){const e=V.current;V.current=[];for(const t of e)t();return}let i;const o=t=>{t&&(e.insertAdjacentElement("afterbegin",t.getGui()),V.current.push(()=>{(0,r.MwW)(t.getGui()),l.destroyBean(t),H.current===i&&(H.current=void 0)}))};x&&o(t.createSelectionCheckbox()),D&&o(t.createDndSource()),R&&(i=t.createRowDragComp(),H.current=i,i&&(o(i),i.refreshVisibility()))},[t,l,D,R,x]),ee=(0,s.useCallback)(()=>{var e;const n=!t.isCellSpanning()||L.current,a=I.current;if(!a||!n||!t||!t.isAlive()||l.isDestroyed())return void(h.current=l.destroyBean(h.current));h.current=l.createBean(new r.dQD);const d={toggleCss:(e,t)=>X.current.toggleCss(e,t),setUserStyles:e=>S(e),getFocusableElement:()=>I.current,setIncludeSelection:e=>F(e),setIncludeRowDrag:e=>P(e),setIncludeDndSource:e=>E(e),getCellEditor:()=>{var e;return null!==(e=G.current)&&void 0!==e?e:null},getCellRenderer:()=>{var e;return null!==(e=N.current)&&void 0!==e?e:O.current},getParentOfValue:()=>{var e,t;return null!==(e=null!==(t=z.current)&&void 0!==t?t:B.current)&&void 0!==e?e:I.current},setRenderDetails:(e,i,o)=>{var n;const r=()=>{g(t=>(null===t||void 0===t?void 0:t.compDetails)!==e||(null===t||void 0===t?void 0:t.value)!==i||(null===t||void 0===t?void 0:t.force)!==o?{value:i,compDetails:e,force:o}:t)};if(null!==e&&void 0!==e&&null!==(n=e.params)&&void 0!==n&&n.deferRender&&!t.rowNode.group){const{loadingComp:e,onReady:i}=t.getDeferLoadingCellRenderer();if(e)return g({value:void 0,compDetails:e,force:!1}),void i.then(()=>{return e=r,void(C?e():s.startTransition(e));var e})}r()},setEditDetails:(e,i,o,n)=>{if(e){let t;e.componentFromFramework&&(n?t=new te(e.params,()=>b(e=>e+1)):_()),f({compDetails:e,popup:i,popupPosition:o,compProxy:t}),i||g(void 0)}else{t.hasBrowserFocus()&&d.getFocusableElement().focus({preventScroll:!0}),G.current=void 0,f(void 0)}},refreshEditStyles:(e,t)=>{if(!I.current)return;const{current:i}=X;i.toggleCss("ag-cell-value",!Y),i.toggleCss("ag-cell-inline-editing",!!e&&!t),i.toggleCss("ag-cell-popup-editing",!!e&&!!t),i.toggleCss("ag-cell-not-inline-editing",!e||!!t)}},c=B.current||void 0;t.setComp(d,a,null!==(e=L.current)&&void 0!==e?e:void 0,c,i,o,h.current)},[]),re=(0,s.useCallback)(e=>{I.current=e,ee()},[]),ae=(0,s.useCallback)(e=>{L.current=e,ee()},[]),le=(0,s.useMemo)(()=>{var e;return!!((null===p||void 0===p||null===(e=p.compDetails)||void 0===e?void 0:e.componentFromFramework)&&m(p.compDetails.componentClass))},[p]);(0,s.useLayoutEffect)(()=>{if(!I.current)return;const{current:e}=X;e.toggleCss("ag-cell-value",!Y),e.toggleCss("ag-cell-inline-editing",!!v&&!v.popup),e.toggleCss("ag-cell-popup-editing",!!v&&!!v.popup),e.toggleCss("ag-cell-not-inline-editing",!v||!!v.popup)});const de=()=>{const{compDetails:e,value:i}=p;var o,r;if(!e)return null!==(o=null===i||void 0===i||null===(r=i.toString)||void 0===r?void 0:r.call(i))&&void 0!==o?o:i;if(e.componentFromFramework){const i=e.componentClass;return s.createElement(s.Suspense,{fallback:s.createElement(se,{cellCtrl:t,parent:I})},le?s.createElement(i,(0,n.A)((0,n.A)({},e.params),{},{key:w})):s.createElement(i,(0,n.A)((0,n.A)({},e.params),{},{key:w,ref:N})))}},ce=()=>{const e=()=>null==p?null:Y?s.createElement("span",{role:"presentation",id:"cell-".concat(u),className:q,ref:j},de()):de(),i=e=>((e,t,i,o,n)=>{const r=e.compDetails,a=r.componentClass,l=r.componentFromFramework&&!e.popup,d=r.componentFromFramework&&e.popup,c=!r.componentFromFramework&&e.popup;return l?oe(e,a,t):d?s.createElement(ie,{editDetails:e,cellCtrl:o,eParentCell:i,wrappedContent:oe(e,a,t)}):c&&n?s.createElement(ie,{editDetails:e,cellCtrl:o,eParentCell:i,jsChildComp:n}):null})(e,Q,I.current,t,A);return null!=v?v.popup?s.createElement(s.Fragment,null,e(),i(v)):i(v):e()},ue=()=>s.createElement("div",{ref:re,style:y,role:k,"col-id":d},Y?s.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:J},ce()):ce());return t.isCellSpanning()?s.createElement("div",{ref:ae,className:"ag-spanned-cell-wrapper",role:"presentation"},ue()):ue()}),ae=(0,s.memo)(e=>{let{rowCtrl:t,containerType:i}=e;const{context:o,gos:a,editSvc:l}=(0,s.useContext)(c),d="default"===(0,s.useContext)(u),p=(0,s.useRef)(),g=(0,s.useRef)(t.getDomOrder()),v=t.isFullWidth(),f=t.rowNode.displayed,[C,w]=(0,s.useState)(()=>f?t.rowNode.getRowIndexString():null),[S,x]=(0,s.useState)(()=>t.rowId),[F,R]=(0,s.useState)(()=>t.businessKey),[P,D]=(0,s.useState)(()=>t.rowStyles),E=(0,s.useRef)(null),[A,M]=(0,s.useState)(()=>null),[T,k]=(0,s.useState)(),[I,L]=(0,s.useState)(()=>f?t.getInitialRowTop(i):void 0),[N,O]=(0,s.useState)(()=>f?t.getInitialTransform(i):void 0),G=(0,s.useRef)(null),B=(0,s.useRef)(),V=(0,s.useRef)(),H=(0,s.useRef)(!1),[z,W]=(0,s.useState)(0);(0,s.useEffect)(()=>{var e;if(H.current||!T||z>10)return;const i=null===(e=G.current)||void 0===e?void 0:e.firstChild;i?(t.setupDetailRowAutoHeight(i),H.current=!0):W(e=>e+1)},[T,z]);const U=(0,s.useRef)();U.current||(U.current=new r.hv8(()=>G.current));const j=(0,s.useRef)(()=>{}),_=(0,s.useCallback)(e=>(j.current=e,()=>{j.current=()=>{}}),[]),K=(Y=_,q=()=>E.current,Q=[],s.useSyncExternalStore?s.useSyncExternalStore(Y,q):Q);var Y,q,Q;const X=d?K:A,$=(0,s.useCallback)(e=>{if(G.current=e,p.current=e?o.createBean(new r.dQD):o.destroyBean(p.current),!e)return void t.unsetComp(i);if(!t.isAlive()||o.isDestroyed())return;const s={setTop:L,setTransform:O,toggleCss:(e,t)=>U.current.toggleCss(e,t),setDomOrder:e=>g.current=e,setRowIndex:w,setRowId:x,setRowBusinessKey:R,setUserStyles:D,setCellCtrls:(e,t)=>{const i=E.current,o=y(i,e,g.current);o!==i&&(E.current=o,d?j.current():b(t,()=>M(o)))},showFullWidth:e=>{V.current=e.params,k(e)},getFullWidthCellRenderer:()=>B.current,getFullWidthCellRendererParams:()=>V.current,refreshFullWidth:e=>{const t=e();return V.current=t,ie.current?(k(e=>(0,n.A)((0,n.A)({},e),{},{params:t})),!0):!(!B.current||!B.current.refresh)&&B.current.refresh(t)}};t.setComp(s,e,i,p.current)},[]);(0,s.useLayoutEffect)(()=>h(T,o,G.current,B),[T]);const Z=(0,s.useMemo)(()=>{const e={top:I,transform:N};return Object.assign(e,P),e},[I,N,P]),J=v&&(null===T||void 0===T?void 0:T.componentFromFramework),ee=!v&&null!=X,te=(0,s.useMemo)(()=>!!((null===T||void 0===T?void 0:T.componentFromFramework)&&m(T.componentClass)),[T]),ie=(0,s.useRef)(!1);(0,s.useEffect)(()=>{ie.current=te&&!!T&&!!a.get("reactiveCustomComponents")},[te,T]);return s.createElement("div",{ref:$,role:"row",style:Z,"row-index":C,"row-id":S,"row-business-key":F},ee?null===X||void 0===X?void 0:X.map(e=>{var i;return s.createElement(re,{cellCtrl:e,editingCell:null!==(i=null===l||void 0===l?void 0:l.isEditing(e,{withOpenEditor:!0}))&&void 0!==i&&i,printLayout:t.printLayout,key:e.instanceId})}):J?(()=>{const e=T.componentClass;return te?s.createElement(e,(0,n.A)({},T.params)):s.createElement(e,(0,n.A)((0,n.A)({},T.params),{},{ref:B}))})():null)}),le=(0,s.memo)(e=>{let{name:t}=e;const{context:i,gos:o}=(0,s.useContext)(c),n=(0,s.useMemo)(()=>(0,r.BEv)(t),[t]),a=(0,s.useRef)(null),l=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useRef)([]),h=(0,s.useRef)([]),[p,v]=(0,s.useState)(()=>[]),m=!!o.get("enableCellSpan")&&!!n.getSpannedRowCtrls,f=(0,s.useRef)([]),C=(0,s.useRef)([]),[w,S]=(0,s.useState)(()=>[]),x=(0,s.useRef)(!1),F=(0,s.useRef)(),R=(0,s.useMemo)(()=>g("ag-viewport",(0,r._oP)(t)),[t]),P=(0,s.useMemo)(()=>g((0,r.Hky)(t)),[t]),D=(0,s.useMemo)(()=>g("ag-spanning-container",(0,r.bUh)(t)),[t]),E="center"===n.type||m;ee(" AG Row Container "+t+" ",E?a:l);const A=(0,s.useCallback)(()=>{const e=!E||null!=a.current,t=null!=l.current,i=!m||null!=d.current;return e&&t&&i},[]),M=(0,s.useCallback)(()=>null==a.current&&null==l.current&&null==d.current,[]),T=(0,s.useCallback)(()=>{if(M()&&(F.current=i.destroyBean(F.current)),!i.isDestroyed()&&A()){var e;const o=e=>{const t=y(h.current,u.current,x.current);t!==h.current&&(h.current=t,b(e,()=>v(t)))},n=e=>{const t=y(C.current,f.current,x.current);t!==C.current&&(C.current=t,b(e,()=>S(t)))},s={setHorizontalScroll:e=>{a.current&&(a.current.scrollLeft=e)},setViewportHeight:e=>{a.current&&(a.current.style.height=e)},setRowCtrls:e=>{let{rowCtrls:t,useFlushSync:i}=e;const n=!!i&&u.current.length>0&&t.length>0;u.current=t,o(n)},setSpannedRowCtrls:(e,t)=>{const i=!!t&&f.current.length>0&&e.length>0;f.current=e,n(i)},setDomOrder:e=>{x.current!=e&&(x.current=e,o(!1))},setContainerWidth:e=>{l.current&&(l.current.style.width=e)},setOffsetTop:e=>{l.current&&(l.current.style.transform="translateY(".concat(e,")"))}};F.current=i.createBean(new r.Rlq(t)),F.current.setComp(s,l.current,null!==(e=d.current)&&void 0!==e?e:void 0,a.current)}},[A,M]),k=(0,s.useCallback)(e=>{l.current=e,T()},[T]),I=(0,s.useCallback)(e=>{d.current=e,T()},[T]),L=(0,s.useCallback)(e=>{a.current=e,T()},[T]),N=()=>s.createElement("div",{className:P,ref:k,role:E?"presentation":"rowgroup"},p.map(e=>s.createElement(ae,{rowCtrl:e,containerType:n.type,key:e.instanceId})));if(!E)return N();return s.createElement("div",{className:R,ref:L,role:"rowgroup"},N(),m?s.createElement("div",{className:D,ref:I,role:"presentation"},w.map(e=>s.createElement(ae,{rowCtrl:e,containerType:n.type,key:e.instanceId}))):null)}),de=(0,s.memo)(()=>{const e=(0,s.useContext)(c),{context:t,overlays:i}=e,[o,n]=(0,s.useState)(""),[a,l]=(0,s.useState)(0),[d,u]=(0,s.useState)(0),[h,p]=(0,s.useState)("0px"),[v,m]=(0,s.useState)("0px"),[f,C]=(0,s.useState)("100%"),[w,b]=(0,s.useState)("0px"),[y,S]=(0,s.useState)("0px"),[x,F]=(0,s.useState)("100%"),[R,P]=(0,s.useState)(!0),[D,E]=(0,s.useState)(!0),[A,M]=(0,s.useState)(null),[T,k]=(0,s.useState)(""),[I,L]=(0,s.useState)(null),[N,O]=(0,s.useState)("ag-layout-normal"),G=(0,s.useRef)();G.current||(G.current=new r.hv8(()=>B.current));const B=(0,s.useRef)(null),V=(0,s.useRef)(null),H=(0,s.useRef)(null),z=(0,s.useRef)(null),W=(0,s.useRef)(null),U=(0,s.useRef)(null),j=(0,s.useRef)(null),_=(0,s.useRef)([]),K=(0,s.useRef)([]);ee(" AG Grid Body ",B),ee(" AG Pinned Top ",V),ee(" AG Sticky Top ",H),ee(" AG Middle ",U),ee(" AG Pinned Bottom ",j);const Y=(0,s.useCallback)(o=>{if(B.current=o,!o||t.isDestroyed()){_.current=t.destroyBeans(_.current);for(const e of K.current)e();return void(K.current=[])}const s=(e,t)=>{e.appendChild(t),K.current.push(()=>t.remove())},a=(e,i,o)=>{s(e,document.createComment(o)),s(e,(e=>{const i=t.createBean(new e);return _.current.push(i),i})(i).getGui())};a(o,r.ifX," AG Fake Horizontal Scroll ");const d=null===i||void 0===i?void 0:i.getOverlayWrapperCompClass();d&&a(o,d," AG Overlay Wrapper "),W.current&&a(W.current,r.AR_," AG Fake Vertical Scroll ");const c={setRowAnimationCssOnBodyViewport:n,setColumnCount:e=>{B.current&&(0,r.Aag)(B.current,e)},setRowCount:e=>{B.current&&(0,r.cBy)(B.current,e)},setTopHeight:l,setBottomHeight:u,setStickyTopHeight:p,setStickyTopTop:m,setStickyTopWidth:C,setTopInvisible:P,setBottomInvisible:E,setColumnMovingCss:(e,t)=>G.current.toggleCss(e,t),updateLayoutClasses:O,setAlwaysVerticalScrollClass:M,setPinnedTopBottomOverflowY:k,setCellSelectableCss:(e,t)=>L(t?e:null),setBodyViewportWidth:e=>{U.current&&(U.current.style.width=e)},registerBodyViewportResizeListener:t=>{if(U.current){const i=(0,r.QSI)(e,U.current,t);K.current.push(()=>i())}},setStickyBottomHeight:b,setStickyBottomBottom:S,setStickyBottomWidth:F,setGridRootRole:e=>o.setAttribute("role",e)},h=t.createBean(new r.m20);_.current.push(h),h.setComp(c,o,U.current,V.current,j.current,H.current,z.current)},[]),q=(0,s.useMemo)(()=>g("ag-root","ag-unselectable",N),[N]),Q=(0,s.useMemo)(()=>g("ag-body-viewport",o,N,A,I),[o,N,A,I]),X=(0,s.useMemo)(()=>g("ag-body",N),[N]),$=(0,s.useMemo)(()=>g("ag-floating-top",R?"ag-invisible":null,I),[I,R]),Z=(0,s.useMemo)(()=>g("ag-sticky-top",I),[I]),te=(0,s.useMemo)(()=>g("ag-sticky-bottom","0px"===w?"ag-invisible":null,I),[I,w]),ie=(0,s.useMemo)(()=>g("ag-floating-bottom",D?"ag-invisible":null,I),[I,D]),oe=(0,s.useMemo)(()=>({height:a,minHeight:a,overflowY:T}),[a,T]),ne=(0,s.useMemo)(()=>({height:h,top:v,width:f}),[h,v,f]),se=(0,s.useMemo)(()=>({height:w,bottom:y,width:x}),[w,y,x]),re=(0,s.useMemo)(()=>({height:d,minHeight:d,overflowY:T}),[d,T]),ae=e=>s.createElement(le,{name:e,key:"".concat(e,"-container")}),de=e=>{let{section:t,children:i,className:o,style:n}=e;return s.createElement("div",{ref:t,className:o,role:"presentation",style:n},i.map(ae))};return s.createElement("div",{ref:Y,className:q},s.createElement(J,null),de({section:V,className:$,style:oe,children:["topLeft","topCenter","topRight","topFullWidth"]}),s.createElement("div",{className:X,ref:W,role:"presentation"},de({section:U,className:Q,children:["left","center","right","fullWidth"]})),de({section:H,className:Z,style:ne,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),de({section:z,className:te,style:se,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),de({section:j,className:ie,style:re,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))}),ce=(0,s.forwardRef)((e,t)=>{const{children:i,eFocusableElement:o,onTabKeyDown:n,gridCtrl:a,forceFocusOutWhenTabGuardsAreEmpty:l,isEmpty:d}=e,{context:u}=(0,s.useContext)(c),h=(0,s.useRef)(null),p=(0,s.useRef)(null),g=(0,s.useRef)(),v=e=>{const t=null==e?void 0:parseInt(e,10).toString();for(const n of[h,p]){var i,o;if(void 0===t)null===(i=n.current)||void 0===i||i.removeAttribute("tabindex");else null===(o=n.current)||void 0===o||o.setAttribute("tabindex",t)}};(0,s.useImperativeHandle)(t,()=>({forceFocusOutOfContainer(e){var t;null===(t=g.current)||void 0===t||t.forceFocusOutOfContainer(e)}}));const m=(0,s.useCallback)(()=>{const e=h.current,t=p.current;if(!e&&!t||u.isDestroyed())g.current=u.destroyBean(g.current);else if(e&&t){const i={setTabIndex:v};g.current=u.createBean(new r.Udn({comp:i,eTopGuard:e,eBottomGuard:t,eFocusableElement:o,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:l,focusInnerElement:e=>a.focusInnerElement(e),isEmpty:d}))}},[]),f=(0,s.useCallback)(e=>{h.current=e,m()},[m]),C=(0,s.useCallback)(e=>{p.current=e,m()},[m]),w=e=>{const t="top"===e?r.pA9.TAB_GUARD_TOP:r.pA9.TAB_GUARD_BOTTOM;return s.createElement("div",{className:"".concat(r.pA9.TAB_GUARD," ").concat(t),role:"presentation",ref:"top"===e?f:C})};return s.createElement(s.Fragment,null,w("top"),i,w("bottom"))}),ue=(0,s.memo)(ce),he=(0,s.memo)(e=>{let{context:t}=e;const[i,o]=(0,s.useState)(""),[n,a]=(0,s.useState)(""),[l,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[p,v]=(0,s.useState)(!1),[m,f]=(0,s.useState)(),C=(0,s.useRef)(),w=(0,s.useRef)(null),b=(0,s.useRef)(),[y,S]=(0,s.useState)(null),x=(0,s.useRef)(()=>{}),F=(0,s.useRef)(),R=(0,s.useRef)([]),P=(0,s.useCallback)(()=>{},[]);ee(" AG Grid ",w);const D=(0,s.useCallback)(e=>{if(w.current=e,C.current=e?t.createBean(new r.s1r):t.destroyBean(C.current),!e||t.isDestroyed())return;const i=C.current;x.current=i.focusInnerElement.bind(i);const n={destroyGridUi:()=>{},setRtlClass:o,forceFocusOutOfContainer:e=>{var t,i;e||null===(t=F.current)||void 0===t||!t.isDisplayed()?null===(i=b.current)||void 0===i||i.forceFocusOutOfContainer(e):F.current.forceFocusOutOfContainer(e)},updateLayoutClasses:a,getFocusableContainers:()=>{var e;const t=[],i=null===(e=w.current)||void 0===e?void 0:e.querySelector(".ag-root");i&&t.push({getGui:()=>i});for(const o of R.current)o.isDisplayed()&&t.push(o);return t},setCursor:d,setUserSelect:h};i.setComp(n,e,e),v(!0)},[]);(0,s.useEffect)(()=>{const e=C.current,i=w.current;if(!m||!e||!y||!i||t.isDestroyed())return;const o=[],{watermarkSelector:n,paginationSelector:s,sideBarSelector:r,statusBarSelector:a,gridHeaderDropZonesSelector:l}=e.getOptionalSelectors(),d=[];if(l){const e=t.createBean(new l.component),n=e.getGui();i.insertAdjacentElement("afterbegin",n),d.push(n),o.push(e)}if(r){const e=t.createBean(new r.component),i=e.getGui(),n=y.querySelector(".ag-tab-guard-bottom");n&&(n.insertAdjacentElement("beforebegin",i),d.push(i)),o.push(e),R.current.push(e)}const c=e=>{const n=t.createBean(new e),s=n.getGui();return i.insertAdjacentElement("beforeend",s),d.push(s),o.push(n),n};if(a&&c(a.component),s){const e=c(s.component);F.current=e,R.current.push(e)}return n&&c(n.component),()=>{t.destroyBeans(o);for(const e of d)e.remove()}},[m,y,t]);const E=(0,s.useMemo)(()=>g("ag-root-wrapper",i,n),[i,n]),A=(0,s.useMemo)(()=>g("ag-root-wrapper-body","ag-focus-managed",n),[n]),M=(0,s.useMemo)(()=>({userSelect:null!=u?u:"",WebkitUserSelect:null!=u?u:"",cursor:null!=l?l:""}),[u,l]),T=(0,s.useCallback)(e=>{b.current=e,f(null!==e)},[]),k=(0,s.useCallback)(()=>{var e;return!(null!==(e=C.current)&&void 0!==e&&e.isFocusable())},[]);return s.createElement("div",{ref:D,className:E,style:M,role:"presentation"},s.createElement("div",{className:A,ref:S,role:"presentation"},p&&y&&!t.isDestroyed()&&s.createElement(c.Provider,{value:t.getBeans()},s.createElement(ue,{ref:T,eFocusableElement:y,onTabKeyDown:P,gridCtrl:C.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:k},s.createElement(de,null)))))}),pe=class extends r.XQb{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(e=>e.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(e=>!!e.eGui))}},ge={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},ve=(0,n.A)({gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0},ge),me=new Set(Object.keys(ve)),fe=new Set(Object.keys(ge)),Ce=e=>{var t,i;const o=(0,s.useRef)(),a=(0,s.useRef)(null),l=(0,s.useRef)(null),d=(0,s.useRef)([]),c=(0,s.useRef)([]),h=(0,s.useRef)(e),p=(0,s.useRef)(),g=(0,s.useRef)(),v=(0,s.useRef)(!1),[m,f]=(0,s.useState)(void 0),[,C]=(0,s.useState)(0),w=(0,s.useRef)(),b=e=>{var t;const i=null===(t=a.current)||void 0===t?void 0:t.classList,o=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(/\s+/g).filter(Boolean)};if(w.current!==e){for(const e of o(w.current))null!==i&&void 0!==i&&i.contains(e)&&i.remove(e);for(const t of o(e))null!==i&&void 0!==i&&i.contains(t)||null===i||void 0===i||i.add(t);w.current=e}};(0,s.useLayoutEffect)(()=>{b(e.className)},[e.className]);const y=(0,s.useCallback)(t=>{var i;if(a.current=t,b(e.className),!t){for(const e of d.current)e();return void(d.current.length=0)}const n=e.modules||[];l.current||(l.current=new K(()=>C(e=>e+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),d.current.push(()=>{var e;null===(e=l.current)||void 0===e||e.destroy(),l.current=null}));const s=(0,r.zsR)(e.gridOptions,e,Object.keys(e).filter(e=>!me.has(e))),u=new ye(()=>{if(v.current){const e=()=>{var e;return null!==(e=p.current)&&void 0!==e&&e.shouldQueueUpdates()?void 0:c.current.shift()};let t=e();for(;t;)t(),t=e()}});p.current=u;const h=new pe,m={providedBeanInstances:{frameworkCompWrapper:new we(l.current,s),renderStatus:h},modules:n,frameworkOverrides:u,setThemeOnGridDiv:!0},w=new r.Ug$;null!==(i=s.gridId)&&void 0!==i||(s.gridId=g.current),o.current=w.create(t,s,t=>{f(t),t.createBean(h),d.current.push(()=>{t.destroy()}),t.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{d.current.push(e)}},()=>{if(t.isDestroyed())return;const i=o.current;var n;i&&(null===(n=e.passGridApi)||void 0===n||n.call(e,i))})},e=>{e.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{d.current.push(e)}},()=>{for(const e of c.current)e();c.current.length=0,v.current=!0})},m),d.current.push(()=>{o.current=void 0}),o.current&&(g.current=o.current.getGridId())},[]),S=(0,s.useMemo)(()=>(0,n.A)({height:"100%"},e.containerStyle||{}),[e.containerStyle]),x=(0,s.useCallback)(e=>{var t;!v.current||null!==(t=p.current)&&void 0!==t&&t.shouldQueueUpdates()?c.current.push(e):e()},[]);(0,s.useEffect)(()=>{const t=function(e,t){const i={};for(const o of Object.keys(t)){if(me.has(o)){fe.has(o)&&(0,r.ujB)(274,{prop:o});continue}const n=t[o];e[o]!==n&&(i[o]=n)}return i}(h.current,e);h.current=e,x(()=>{o.current&&(0,r.Y6t)(t,o.current)})},[e]);const F=s.useSyncExternalStore&&"legacy"!==(0,r.Fzc)(e,"renderingMode")?"default":"legacy";return s.createElement("div",{style:S,ref:y},s.createElement(u.Provider,{value:F},m&&!m.isDestroyed()?s.createElement(he,{key:m.instanceId,context:m}):null,null!==(t=null===(i=l.current)||void 0===i?void 0:i.getPortals())&&void 0!==t?t:null))};var we=class extends r.Cf3{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const i=this.gridOptions;if((0,r.Fzc)(i,"reactiveCustomComponents")){const o=(e=>{switch(e){case"filter":return(0,r.Fzc)(i,"enableFilterHandlers")?O:N;case"floatingFilterComponent":return(0,r.Fzc)(i,"enableFilterHandlers")?H:V;case"dateComponent":return I;case"dragAndDropImageComponent":return L;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return k;case"statusPanel":return U;case"toolPanel":return j;case"menuItem":return W;case"cellRenderer":return T;case"innerHeaderComponent":return z}})(t.name);if(o)return new o(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":_()}const o=!t.cellRenderer&&"toolPanel"!==t.name;return new E(e,this.parent,t,o)}},be=(0,s.forwardRef)((e,t)=>{const i=(0,s.useContext)(c),{registry:o,context:a,gos:l,rowModel:d}=i,[u,h]=(0,s.useState)(()=>new v),[p,g]=(0,s.useState)(()=>new v),[m,f]=(0,s.useState)(),[C,w]=(0,s.useState)(),b=(0,s.useRef)(),y=(0,s.useRef)(null),S=(0,s.useRef)(),x=(0,s.useMemo)(()=>{var t;return(0,r.Dii)(e.api.getGridId(),null!==(t=null===m||void 0===m?void 0:m.rowModelType)&&void 0!==t?t:"clientSide")},[e]),F=(0,s.useMemo)(()=>u.toString()+" ag-details-row",[u]),R=(0,s.useMemo)(()=>p.toString()+" ag-details-grid",[p]);t&&(0,s.useImperativeHandle)(t,()=>({refresh(){var e,t;return null!==(e=null===(t=b.current)||void 0===t?void 0:t.refresh())&&void 0!==e&&e}})),e.template&&(0,r.ujB)(230);const P=(0,s.useCallback)(t=>{var n;if(y.current=t,!t||a.isDestroyed())return b.current=a.destroyBean(b.current),void(null===(n=S.current)||void 0===n||n.call(S));const s={toggleCss:(e,t)=>h(i=>i.setClass(e,t)),toggleDetailGridCss:(e,t)=>g(i=>i.setClass(e,t)),setDetailGrid:e=>f(e),setRowData:e=>w(e),getGui:()=>y.current},c=o.createDynamicBean("detailCellRendererCtrl",!0);if(c&&(a.createBean(c),c.init(s,e),b.current=c,l.get("detailRowAutoHeight"))){const o=()=>{if(null==y.current)return;const t=y.current.clientHeight;if(null!=t&&t>0){setTimeout(()=>{e.node.setRowHeight(t),((0,r.dbY)(l,d)||(0,r.TiQ)(l,d))&&d.onRowHeightChanged()},0)}};S.current=(0,r.QSI)(i,t,o),o()}},[]),D=(0,s.useCallback)(e=>{var t;null===(t=b.current)||void 0===t||t.registerDetailWithMaster(e)},[]);return s.createElement("div",{className:F,ref:P},m&&s.createElement(Ce,(0,n.A)((0,n.A)({className:R},m),{},{modules:x,rowData:C,passGridApi:D})))}),ye=class extends r.pow{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:x,agGroupRowRenderer:x,agDetailCellRenderer:be},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(i=e,w||setTimeout(()=>w=!1,0),w=!0,i()):e();var i}}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===f}},Se=class extends s.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return s.createElement(Ce,(0,n.A)((0,n.A)({},this.props),{},{passGridApi:this.setGridApi}))}}},555(){},579(e,t,i){e.exports=i(799)},595(e,t,i){i(43);i.p;i(50),i(579)},672(e,t,i){var o=i(43);function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(n(299));return function(e,t,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==o?null:""+o,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.flushSync=function(e){var t=l.T,i=r.p;try{if(l.T=null,r.p=2,e)return e()}finally{l.T=t,r.p=i,r.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&r.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var i=t.as,o=d(i,t.crossOrigin),n="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===i?r.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:o,integrity:n,fetchPriority:s}):"script"===i&&r.d.X(e,{crossOrigin:o,integrity:n,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var i=d(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var i=t.as,o=d(i,t.crossOrigin);r.d.L(e,i,{crossOrigin:o,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var i=d(t.as,t.crossOrigin);r.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},t.requestFormReset=function(e){r.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,i){return l.H.useFormState(e,t,i)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},702(){},782(e,t,i){i.a(e,async(e,o)=>{try{i.d(t,{A:()=>v});var n=i(936),s=i(424),r=i(43),a=(i(851),i(702),i(955)),l=i(815),d=i(579);a.syG.registerModules([a.JKr,l.mZZ]);const u=[{field:"rank"},{field:"id"},{field:"name"},{field:"tag",rowGroup:!0,hide:!0},{field:"villages"},{field:"points"},{field:"iswinner"},{field:"willdelete"},{field:"willmaybe"},{field:"active",headerName:"Aktiv",cellRenderer:e=>(0,d.jsx)("button",{onClick:()=>{e.node.setDataValue("active",!e.value)},children:e.value?"Delee":"Set"})}];async function h(){const e=await fetch("https://corsproxy.io/?https://de242.die-staemme.de/map/ally.txt"),t=(await e.text()).replace(/\+/g," "),i=decodeURIComponent(t),o=await fetch("https://corsproxy.io/?https://de242.die-staemme.de/map/player.txt"),s=(await o.text()).replace(/\+/g," "),r=decodeURIComponent(s),a=i.trim().split("\n"),l=r.trim().split("\n"),d=a.map(e=>{const[t,i,o,n,s,r,a,l]=e.split(",");return{id:Number(t),name:i,tag:o,members:Number(n),villages:Number(s),points:Number(r),all_points:Number(a),rank:Number(l)}});d.sort((e,t)=>e.rank-t.rank);const c=l.map(e=>{const[t,i,o,n,s,r,a,l,d]=e.split(",");return{id:Number(t),name:String(i),ally_id:Number(o),villages:Number(n),points:Number(s),rank:Number(r),iswinner:Boolean(a),willdelete:Boolean(l),willmaybe:Boolean(d)}});c.sort((e,t)=>e.rank-t.rank);const u=Object.fromEntries(d.map(e=>[e.id,e])),h=c.map(e=>{var t,i,o,s;const r=u[e.ally_id]||{};return(0,n.A)((0,n.A)({},e),{},{alliance_id:null!==(t=r.id)&&void 0!==t?t:0,alliance_name:null!==(i=r.name)&&void 0!==i?i:"N/A",tag:null!==(o=r.tag)&&void 0!==o?o:"N/A",members:null!==(s=r.members)&&void 0!==s?s:"N/A"})});return console.log("leftJoined:",h),h}const p=await h();async function g(){const e=p.reduce((e,t)=>e+t.villages,0);return console.log(e),e}function v(){const[e,t]=(0,r.useState)([]),[i,o]=(0,r.useState)(0),[l,c]=(0,r.useState)(0),[p,v]=(0,r.useState)(0);(0,r.useEffect)(()=>{!async function(){const t=e.reduce((e,t)=>t.iswinner?e+t.villages:e,0);o(t)}()},[e]),(0,r.useEffect)(()=>{!async function(){const t=e.reduce((e,t)=>!0===t.iswinner||t.willdelete?e+t.villages:e,0);c(t)}()},[e]),(0,r.useEffect)(()=>{!async function(){const t=e.reduce((e,t)=>!0===t.iswinner||!0===t.willdelete||!0===t.willmaybe?e+t.villages:e,0);v(t)}()},[e]);const[m,f]=(0,r.useState)(0),[C,w]=(0,r.useState)(0),[b,y]=(0,r.useState)(0);(0,r.useEffect)(()=>{!async function(){const t=e.reduce((e,t)=>t.iswinner?e+t.villages:e,0),i=e.reduce((e,t)=>e+t.villages,0),o=0===i?0:(t/i*100).toFixed(2);f(o)}()},[e]),(0,r.useEffect)(()=>{!async function(){const t=e.reduce((e,t)=>!0===t.iswinner||t.willdelete?e+t.villages:e,0),i=e.reduce((e,t)=>e+t.villages,0),o=0===i?0:(t/i*100).toFixed(2);w(o)}()},[e]),(0,r.useEffect)(()=>{!async function(){const t=e.reduce((e,t)=>!0===t.iswinner||!0===t.willdelete||!0===t.willmaybe?e+t.villages:e,0),i=e.reduce((e,t)=>e+t.villages,0),o=0===i?0:(t/i*100).toFixed(2);y(o)}()},[e]),(0,r.useEffect)(()=>{!async function(){const e=await h();t(e)}()},[]);const[S,x]=(0,r.useState)(0),F=(0,r.useRef)(),R=(0,r.useMemo)(()=>({mode:"multiRow",groupSelects:"descendants",checkboxLocation:"autoGroupColumn"}),[]),P=(0,r.useMemo)(()=>({width:"100%",height:"100%"}),[]),D=(0,r.useMemo)(()=>({height:"100%",width:"100%"}),[]),[E,A]=(0,r.useState)(0);return(0,r.useEffect)(()=>{!async function(){const e=await g();A(e)}()},[]),(0,d.jsxs)("div",{style:P,children:[(0,d.jsx)("div",{style:D,children:(0,d.jsx)("div",{className:"ag-theme-alpine",style:{height:600,width:"100%"},children:(0,d.jsx)(s.W6,{ref:F,theme:a.BhY,rowData:e,columnDefs:u,rowSelection:R,pagination:!0,paginationPageSize:50,onSelectionChanged:()=>{const e=F.current.api.getSelectedRows().reduce((e,t)=>e+t.villages,0);x(e)},getRowId:e=>e.data.id})})}),(0,d.jsxs)("div",{style:{marginTop:10},children:[(0,d.jsx)("strong",{children:"Summe der selektierten Preise:"})," ",S]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{children:"Aktueller Stand"}),(0,d.jsx)("p",{children:(0,d.jsxs)("label",{children:["Alle D\xf6rfer: ",(0,d.jsx)("strong",{children:E.toLocaleString()})]})}),(0,d.jsxs)("p",{children:[(0,d.jsxs)("label",{children:["Siegerd\xf6rfer: ",(0,d.jsx)("strong",{children:i})]}),(0,d.jsxs)("label",{style:{marginLeft:10},children:["(",m,"%)  "]})]}),(0,d.jsxs)("label",{children:["Mit Safe L\xf6schen D\xf6rfer: ",(0,d.jsx)("strong",{children:l})]}),(0,d.jsxs)("label",{style:{marginLeft:10},children:["(",C,"%)  "]}),(0,d.jsx)("br",{}),(0,d.jsxs)("label",{children:["Mit Vielleicht L\xf6schen D\xf6rfer: ",(0,d.jsx)("strong",{children:p})]}),(0,d.jsxs)("label",{style:{marginLeft:10},children:["(",b,"%)  "]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{onClick:()=>{const e=F.current.api.getSelectedNodes();if(0===e.length)return void alert("Bitte eine Zeile ausw\xe4hlen");const i=e.map(e=>e.data.id);t(e=>e.map(e=>i.includes(e.id)?(0,n.A)((0,n.A)({},e),{},{iswinner:!0}):e))},children:"Als Sieger Festlegen"}),(0,d.jsx)("button",{onClick:()=>{const e=F.current.api.getSelectedNodes();if(0===e.length)return void alert("Bitte eine Zeile ausw\xe4hlen");const i=e.map(e=>e.data.id);t(e=>e.map(e=>i.includes(e.id)?(0,n.A)((0,n.A)({},e),{},{willdelete:!0}):e))},children:"Als Save L\xf6schen Festlegen"}),(0,d.jsx)("button",{onClick:()=>{const e=F.current.api.getSelectedNodes();if(0===e.length)return void alert("Bitte eine Zeile ausw\xe4hlen");const i=e.map(e=>e.data.id);t(e=>e.map(e=>i.includes(e.id)?(0,n.A)((0,n.A)({},e),{},{willmaybe:!0}):e))},children:"l\xf6scht vielleicht"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{onClick:()=>{const e=F.current.api.getSelectedNodes();if(0===e.length)return void alert("Bitte eine Zeile ausw\xe4hlen");const i=e.map(e=>e.data.id);t(e=>e.map(e=>i.includes(e.id)?(0,n.A)((0,n.A)({},e),{},{iswinner:!1}):e))},children:"Siegerplatz aberkennen"}),(0,d.jsx)("button",{onClick:()=>{const e=F.current.api.getSelectedNodes();if(0===e.length)return void alert("Bitte eine Zeile ausw\xe4hlen");const i=e.map(e=>e.data.id);t(e=>e.map(e=>i.includes(e.id)?(0,n.A)((0,n.A)({},e),{},{willdelete:!1}):e))},children:"Save l\xf6schen entfernen"}),(0,d.jsx)("button",{onClick:()=>{const e=F.current.api.getSelectedNodes();if(0===e.length)return void alert("Bitte eine Zeile ausw\xe4hlen");const i=e.map(e=>e.data.id);t(e=>e.map(e=>i.includes(e.id)?(0,n.A)((0,n.A)({},e),{},{willmaybe:!1}):e))},children:"vielleicht entfernen"})]})]})]})}o()}catch(c){o(c)}},1)},799(e,t){var i=Symbol.for("react.transitional.element");function o(e,t,o){var n=null;if(void 0!==o&&(n=""+o),void 0!==t.key&&(n=""+t.key),"key"in t)for(var s in o={},t)"key"!==s&&(o[s]=t[s]);else o=t;return t=o.ref,{$$typeof:i,type:e,key:n,ref:void 0!==t?t:null,props:o}}Symbol.for("react.fragment"),t.jsx=o,t.jsxs=o},812(e,t,i){i.a(e,async(e,t)=>{try{var o=i(43),n=i(391),s=(i(555),i(50),i(595),i(303)),r=i(782),a=i(31),l=i(579),d=e([s,r]);[s,r]=d.then?(await d)():d;n.createRoot(document.getElementById("root")).render((0,l.jsx)(o.StrictMode,{children:(0,l.jsx)(r.A,{})})),(0,a.A)(),t()}catch(c){t(c)}})},815(e,t,i){i.d(t,{mZZ:()=>Hl});var o=i(986),n=i(936),s=i(955);const r=["nodes"],a=["xAxis","yAxis"],l=["chartType","chartPalette","chartOptions"],d=["dimOpacity"],c=["item","series"],u=["axes","series","seriesDefaults"],h=["chartType","chartOptions"],p=["type"],g=["tracking"],v=["dimOpacity"];var m=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],o=e[1],n=e[2],s=e[3];i=this.ff(i,o,n,s,t[0],7,-680876936),s=this.ff(s,i,o,n,t[1],12,-389564586),n=this.ff(n,s,i,o,t[2],17,606105819),o=this.ff(o,n,s,i,t[3],22,-1044525330),i=this.ff(i,o,n,s,t[4],7,-176418897),s=this.ff(s,i,o,n,t[5],12,1200080426),n=this.ff(n,s,i,o,t[6],17,-1473231341),o=this.ff(o,n,s,i,t[7],22,-45705983),i=this.ff(i,o,n,s,t[8],7,1770035416),s=this.ff(s,i,o,n,t[9],12,-1958414417),n=this.ff(n,s,i,o,t[10],17,-42063),o=this.ff(o,n,s,i,t[11],22,-1990404162),i=this.ff(i,o,n,s,t[12],7,1804603682),s=this.ff(s,i,o,n,t[13],12,-40341101),n=this.ff(n,s,i,o,t[14],17,-1502002290),o=this.ff(o,n,s,i,t[15],22,1236535329),i=this.gg(i,o,n,s,t[1],5,-165796510),s=this.gg(s,i,o,n,t[6],9,-1069501632),n=this.gg(n,s,i,o,t[11],14,643717713),o=this.gg(o,n,s,i,t[0],20,-373897302),i=this.gg(i,o,n,s,t[5],5,-701558691),s=this.gg(s,i,o,n,t[10],9,38016083),n=this.gg(n,s,i,o,t[15],14,-660478335),o=this.gg(o,n,s,i,t[4],20,-405537848),i=this.gg(i,o,n,s,t[9],5,568446438),s=this.gg(s,i,o,n,t[14],9,-1019803690),n=this.gg(n,s,i,o,t[3],14,-187363961),o=this.gg(o,n,s,i,t[8],20,1163531501),i=this.gg(i,o,n,s,t[13],5,-1444681467),s=this.gg(s,i,o,n,t[2],9,-51403784),n=this.gg(n,s,i,o,t[7],14,1735328473),o=this.gg(o,n,s,i,t[12],20,-1926607734),i=this.hh(i,o,n,s,t[5],4,-378558),s=this.hh(s,i,o,n,t[8],11,-2022574463),n=this.hh(n,s,i,o,t[11],16,1839030562),o=this.hh(o,n,s,i,t[14],23,-35309556),i=this.hh(i,o,n,s,t[1],4,-1530992060),s=this.hh(s,i,o,n,t[4],11,1272893353),n=this.hh(n,s,i,o,t[7],16,-155497632),o=this.hh(o,n,s,i,t[10],23,-1094730640),i=this.hh(i,o,n,s,t[13],4,681279174),s=this.hh(s,i,o,n,t[0],11,-358537222),n=this.hh(n,s,i,o,t[3],16,-722521979),o=this.hh(o,n,s,i,t[6],23,76029189),i=this.hh(i,o,n,s,t[9],4,-640364487),s=this.hh(s,i,o,n,t[12],11,-421815835),n=this.hh(n,s,i,o,t[15],16,530742520),o=this.hh(o,n,s,i,t[2],23,-995338651),i=this.ii(i,o,n,s,t[0],6,-198630844),s=this.ii(s,i,o,n,t[7],10,1126891415),n=this.ii(n,s,i,o,t[14],15,-1416354905),o=this.ii(o,n,s,i,t[5],21,-57434055),i=this.ii(i,o,n,s,t[12],6,1700485571),s=this.ii(s,i,o,n,t[3],10,-1894986606),n=this.ii(n,s,i,o,t[10],15,-1051523),o=this.ii(o,n,s,i,t[1],21,-2054922799),i=this.ii(i,o,n,s,t[8],6,1873313359),s=this.ii(s,i,o,n,t[15],10,-30611744),n=this.ii(n,s,i,o,t[6],15,-1560198380),o=this.ii(o,n,s,i,t[13],21,1309151649),i=this.ii(i,o,n,s,t[4],6,-145523070),s=this.ii(s,i,o,n,t[11],10,-1120210379),n=this.ii(n,s,i,o,t[2],15,718787259),o=this.ii(o,n,s,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(o,e[1]),e[2]=this.add32(n,e[2]),e[3]=this.add32(s,e[3])}cmn(e,t,i,o,n,s){return t=this.add32(this.add32(t,e),this.add32(o,s)),this.add32(t<<n|t>>>32-n,i)}ff(e,t,i,o,n,s,r){return this.cmn(t&i|~t&o,e,t,n,s,r)}gg(e,t,i,o,n,s,r){return this.cmn(t&o|i&~o,e,t,n,s,r)}hh(e,t,i,o,n,s,r){return this.cmn(t^i^o,e,t,n,s,r)}ii(e,t,i,o,n,s,r){return this.cmn(i^(t|~o),e,t,n,s,r)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let o;for(o=64;o<=e.length;o+=64)this.md5cycle(i,this.md5blk(e.substring(o-64,o)));e=e.substring(o-64);const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<e.length;o++)n[o>>2]|=e.charCodeAt(o)<<(o%4<<3);if(n[o>>2]|=128<<(o%4<<3),o>55)for(this.md5cycle(i,n),o=0;o<16;o++)n[o]=0;return n[14]=8*t,this.md5cycle(i,n),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",o=0;for(;o<4;o++)i+=t[e>>8*o+4&15]+t[e>>8*o&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}},f={"01":"GRID","02":"CHARTS","0102":"BOTH"},C="https://www.ag-grid.com/licensing/",w=class e{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new m,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(e.licenseKey),i="AG Grid ".concat("BOTH"===t.currentLicenseType?"and AG Charts ":"","Enterprise"),o=void 0===t.suppliedLicenseType?"":"AG ".concat("BOTH"===t.suppliedLicenseType?"Grid and AG Charts":"GRID"===t.suppliedLicenseType?"Grid":"Charts"," Enterprise");if(t.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey(i);else if(t.expired){const n=e.getGridReleaseDate(),s=e.formatDate(n);this.outputExpiredKey(t.expiry,s,i,o)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,o):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,o)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(e.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const o=i.length-32,n=i.substring(o),s=i.substring(0,o),[r,a,l]=e.extractBracketedInformation(i);return{md5:n,license:s,version:r,isTrial:a,type:l}}getLicenseDetails(t){const i=e.chartsLicenseManager?"BOTH":"GRID";if(null===t||void 0===t||!t.length)return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:i};const o=e.getGridReleaseDate(),{md5:n,license:s,version:r,isTrial:a,type:l}=e.extractLicenseComponents(t);let d,c,u,h=n===this.md5.md5(s)&&!t.includes("For_Trialing_ag-Grid_Only"),p=null,g=!1;function v(){d=p<new Date,c=void 0}if(h&&(p=e.extractExpiry(s),h=!isNaN(p.getTime()),h))switch(c=o>p,r){case"legacy":case"2":a&&v();break;case"3":null!==l&&void 0!==l&&l.length?(u=l,l!==f["01"]&&l!==f["0102"]||"BOTH"===i&&"BOTH"!==u?(h=!1,g=!0):a&&v()):h=!1}return h?{licenseKey:t,valid:h,expiry:e.formatDate(p),expired:c,version:r,isTrial:a,trialExpired:d,incorrectLicenseType:g,currentLicenseType:i,suppliedLicenseType:u}:{licenseKey:t,valid:h,incorrectLicenseType:g,currentLicenseType:i,suppliedLicenseType:u}}isDisplayWatermark(){var e;return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!(null===(e=this.watermarkMessage)||void 0===e||!e.length)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const e=(this.document.defaultView||window).location,{hostname:t=""}=e;return t}isForceWatermark(){const e=(this.document.defaultView||window).location,{pathname:t}=e;return!!t&&t.includes("forceWatermark")}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(e){const t=e.getDate(),i=e.getMonth(),o=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+o}static getGridReleaseDate(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o,n,s,r,a,l,d,c="",u=0;const h=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<h.length;)r=i.indexOf(h.charAt(u++)),a=i.indexOf(h.charAt(u++)),l=i.indexOf(h.charAt(u++)),d=i.indexOf(h.charAt(u++)),o=r<<2|a>>4,n=(15&a)<<4|l>>2,s=(3&l)<<6|d,c+=String.fromCharCode(o),64!=l&&(c+=String.fromCharCode(n)),64!=d&&(c+=String.fromCharCode(s));return c=e.utf8_decode(c),c}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const o=e.charCodeAt(i);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}static setChartsLicenseManager(e){var t;this.chartsLicenseManager=e,null===(t=this.chartsLicenseManager)||void 0===t||t.setLicenseKey(this.licenseKey,!0)}static setLicenseKey(e){var t;(0,s.Qmv)(this.licenseKey)&&this.licenseKey!==e&&(0,s.XWP)(291,void 0,"AG Grid: License Key being set multiple times with different values. This can result in an incorrect license key being used."),this.licenseKey=e,null===(t=this.chartsLicenseManager)||void 0===t||t.setLicenseKey(e,!0)}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const t=e.match(/\[(.*?)\]/g).map(e=>e.replace("[","").replace("]",""));if(!t||0===t.length)return["legacy",!1,void 0];const i=1===t.filter(e=>"TRIAL"===e).length,o=t.filter(e=>0===e.indexOf("v"))[0];return[o?o.replace("v",""):"legacy",i,f[t.filter(e=>f[e])[0]]]}centerPadAndOutput(e){const t=this.totalMessageLength-e.length;console.error(e.padStart(t/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.error(e.padEnd(this.totalMessageLength-i.length,t)+i)}outputInvalidLicenseKey(e,t,i){e?(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput("* Your license key is for ".concat(i," only and does not cover you for ").concat(t,".")," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(C,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput("* To troubleshoot your license key visit ".concat(C,".")," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,t,i){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput("* Your trial only license for ".concat(i," expired on ").concat(e,".")," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(e," License ")),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput("* All ".concat(e," features are unlocked for trial.")," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,t,i,o){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput("* Your license key works with versions".concat(""==o?"":" of ".concat(o)," released before ").concat(e,".")," ","*"),this.padAndOutput("* The version you are trying to use was released on ".concat(t,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};w.RELEASE_INFORMATION="MTc2NTM1OTQ2ODIzOA==";var b=w,y={tag:"div",cls:"ag-watermark",children:[{tag:"div",ref:"eLicenseTextRef",cls:"ag-watermark-text"}]},S={selector:"AG-WATERMARK",component:class extends s.uAl{constructor(){super(y),this.eLicenseTextRef=s.dRA,this.registerCSS('.ag-watermark{bottom:20px;color:#9b9b9b;opacity:.7;position:absolute;transition:opacity 1s ease-out 3s;&:before{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDkiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyMDkgMzYiPjxwYXRoIGZpbGw9IiM5YjliOWIiIGQ9Ik0xOTIuOTkzIDIzLjY1OHYtNy45NDZoLTEzLjU0MWwtNy45NDcgNy45NDZ6TTIwOC4yNSAzLjk1aC0xNi45NzRsLTguMDEgNy45NDdoMjQuOTg0ek0xNjMuNjIyIDMxLjYwNWw0LjA2OS00LjA2OWgxMy43MzJ2Ny45NDdoLTE3LjgwMXoiLz48cGF0aCBmaWxsPSIjOWI5YjliIiBkPSJNMTY2LjYxIDE5Ljc4aDguNzczbDguMDEtNy45NDZIMTY2LjYxek0xNTcuMDExIDMxLjYwNWg2LjYxMWw3Ljg4My03Ljk0N2gtMTQuNDk0ek0xOTEuMjc2IDMuOTVsLTQuMDY4IDQuMDdIMTYxLjI3Vi4wNzJoMzAuMDA2ek0yMC44NCAzMC4yMDZIOC4zNzhsLTIuMTYyIDUuMzRILjc1TDEyLjI1NyA4LjU5Mmg0Ljc2OEwyOC41MyAzNS41NDZoLTUuNTN6bS0xLjcxNy00LjI2TDE0LjYwOSAxNC45NWwtNC41MTQgMTAuOTk4ek0xMDQuNDM3IDE4LjUwOWMxLjU4OS0yLjM1MiA1LjU5NC0yLjYwNyA3LjI0Ny0yLjYwN3Y0LjU3OGMtMi4wMzQgMC00LjA2OS4wNjMtNS4yNzcuOTUzLTEuMjA3Ljg5LTEuODQzIDIuMDk4LTEuODQzIDMuNTZ2MTAuNTUzaC00Ljk1OVYxNS45MDJoNC43Njh6TTExOS4zNzYgMTUuOTAyaC00Ljk1OHYxOS42NDRoNC45NTh6TTExOS4zNzYgNy4xM2gtNC45NTh2NS44NDhoNC45NTh6TTE0My45NzkgNy4xM3YyOC40MTZoLTQuNzY4bC0uMTI3LTIuOTg4YTguMyA4LjMgMCAwIDEtMi42NyAyLjQ4Yy0xLjA4MS41NzItMi40MTYuODktMy45NDIuODktMS4zMzUgMC0yLjYwNi0uMjU1LTMuNjg3LS43LTEuMTQ0LS41MDgtMi4xNjItMS4xNDQtMi45ODgtMi4wMzRhOS42IDkuNiAwIDAgMS0xLjk3MS0zLjE3OWMtLjUwOC0xLjIwNy0uNjk5LTIuNjA2LS42OTktNC4xMzJzLjI1NC0yLjkyNC42OTktNC4xOTZjLjUwOS0xLjI3MSAxLjE0NS0yLjM1MiAxLjk3MS0zLjI0MnMxLjg0NC0xLjU4OSAyLjk4OC0yLjA5OCAyLjM1Mi0uNzYzIDMuNjg3LS43NjNjMS41MjYgMCAyLjc5Ny4yNTUgMy44NzguODI3czEuOTcxIDEuMzM1IDIuNjcgMi40MTZWNy4xOTNoNC45NTl6bS0xMC40MjYgMjQuNTM4YzEuNjUzIDAgMi45MjQtLjU3MiAzLjk0MS0xLjY1M3MxLjUyNi0yLjU0MyAxLjUyNi00LjMyMy0uNTA5LTMuMTc4LTEuNTI2LTQuMzIyYy0xLjAxNy0xLjA4MS0yLjI4OC0xLjY1My0zLjk0MS0xLjY1My0xLjU5IDAtMi45MjUuNTcyLTMuODc4IDEuNjUzLTEuMDE3IDEuMDgtMS41MjYgMi41NDMtMS41MjYgNC4zMjIgMCAxLjc4LjUwOSAzLjE4IDEuNTI2IDQuMjYgMS4wMTcgMS4xNDQgMi4yODggMS43MTYgMy44NzggMS43MTZNNTcuMjAyIDIwLjM1M0g0NC45MzN2NC4yNTloNi45OTNjLS4xOSAyLjE2MS0xLjAxNyAzLjgxNC0yLjQxNiA1LjE1LTEuMzk4IDEuMjctMy4xNzggMS45MDYtNS40NjcgMS45MDYtMS4yNzEgMC0yLjQ4LS4yNTQtMy40OTYtLjY5OWE3IDcgMCAwIDEtMi43MzQtMS45N2MtLjc2My0uODI3LTEuMzM1LTEuODQ0LTEuNzgtMy4wNTJzLS42MzYtMi40OC0uNjM2LTMuOTQyLjE5LTIuNzMzLjYzNi0zLjk0MWMuMzgxLTEuMjA4IDEuMDE3LTIuMTYyIDEuNzgtMy4wNTIuNzYzLS44MjYgMS42NTMtMS40NjIgMi43MzMtMS45N2E5LjEgOS4xIDAgMCAxIDMuNTYtLjdxNC4wMDUgMCA2LjEwMyAxLjkwN2wzLjMwNi0zLjMwNWMtMi40OC0xLjkwNy01LjY1OC0yLjkyNS05LjQwOS0yLjkyNS0yLjA5NyAwLTQuMDA0LjMxOC01LjcyMSAxLjAxOC0xLjcxNi42OTktMy4xNzkgMS41ODktNC4zODYgMi43OTdBMTIuMSAxMi4xIDAgMCAwIDMxLjIgMTYuMjJjLS42MzUgMS43MTctLjk1MyAzLjYyNC0uOTUzIDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1NyAxLjAxNyAyLjAzNSAwIDMuODc4LS4zMTggNS41MzEtMS4wMTcgMS42NTMtLjcgMy4wNTItMS41OSA0LjE5Ni0yLjc5N3ExLjcxNi0xLjgxMiAyLjY3LTQuMzg3Yy42MzYtMS43MTYuOTU0LTMuNjIzLjk1NC01LjY1OHYtLjgyNmMtLjE5MS0uMTI3LS4yNTUtLjQ0NS0uMjU1LS43TTk1Ljk4MiAyMC4zNTNoLTEyLjI3djQuMjU5aDYuOTkzYy0uMTkgMi4xNjEtMS4wMTcgMy44MTQtMi40MTYgNS4xNS0xLjM5OCAxLjI3LTMuMTc4IDEuOTA2LTUuNDY3IDEuOTA2LTEuMjcxIDAtMi40OC0uMjU0LTMuNDk2LS42OTlhNyA3IDAgMCAxLTIuNzM0LTEuOTdjLS43NjMtLjgyNy0xLjMzNS0xLjg0NC0xLjc4LTMuMDUycy0uNjM2LTIuNDgtLjYzNi0zLjk0Mi4xOS0yLjczMy42MzYtMy45NDFjLjM4MS0xLjIwOCAxLjAxNy0yLjE2MiAxLjc4LTMuMDUyLjc2My0uODI2IDEuNjUzLTEuNDYyIDIuNzM0LTEuOTdhOS4xIDkuMSAwIDAgMSAzLjU2LS43cTQuMDA1IDAgNi4xMDMgMS45MDdsMy4zMDUtMy4zMDVjLTIuNDc5LTEuOTA3LTUuNjU4LTIuOTI1LTkuNDA4LTIuOTI1LTIuMDk4IDAtNC4wMDUuMzE4LTUuNzIyIDEuMDE4LTEuNzE2LjY5OS0zLjE3OCAxLjU4OS00LjM4NiAyLjc5N2ExMi4xIDEyLjEgMCAwIDAtMi43OTcgNC4zODZjLS42MzYgMS43MTctLjk1NCAzLjYyNC0uOTU0IDUuNjU4cy4zMTggMy45NDIgMS4wMTcgNS42NThjLjcgMS43MTcgMS41OSAzLjE3OSAyLjc5NyA0LjM4N2ExMi4xIDEyLjEgMCAwIDAgNC4zODcgMi43OTdjMS43MTYuNyAzLjYyMyAxLjAxNyA1LjY1OCAxLjAxNyAyLjAzNCAwIDMuODc4LS4zMTggNS41My0xLjAxNyAxLjY1My0uNyAzLjA1Mi0xLjU5IDQuMTk2LTIuNzk3cTEuNzE4LTEuODEyIDIuNjctNC4zODdjLjYzNi0xLjcxNi45NTQtMy42MjMuOTU0LTUuNjU4di0uODI2Yy0uMTktLjEyNy0uMjU1LS40NDUtLjI1NS0uNyIvPjwvc3ZnPg==");background-repeat:no-repeat;background-size:170px 40px;content:"";display:block;height:40px;width:170px}}:where(.ag-ltr) .ag-watermark{right:25px}:where(.ag-rtl) .ag-watermark{left:25px}.ag-watermark-text{font-family:Impact,sans-serif;font-size:19px;font-weight:700;opacity:.5}:where(.ag-ltr) .ag-watermark-text{padding-left:.7rem}:where(.ag-rtl) .ag-watermark-text{padding-right:.7rem}')}wireBeans(e){this.licenseManager=e.licenseManager}postConstruct(){const e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.textContent=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCss("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}}},x=class extends s.XQb{constructor(){super(...arguments),this.beanName="licenseManager"}postConstruct(){this.validateLicense()}validateLicense(){this.licenseManager=new b((0,s.BxM)(this.beans)),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new b(null).getLicenseDetails(e)}getWatermarkSelector(){return S}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){b.setLicenseKey(e)}static setChartsLicenseManager(e){b.setChartsLicenseManager(e)}},F={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},R="\r\n";function P(e,t,i){if(!t&&""!==t&&0!==t)return"";let o=t;return"boolean"===typeof t&&i&&(o=i(t))," ".concat(e,'="').concat(o,'"')}function D(e,t){let i="";if(e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach(e=>{for(const o of Object.keys(e.map))i+=P(e.prefix+o,e.map[o],t)}),e.properties.rawMap))for(const n of Object.keys(e.properties.rawMap))i+=P(n,e.properties.rawMap[n],t);let o="<"+e.name+i;if(!e.children&&null==e.textNode)return o+"/>"+R;if(null!=e.textNode)return o+">"+e.textNode+"</"+e.name+">"+R;if(o+=">\r\n",e.children)for(const n of e.children)o+=D(n,t);return o+"</"+e.name+">"+R}var E=e=>Math.round(96*e/72),A=e=>Math.ceil(9525*e),M=(e,t)=>{if(!t)return;let i;if("number"===typeof t)i=t;else{i=t({rowIndex:e})}return i},T=(e,t)=>{const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["version"];e.version||(e.version="1.0"),e.encoding&&t.push("encoding"),e.standalone&&t.push("standalone");const i=t.map(t=>"".concat(t,'="').concat(e[t],'"')).join(" ");return"".concat("<?","xml ").concat(i," ").concat("?>")}({encoding:"UTF-8",standalone:"yes"}),o=D(e);return t?o:"".concat(i).concat(o)},k=e=>{const t=String.fromCharCode,i=Math.floor(e/26),o=e%26;return i&&26!==e?o?i<26?t(65+i-1)+t(65+o-1):k(i)+t(65+o-1):k(i-1)+"Z":t(65+e-1)},I=e=>e.replaceAll("\n","_x000a_"),L=e=>{if(null==e)return null;let t="";for(let i=0;i<e.length;i++){const o=e.charCodeAt(i);if(o>=0&&o<=31&&10!==o){const e=o.toString(16).toUpperCase().padStart(4,"0");t+="_x".concat(e,"_")}else t+=e[i]}return t},N=e=>{const t=[];for(const i of e.keys()){const e=i.toString(),o={name:"t",textNode:(0,s.YR0)(L(e))};e.trim().length!==e.length&&(o.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[o]})}return t},O={getTemplate(e){const{name:t,ContentType:i,Extension:o,PartName:n}=e;return{name:t,properties:{rawMap:{Extension:o,PartName:n,ContentType:i}}}}},G=e=>"jpg"===e?"jpeg":e,B={getTemplate(e){const t=new Array(e).fill(void 0).map((e,t)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet".concat(t+1,".xml")})),i=Et.size,o=At.size,n={};Mt.forEach(e=>{n[G(e.type)]=!0});const s=new Array(i).fill(void 0).map((e,t)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing".concat(t+1,".xml")})),r=[];kt.forEach(e=>{let{name:t}=e;r.push({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml",PartName:"/xl/tables/".concat(t,".xml")})});const a=Object.keys(n).map(e=>({name:"Default",ContentType:"image/".concat(e),Extension:e}));o&&a.push({name:"Default",Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"});return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:[...a,{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...t,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...s,...r,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map(e=>O.getTemplate(e))}}},V={getTemplate(e){const t=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:e},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t}]}}},H=(e,t)=>({name:"xdr:".concat(e),children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}),z=e=>{var t;const i=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(null===(t=e.recolor)||void 0===t?void 0:t.toLowerCase()){case"grayscale":case"sepia":case"washout":i.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:i}},W=(e,t)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:e.id,descr:null!=e.altText?e.altText:void 0}},children:[z(e)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),U=e=>{if(!e.saturation&&!e.tint)return;const t=[];return e.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:1e3*e.saturation}}}),e.tint&&t.push({name:"a:tint",properties:{rawMap:{val:1e3*e.tint}}}),t},j=(e,t)=>{let i;if(e.transparency){const t=Math.min(Math.max(e.transparency,0),100);i=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*t)}}}]}if(e.recolor)switch(i||(i=[]),e.recolor.toLocaleLowerCase()){case"grayscale":i.push({name:"a:grayscl"});break;case"sepia":i.push((n={color:"D9C3A5",tint:50,saturation:180},{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:(o={color:"black"}).color}},children:U(o)},{name:"a:srgbClr",properties:{rawMap:{val:n.color}},children:U(n)}]}));break;case"washout":i.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}var o,n;return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId".concat(t),"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:i},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},_=(e,t)=>{const i={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};if(e.rotation){const t=e.rotation;i.properties={rawMap:{rot:6e4*Math.min(Math.max(t,0),360)}}}return{name:"xdr:spPr",children:[i,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},K=(e,t,i,o)=>({name:"xdr:pic",children:[W(e,t+1),j(e,i+1),_(e,o)]}),Y={getTemplate(e){const{sheetIndex:t}=e,i=Et.get(t),o=Tt.get(t);return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:i.map((e,t)=>{const i=(e=>{e.fitCell=!!e.fitCell||!e.width||!e.height;const{position:t={},fitCell:i,width:o=0,height:n=0,totalHeight:s,totalWidth:r}=e,{offsetX:a=0,offsetY:l=0,row:d=1,rowSpan:c=1,column:u=1,colSpan:h=1}=t;return{from:{row:d-1,col:u-1,offsetX:A(a),offsetY:A(l)},to:{row:d-1+(i?1:c-1),col:u-1+(i?1:h-1),offsetX:A(o+a),offsetY:A(n+l)},height:A(s||n),width:A(r||o)}})(e);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[H("from",i.from),H("to",i.to),K(e,t,o.get(e.id).index,i),{name:"xdr:clientData"}]}})}}},q={getTemplate(e){const{Id:t,Type:i,Target:o}=e;return{name:"Relationship",properties:{rawMap:{Id:t,Type:i,Target:o}}}}},Q={getTemplate:e=>({name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:e.map(e=>q.getTemplate(e))})},X={getTemplate:e=>({name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:e.size,uniqueCount:e.size}},children:N(e)})},$={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot",Continuous:"Continuous"},Z=["Dashed","DashDot","DashDotDot"],J={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},ee={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},te={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},ie=e=>void 0==e?e:("#"===e.charAt(0)&&(e=e.substring(1)),6===e.length?"FF"+e:e),oe=(e,t)=>{if(!e)return"thin";const i=(e=>{switch(e){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}})(t);if("Continuous"===e)return i;const o=$[e];return"medium"===i&&Z.some(e=>e===o)?"medium".concat(o):"".concat(o.charAt(0).toLowerCase()).concat(o.substring(1))},ne=e=>ee[e]||"general",se=e=>te[e]||void 0,re=e=>({name:"color",properties:{rawMap:{rgb:ie(e||"#000000")}}}),ae={getTemplate(e){const{left:t,right:i,top:o,bottom:n,diagonal:s}=e,r=t?[re(t.color)]:void 0,a=i?[re(i.color)]:void 0,l=o?[re(o.color)]:void 0,d=n?[re(n.color)]:void 0,c=s?[re(s.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:null===t||void 0===t?void 0:t.style}},children:r},{name:"right",properties:{rawMap:{style:null===i||void 0===i?void 0:i.style}},children:a},{name:"top",properties:{rawMap:{style:null===o||void 0===o?void 0:o.style}},children:l},{name:"bottom",properties:{rawMap:{style:null===n||void 0===n?void 0:n.style}},children:d},{name:"diagonal",properties:{rawMap:{style:null===s||void 0===s?void 0:s.style}},children:c}]}}},le={getTemplate:e=>({name:"borders",properties:{rawMap:{count:e.length}},children:e.map(e=>ae.getTemplate(e))})},de=e=>{const t=["Context","LeftToRight","RightToLeft"].indexOf(e);return Math.max(t,0)},ce={getTemplate(e){const{horizontal:t,indent:i,readingOrder:o,rotate:n,shrinkToFit:s,vertical:r,wrapText:a}=e;return{name:"alignment",properties:{rawMap:{horizontal:t&&ne(t),indent:i,readingOrder:o&&de(o),textRotation:n,shrinkToFit:s,vertical:r&&se(r),wrapText:a}}}}},ue={getTemplate(e){const t=!1===e.protected?0:1;return{name:"protection",properties:{rawMap:{hidden:!0===e.hideFormula?1:0,locked:t}}}}},he={getTemplate(e){const{alignment:t,borderId:i,fillId:o,fontId:n,numFmtId:s,protection:r,quotePrefix:a,xfId:l}=e,d=[];return t&&d.push(ce.getTemplate(t)),r&&d.push(ue.getTemplate(r)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:r?1:void 0,applyBorder:i?1:void 0,applyFill:o?1:void 0,borderId:i,fillId:o,applyFont:n?1:void 0,fontId:n,applyNumberFormat:s?1:void 0,numFmtId:s,quotePrefix:a?1:void 0,xfId:l}},children:d.length?d:void 0}}},pe={getTemplate:e=>({name:"cellStyleXfs",properties:{rawMap:{count:e.length}},children:e.map(e=>he.getTemplate(e))})},ge={getTemplate(e){const{builtinId:t,name:i,xfId:o}=e;return{name:"cellStyle",properties:{rawMap:{builtinId:t,name:i,xfId:o}}}}},ve={getTemplate:e=>({name:"cellStyles",properties:{rawMap:{count:e.length}},children:e.map(e=>ge.getTemplate(e))})},me={getTemplate:e=>({name:"cellXfs",properties:{rawMap:{count:e.length}},children:e.map(e=>he.getTemplate(e))})},fe={getTemplate(e){const{patternType:t,fgTheme:i,fgTint:o,fgRgb:n,bgRgb:s,bgIndexed:r}=e,a={name:"patternFill",properties:{rawMap:{patternType:t}}};return(i||o||n)&&(a.children=[{name:"fgColor",properties:{rawMap:{theme:i,tint:o,rgb:n}}}]),(r||s)&&(a.children||(a.children=[]),a.children.push({name:"bgColor",properties:{rawMap:{indexed:r,rgb:s}}})),{name:"fill",children:[a]}}},Ce={getTemplate:e=>({name:"fills",properties:{rawMap:{count:e.length}},children:e.map(e=>fe.getTemplate(e))})},we={getTemplate(e){const{size:t,colorTheme:i,color:o="FF000000",fontName:n="Calibri",family:s,scheme:r,italic:a,bold:l,strikeThrough:d,outline:c,shadow:u,underline:h,verticalAlign:p}=e,g=[{name:"sz",properties:{rawMap:{val:t}}},{name:"color",properties:{rawMap:{theme:i,rgb:o}}},{name:"name",properties:{rawMap:{val:n}}}];return s&&g.push({name:"family",properties:{rawMap:{val:s}}}),r&&g.push({name:"scheme",properties:{rawMap:{val:r}}}),a&&g.push({name:"i"}),l&&g.push({name:"b"}),d&&g.push({name:"strike"}),c&&g.push({name:"outline"}),u&&g.push({name:"shadow"}),h&&g.push({name:"u",properties:{rawMap:{val:h}}}),p&&g.push({name:"vertAlign",properties:{rawMap:{val:p}}}),{name:"font",children:g}}},be={getTemplate:e=>({name:"fonts",properties:{rawMap:{count:e.length}},children:e.map(e=>we.getTemplate(e))})};var ye,Se,xe,Fe,Re,Pe,De,Ee,Ae,Me={getTemplate(e){let{formatCode:t,numFmtId:i}=e;return t.length&&(t=function(e){const t=e.split(/(\[[^\]]*\])/);for(let i=0;i<t.length;i++){let e=t[i];e.length&&(e.startsWith("[")||(e=e.replace(/\$/g,'"$"')),t[i]=(0,s.YR0)(e))}return t.join("")}(t)),{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:i}}}}},Te={getTemplate:e=>({name:"numFmts",properties:{rawMap:{count:e.length}},children:e.map(e=>Me.getTemplate(e))})},ke=(e,t)=>(e.includes("mixedStyle")&&t>1&&(e+="_".concat(t)),e),Ie=()=>{ye={base:0},Se=[],xe=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Fe=[{patternType:"none"},{patternType:"gray125"}],Re=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],Pe=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],De=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],Ee=[{builtinId:0,name:"Normal",xfId:0}]},Le=e=>{const t=(i=e.pattern)?J[i]||i:"none";var i;const o=ie(e.color),n=ie(e.patternColor);let s=Fe.findIndex(e=>{const{patternType:i,fgRgb:s,bgRgb:r}=e;return!(i!=t||s!=o||r!=n)});return-1===s&&(s=Fe.length,Fe.push({patternType:t,fgRgb:o,bgRgb:n})),s},Ne=e=>{const{fontName:t="Calibri",color:i,size:o,bold:n,italic:s,outline:r,shadow:a,strikeThrough:l,underline:d,family:c,verticalAlign:u}=e,h=ie(i),p=(e=>{if(void 0===e)return;const t=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(e||"Automatic");return Math.max(t,0)})(c),g=d?d.toLocaleLowerCase():void 0,v=u?u.toLocaleLowerCase():void 0;let m=xe.findIndex(e=>!(e.fontName!=t||e.color!=h||e.size!=o||e.bold!=n||e.italic!=s||e.outline!=r||e.shadow!=a||e.strikeThrough!=l||e.underline!=g||e.verticalAlign!=v||e.family!=p));return-1===m&&(m=xe.length,xe.push({fontName:t,color:h,size:o,bold:n,italic:s,outline:r,shadow:a,strikeThrough:l,underline:g,verticalAlign:v,family:null!=p?p.toString():void 0})),m},Oe=e=>{const{alignment:t,borders:i,font:o,interior:n,numberFormat:s,protection:r,quotePrefix:a}=e;let{id:l}=e,d=0,c=0,u=0,h=0;l&&(l=ke(l,Ae),void 0==ye[l]&&(n&&(d=Le(n)),i&&(c=(e=>{const{borderBottom:t,borderTop:i,borderLeft:o,borderRight:n}=e;let s,r,a,l,d,c,u,h;o&&(a=oe(o.lineStyle,o.weight),u=ie(o.color)),n&&(l=oe(n.lineStyle,n.weight),h=ie(n.color)),t&&(s=oe(t.lineStyle,t.weight),d=ie(t.color)),i&&(r=oe(i.lineStyle,i.weight),c=ie(i.color));let p=Re.findIndex(e=>{const{left:t,right:i,top:o,bottom:n}=e;if(!t&&(a||u))return!1;if(!i&&(l||h))return!1;if(!o&&(r||c))return!1;if(!n&&(s||d))return!1;const{style:p,color:g}=t||{},{style:v,color:m}=i||{},{style:f,color:C}=o||{},{style:w,color:b}=n||{};return p==a&&g==u&&v==l&&m==h&&f==r&&C==c&&w==s&&b==d});return-1===p&&(p=Re.length,Re.push({left:{style:a,color:u},right:{style:l,color:h},top:{style:r,color:c},bottom:{style:s,color:d},diagonal:{style:void 0,color:void 0}})),p})(i)),o&&(u=Ne(o)),s&&(h=(e=>{if(F[e])return F[e];let t=Se.findIndex(t=>t.formatCode===e);return-1===t?(t=Se.length+164,Se.push({formatCode:e,numFmtId:t})):t=Se[t].numFmtId,t})(s.format)),ye[l]=De.length,De.push({alignment:t,borderId:c||0,fillId:d||0,fontId:u||0,numFmtId:h||0,protection:r,quotePrefix:a,xfId:0})))},Ge=(e,t)=>ye[ke(e,t)]||0,Be={getTemplate(e){const t=Te.getTemplate(Se),i=be.getTemplate(xe.map(t=>(0,n.A)((0,n.A)({},t),{},{size:null!=t.size?t.size:e}))),o=Ce.getTemplate(Fe),s=le.getTemplate(Re),r=pe.getTemplate(Pe),a=me.getTemplate(De),l=ve.getTemplate(Ee);return Ie(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,i,o,s,r,a,l,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},Ve={getTemplate(e,t){const{name:i,columns:o,rowRange:n,displayName:r,showRowStripes:a,showColumnStripes:l,showFilterButtons:d,highlightFirstColumn:c,highlightLastColumn:u}=e||{},h=!n||n[0]-n[1]===0;if(!e||!i||!Array.isArray(o)||!o.length||h)return{name:"table"};const p=o.map((e,t)=>({name:"filterColumn",properties:{rawMap:{colId:t.toString(),hiddenButton:d[t]?0:1}}})),g="A".concat(n[0]),v="".concat(k(o.length)).concat(n[1]),m="".concat(g,":").concat(v),f="".concat(t+1),C=t?"".concat(r,"_").concat(f):r;return{name:"table",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3",name:C,displayName:C,ref:m,totalsRowShown:0,id:f}},children:[{name:"autoFilter",properties:{rawMap:{ref:m}},children:p},{name:"tableColumns",properties:{rawMap:{count:o.length}},children:o.map((e,t)=>({name:"tableColumn",properties:{rawMap:{id:(t+1).toString(),name:(0,s.YR0)(I(e)),dataCellStyle:"Normal"}}}))},{name:"tableStyleInfo",properties:{rawMap:{name:"TableStyleLight1",showFirstColumn:c?1:0,showLastColumn:u?1:0,showRowStripes:a?1:0,showColumnStripes:l?1:0}}}]}}},He=e=>{const[t,i,o,n]=e;return{name:"a:".concat(t),children:[{name:"a:".concat(i),properties:{rawMap:{val:o,lastClr:n}}}]}},ze={getTemplate:()=>({name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[He(["dk1","sysClr","windowText","000000"]),He(["lt1","sysClr","window","FFFFFF"]),He(["dk2","srgbClr","44546A"]),He(["lt2","srgbClr","E7E6E6"]),He(["accent1","srgbClr","4472C4"]),He(["accent2","srgbClr","ED7D31"]),He(["accent3","srgbClr","A5A5A5"]),He(["accent4","srgbClr","FFC000"]),He(["accent5","srgbClr","5B9BD5"]),He(["accent6","srgbClr","70AD47"]),He(["hlink","srgbClr","0563C1"]),He(["folHlink","srgbClr","954F72"])]})},We=e=>{const[t,i,o,n]=e;return{name:"a:".concat(t),properties:{rawMap:{script:o,typeface:i,panose:n}}}},Ue={getTemplate:()=>({name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[We(["latin","Calibri Light",void 0,"020F0302020204030204"]),We(["ea",""]),We(["cs",""]),We(["font","\u6e38\u30b4\u30b7\u30c3\u30af Light","Jpan"]),We(["font","\ub9d1\uc740 \uace0\ub515","Hang"]),We(["font","\u7b49\u7ebf Light","Hans"]),We(["font","\u65b0\u7d30\u660e\u9ad4","Hant"]),We(["font","Times New Roman","Arab"]),We(["font","Times New Roman","Hebr"]),We(["font","Tahoma","Thai"]),We(["font","Nyala","Ethi"]),We(["font","Vrinda","Beng"]),We(["font","Shruti","Gujr"]),We(["font","MoolBoran","Khmr"]),We(["font","Tunga","Knda"]),We(["font","Raavi","Guru"]),We(["font","Euphemia","Cans"]),We(["font","Plantagenet Cherokee","Cher"]),We(["font","Microsoft Yi Baiti","Yiii"]),We(["font","Microsoft Himalaya","Tibt"]),We(["font","MV Boli","Thaa"]),We(["font","Mangal","Deva"]),We(["font","Gautami","Telu"]),We(["font","Latha","Taml"]),We(["font","Estrangelo Edessa","Syrc"]),We(["font","Kalinga","Orya"]),We(["font","Kartika","Mlym"]),We(["font","DokChampa","Laoo"]),We(["font","Iskoola Pota","Sinh"]),We(["font","Mongolian Baiti","Mong"]),We(["font","Times New Roman","Viet"]),We(["font","Microsoft Uighur","Uigh"]),We(["font","Sylfaen","Geor"]),We(["font","Arial","Armn"]),We(["font","Leelawadee UI","Bugi"]),We(["font","Microsoft JhengHei","Bopo"]),We(["font","Javanese Text","Java"]),We(["font","Segoe UI","Lisu"]),We(["font","Myanmar Text","Mymr"]),We(["font","Ebrima","Nkoo"]),We(["font","Nirmala UI","Olck"]),We(["font","Ebrima","Osma"]),We(["font","Phagspa","Phag"]),We(["font","Estrangelo Edessa","Syrn"]),We(["font","Estrangelo Edessa","Syrj"]),We(["font","Estrangelo Edessa","Syre"]),We(["font","Nirmala UI","Sora"]),We(["font","Microsoft Tai Le","Tale"]),We(["font","Microsoft New Tai Lue","Talu"]),We(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[We(["latin","Calibri",void 0,"020F0502020204030204"]),We(["ea",""]),We(["cs",""]),We(["font","\u6e38\u30b4\u30b7\u30c3\u30af","Jpan"]),We(["font","\ub9d1\uc740 \uace0\ub515","Hang"]),We(["font","\u7b49\u7ebf","Hans"]),We(["font","\u65b0\u7d30\u660e\u9ad4","Hant"]),We(["font","Arial","Arab"]),We(["font","Arial","Hebr"]),We(["font","Tahoma","Thai"]),We(["font","Nyala","Ethi"]),We(["font","Vrinda","Beng"]),We(["font","Shruti","Gujr"]),We(["font","DaunPenh","Khmr"]),We(["font","Tunga","Knda"]),We(["font","Raavi","Guru"]),We(["font","Euphemia","Cans"]),We(["font","Plantagenet Cherokee","Cher"]),We(["font","Microsoft Yi Baiti","Yiii"]),We(["font","Microsoft Himalaya","Tibt"]),We(["font","MV Boli","Thaa"]),We(["font","Mangal","Deva"]),We(["font","Gautami","Telu"]),We(["font","Latha","Taml"]),We(["font","Estrangelo Edessa","Syrc"]),We(["font","Kalinga","Orya"]),We(["font","Kartika","Mlym"]),We(["font","DokChampa","Laoo"]),We(["font","Iskoola Pota","Sinh"]),We(["font","Mongolian Baiti","Mong"]),We(["font","Arial","Viet"]),We(["font","Microsoft Uighur","Uigh"]),We(["font","Sylfaen","Geor"]),We(["font","Arial","Armn"]),We(["font","Leelawadee UI","Bugi"]),We(["font","Microsoft JhengHei","Bopo"]),We(["font","Javanese Text","Java"]),We(["font","Segoe UI","Lisu"]),We(["font","Myanmar Text","Mymr"]),We(["font","Ebrima","Nkoo"]),We(["font","Nirmala UI","Olck"]),We(["font","Ebrima","Osma"]),We(["font","Phagspa","Phag"]),We(["font","Estrangelo Edessa","Syrn"]),We(["font","Estrangelo Edessa","Syrj"]),We(["font","Estrangelo Edessa","Syre"]),We(["font","Nirmala UI","Sora"]),We(["font","Microsoft Tai Le","Tale"]),We(["font","Microsoft New Tai Lue","Talu"]),We(["font","Ebrima","Tfng"])]}]})},je=(e,t,i)=>({name:"a:".concat(e),properties:{rawMap:{val:t}},children:i}),_e=e=>{const[t,i,o,n,s,r]=e,a=[];return a.push(je("satMod",o)),n&&a.push(je("lumMod",n)),s&&a.push(je("tint",s)),r&&a.push(je("shade",r)),{name:"a:gs",properties:{rawMap:{pos:t}},children:[{name:"a:schemeClr",properties:{rawMap:{val:i}},children:a}]}},Ke=(e,t)=>({name:"a:solidFill",children:[je("schemeClr",e,t)]}),Ye=e=>{const[t,i,o,n,s]=e,[r,a]=s;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:t}},children:[{name:"a:gsLst",children:[_e(i),_e(o),_e(n)]},{name:"a:lin",properties:{rawMap:{ang:r,scaled:a}}}]}},qe=e=>{const[t,i,o,n]=e;return{name:"a:ln",properties:{rawMap:{w:t,cap:i,cmpd:o,algn:n}},children:[Ke("phClr"),je("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},Qe=e=>{const t=[];if(e){const[i,o,n,s,r]=e;t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:i,dist:o,dir:n,algn:s,rotWithShape:r}},children:[je("srgbClr","000000",[je("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},Xe={getTemplate:()=>({name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[Ke("phClr"),Ye(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),Ye(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[qe(["6350","flat","sng","ctr"]),qe(["12700","flat","sng","ctr"]),qe(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[Qe(),Qe(),Qe(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[Ke("phClr"),Ke("phClr",[je("tint","95000"),je("satMod","170000")]),Ye(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]})},$e={getTemplate:()=>({name:"a:themeElements",children:[ze.getTemplate(),Ue.getTemplate(),Xe.getTemplate()]})},Ze={getTemplate:()=>({name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[$e.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]})},Je=e=>{const{aspectratio:t,rotation:i}=e||{},o={};return t&&(o.aspectratio="t"),i&&(o.rotation="t"),{name:"o:lock",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:o}}};var et=(e,t)=>{let i;const{recolor:o,brightness:n,contrast:s,id:r}=e;if(o&&(i={},"Washout"!==o&&"Grayscale"!==o||(i.gain="19661f",i.blacklevel="22938f"),"Black & White"!==o&&"Grayscale"!==o||(i.grayscale="t","Black & White"===o&&(i.bilevel="t"))),!o||"Grayscale"===o){if(i||(i={}),null!=s&&50!==s){let e="1";s>=0&&(s<50?e=String(s/50):s<100?e=String(50/(100-s)):100===s&&(e="2147483647f")),i.gain=e}null!=n&&50!==n&&(i.blacklevel=(a=n,l=0,d=100,c=-.5,u=.5,(a-l)/(d-l)*(u-c)+c).toString())}var a,l,d,c,u;return{name:"v:imagedata",properties:{prefixedAttributes:[{prefix:"o:",map:{relid:"rId".concat(t),title:r}}],rawMap:i}}},tt=e=>Math.floor(.74999943307122*(null!==e&&void 0!==e?e:0)),it={getTemplate(e){const t=At.get(e.sheetIndex)||[];var i;return{name:"xml",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{v:"urn:schemas-microsoft-com:vml",o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel"}}]},children:[{name:"o:shapelayout",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}]},children:[{name:"o:idmap",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:{data:"1"}}}]},{name:"v:shapetype",properties:{prefixedAttributes:[{prefix:"o:",map:{spt:"75",preferrelative:"t"}}],rawMap:{coordsize:"21600,21600",filled:"f",id:"_x0000_t75",path:"m@4@5l@4@11@9@11@9@5xe",stroked:"f"}},children:[{name:"v:stroke",properties:{rawMap:{joinstyle:"miter"}}},(i=["if lineDrawn pixelLineWidth 0","sum @0 1 0","sum 0 0 @1","prod @2 1 2","prod @3 21600 pixelWidth","prod @3 21600 pixelHeight","sum @0 0 1","prod @6 1 2","prod @7 21600 pixelWidth","sum @8 21600 0","prod @7 21600 pixelHeight","sum @10 21600 0"],{name:"v:formulas",children:i.map(e=>({name:"v:f",properties:{rawMap:{eqn:e}}}))}),{name:"v:path",properties:{prefixedAttributes:[{prefix:"o:",map:{connecttype:"rect",extrusionok:"f"}}],rawMap:{gradientshapeok:"t"}}},Je({aspectratio:!0})]},...t.map((e,t)=>((e,t)=>{const{width:i=0,height:o=0,altText:n}=e,s=tt(i),r=tt(o);return{name:"v:shape",properties:{rawMap:{id:e.headerFooterPosition,"o:spid":"_x0000_s1025",style:"position: absolute; margin-left: 0; margin-top: 10in; margin-bottom: 0; margin-right: 0; width: ".concat(s,"pt; height: ").concat(r,"pt; z-index: ").concat(t+1),type:"#_x0000_t75",alt:n}},children:[et(e,t+1),Je({rotation:!0})]}})(e,t))]}}},ot={getTemplate(e,t){const i=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:e,sheetId:i,"r:id":"rId".concat(i)}}}}},nt={getTemplate:e=>({name:"sheets",children:e.map((e,t)=>ot.getTemplate(e,t))})},st={getTemplate:(e,t)=>({name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[{name:"bookViews",children:[{name:"workbookView",properties:{rawMap:{activeTab:t}}}]},nt.getTemplate(e)]})},rt={getTemplate(e){const{min:t,max:i,outlineLevel:o,s:n,width:s,hidden:r,bestFit:a}=e;let l=1,d="0";return s>1&&(l=(e=>Math.ceil((e-12)/7+1))(s),d="1"),{name:"col",properties:{rawMap:{min:t,max:i,outlineLevel:null!=o?o:void 0,width:l,style:n,hidden:r?"1":"0",bestFit:a?"1":"0",customWidth:d}}}}},at={getTemplate:e=>({name:"mergeCell",properties:{rawMap:{ref:e}}})},lt={getTemplate(e,t,i){const{ref:o,data:n,styleId:r}=e,{type:a,value:l}=n||{type:"empty",value:null};let d=a;"f"===a?d="str":a.charAt(0)===a.charAt(0).toUpperCase()&&(d=(e=>{const t=e.charAt(0).toLowerCase();return"s"===t?"inlineStr":t})(a));const c={name:"c",properties:{rawMap:{r:o,t:"empty"===d?void 0:d,s:r?Ge(r,i):void 0}}};if("empty"===d)return c;let u;return u="str"===d&&"f"===a?[{name:"f",textNode:(0,s.YR0)(L(l))}]:"inlineStr"===d?[{name:"is",children:[{name:"t",textNode:(0,s.YR0)(L(l))}]}]:[{name:"v",textNode:l}],Object.assign({},c,{children:u})}},dt=e=>{var t;return""!==(null===(t=e.data)||void 0===t?void 0:t.value)||void 0!==e.styleId},ct={getTemplate(e,t,i){const{collapsed:o,hidden:n,height:s,outlineLevel:r,cells:a=[]}=e;((e,t)=>{const i=[];let o=0;for(let n=0;n<e.length;n++){const t=e[n];t.mergeAcross&&(i.push({pos:n,excelPos:o}),o+=t.mergeAcross),o++}if(i.length)for(let n=i.length-1;n>=0;n--){const o=[],s=e[i[n].pos];for(let e=1;e<=s.mergeAcross;e++)o.push({ref:"".concat(k(i[n].excelPos+1+e)).concat(t+1),styleId:s.styleId,data:{type:"empty",value:null}});o.length&&e.splice(i[n].pos+1,0,...o)}})(a,t);return{name:"row",properties:{rawMap:{r:t+1,collapsed:o?"1":"0",hidden:n?"1":"0",ht:s,customHeight:null!=s?"1":"0",spans:"1:1",outlineLevel:r||void 0}},children:a.filter(dt).map((e,t)=>lt.getTemplate(e,t,i))}}},ut=e=>{if(null==e)return 1;const t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(e);return-1===t?1:t+1},ht=(e,t,i)=>e.reduce((e,o,n)=>{const r="Center"===(a=o.position)?"C":"Right"===a?"R":"L";var a;const l=(d="".concat(e,"&amp;").concat(r),(c=o.font)?(d+="&amp;&quot;",d+=c.fontName||"Calibri",c.bold!==c.italic?d+=c.bold?",Bold":",Italic":c.bold?d+=",Bold Italic":d+=",Regular",d+="&quot;",c.size&&(d+="&amp;".concat(c.size)),c.strikeThrough&&(d+="&amp;S"),c.underline&&(d+="&amp;".concat("Double"===c.underline?"E":"U")),c.color&&(d+="&amp;K".concat(c.color.replace("#","").toUpperCase())),d):d);var d,c;const u=["Left","Center","Right"];o.position||(o.position=u[n]);const{image:h}=o;if("&[Picture]"===o.value&&h){!function(e,t){const i=Pt.length-1,o=e;o.headerFooterPosition=t,Gt({imageToAdd:o,idx:i});let n=At.get(i);n||(n=[],At.set(i,n));n.find(t=>t.id===e.id)||n.push(e)}(h,"".concat(r).concat(t).concat(i))}return"".concat(l).concat((0,s.YR0)((e=>{const t={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F","&[Picture]":"&G"};for(const i of Object.keys(t))e=e.replace(i,t[i]);return e})(o.value)))},""),pt=e=>{const t=[];return["all","first","even"].forEach(i=>{const o=e[i],n="all"===i?"odd":i;if(o)for(const e of Object.keys(o)){const s=o[e],r="".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),a=e[0].toUpperCase();if(s){const e="all"===i?"":i.toUpperCase();t.push({name:"".concat(n).concat(r),properties:{rawMap:{"xml:space":"preserve"}},textNode:ht(s,a,e)})}}}),t},gt=e=>t=>(e.length&&t.children.push({name:"cols",children:e.map(e=>rt.getTemplate(e))}),t),vt=(e,t)=>i=>(e.length&&i.children.push({name:"sheetData",children:e.map((e,i)=>ct.getTemplate(e,i,t))}),i),mt=e=>t=>{const{top:i=.75,right:o=.7,bottom:n=.75,left:s=.7,header:r=.3,footer:a=.3}=e;return t.children.push({name:"pageMargins",properties:{rawMap:{bottom:n,footer:a,header:r,left:s,right:o,top:i}}}),t},ft=e=>t=>{var i;return e&&t.children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:(i=e.orientation,!i||"Portrait"!==i&&"Landscape"!==i?"portrait":i.toLocaleLowerCase()),paperSize:ut(e.pageSize)}}}),t},Ct=e=>t=>{if(!e)return t;const i=null!=e.first?1:0,o=null!=e.even?1:0;return t.children.push({name:"headerFooter",properties:{rawMap:{differentFirst:i,differentOddEven:o}},children:pt(e)}),t},wt=e=>t=>{const i=Et.get(e);return null!==i&&void 0!==i&&i.length&&t.children.push({name:"drawing",properties:{rawMap:{"r:id":"rId".concat(++t.rIdCounter)}}}),t},bt=e=>t=>(At.get(e)&&t.children.push({name:"legacyDrawingHF",properties:{rawMap:{"r:id":"rId".concat(++t.rIdCounter)}}}),t),yt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=e>0||t>0;return i?[{name:"pane",properties:{rawMap:{state:i?"frozen":void 0,topLeftCell:i?"".concat(k(e+1)).concat(t+1):void 0,xSplit:0===e?void 0:e,ySplit:0===t?void 0:t}}}]:void 0},St=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return o=>(o.children.push({name:"sheetViews",children:[{name:"sheetView",properties:{rawMap:{rightToLeft:!0===e?"1":"0",workbookViewId:"0"}},children:yt(t,i)}]}),o)},xt=e=>t=>{const i=e.reduce((e,t)=>t.outlineLevel&&t.outlineLevel>e?t.outlineLevel:e,0);return t.children.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:i||void 0}}}),t},Ft={getTemplate(e){const{worksheet:t,currentSheet:i,config:o}=e,{margins:n={},pageSetup:s,headerFooterConfig:r,suppressColumnOutline:a,rightToLeft:l,frozenRowCount:d,frozenColumnCount:c}=o,{table:u}=t,{rows:h,columns:p}=u,g=null!==p&&void 0!==p&&p.length?((e,t,i)=>{const o=[],n=[];e.forEach((e,i)=>{const s=e.cells;let r,a=0;s.forEach((e,s)=>{const l=s+a+1,d=k(l),c=i+1;if(e.mergeAcross){a+=e.mergeAcross;const t=k(s+a+1);o.push("".concat(d).concat(c,":").concat(t).concat(c))}t[l-1]||(t[l-1]={});const{collapsibleRanges:u}=e;u&&u.forEach(e=>{n.push([l+e[0],l+e[1]])}),r=t[l-1],r.min=l,r.max=l,e.ref="".concat(d).concat(c)})}),n.sort((e,t)=>e[0]!==t[0]?e[0]-t[0]:t[1]-e[1]);const s=new Map,r=new Map;return n.filter(e=>{const t=e.toString();return!s.get(t)&&(s.set(t,!0),!0)}).forEach(e=>{const o=t.find(t=>t.min==e[0]&&t.max==e[1]),n=r.get(e[0]);t.push({min:e[0],max:e[1],outlineLevel:i?void 0:n||1,width:(o||{width:100}).width}),r.set(e[0],(n||0)+1)}),o})(h,p,!!a):[],v=kt.get(i),{children:m}=[e=>(e.children.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),e),St(l,c,d),xt(h),gt(p),vt(h,i+1),(C=g,e=>(C.length&&e.children.push({name:"mergeCells",properties:{rawMap:{count:C.length}},children:C.map(e=>at.getTemplate(e))}),e)),mt(n),ft(s),Ct(r),wt(i),bt(i),(f=v,e=>(f&&e.children.push({name:"tableParts",properties:{rawMap:{count:"1"}},children:[{name:"tablePart",properties:{rawMap:{"r:id":"rId".concat(++e.rIdCounter)}}}]}),e))].reduce((e,t)=>t(e),{children:[],rIdCounter:0});var f,C;return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:m}}},Rt=new Map,Pt=[],Dt=new Map,Et=new Map,At=new Map,Mt=new Map,Tt=new Map,kt=new Map,It="AG-GRID-TABLE",Lt="SINGLE_SHEET";function Nt(e,t,i){!function(e){const t=(0,s.YR0)(e.name)||"";let i="";for(;-1!==Pt.indexOf("".concat(t).concat(i));)if(""===i)i="_1";else{const e=parseInt(i.slice(1),10);i="_".concat(e+1)}e.name="".concat(t).concat(i),Pt.push(e.name)}(t),((e,t)=>{1===(Ae=t)&&Ie(),e.forEach(Oe)})(e,Pt.length);const o=Object.assign({},i);return i.exportAsExcelTable&&i.colModel.isPivotActive()&&((0,s.ujB)(163,{featureName:"pivot mode"}),o.exportAsExcelTable=!1),function(e,t){const{exportAsExcelTable:i,prependContent:o,appendContent:n,colModel:r}=t;if(!i)return;const a="boolean"===typeof i?{}:i,{name:l,showColumnStripes:d,showRowStripes:c,showFilterButton:u,highlightFirstColumn:h,highlightLastColumn:p}=a,g=function(e){return e.replace(/^[^a-zA-Z_]+/,"_").replace(/\s/g,"_").replace(/[^a-zA-Z0-9_]/g,"_")}(l||It),v=Pt.length-1,{table:m}=e,{rows:f,columns:C}=m,w=(0,s.Sot)(r),b=o?o.length:0,y=n?n.length:0,S=f.length,x=C.length,F=[],R=[];for(let s=0;s<x;s++){var P;const e=C[s];F.push(e.displayName||""),R.push("match"===u||void 0===u?null!==(P=e.filterAllowed)&&void 0!==P&&P:u)}if(null===F||void 0===F||!F.length||!S||!g)return void(0,s.ujB)(165);!function(e,t){if(kt.has(e))return void(0,s.ujB)(164);kt.set(e,t)}(v,{name:"table".concat(kt.size+1),displayName:g,columns:F,showFilterButtons:R,rowRange:[w+b,w+(S-w)-y],showRowStripes:null===c||void 0===c||c,showColumnStripes:null!==d&&void 0!==d&&d,highlightFirstColumn:null!==h&&void 0!==h&&h,highlightLastColumn:null!==p&&void 0!==p&&p})}(t,o),function(e,t){return T(Ft.getTemplate({worksheet:e,currentSheet:Pt.length-1,config:t}))}(t,o)}function Ot(e,t,i,o,n){const s=Pt.length,{row:r,column:a}=e.position||{},l=e;o&&(null==t||null==i||r&&a||(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:t,column:o.indexOf(i)+1})),((e,t)=>{const{colSpan:i,column:o}=e.position;if(e.width)if(i){const n=t.slice(o-1,o+i-1);let s=0;for(let t=0;t<n.length;t++){const i=n[t].getActualWidth();if(e.width<s+i){e.position.colSpan=t+1,e.totalWidth=e.width,e.width=e.totalWidth-s;break}s+=i}}else e.totalWidth=e.width})(l,o),((e,t)=>{const{rowSpan:i,row:o}=e.position;if(e.height)if(i){let n=0,s=0;for(let r=o;r<o+i;r++){const i=E(M(r,t)||20);if(e.height<n+i){e.position.rowSpan=s+1,e.totalHeight=e.height,e.height=e.totalHeight-n;break}n+=i,s++}}else e.totalHeight=e.height})(l,n)),Gt({imageToAdd:l,idx:s});let d=Tt.get(s);d||(d=new Map,Tt.set(s,d));const c=Et.get(s);c?c.push(l):Et.set(s,[l]),d.get(e.id)||d.set(e.id,{index:d.size,type:e.imageType})}function Gt(e){const{imageToAdd:t,idx:i}=e,o=Dt.get(t.id);if(o){const e=o.find(e=>e.sheetId===i);e?e.image.push(t):o.push({sheetId:i,image:[t]})}else Dt.set(t.id,[{sheetId:i,image:[t]}]),Mt.set(t.id,{type:t.imageType,index:Mt.size})}function Bt(e){return Rt.has(e)?Rt.get(e):(Rt.set(e,Rt.size),Rt.size-1)}function Vt(){Rt.clear(),Dt.clear(),Et.clear(),At.clear(),Mt.clear(),Tt.clear(),kt.clear(),Pt=[],Lt="SINGLE_SHEET"}function Ht(e,t){return T(Ve.getTemplate(e,t))}function zt(){let{drawingIndex:e,vmlDrawingIndex:t,tableName:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===e&&void 0===t&&void 0===i)return"";const o=[];null!=e&&o.push({Id:"rId".concat(o.length+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing".concat(e+1,".xml")}),null!=t&&o.push({Id:"rId".concat(o.length+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Target:"../drawings/vmlDrawing".concat(t+1,".vml")}),null!=i&&o.push({Id:"rId".concat(o.length+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",Target:"../tables/".concat(i,".xml")});const n=Q.getTemplate(o);return T(n)}var Wt=class extends s.NF5{constructor(e){super(e),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.frozenRowCount=0,this.skipFrozenRows=!1,this.frozenColumnCount=0,this.skipFrozenColumns=!1,this.formulaSvc=e.formulaSvc,this.config=Object.assign({},e),this.stylesByIds={};for(const t of this.config.baseExcelStyles)this.stylesByIds[t.id]=t;this.excelStyles=[...this.config.baseExcelStyles,{id:"_quotePrefix",quotePrefix:1}]}addCustomContent(e){for(const t of e){const e=this.rows.length+1;let i;this.config.suppressRowOutline||null==t.outlineLevel||(i=t.outlineLevel);const o={height:M(e,t.height||this.config.rowHeight),cells:(t.cells||[]).map((t,i)=>{var o,n,s;const r=this.addImage(e,this.columnsToExport[i],null===(o=t.data)||void 0===o?void 0:o.value);let a=null;t.styleId&&(a="string"===typeof t.styleId?[t.styleId]:t.styleId);const l=this.getStyleId(a);if(r)return this.createCell(l,this.getDataTypeForValue(r.value),null==r.value?"":r.value);const d=null!==(n=null===(s=t.data)||void 0===s?void 0:s.value)&&void 0!==n?n:"",c=this.getDataTypeForValue(d);return t.mergeAcross?this.createMergedCell(l,c,d,t.mergeAcross):this.createCell(l,c,d)}),outlineLevel:i};null!=t.collapsed&&(o.collapsed=t.collapsed),null!=t.hidden&&(o.hidden=t.hidden),this.rows.push(o)}}onNewHeaderGroupingRow(){const e=[],{freezeRows:t,headerRowHeight:i}=this.config;return this.rows.push({cells:e,height:M(this.rows.length+1,i)}),t&&this.frozenRowCount++,{onColumn:(t,i,o,s,r)=>{const a=this.config.styleLinker({rowType:"HEADER_GROUPING",rowIndex:1,value:"grouping-".concat(i),columnGroup:t});e.push((0,n.A)((0,n.A)({},this.createMergedCell(this.getStyleId(a),this.getDataTypeForValue("string"),i,s)),{},{collapsibleRanges:r}))}}}onNewHeaderRow(){const{freezeRows:e,headerRowHeight:t}=this.config;return e&&this.frozenRowCount++,this.onNewRow(this.onNewHeaderColumn,t)}onNewBodyRow(e){const{freezeRows:t,rowHeight:i}=this.config;this.skipFrozenRows||("headersAndPinnedRows"===t&&"top"===(null===e||void 0===e?void 0:e.rowPinned)||"function"===typeof t&&t((0,s.AuN)(this.gos,{node:e}))?this.frozenRowCount++:this.skipFrozenRows=!0);const o=this.onNewRow(this.onNewBodyColumn,i);return e&&this.addRowOutlineIfNecessary(e),o}prepare(e){super.prepare(e),this.columnsToExport=[...e],this.cols=e.map((e,t)=>this.convertColumnToExcel(e,t))}parse(){const e=this.rows.reduce((e,t)=>Math.max(e,t.cells.length),0);for(;this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));const{config:t}=this;let i;if(null!=t.sheetName){const{sheetName:e}=t,o="function"===typeof e?e((0,s.AuN)(this.gos,{})):e;i=String(o).substring(0,31)}else i="ag-grid";const o={name:i,table:{columns:this.cols,rows:this.rows}};return this.createExcel(o)}addRowOutlineIfNecessary(e){const{gos:t,suppressRowOutline:i,rowGroupExpandState:o="expanded"}=this.config;if(t.get("groupHideOpenParents")||i||null==e.level)return;const n=e.footer?1:0,r=(0,s.GXs)(this.rows);if(null==e.uiLevel||e.level===e.uiLevel){const t=Math.min(e.level+n,7);r.outlineLevel=t}if("expanded"===o)return;const a="collapsed"===o;if(e.isExpandable()){const t=!a&&e.expanded;r.collapsed=!t}r.hidden=!!e.parent&&-1!==e.parent.level&&(a||this.isAnyParentCollapsed(e.parent))}isAnyParentCollapsed(e){for(;e&&-1!==e.level;){if(!e.expanded)return!0;e=e.parent}return!1}convertColumnToExcel(e,t){const i=this.config.columnWidth,o=e?this.extractHeaderValue(e):void 0,n=null!==o&&void 0!==o?o:"",s=!!e&&e.isFilterAllowed();if(i)return"number"===typeof i?{width:i,displayName:n,filterAllowed:s}:{width:i({column:e,index:t}),displayName:n,filterAllowed:s};if(e){const t=75;return{width:Math.max(e.getActualWidth(),t),displayName:n,filterAllowed:s}}return{displayName:n,filterAllowed:s}}onNewHeaderColumn(e,t){return i=>{const o=this.extractHeaderValue(i),n=this.config.styleLinker({rowType:"HEADER",rowIndex:e,value:o,column:i});t.push(this.createCell(this.getStyleId(n),this.getDataTypeForValue("string"),o))}}onNewBodyColumn(e,t){let i=0;const{freezeColumns:o,rightToLeft:n}=this.config;return(r,a,l)=>{if(i>0)return void(i-=1);if(!this.skipFrozenColumns){const e=r.getPinned();"pinned"===o&&e&&(!0===e||"left"===e)!==n||"function"===typeof o&&o((0,s.AuN)(this.gos,{column:r}))?this.frozenColumnCount++:this.skipFrozenColumns=!0}const{value:d,valueFormatted:c}=this.extractRowCellValue({column:r,node:l,currentColumnIndex:a,accumulatedRowIndex:e,type:"excel",useRawFormula:!0}),u=this.config.styleLinker({rowType:"BODY",rowIndex:e,value:d,column:r,node:l}),h=this.getStyleId(u),p=r.getColSpan(l),g=this.addImage(e,r,d);if(g)t.push(this.createCell(h,this.getDataTypeForValue(g.value),null==g.value?"":g.value));else if(p>1)i=p-1,t.push(this.createMergedCell(h,this.getDataTypeForValue(d),d,p-1));else{var v,m;const i=r.isAllowFormula()&&(null===(v=this.formulaSvc)||void 0===v?void 0:v.isFormula(d)),o=this.createCell(h,i?"f":this.getDataTypeForValue(d),i?null===(m=this.formulaSvc)||void 0===m?void 0:m.updateFormulaByOffset({value:d,rowDelta:e-(l.formulaRowIndex+1),useRefFormat:!1}):d,c);t.push(o)}}}onNewRow(e,t){const i=[];return this.rows.push({cells:i,height:M(this.rows.length+1,t)}),{onColumn:e.bind(this,this.rows.length,i)()}}createExcel(e){const{excelStyles:t,config:i}=this;return this.frozenColumnCount&&(i.frozenColumnCount=this.frozenColumnCount),this.frozenRowCount&&(i.frozenRowCount=this.frozenRowCount),Nt(t,e,i)}getDataTypeForValue(e){if(void 0===e)return"empty";let t="s";try{this.isNumerical(e)&&(t="n")}catch(i){}return t}getTypeFromStyle(e,t){if(this.isFormula(t))return"f";if(null!==e&&void 0!==e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:(0,s.ujB)(162,{id:e.id,dataType:e.dataType})}return null}addImage(e,t,i){if(!this.config.addImageToCell)return;const o=this.config.addImageToCell(e,t,i);return o?(Ot(o.image,e,t,this.columnsToExport,this.config.rowHeight),o):void 0}createCell(e,t,i,o){const n=this.getStyleById(e);null!==n&&void 0!==n&&n.dataType||"s"!==t||null==o||(i=o);const s=this.getTypeFromStyle(n,i)||t,{value:r,escaped:a}=this.getCellValue(s,i),l=[];return n&&l.push(e),a&&l.push("_quotePrefix"),{styleId:e=this.getStyleId(l)||void 0,data:{type:s,value:r}}}createMergedCell(e,t,i,o){const n=null==i?"":i;return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:"s"===t?Bt(n).toString():i},mergeAcross:o}}getCellValue(e,t){let i=!1;if(null==t||"s"===e&&""===t)return{value:"",escaped:!1};if("s"===e)t&&"'"===t[0]&&(i=!0,t=t.slice(1)),t=Bt(t).toString();else if("f"===e)t=this.addXlfnPrefix(t).slice(1);else if("n"===e){const e=Number(t);isNaN(e)?t="":""!==t&&(t=e.toString())}return{value:t,escaped:i}}addXlfnPrefix(e){if(!e)return e;return e.replace(/(^|[^A-Z0-9._])(CONCAT)(\s*\()/gi,(e,t,i,o)=>"".concat(t,"_xlfn.").concat(i).concat(o))}getStyleId(e){if(null===e||void 0===e||!e.length)return null;if(1===e.length)return e[0];const t=e.join("-");return this.mixedStyles[t]||this.addNewMixedStyle(e),this.mixedStyles[t].excelID}deepCloneObject(e){return JSON.parse(JSON.stringify(e))}addNewMixedStyle(e){this.mixedStyleCounter+=1;const t="mixedStyle".concat(this.mixedStyleCounter),i={};for(const n of e)for(const e of this.excelStyles)e.id===n&&(0,s.WY6)(i,this.deepCloneObject(e));i.id=t;const o=e.join("-");this.mixedStyles[o]={excelID:t,key:o,result:i},this.excelStyles.push(i),this.stylesByIds[t]=i}isFormula(e){if(null==e)return!1;const t=String(e);return this.config.autoConvertFormulas&&(0,s.PZy)(t)}isNumerical(e){return"bigint"===typeof e||isFinite(e)&&""!==e&&!isNaN(parseFloat(e))}getStyleById(e){return null==e?null:this.stylesByIds[e]||null}},Ut=async e=>{const t=new Blob([e]),{size:i,content:o}=await(async e=>{let t=0;const i=[],o=new WritableStream({write:e=>{i.push(e),t+=e.length}}),n=new ReadableStream({start:t=>{const i=new FileReader;i.onload=e=>{var i;null!==(i=e.target)&&void 0!==i&&i.result&&t.enqueue(e.target.result),t.close()},i.readAsArrayBuffer(e)}}),s=new window.CompressionStream("deflate-raw");return await n.pipeThrough(s).pipeTo(o),{size:t,content:new Blob(i)}})(t);return{size:i,content:new Uint8Array(await o.arrayBuffer())}};function jt(e,t){let i="";for(let o=0;o<t;o++)i+=String.fromCharCode(255&e),e>>>=8;return i}var _t=e=>{if(!e.length)return 0;let t=~0,i=0,o=0,n=0;for(let s=0;s<e.length;s++)i=e[s],o=255&(t^i),n=Yt[o],t=t>>>8^n;return-1^t},Kt=e=>e.length?_t("string"===typeof e?(new TextEncoder).encode(e):e):0,Yt=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function qt(e){const t=String.fromCharCode;function i(e,i){return t(e>>i&63|128)}function o(e){if(0==(4294967168&e))return t(e);let o="";return 0==(4294965248&e)?o=t(e>>6&31|192):0==(4294901760&e)?(!function(e){if(e>=55296&&e<=57343)throw Error((0,s.Mk1)(255,{point:e}))}(e),o=t(e>>12&15|224),o+=i(e,6)):0==(4292870144&e)&&(o=t(e>>18&7|240),o+=i(e,12),o+=i(e,6)),o+=t(63&e|128),o}const n=function(e){const t=[];if(!e)return[];const i=e.length;let o,n,s=0;for(;s<i;)o=e.charCodeAt(s++),o>=55296&&o<=56319&&s<i?(n=e.charCodeAt(s++),56320==(64512&n)?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),s--)):t.push(o);return t}(e),r=n.length;let a,l=-1,d="";for(;++l<r;)a=n[l],d+=o(a);return d}var Qt=(e,t,i,o,n,s)=>{const{content:r,path:a,created:l}=e,d=(e=>{let t=e.getHours();return t<<=6,t|=e.getMinutes(),t<<=5,t|=e.getSeconds()/2,t})(l),c=(e=>{let t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,t<<=5,t|=e.getDate(),t})(l),u=Kt(n),h=void 0!==s?s:o,p=qt(a),g=p!==a;let v="";if(g){const e=jt(1,1)+jt(Kt(p),4)+p;v="up"+jt(e.length,2)+e}const m="\x14\0"+(g?"\0\b":"\0\0")+jt(t?8:0,2)+jt(d,2)+jt(c,2)+jt(h?u:0,4)+jt(null!==s&&void 0!==s?s:o,4)+jt(o,4)+jt(p.length,2)+jt(v.length,2),f="PK\x03\x04"+m+p+v,C="PK\x01\x02\x14\0"+m+"\0\0\0\0\0\0"+(r?"\0\0\0\0":"\x10\0\0\0")+jt(i,4)+p+v;return{localFileHeader:Uint8Array.from(f,e=>e.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(C,e=>e.charCodeAt(0))}},Xt=e=>{let t;if("string"===typeof e){const i=atob(e.split(";base64,")[1]);t=Uint8Array.from(i,e=>e.charCodeAt(0))}else t=e;return{size:t.length,content:t}},$t=async(e,t)=>{const{content:i}=e,{size:o,content:s}=i?Xt(i):{size:0,content:Uint8Array.from([])};let r,a,l=!1;if("file"===e.type&&s&&o>0){const e=await Ut(s);r=e.content,a=e.size,l=!0}const d=Qt(e,l,t,o,s,a);return(0,n.A)((0,n.A)({},d),{},{content:r||s,isCompressed:l})},Zt=(e,t)=>{const{content:i}=e,{content:o}=i?Xt(i):{content:Uint8Array.from([])},s=Qt(e,!1,t,o.length,o,void 0);return(0,n.A)((0,n.A)({},s),{},{content:o,isCompressed:!1})},Jt=class{constructor(){this.folders=[],this.files=[]}addFolders(e){e.forEach(this.addFolder.bind(this))}addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}addFile(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.files.push({path:e,created:new Date,content:i?t:(new TextEncoder).encode(t),isBase64:i,type:"file"})}async getZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=await this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}getUncompressedZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}clearStream(){this.folders=[],this.files=[]}packageFiles(e){let t=0,i=0;for(const d of e){const{localFileHeader:e,centralDirectoryHeader:o,content:n}=d;t+=e.length+n.length,i+=o.length}const o=new Uint8Array(t),n=new Uint8Array(i);let s=0,r=0;for(const d of e){const{localFileHeader:e,centralDirectoryHeader:t,content:i}=d;o.set(e,s),s+=e.length,o.set(i,s),s+=i.length,n.set(t,r),r+=t.length}const a=((e,t,i)=>{const o="PK\x05\x06\0\0\0\0"+jt(e,2)+jt(e,2)+jt(t,4)+jt(i,4)+"\0\0";return Uint8Array.from(o,e=>e.charCodeAt(0))})(e.length,i,t),l=new Uint8Array(o.length+n.length+a.length);return l.set(o),l.set(n,o.length),l.set(a,o.length+n.length),l}async buildCompressedFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const o of e){const e=await $t(o,i),{localFileHeader:n,content:s}=e;t.push(e),i+=n.length+s.length}return this.packageFiles(t)}buildFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const o of e){const e=Zt(o,i),{localFileHeader:n,content:s}=e;t.push(e),i+=n.length+s.length}return this.packageFiles(t)}},ei=(e,t,i)=>{const o="xl/drawings",n="".concat(o,"/drawing").concat(i+1,".xml"),s="".concat(o,"/_rels/drawing").concat(i+1,".xml.rels");e.addFile(s,function(e){const t=Tt.get(e)||[],i=[];for(const[o,n]of t){const{index:e,type:t}=n;i.push({Id:"rId".concat(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image".concat(Mt.get(o).index+1,".").concat(G(t))})}return T(Q.getTemplate(i))}(t)),e.addFile(n,function(e){return T(Y.getTemplate({sheetIndex:e}))}(t))},ti=(e,t,i)=>{const o="xl/drawings",n="".concat(o,"/vmlDrawing").concat(i+1,".vml"),s="".concat(o,"/_rels/vmlDrawing").concat(i+1,".vml.rels");e.addFile(n,function(e){return T(it.getTemplate({sheetIndex:e}),!0)}(t)),e.addFile(s,function(e){const t=At.get(e)||[],i=[];for(let o=0;o<t.length;o++){const e=t[o],n=Mt.get(e.id);if(!n)continue;const{index:s,type:r}=n;i.push({Id:"rId".concat(o+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image".concat(s+1,".").concat(G(r))})}return T(Q.getTemplate(i))}(t))},ii=(e,t,i,o,n)=>{var s,r;e.addFile("xl/workbook.xml",(s=n,T(st.getTemplate(Pt,s)))),e.addFile("xl/styles.xml",(r=t,T(Be.getTemplate(r)))),e.addFile("xl/sharedStrings.xml",T(X.getTemplate(Rt))),e.addFile("xl/theme/theme1.xml",T(Ze.getTemplate())),e.addFile("xl/_rels/workbook.xml.rels",function(e){const t=new Array(e).fill(void 0).map((e,t)=>({Id:"rId".concat(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet".concat(t+1,".xml")})),i=Q.getTemplate([...t,{Id:"rId".concat(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId".concat(e+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId".concat(e+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return T(i)}(o)),e.addFile("docProps/core.xml",function(e){return T(V.getTemplate(e))}(i)),e.addFile("[Content_Types].xml",function(e){return T(B.getTemplate(e))}(o)),e.addFile("_rels/.rels",function(){const e=Q.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return T(e)}())},oi=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||0===t.length)return(0,s.ujB)(159),Vt(),!1;const{fontSize:o=11,author:n="AG Grid",activeTab:r=0}=i,a=t.length,l=Math.max(Math.min(r,a-1),0);return(e=>{if(e.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),!Dt.size)return;e.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let t=0;Dt.forEach(i=>{const o=i[0].image[0],{base64:n,imageType:s}=o;e.addFile("xl/media/image".concat(++t,".").concat(G(s)),n,!0)})})(e),(e=>{const t=kt,i=Array.from(t.keys());for(let o=0;o<i.length;o++){const n=i[o],s=t.get(n);s&&e.addFile("xl/tables/".concat(s.name,".xml"),Ht(s,o))}})(e),((e,t)=>{let i=0,o=0;for(let n=0;n<t.length;n++){const s=t[n];e.addFile("xl/worksheets/sheet".concat(n+1,".xml"),s,!1);const r=Dt.size>0&&Et.has(n),a=kt.size>0&&kt.get(n),l=Dt.size&&At.has(n);if(!r&&!a&&!l)continue;let d,c,u;r&&(ei(e,n,i),c=i,i++),l&&(ti(e,n,o),u=o,o++),a&&(d=a.name);const h="xl/worksheets/_rels/sheet".concat(n+1,".xml.rels");e.addFile(h,zt({tableName:d,drawingIndex:c,vmlDrawingIndex:u}))}})(e,t),ii(e,o,n,a,l),Vt(),!0},ni=e=>{const{data:t,fontSize:i,author:o,activeSheetIndex:n}=e,s=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",r=new Jt;return oi(r,t,{author:o,fontSize:i,activeTab:n})?r.getZipFile(s):Promise.resolve(void 0)},si=e=>{const{data:t,fontSize:i,author:o,activeSheetIndex:n}=e,s=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",r=new Jt;if(oi(r,t,{author:o,fontSize:i,activeTab:n}))return r.getUncompressedZipFile(s)},ri=class extends s.YzF{constructor(){super(...arguments),this.beanName="excelCreator"}getMergedParams(e){const t=this.gos.get("defaultExcelExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void(0,s.ujB)(160);const t=()=>{const t=this.getMergedParams(e),i={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};this.packageCompressedFile(i).then(e=>{if(e){const{fileName:i}=t,o="function"===typeof i?i((0,s.AuN)(this.gos,{})):i;(0,s.w$)(this.getFileName(o),e)}})},{overlays:i}=this.beans;i?i.showExportOverlay(t):t()}exportDataAsExcel(e){this.export(e)}getDataAsExcel(e){const t=this.getMergedParams(e),i={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};return this.packageFile(i)}setFactoryMode(e){!function(e){Lt=e}(e)}getFactoryMode(){return Lt}getSheetDataForExcel(e){const t=this.getMergedParams(e);return this.getData(t)}getMultipleSheetsAsExcel(e){return si(e)}exportMultipleSheetsAsExcel(e){(e=>{const{fileName:t="export.xlsx"}=e;ni(e).then(e=>{if(e){const i="function"===typeof t?t():t;(0,s.w$)(i,e)}})})(e)}getDefaultFileExtension(){return"xlsx"}createSerializingSession(e){var t;const{colModel:i,colNames:o,rowGroupColsSvc:s,valueSvc:r,formula:a,gos:l}=this.beans,d=(0,n.A)((0,n.A)({},e),{},{colModel:i,colNames:o,rowGroupColsSvc:s,valueSvc:r,formulaSvc:a,gos:l,suppressRowOutline:e.suppressRowOutline||e.skipRowGroups,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:l.get("excelStyles")||[],rightToLeft:null!==(t=e.rightToLeft)&&void 0!==t?t:l.get("enableRtl"),styleLinker:this.styleLinker.bind(this)});return new Wt(d)}styleLinker(e){const{rowType:t,rowIndex:i,value:o,column:n,columnGroup:r,node:a}=e,l="HEADER"===t,d="HEADER_GROUPING"===t,c=l?n:r;let u=[];const{gos:h,cellStyles:p}=this.beans;if(l||d)return u.push("header"),d&&u.push("headerGroup"),c&&(u=u.concat((0,s.W_e)(c.getDefinition(),h,n||null,r||null))),u;const g=h.get("excelStyles"),v=["cell"];if(null===g||void 0===g||!g.length)return v;const m=g.map(e=>e.id),f=n.getDefinition();return null===p||void 0===p||p.processAllCellClasses(f,(0,s.AuN)(h,{value:o,data:a.data,node:a,colDef:f,column:n,rowIndex:i}),e=>{m.indexOf(e)>-1&&v.push(e)}),v.sort((e,t)=>m.indexOf(e)<m.indexOf(t)?-1:1)}isExportSuppressed(){return this.gos.get("suppressExcelExport")}packageCompressedFile(e){return ni(e)}packageFile(e){return si(e)}};var ai=class extends s.jbm{constructor(e,t){super(function(e){return{tag:"div",cls:"ag-virtual-list-viewport ag-".concat(e,"-virtual-list-viewport"),role:"presentation",children:[{tag:"div",ref:"eContainer",cls:"ag-virtual-list-container ag-".concat(e,"-virtual-list-container")}]}}((null===t||void 0===t?void 0:t.cssIdentifier)||"default")),this.stopPropagationCallbacks=e,this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0,this.eContainer=s.dRA,this.awaitStableCallbacks=[],this.registerCSS(":where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:auto;position:relative;width:100%}.ag-virtual-list-container{overflow:hidden;position:relative}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}");const{cssIdentifier:i="default",ariaRole:o="listbox",listName:n,moveItemCallback:r}=t||{};this.cssIdentifier=i,this.ariaRole=o,this.listName=n,this.moveItemCallback=r}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)},this.stopPropagationCallbacks),this.refreshAriaProperties(),this.addManagedEventListeners({stylesChanged:this.onStylesChanged.bind(this)})}onStylesChanged(e){e.listItemHeightChanged&&(this.rowHeight=this.getItemHeight(),this.refresh())}refreshAriaProperties(){var e;const t=this.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),i=this.eContainer;(0,s.lXX)(i,(null===(e=this.model)||void 0===e?void 0:e.getRowCount())>0?this.ariaRole:"presentation"),(0,s.PIC)(i,t)}addResizeObserver(){const e=(0,s.QSI)(this.beans,this.getGui(),()=>(0,s.Arb)(this.beans,()=>this.drawVirtualRows()));this.addDestroyFunc(e)}focusInnerElement(e){return this.focusRow(e?this.model.getRowCount()-1:0),!0}onFocusIn(e){const t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=(0,s.AH5)(t)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){const{key:t,shiftKey:i}=e;switch(t){case s.DDm.UP:case s.DDm.DOWN:{const o=t===s.DDm.UP;e.preventDefault(),i?this.moveItem(o):this.navigate(o)}break;case s.DDm.PAGE_HOME:case s.DDm.PAGE_END:case s.DDm.PAGE_UP:case s.DDm.PAGE_DOWN:null!==this.navigateToPage(t)&&e.preventDefault()}}onTabKeyDown(e){var t;null===(t=this.stopPropagationCallbacks)||void 0===t||t.stopPropagation(e),this.forceFocusOutOfContainer(e.shiftKey)}getNextRow(e){if(null==this.lastFocusedRowIndex)return;const t=this.lastFocusedRowIndex+(e?-1:1);return t<0||t>=this.model.getRowCount()?void 0:t}moveItem(e){if(!this.moveItemCallback)return;const t=this.getComponentAt(this.lastFocusedRowIndex);t&&this.moveItemCallback(t,e)}navigate(e){const t=this.getNextRow(e);void 0!==t&&this.focusRow(t)}navigateToPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"focused",i=!1;"focused"===t&&(t=this.getLastFocusedRow(),i=!0);const o=this.model.getRowCount()-1;let n=-1;return e===s.DDm.PAGE_HOME?n=0:e===s.DDm.PAGE_END?n=o:e===s.DDm.PAGE_DOWN?n=Math.min(t+this.pageSize,o):e===s.DDm.PAGE_UP&&(n=Math.max(t-this.pageSize,0)),-1===n?null:(i?this.focusRow(n):this.ensureIndexVisible(n),n)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),(0,s.Arb)(this.beans,()=>{if(this.isScrolling=!1,!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()}))}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,i)=>e(t.rowComponent,i))}getItemHeight(){return this.isHeightFromTheme?this.beans.environment.getDefaultListItemHeight():this.rowHeight}ensureIndexVisible(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.model.getRowCount();if("number"!==typeof e||e<0||e>=i)return!1;const o=e*this.rowHeight,n=o+this.rowHeight,s=this.getGui(),r=s.scrollTop,a=s.offsetHeight,l=r+a,d=t?0:this.rowHeight,c=l<n-d;if(r>o+d)return s.scrollTop=o,!0;if(c){const e=n-a;return s.scrollTop=e,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(null==this.model||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height="".concat(t*this.rowHeight,"px"),this.refreshAriaProperties(),this.awaitStable(()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}awaitStable(e){if(this.awaitStableCallbacks.push(e),this.awaitStableCallbacks.length>1)return;const t=this.model.getRowCount();(0,s.XfX)(this,()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{if(!this.isAlive())return;const e=this.awaitStableCallbacks;this.awaitStableCallbacks=[];for(const t of e)t()})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&"function"===typeof this.model.areRowsEqual&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),i=t.scrollTop,o=i+t.offsetHeight;if(i===o)this.clearVirtualRows();else{const t=Math.floor(i/this.rowHeight),n=Math.floor(o/this.rowHeight);this.pageSize=Math.floor((o-i)/this.rowHeight),this.ensureRowsRendered(t,n,e)}}ensureRowsRendered(e,t,i){this.renderedRows.forEach((i,o)=>{(o<e||o>t)&&o!==this.lastFocusedRowIndex&&this.removeRow(o)}),i&&this.refreshRows();for(let o=e;o<=t;o++)this.renderedRows.has(o)||o<this.model.getRowCount()&&this.insertRow(o)}insertRow(e){const t=this.model.getRow(e),i="tree"===this.ariaRole?"treeitem":"option",o=(0,s.Agl)({tag:"div",cls:"ag-virtual-list-item ag-".concat(this.cssIdentifier,"-virtual-list-item"),role:i,attrs:{tabindex:"-1"}});(0,s.awo)(o,this.model.getRowCount()),(0,s.c7o)(o,e+1),o.style.height="".concat(this.rowHeight,"px"),o.style.top="".concat(this.rowHeight*e,"px");const n=this.componentCreator(t,o);n.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),o.appendChild(n.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",o):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",o):this.eContainer.appendChild(o),this.renderedRows.set(e,{rowComponent:n,eDiv:o,value:t})}removeRow(e){const t=this.renderedRows.get(e);t.eDiv.remove(),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((t,i)=>{if(i>=e)this.removeRow(i);else{var o,n;const e=this.model.getRow(i);null!==(o=(n=this.model).areRowsEqual)&&void 0!==o&&o.call(n,t.value,e)?this.componentUpdater(e,t.rowComponent):this.removeRow(i)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),this.awaitStableCallbacks.length=0,super.destroy())}},li="ag-list-item-hovered",di=class extends s.kRQ{constructor(e,t,i){super(),this.comp=e,this.virtualList=t,this.params=i,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.beans.environment.addGlobalCSS('.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}',"component-AgVirtualListDragFeature"),this.params.addListeners(this,this.listItemDragStart.bind(this),this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){var e;const t={isInterestedIn:e=>e===this.params.dragSourceType,getIconName:()=>this.moveBlocked?"pinned":"move",getContainer:()=>this.comp.getGui(),onDragging:e=>this.onDragging(e),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave(),onDragCancel:()=>this.onDragCancel()};null===(e=this.beans.dragAndDrop)||void 0===e||e.addDropTarget(t)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new s.MSA({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),i=this.virtualList.getComponentAt(t.rowIndex);if(!i)return;const o=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,(0,s.eUX)(o,li),(0,s.eUX)(o,"ag-item-highlight-".concat(t.position)))}getListDragItem(e){const t=this.virtualList.getGui(),i=Number.parseFloat(window.getComputedStyle(t).paddingTop),o=this.virtualList.getRowHeight(),n=this.virtualList.getScrollTop(),s=Math.max(0,(e.y-i+n)/o),r=this.params.getNumRows(this.comp)-1,a=0|Math.min(r,s);return{rowIndex:a,position:Math.round(s)>s||s>r?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearDragProperties())}onDragCancel(){this.clearDragProperties()}onDragLeave(){this.clearDragProperties()}clearDragProperties(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){const e=this.virtualList.getGui();for(const t of e.querySelectorAll(".".concat(li)))for(const e of[li,"ag-item-highlight-top","ag-item-highlight-bottom"])t.classList.remove(e);this.lastHoveredListItem=null}},ci={selector:"AG-INPUT-RANGE",component:class extends s.x56{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:e,max:t,step:i}=this.config;null!=e&&this.setMinValue(e),null!=t&&this.setMaxValue(t),this.setStep(i||1)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>{const t=e.target.value;this.setValue(t)}})}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,t){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());const i=super.setValue(e,t);return this.eInput.value=e,i}}},ui=class extends s.DKR{constructor(e){super(e,'<div class="ag-slider">\n            <label data-ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range data-ref="eSlider"></ag-input-range>\n                <ag-input-number-field data-ref="eText"></ag-input-number-field>\n            </div>\n        </div>',[ci,s.HUZ]),this.eLabel=s.dRA,this.eSlider=s.dRA,this.eText=s.dRA,this.labelAlignment="top"}postConstruct(){super.postConstruct(),this.eSlider.addCss("ag-slider-field");const{minValue:e,maxValue:t,textFieldWidth:i,step:o,value:n,onValueChange:s}=this.config;null!=e&&this.setMinValue(e),null!=t&&this.setMaxValue(t),null!=i&&this.setTextFieldWidth(i),null!=o&&this.setStep(o),null!=n&&this.setValue(n),null!=s&&this.onValueChange(s)}onValueChange(e){return this.addManagedListeners(this.eText,{fieldValueChanged:()=>{const t=parseFloat(this.eText.getValue());this.eSlider.setValue(t.toString(),!0),e(t||0)}}),this.addManagedListeners(this.eSlider,{fieldValueChanged:()=>{const t=this.eSlider.getValue();this.eText.setValue(t,!0),e(parseFloat(t))}}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,t){return this.getValue()===e||(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}},hi={selector:"AG-SLIDER",component:ui},pi={selector:"AG-COLOR-INPUT",component:class extends s.stt{constructor(){super({template:{tag:"div",cls:"ag-color-input",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:"input",ref:"eInput",cls:"ag-input-field-input"},{tag:"div",ref:"eColor",cls:"ag-color-input-color"}]}]}}),this.eColor=s.dRA}wireBeans(e){this.color=e.agChartsExports._Util.Color}setColor(e){const t=e.toRgbaString();this.setValue(this.color.fromString(t).toHexString().toUpperCase(),!0),this.eColor.style.backgroundColor=t}setValue(e,t){const i=this.color.validColorString(null!==e&&void 0!==e?e:"");return this.eInput.setCustomValidity(i?"":this.getLocaleTextFunc()("invalidColor","Color value is invalid")),super.setValue(e,t),i&&!t&&this.dispatchLocalEvent({type:"colorChanged"}),this}onColorChanged(e){this.addManagedListeners(this,{colorChanged:()=>e(this.color.fromString(this.value))})}}},gi=[],vi=class extends s.n3Z{constructor(e){super('<div class="ag-color-panel" tabindex="-1">\n            <div data-ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div data-ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div data-ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div data-ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div data-ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div data-ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div data-ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <ag-color-input data-ref="colorInput"></ag-color-input>\n                <div data-ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',[pi]),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.spectrumColor=s.dRA,this.spectrumVal=s.dRA,this.spectrumDragger=s.dRA,this.spectrumHue=s.dRA,this.spectrumHueSlider=s.dRA,this.spectrumAlpha=s.dRA,this.spectrumAlphaSlider=s.dRA,this.colorInput=s.dRA,this.recentColors=s.dRA,this.picker=e.picker}wireBeans(e){this._Color=e.agChartsExports._Util.Color}postConstruct(){this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",()=>this.spectrumColor.focus()),this.addGuiEventListener("keydown",e=>{e.key!==s.DDm.ENTER||e.defaultPrevented||this.destroy()}),this.addManagedListeners(this.spectrumColor,{keydown:e=>this.moveDragger(e)}),this.addManagedListeners(this.spectrumAlphaSlider,{keydown:e=>this.moveAlphaSlider(e)}),this.addManagedListeners(this.spectrumHueSlider,{keydown:e=>this.moveHueSlider(e)}),this.addManagedListeners(this.spectrumVal,{mousedown:this.onSpectrumDraggerDown.bind(this)}),this.addManagedListeners(this.spectrumHue,{mousedown:this.onSpectrumHueDown.bind(this)}),this.addManagedListeners(this.spectrumAlpha,{mousedown:this.onSpectrumAlphaDown.bind(this)}),this.addGuiEventListener("mousemove",e=>{this.onSpectrumDraggerMove(e),this.onSpectrumHueMove(e),this.onSpectrumAlphaMove(e)}),this.addManagedListeners(document,{mouseup:this.onMouseUp.bind(this)}),this.colorInput.onColorChanged(this.setColor.bind(this)),this.addManagedListeners(this.recentColors,{click:this.onRecentColorClick.bind(this),keydown:e=>{e.key!==s.DDm.ENTER&&e.key!==s.DDm.SPACE||(e.preventDefault(),this.onRecentColorClick(e))}})}initTabIndex(){const e=this.tabIndex=this.gos.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(e){e.preventDefault(),this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)}onSpectrumDraggerMove(e){this.isSpectrumDragging&&this.moveDragger(e)}onSpectrumHueDown(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)}onSpectrumHueMove(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)}onSpectrumAlphaDown(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)}onSpectrumAlphaMove(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(e){const t=this.spectrumValRect;if(!t)return;let i,o;if(e instanceof MouseEvent)i=e.clientX-t.left,o=e.clientY-t.top;else{const t=e.key===s.DDm.LEFT,n=e.key===s.DDm.RIGHT,r=e.key===s.DDm.UP,a=e.key===s.DDm.DOWN,l=r||a,d=t||n;if(!l&&!d)return;e.preventDefault();const{x:c,y:u}=this.getSpectrumValue();i=c+(d?t?-5:5:0),o=u+(l?r?-5:5:0)}i=Math.max(i,0),i=Math.min(i,t.width),o=Math.max(o,0),o=Math.min(o,t.height),this.setSpectrumValue(i/t.width,1-o/t.height)}moveHueSlider(e){const t=this.spectrumHueRect;if(!t)return;const i=this.moveSlider(this.spectrumHueSlider,e);null!=i&&(this.H=1-i/t.width,this.update())}moveAlphaSlider(e){const t=this.spectrumAlphaRect;if(!t)return;const i=this.moveSlider(this.spectrumAlphaSlider,e);null!=i&&(this.A=i/t.width,this.update())}moveSlider(e,t){var i;const o=e.getBoundingClientRect(),n=null===(i=e.parentElement)||void 0===i?void 0:i.getBoundingClientRect();if(!e||!n)return null;const r=o.width/2;let a;if(t instanceof MouseEvent)a=Math.floor(t.clientX-n.left);else{const i=t.key===s.DDm.LEFT,o=t.key===s.DDm.RIGHT;if(!i&&!o)return null;t.preventDefault();const n=i?-5:5;a=parseFloat(e.style.left)+r+n}return a=Math.max(a,0),a=Math.min(a,n.width),e.style.left=a-r+"px",a}update(e){const{A:t,S:i,B:o,H:n,_Color:s}=this,r=360*n,a=s.fromHSB(r,i,o,t),l=a.toRgbaString(),d=s.fromHSB(r,i,o).toRgbaString(),c=s.fromHSB(r,1,1).toRgbaString(),u=this.picker;s.fromString(u.getValue()).toRgbaString()!==l&&(this.colorChanged=!0),u.setValue(l),this.spectrumColor.style.backgroundColor=c,this.spectrumDragger.style.backgroundColor=d,this.spectrumHueSlider.style.backgroundColor=c,this.spectrumAlpha.style.setProperty("--ag-internal-spectrum-alpha-color-from",s.fromHSB(r,i,o,0).toRgbaString()),this.spectrumAlpha.style.setProperty("--ag-internal-spectrum-alpha-color-to",d),this.spectrumAlpha.style.setProperty("--ag-internal-spectrum-alpha-color",l),e||this.colorInput.setColor(a)}setSpectrumValue(e,t,i){const o=this.spectrumValRect||this.refreshSpectrumRect();if(null==o)return;const n=this.spectrumDragger,s=n.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),t=Math.max(0,t),t=Math.min(1,t),this.S=e,this.B=t,n.style.left=e*o.width-s.width/2+"px",n.style.top=(1-t)*o.height-s.height/2+"px",this.update(i)}getSpectrumValue(){const e=this.spectrumDragger,t=e.getBoundingClientRect();return{x:parseFloat(e.style.left)+t.width/2,y:parseFloat(e.style.top)+t.height/2}}initRecentColors(){const e=gi,t=e.map((e,t)=>'<div class="ag-recent-color" id='.concat(t,' style="background-color: ').concat(e,'; width: 15px; height: 15px;" recent-color="').concat(e,'" tabIndex="').concat(this.tabIndex,'"></div>'));this.recentColors.innerHTML=t.join(""),(0,s.nl0)(this.recentColors,!!e.length)}setValue(e){const t=this._Color.fromString(e);this.setColor(t,!0)}setColor(e,t){const[i,o,n]=e.toHSB();this.H=(isNaN(i)?0:i)/360,this.A=e.a;const s=this.spectrumHueRect||this.refreshHueRect(),r=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left="".concat((this.H-1)*-s.width-this.spectrumHueSlider.getBoundingClientRect().width/2,"px"),this.spectrumAlphaSlider.style.left="".concat(this.A*r.width-this.spectrumAlphaSlider.getBoundingClientRect().width/2,"px"),this.setSpectrumValue(o,n,!t)}onRecentColorClick(e){const t=e.target;if(!(0,s.Qmv)(t.id))return;const i=parseInt(t.id,10);this.setValue(gi[i]),this.destroy()}addRecentColor(){const e=this._Color.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString();let t=gi;this.colorChanged&&t[0]!==e&&(t=t.filter(t=>t!=e),t=[e].concat(t),t.length>8&&(t=t.slice(0,8)),gi=t)}destroy(){this.addRecentColor(),super.destroy()}};var mi=class extends s.n3Z{constructor(e){var t;super((null!==(t=e.cssIdentifier)&&void 0!==t||(t=t||"default"),{tag:"div",cls:"ag-panel ag-".concat(t,"-panel"),attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eTitleBar",cls:"ag-panel-title-bar ag-".concat(t,"-panel-title-bar ag-unselectable"),children:[{tag:"span",ref:"eTitle",cls:"ag-panel-title-bar-title ag-".concat(t,"-panel-title-bar-title")},{tag:"div",ref:"eTitleBarButtons",cls:"ag-panel-title-bar-buttons ag-".concat(t,"-panel-title-bar-buttons")}]},{tag:"div",ref:"eContentWrapper",cls:"ag-panel-content-wrapper ag-".concat(t,"-panel-content-wrapper")}]})),this.config=e,this.closable=!0,this.eContentWrapper=s.dRA,this.eTitleBar=s.dRA,this.eTitleBarButtons=s.dRA,this.eTitle=s.dRA,this.registerCSS(".ag-panel{background-color:var(--ag-panel-background-color);display:flex;flex-direction:column;overflow:hidden;position:relative}.ag-dialog{border:var(--ag-dialog-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dialog-shadow);position:absolute}.ag-panel-title-bar{align-items:center;background-color:var(--ag-panel-title-bar-background-color);border-bottom:var(--ag-panel-title-bar-border);color:var(--ag-panel-title-bar-text-color);cursor:default;display:flex;flex:none;font-weight:var(--ag-panel-title-bar-font-weight);height:var(--ag-panel-title-bar-height);padding:var(--ag-spacing) var(--ag-cell-horizontal-padding)}.ag-panel-title-bar-button{cursor:pointer;:where(.ag-icon){color:var(--ag-panel-title-bar-icon-color)}}:where(.ag-ltr) .ag-panel-title-bar-button{margin-left:calc(var(--ag-spacing)*2);margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-panel-title-bar-button{margin-left:var(--ag-spacing);margin-right:calc(var(--ag-spacing)*2)}.ag-panel-title-bar-title{flex:1 1 auto}.ag-panel-title-bar-buttons{display:flex}.ag-panel-content-wrapper{display:flex;flex:1 1 auto;overflow:hidden;position:relative}:where(.ag-dragging-fill-handle) .ag-dialog,:where(.ag-dragging-range-handle) .ag-dialog{opacity:.7;pointer-events:none}")}postConstruct(){const{component:e,closable:t,hideTitleBar:i,title:o,minWidth:n=250,width:r,minHeight:a=250,height:l,centered:d,popup:c,x:u,y:h,postProcessPopupParams:p}=this.config,g=this.beans,v=this.createManagedBean(new s.VUV(this.getGui(),{minWidth:n,width:r,minHeight:a,height:l,centered:d,x:u,y:h,popup:c,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}));this.positionableFeature=v;const m=this.getGui();if(e&&this.setBodyComponent(e),i?(0,s.nl0)(this.eTitleBar,!1):(o&&this.setTitle(o),this.setClosable(null!=t?t:this.closable)),this.addManagedElementListeners(this.eTitleBar,{mousedown:e=>{if(m.contains(e.relatedTarget)||m.contains((0,s.UlD)(g))||this.eTitleBarButtons.contains(e.target))return void e.preventDefault();const t=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");t&&t.focus()}}),c&&v.isPositioned())return;let f;if(this.renderComponent&&this.renderComponent(),p){const{type:e,eventSource:t,mouseEvent:i}=p;f=()=>{var o;return null===(o=g.popupSvc)||void 0===o?void 0:o.callPostProcessPopup(p,e,m,t,i)}}v.initialisePosition(f),this.eContentWrapper.style.height="0"}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.remove(),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const e=this.closeButtonComp=new s.n3Z({tag:"div",cls:"ag-button"});this.createBean(e);const t=e.getGui(),i=this.beans.iconSvc.createIconNoSpan("close",this.beans);i.classList.add("ag-panel-title-bar-button-icon"),t.appendChild(i),this.addTitleBarButton(e),e.addManagedElementListeners(t,{click:this.onBtClose.bind(this)})}else if(this.closeButtonComp){this.closeButtonComp.getGui().remove(),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const i=this.eTitleBarButtons,o=i.children,n=o.length;null==t&&(t=n),t=Math.max(0,Math.min(t,n)),e.addCss("ag-panel-title-bar-button");const s=e.getGui();0===t?i.insertAdjacentElement("afterbegin",s):t===n?i.insertAdjacentElement("beforeend",s):o[t-1].insertAdjacentElement("afterend",s),e.setParentComponent(this)}getBodyHeight(){return(0,s.NUe)(this.eContentWrapper)}getBodyWidth(){return(0,s.Wd2)(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&(0,s.K05)(e)&&this.close(),super.destroy()}},fi=class extends mi{constructor(e,t){super((0,n.A)((0,n.A)({},e),{},{popup:!0})),this.callbacks=t,this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){var e;const t=this.getGui(),{movable:i,resizable:o,maximizable:n,modal:r}=this.config;var a;(this.addCss("ag-dialog"),super.postConstruct(),this.tabGuardFeature=this.createManagedBean(new s.UVL(this,null===(e=this.callbacks)||void 0===e?void 0:e.stopPropagationCallbacks)),this.tabGuardFeature.initialiseTabGuard({isFocusableContainer:!0,onFocusIn:()=>{var e;null===(e=this.popupSvc)||void 0===e||e.bringPopupToFront(t)},onTabKeyDown:e=>{if(r)return;const i=e.shiftKey,o=(0,s.ey2)(this.beans,t,!1,i);var n;o&&!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(o)||null!==(n=this.callbacks)&&void 0!==n&&n.focusNextContainer(this.beans,i)&&e.preventDefault()}}),i&&this.setMovable(i),n&&this.setMaximizable(n),o&&this.setResizable(o),this.config.modal)||(null===(a=this.callbacks)||void 0===a||a.configureFocusableContainer(this.beans,this))}setAllowFocus(e){this.tabGuardFeature.getTabGuardCtrl().setAllowFocus(e)}renderComponent(){var e;const t=this.getGui(),{alwaysOnTop:i,modal:o,title:n,afterGuiAttached:s}=this.config,r=this.getLocaleTextFunc(),a=null===(e=this.popupSvc)||void 0===e?void 0:e.addPopup({modal:o,eChild:t,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:i,ariaLabel:n||r("ariaLabelDialog","Dialog"),afterGuiAttached:s});a&&(this.close=a.hideFunc)}onClosed(e){var t,i;this.destroy(),null===(t=(i=this.config).closedCallback)||void 0===t||t.call(i,e)}setMaximized(e){this.isMaximizable&&e!==this.isMaximized&&this.toggleMaximize()}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:e,y:t,width:i,height:o}=this.lastPosition;this.setWidth(i),this.setHeight(o),this.positionableFeature.offsetElement(e,t)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){(0,s.nl0)(this.maximizeIcon,!this.isMaximized),(0,s.nl0)(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){if(this.maximizeListeners.length){for(const e of this.maximizeListeners)e();this.maximizeListeners.length=0}this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;this.isMaximizable=e;const i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedElementListeners(i.getGui(),{click:this.toggleMaximize.bind(this)}),this.addTitleBarButton(i,0),this.maximizeListeners.push(...this.addManagedElementListeners(t,{dblclick:this.toggleMaximize.bind(this)})),[this.resizeListenerDestroy]=this.addManagedListeners(this.positionableFeature,{resize:()=>{this.isMaximized=!1,this.refreshMaximizeIcon()}})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new s.n3Z({tag:"div",cls:"ag-dialog-button"})),t=e.getGui(),i=this.beans.iconSvc;return this.maximizeIcon=i.createIconNoSpan("maximize"),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=i.createIconNoSpan("minimize"),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}},Ci=class extends s.HHt{constructor(e){super((0,n.A)({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"chartsColorPicker"},e))}postConstruct(){this.eDisplayFieldColor=(0,s.UCw)({tag:"span",cls:"ag-color-picker-color"}),this.eDisplayFieldText=(0,s.UCw)({tag:"span",cls:"ag-color-picker-value"}),this.eDisplayField.append(this.eDisplayFieldColor,this.eDisplayFieldText),super.postConstruct(),this.value&&this.setValue(this.value)}createPickerComponent(){var e;const t=this.eWrapper.getBoundingClientRect(),i=this.beans.popupSvc.getParentRect();return this.createBean(new fi({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:t.right-i.left-190,y:t.top-i.top-250-(null!==(e=this.config.pickerGap)&&void 0!==e?e:0),postProcessPopupParams:{type:"colorPicker",eventSource:this.eWrapper}},this.config.dialogCallbacks))}renderAndPositionPicker(){const e=this.pickerComponent,t=this.createBean(new vi({picker:this}));return e.addCss("ag-color-dialog"),t.addDestroyFunc(()=>{e.isAlive()&&this.destroyBean(e)}),e.setParentComponent(this),e.setBodyComponent(t),t.setValue(this.getValue()),t.getGui().focus(),e.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.beforeHidePicker(),this.isDestroyingPicker=!0,t.isAlive()&&this.destroyBean(t),this.isAlive()&&this.getFocusableElement().focus())}),()=>{var e;return null===(e=this.pickerComponent)||void 0===e?void 0:e.close()}}setValue(e){return this.value===e?this:(this.eDisplayFieldColor.style.backgroundColor=e,this.eDisplayFieldText.textContent=this.beans.agChartsExports._Util.Color.fromString(e).toHexString().toUpperCase(),super.setValue(e))}getValue(){return this.value}},wi=class extends s.jbm{constructor(e){super(),this.setTemplateFromElement(e.getGui(),void 0,void 0,!0)}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===s.DDm.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}},bi=class extends s.kRQ{constructor(e){super(),this.callbacks=e,this.ACTIVATION_DELAY=80,this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var t,i;const{menuItemDef:o,isAnotherSubMenuOpen:s,level:r,childComponent:a,contextParams:l}=e;return this.params=e.menuItemDef,this.level=r,this.isAnotherSubMenuOpen=s,this.childComponent=a,this.contextParams=l,this.cssClassPrefix=null!==(t=null===(i=this.params.menuItemParams)||void 0===i?void 0:i.cssClassPrefix)&&void 0!==t?t:"ag-menu-option",this.callbacks.getMenuItemComp(this.beans,this.params,(0,n.A)((0,n.A)({},o),{},{level:r,isAnotherSubMenuOpen:s,openSubMenu:e=>this.openSubMenu(e),closeSubMenu:()=>this.closeSubMenu(),closeMenu:e=>this.closeMenu(e),updateTooltip:(e,t)=>this.refreshTooltip(e,t),onItemActivated:()=>this.onItemActivated()})).then(e=>{var t;if(!e)return;this.menuItemComp=e;const i=null===(t=e.configureDefaults)||void 0===t?void 0:t.call(e);i&&this.configureDefaults(!0===i?void 0:i)})}addListeners(e,t){null!==t&&void 0!==t&&t.suppressClick||this.addManagedElementListeners(e,{click:e=>this.onItemSelected(e)}),null!==t&&void 0!==t&&t.suppressKeyboardSelect||this.addManagedElementListeners(e,{keydown:e=>{e.key!==s.DDm.ENTER&&e.key!==s.DDm.SPACE||(e.preventDefault(),this.onItemSelected(e))}}),null!==t&&void 0!==t&&t.suppressMouseDown||this.addManagedElementListeners(e,{mousedown:e=>{e.stopPropagation(),e.preventDefault()}}),null!==t&&void 0!==t&&t.suppressMouseOver||this.addManagedElementListeners(e,{mouseenter:()=>this.onMouseEnter(),mouseleave:()=>this.onMouseLeave()})}isDisabled(){return!!this.params.disabled}openSubMenu(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1?arguments[1]:void 0;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const n=(0,s.UCw)({tag:"div",cls:"ag-menu",role:"presentation"});let r;this.eSubMenuGui=n;let a=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const e=this.createBean(new wi(this.childComponent));e.setParentComponent(this);const t=e.getGui(),i="mouseenter",o=()=>this.cancelDeactivate();t.addEventListener(i,o),r=()=>{t.removeEventListener(i,o),this.destroyBean(e)},n.appendChild(t),this.childComponent.afterGuiAttached&&(a=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const e=this.createBean(new yi(this.level+1,this.contextParams,this.callbacks));e.setParentComponent(this),e.addMenuItems(this.params.subMenu),n.appendChild(e.getGui()),this.addManagedListeners(e,{closeMenu:e=>this.dispatchLocalEvent(e)}),e.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),r=()=>this.destroyBean(e),i&&(a=()=>{e.activateFirstItem(),this.subMenuIsOpening=!1})}const l=this.beans.popupSvc,d=this.getLocaleTextFunc(),c=null===l||void 0===l?void 0:l.addPopup({modal:!0,eChild:n,positionCallback:()=>{const e=this.eGui;null===l||void 0===l||l.positionPopupForMenu({eventSource:e,ePopup:n,event:o instanceof MouseEvent?o:void 0,additionalParams:this.callbacks.getPostProcessPopupParams(this.contextParams)})},anchorToElement:this.eGui,ariaLabel:d("ariaLabelSubMenu","SubMenu"),afterGuiAttached:a});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var e,t;c&&c.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),r(),null===(e=(t=this.menuItemComp).setExpanded)||void 0===e||e.call(t,!1),this.eSubMenuGui=void 0},null===(e=(t=this.menuItemComp).setExpanded)||void 0===e||e.call(t,!0)}setAriaExpanded(e){this.suppressAria||(0,s.oAJ)(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e,t){var i,o;this.cancelActivate(),this.params.disabled&&!t||(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add("".concat(this.cssClassPrefix,"-active")),null===(i=(o=this.menuItemComp).setActive)||void 0===i||i.call(o,!0),this.suppressFocus||this.callbacks.preserveRangesWhile(this.beans,()=>this.eGui.focus({preventScroll:!t})),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,t;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove("".concat(this.cssClassPrefix,"-active")),null===(e=(t=this.menuItemComp).setActive)||void 0===e||e.call(t,!1),this.isActive=!1,this.subMenuIsOpen&&this.closeSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var t,i;null===(t=(i=this.menuItemComp).select)||void 0===t||t.call(i),this.params.action?this.beans.frameworkOverrides.wrapOutgoing(()=>this.params.action(this.gos.addCommon((0,n.A)({},this.contextParams)))):this.openSubMenu(e&&"keydown"===e.type,e),this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect||this.closeMenu(e)}closeMenu(e){const t={type:"closeMenu"};e&&(e instanceof MouseEvent?t.mouseEvent=e:t.keyboardEvent=e),this.dispatchLocalEvent(t)}onItemActivated(){const e={type:"menuItemActivated",menuItem:this};this.dispatchLocalEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),this.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),this.ACTIVATION_DELAY):this.deactivate()}refreshRootElementGui(e){var t,i;let o=this.menuItemComp.getGui();const{cssClassPrefix:n,params:{cssClasses:s,disabled:r}}=this,a=null===(t=(i=this.menuItemComp).getRootElement)||void 0===t?void 0:t.call(i);if(a&&(e||o.classList.add("ag-menu-option-custom"),o=a),this.suppressRootStyles=!!e,!this.suppressRootStyles){o.classList.add(n);for(const e of null!==s&&void 0!==s?s:[])o.classList.add(e);r&&o.classList.add("".concat(n,"-disabled"))}return o}applyAriaProperties(e){const{params:{checked:t,subMenu:i,subMenuRole:o,disabled:n}}=this,r=null!=t;(0,s.lXX)(e,r?"menuitemcheckbox":"menuitem"),i&&(0,s.HD3)(e,null!==o&&void 0!==o?o:"menu"),n&&(0,s.TGw)(e,!0)}configureDefaults(e){if(!this.menuItemComp)return void setTimeout(()=>this.configureDefaults(e));const{suppressRootStyles:t,suppressTooltip:i,suppressAria:o,suppressTabIndex:n,suppressFocus:s}=e||{},{params:{tooltip:r,disabled:a}}=this,l=this.eGui=this.refreshRootElementGui(!!t);this.suppressAria=!!o,o||this.applyAriaProperties(l),n||l.setAttribute("tabindex","-1"),i||this.refreshTooltip(r),a||this.addListeners(l,e),this.suppressFocus=!!s}refreshTooltip(e,t){if(this.tooltip=e,this.tooltipFeature=this.destroyBean(this.tooltipFeature),!e||!this.menuItemComp)return;const i=this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t});i&&(this.tooltipFeature=this.createBean(i))}destroy(){var e,t;this.tooltipFeature=this.destroyBean(this.tooltipFeature),null===(e=this.menuItemComp)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),super.destroy()}},yi=class extends s.jbm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;super({tag:"div",cls:"ag-menu-list",role:"menu"}),this.level=e,this.menuActionParams=t,this.callbacks=i,this.menuItems=[]}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.callbacks.preserveRangesWhile(this.beans,()=>this.handleKeyDown(e)),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){var t;const i=this.getParentComponent();(null===i||void 0===i||null===(t=i.getGui())||void 0===t?void 0:t.classList.contains("ag-focus-managed"))||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case s.DDm.UP:case s.DDm.RIGHT:case s.DDm.DOWN:case s.DDm.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case s.DDm.ESCAPE:this.closeIfIsChild()&&this.callbacks.stopPropagationCallbacks.stopPropagation(e)}}handleFocusIn(e){var t;const i=e.relatedTarget;!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(i)&&(this.getGui().contains(i)||null!==(t=this.activeMenuItem)&&void 0!==t&&null!==(t=t.getSubMenuGui())&&void 0!==t&&t.contains(i))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var t;const i=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(i)||null!==(t=this.activeMenuItem.getSubMenuGui())&&void 0!==t&&t.contains(i)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){null!=e&&s.oY$.all(e.map(e=>{return"separator"===e?s.oY$.resolve({eGui:this.createSeparator()}):"string"===typeof e?(null===(t=(i=this.callbacks).warnNoItem)||void 0===t||t.call(i,e),s.oY$.resolve({eGui:null})):this.addItem(e);var t,i})).then(e=>{for(const t of null!==e&&void 0!==e?e:[])null!==t&&void 0!==t&&t.eGui&&(this.appendChild(t.eGui),t.comp&&this.menuItems.push(t.comp))})}addItem(e){const t=this.createManagedBean(new bi(this.callbacks));return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(e=>e.isSubMenuOpen()),level:this.level,contextParams:this.menuActionParams}).then(()=>(t.setParentComponent(this),this.addManagedListeners(t,{closeMenu:e=>{this.dispatchLocalEvent(e)},menuItemActivated:e=>{this.activeMenuItem&&this.activeMenuItem!==e.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=e.menuItem}}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){const e=this.menuItems.filter(e=>!e.isDisabled())[0];e&&e.activate()}createSeparator(){const e={tag:"div",cls:"ag-menu-separator-part"};return(0,s.Agl)({tag:"div",cls:"ag-menu-separator",attrs:{"aria-hidden":"true"},children:[e,e,e,e]})}handleNavKey(e){switch(e){case s.DDm.UP:case s.DDm.DOWN:{const t=this.findNextItem(e===s.DDm.UP);return void(t&&t!==this.activeMenuItem&&t.activate(!1,!0))}}e===(this.gos.get("enableRtl")?s.DDm.RIGHT:s.DDm.LEFT)?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return!!(t&&t instanceof bi)&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0)}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=[...this.menuItems];if(!t.length)return;if(!this.activeMenuItem)return e?(0,s.GXs)(t):t[0];let i;e&&t.reverse();let o=!1;for(const n of t){if(o){i=n;break}n===this.activeMenuItem&&(o=!0)}return o&&!i?t[0]:i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}},Si=class extends s.kRQ{constructor(e){super(),this.params=e,this.destroyLoadingSpinner=null,this.lastPromise=0}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenu(e,t,i){const{getMenuItems:o,shouldBlockMenuOpen:n}=this.params,r=o(e,t);if((0,s.NdC)(r)){const o=this.lastPromise+1;return this.lastPromise=o,this.destroyLoadingSpinner||this.createLoadingIcon(t),r.then(r=>{var a;if(this.lastPromise!==o)return;const{target:l}=t,d=!l;(null===r||void 0===r?void 0:r.length)&&(d||(0,s.K05)(l))&&!(null!==n&&void 0!==n&&n())&&this.createContextMenu({menuItems:r,menuActionParams:e,mouseEvent:t,anchorToElement:i}),null===(a=this.destroyLoadingSpinner)||void 0===a||a.call(this)}),!0}return!(null===r||void 0===r||!r.length)&&(this.createContextMenu({menuItems:r,menuActionParams:e,mouseEvent:t,anchorToElement:i}),!0)}createLoadingIcon(e){var t;const{beans:i}=this,o=this.getLocaleTextFunc(),n=i.iconSvc.createIconNoSpan("loadingMenuItems"),r=(0,s.Agl)({tag:"div",cls:"ag-context-menu-loading-icon"});r.appendChild(n);const a=(0,s.gKP)(i),l=(0,s.HBH)(i);if(!l)return;l.appendChild(r),null===(t=i.ariaAnnounce)||void 0===t||t.announceValue(o("ariaLabelLoadingContextMenu","Loading Context Menu"),"contextmenu"),i.environment.applyThemeClasses(r),(0,s.AOw)(r,e,i);const d=e=>{(0,s.AOw)(r,e,i)};a.addEventListener("mousemove",d),this.destroyLoadingSpinner=()=>{a.removeEventListener("mousemove",d),r.remove(),this.destroyLoadingSpinner=null}}createContextMenu(e){const{mapMenuItems:t,menuItemCallbacks:i,beforeMenuOpen:o,onMenuClose:s,afterMenuDestroyed:r,onVisibleChanged:a,onMenuOpen:l}=this.params,{menuItems:d,menuActionParams:c,mouseEvent:u,anchorToElement:h}=e,p=this.beans.popupSvc,g=new xi(t?e=>t(d,c,e):()=>d,c,i);this.createBean(g);const v=g.getGui();null===o||void 0===o||o(c);const m={additionalParams:i.getPostProcessPopupParams(c),type:"contextMenu",mouseEvent:u,ePopup:v,nudgeY:1},f=this.getLocaleTextFunc(),C=null===p||void 0===p?void 0:p.addPopup({modal:!0,eChild:v,closeOnEsc:!0,closedCallback:e=>{i.preserveRangesWhile(this.beans,()=>{null===s||void 0===s||s(),this.destroyBean(g),null===r||void 0===r||r(),null===a||void 0===a||a(!1,void 0===e?"api":"ui")})},click:u,positionCallback:()=>{const e=this.gos.get("enableRtl");null===p||void 0===p||p.positionPopupUnderMouseEvent((0,n.A)((0,n.A)({},m),{},{nudgeX:e?-1*(v.offsetWidth+1):1}))},anchorToElement:h,ariaLabel:f("ariaLabelContextMenu","Context Menu")});C&&(null===l||void 0===l||l(),g.afterGuiAttached({container:"contextMenu",hidePopup:C.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=g,g.addEventListener("destroyed",()=>{this.activeMenu===g&&(this.activeMenu=null)}),C&&g.addEventListener("closeMenu",e=>{var t,i;return C.hideFunc({mouseEvent:null!==(t=e.mouseEvent)&&void 0!==t?t:void 0,keyboardEvent:null!==(i=e.keyboardEvent)&&void 0!==i?i:void 0,forceHide:!0})});const w=u&&u instanceof MouseEvent&&"mousedown"===u.type;null===a||void 0===a||a(!0,w?"api":"ui")}destroy(){var e;null===(e=this.destroyLoadingSpinner)||void 0===e||e.call(this),super.destroy()}},xi=class extends s.n3Z{constructor(e,t,i){super({tag:"div",cls:"ag-menu",role:"presentation"}),this.getMenuItems=e,this.menuActionParams=t,this.callbacks=i,this.menuList=null}postConstruct(){const e=this.createManagedBean(new yi(0,this.menuActionParams,this.callbacks)),t=this.getMenuItems(()=>this.getGui());e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener("closeMenu",e=>this.dispatchLocalEvent(e))}afterGuiAttached(e){let{hidePopup:t}=e;t&&this.addDestroyFunc(t);const i=this.menuList;i&&this.callbacks.preserveRangesWhile(this.beans,()=>(0,s.YtT)(i.getGui()))}},Fi=class extends s.n3Z{constructor(e){super({tag:"div"}),this.callbacks=e}init(e){var t;this.params=e,this.cssClassPrefix=null!==(t=this.params.cssClassPrefix)&&void 0!==t?t:"ag-menu-option",this.addAriaAttributes(),this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addAriaAttributes(){const{checked:e,subMenu:t}=this.params,i=this.getGui();e&&(0,s.cPC)(i,e),t&&(0,s.oAJ)(i,!1)}addIcon(){if(this.params.isCompact)return;const e=(0,s.Agl)({tag:"span",ref:"eIcon",cls:"".concat(this.getClassName("part")," ").concat(this.getClassName("icon")),role:"presentation"}),{checked:t,icon:i}=this.params;if(t)e.appendChild(this.beans.iconSvc.createIconNoSpan("check"));else if(i)if((0,s.X17)(i))e.appendChild(i);else if("string"===typeof i)e.innerHTML=i;else{var o,n;null===(o=this.callbacks)||void 0===o||null===(n=o.warnNoIcon)||void 0===n||n.call(o)}this.getGui().appendChild(e)}addName(){const e=(0,s.Agl)({tag:"span",ref:"eName",cls:"".concat(this.getClassName("part")," ").concat(this.getClassName("text")),children:this.params.name||""});this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=(0,s.Agl)({tag:"span",ref:"eShortcut",cls:"".concat(this.getClassName("part")," ").concat(this.getClassName("shortcut")),children:this.params.shortcut||""});this.getGui().appendChild(e)}addSubMenu(){const e=(0,s.Agl)({tag:"span",ref:"ePopupPointer",cls:"".concat(this.getClassName("part")," ").concat(this.getClassName("popup-pointer"))}),t=this.getGui();if(this.params.subMenu){const t=this.gos.get("enableRtl")?"subMenuOpenRtl":"subMenuOpen";e.appendChild(this.beans.iconSvc.createIconNoSpan(t))}t.appendChild(e)}getClassName(e){return"".concat(this.cssClassPrefix,"-").concat(e)}};function Ri(e,t){if(!t)return null;const i=(0,s.YE1)(e),o=i.indexOf(t);if(-1===o)return null;let n=-1;for(let r=o-1;r>=0;r--)if(i[r].classList.contains(s.pA9.TAB_GUARD_TOP)){n=r;break}return n<=0?null:i[n-1]}function Pi(e,t){if(!t)return!1;const i=e.querySelectorAll(".".concat(s.J1Y));if(!i.length)return!1;for(let o=0;o<i.length;o++)if(i[o].contains(t))return!0;return!1}var Di=class extends s.jbm{constructor(e){var t;super((t=e.cssClass,{tag:"div",cls:"ag-tabs ".concat(t),children:[{tag:"div",ref:"eHeader"},{tag:"div",ref:"eBody",role:"presentation",cls:" ".concat(t,"-body")}]})),this.eHeader=s.dRA,this.eBody=s.dRA,this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){if(this.setupHeader(),this.params.items)for(const e of this.params.items)this.addItem(e);this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var e,t;return null===(e=this.activeItem)||void 0===e||null===(e=e.tabbedItem)||void 0===e||null===(t=e.afterDetachedCallback)||void 0===t?void 0:t.call(e)})}setupHeader(){const{enableCloseButton:e,cssClass:t}=this.params,i=(e,i)=>{e.classList.add("ag-tabs-".concat(i)),t&&e.classList.add("".concat(t,"-").concat(i))};e?(this.setupCloseButton(i),this.eTabHeader=(0,s.Agl)({tag:"div",role:"presentation"}),i(this.eHeader,"header-wrapper"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,(0,s.lXX)(this.eTabHeader,"tablist"),i(this.eTabHeader,"header")}setupCloseButton(e){const t=(0,s.Agl)({tag:"button"});e(t,"close-button");const i=this.beans.iconSvc.createIconNoSpan("close");(0,s.PIC)(t,this.params.closeButtonAriaLabel),t.appendChild(i),this.addManagedElementListeners(t,{click:()=>{var e,t;return null===(e=(t=this.params).onCloseClicked)||void 0===e?void 0:e.call(t)}});const o=(0,s.Agl)({tag:"div",role:"presentation"});e(o,"close-button-wrapper"),o.appendChild(t),this.eHeader.appendChild(o),this.eCloseButton=t}handleKeyDown(e){switch(e.key){case s.DDm.RIGHT:case s.DDm.LEFT:{if(!this.eTabHeader.contains((0,s.UlD)(this.beans)))return;const t=e.key===s.DDm.RIGHT,i=this.gos.get("enableRtl"),o=this.items.indexOf(this.activeItem),n=t!==i?Math.min(o+1,this.items.length-1):Math.max(o-1,0);if(o===n)return;e.preventDefault();const r=this.items[n];this.showItemWrapper(r),r.eHeaderButton.focus();break}case s.DDm.UP:case s.DDm.DOWN:e.stopPropagation()}}onTabKeyDown(e){if(e.defaultPrevented)return;const{beans:t,eHeader:i,eBody:o,activeItem:n,params:r}=this,{suppressTrapFocus:a,enableCloseButton:l}=r,d=(0,s.UlD)(t),c=e.target,u=e.shiftKey;if(i.contains(d)){var h,p;if(e.preventDefault(),!l||!u||null!==(h=this.eCloseButton)&&void 0!==h&&h.contains(d))if(a&&u){var g;null===(g=Ri((0,s.BxM)(t).body,c))||void 0===g||g.focus()}else this.focusBody(e.shiftKey);else null===(p=this.eCloseButton)||void 0===p||p.focus();return}let v=null;if(Pi(o,c)&&(u&&(v=Ri(o,c)),v||a||(v=n.eHeaderButton)),v||!o.contains(d)||(v=(0,s.ey2)(t,o,!1,u),v))v&&(e.preventDefault(),v.focus());else if(a&&!u)this.forceFocusOutOfContainer(u);else if(l&&!u){var m;e.preventDefault(),null===(m=this.eCloseButton)||void 0===m||m.focus()}else e.preventDefault(),this.focusHeader()}focusInnerElement(e){return e?this.focusBody(!0):(this.focusHeader(),!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){return(0,s.YtT)(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=(0,s.Agl)({tag:"span",cls:"ag-tab",role:"tab",attrs:{tabindex:"-1"}});t.appendChild(e.title),this.eTabHeader.appendChild(t),(0,s.PIC)(t,e.titleLabel);const i={tabbedItem:e,eHeaderButton:t};this.items.push(i),t.addEventListener("click",this.showItemWrapper.bind(this,i))}showItem(e){const t=this.items.find(t=>t.tabbedItem===e);t&&this.showItemWrapper(t)}showItemWrapper(e){var t,i;const{tabbedItem:o,eHeaderButton:n}=e;if(null===(t=(i=this.params).onItemClicked)||void 0===t||t.call(i,{item:o}),this.activeItem!==e){var r,a;if(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),(0,s.fDi)(this.eBody),o.bodyPromise.then(e=>{this.eBody.appendChild(e);const t=!(0,s.g3$)();if(this.params.suppressFocusBodyOnOpen||(0,s.YtT)(this.eBody,!1,t),o.afterAttachedCallback&&o.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){var i;const t=(null===(i=o.getScrollableContainer)||void 0===i?void 0:i.call(o))||e;[this.lastScrollListener]=this.addManagedElementListeners(t,{scroll:()=>{this.tabbedItemScrollMap.set(o.name,t.scrollTop)}});const n=this.tabbedItemScrollMap.get(o.name);void 0!==n&&setTimeout(()=>{t.scrollTop=n},0)}}),this.activeItem)this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(r=(a=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===r||r.call(a);n.classList.add("ag-tab-selected"),this.activeItem=e}else{var l,d;null===(l=(d=this.params).onActiveItemClicked)||void 0===l||l.call(d)}}};var Ei=class extends s.n3Z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(function(e){const t=e.cssIdentifier||"default",i=e.direction||"vertical";return{tag:"div",cls:"ag-group ag-".concat(t,"-group"),role:"presentation",children:[{tag:"div",ref:"eToolbar",cls:"ag-group-toolbar ag-".concat(t,"-group-toolbar"),children:[{tag:"ag-checkbox",ref:"cbGroupEnabled"}]},{tag:"div",ref:"eContainer",cls:"ag-group-container ag-group-container-".concat(i," ag-").concat(t,"-group-container")}]}}(e),[s.DXf]),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1,this.eToolbar=s.dRA,this.cbGroupEnabled=s.dRA,this.eContainer=s.dRA,this.registerCSS(".ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}");const{enabled:t,items:i,suppressEnabledCheckbox:o,expanded:n,suppressToggleExpandOnEnableChange:r,useToggle:a}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=null==t||t,this.items=i||[],this.useToggle=null!==a&&void 0!==a&&a,this.alignItems=e.alignItems||"center",this.expanded=null==n||n,null!=o&&(this.suppressEnabledCheckbox=o),null!=r&&(this.suppressToggleExpandOnEnableChange=r)}postConstruct(){if(this.setupTitleBar(),this.items.length){const e=this.items;this.items=[],this.addItems(e)}const e=this.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:t,onExpandedChange:i,suppressOpenCloseIcons:o}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(null!==o&&void 0!==o&&o),this.refreshChildDisplay(),(0,s.nl0)(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(e=>{this.setEnabled(e,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(e)}),null!=t&&this.onEnableChange(t),null!=i&&this.onExpandedChange(i)}refreshChildDisplay(){var e;(0,s.nl0)(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),null===(e=this.eTitleBar)||void 0===e||e.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCss("ag-group-item-alignment-".concat(this.alignItems)),this.alignItems=e;const t="ag-group-item-alignment-".concat(this.alignItems);return this.addCss(t),this}toggleGroupExpand(e,t){var i;if(null!==(i=this.eTitleBar)&&void 0!==i&&i.isSuppressCollapse()&&!this.useToggle)e=!0,t=!0;else if(e=null!=e?e:!this.expanded,this.expanded===e)return this;return this.expanded=e,this.refreshChildDisplay(),(0,s.nl0)(this.eContainer,e),t||this.dispatchLocalEvent({type:e?"expanded":"collapsed"}),this}addItems(e){for(const t of e)this.addItem(t)}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}updateItems(e){const t=this.items;let i=0;for(let o=0;o<t.length;++o){const n=t[o];if(n===e[i])i++;else{const e=(0,s.Zio)(n)?n.getGui():n;(0,s.MwW)(e)}}for(;i<e.length;)this.insertItem(e[i++]);this.items=e}insertItem(e,t){const i=this.eContainer,o=(0,s.Zio)(e)?e.getGui():e;o.classList.add("ag-group-item","ag-".concat(this.cssIdentifier,"-group-item")),t?(i.insertAdjacentElement("afterbegin",o),this.items.unshift(o)):(i.appendChild(o),this.items.push(o))}hideItem(e,t){const i=this.items[t];(0,s.nl0)(i,!e)}getItemIndex(e){const t=(0,s.Zio)(e)?e.getGui():e;return this.items.indexOf(t)}setTitle(e){var t;return null===(t=this.eTitleBar)||void 0===t||t.setTitle(e),this}addTitleBarWidget(e){var t;return null===(t=this.eTitleBar)||void 0===t||t.addWidget(e),this}addCssClassToTitleBar(e){var t;null===(t=this.eTitleBar)||void 0===t||t.addCss(e)}dispatchEnableChangeEvent(e){const t={type:"enableChange",enabled:e};this.dispatchLocalEvent(t)}setEnabled(e,t,i){var o;(this.enabled=e,this.refreshDisabledStyles(),i||this.toggleGroupExpand(e),t)||(this.cbGroupEnabled.setValue(e),null===(o=this.eToggle)||void 0===o||o.setValue(e));return this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListeners(this,{enableChange:t=>e(t.enabled)}),this}onExpandedChange(e){return this.addManagedListeners(this,{expanded:()=>e(!0),collapsed:()=>e(!1)}),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){var t;return null===(t=this.eTitleBar)||void 0===t||t.hideOpenCloseIcons(e),this}refreshDisabledStyles(){var e;const t=!this.enabled;this.eContainer.classList.toggle("ag-disabled",t),null===(e=this.eTitleBar)||void 0===e||e.refreshDisabledStyles(this.suppressEnabledCheckbox&&t),this.eContainer.classList.toggle("ag-disabled-group-container",t)}setupTitleBar(){const e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){const e=this.createManagedBean(new Mi(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListeners(e,{expandedChanged:e=>this.toggleGroupExpand(e.expanded)}),e}createToggleTitleBar(){var e;const t=this.createManagedBean(new s.bLJ({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:e=>{this.setEnabled(e,!0),this.dispatchEnableChangeEvent(e)}}));return t.addCss("ag-group-title-bar"),t.addCss("ag-".concat(null!==(e=this.params.cssIdentifier)&&void 0!==e?e:"default","-group-title-bar ag-unselectable")),this.eToggle=t,this.toggleGroupExpand(this.enabled),t}},Ai="ag-disabled-group-title-bar";var Mi=class extends s.n3Z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(function(e){var t;const i=null!==(t=e.cssIdentifier)&&void 0!==t?t:"default";return{tag:"div",cls:"ag-group-title-bar ag-".concat(i,"-group-title-bar ag-unselectable"),role:e.suppressKeyboardNavigation?"presentation":"group",children:[{tag:"span",ref:"eGroupOpenedIcon",cls:"ag-group-title-bar-icon ag-".concat(i,"-group-title-bar-icon"),role:"presentation"},{tag:"span",ref:"eGroupClosedIcon",cls:"ag-group-title-bar-icon ag-".concat(i,"-group-title-bar-icon"),role:"presentation"},{tag:"span",ref:"eTitle",cls:"ag-group-title ag-".concat(i,"-group-title")}]}}(e)),this.suppressOpenCloseIcons=!1,this.suppressKeyboardNavigation=!1,this.eGroupOpenedIcon=s.dRA,this.eGroupClosedIcon=s.dRA,this.eTitle=s.dRA;const{title:t,suppressOpenCloseIcons:i,suppressKeyboardNavigation:o}=e;t&&t.length>0&&(this.title=t),null!=i&&(this.suppressOpenCloseIcons=i),this.suppressKeyboardNavigation=null!==o&&void 0!==o&&o}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){const e=this.beans.iconSvc;this.eGroupClosedIcon.appendChild(e.createIconNoSpan("accordionClosed")),this.eGroupOpenedIcon.appendChild(e.createIconNoSpan("accordionOpen")),this.addManagedElementListeners(this.getGui(),{click:()=>this.dispatchExpandChanged(),keydown:e=>{switch(e.key){case s.DDm.ENTER:case s.DDm.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case s.DDm.RIGHT:case s.DDm.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===s.DDm.RIGHT)}}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||(0,s.oAJ)(this.getGui(),e)}refreshOpenCloseIcons(e){const t=!this.suppressOpenCloseIcons;(0,s.nl0)(this.eGroupOpenedIcon,t&&e),(0,s.nl0)(this.eGroupClosedIcon,t&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){const t={type:"expandedChanged",expanded:e};this.dispatchLocalEvent(t)}setTitle(e){const t=this.getGui(),i=!!e&&e.length>0;e=i?e:void 0,this.eTitle.textContent=null!==e&&void 0!==e?e:"",(0,s.nl0)(t,i),e!==this.title&&(this.title=e);const o=t.classList.contains(Ai);return this.refreshDisabledStyles(o),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){const t=this.getGui();e?(t.classList.add(Ai),t.removeAttribute("tabindex"),(0,s.lXX)(t,"presentation")):(t.classList.remove(Ai),"string"!==typeof this.title||this.suppressKeyboardNavigation?(t.removeAttribute("tabindex"),(0,s.lXX)(t,"presentation")):(this.activateTabIndex([t]),(0,s.lXX)(t,"group")))}},Ti={selector:"AG-GROUP-COMPONENT",component:Ei},ki="35.0.0",Ii={moduleName:"EnterpriseCore",version:ki,beans:[x],icons:{accordionOpen:"tree-open",accordionClosed:"tree-closed",accordionIndeterminate:"tree-indeterminate",close:"cross",cancel:"cancel",maximize:"maximize",minimize:"minimize",columnDrag:"grip"},dependsOn:[]};var Li={ariaAdvancedFilterBuilderItem:e=>"".concat(e[0],". Level ").concat(e[1],". Press ENTER to edit"),ariaAdvancedFilterBuilderItemValidation:e=>"".concat(e[0],". Level ").concat(e[1],". ").concat(e[2]," Press ENTER to edit"),ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"begins with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterReset:"Reset",advancedFilterCancel:"Cancel",advancedFilterClear:"Clear",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:e=>"Expression has an error. ".concat(e[0]," - ").concat(e[1],"."),advancedFilterValidationMessageAtEnd:e=>"Expression has an error. ".concat(e[0]," at end of expression."),advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderClear:"Clear",advancedFilterBuilderReset:"Reset",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function Ni(e,t,i){if(!e)return"";const o=i-t;return o?e.slice(0,e.length-o):e}function Oi(e,t,i,o,n,s,r){const a=i+(!e.length||r?0:1);let l=0;n&&(" "===e[a]?l=1:(o+=" ",s&&(o+='"')));return{updatedValue:e.slice(0,t)+o+e.slice(a),updatedPosition:t+o.length+l}}function Gi(e,t,i,o){let n=t,s=!1;for(;n<e.length;){const t=e[n];if("("===t){o&&" "===e[n-1]?s=!0:n-=1;break}if(" "===t||i&&")"===t){n-=1;break}n++}return{endPosition:n,isEmpty:s}}function Bi(e,t,i,o){i!==t&&(e.expression=Oi(e.expression,o-t.length+1,o,i).updatedValue)}var Vi=class{constructor(e,t){this.params=e,this.startPosition=t,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}parse(e,t){if(e!==Wi||this.colName)if(e===Ui&&this.hasStartChar){if(this.parseColumn(!1,t))return this.hasEndChar=!0,!1;this.colName+=e}else this.colName+=e;else this.hasStartChar=!0}getDisplayValue(){return(this.hasStartChar?Wi:"")+this.colName+(this.hasEndChar?Ui:"")}getColId(){return this.colId}complete(e){this.parseColumn(!0,e)}getValidationError(){var e;return this.valid?null:{message:this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:null!==(e=this.endPosition)&&void 0!==e?e:this.params.expression.length-1}}parseColumn(e,t){this.endPosition=t;const i=this.params.advFilterExpSvc.getColId(this.colName);var o,n;if(i&&this.hasStartChar&&(this.colId=i.colId,Bi(this.params,this.colName,i.columnName,t-1),this.colName=i.columnName,this.column=this.params.colModel.getColDefCol(this.colId),this.column))return this.baseCellDataType=null!==(o=null===(n=this.params.dataTypeSvc)||void 0===n?void 0:n.getBaseDataType(this.column))&&void 0!==o?o:"text",!0;return e&&(this.valid=!1),this.baseCellDataType="text",!1}},Hi=class{constructor(e,t,i){this.params=e,this.startPosition=t,this.baseCellDataType=i,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}parse(e,t){if(" "===e||")"===e){if(this.parseOperator(!1,t-1))return!0;this.operator+=e}else this.operator+=e}complete(e){this.parseOperator(!0,e)}getValidationError(){var e;return this.valid?null:{message:this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:null!==(e=this.endPosition)&&void 0!==e?e:this.params.expression.length-1}}getDisplayValue(){return this.operator}getOperatorKey(){return this.parsedOperator}parseOperator(e,t){const i=this.params.advFilterExpSvc.getDataTypeExpressionOperator(this.baseCellDataType),o=i.findOperator(this.operator);if(this.endPosition=t,o){this.parsedOperator=o;const e=i.operators[o];this.expectedNumOperands=e.numOperands;const n=e.displayValue;return Bi(this.params,this.operator,n,t),this.operator=n,!0}return!e&&null===o||(this.valid=!1),!1}},zi=class{constructor(e,t,i,o){var n=this;this.params=e,this.startPosition=t,this.baseCellDataType=i,this.column=o,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null,this.filterValidationSetters={number:()=>{(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=this.params.advFilterExpSvc.translate("advancedFilterValidationNotANumber"))},date:e=>{null==e&&(this.valid=!1,this.validationMessage=this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidDate"))},dateString:function(){return n.filterValidationSetters.date(...arguments)},dateTime:function(){return n.filterValidationSetters.date(...arguments)},dateTimeString:function(){return n.filterValidationSetters.date(...arguments)},boolean(){},object(){},text(){}}}parse(e,t){if(" "===e){if(!this.quotes)return this.parseOperand(!1,t),!0;this.operand+=e}else if(")"===e){if("number"===this.baseCellDataType||!this.quotes)return this.parseOperand(!1,t-1),!0;this.operand+=e}else if(this.operand||this.quotes||"'"!==e&&'"'!==e){if(this.quotes&&e===this.quotes)return this.parseOperand(!1,t),!1;this.operand+=e}else this.quotes=e}complete(e){this.parseOperand(!0,e)}getValidationError(){var e;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:null!==(e=this.endPosition)&&void 0!==e?e:this.params.expression.length-1}:null}getRawValue(){return this.operand}getModelValue(){return this.modelValue}parseOperand(e,t){const{advFilterExpSvc:i}=this.params;if(this.endPosition=t,this.modelValue=this.operand,e&&this.quotes)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingQuote");else if(""===this.modelValue)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingValue");else{const e=i.getOperandModelValue(this.operand,this.baseCellDataType,this.column);null!=e&&(this.modelValue=e),this.filterValidationSetters[this.baseCellDataType](e)}}},Wi="[",Ui="]",ji=class{constructor(e,t){var i=this;this.params=e,this.startPosition=t,this.isAwaiting=!0,this.operandValueGetters={number:Number,date:e=>this.params.valueSvc.parseValue(this.columnParser.column,null,e,void 0),dateString:function(){return i.operandValueGetters.date(...arguments)},dateTime:function(){return i.operandValueGetters.date(...arguments)},dateTimeString:function(){return i.operandValueGetters.date(...arguments)},boolean:e=>e,object:e=>e,text:e=>e}}parseExpression(){var e,t;let i=this.startPosition;const{expression:o}=this.params;for(;i<o.length;){const e=o[i];if(" "===e&&this.isAwaiting);else{if(this.isAwaiting=!1,!this.parser){let e;this.columnParser?this.operatorParser?(this.operandParser=new zi(this.params,i,this.columnParser.baseCellDataType,this.columnParser.column),e=this.operandParser):(this.operatorParser=new Hi(this.params,i,this.columnParser.baseCellDataType),e=this.operatorParser):(this.columnParser=new Vi(this.params,i),e=this.columnParser),this.parser=e}const t=this.parser.parse(e,i);if(null!=t){if(this.isComplete())return this.returnEndPosition(t?i-1:i,!0);this.parser=void 0,this.isAwaiting=!0}}i++}return null===(e=this.parser)||void 0===e||null===(t=e.complete)||void 0===t||t.call(e,i-1),this.returnEndPosition(i)}isValid(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)}getValidationError(){var e,t,i,o,n;const s=null!==(e=null!==(t=null===(i=this.columnParser)||void 0===i?void 0:i.getValidationError())&&void 0!==t?t:null===(o=this.operatorParser)||void 0===o?void 0:o.getValidationError())&&void 0!==e?e:null===(n=this.operandParser)||void 0===n?void 0:n.getValidationError();if(s)return s;const r=this.params.expression.length;let a;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(a="advancedFilterValidationMissingValue"):a="advancedFilterValidationMissingOption":a="advancedFilterValidationMissingColumn",a?{message:this.params.advFilterExpSvc.translate(a),startPosition:r,endPosition:r}:null}getFunction(e){return this.getFunctionCommon(e,(e,t,i,o)=>(n,s,r)=>r.operators[t].evaluator(n.getValue(i,s),s,r.evaluatorParams[o],null==e?void 0:r.operands[e]))}getAutocompleteListParams(e){return this.isColumnPosition(e)?this.getColumnAutocompleteListParams(e):this.isOperatorPosition(e)?this.getOperatorAutocompleteListParams(e):this.isBeyondEndPosition(e)?void 0:{enabled:!1}}updateExpression(e,t,i){const{expression:o}=this.params;var s;if(this.isColumnPosition(e))return Oi(this.params.expression,this.startPosition,null!==(s=this.columnParser)&&void 0!==s&&s.getColId()?this.columnParser.endPosition:Gi(o,e).endPosition,this.params.advFilterExpSvc.getColumnValue(t),!0);if(this.isOperatorPosition(e)){var r;const s=this.getBaseCellDataTypeFromOperatorAutocompleteType(i),c=this.hasOperand(s,t.key),u=c&&this.doesOperandNeedQuotes(s);let h;if(null!=(null===(r=this.operatorParser)||void 0===r?void 0:r.startPosition)&&e<this.operatorParser.startPosition){var a;h=Oi(o,e,e,null!==(a=t.displayValue)&&void 0!==a?a:t.key,c,u)}else{var l,d;let i,n=!1;if(null!==(l=this.operatorParser)&&void 0!==l&&l.getOperatorKey())i=this.operatorParser.endPosition;else{const{endPosition:t,isEmpty:s}=Gi(o,e,!0,!0);i=t,n=s}h=Oi(o,function(e,t,i){let o=t;for(;o<i&&" "===e[o];)o++;return o}(o,this.columnParser.endPosition+1,i),i,null!==(d=t.displayValue)&&void 0!==d?d:t.key,c,u,n)}return(0,n.A)((0,n.A)({},h),{},{hideAutocomplete:!c})}return null}getModel(){const e=this.columnParser.getColId(),t={filterType:this.columnParser.baseCellDataType,colId:e,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(t.filter=this.operandParser.getModelValue()),t}getFunctionCommon(e,t){var i,o;const n=this.columnParser.getColId(),s=null===(i=this.operatorParser)||void 0===i?void 0:i.getOperatorKey(),{operators:r,evaluatorParams:a,operands:l}=e,d=this.params.advFilterExpSvc.getExpressionOperator(this.columnParser.baseCellDataType,s),c=this.addToListAndGetIndex(r,d),u=this.params.advFilterExpSvc.getExpressionEvaluatorParams(n),h=this.addToListAndGetIndex(a,u);return t(0===(null===(o=this.operatorParser)||void 0===o?void 0:o.expectedNumOperands)?void 0:this.addToListAndGetIndex(l,this.getOperandValue()),c,n,h)}getOperandValue(){const{baseCellDataType:e,column:t}=this.columnParser,i=this.operandValueGetters[e](this.operandParser.getRawValue());var o,n;return("dateString"===e||"dateTimeString"===e)&&null!==(o=null===(n=this.params.dataTypeSvc)||void 0===n?void 0:n.getDateParserFunction(t)(i))&&void 0!==o?o:i}isComplete(){return!(!this.operatorParser||!(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))}isColumnPosition(e){var t;return null==(null===(t=this.columnParser)||void 0===t?void 0:t.endPosition)||e<=this.columnParser.endPosition+1}isOperatorPosition(e){var t;return null==(null===(t=this.operatorParser)||void 0===t?void 0:t.endPosition)||e<=this.operatorParser.endPosition+1}isBeyondEndPosition(e){return this.isComplete()&&null!=this.endPosition&&e>this.endPosition+1&&this.endPosition+1<this.params.expression.length}returnEndPosition(e,t){return this.endPosition=t?e:e-1,e}getColumnAutocompleteListParams(e){return this.params.advFilterExpSvc.generateAutocompleteListParams(this.params.advFilterExpSvc.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(e))}getColumnSearchString(e){var t,i,o,n,s;const r=null!==(t=null===(i=this.columnParser)||void 0===i?void 0:i.getDisplayValue())&&void 0!==t?t:"",a=Ni(r,e,null==(null===(o=this.columnParser)||void 0===o?void 0:o.endPosition)?this.params.expression.length:this.columnParser.endPosition+1),l=(null===(n=this.columnParser)||void 0===n?void 0:n.hasStartChar)&&a.length>0,d=(null===(s=this.columnParser)||void 0===s?void 0:s.hasEndChar)&&a.length===r.length+2;return l?a.slice(1,d?-1:void 0):a}getOperatorAutocompleteListParams(e){var t,i,o,n,s;const r=null===(t=this.columnParser)||void 0===t?void 0:t.column;if(!r)return{enabled:!1};const a=this.columnParser.baseCellDataType,l=null!=(null===(i=this.operatorParser)||void 0===i?void 0:i.startPosition)&&e<this.operatorParser.startPosition?"":Ni(null!==(o=null===(n=this.operatorParser)||void 0===n?void 0:n.getDisplayValue())&&void 0!==o?o:"",e,null==(null===(s=this.operatorParser)||void 0===s?void 0:s.endPosition)?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advFilterExpSvc.generateAutocompleteListParams(this.params.advFilterExpSvc.getOperatorAutocompleteEntries(r,a),"operator-".concat(a),l)}getBaseCellDataTypeFromOperatorAutocompleteType(e){return null===e||void 0===e?void 0:e.replace("operator-","")}hasOperand(e,t){var i,o;return!e||!t||(null!==(i=null===(o=this.params.advFilterExpSvc.getExpressionOperator(e,t))||void 0===o?void 0:o.numOperands)&&void 0!==i?i:0)>0}doesOperandNeedQuotes(e){return"number"!==e}addToListAndGetIndex(e,t){const i=e.length;return e.push(t),i}};function _i(e,t,i){let o=!1;const n=e.toLocaleLowerCase(),s=n+" ",r=Object.keys(t).find(e=>{const r=t[e],a=i(r).toLocaleLowerCase();return a.startsWith(s)&&(o=!0),a===n});return r||(o?null:void 0)}function Ki(e,t){return(null!==t&&void 0!==t?t:Object.keys(e)).map(t=>({key:t,displayValue:e[t].displayValue}))}var Yi=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return Ki(this.operators,e)}findOperator(e){return _i(e,this.operators,e=>{let{displayValue:t}=e;return t})}initOperators(){const{translate:e}=this.params;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:(e,t,i,o)=>this.evaluateExpression(e,t,i,o,!1,(e,t)=>e.includes(t)),numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:(e,t,i,o)=>this.evaluateExpression(e,t,i,o,!0,(e,t)=>!e.includes(t)),numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:(e,t,i,o)=>this.evaluateExpression(e,t,i,o,!1,(e,t)=>e===t),numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:(e,t,i,o)=>this.evaluateExpression(e,t,i,o,!0,(e,t)=>e!=t),numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:(e,t,i,o)=>this.evaluateExpression(e,t,i,o,!1,(e,t)=>e.startsWith(t)),numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:(e,t,i,o)=>this.evaluateExpression(e,t,i,o,!1,(e,t)=>e.endsWith(t)),numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:e=>null==e||"string"===typeof e&&0===e.trim().length,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:e=>null!=e&&("string"!==typeof e||e.trim().length>0),numOperands:0}}}evaluateExpression(e,t,i,o,n,s){return null==e?n:i.caseSensitive?s(i.valueConverter(e,t),o):s(i.valueConverter(e,t).toLocaleLowerCase(),o.toLocaleLowerCase())}},qi=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return Ki(this.operators,e)}findOperator(e){return _i(e,this.operators,e=>{let{displayValue:t}=e;return t})}initOperators(){const{translate:e,equals:t}=this.params;this.operators={equals:{displayValue:e("advancedFilterEquals"),evaluator:(e,i,o,n)=>this.evaluateSingleOperandExpression(e,i,o,n,!!o.includeBlanksInEquals,t),numOperands:1},notEqual:{displayValue:e("advancedFilterNotEqual"),evaluator:(e,i,o,n)=>this.evaluateSingleOperandExpression(e,i,o,n,!!o.includeBlanksInEquals,(e,i)=>!t(e,i)),numOperands:1},greaterThan:{displayValue:e("advancedFilterGreaterThan"),evaluator:(e,t,i,o)=>this.evaluateSingleOperandExpression(e,t,i,o,!!i.includeBlanksInGreaterThan,(e,t)=>e>t),numOperands:1},greaterThanOrEqual:{displayValue:e("advancedFilterGreaterThanOrEqual"),evaluator:(e,t,i,o)=>this.evaluateSingleOperandExpression(e,t,i,o,!!i.includeBlanksInGreaterThan,(e,t)=>e>=t),numOperands:1},lessThan:{displayValue:e("advancedFilterLessThan"),evaluator:(e,t,i,o)=>this.evaluateSingleOperandExpression(e,t,i,o,!!i.includeBlanksInLessThan,(e,t)=>e<t),numOperands:1},lessThanOrEqual:{displayValue:e("advancedFilterLessThanOrEqual"),evaluator:(e,t,i,o)=>this.evaluateSingleOperandExpression(e,t,i,o,!!i.includeBlanksInLessThan,(e,t)=>e<=t),numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:e=>null==e,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:e=>null!=e,numOperands:0}}}evaluateSingleOperandExpression(e,t,i,o,n,s){return null==e?n:s(i.valueConverter(e,t),o)}},Qi=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return Ki(this.operators,e)}findOperator(e){return _i(e,this.operators,e=>{let{displayValue:t}=e;return t})}initOperators(){const{translate:e}=this.params;this.operators={true:{displayValue:e("advancedFilterTrue"),evaluator:e=>!!e,numOperands:0},false:{displayValue:e("advancedFilterFalse"),evaluator:e=>!1===e,numOperands:0},blank:{displayValue:e("advancedFilterBlank"),evaluator:e=>null==e,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:e=>null!=e,numOperands:0}}}},Xi=class extends s.XQb{constructor(){var e;super(...arguments),e=this,this.beanName="advFilterExpSvc",this.filterOperandGetters={number:e=>{var t;return null!==(t=(0,s.qph)(e.filter))&&void 0!==t?t:""},date:e=>{const t=this.colModel.getColDefCol(e.colId);return t?this.valueSvc.formatValue(t,null,(0,s.xmb)(e.filter)):null},dateTime:e=>this.filterOperandGetters.date(e),dateString:e=>{var t,i,o;const n=this.colModel.getColDefCol(e.colId);if(!n)return null;const{filter:r}=e,a=null===(t=this.dataTypeSvc)||void 0===t?void 0:t.getDateFormatterFunction(n),l=null!==(i=null===a||void 0===a?void 0:a(null!==(o=(0,s.xmb)(r))&&void 0!==o?o:void 0))&&void 0!==i?i:r;return this.valueSvc.formatValue(n,null,l)},dateTimeString:e=>this.filterOperandGetters.dateString(e),boolean:()=>null,object:()=>null,text:()=>null},this.operandModelValueGetters={number:e=>(0,s.Qmv)(e)?Number(e):null,date:(e,t,i)=>{var o;return(0,s.tAb)(this.valueSvc.parseValue(t,null,e,void 0),!(null===(o=this.dataTypeSvc)||void 0===o||!o.getDateIncludesTimeFlag(i)))},dateTime:function(){return e.operandModelValueGetters.date(...arguments)},dateString:(e,t,i)=>{const o=this.valueSvc.parseValue(t,null,e,void 0);var n;return this.dataTypeSvc?(0,s.tAb)(null!==(n=this.dataTypeSvc.getDateParserFunction(t)(o))&&void 0!==n?n:null,this.dataTypeSvc.getDateIncludesTimeFlag(i)):o},dateTimeString:function(){return e.operandModelValueGetters.dateString(...arguments)},boolean:e=>e,object:e=>e,text:e=>e},this.columnNameToIdMap={},this.columnAutocompleteEntries=null,this.expressionEvaluatorParams={}}wireBeans(e){this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.colNames=e.colNames,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()}parseJoinOperator(e){var t;const{type:i}=e;return null!==(t=this.expressionJoinOperators[i])&&void 0!==t?t:i}getColumnDisplayValue(e){const{colId:t}=e,i=this.getColumnAutocompleteEntries().find(e=>{let{key:i}=e;return i===t});let o;return i?(o=i.displayValue,this.columnNameToIdMap[o.toLocaleUpperCase()]={colId:t,columnName:o}):o=t,o}getOperatorDisplayValue(e){var t,i;return null!==(t=null===(i=this.getExpressionOperator(e.filterType,e.type))||void 0===i?void 0:i.displayValue)&&void 0!==t?t:e.type}getOperandModelValue(e,t,i){return this.operandModelValueGetters[t](e,i,t)}getOperandDisplayValue(e,t){const{filter:i}=e;if(null==i)return"";let o=this.filterOperandGetters[e.filterType](e);var n;"number"!==e.filterType&&(null!==o&&void 0!==o||(o=null!==(n=(0,s.qph)(i))&&void 0!==n?n:""),t||(o='"'.concat(o,'"')));return t?o:" ".concat(o)}parseColumnFilterModel(e){var t,i;const o=null!==(t=this.getColumnDisplayValue(e))&&void 0!==t?t:"",n=null!==(i=this.getOperatorDisplayValue(e))&&void 0!==i?i:"",s=this.getOperandDisplayValue(e);return"[".concat(o,"] ").concat(n).concat(s)}updateAutocompleteCache(e,t){if("column"===t){const{key:t,displayValue:i}=e;this.columnNameToIdMap[e.displayValue.toLocaleUpperCase()]={colId:t,columnName:i}}}translate(e,t){let i=Li[e];return"function"===typeof i&&(i=i(t)),this.getLocaleTextFunc()(e,i,t)}generateAutocompleteListParams(e,t,i){return{enabled:!0,type:t,searchString:i,entries:e}}getColumnAutocompleteEntries(){var e;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;const t=null!==(e=this.colModel.getColDefCols())&&void 0!==e?e:[],i=[],o=this.gos.get("includeHiddenColumnsInAdvancedFilter");for(const n of t)n.getColDef().filter&&(o||n.isVisible()||n.isRowGroupActive())&&i.push({key:n.getColId(),displayValue:this.colNames.getDisplayNameForColumn(n,"advancedFilter")});return i.sort((e,t)=>{var i,o;const n=null!==(i=e.displayValue)&&void 0!==i?i:"",s=null!==(o=t.displayValue)&&void 0!==o?o:"";return n<s?-1:s>n?1:0}),i}getOperatorAutocompleteEntries(e,t){const i=this.getActiveOperators(e);return this.getDataTypeExpressionOperator(t).getEntries(i)}getJoinOperatorAutocompleteEntries(){return Object.entries(this.expressionJoinOperators).map(e=>{let[t,i]=e;return{key:t,displayValue:i}})}getDefaultAutocompleteListParams(e){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",e)}getDataTypeExpressionOperator(e){return this.expressionOperators[e]}getExpressionOperator(e,t){var i;return null===(i=this.getDataTypeExpressionOperator(e))||void 0===i||null===(i=i.operators)||void 0===i?void 0:i[t]}getExpressionJoinOperators(){return this.expressionJoinOperators}getColId(e){const t=e.toLocaleUpperCase(),i=this.columnNameToIdMap[t];if(i)return i;const o=this.getColumnAutocompleteEntries().find(e=>{let{displayValue:i}=e;return i.toLocaleUpperCase()===t});if(o){const{key:e,displayValue:i}=o,n={colId:e,columnName:i};return this.columnNameToIdMap[t]=n,n}return null}getExpressionEvaluatorParams(e){var t,i,o;let n=this.expressionEvaluatorParams[e];if(n)return n;const r=this.colModel.getColDefCol(e);if(!r)return{valueConverter:e=>e};switch(null===(t=this.dataTypeSvc)||void 0===t?void 0:t.getBaseDataType(r)){case"dateTimeString":case"dateString":n={valueConverter:null!==(i=null===(o=this.dataTypeSvc)||void 0===o?void 0:o.getDateParserFunction(r))&&void 0!==i?i:e=>e};break;case"object":n=r.getColDef().filterValueGetter?{valueConverter:e=>e}:{valueConverter:(e,t)=>{var i;return null!==(i=this.valueSvc.formatValue(r,t,e))&&void 0!==i?i:"function"===typeof e.toString?e.toString():""}};break;case"text":case void 0:n={valueConverter:e=>(0,s.qph)(e)};break;default:n={valueConverter:e=>e}}const{filterParams:a}=r.getColDef();return a&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach(e=>{const t=a[e];t&&(n[e]=t)}),this.expressionEvaluatorParams[e]=n,n}getColumnDetails(e){var t,i,o;const n=null!==(t=this.colModel.getColDefCol(e))&&void 0!==t?t:void 0;return{column:n,baseCellDataType:null!==(i=n?null===(o=this.dataTypeSvc)||void 0===o?void 0:o.getBaseDataType(n):void 0)&&void 0!==i?i:"text"}}generateExpressionOperators(){const e=(e,t)=>this.translate(e,t),t={translate:e,equals:(e,t)=>e.getTime()===t.getTime()};return{text:new Yi({translate:e}),boolean:new Qi({translate:e}),object:new Yi({translate:e}),number:new qi({translate:e,equals:(e,t)=>e===t}),date:new qi(t),dateString:new qi(t),dateTime:new qi(t),dateTimeString:new qi(t)}}getColumnValue(e){let{displayValue:t}=e;return"".concat(Wi).concat(t).concat(Ui)}generateExpressionJoinOperators(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}}getActiveOperators(e){var t;const i=null===(t=e.getColDef().filterParams)||void 0===t?void 0:t.filterOptions;if(!i)return;return i.every(e=>"string"===typeof e)?i:void 0}resetColumnCaches(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={},this.expressionEvaluatorParams={}}},$i={stopPropagationCallbacks:s.w3i,focusNextContainer:(e,t)=>(0,s.hHe)(e,t),configureFocusableContainer:(e,t)=>{const i=e.ctrlsSvc.get("gridCtrl");i.addFocusableContainer(t),t.addDestroyFunc(()=>i.removeFocusableContainer(t))}},Zi=class extends fi{constructor(e){super(e,$i)}},Ji=class extends ai{constructor(e){super(s.w3i,e)}},eo={tag:"div",cls:"ag-autocomplete-row",role:"presentation",children:[{tag:"div",cls:"ag-autocomplete-row-label"}]},to=class extends s.uAl{constructor(){super(eo),this.hasHighlighting=!1}setState(e,t){this.value=e,this.render(),this.updateSelected(t)}updateSelected(e){this.toggleCss("ag-autocomplete-row-selected",e)}setSearchString(e){let t=!1;const{value:i}=this;if(i&&(0,s.Qmv)(e)){const o=i.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(o>=0){t=!0,this.hasHighlighting=!0;const n=o+e.length,r=this.getGui().lastElementChild;(0,s.fDi)(r),r.append(i.slice(0,o),(0,s.UCw)({tag:"b",children:i.slice(o,n)}),i.slice(n))}}!t&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var e;this.getGui().lastElementChild.textContent=null!==(e=this.value)&&void 0!==e?e:"\xa0"}},io={tag:"div",cls:"ag-autocomplete-list-popup",children:[{tag:"div",ref:"eList",cls:"ag-autocomplete-list"}]},oo=class extends s.Axr{constructor(e){super(io),this.params=e,this.eList=s.dRA,this.searchString=""}postConstruct(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new Ji({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:e=>this.autocompleteEntries[e]});const e=this.virtualList.getGui();this.addManagedListeners(e,{click:()=>this.params.onConfirmed(),mousemove:this.onMouseMove.bind(this),mousedown:e=>e.preventDefault()}),this.setSelectedValue(0)}onNavigationKeyDown(e,t){e.preventDefault();const i=this.autocompleteEntries.indexOf(this.selectedValue),o=t===s.DDm.UP?i-1:i+1;this.checkSetSelectedValue(o)}setSearch(e){this.searchString=e,(0,s.Qmv)(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,t){let i,o=!1;const n=e.toLocaleLowerCase(),s=t.filter(e=>{const t=e.toLocaleLowerCase().indexOf(n),s=0===t,r=t>=0;return r&&(!i||!o&&s||o===s&&e.length<i.length)&&(i=e,o=s),r});return!i&&s.length&&(i=s[0]),{topMatch:i,allMatches:s}}runSearch(){const{autocompleteEntries:e,useFuzzySearch:t,forceLastSelection:i}=this.params,o=e.map(e=>{var t;return null!==(t=e.displayValue)&&void 0!==t?t:e.key});let n,r;if(t)n=(0,s.NPD)({inputValue:this.searchString,allSuggestions:o,hideIrrelevant:!0}).values,r=n.length?n[0]:void 0;else{const e=this.runContainsSearch(this.searchString,o);n=e.allMatches,r=e.topMatch}let a=e.filter(e=>{let{key:t,displayValue:i}=e;return n.includes(null!==i&&void 0!==i?i:t)});if(!a.length&&this.selectedValue&&null!==i&&void 0!==i&&i(this.selectedValue,this.searchString)&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!r)return;const l=n.indexOf(r);this.checkSetSelectedValue(l)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){const t=this.autocompleteEntries[e];this.selectedValue!==t&&(this.selectedValue=t,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((t,i)=>{t.updateSelected(e===i)}))}createRowComponent(e){var t;const i=new to;return this.createBean(i),i.setState(null!==(t=e.displayValue)&&void 0!==t?t:e.key,e===this.selectedValue),i}onMouseMove(e){const t=this.virtualList,i=t.getGui().getBoundingClientRect(),o=t.getScrollTop(),n=e.clientY-i.top+o,s=Math.floor(n/t.getRowHeight());this.checkSetSelectedValue(s)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&null!==(e=this.selectedValue)&&void 0!==e?e:null}},no={tag:"div",cls:"ag-autocomplete",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eAutocompleteInput"}]},so={selector:"AG-AUTOCOMPLETE",component:class extends s.uAl{constructor(){super(no,[s.n1z]),this.eAutocompleteInput=s.dRA,this.isListOpen=!1,this.lastPosition=0,this.valid=!0,this.registerCSS(".ag-autocomplete{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}}.ag-autocomplete-list-popup{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-autocomplete-list{height:calc(var(--ag-row-height)*6.5);min-width:200px;position:relative;width:100%}.ag-autocomplete-virtual-list-item{cursor:default;display:flex;height:var(--ag-list-item-height);&:focus-visible:after{content:none}&:hover{background-color:var(--ag-row-hover-color)}}.ag-autocomplete-row{align-items:center;display:flex;flex:1 1 auto;overflow:hidden}.ag-autocomplete-row-label{margin:0 var(--ag-widget-container-horizontal-padding);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-autocomplete-row-selected{background-color:var(--ag-selected-row-background-color)}")}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){const t=(0,s.X7E)(e);this.updateValue(t),this.updateAutocompleteList(t)}updateValue(e){this.updateLastPosition(),this.dispatchLocalEvent({type:"eventValueChanged",value:e}),this.validate(e)}updateAutocompleteList(e){var t,i,o;const n=null!==(t=null===(i=this.listGenerator)||void 0===i?void 0:i.call(this,e,this.lastPosition))&&void 0!==t?t:{enabled:!1};n.type&&n.type===(null===(o=this.autocompleteListParams)||void 0===o?void 0:o.type)||this.isListOpen&&this.closeList();const s=this.isListOpen;if(this.autocompleteListParams=n,null!==n&&void 0!==n&&n.enabled){s||this.openList();const{searchString:e}=n;this.autocompleteList.setSearch(null!==e&&void 0!==e?e:"")}else s&&this.closeList()}onKeyDown(e){const t=e.key;switch(this.updateLastPosition(),t){case s.DDm.ENTER:this.onEnterKeyDown(e);break;case s.DDm.TAB:this.onTabKeyDown(e);break;case s.DDm.DOWN:case s.DDm.UP:this.onUpDownKeyDown(e,t);break;case s.DDm.LEFT:case s.DDm.RIGHT:case s.DDm.PAGE_HOME:case s.DDm.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case s.DDm.ESCAPE:this.onEscapeKeyDown(e);break;case s.DDm.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList())}}confirmSelection(){var e;const t=null===(e=this.autocompleteList)||void 0===e?void 0:e.getSelectedValue();t&&(this.closeList(),this.dispatchLocalEvent({type:"eventOptionSelected",value:this.getValue(),position:this.lastPosition,updateEntry:t,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,t){var i;(e.preventDefault(),this.isListOpen)?null===(i=this.autocompleteList)||void 0===i||i.onNavigationKeyDown(e,t):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList(null!==(e=this.eAutocompleteInput.getValue())&&void 0!==e?e:null)}setCaret(e,t){(t||(0,s.sNX)(this.beans))&&this.eAutocompleteInput.getFocusableElement().focus();const i=this.eAutocompleteInput.getInputElement();i.setSelectionRange(e,e),e===i.value.length&&(i.scrollLeft=i.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=null!==(e=this.eAutocompleteInput.getInputElement().selectionStart)&&void 0!==e?e:0}validate(e){if(!this.validator)return;const t=this.validationMessage=this.validator(e);this.eAutocompleteInput.getInputElement().setCustomValidity(null!==t&&void 0!==t?t:""),this.valid=!t,this.dispatchLocalEvent({type:"eventValidChanged",isValid:this.valid,validationMessage:t})}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new oo({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const e=this.autocompleteList.getGui(),t={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},i=this.popupSvc.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupSvc.positionPopupByComponent(t),ariaLabel:this.listAriaLabel});this.hidePopup=i.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchLocalEvent({type:"eventValueConfirmed",value:this.getValue(),isValid:this.isValid()})}getValue(){return(0,s.X7E)(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){const{value:t,position:i,silent:o,updateListOnlyIfOpen:n,restoreFocus:s}=e;this.eAutocompleteInput.setValue(t,!0),this.setCaret(null!==i&&void 0!==i?i:this.lastPosition,s),o||this.updateValue(t),n&&!this.isListOpen||this.updateAutocompleteList(t)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}}},ro={buttons:["apply"],suppressBuilderButton:!1},ao={apply:"advancedFilterApply",clear:"advancedFilterClear",cancel:"advancedFilterCancel",reset:"advancedFilterReset"},lo={tag:"div",cls:"ag-advanced-filter",role:"presentation",attrs:{tabindex:"-1"},children:[{tag:"ag-autocomplete",ref:"eAutocomplete"},{tag:"ag-filter-button",ref:"eButtons",cls:"ag-advanced-filter-buttons"},{tag:"button",ref:"eBuilderFilterButton",cls:"ag-button ag-advanced-filter-builder-button",children:[{tag:"span",ref:"eBuilderFilterButtonIcon",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eBuilderFilterButtonLabel",cls:"ag-advanced-filter-builder-button-label"}]}]},co=class extends s.uAl{constructor(){super(lo,[so,s.cAy]),this.eAutocomplete=s.dRA,this.eButtons=s.dRA,this.eBuilderFilterButton=s.dRA,this.eBuilderFilterButtonIcon=s.dRA,this.eBuilderFilterButtonLabel=s.dRA,this.expressionParser=null,this.isApplyDisabled=!0,this.builderOpen=!1}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc,this.advancedFilter=e.advancedFilter,this.filterManager=e.filterManager,this.registry=e.registry}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getTooltipShowDelayOverride:()=>1e3,getLocation:()=>"advancedFilter"})),this.eAutocomplete.setListGenerator((e,t)=>this.generateAutocompleteListParams(t)).setValidator(()=>this.validateValue()).setForceLastSelection((e,t)=>this.forceLastSelection(e,t)).setInputAriaLabel(this.advFilterExpSvc.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advFilterExpSvc.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListeners(this.eAutocomplete,{eventValueChanged:e=>{let{value:t}=e;return this.onValueChanged(t)},eventValueConfirmed:e=>{let{isValid:t}=e;return this.onValueConfirmed(t)},eventOptionSelected:e=>{let{position:t,updateEntry:i,autocompleteType:o}=e;return this.onOptionSelected(t,i,o)},eventValidChanged:e=>{let{isValid:t,validationMessage:i}=e;return this.onValidChanged(t,i)}});const{buttons:e,suppressBuilderButton:t}=(0,n.A)((0,n.A)({},ro),this.gos.get("advancedFilterParams"));this.setupButtons(e),this.setupBuilderButton(t),this.beans.gos.addManagedPropertyListener("advancedFilterParams",e=>{const t=(0,n.A)((0,n.A)({},ro),e.currentValue),i=(0,n.A)((0,n.A)({},ro),e.previousValue);if(t.buttons!==i.buttons){const e=t.buttons.map(e=>({type:e,label:this.advFilterExpSvc.translate(ao[e])}));this.eButtons.updateButtons(e)}t.suppressBuilderButton!==i.suppressBuilderButton&&(0,s.nl0)(this.eBuilderFilterButton,!t.suppressBuilderButton)})}refresh(){const e=this.advancedFilter.getExpressionDisplayValue();this.eAutocomplete.setValue({value:null!==e&&void 0!==e?e:"",position:null===e||void 0===e?void 0:e.length,updateListOnlyIfOpen:!0})}setInputDisabled(e){this.eAutocomplete.setInputDisabled(e),this.eButtons.updateValidity(!e&&!this.isApplyDisabled&&!this.advancedFilter.isCurrentExpressionApplied())}setupButtons(e){const t=e.map(e=>({type:e,label:this.advFilterExpSvc.translate(ao[e])})),i=e=>()=>{this.updateModel(e)};this.eButtons.addManagedListeners(this.eButtons,{apply:i("apply"),clear:i("clear"),reset:i("reset"),cancel:i("cancel")}),this.eButtons.updateButtons(t)}updateModel(e){var t,i;switch(e){case"apply":this.onValueConfirmed(this.eAutocomplete.isValid());break;case"reset":this.advancedFilter.setModel(null),null===(t=this.filterManager)||void 0===t||t.onFilterChanged({source:"advancedFilter"});break;case"cancel":this.advancedFilter.setModel(this.advancedFilter.getModel()),null===(i=this.filterManager)||void 0===i||i.onFilterChanged({source:"advancedFilter"});break;case"clear":this.eAutocomplete.setValue({value:"",restoreFocus:!0})}}setupBuilderButton(e){this.eBuilderFilterButtonIcon.appendChild((0,s.asF)("advancedFilterBuilder",this.beans)),this.eBuilderFilterButtonLabel.textContent=this.advFilterExpSvc.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedElementListeners(this.eBuilderFilterButton,{click:()=>this.openBuilder()}),this.addManagedListeners(this.advancedFilter.getCtrl(),{advancedFilterBuilderClosed:()=>this.closeBuilder()}),(0,s.nl0)(this.eBuilderFilterButton,!e)}onValueChanged(e){var t;e=(0,s.X7E)(e),this.advancedFilter.setExpressionDisplayValue(e),this.expressionParser=this.advancedFilter.createExpressionParser(e);const i=null===(t=this.expressionParser)||void 0===t?void 0:t.parseExpression();i&&i!==e&&this.eAutocomplete.setValue({value:i,silent:!0,restoreFocus:!0})}onValueConfirmed(e){var t,i;e&&!this.isApplyDisabled&&(null===(t=this.eButtons)||void 0===t||t.updateValidity(!1),this.advancedFilter.applyExpression(),null===(i=this.filterManager)||void 0===i||i.onFilterChanged({source:"advancedFilter"}))}onOptionSelected(e,t,i){const{updatedValue:o,updatedPosition:n,hideAutocomplete:s}=this.updateExpression(e,t,i);this.eAutocomplete.setValue({value:o,position:n,updateListOnlyIfOpen:s,restoreFocus:!0})}validateValue(){var e,t,i;return null!==(e=this.expressionParser)&&void 0!==e&&e.isValid()?null:null!==(t=null===(i=this.expressionParser)||void 0===i?void 0:i.getValidationMessage())&&void 0!==t?t:null}onValidChanged(e,t){var i;this.isApplyDisabled=!e||this.advancedFilter.isCurrentExpressionApplied(),this.eButtons.updateValidity(!this.isApplyDisabled),null===(i=this.tooltipFeature)||void 0===i||i.setTooltipAndRefresh(t)}generateAutocompleteListParams(e){return this.expressionParser?this.expressionParser.getAutocompleteListParams(e):this.advFilterExpSvc.getDefaultAutocompleteListParams("")}updateExpression(e,t,i){var o,n;return this.advFilterExpSvc.updateAutocompleteCache(t,i),null!==(o=null===(n=this.expressionParser)||void 0===n?void 0:n.updateExpression(e,t,i))&&void 0!==o?o:this.advancedFilter.getDefaultExpression(t)}forceLastSelection(e,t){let{key:i,displayValue:o}=e;return!!t.toLocaleLowerCase().match("^".concat((null!==o&&void 0!==o?o:i).toLocaleLowerCase(),"\\s*$"))}openBuilder(){this.builderOpen||(this.builderOpen=!0,(0,s.qpX)(this.eBuilderFilterButton,!0),this.advancedFilter.getCtrl().toggleFilterBuilder({source:"ui",eventSource:this.eBuilderFilterButton}))}closeBuilder(){this.builderOpen&&(this.builderOpen=!1,(0,s.qpX)(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())}},uo={tag:"div",cls:"ag-advanced-filter-header",role:"row"},ho=class extends s.uAl{constructor(e){super(uo),this.enabled=e}wireBeans(e){this.colModel=e.colModel,this.focusSvc=e.focusSvc,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){this.setupAdvancedFilter(this.enabled),this.addDestroyFunc(()=>this.destroyBean(this.eAdvancedFilter));const e=()=>{this.enabled&&this.setEnabledHeight()};this.addManagedEventListeners({gridColumnsChanged:()=>this.onGridColumnsChanged(),columnHeaderHeightChanged:e,stylesChanged:e}),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addGuiEventListener("keydown",e=>this.onKeyDown(e)),this.addGuiEventListener("focusout",e=>{this.getFocusableElement().contains(e.relatedTarget)||this.focusSvc.clearAdvancedFilterColumn()})}getFocusableElement(){var e,t;return null!==(e=null===(t=this.eAdvancedFilter)||void 0===t?void 0:t.getGui())&&void 0!==e?e:this.getGui()}setEnabled(e){e!==this.enabled&&this.setupAdvancedFilter(e)}refresh(){var e;null===(e=this.eAdvancedFilter)||void 0===e||e.refresh()}getHeight(){return this.height}setInputDisabled(e){var t;null===(t=this.eAdvancedFilter)||void 0===t||t.setInputDisabled(e)}setupAdvancedFilter(e){const t=this.getGui();if(e){this.eAdvancedFilter=this.createBean(new co);const e=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCss("ag-advanced-filter-header-cell"),this.setEnabledHeight(),this.setAriaRowIndex(),(0,s.lXX)(e,"gridcell"),(0,s.T$n)(e,1),this.setAriaColumnCount(e),t.appendChild(e)}else(0,s.fDi)(t),this.destroyBean(this.eAdvancedFilter),this.height=0;(0,s.nl0)(t,e),this.enabled=e}setEnabledHeight(){const e=this.getGui();this.height=(0,s.IJX)(this.beans);const t="".concat(this.height,"px");e.style.height=t,e.style.minHeight=t}setAriaColumnCount(e){(0,s.pp6)(e,this.colModel.getCols().length)}setAriaRowIndex(){var e,t;(0,s.vwK)(this.getGui(),null!==(e=null===(t=this.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===t?void 0:t.getRowCount())&&void 0!==e?e:0)}onGridColumnsChanged(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())}onKeyDown(e){switch(e.key){case s.DDm.ENTER:this.hasFocus()&&(0,s.YtT)(this.getFocusableElement())&&e.preventDefault();break;case s.DDm.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case s.DDm.UP:this.navigateUpDown(!0,e);break;case s.DDm.DOWN:this.navigateUpDown(!1,e);break;case s.DDm.TAB:if(this.hasFocus())this.navigateLeftRight(e);else{const t=(0,s.ey2)(this.beans,this.getFocusableElement(),null,e.shiftKey);t?(e.preventDefault(),t.focus()):this.navigateLeftRight(e)}}}navigateUpDown(e,t){this.hasFocus()&&this.focusSvc.focusNextFromAdvancedFilter(e)&&t.preventDefault()}navigateLeftRight(e){(e.shiftKey?this.focusSvc.focusLastHeader():this.focusSvc.focusNextFromAdvancedFilter(!1,!0))&&e.preventDefault()}hasFocus(){return(0,s.UlD)(this.beans)===this.getFocusableElement()}},po=class extends di{},go=class extends s.XQb{constructor(e,t){super(),this.comp=e,this.virtualList=t}postConstruct(){this.createManagedBean(new po(this.comp,this.virtualList,{dragSourceType:s.qRA.AdvancedFilterBuilder,addListeners:(e,t,i)=>{e.addManagedListeners(this,{advancedFilterBuilderDragStarted:t,advancedFilterBuilderDragEnded:i})},getCurrentDragValue:e=>this.getCurrentDragValue(e),isMoveBlocked:()=>!1,getNumRows:e=>e.getNumItems(),moveItem:(e,t)=>this.moveItem(e,t)}))}getCurrentDragValue(e){return e.item}moveItem(e,t){this.comp.moveItem(e,t)}},vo={tag:"div",cls:"ag-pill",role:"option",children:[{tag:"span",ref:"eText",cls:"ag-pill-text"},{tag:"span",ref:"eButton",cls:"ag-button ag-pill-button",role:"presentation"}]},mo=class extends s.uAl{constructor(e){super(vo),this.config=e,this.eText=s.dRA,this.eButton=s.dRA}postConstruct(){const{config:e,eButton:t}=this,{onKeyDown:i,onButtonClick:o}=e;this.getGui().setAttribute("tabindex",String(this.gos.get("tabIndex"))),this.addGuiEventListener("focus",()=>{this.eButton.focus()}),i&&this.addGuiEventListener("keydown",i),o&&this.addManagedElementListeners(t,{click:o})}toggleCloseButtonClass(e,t){this.eButton.classList.toggle(e,t)}setText(e){this.eText.textContent=e}getText(){return this.eText.textContent}},fo={tag:"div",cls:"ag-pill-container"},Co=class extends s.uAl{constructor(){super(fo),this.pills=[]}init(e){var t;this.params=e,this.getKey=null!==(t=e.valueFormatter)&&void 0!==t?t:e=>String(e),this.refresh()}refresh(){var e;this.clearPills();const{params:t,onPillKeyDown:i,getKey:o}=this;let n=t.getValue();if(!Array.isArray(n)){if(null==n)return;n=[n]}const r=null!==(e=t.valueFormatter)&&void 0!==e?e:e=>String(e),a=n.length;(0,s.lXX)(this.getGui(),0===a?"presentation":"listbox");for(let c=0;c<a;c++){var l,d;const e=n[c],u=this.createBean(new mo({onButtonClick:()=>this.onPillButtonClick(u),onKeyDown:i.bind(this)})),h=u.getGui();(0,s.c7o)(h,c+1),(0,s.awo)(h,a),t.onPillMouseDown&&u.addGuiEventListener("mousedown",t.onPillMouseDown),t.announceItemFocus&&u.addGuiEventListener("focus",t.announceItemFocus),u.setText(null!==(l=r(e))&&void 0!==l?l:""),u.toggleCloseButtonClass("ag-icon-cancel",!0),this.appendChild(h),this.pills.push({key:null!==(d=o(e))&&void 0!==d?d:c.toString(),pill:u})}}onNavigationKeyDown(e){const{key:t}=e;if(!this.pills.length||t!==s.DDm.LEFT&&t!==s.DDm.RIGHT)return;e.preventDefault();const{params:i,beans:o}=this,n=(0,s.UlD)(o),r=this.getGui();if(r.contains(n)){const e=(0,s.ey2)(o,r,!1,t===s.DDm.LEFT);e?e.focus():i.eWrapper&&i.eWrapper.focus()}else{const e=(0,s.YE1)(r);e.length>0&&e[t===s.DDm.RIGHT?0:e.length-1].focus()}}clearPills(){const e=this.getGui();e.contains((0,s.UlD)(this.beans))&&this.params.eWrapper&&this.params.eWrapper.focus(),(0,s.fDi)(e),this.destroyBeans(this.pills.map(e=>{let{pill:t}=e;return t})),this.pills=[]}onPillButtonClick(e){this.deletePill(e)}onPillKeyDown(e){const t=e.key;if(t!==s.DDm.DELETE&&t!==s.DDm.BACKSPACE)return;e.preventDefault();const i=(0,s.BxM)(this.beans),o=this.pills.findIndex(e=>{let{pill:t}=e;return t.getGui().contains(i.activeElement)});if(-1===o)return;const n=this.pills[o];null!==n&&void 0!==n&&n.pill&&this.deletePill(n.pill,o)}deletePill(e,t){var i,o;const{getKey:n,pills:s,params:r}=this,a=null===(i=null!==(o=s[null!==t&&void 0!==t?t:-1])&&void 0!==o?o:s.find(t=>{let{pill:i}=t;return i===e}))||void 0===i?void 0:i.key,l=(r.getValue()||[]).filter(e=>n(e)!==a);if(r.setValue(l),!l.length&&r.eWrapper)r.eWrapper.focus();else if(null!=t){const{pill:e}=s[Math.min(t,s.length-1)];e&&e.getFocusableElement().focus()}}destroy(){this.clearPills(),super.destroy()}},wo={tag:"div",cls:"ag-rich-select-row",role:"presentation"},bo=class extends s.uAl{constructor(e){super(wo),this.params=e}wireBeans(e){this.userCompFactory=e.userCompFactory,this.registry=e.registry}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("highlightTooltipFeature",!1,{getGui:()=>this.getGui(),shouldDisplayTooltip:()=>{var e,t;return null===(e=null===(t=this.shouldDisplayTooltip)||void 0===t?void 0:t.call(this))||void 0===e||e}},this))}setState(e){var t,i;const{params:o}=this,n=null!==(t=null===(i=o.valueFormatter)||void 0===i?void 0:i.call(o,e))&&void 0!==t?t:"";this.populateWithRenderer(e,n)||this.populateWithoutRenderer(e,n),this.value=e}highlightString(e){const{parsedValue:t,params:i}=this;if(i.cellRenderer||!(0,s.Qmv)(t))return;let o=(0,s.Qmv)(e);if(o){const i=null===t||void 0===t?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(i>=0){const o=i+e.length,n=this.getGui().querySelector("span");n&&((0,s.fDi)(n),n.append(t.slice(0,i),(0,s.UCw)({tag:"span",cls:"ag-rich-select-row-text-highlight",children:t.slice(i,o)}),t.slice(o)))}else o=!1}o||this.renderValueWithoutRenderer(t)}updateSelected(e){const t=this.getGui();(0,s.QyW)(t.parentElement,e),this.toggleCss("ag-rich-select-row-selected",e)}getValue(){return this.value}toggleHighlighted(e){this.toggleCss("ag-rich-select-row-highlighted",e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}populateWithoutRenderer(e,t){var i;const o=this.getGui(),n=(0,s.UCw)({tag:"span"});n.style.overflow="hidden",n.style.textOverflow="ellipsis";const r=(0,s.SjP)((0,s.Qmv)(t)?t:e);this.parsedValue=(0,s.Qmv)(r)?r:null,o.appendChild(n),this.renderValueWithoutRenderer(r),this.shouldDisplayTooltip=(0,s.JHD)(()=>n),null===(i=this.tooltipFeature)||void 0===i||i.setTooltipAndRefresh(this.parsedValue)}renderValueWithoutRenderer(e){const t=this.getGui().querySelector("span");t&&(t.textContent=(0,s.Qmv)(e)?e:"\xa0")}populateWithRenderer(e,t){let i,o;const{cellRenderer:n,cellRendererParams:r}=this.params;if(n){var a;const i=null===(a=this.getParentComponent())||void 0===a?void 0:a.getParentComponent();o=(0,s.Eet)(this.userCompFactory,this.params,(0,s.AuN)(this.gos,{value:e,valueFormatted:t,cellRendererParams:r,getValue:()=>null===i||void 0===i?void 0:i.getValue(),setValue:e=>{null===i||void 0===i||i.setValue(e,!0)},setTooltip:(e,t)=>{var i;this.gos.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=t,null===(i=this.tooltipFeature)||void 0===i||i.setTooltipAndRefresh(e)}}))}return o&&(i=o.newAgStackInstance()),i&&Eo(i,this.getGui()),!!i&&(i.then(e=>{this.addDestroyFunc(()=>{this.destroyBean(e)})}),!0)}},yo="ag-rich-select-list",So="ag-rich-select-row",xo=class extends Ji{constructor(e,t,i){super({cssIdentifier:"rich-select"}),this.params=e,this.richSelectWrapper=t,this.getSearchString=i,this.lastRowHovered=-1,this.selectedItems=new Set,this.loadingState=3,this.params=e,this.setComponentCreator(this.createRowComponent.bind(this)),this.setComponentUpdater(()=>{})}postConstruct(){super.postConstruct();const e=this.getLocaleTextFunc();this.loadingLabel=e("loadingOoo","Loading..."),this.noMatchesLabel=e("noMatches","No matches to show"),this.eLoadingIcon=(0,s.asF)("richSelectLoading",this.beans,null),this.eStateCompLabel=(0,s.UCw)({tag:"span",cls:"ag-loading-text",children:this.loadingLabel}),this.eStateComp=(0,s.UCw)({tag:"div",cls:"ag-rich-select-loading",children:[{tag:"span",cls:"ag-loading-icon",children:[this.eLoadingIcon?()=>this.eLoadingIcon:void 0]},{tag:"span",cls:"ag-loading-text",children:[()=>this.eStateCompLabel]}]}),this.appendChild(this.eStateComp);const{cellRowHeight:t,pickerAriaLabelKey:i,pickerAriaLabelValue:o}=this.params;t&&this.setRowHeight(t);const n=this.getGui(),r=this.getAriaElement();this.addManagedListeners(n,{mousemove:this.onMouseMove.bind(this),mouseout:this.onMouseOut.bind(this),mousedown:this.onMouseDown.bind(this),click:this.onClick.bind(this)}),n.classList.add(yo);const a="".concat(yo,"-").concat(this.getCompId());r.setAttribute("id",a);const l=this.getLocaleTextFunc()(i,o);(0,s.PIC)(r,l),(0,s.Ge7)(this.richSelectWrapper,r)}setIsLoading(){this.setLoadingState(0)}setLoadingState(e){this.loadingState=e,this.toggleStateComp(),this.toggleVisibility()}toggleStateComp(){const{eStateComp:e,eStateCompLabel:t,eLoadingIcon:i,loadingState:o,loadingLabel:n,noMatchesLabel:r,params:a}=this;if(e)return 0===o?(t.textContent=n,i&&(0,s.nl0)(i,!0),void(0,s.nl0)(e,!0)):2===o&&a.allowNoResultsCopy?(t.textContent=r,i&&(0,s.nl0)(i,!1),void(0,s.nl0)(e,!0)):void(0,s.nl0)(e,!1)}shouldBeVisible(){return 2===this.loadingState?!!this.params.allowNoResultsCopy:3!==this.loadingState}toggleVisibility(e){const t=this.getGui();void 0===e?(0,s.nl0)(t,this.shouldBeVisible()):(0,s.nl0)(t,e)}navigateToPage(e){const t=super.navigateToPage(e,this.lastRowHovered);return null!=t&&(0,s.Arb)(this.beans,()=>{if(!this.isAlive())return null;this.highlightIndex(t)}),t}drawVirtualRows(e){super.drawVirtualRows(e),this.refreshSelectedItems()}highlightFilterMatch(e){this.forEachRenderedRow(t=>{t.highlightString(e)})}onNavigationKeyDown(e,t){(0,s.Arb)(this.beans,()=>{if(!this.currentList||!this.isAlive())return;const i=this.currentList.length,o=this.lastRowHovered,n=e===s.DDm.DOWN?1:-1,r=Math.min(Math.max(-1===o?0:o+n,0),i-1);this.highlightIndex(r),t()})}selectValue(e){if(!this.currentList||null==e)return!1;const t=this.getIndicesForValues(e),i=t.length>0;return i&&(this.refresh(),this.ensureIndexVisible(t[0]),this.refresh(!0)),this.selectListItems(Array.isArray(e)?e:[e]),i}selectListItems(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.selectedItems.clear();for(let t=0;t<e.length;t++){const i=e[t];void 0===this.findItemInSelected(i)&&this.selectedItems.add(i)}this.refreshSelectedItems()}getCurrentList(){return this.currentList}setCurrentList(e){const t=function(e){if(!e)return 3;if(e.length)return 1;return 2}(e);this.setLoadingState(t),e||(e=[]),this.currentList=e,this.setModel({getRowCount:()=>e.length,getRow:t=>e[t],areRowsEqual:(e,t)=>e===t})}getSelectedItems(){return this.selectedItems}getLastItemHovered(){var e;return null===(e=this.currentList)||void 0===e?void 0:e[this.lastRowHovered]}highlightIndex(e,t){if(this.currentList){if(e<0||e>=this.currentList.length)this.lastRowHovered=-1;else{this.lastRowHovered=e;this.ensureIndexVisible(e,!t)&&!t&&this.refresh(!0)}this.forEachRenderedRow((t,i)=>{const o=e===i;if(t.toggleHighlighted(o),o){const e="".concat(So,"-").concat(t.getCompId());(0,s._pu)(this.richSelectWrapper,e),this.richSelectWrapper.setAttribute("data-active-option",e)}})}}getIndicesForValues(e){const{currentList:t}=this;if(!t||0===t.length||null==e)return[];if(Array.isArray(e)||(e=[e]),0===e.length)return[];const{valueFormatter:i}=this.params,o=[],n="object"===typeof e[0],s=t.map(i);for(const r of e){let e=-1;e=n?s.indexOf(i(r)):t.indexOf(r),e>=0&&o.push(e)}return o}toggleListItemSelection(e){const t=this.findItemInSelected(e);void 0!==t?this.selectedItems.delete(t):this.selectedItems.add(e),this.refreshSelectedItems(),this.dispatchValueSelected()}refreshSelectedItems(){this.forEachRenderedRow(e=>{const t=void 0!==this.findItemInSelected(e.getValue());e.updateSelected(t)})}findItemInSelected(e){if("object"!==typeof e)return this.selectedItems.has(e)?e:void 0;{const t=this.params.valueFormatter,i=t(e);for(const e of this.selectedItems)if(t(e)===i)return e}}createRowComponent(e,t){const i=new bo(this.params);t.setAttribute("id","".concat(So,"-").concat(i.getCompId())),i.setParentComponent(this),this.createBean(i),i.setState(e);const{highlightMatch:o,searchType:n="fuzzy"}=this.params;return o&&"fuzzy"!==n&&i.highlightString(this.getSearchString()),i}getRowForMouseEvent(e){if(!this.model)return-1;const t=this.getGui().getBoundingClientRect(),i=this.getScrollTop(),o=e.clientY-t.top+i;return Math.min(Math.floor(o/this.getRowHeight()),this.model.getRowCount()-1)}onMouseMove(e){const t=this.getRowForMouseEvent(e);-1!==t&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.highlightIndex(t,!0))}onMouseDown(e){e.preventDefault()}onMouseOut(e){this.getGui().contains(e.relatedTarget)||this.highlightIndex(-1)}onClick(e){var t;const{multiSelect:i}=this.params;if(null===(t=this.currentList)||void 0===t||!t.length)return;const o=this.getRowForMouseEvent(e),n=this.currentList[o];i?this.toggleListItemSelection(n):(this.selectListItems([n]),this.dispatchValueSelected())}dispatchValueSelected(){this.dispatchLocalEvent({type:"richSelectListRowSelected",fromEnterKey:!1,value:this.selectedItems})}destroy(){super.destroy(),this.eStateComp=void 0}};var Fo=300,Ro={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed",children:[{tag:"span",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"ag-input-text-field",ref:"eInput",cls:"ag-rich-select-field-input"},{tag:"span",ref:"eDeselect",cls:"ag-rich-select-deselect-button ag-picker-field-icon",role:"presentation"},{tag:"span",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},Po=class extends s.HHt{constructor(e){var t,i;super((0,n.A)((0,n.A)({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"richSelectOpen",ariaRole:"combobox",template:null!==(t=null===e||void 0===e?void 0:e.template)&&void 0!==t?t:Ro,agComponents:[s.n1z],modalPicker:!1},e),{},{maxPickerHeight:null!==(i=null===e||void 0===e?void 0:e.maxPickerHeight)&&void 0!==i?i:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.searchStringCreator=null,this.eInput=s.dRA,this.eDeselect=s.dRA,this.skipWrapperAnnouncement=!1;const{value:o,valueList:r,searchStringCreator:a,onSearch:l}=e||{};void 0!==o&&(this.value=o),a&&(this.searchStringCreator=a),null!=r&&this.setValueList({valueList:r,isInitial:!0});const{searchDebounceDelay:d=Fo}=this.config;l&&(this.onSearchCallbackDebounced=(0,s.pkA)(this,l,d)),this.registerCSS(".ag-rich-select{cursor:default;height:100%}.ag-rich-select-value{align-items:center;background-color:var(--ag-picker-button-background-color);display:flex;height:100%;padding:var(--ag-spacing);:where(.ag-picker-field-display){overflow:hidden;text-overflow:ellipsis;&:where(.ag-display-as-placeholder){opacity:.5}}}.ag-virtual-list-viewport.ag-rich-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-input-border-radius);box-shadow:var(--ag-dropdown-shadow);height:auto;position:relative;width:100%;:where(.ag-rich-select-loading){display:flex;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}}.ag-rich-select-row{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;padding:0 var(--ag-spacing);white-space:nowrap}.ag-rich-select-row-selected{background-color:var(--ag-selected-row-background-color)}.ag-rich-select-row-highlighted,.ag-rich-select-row:hover{background-image:linear-gradient(var(--ag-row-hover-color),var(--ag-row-hover-color))}.ag-rich-select-row-text-highlight{font-weight:700}.ag-rich-select-field-input{flex:1 1 auto;:where(.ag-input-field-input){border:none!important;box-shadow:none!important;padding:0!important;text-overflow:ellipsis;&::-moz-placeholder{opacity:.8}&::placeholder{opacity:.8}}}:where(.ag-ltr) .ag-rich-select-field-input{left:var(--ag-spacing)}:where(.ag-rtl) .ag-rich-select-field-input{right:var(--ag-spacing)}:where(.ag-popup-editor) .ag-rich-select-value{height:var(--ag-row-height);min-width:200px}.ag-rich-select-virtual-list-item{cursor:default;height:var(--ag-list-item-height)}.ag-pill-container{display:flex;flex-wrap:nowrap;gap:.25rem}.ag-pill{align-items:center;background:var(--ag-select-cell-background-color);border:var(--ag-select-cell-border);border-radius:var(--ag-border-radius);display:flex;padding:0 .25rem;white-space:nowrap}.ag-pill-button{border:none;padding:0;&:hover{color:var(--ag-accent-color);cursor:pointer}}:where(.ag-ltr) .ag-pill-button{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-pill-button{margin-right:var(--ag-spacing)}")}wireBeans(e){this.userCompFactory=e.userCompFactory,this.ariaAnnounce=e.ariaAnnounce,this.registry=e.registry}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),shouldDisplayTooltip:()=>{var e,t;return null===(e=null===(t=this.shouldDisplayTooltip)||void 0===t?void 0:t.call(this))||void 0===e||e}})),super.postConstruct(),this.createListComponent(),this.eDeselect.appendChild((0,s.asF)("richSelectRemove",this.beans));const{allowTyping:e,placeholder:t,suppressDeselectAll:i}=this.config;this.eDeselect.classList.add("ag-hidden"),e?(this.eInput.setAutoComplete(!1).setInputPlaceholder(t),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.setupAriaProperties();const{searchDebounceDelay:o=300}=this.config;this.clearSearchString=(0,s.pkA)(this,this.clearSearchString.bind(this),o),this.renderSelectedValue(),e&&this.eInput.onValueChange(e=>this.searchTextFromString(e)),this.addManagedElementListeners(this.eWrapper,{focus:this.onWrapperFocus.bind(this)}),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)}),i||this.addManagedElementListeners(this.eDeselect,{mousedown:this.onDeselectAllMouseDown.bind(this),click:this.onDeselectAllClick.bind(this)})}setupAriaProperties(){const{eWrapper:e,gos:t}=this;e.tabIndex=t.get("tabIndex");const i=this.getLocaleTextFunc();this.ariaDeleteSelection=i("ariaLabelRichSelectDeleteSelection","Press DELETE to deselect item"),this.ariaDeselectAllItems=i("ariaLabelRichSelectDeselectAllItems","Press DELETE to deselect all items"),this.ariaToggleSelection=i("ariaLabelRichSelectToggleSelection","Press SPACE to toggle selection")}createListComponent(){this.listComponent=this.createBean(new xo(this.config,this.getFocusableElement(),()=>this.searchString)),this.listComponent.setParentComponent(this),this.addManagedListeners(this.listComponent,{richSelectListRowSelected:e=>{this.onListValueSelected(e.value,e.fromEnterKey)}})}renderSelectedValue(e){const{value:t,eDisplayField:i,config:o,gos:n}=this,{allowTyping:r,cellRenderer:a,cellRendererParams:l,initialInputValue:d,multiSelect:c,suppressDeselectAll:u,suppressMultiSelectPillRenderer:h,valueFormatter:p,onSearch:g}=o,v=Do(t,p);if(r)return void this.eInput.setValue(null!==d&&void 0!==d?d:v,!!e&&!!g);if(c&&!u){const e=null==t||Array.isArray(t)&&0===t.length;this.eDeselect.classList.toggle("ag-hidden",e)}let m,f;if(!c||h)if(a&&(m=(0,s.Eet)(this.userCompFactory,o,(0,s.AuN)(this.gos,{value:t,valueFormatted:v,cellRendererParams:l,getValue:()=>this.getValue(),setValue:e=>{this.setValue(e,!0)},setTooltip:(e,t)=>{var i;n.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=t,null===(i=this.tooltipFeature)||void 0===i||i.setTooltipAndRefresh(e)}}))),m&&(f=m.newAgStackInstance()),f)(0,s.fDi)(i),Eo(f,i),f.then(e=>{this.addDestroyFunc(()=>this.destroyBean(e))});else{var C;if((0,s.Qmv)(this.value))i.innerText=v,i.classList.remove("ag-display-as-placeholder");else{const{placeholder:e}=o;(0,s.Qmv)(e)?(i.textContent=e,i.classList.add("ag-display-as-placeholder")):(0,s.fDi)(i)}this.shouldDisplayTooltip=(0,s.JHD)(()=>this.eDisplayField),null===(C=this.tooltipFeature)||void 0===C||C.setTooltipAndRefresh(null!==v&&void 0!==v?v:null)}else this.createOrUpdatePillContainer(i)}createPickerComponent(){const{values:e}=this;return e&&this.setValueList({valueList:e}),this.listComponent}setSearchStringCreator(e){this.searchStringCreator=e}setValueListInternal(e){var t;const{listComponent:i,isPickerDisplayed:o,value:n}=this,{valueList:s,refresh:r,isInitial:a}=e;if(a&&this.setValues(s),i&&(null===(t=this.listComponent)||void 0===t||t.setCurrentList(s),r)){if(this.values)i.refresh(!0);else if(o){i.selectValue(n)||i.refresh()}this.alignPickerToComponent()}}setValueList(e){var t;const{valueList:i}=e;i&&!Array.isArray(i)?(null===(t=this.listComponent)||void 0===t||t.setIsLoading(),i.then(t=>{t&&this.setValueListInternal((0,n.A)((0,n.A)({},e),{},{valueList:t}))})):this.setValueListInternal(e)}setValues(e){this.values=e,this.searchStrings=this.getSearchStringsFromValues(e||[])}showPicker(){const{listComponent:e,value:t}=this;if(!e)return;super.showPicker();let i=t;void 0===t&&(i=null),e.selectValue(i);const o=e.getIndicesForValues(Array.isArray(i)?i:[i])[0];var n;null!=o?(null===(n=this.tooltipFeature)||void 0===n||n.attemptToHideTooltip(),e.highlightIndex(o)):e.refresh()}createOrUpdatePillContainer(e){if(!this.pillContainer){const t=this.pillContainer=this.createBean(new Co);this.addDestroyFunc(()=>{this.destroyBean(this.pillContainer),this.pillContainer=null}),(0,s.fDi)(e),e.appendChild(t.getGui());const{config:i,eWrapper:o,ariaDeleteSelection:n}=this,{valueFormatter:r}=i;t.init({eWrapper:o,valueFormatter:r,onPillMouseDown:e=>{e.stopImmediatePropagation()},announceItemFocus:()=>{this.announceAriaValue(n)},getValue:()=>this.getValue(),setValue:e=>this.setValue(e,!0)})}this.doWhileBlockingAnnouncement(()=>{var e;return null===(e=this.pillContainer)||void 0===e?void 0:e.refresh()})}doWhileBlockingAnnouncement(e){this.skipWrapperAnnouncement=!0,e(),this.skipWrapperAnnouncement=!1}onWrapperFocus(){const{eInput:e,config:t}=this,{allowTyping:i,multiSelect:o,suppressDeselectAll:n}=t;if(i){const t=e.getFocusableElement();t.focus(),t.select()}else!o||n||this.skipWrapperAnnouncement||this.announceAriaValue(this.ariaDeselectAllItems)}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}onDeselectAllMouseDown(e){e.stopImmediatePropagation()}onDeselectAllClick(){this.setValue([],!0)}buildSearchStringFromKeyboardEvent(e){let{key:t}=e;if(t===s.DDm.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!(0,s.aC_)(e))return;e.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(e){this.searchString+=e,this.runSearch(),this.clearSearchString()}searchTextFromString(e){null==e&&(e=""),this.searchString=e,this.runSearch()}getSearchStringsFromValues(e){const{config:{valueFormatter:t}}=this;return"object"===typeof e[0]&&this.searchStringCreator?this.searchStringCreator(e):e.map(e=>Do(e,t))}filterListModel(e){const{filterList:t}=this.config;t&&this.setValueList({valueList:e,refresh:!0})}runSearch(){var e;if(!this.listComponent)return;if(this.onSearchCallbackDebounced)return void this.onSearchCallbackDebounced(this.searchString);const t=this.searchStrings;if(!t)return void this.listComponent.highlightIndex(-1);const{suggestions:i,filteredValues:o}=this.getSuggestionsAndFilteredValues(this.searchString,t),{filterList:n,highlightMatch:s,searchType:r="fuzzy"}=this.config,a=!(!n||""===this.searchString);var l;(this.filterListModel(a?o:this.values||[]),this.highlightEmptyValue()||this.highlightListValue(i,o,a),s&&"fuzzy"!==r)&&(null===(l=this.listComponent)||void 0===l||l.highlightFilterMatch(this.searchString));null===(e=this.listComponent)||void 0===e||e.toggleVisibility()}highlightEmptyValue(){if(""===this.searchString){var e;const i=null===(e=this.searchStrings)||void 0===e?void 0:e.indexOf("");var t;if(void 0!==i&&-1!==i)return null===(t=this.listComponent)||void 0===t||t.highlightIndex(i),!0}return!1}highlightListValue(e,t,i){if(e.length){var o;const t=i?0:null===(o=this.searchStrings)||void 0===o?void 0:o.indexOf(e[0]);var n;if(void 0!==t)null===(n=this.listComponent)||void 0===n||n.highlightIndex(t)}else{var r,a;if(null===(r=this.listComponent)||void 0===r||r.highlightIndex(-1),!i||t.length)null===(a=this.listComponent)||void 0===a||a.ensureIndexVisible(0);else if(i){var l;this.getAriaElement().removeAttribute("data-active-option");const e=null===(l=this.listComponent)||void 0===l?void 0:l.getAriaElement();e&&(0,s._pu)(e,null)}}}getSuggestionsAndFilteredValues(e,t){let i=[];const o=[];if(!e.length)return{suggestions:i,filteredValues:o};const{searchType:n="fuzzy",filterList:r}=this.config,a=this.values||[];if("fuzzy"===n){const n=(0,s.NPD)({inputValue:e,allSuggestions:t,hideIrrelevant:!0});i=n.values;const l=n.indices;if(r&&l.length)for(let e=0;e<l.length;e++)o.push(a[l[e]])}else i=t.filter((e,t)=>{const i=e.toLocaleLowerCase(),s=this.searchString.toLocaleLowerCase(),l="match"===n?i.startsWith(s):i.includes(s);return r&&l&&o.push(a[t]),l});return{suggestions:i,filteredValues:o}}clearSearchString(){this.searchString=""}setValue(e,t,i,o){if(this.value===e)return this;const n=Array.isArray(e);if(null!=e){if(!n){var s;const t=null===(s=this.listComponent)||void 0===s?void 0:s.getCurrentList();if(-1===(t?t.indexOf(e):-1))return this}var r;if(!i)null===(r=this.listComponent)||void 0===r||r.selectValue(e)}return super.setValue(e,t),o||this.renderSelectedValue(i),this}onNavigationKeyDown(e,t,i){var o;e.preventDefault();const n=t===s.DDm.DOWN;this.isPickerDisplayed||!n?null===(o=this.listComponent)||void 0===o||o.onNavigationKeyDown(t,i):this.showPicker()}onEnterKeyDown(e){var t;if(this.isPickerDisplayed&&(e.preventDefault(),null!==(t=this.listComponent)&&void 0!==t&&t.getCurrentList())){const e=this.listComponent.getLastItemHovered();this.config.multiSelect||void 0===e?this.dispatchPickerEventAndHidePicker(this.value,!0):this.onListValueSelected(new Set([e]),!0)}}onDeleteKeyDown(e){const{eWrapper:t,beans:i}=this;(0,s.UlD)(i)===t&&(e.preventDefault(),this.setValue([],!0))}onTabKeyDown(){const{config:e,isPickerDisplayed:t,listComponent:i}=this,{multiSelect:o}=e;if(t&&i){if(o){const e=this.getValueFromSet(i.getSelectedItems());e&&this.setValue(e,!1,!0,!0)}else{const e=i.getLastItemHovered();void 0!==e&&this.setValue(e,!1,!0)}this.hidePicker()}}getValueFromSet(e){const{multiSelect:t}=this.config;let i=null;for(const o of e){if(1===e.size&&!t){i=o;break}i||(i=[]),i.push(o)}return Array.isArray(i)&&i.sort(),i}onListValueSelected(e,t){const i=this.getValueFromSet(e);this.setValue(i,!1,!0),this.config.multiSelect||this.dispatchPickerEventAndHidePicker(i,t)}dispatchPickerEventAndHidePicker(e,t){const i={type:"fieldPickerValueSelected",fromEnterKey:t,value:e};this.dispatchLocalEvent(i),this.hidePicker()}getFocusableElement(){const{allowTyping:e}=this.config;return e?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(e){const{key:t,isComposing:i}=e,{isPickerDisplayed:o,config:{allowTyping:n,multiSelect:r,suppressDeselectAll:a},listComponent:l,pickerComponent:d}=this;switch(t){case s.DDm.LEFT:case s.DDm.RIGHT:var c;if(!n||this.pillContainer)if(e.preventDefault(),this.pillContainer)null===(c=this.listComponent)||void 0===c||c.highlightIndex(-1),this.pillContainer.onNavigationKeyDown(e);break;case s.DDm.PAGE_HOME:case s.DDm.PAGE_END:if(n){e.preventDefault();const i=this.eInput.getInputElement(),o=t===s.DDm.PAGE_HOME?0:i.value.length;i.setSelectionRange(o,o);break}case s.DDm.PAGE_UP:case s.DDm.PAGE_DOWN:e.preventDefault(),d&&(null===l||void 0===l||l.navigateToPage(t));break;case s.DDm.DOWN:case s.DDm.UP:i||this.onNavigationKeyDown(e,t,()=>{r&&(this.doWhileBlockingAnnouncement(()=>this.eWrapper.focus()),this.announceAriaValue(this.ariaToggleSelection))});break;case s.DDm.ESCAPE:o&&((0,s.K05)(this.listComponent.getGui())&&(e.preventDefault(),(0,s.rYD)(e)),this.hidePicker());break;case s.DDm.ENTER:i?e.preventDefault():this.onEnterKeyDown(e);break;case s.DDm.SPACE:if(n&&!i||e.preventDefault(),!i&&o&&r&&l){const e=l.getLastItemHovered();void 0!==e&&l.toggleListItemSelection(e)}break;case s.DDm.TAB:this.onTabKeyDown();break;case s.DDm.DELETE:r&&!a&&this.onDeleteKeyDown(e);break;default:n||this.buildSearchStringFromKeyboardEvent(e)}}announceAriaValue(e){var t;null===(t=this.ariaAnnounce)||void 0===t||t.announceValue(e,"richSelect")}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),this.searchStrings=void 0,super.destroy()}},Do=(e,t)=>{var i;return null!==(i=null===t||void 0===t?void 0:t(e))&&void 0!==i?i:String(null!==e&&void 0!==e?e:"")};function Eo(e,t){e.then(e=>{const i=e.getGui();null!=i&&t.appendChild(i)})}var Ao={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"ag-input-text-field",ref:"eInput",cls:"ag-rich-select-field-input"},{tag:"span",ref:"eDeselect",cls:"ag-rich-select-deselect-button ag-picker-field-icon",role:"presentation"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},Mo=class extends Po{constructor(e){super((0,n.A)((0,n.A)({},e),{},{template:Ao,agComponents:[s.n1z]})),this.params=e}showPicker(){setTimeout(()=>super.showPicker())}hidePicker(){setTimeout(()=>super.hidePicker())}postConstruct(){super.postConstruct();const{wrapperClassName:e,ariaLabel:t}=this.params;(0,s.nl0)(this.eDisplayField,!1),e&&this.eWrapper.classList.add(e),(0,s.F4t)(this.eWrapper,""),(0,s.PIC)(this.eWrapper,t)}onEnterKeyDown(e){(0,s.rYD)(e),this.isPickerDisplayed?super.onEnterKeyDown(e):(e.preventDefault(),this.showPicker())}},To=class extends s.XQb{constructor(e,t,i){super(),this.eGui=e,this.focusWrapper=t,this.eFocusableComp=i}postConstruct(){this.addManagedElementListeners(this.eGui,{keydown:e=>{switch(e.key){case s.DDm.TAB:e.defaultPrevented||(0,s.rYD)(e);break;case s.DDm.UP:case s.DDm.DOWN:(0,s.rYD)(e);break;case s.DDm.ESCAPE:if((0,s.RTK)(e))return;this.eGui.contains((0,s.UlD)(this.beans))&&(e.preventDefault(),(0,s.rYD)(e),this.focusWrapper.focus())}}});const e="ag-advanced-filter-builder-virtual-list-item-highlight";this.addManagedListeners(this.focusWrapper,{keydown:e=>{if(e.key===s.DDm.ENTER){if((0,s.RTK)(e))return;(0,s.UlD)(this.beans)===this.focusWrapper&&(e.preventDefault(),(0,s.rYD)(e),this.eFocusableComp.getFocusableElement().focus())}},focusin:()=>{this.focusWrapper.classList.add(e)},focusout:t=>{this.focusWrapper.contains(t.relatedTarget)||this.focusWrapper.classList.remove(e)}})}};function ko(e,t){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:e("advancedFilterBuilderAddCondition")},{key:"join",displayValue:e("advancedFilterBuilderAddJoin")}],valueFormatter:e=>{var t;return null==e?"":null!==(t=e.displayValue)&&void 0!==t?t:e.key},pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:"".concat(null!==t&&void 0!==t?t:120,"px"),wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:e("advancedFilterBuilderAddButtonTooltip")}}var Io={tag:"div",cls:"ag-advanced-filter-builder-item-wrapper",role:"presentation",children:[{tag:"div",ref:"eItem",cls:"ag-advanced-filter-builder-item",role:"presentation",children:[{tag:"div",cls:"ag-advanced-filter-builder-item-tree-lines",attrs:{"aria-hidden":"true"},children:[{tag:"div",cls:"ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"}]}]}]},Lo=class extends s.uAl{constructor(e,t){super(Io),this.item=e,this.focusWrapper=t,this.eItem=s.dRA}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc,this.registry=e.registry}postConstruct(){var e;(0,s.v8T)(this.focusWrapper,2);const t=ko(e=>this.advFilterExpSvc.translate(e),null===(e=this.gos.get("advancedFilterBuilderParams"))||void 0===e?void 0:e.addSelectWidth),i=this.createManagedBean(new Mo(t));this.addManagedListeners(i,{fieldPickerValueSelected:e=>{let{value:t}=e;this.dispatchLocalEvent({type:"advancedFilterBuilderAdded",item:this.item,isJoin:"join"===t.key})}}),this.eItem.appendChild(i.getGui()),this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>i.getGui(),getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advFilterExpSvc.translate("advancedFilterBuilderAddButtonTooltip")})),this.createManagedBean(new To(this.getGui(),this.focusWrapper,i)),(0,s.PIC)(this.focusWrapper,this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderItem",[this.advFilterExpSvc.translate("advancedFilterBuilderAddButtonTooltip"),"".concat(this.item.level+1)]))}afterAdd(){}},No=class extends s.uAl{constructor(){super({tag:"div",cls:"ag-advanced-filter-builder-item-condition",role:"presentation"}),this.validationMessage=null}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc}init(e){const{item:t,createPill:i}=e;this.item=t,this.createPill=i,this.filterModel=t.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc(()=>this.destroyBeans([this.eColumnPill,this.eOperatorPill,this.eOperandPill]))}getDragName(){return this.filterModel.colId?this.advFilterExpSvc.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()}getAriaLabel(){return"".concat(this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderFilterItem")," ").concat(this.getDragName())}getValidationMessage(){return this.validationMessage}getFocusableElement(){return this.eColumnPill.getFocusableElement()}setupColumnCondition(e){var t;const i=this.advFilterExpSvc.getColumnDetails(e.colId);this.baseCellDataType=i.baseCellDataType,this.column=i.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:null!==(t=this.getColumnDisplayValue())&&void 0!==t?t:this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:()=>({values:this.advFilterExpSvc.getColumnAutocompleteEntries()}),update:e=>this.setColumnKey(e),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),(0,s.Qmv)(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())}createOperatorPill(){var e;this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:null!==(e=this.getOperatorDisplayValue())&&void 0!==e?e:this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:()=>({values:this.getOperatorAutocompleteEntries()}),update:e=>this.setOperatorKey(e),pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())}createOperandPill(){var e;const{filter:t}=this.filterModel,i=null!==(e="number"===typeof t?(0,s.qph)(t):t)&&void 0!==e?e:"";this.eOperandPill=this.createPill({key:i,valueFormatter:e=>this.advFilterExpSvc.getOperandDisplayValue((0,n.A)((0,n.A)({},this.filterModel),{},{filter:e}),!0),baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:e=>this.setOperand(e),ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())}getColumnKey(){return this.filterModel.colId}getColumnDisplayValue(){return this.advFilterExpSvc.getColumnDisplayValue(this.filterModel)}getOperatorKey(){return this.filterModel.type}getOperatorDisplayValue(){return this.advFilterExpSvc.getOperatorDisplayValue(this.filterModel)}getOperandDisplayValue(){return this.advFilterExpSvc.getOperandDisplayValue(this.filterModel,!0)}hasOperand(){return this.numOperands>0}getOperatorAutocompleteEntries(){return this.column?this.advFilterExpSvc.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]}setColumnKey(e){this.eOperatorPill||this.createOperatorPill();const t=this.advFilterExpSvc.getColumnDetails(e);this.column=t.column;const i=t.baseCellDataType;this.baseCellDataType!==i&&(this.baseCellDataType=i,this.setOperatorKey(void 0),this.eOperatorPill&&((0,s.MwW)(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=e,this.filterModel.filterType=this.baseCellDataType}setOperatorKey(e){const t=this.getNumOperands(e);t!==this.numOperands&&(this.numOperands=t,0===t?this.destroyOperandPill():(this.createOperandPill(),"number"!==this.baseCellDataType&&this.setOperand(""))),this.filterModel.type=e,this.validate()}setOperand(e){let t=e;"number"===this.baseCellDataType&&(t=(0,s.Qmv)(e)?Number(e):""),this.filterModel.filter=t,this.validate()}getNumOperands(e){var t,i;return null!==(t=null===(i=this.advFilterExpSvc.getExpressionOperator(this.baseCellDataType,e))||void 0===i?void 0:i.numOperands)&&void 0!==t?t:0}destroyOperandPill(){var e;delete this.filterModel.filter,null===(e=this.eOperandPill)||void 0===e||e.getGui().remove(),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0}validate(){let e=null;(0,s.Qmv)(this.getColumnKey())?(0,s.Qmv)(this.getOperatorKey())?this.numOperands>0&&!(0,s.Qmv)(this.getOperandDisplayValue())&&(e=this.advFilterExpSvc.translate("advancedFilterBuilderValidationEnterValue")):e=this.advFilterExpSvc.translate("advancedFilterBuilderValidationSelectOption"):e=this.advFilterExpSvc.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!e,e!==this.validationMessage&&(this.validationMessage=e,this.dispatchLocalEvent({type:"advancedFilterBuilderValidChanged"}))}getDefaultColumnDisplayValue(){return this.advFilterExpSvc.translate("advancedFilterBuilderSelectColumn")}getDefaultOptionSelectValue(){return this.advFilterExpSvc.translate("advancedFilterBuilderSelectOption")}},Oo={number:[s.SpC],boolean:[s.stt],object:[s.stt],text:[s.stt],date:[s.RYS],dateString:[s.RYS],dateTime:[s.RYS,e=>e.setIncludeTime(!0)],dateTimeString:[s.RYS,e=>e.setIncludeTime(!0)]},Go={tag:"div",cls:"ag-advanced-filter-builder-pill-wrapper",role:"presentation",children:[{tag:"div",ref:"ePill",cls:"ag-advanced-filter-builder-pill",role:"button",children:[{tag:"span",ref:"eLabel",cls:"ag-advanced-filter-builder-pill-display"}]}]},Bo=class extends s.uAl{constructor(e){super(Go),this.params=e,this.ePill=s.dRA,this.eLabel=s.dRA;const{value:t,valueFormatter:i}=e;this.value=t,this.displayValue=i(t)}wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc}postConstruct(){const{cssClass:e,ariaLabel:t}=this.params;this.ePill.classList.add(e),this.activateTabIndex([this.ePill]),this.eLabel.id="".concat(this.getCompId()),(0,s.TMe)(this.ePill,this.eLabel.id),(0,s.PIC)(this.ePill,t),this.renderValue(),this.addManagedListeners(this.ePill,{click:e=>{e.preventDefault(),this.showEditor()},keydown:e=>{e.key===s.DDm.ENTER&&(e.preventDefault(),(0,s.rYD)(e),this.showEditor())}}),this.addDestroyFunc(()=>this.destroyBean(this.eEditor))}getFocusableElement(){return this.ePill}showEditor(){if(this.eEditor)return;(0,s.nl0)(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);const e=this.eEditor.getGui();this.eEditor.addManagedElementListeners(e,{keydown:e=>{switch(e.key){case s.DDm.ENTER:e.preventDefault(),(0,s.rYD)(e),this.updateValue(!0);break;case s.DDm.ESCAPE:e.preventDefault(),(0,s.rYD)(e),this.hideEditor(!0)}},focusout:()=>this.updateValue(!1)}),this.getGui().appendChild(e),this.eEditor.getFocusableElement().focus()}createEditorComp(e){const[t,i]=Oo[e],o=this.createBean(new t);return null===i||void 0===i||i(o),o}hideEditor(e){const{eEditor:t}=this;t&&(this.eEditor=void 0,t.getGui().remove(),this.destroyBean(t),(0,s.nl0)(this.ePill,!0),e&&this.ePill.focus())}renderValue(){let e;const{displayValue:t,eLabel:i}=this,{classList:o}=i;o.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),(0,s.Qmv)(t)?"number"===this.params.type?(e=t,o.add("ag-advanced-filter-builder-value-number")):(e='"'.concat(t,'"'),o.add("ag-advanced-filter-builder-value-text")):(e=this.advFilterExpSvc.translate("advancedFilterBuilderEnterValue"),o.add("ag-advanced-filter-builder-value-empty")),i.textContent=e}updateValue(e){var t;if(!this.eEditor)return;const i=null!==(t=this.eEditor.getValue())&&void 0!==t?t:"";this.dispatchLocalEvent({type:"fieldValueChanged",value:i}),this.value=i,this.displayValue=this.params.valueFormatter(i),this.renderValue(),this.hideEditor(e)}},Vo=class extends s.uAl{wireBeans(e){this.advFilterExpSvc=e.advFilterExpSvc}constructor(){super({tag:"div",cls:"ag-advanced-filter-builder-item-condition",role:"presentation"})}init(e){const{item:t,createPill:i}=e,o=t.filterModel;this.filterModel=o,this.ePill=i({key:o.type,displayValue:this.advFilterExpSvc.parseJoinOperator(o),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:()=>({values:this.advFilterExpSvc.getJoinOperatorAutocompleteEntries()}),update:e=>o.type=e,pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc(()=>this.destroyBean(this.ePill))}getDragName(){return this.advFilterExpSvc.parseJoinOperator(this.filterModel)}getAriaLabel(){return"".concat(this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderGroupItem")," ").concat(this.getDragName())}getValidationMessage(){return null}getFocusableElement(){return this.ePill.getFocusableElement()}},Ho={tag:"div",cls:"ag-picker-field ag-advanced-filter-builder-pill-wrapper",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display ag-advanced-filter-builder-pill-display"},{tag:"ag-input-text-field",ref:"eInput",cls:"ag-rich-select-field-input"},{tag:"span",ref:"eDeselect",cls:"ag-rich-select-deselect-button ag-picker-field-icon",role:"presentation"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},zo=class extends Po{constructor(e){super((0,n.A)((0,n.A)({},e),{},{template:Ho,agComponents:[s.n1z]})),this.params=e}getFocusableElement(){return this.eWrapper}showPicker(){setTimeout(()=>super.showPicker())}hidePicker(){setTimeout(()=>super.hidePicker())}postConstruct(){super.postConstruct();const{wrapperClassName:e,ariaLabel:t}=this.params;this.eWrapper.classList.add(e),(0,s.F4t)(this.eWrapper,""),(0,s.PIC)(this.eWrapper,t)}createPickerComponent(){if(!this.values){var e;const{values:t}=this.params.getEditorParams();this.values=t;const i=this.value.key,o=null!==(e=t.find(e=>e.key===i))&&void 0!==e?e:{key:i,displayValue:this.value.displayValue};this.value=o}return super.createPickerComponent()}onEnterKeyDown(e){(0,s.rYD)(e),this.isPickerDisplayed?super.onEnterKeyDown(e):(e.preventDefault(),this.showPicker())}},Wo={tag:"div",cls:"ag-advanced-filter-builder-item-wrapper",role:"presentation",children:[{tag:"div",cls:"ag-advanced-filter-builder-item",role:"presentation",children:[{tag:"div",ref:"eTreeLines",cls:"ag-advanced-filter-builder-item-tree-lines",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eValidation",cls:"ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid",attrs:{"aria-hidden":"true"}}]},{tag:"div",ref:"eButtons",cls:"ag-advanced-filter-builder-item-buttons",children:[{tag:"span",ref:"eMoveUpButton",cls:"ag-advanced-filter-builder-item-button",role:"button"},{tag:"span",ref:"eMoveDownButton",cls:"ag-advanced-filter-builder-item-button",role:"button"},{tag:"div",ref:"eAddButton",role:"presentation"},{tag:"span",ref:"eRemoveButton",cls:"ag-advanced-filter-builder-item-button",role:"button"}]}]},Uo=class extends s.aJZ{constructor(e,t,i){super(Wo),this.item=e,this.dragFeature=t,this.focusWrapper=i,this.eTreeLines=s.dRA,this.eDragHandle=s.dRA,this.eButtons=s.dRA,this.eValidation=s.dRA,this.eMoveUpButton=s.dRA,this.eMoveDownButton=s.dRA,this.eAddButton=s.dRA,this.eRemoveButton=s.dRA,this.moveUpDisabled=!1,this.moveDownDisabled=!1}wireBeans(e){this.dragAndDrop=e.dragAndDrop,this.advFilterExpSvc=e.advFilterExpSvc,this.registry=e.registry}postConstruct(){const{filterModel:e,level:t,showMove:i}=this.item,o="join"===e.filterType;if(this.ePillWrapper=this.createManagedBean(o?new Vo:new No),this.ePillWrapper.init({item:this.item,createPill:e=>this.createPill(e)}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),0===t){const e=(0,s.UCw)({tag:"div",cls:"ag-advanced-filter-builder-item-tree-line-vertical-bottom ag-advanced-filter-builder-item-tree-line-root"});this.eTreeLines.appendChild(e),(0,s.nl0)(this.eDragHandle,!1),(0,s.nl0)(this.eButtons,!1),(0,s.oAJ)(this.focusWrapper,!0)}else this.setupTreeLines(t),this.eDragHandle.appendChild((0,s.asF)("advancedFilterBuilderDrag",this.beans)),this.setupValidation(),this.setupMoveButtons(i),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();(0,s.v8T)(this.focusWrapper,t+1),this.initialiseTabGuard({}),this.createManagedBean(new To(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListeners(this.ePillWrapper,{advancedFilterBuilderValueChanged:()=>this.dispatchLocalEvent({type:"advancedFilterBuilderValueChanged"}),advancedFilterBuilderValidChanged:()=>this.updateValidity()})}setState(e){const{level:t}=this.item;if(0===t)return;const{showMove:i}=this.item,{disableMoveUp:o,disableMoveDown:n,treeLines:r,showStartTreeLine:a}=e;var l,d;(this.updateTreeLines(r,a),this.updateAriaExpanded(),i)&&(this.moveUpDisabled=!!o,this.moveDownDisabled=!!n,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",o),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",n),(0,s.TGw)(this.eMoveUpButton,!!o),(0,s.TGw)(this.eMoveDownButton,!!n),null===(l=this.moveUpTooltipFeature)||void 0===l||l.refreshTooltip(),null===(d=this.moveDownTooltipFeature)||void 0===d||d.refreshTooltip())}focusMoveButton(e){(e?this.eMoveUpButton:this.eMoveDownButton).focus()}afterAdd(){this.ePillWrapper.getFocusableElement().focus()}setupTreeLines(e){for(let t=0;t<e;t++)this.eTreeLines.appendChild((0,s.UCw)({tag:"div"}))}updateTreeLines(e,t){const i=e.length-1,{children:o}=this.eTreeLines;for(let s=0;s<i;s++){const t=o.item(s);t&&t.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!e[s])}const n=o.item(i);if(n){n.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");const t=e[i];n.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",t),n.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!t)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",t)}setupValidation(){this.eValidation.appendChild((0,s.asF)("advancedFilterBuilderInvalid",this.beans)),this.validationTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eValidation,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.ePillWrapper.getValidationMessage(),getTooltipShowDelayOverride:()=>1e3})),this.updateValidity()}setupAddButton(){var e;const t=ko(e=>this.advFilterExpSvc.translate(e),null===(e=this.gos.get("advancedFilterBuilderParams"))||void 0===e?void 0:e.addSelectWidth),i=this.createManagedBean(new Mo(t));this.addManagedListeners(i,{fieldPickerValueSelected:e=>{let{value:t}=e;return this.dispatchLocalEvent({type:"advancedFilterBuilderAdded",item:this.item,isJoin:"join"===t.key})}}),this.eAddButton.appendChild(i.getGui()),this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eAddButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advFilterExpSvc.translate("advancedFilterBuilderAddButtonTooltip")}))}setupRemoveButton(){this.eRemoveButton.appendChild((0,s.asF)("advancedFilterBuilderRemove",this.beans)),this.addManagedListeners(this.eRemoveButton,{click:()=>this.removeItem(),keydown:e=>{e.key===s.DDm.ENTER&&(e.preventDefault(),(0,s.rYD)(e),this.removeItem())}}),this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eRemoveButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advFilterExpSvc.translate("advancedFilterBuilderRemoveButtonTooltip")})),(0,s.PIC)(this.eRemoveButton,this.advFilterExpSvc.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])}setupMoveButtons(e){e?(this.eMoveUpButton.appendChild((0,s.asF)("advancedFilterBuilderMoveUp",this.beans)),this.addManagedListeners(this.eMoveUpButton,{click:()=>this.moveItem(!0),keydown:e=>{e.key===s.DDm.ENTER&&(e.preventDefault(),(0,s.rYD)(e),this.moveItem(!0))}}),this.moveUpTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eMoveUpButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveUpDisabled?null:this.advFilterExpSvc.translate("advancedFilterBuilderMoveUpButtonTooltip")})),(0,s.PIC)(this.eMoveUpButton,this.advFilterExpSvc.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild((0,s.asF)("advancedFilterBuilderMoveDown",this.beans)),this.addManagedListeners(this.eMoveDownButton,{click:()=>this.moveItem(!1),keydown:e=>{e.key===s.DDm.ENTER&&(e.preventDefault(),(0,s.rYD)(e),this.moveItem(!1))}}),this.moveDownTooltipFeature=this.createOptionalManagedBean(this.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eMoveDownButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.moveDownDisabled?null:this.advFilterExpSvc.translate("advancedFilterBuilderMoveDownButtonTooltip")})),(0,s.PIC)(this.eMoveDownButton,this.advFilterExpSvc.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):((0,s.nl0)(this.eMoveUpButton,!1),(0,s.nl0)(this.eMoveDownButton,!1))}updateValidity(){var e;(0,s.KwK)(this.eValidation,!this.item.valid),null===(e=this.validationTooltipFeature)||void 0===e||e.refreshTooltip(),this.updateAriaLabel()}createPill(e){const{key:t,cssClass:i,update:o,ariaLabel:n}=e,s=e=>{null!=e&&(o(e),this.dispatchLocalEvent({type:"advancedFilterBuilderValueChanged"}))};if(e.isSelect){var r,a;const{getEditorParams:o,pickerAriaLabelKey:l,pickerAriaLabelValue:d,displayValue:c}=e,u=this.gos.get("advancedFilterBuilderParams"),h="".concat(null!==(r=null===u||void 0===u?void 0:u.pillSelectMinWidth)&&void 0!==r?r:140,"px"),p="".concat(null!==(a=null===u||void 0===u?void 0:u.pillSelectMaxWidth)&&void 0!==a?a:200,"px"),g=this.createBean(new zo({pickerAriaLabelKey:l,pickerAriaLabelValue:d,pickerType:"ag-list",value:{key:t,displayValue:c},valueFormatter:e=>{var t;return null==e?"":null!==(t=e.displayValue)&&void 0!==t?t:e.key},variableWidth:!0,minPickerWidth:h,maxPickerWidth:p,getEditorParams:o,wrapperClassName:i,ariaLabel:n,pickerIcon:"advancedFilterBuilderSelectOpen"}));return this.addManagedListeners(g,{fieldPickerValueSelected:e=>{let{value:t}=e;return s(null===t||void 0===t?void 0:t.key)}}),g}{const{baseCellDataType:o,valueFormatter:r}=e,a=this.createBean(new Bo({value:t,valueFormatter:r,cssClass:i,type:o,ariaLabel:n}));return this.addManagedListeners(a,{fieldValueChanged:e=>{let{value:t}=e;return s(t)}}),a}}setupDragging(){const e={type:s.qRA.AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:()=>this.ePillWrapper.getDragName(),getDefaultIconName:()=>"notAllowed",getDragItem:()=>({}),onDragStarted:()=>this.dragFeature.dispatchLocalEvent({type:"advancedFilterBuilderDragStarted",item:this.item}),onDragStopped:()=>this.dragFeature.dispatchLocalEvent({type:"advancedFilterBuilderDragEnded"})};this.dragAndDrop.addDragSource(e,!0),this.addDestroyFunc(()=>this.dragAndDrop.removeDragSource(e))}updateAriaLabel(){const e=this.ePillWrapper.getAriaLabel(),t="".concat(this.item.level+1),i=this.ePillWrapper.getValidationMessage();let o;o=i?this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderItemValidation",[e,t,i]):this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderItem",[e,t]),(0,s.PIC)(this.focusWrapper,o)}updateAriaExpanded(){(0,s.WnW)(this.focusWrapper);const{filterModel:e}=this.item;"join"===(null===e||void 0===e?void 0:e.filterType)&&e.conditions.length&&(0,s.oAJ)(this.focusWrapper,!0)}removeItem(){this.dispatchLocalEvent({type:"advancedFilterBuilderRemoved",item:this.item})}moveItem(e){this.dispatchLocalEvent({type:"advancedFilterBuilderMoved",item:this.item,backwards:e})}},jo={apply:"advancedFilterBuilderApply",clear:"advancedFilterBuilderClear",cancel:"advancedFilterBuilderCancel",reset:"advancedFilterBuilderReset"},_o={tag:"div",cls:"ag-advanced-filter-builder",role:"presentation",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eList",cls:"ag-advanced-filter-builder-list",role:"presentation"}]},Ko=class extends s.uAl{constructor(){super(_o),this.eList=s.dRA}wireBeans(e){this.filterManager=e.filterManager,this.advancedFilter=e.advancedFilter,this.advFilterExpSvc=e.advFilterExpSvc}postConstruct(){const e=this.gos.get("advancedFilterBuilderParams");this.params=(0,n.A)({buttons:["apply","cancel"]},e),this.addManagedPropertyListener("advancedFilterBuilderParams",e=>{var t;let{currentValue:i}=e;this.params.showMoveButtons=!(null===i||void 0===i||!i.showMoveButtons),this.params.buttons=null!==(t=null===i||void 0===i?void 0:i.buttons)&&void 0!==t?t:["apply","cancel"],this.refreshList(!1)}),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new go(this,this.virtualList)),this.resetButtonsPanel(this.params.buttons)}refresh(){const e=this.virtualList;let t=e.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),null!=t&&(e.getComponentAt(t)||(t=0),e.focusRow(t))}getNumItems(){return this.items.length}moveItem(e,t){t&&e&&this.moveItemToIndex(e,t.rowIndex,t.position)}afterGuiAttached(){this.virtualList.awaitStable(()=>this.virtualList.focusRow(0))}setupVirtualList(){const e=this.virtualList=this.createManagedBean(new Ji({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advFilterExpSvc.translate("ariaAdvancedFilterBuilderList"),moveItemCallback:this.virtualListMoveItemCallback.bind(this)}));e.setComponentCreator(this.createItemComponent.bind(this)),e.setComponentUpdater(this.updateItemComponent.bind(this)),e.setRowHeight(40),this.eList.appendChild(e.getGui()),e.setModel({getRowCount:()=>{var e;return(null===(e=this.items)||void 0===e?void 0:e.length)||0},getRow:e=>this.items[e],areRowsEqual:(e,t)=>e===t}),this.buildList(),e.refresh()}resetButtonsPanel(e){const t=e&&e.length>0;let i=this.eButtons;if(t){const t=e.map(e=>({type:e,label:this.advFilterExpSvc.translate(jo[e])}));if(!i){i=this.createBean(new s.Cq2),this.appendChild(i.getGui());const e=e=>t=>{let{event:i}=t;this.updateModel(e),this.afterAction(e,i)};i.addManagedListeners(i,{apply:e("apply"),clear:e("clear"),reset:e("reset"),cancel:e("cancel")}),this.eButtons=i}i.updateButtons(t);const o=i.getApplyButton();if(o){const e=e=>this.toggleCss("ag-advanced-filter-builder-validation",e);this.addManagedElementListeners(o,{mouseenter:()=>e(!0),mouseleave:()=>e(!1)})}}else i&&((0,s.MwW)(i.getGui()),this.eButtons=this.destroyBean(i))}updateModel(e){var t,i;switch(e){case"apply":this.advancedFilter.setModel(this.filterModel),null===(t=this.filterManager)||void 0===t||t.onFilterChanged({source:"advancedFilter"});break;case"reset":this.advancedFilter.setModel(null),null===(i=this.filterManager)||void 0===i||i.onFilterChanged({source:"advancedFilter"});break;case"cancel":break;case"clear":this.filterModel=this.formatFilterModel(null),this.refreshList(!1)}}afterAction(e,t){switch(e){case"apply":null===t||void 0===t||t.preventDefault(),this.close();break;case"reset":case"cancel":this.close()}}removeItemFromParent(e){const t=e.parent.conditions.indexOf(e.filterModel);return e.parent.conditions.splice(t,1),t}moveItemToIndex(e,t,i){var o;const n=this.items[t],s="join"===(null===(o=n.filterModel)||void 0===o?void 0:o.filterType)&&"bottom"===i,r=s?n.filterModel:n.parent;if(!r)return;if(this.isChildOrSelf(r,e.filterModel)||n===e)return;let a;this.removeItemFromParent(e),s?a=0:(a=r.conditions.indexOf(n.filterModel),-1===a?a=r.conditions.length:"bottom"===i&&(a+=1)),r.conditions.splice(a,0,e.filterModel),this.refreshList(!1)}isChildOrSelf(e,t){return e===t||"join"===t.filterType&&t.conditions.some(t=>this.isChildOrSelf(e,t))}setupFilterModel(){const e=this.formatFilterModel(this.advancedFilter.getModel());return this.stringifiedModel=JSON.stringify(e),e}formatFilterModel(e){return"join"!==(e=null!==e&&void 0!==e?e:{filterType:"join",type:"AND",conditions:[]}).filterType&&(e={filterType:"join",type:"AND",conditions:[e]}),e}buildList(){const e=(t,i,o,n)=>{if(i.push({filterModel:t,level:o,parent:n,valid:!0,showMove:this.params.showMoveButtons}),"join"===t.filterType){for(const n of t.conditions)e(n,i,o+1,t);0===o&&i.push({filterModel:null,level:o+1,parent:t,valid:!0})}};this.items=[],e(this.filterModel,this.items,0)}refreshList(e){if(!e){const e=[];for(const t of this.items)t.valid||e.push(t.filterModel);if(this.buildList(),e.length)for(const t of this.items)t.filterModel&&e.includes(t.filterModel)&&(t.valid=!1)}this.virtualList.refresh(e),this.validate()}updateItemComponent(e,t){const i=this.items.indexOf(e),o=(e,t)=>{const i=this.items.find(t=>t.filterModel===e),n=null===i||void 0===i?void 0:i.parent;if(n){const{conditions:i}=n;o(n,t),t.push(i[i.length-1]===e)}},n=[],{filterModel:s}=e;s&&(o(s,n),n[0]=!1);const r="join"===(null===s||void 0===s?void 0:s.filterType)&&!!s.conditions.length;t.setState({disableMoveUp:1===i,disableMoveDown:!this.canMoveDown(e,i),treeLines:n,showStartTreeLine:r})}createItemComponent(e,t){const i=this.createBean(e.filterModel?new Uo(e,this.dragFeature,t):new Lo(e,t));return i.addManagedListeners(i,{advancedFilterBuilderRemoved:e=>{let{item:t}=e;return this.removeItem(t)},advancedFilterBuilderValueChanged:()=>this.validate(),advancedFilterBuilderAdded:e=>{let{item:t,isJoin:i}=e;return this.addItem(t,i)},advancedFilterBuilderMoved:e=>{let{item:t,backwards:i}=e;return this.moveItemUpDown(t,i)}}),i instanceof Uo&&this.updateItemComponent(e,i),i}addItem(e,t){const{parent:i,level:o,filterModel:n}=e,s="join"===(null===n||void 0===n?void 0:n.filterType),r=t?{filterType:"join",type:"AND",conditions:[]}:{},a=s?n:i;let l=s?0:a.conditions.indexOf(n);l>=0?(s||(l+=1),a.conditions.splice(l,0,r)):a.conditions.push(r);let d=this.items.indexOf(e);const c=d>=0;if(c){e.filterModel&&d++;const i=[{filterModel:r,level:s?o+1:o,parent:a,valid:t,showMove:this.params.showMoveButtons}];this.items.splice(d,0,...i)}var u;(this.refreshList(c),c)&&(null===(u=this.virtualList.getComponentAt(d))||void 0===u||u.afterAdd())}removeItem(e){var t;const i=e.parent,{filterModel:o}=e,n=i.conditions.indexOf(o);i.conditions.splice(n,1);const s="join"===(null===(t=e.filterModel)||void 0===t?void 0:t.filterType),r=this.items.indexOf(e),a=!s&&r>=0;a&&this.items.splice(r,1),this.refreshList(a),r>=0&&this.virtualList.focusRow(r)}moveItemUpDown(e,t,i){const o=this.items.indexOf(e),n=t?o-1:o+1;if(0===n||!t&&!this.canMoveDown(e,o))return;const s=this.items[n],r=this.removeItemFromParent(e),{level:a,filterModel:l,parent:d}=e,{level:c,filterModel:u,parent:h}=s;if(t)if(c===a&&"join"===u.filterType)u.conditions.push(l);else if(c<=a){const e=h.conditions.indexOf(u);h.conditions.splice(e,0,l)}else{d.conditions[r-1].conditions.push(l)}else if(c===a)if("join"===u.filterType)u.conditions.splice(0,0,l);else{const e=h.conditions.indexOf(u);h.conditions.splice(e+1,0,l)}else if(r<d.conditions.length)d.conditions.splice(r+1,0,l);else{const e=this.items.find(e=>e.filterModel===d),t=e.parent.conditions.indexOf(e.filterModel)+1;e.parent.conditions.splice(t,0,l)}this.refreshList(!1);const p=this.items.findIndex(e=>{let{filterModel:t}=e;return t===l});if(p<0)return;const g=this.virtualList.getComponentAt(p);g instanceof Uo&&(i||g.focusMoveButton(t))}virtualListMoveItemCallback(e,t){const i=e.item,o=this.items.indexOf(i);o<=0||o===this.items.length-1||t&&1===o||!t&&!this.canMoveDown(i,o)||(this.moveItemUpDown(i,t,!0),this.virtualList.focusRow(o+(t?-1:1)))}canMoveDown(e,t){return!(1===e.level&&t===this.items.length-2||1===e.level&&e.parent.conditions[e.parent.conditions.length-1]===e.filterModel)}close(){this.advancedFilter.getCtrl().toggleFilterBuilder({source:"ui"})}validate(){var e;let t=this.items.every(e=>{let{valid:t}=e;return t}),i=null;t?(t=JSON.stringify(this.filterModel)!==this.stringifiedModel,t||(i=this.advFilterExpSvc.translate("advancedFilterBuilderValidationAlreadyApplied"))):i=this.advFilterExpSvc.translate("advancedFilterBuilderValidationIncomplete"),null===(e=this.eButtons)||void 0===e||e.updateValidity(t,i)}validateItems(){const e=e=>{e.type=void 0},t=e=>{delete e.filter};for(const i of this.items){if(!i.valid||!i.filterModel||"join"===i.filterModel.filterType)continue;const{filterModel:o}=i,{colId:n}=o,r=this.advFilterExpSvc.getColumnAutocompleteEntries().find(e=>{let{key:t}=e;return t===n}),a=this.advFilterExpSvc.getColumnDetails(o.colId);if(!r||!a.column){i.valid=!1,o.colId=void 0,e(o),t(o);continue}const l=this.advFilterExpSvc.getDataTypeExpressionOperator(a.baseCellDataType).operators[o.type];l?l.numOperands>0&&!(0,s.Qmv)(o.filter)&&(i.valid=!1):(i.valid=!1,e(o),t(o))}}},Yo=class extends s.XQb{constructor(e){super(),this.enabled=e}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.popupSvc=e.popupSvc,this.advFilterExpSvc=e.advFilterExpSvc,this.environment=e.environment}postConstruct(){this.hasAdvancedFilterParent=!!this.gos.get("advancedFilterParent"),this.ctrlsSvc.whenReady(this,()=>this.setAdvancedFilterComp()),this.addManagedEventListeners({advancedFilterEnabledChanged:e=>{let{enabled:t}=e;return this.onEnabledChanged(t)}}),this.addManagedPropertyListener("advancedFilterParent",()=>this.updateComps()),this.addManagedPropertyListener("advancedFilterBuilderParams",e=>{var t,i,o,n,s;(null===(t=e.currentValue)||void 0===t?void 0:t.suppressFullScreenButton)!==(null===(i=e.previousValue)||void 0===i?void 0:i.suppressFullScreenButton)&&(null===(o=this.eBuilderDialog)||void 0===o||o.setMaximizable(null===(n=null===(s=e.currentValue)||void 0===s?void 0:s.suppressFullScreenButton)||void 0===n||n))}),this.addDestroyFunc(()=>{var e;this.destroyAdvancedFilterComp(),this.destroyBean(this.eBuilderComp),null!==(e=this.eBuilderDialog)&&void 0!==e&&e.isAlive()&&this.destroyBean(this.eBuilderDialog)})}setupHeaderComp(e){var t;this.eHeaderComp&&(null===(t=this.eHeaderComp)||void 0===t||t.getGui().remove(),this.destroyBean(this.eHeaderComp));this.eHeaderComp=this.createManagedBean(new ho(this.enabled&&!this.hasAdvancedFilterParent)),e.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())}focusHeaderComp(){return!!this.eHeaderComp&&(this.eHeaderComp.getFocusableElement().focus(),!0)}refreshComp(){var e,t;null===(e=this.eFilterComp)||void 0===e||e.refresh(),null===(t=this.eHeaderComp)||void 0===t||t.refresh()}refreshBuilderComp(){var e;null===(e=this.eBuilderComp)||void 0===e||e.refresh()}getHeaderHeight(){var e,t;return null!==(e=null===(t=this.eHeaderComp)||void 0===t?void 0:t.getHeight())&&void 0!==e?e:0}setInputDisabled(e){var t,i;null===(t=this.eFilterComp)||void 0===t||t.setInputDisabled(e),null===(i=this.eHeaderComp)||void 0===i||i.setInputDisabled(e)}toggleFilterBuilder(e){const{source:t,force:i,eventSource:o}=e;if(i&&this.eBuilderDialog||!1===i&&!this.eBuilderDialog)return;if(this.eBuilderDialog)return this.builderDestroySource=t,void this.destroyBean(this.eBuilderDialog);this.setInputDisabled(!0);const{width:s,height:r,minWidth:a}=this.getBuilderDialogSize(),{suppressFullScreenButton:l}=(0,n.A)({suppressFullScreenButton:!1},this.gos.get("advancedFilterBuilderParams"));this.eBuilderComp=this.createBean(new Ko),this.eBuilderDialog=this.createBean(new Zi({title:this.advFilterExpSvc.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:s,height:r,resizable:!0,movable:!0,maximizable:!l,centered:!0,closable:!0,minWidth:a,afterGuiAttached:()=>{var e;return null===(e=this.eBuilderComp)||void 0===e?void 0:e.afterGuiAttached()},postProcessPopupParams:{type:"advancedFilterBuilder",eventSource:o}})),this.dispatchFilterBuilderVisibleChangedEvent(t,!0),this.eBuilderDialog.addEventListener("destroyed",()=>{var e;this.destroyBean(this.eBuilderComp),this.eBuilderComp=void 0,this.eBuilderDialog=void 0,this.setInputDisabled(!1),this.dispatchLocalEvent({type:"advancedFilterBuilderClosed"}),this.dispatchFilterBuilderVisibleChangedEvent(null!==(e=this.builderDestroySource)&&void 0!==e?e:"ui",!1),this.builderDestroySource=void 0})}dispatchFilterBuilderVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"advancedFilterBuilderVisibleChanged",source:e,visible:t})}getBuilderDialogSize(){var e,t;const i=null!==(e=null===(t=this.gos.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.minWidth)&&void 0!==e?e:500,o=this.popupSvc.getPopupParent(),n=Math.round((0,s.jPA)(o))-2,r=Math.round(.75*(0,s.UrH)(o))-2;return{width:Math.min(Math.max(700,i),n),height:Math.min(600,r),minWidth:i}}onEnabledChanged(e){this.enabled=e,this.updateComps()}updateComps(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}setAdvancedFilterComp(){if(this.destroyAdvancedFilterComp(),!this.enabled)return;const e=this.gos.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!e,e){const t=this.createBean(new co),i=t.getGui();this.environment.applyThemeClasses(i),i.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),e.appendChild(i),this.eFilterComp=t}}setHeaderCompEnabled(){var e;null===(e=this.eHeaderComp)||void 0===e||e.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)}destroyAdvancedFilterComp(){this.eFilterComp&&((0,s.MwW)(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))}},qo=class{constructor(e){this.params=e,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}parseExpression(e){this.operators.push(""),this.operatorStartPositions.push(e),this.operatorEndPositions.push(void 0);const{expression:t}=this.params;for(;e<t.length;){const i=t[e];if(" "===i){if(this.parseOperator(e-1))return this.activeOperator++,e-1;this.operators[this.activeOperator]+=i}else this.operators[this.activeOperator]+=i;e++}return this.parseOperator(e-1),e}isValid(){return!this.validationError&&(!this.operators.length||!!this.parsedOperator)}getValidationError(){return this.validationError}getFunction(){return"OR"===this.parsedOperator?"||":"&&"}getModel(){return"OR"===this.parsedOperator?"OR":"AND"}getAutocompleteListParams(e,t){let i;if(null==t)i="";else{const o=this.operators[t],n=this.operatorEndPositions[t];i=Ni(o,e,null==n?this.params.expression.length:n+1)}let o=this.params.advFilterExpSvc.getJoinOperatorAutocompleteEntries();return(t||null==t&&this.activeOperator)&&(o=o.filter(e=>{let{key:t}=e;return t===this.parsedOperator})),this.params.advFilterExpSvc.generateAutocompleteListParams(o,"join",i)}updateExpression(e,t,i){var o,n;let{expression:s}=this.params;const r=null!==(o=t.displayValue)&&void 0!==o?o:t.key;if(0===i)for(let a=this.operatorEndPositions.length-1;a>0;a--){const e=this.operatorEndPositions[a];null!=e&&(s=Oi(s,this.operatorStartPositions[a],e,r).updatedValue)}return Oi(s,this.operatorStartPositions.length>i?this.operatorStartPositions[i]:e,null!==(n=this.operatorEndPositions.length>i?this.operatorEndPositions[i]:void 0)&&void 0!==n?n:Gi(s,e,!0).endPosition,r,!0)}getNumOperators(){return this.operators.length}getLastOperatorEndPosition(){return this.operatorEndPositions[this.operatorEndPositions.length-1]}parseOperator(e){const t=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",i=this.params.advFilterExpSvc.getExpressionJoinOperators(),o=_i(t,i,e=>e);if(o){this.operatorEndPositions[this.activeOperator]=e;const n=i[o];if(this.activeOperator){if(o!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advFilterExpSvc.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:e-t.length+1,endPosition:e}),!1}else this.parsedOperator=o;return t!==n&&(Bi(this.params,t,n,e),this.operators[this.activeOperator]=n),!0}return null!==o&&(this.validationError||(this.validationError={message:this.params.advFilterExpSvc.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:e-t.length+1,endPosition:e}),!0)}},Qo=class e{constructor(e,t){this.params=e,this.startPosition=t,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new qo(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}parseExpression(){let t=this.startPosition;const{expression:i}=this.params;for(;t<i.length;){const o=i[t];if("("!==o||this.expectingOperator){if(")"===o)return this.endPosition=t-1,0===this.startPosition&&(this.extraEndBracket=!0),t;if(" "===o);else if(this.expectingExpression){const e=new ji(this.params,t);t=e.parseExpression(),this.expressionParsers.push(e),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(t=this.operatorParser.parseExpression(t),this.expectingOperator=!1,this.expectingExpression=!0)}else{const i=new e(this.params,t+1);t=i.parseExpression(),this.expressionParsers.push(i),this.expectingExpression=!1,this.expectingOperator=!0}t++}return this.startPosition>0&&(this.missingEndBracket=!0),t}isValid(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every(e=>e.isValid())}getValidationError(){const e=this.operatorParser.getValidationError();for(let i=0;i<this.expressionParsers.length;i++){const t=this.expressionParsers[i].getValidationError();if(t)return e&&e.startPosition<t.startPosition?e:t}if(e)return e;if(this.extraEndBracket)return{message:this.params.advFilterExpSvc.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1};let t;return this.expressionParsers.length===this.operatorParser.getNumOperators()?t="advancedFilterValidationMissingCondition":this.missingEndBracket&&(t="advancedFilterValidationMissingEndBracket"),t?{message:this.params.advFilterExpSvc.translate(t),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null}getFunction(e){const t=this.operatorParser.getFunction(),i=this.expressionParsers.map(t=>t.getFunction(e)),o="&&"===t?"every":"some";return(e,t,n)=>i[o](i=>i(e,t,n))}getAutocompleteListParams(e){if(null!=this.endPosition&&e>this.endPosition+1)return;if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();const t=this.getExpressionParserIndex(e);if(null==t)return"("===this.params.expression[e]?{enabled:!1}:this.getColumnAutocompleteListParams();const i=this.expressionParsers[t].getAutocompleteListParams(e);if(!i){if(t<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(e,t);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){const t=this.operatorParser.getLastOperatorEndPosition();return null==t||e<=t+1?this.operatorParser.getAutocompleteListParams(e,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return")"===this.params.expression[e-1]?{enabled:!1}:this.operatorParser.getAutocompleteListParams(e)}return i}updateExpression(e,t,i){const o=this.params.expression,n=this.getExpressionParserIndex(e);if(null==n){var s;const e="column"===i?this.params.advFilterExpSvc.getColumnValue(t):null!==(s=t.displayValue)&&void 0!==s?s:t.key;return Oi(o,this.startPosition,this.startPosition,e,!0)}const r=this.expressionParsers[n].updateExpression(e,t,i);return null==r?"column"===i?Oi(o,e,o.length-1,this.params.advFilterExpSvc.getColumnValue(t),!0):null!=this.endPosition&&e>this.endPosition+1?null:this.operatorParser.updateExpression(e,t,n):r}getModel(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map(e=>e.getModel())}:this.expressionParsers[0].getModel()}getColumnAutocompleteListParams(){return this.params.advFilterExpSvc.generateAutocompleteListParams(this.params.advFilterExpSvc.getColumnAutocompleteEntries(),"column","")}getExpressionParserIndex(e){let t;for(let i=0;i<this.expressionParsers.length;i++){if(this.expressionParsers[i].startPosition>e)break;t=i}return t}},Xo=class{constructor(e){this.params=e,this.valid=!1}parseExpression(){this.joinExpressionParser=new Qo(this.params,0);const e=this.joinExpressionParser.parseExpression();return this.valid=e>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression}isValid(){return this.valid}getValidationMessage(){const e=this.joinExpressionParser.getValidationError();if(!e)return null;const{message:t,startPosition:i,endPosition:o}=e;return i<this.params.expression.length?this.params.advFilterExpSvc.translate("advancedFilterValidationMessage",[t,this.params.expression.slice(i,o+1).trim()]):this.params.advFilterExpSvc.translate("advancedFilterValidationMessageAtEnd",[t])}getFunction(){const e=this.createFunctionParams();return{expressionFunction:this.joinExpressionParser.getFunction(e),params:e}}getAutocompleteListParams(e){var t;return null!==(t=this.joinExpressionParser.getAutocompleteListParams(e))&&void 0!==t?t:{enabled:!1}}updateExpression(e,t,i){return this.joinExpressionParser.updateExpression(e,t,i)}getModel(){return this.isValid()?this.joinExpressionParser.getModel():null}createFunctionParams(){return{operands:[],operators:[],evaluatorParams:[]}}},$o=class extends s.XQb{constructor(){super(...arguments),this.beanName="advancedFilter",this.appliedExpression=null,this.expression=null,this.isValid=!0}wireBeans(e){this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.dataTypeSvc=e.dataTypeSvc,this.advFilterExpSvc=e.advFilterExpSvc,this.filterValueSvc=e.filterValueSvc,this.filterManager=e.filterManager}postConstruct(){this.setEnabled(this.gos.get("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new Yo(this.enabled)),this.expressionProxy={getValue:(e,t)=>{const i=this.colModel.getColDefCol(e);return i?this.filterValueSvc.getValue(i,t):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",e=>this.setEnabled(!!e.currentValue)),this.addManagedEventListeners({newColumnsLoaded:e=>this.onNewColumnsLoaded(e)}),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",()=>{var e;this.updateValidity()&&(null===(e=this.filterManager)||void 0===e||e.onFilterChanged({source:"advancedFilter"}))})}isEnabled(){return this.enabled}isFilterPresent(){return!!this.expressionFunction}doesFilterPass(e){return this.expressionFunction(this.expressionProxy,e,this.expressionParams)}getModel(){var e;const t=this.createExpressionParser(this.appliedExpression);return null===t||void 0===t||t.parseExpression(),null!==(e=null===t||void 0===t?void 0:t.getModel())&&void 0!==e?e:null}setModel(e){const t=(e,i)=>{if("join"===e.filterType){const o=this.advFilterExpSvc.parseJoinOperator(e),n=e.conditions.map(e=>t(e)).filter(e=>(0,s.Qmv)(e)).join(" ".concat(o," "));return i||e.conditions.length<=1?n:"(".concat(n,")")}return this.advFilterExpSvc.parseColumnFilterModel(e)},i=e?t(e,!0):null;this.setExpressionDisplayValue(i),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()}getExpressionDisplayValue(){return this.expression}setExpressionDisplayValue(e){this.expression=e}isCurrentExpressionApplied(){return this.appliedExpression===this.expression}createExpressionParser(e){return e?new Xo({expression:e,colModel:this.colModel,dataTypeSvc:this.dataTypeSvc,valueSvc:this.valueSvc,advFilterExpSvc:this.advFilterExpSvc}):null}getDefaultExpression(e){const t=this.advFilterExpSvc.getColumnValue(e)+" ";return{updatedValue:t,updatedPosition:t.length}}isHeaderActive(){return!this.gos.get("advancedFilterParent")}getCtrl(){return this.ctrl}setEnabled(e,t){const i=this.enabled,o=(0,s.dbY)(this.gos)||(0,s.TiQ)(this.gos);e&&!o&&(0,s.ujB)(123),this.enabled=e&&o,t||this.enabled===i||this.eventSvc.dispatchEvent({type:"advancedFilterEnabledChanged",enabled:this.enabled})}applyExpression(){const e=this.createExpressionParser(this.expression);null===e||void 0===e||e.parseExpression(),this.applyExpressionFromParser(e)}getAppliedExpressionDisplayValue(){return this.appliedExpression}applyExpressionFromParser(e){if(this.isValid=!e||e.isValid(),!e||!this.isValid)return this.expressionFunction=null,this.expressionParams=null,void(this.appliedExpression=null);const{expressionFunction:t,params:i}=e.getFunction();this.expressionFunction=t,this.expressionParams=i,this.appliedExpression=this.expression}updateValidity(){this.advFilterExpSvc.resetColumnCaches();const e=this.createExpressionParser(this.expression);null===e||void 0===e||e.parseExpression();const t=(!e||e.isValid())!==this.isValid;return this.applyExpressionFromParser(e),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp(),t}onNewColumnsLoaded(e){var t;if("gridInitializing"!==e.source||null===(t=this.dataTypeSvc)||void 0===t||!t.isPendingInference)return;this.ctrl.setInputDisabled(!0);const[i]=this.addManagedEventListeners({dataTypesInferred:()=>{null===i||void 0===i||i(),this.ctrl.setInputDisabled(!1)}})}},Zo={moduleName:"AdvancedFilter",version:ki,beans:[$o,Xi],icons:{advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",advancedFilterBuilderSelectOpen:"small-down",richSelectRemove:"cancel",richSelectLoading:"loading"},apiFunctions:{getAdvancedFilterModel:function(e){var t,i;return null!==(t=null===(i=e.filterManager)||void 0===i?void 0:i.getAdvFilterModel())&&void 0!==t?t:null},setAdvancedFilterModel:function(e,t){var i;null===(i=e.filterManager)||void 0===i||i.setAdvFilterModel(t)},showAdvancedFilterBuilder:function(e){var t;null===(t=e.filterManager)||void 0===t||t.toggleAdvFilterBuilder(!0,"api")},hideAdvancedFilterBuilder:function(e){var t;null===(t=e.filterManager)||void 0===t||t.toggleAdvFilterBuilder(!1,"api")}},dependsOn:[Ii,s.BLm,s.RPC,s.gFd,s.HJC,s.Ss0],css:['.ag-advanced-filter-header{align-items:center;background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);display:flex;position:relative}.ag-advanced-filter{align-items:center;display:flex;width:100%}.ag-advanced-filter-buttons{display:contents}.ag-advanced-filter-header-cell{height:100%;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding)}.ag-advanced-filter-apply-button,.ag-advanced-filter-builder-button{align-items:center;background-color:unset;border:0;display:flex;font-size:var(--ag-font-size);font-weight:600;line-height:normal;padding:var(--ag-spacing);white-space:nowrap;&:where(:not(:disabled)){cursor:pointer;&:hover{background-color:var(--ag-row-hover-color)}}}:where(.ag-ltr) .ag-advanced-filter-apply-button,:where(.ag-ltr) .ag-advanced-filter-builder-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-advanced-filter-apply-button,:where(.ag-rtl) .ag-advanced-filter-builder-button{margin-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-advanced-filter-builder-button-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-advanced-filter-builder-button-label{margin-right:var(--ag-spacing)}.ag-advanced-filter-builder{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ag-advanced-filter-builder-list{flex:1;overflow:auto}.ag-advanced-filter-builder-button-panel{border-top:var(--ag-advanced-filter-builder-button-bar-border);display:flex;justify-content:flex-end;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-advanced-filter-builder-apply-button,:where(.ag-ltr) .ag-advanced-filter-builder-cancel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-advanced-filter-builder-apply-button,:where(.ag-rtl) .ag-advanced-filter-builder-cancel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-advanced-filter-builder-item-wrapper{align-items:center;display:flex;flex:1 1 auto;justify-content:space-between;overflow:hidden}:where(.ag-ltr) .ag-advanced-filter-builder-item-wrapper{padding-left:calc(var(--ag-icon-size)/2);padding-right:var(--ag-icon-size)}:where(.ag-rtl) .ag-advanced-filter-builder-item-wrapper{padding-left:var(--ag-icon-size);padding-right:calc(var(--ag-icon-size)/2)}:where(.ag-virtual-list-viewport) .ag-advanced-filter-builder-item-wrapper .ag-tab-guard{position:absolute}.ag-advanced-filter-builder-item-tree-lines>*{width:var(--ag-advanced-filter-builder-indent-size)}.ag-advanced-filter-builder-item-tree-line-root{width:var(--ag-icon-size);&:before{height:50%;top:50%}}.ag-advanced-filter-builder-item-tree-line-horizontal,.ag-advanced-filter-builder-item-tree-line-vertical,.ag-advanced-filter-builder-item-tree-line-vertical-bottom,.ag-advanced-filter-builder-item-tree-line-vertical-top{align-items:center;display:flex;height:100%;position:relative;&:after,&:before{content:"";height:100%;position:absolute}}.ag-advanced-filter-builder-item-tree-line-horizontal:after{border-bottom:var(--ag-border-width) solid var(--ag-border-color);height:50%;top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size))}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-horizontal:after{left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-horizontal:after{right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical:before{top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size)/2)}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-vertical:before{border-left:var(--ag-border-width) solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-vertical:before{border-right:var(--ag-border-width) solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical-top:before{height:50%;top:0;width:calc(var(--ag-advanced-filter-builder-indent-size) - var(--ag-icon-size)/2)}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-vertical-top:before{border-left:var(--ag-border-width) solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-vertical-top:before{border-right:var(--ag-border-width) solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{height:calc(50% - var(--ag-icon-size)*1.5/2);top:calc(50% + var(--ag-icon-size)*1.5/2);width:calc(var(--ag-icon-size)/2)}:where(.ag-ltr) .ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{border-left:var(--ag-border-width) solid var(--ag-border-color);left:calc(var(--ag-icon-size)/2)}:where(.ag-rtl) .ag-advanced-filter-builder-item-tree-line-vertical-bottom:before{border-right:var(--ag-border-width) solid var(--ag-border-color);right:calc(var(--ag-icon-size)/2)}.ag-advanced-filter-builder-item-condition{padding-bottom:var(--ag-spacing);padding-top:var(--ag-spacing)}.ag-advanced-filter-builder-item,.ag-advanced-filter-builder-item-buttons,.ag-advanced-filter-builder-item-condition,.ag-advanced-filter-builder-item-tree-lines,.ag-advanced-filter-builder-pill,.ag-advanced-filter-builder-pill-wrapper{align-items:center;display:flex;height:100%}.ag-advanced-filter-builder-pill-wrapper{margin:0 var(--ag-spacing)}.ag-advanced-filter-builder-pill{border-radius:var(--ag-border-radius);min-height:calc(100% - var(--ag-spacing)*3);min-width:calc(var(--ag-spacing)*2);padding:var(--ag-spacing) calc(var(--ag-spacing)*2);position:relative}:where(.ag-advanced-filter-builder-pill){.ag-advanced-filter-builder-value-number{font-family:monospace;font-weight:700}.ag-advanced-filter-builder-value-empty{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-advanced-filter-builder-pill){.ag-picker-field-display{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-advanced-filter-builder-pill){.ag-picker-field-display{margin-left:var(--ag-spacing)}}.ag-advanced-filter-builder-pill-display{font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-advanced-filter-builder-join-pill{background-color:var(--ag-advanced-filter-builder-join-pill-color);cursor:pointer}.ag-advanced-filter-builder-column-pill{background-color:var(--ag-advanced-filter-builder-column-pill-color);cursor:pointer}.ag-advanced-filter-builder-option-pill{background-color:var(--ag-advanced-filter-builder-option-pill-color);cursor:pointer}.ag-advanced-filter-builder-value-pill{background-color:var(--ag-advanced-filter-builder-value-pill-color);cursor:text;max-width:140px;:where(.ag-advanced-filter-builder-pill-display){display:block}}.ag-advanced-filter-builder-item-buttons>*{margin:0 calc(var(--ag-spacing)*.5)}.ag-advanced-filter-builder-item-button{color:var(--ag-subtle-text-color);cursor:pointer;position:relative}.ag-advanced-filter-builder-item-button,.ag-advanced-filter-builder-pill{&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-advanced-filter-builder-item-button-disabled{cursor:default;opacity:.5}.ag-advanced-filter-builder-virtual-list-container{top:var(--ag-spacing)}.ag-advanced-filter-builder-virtual-list-item{cursor:default;display:flex;height:var(--ag-list-item-height);&:hover{background-color:var(--ag-row-hover-color);:where(.ag-advanced-filter-builder-item-button){opacity:1}}}.ag-advanced-filter-builder-invalid{color:var(--ag-subtle-text-color);cursor:default;margin:0 var(--ag-spacing)}:where(.ag-advanced-filter-builder-validation) .ag-advanced-filter-builder-invalid{color:var(--ag-invalid-color)}:where(.ag-advanced-filter-builder-virtual-list-item-highlight) .ag-advanced-filter-builder-item-button:focus-visible{opacity:1}']},Jo=class{constructor(e){this._defs={},this._nullable=!1,this.description=e}_collectNestedDefs(e){const t=(0,n.A)({},this._defs);for(const i of e)i&&"object"===typeof i&&"$defs"in i&&(Object.assign(t,i.$defs),delete i.$defs);return t}_toJSON(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,n.A)({type:this._nullable?[this.type,"null"]:this.type,description:this.description},e);return Object.keys(this._defs).length>0&&(t.$defs=this._defs),t}nullable(){return this._nullable=!0,this}define(e,t){return this._defs[e]=t,this}},en=class extends Jo{constructor(e){super("string"===typeof e?e:null===e||void 0===e?void 0:e.description),this.type="string","object"===typeof e&&e&&(this._pattern=e.pattern,this._format=e.format)}pattern(e){return this._pattern=e,this}format(e){return this._format=e,this}toJSON(){return this._toJSON({pattern:this._pattern,format:this._format})}},tn=class extends Jo{constructor(e){super("string"===typeof e?e:null===e||void 0===e?void 0:e.description),this.type="number","object"===typeof e&&e&&(this._minimum=e.minimum,this._maximum=e.maximum,this._exclusiveMinimum=e.exclusiveMinimum,this._exclusiveMaximum=e.exclusiveMaximum,this._multipleOf=e.multipleOf)}minimum(e){return this._minimum=e,this}exclusiveMinimum(e){return this._exclusiveMinimum=e,this}maximum(e){return this._maximum=e,this}exclusiveMaximum(e){return this._exclusiveMaximum=e,this}multipleOf(e){return this._multipleOf=e,this}toJSON(){return this._toJSON({minimum:this._minimum,exclusiveMinimum:this._exclusiveMinimum,maximum:this._maximum,exclusiveMaximum:this._exclusiveMaximum,multipleOf:this._multipleOf})}},on=class extends Jo{constructor(e,t){super(t),this._enum=e,this.type="string"}toJSON(){return this._toJSON({enum:this._enum})}},nn=class extends on{constructor(e,t){super([e],t)}},sn=class extends Jo{constructor(e){super(e),this.type="boolean"}toJSON(){return this._toJSON()}},rn=class extends Jo{constructor(e,t){super("string"===typeof t?t:null===t||void 0===t?void 0:t.description),this.items=e,this.type="array","object"===typeof t&&t&&(this._minItems=t.minItems,this._maxItems=t.maxItems)}minItems(e){return this._minItems=e,this}maxItems(e){return this._maxItems=e,this}toJSON(){const e=this.items.toJSON(),t=this._collectNestedDefs([e]);return this._defs=t,this._toJSON({items:e,minItems:this._minItems,maxItems:this._maxItems})}},an=class extends Jo{constructor(e,t){super(t),this.properties=e,this.type="object"}toJSON(){const e=Object.fromEntries(Object.keys(this.properties).map(e=>[e,this.properties[e].toJSON()])),t=this._collectNestedDefs(Object.values(e));return this._defs=t,this._toJSON({required:Object.keys(this.properties),additionalProperties:!1,properties:e})}},ln=class{constructor(e,t){this.schemas=e,this._nullable=!1,this._defs={},this.description=t}nullable(){return this._nullable=!0,this}define(e,t){return this._defs[e]=t,this}_collectNestedDefs(e){const t=this._defs;for(const i of e)i&&"object"===typeof i&&"$defs"in i&&(Object.assign(t,i.$defs),delete i.$defs);return t}toJSON(){const e=this.schemas.map(e=>e.toJSON()),t=this._collectNestedDefs(e),i={anyOf:this._nullable?[...e,{type:"null"}]:e};return this.description&&(i.description=this.description),Object.keys(t).length>0&&(i.$defs=t),i}},dn=class{constructor(e){this.id=e}nullable(){return this}toJSON(){return{$ref:"#/$defs/".concat(this.id)}}},cn=e=>new en(e),un=e=>new tn(e),hn=(e,t)=>new on(e,t),pn=e=>new sn(e),gn=(e,t)=>new rn(e,t),vn=(e,t)=>new an(e,t),mn=(e,t)=>new ln(e,t),fn=(e,t)=>new nn(e,t),Cn=e=>new dn(e),wn={boolean:e=>vn({filterType:fn("boolean","Filter type identifier for boolean column filters"),colId:hn(e,"Column identifier for the boolean column to filter"),type:hn(["true","false"],"Boolean value to filter by")}),object:e=>vn({filterType:fn("object","Filter type identifier for object column filters"),colId:hn(e,"Column identifier for the object column to filter"),filter:cn("Filter value to compare against object column values").nullable(),type:hn(["equals","notEqual","contains","notContains","startsWith","endsWith","blank","notBlank"],"Object filter operation type")}),date:e=>vn({filterType:fn("date","Filter type identifier for date column filters"),colId:hn(e,"Column identifier for the date column to filter"),filter:cn({pattern:"^\\d{4}-\\d{2}-\\d{2}$",description:"Date value in YYYY-MM-DD format"}).nullable(),type:hn(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"Date filter operation type")}),dateString:e=>vn({filterType:fn("date","Filter type identifier for date string column filters"),colId:hn(e,"Column identifier for the date string column to filter"),filter:cn({pattern:"^\\d{4}-\\d{2}-\\d{2}$",description:"Date value in YYYY-MM-DD format"}).nullable(),type:hn(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"Date string filter operation type")}),dateTime:e=>vn({filterType:fn("dateTime","Filter type identifier for datetime column filters"),colId:hn(e,"Column identifier for the datetime column to filter"),filter:cn({pattern:"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}$",description:"DateTime value in YYYY-MM-DDTHH:mm:ss format"}).nullable(),type:hn(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"DateTime filter operation type")}),dateTimeString:e=>vn({filterType:fn("dateTimeString","Filter type identifier for datetime string column filters"),colId:hn(e,"Column identifier for the datetime string column to filter"),filter:cn({pattern:"^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$",description:"DateTime value in YYYY-MM-DD HH:mm:ss format"}).nullable(),type:hn(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"DateTime string filter operation type")}),number:e=>vn({filterType:fn("number","Filter type identifier for number column filters"),colId:hn(e,"Column identifier for the number column to filter"),filter:un("Numeric value to filter by").nullable(),type:hn(["equals","notEqual","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","blank","notBlank"],"Number filter operation type")}),text:e=>vn({filterType:fn("text","Filter type identifier for text column filters"),colId:hn(e,"Column identifier for the text column to filter"),filter:cn("Text value to filter by").nullable(),type:hn(["equals","notEqual","contains","notContains","startsWith","endsWith","blank","notBlank"],"Text filter operation type")})},bn="agNumberColumnFilter",yn="agDateColumnFilter",Sn=["agTextColumnFilter",bn,yn],xn=(e,t)=>{const{gos:i,colFilter:o,colModel:n}=e;if(!o)return;const s=n.getCols().filter(e=>e.isFilterAllowed());if(0===s.length)return;const r={},a=i.get("enableFilterHandlers");for(const d of s){var l;const e=null!==t&&void 0!==t&&t.columns?t.columns[d.getColId()]:void 0,i=d.getColDef(),n=o.getDefaultFilter(d),s=null!==(l=null===e||void 0===e?void 0:e.includeSetValues)&&void 0!==l&&l,c=Fn(i.filter,i.filterParams,n,function(){let e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!s)return[];if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){if(a){e=o.getHandler(d,!0).getHandler(t)}}else e=o.getHandler(d,!0);return e?e.getFilterKeys():[]});c&&(r[d.colId]=c.nullable())}return vn({filterModel:vn(r)}).nullable()};function Fn(e,t,i,o){let n;if("string"===typeof e?n=e:"object"===typeof e&&"string"===typeof e.component?n=e.component:(!0===e||"object"===typeof e&&!0===e.component)&&(n=i),!n)return null;if(Sn.includes(n)){const e=null===t||void 0===t?void 0:t.maxNumConditions,i=null!==t&&void 0!==t&&t.filterOptions?t.filterOptions.map(e=>"string"===typeof e?e:"object"===typeof e&&e.displayKey?e.displayKey:null).filter(Boolean):void 0,o=(null===t||void 0===t?void 0:t.useIsoSeparator)||!1;return Rn(n,{maxConditions:e,filterOptions:i,useIsoSeparator:o})}return"agSetColumnFilter"===n?Mn(o):"agMultiColumnFilter"===n?Tn(t.filters,i,o):null}var Rn=(e,t)=>e===yn?An(t):e===bn?En(t):Dn(t),Pn=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return 1===i?e:vn({filterType:fn(t,"Filter type identifier for ".concat(t," filters with multiple conditions")),operator:hn(["AND","OR"],"Logical operator to combine multiple filter conditions. Must be included even with a single filter to adhere to the API."),conditions:gn(e,"Array of filter conditions to be combined").minItems(2).maxItems(i)})},Dn=e=>{var t;const i=null!==(t=e.filterOptions)&&void 0!==t?t:["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],o=vn({filterType:fn("text","Filter type identifier for text filters"),type:hn(i,"Text filter operation type"),filter:cn("Primary filter value").nullable(),filterTo:cn("Secondary filter value for range operations").nullable()});return Pn(o,"text",e.maxConditions)},En=e=>{var t;const i=null!==(t=e.filterOptions)&&void 0!==t?t:["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],o=vn({filterType:fn("number","Filter type identifier for number filters"),type:hn(i,"Number filter operation type"),filter:un("Primary filter value").nullable(),filterTo:un("Secondary filter value for range operations").nullable()});return Pn(o,"number",e.maxConditions)},An=e=>{var t;const i=null!==(t=e.filterOptions)&&void 0!==t?t:["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],o=e.useIsoSeparator?"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}$":"^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$",n=vn({filterType:fn("date","Filter type identifier for date filters"),type:hn(i,"Date filter operation type"),dateFrom:cn({pattern:o,description:"Primary date filter value in YYYY-MM-DD HH:mm:ss format"}).nullable(),dateTo:cn({pattern:o,description:"Secondary date filter value for range operations in YYYY-MM-DD HH:mm:ss format"}).nullable()});return Pn(n,"date",e.maxConditions)},Mn=e=>{const t=e?e().filter(Boolean):[];return vn({filterType:fn("set","Filter type identifier for set filters"),values:gn(t.length>0?hn(t,"Available values to filter by"):cn("Filter values"),"Array of values to include in the filter")})},Tn=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[];return vn({filterType:fn("multi","Filter type identifier for multi-condition filters"),filterModels:gn(mn(e.map((e,o)=>Fn(e.filter,e.filterParams,t,()=>i(!0,o))),"Union of different filter types that can be combined").nullable(),"Array of filter conditions to be combined with AND/OR logic")})},kn={aggregation:e=>{const{aggFuncSvc:t}=e;if(!t)return;const i=e.colModel.getCols().filter(e=>e.isAllowValue()&&t.getFuncNames(e).length>0);return 0!==i.length?vn({aggregationModel:gn(mn(i.map(t=>{var i;return vn({colId:fn(t.getColId(),"Column identifier"),aggFunc:hn((null===(i=e.aggFuncSvc)||void 0===i?void 0:i.getFuncNames(t))||[],"Aggregation function")})})),"Array of column aggregations")},"Aggregation configuration for the grid").nullable():void 0},filter:(e,t)=>{const{advancedFilter:i}=e;return null!==i&&void 0!==i&&i.isEnabled()?(e=>{let{colModel:t,dataTypeSvc:i}=e;if(!i)return;const o=t.getCols(),n={boolean:[],object:[],date:[],dateString:[],dateTime:[],dateTimeString:[],number:[],text:[]};for(const a of o){const e=i.getBaseDataType(a);e&&n[e].push(a.colId)}const s=[],r={};for(const a of Object.keys(n))if(n[a].length>0){const e="".concat(a,"AdvancedFilterModel"),t=wn[a];r[e]=t(n[a]),s.push({$ref:"#/$defs/".concat(e)})}return r.joinAdvancedFilterModel=vn({filterType:fn("join","Filter type identifier for joining multiple advanced filter conditions"),type:hn(["AND","OR"],"Logical operator to combine multiple advanced filter conditions"),conditions:gn(Cn("advancedFilterModel"),"Array of advanced filter conditions to be combined")}),r.advancedFilterModel={anyOf:[...s,{$ref:"#/$defs/joinAdvancedFilterModel"}]},vn({advancedFilterModel:Cn("advancedFilterModel")},"Advanced filter configuration for the grid").nullable()})(e):xn(e,t)},sort:e=>{const{sortSvc:t}=e;if(!t)return;const i=e.colModel.getCols().filter(e=>e.isSortable());if(0===i.length)return;const o=i.map(e=>e.getColId());return vn({sortModel:gn(vn({colId:hn(o,"Column ID that supports sorting"),sort:hn(["asc","desc"],"Sort direction: ascending or descending"),type:hn(["default","absolute"],"Sort type: default or absolute values")}),"Array of sort configurations")},"Sort configuration for the grid").nullable()},pivot:e=>{const t=e.colModel.getCols().filter(e=>e.isAllowPivot()).map(e=>e.getColId());if(0!==t.length)return vn({pivotMode:pn("Whether pivot mode is enabled"),pivotColIds:gn(hn(t,"Column ID that supports pivoting"),"Array of column IDs to use as pivot columns")},"Pivot configuration for the grid").nullable()},columnVisibility:()=>vn({hiddenColIds:gn(Cn("allColumnIds"),"Array of column IDs to hide")},"Column visibility configuration for the grid").nullable(),columnSizing:e=>{const t=e.colModel.getCols().filter(e=>e.isResizable());if(0===t.length)return;const i=t.map(e=>e.getColId());return vn({columnSizingModel:gn(mn([vn({colId:Cn("resizableColumnId"),width:un("Fixed width in pixels").minimum(20)}),vn({colId:Cn("resizableColumnId"),flex:un("Flex sizing ratio").minimum(0)})]),"Array of column sizing configurations")},"Column sizing configuration for the grid").define("resizableColumnId",hn(i,"Column ID that supports resizing"))},rowGroup:e=>{const t=e.colModel.getCols().filter(e=>e.isAllowRowGroup());if(0===t.length)return;const i=t.map(e=>e.getColId());return vn({groupColIds:gn(hn(i,"Column ID that supports row grouping"),"Array of column IDs to group by")},"Row grouping configuration for the grid")}};var In={moduleName:"AiToolkit",version:ki,beans:[],dependsOn:[s.H18],apiFunctions:{getStructuredSchema:function(e,t){var i;const o=e.colModel.getCols().map(e=>e.getColId()),n={};for(const d of s._1W){var r;if(null!==t&&void 0!==t&&null!==(r=t.exclude)&&void 0!==r&&r.includes(d))continue;const i=(0,kn[d])(e,t);i&&(n[d]=i.nullable())}const a=null!==(i=null===t||void 0===t?void 0:t.columns)&&void 0!==i?i:{},l=o.map(e=>{var t;return null!==(t=a[e])&&void 0!==t&&t.description?"".concat(e,": ").concat(a[e].description):e}).filter(Boolean).join("\n");return vn(n).define("allColumnIds",hn(o,l)).toJSON()}}};var Ln={tag:"div",cls:"ag-side-button",role:"presentation",children:[{tag:"button",ref:"eToggleButton",cls:"ag-button ag-side-button-button",role:"tab",attrs:{type:"button",tabindex:"-1","aria-expanded":"false"},children:[{tag:"div",ref:"eIconWrapper",cls:"ag-side-button-icon-wrapper",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eLabel",cls:"ag-side-button-label"}]}]},Nn=class extends s.uAl{constructor(e){super(),this.toolPanelDef=e,this.eToggleButton=s.dRA,this.eIconWrapper=s.dRA,this.eLabel=s.dRA}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){this.setTemplate(Ln,[]),this.setLabel(),this.setIcon(),this.addManagedElementListeners(this.eToggleButton,{click:this.onButtonPressed.bind(this)}),this.eToggleButton.setAttribute("id","ag-".concat(this.getCompId(),"-button"))}setLabel(){const e=this.toolPanelDef,t=this.getLocaleTextFunc()(e.labelKey,e.labelDefault);this.eLabel.textContent=t}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",(0,s.asF)(this.toolPanelDef.iconKey,this.beans))}onButtonPressed(){this.dispatchLocalEvent({type:"toggleButtonClicked"})}setSelected(e){this.toggleCss("ag-selected",e),(0,s.oAJ)(this.eToggleButton,e)}},On={tag:"div",cls:"ag-side-buttons",role:"tablist"},Gn={selector:"AG-SIDE-BAR-BUTTONS",component:class extends s.uAl{constructor(){super(On),this.buttonComps=[]}postConstruct(){this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){e.key===s.DDm.TAB&&e.shiftKey&&((0,s.hHe)(this.beans,!0)?e.preventDefault():(0,s.rYD)(e))}setActiveButton(e){for(const t of this.buttonComps)t.setSelected(e===t.getToolPanelId())}addButtonComp(e){const t=this.createBean(new Nn(e));return this.buttonComps.push(t),this.appendChild(t),t.addEventListener("toggleButtonClicked",()=>{this.dispatchLocalEvent({type:"sideBarButtonClicked",toolPanelId:e.id})}),t}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),(0,s.fDi)(this.getGui())}destroy(){this.clearButtons(),super.destroy()}}},Bn={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columnsToolPanel",toolPanel:"agColumnsToolPanel"},Vn={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filtersToolPanel",toolPanel:"agFiltersToolPanel"},Hn={columns:Bn,filters:Vn,"filters-new":{id:"filters-new",labelDefault:"Filters",labelKey:"filters",iconKey:"filtersToolPanel",toolPanel:"agNewFiltersToolPanel"}};function zn(e){if(e){if(!0===e)return{toolPanels:[Bn,Vn],defaultToolPanel:"columns"};if("string"===typeof e)return zn([e]);if(Array.isArray(e)){const t=[];for(const i of e){const e=Hn[i];e?t.push(e):(0,s.ujB)(215,{key:i,defaultByKey:Hn})}if(0===t.length)return;return{toolPanels:t,defaultToolPanel:t[0].id}}return{toolPanels:Wn(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position,hideButtons:e.hideButtons}}}function Wn(e){const t=[];return e?(e.forEach(e=>{const i=Un(e);i&&t.push(i)}),t):t}function Un(e){return"string"!==typeof e?e:Hn[e]?Hn[e]:((0,s.ujB)(215,{key:e,defaultByKey:Hn}),null)}var jn=class extends s.uAl{constructor(){super({tag:"div",cls:"ag-tool-panel-horizontal-resize"}),this.minWidth=100,this.maxWidth=null}postConstruct(){const e=this.beans.horizontalResizeSvc.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.inverted=this.gos.get("enableRtl")}dispatchResizeEvent(e,t,i){this.eventSvc.dispatchEvent({type:"toolPanelSizeChanged",width:i,started:e,ended:t})}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(e){return this.onResizing(e,!0)}onResizing(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.inverted?-1:1;let o=Math.max(this.minWidth,Math.floor(this.startingWidth-e*i));null!=this.maxWidth&&(o=Math.min(this.maxWidth,o)),this.elementToResize.style.width="".concat(o,"px"),this.dispatchResizeEvent(!1,t,o)}};var _n={name:"toolPanel",optionalMethods:["refresh","getState"]},Kn={tag:"div",cls:"ag-tool-panel-wrapper",role:"tabpanel"},Yn=class extends s.uAl{constructor(){super(Kn)}postConstruct(){const e=this.getGui(),t=this.resizeBar=this.createManagedBean(new jn);e.setAttribute("id","ag-".concat(this.getCompId())),t.elementToResize=e,this.appendChild(t)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(e,t){const{id:i,minWidth:o,maxWidth:n,width:s}=e;this.toolPanelId=i,this.width=s;const r=function(e,t,i){return e.getCompDetails(t,_n,void 0,i,!0)}(this.beans.userCompFactory,e,t);if(null==r)return!1;const a=r.newAgStackInstance();this.params=r.params,a.then(this.setToolPanelComponent.bind(this));const l=this.resizeBar;return null!=o&&(l.minWidth=o),null!=n&&(l.maxWidth=n),!0}setToolPanelComponent(e){this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(()=>{this.destroyBean(e)});const t=this.width;t&&(this.getGui().style.width="".concat(t,"px"))}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(e){const t="left"===e,i=this.gos.get("enableRtl")?t:!t;this.resizeBar.inverted=i}refresh(){var e;null===(e=this.toolPanelCompInstance)||void 0===e||e.refresh(this.params)}},qn={tag:"div",cls:"ag-side-bar ag-unselectable",children:[{tag:"ag-side-bar-buttons",ref:"sideBarButtons"}]},Qn=class extends s.uAl{constructor(){super(qn,[Gn]),this.sideBarButtons=s.dRA,this.toolPanelWrappers=[],this.registerCSS('.ag-tool-panel-wrapper{display:flex;overflow:hidden auto;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-side-bar-panel-width)}.ag-tool-panel-external{display:flex;flex-direction:row}:where(.ag-tool-panel-external) .ag-tool-panel-wrapper{flex-grow:1}.ag-select-agg-func-item{align-items:center;display:flex;flex:1 1 auto;flex-flow:row nowrap;height:100%;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:nowrap;>*{flex:none}}.ag-tool-panel-horizontal-resize{cursor:ew-resize;height:100%;position:absolute;top:0;width:5px;z-index:1}.ag-side-bar{background-color:var(--ag-side-bar-background-color);display:flex;flex-direction:row-reverse;position:relative}:where(.ag-ltr) :where(.ag-side-bar-left) .ag-tool-panel-horizontal-resize{right:-3px}:where(.ag-rtl) :where(.ag-side-bar-left) .ag-tool-panel-horizontal-resize{left:-3px}:where(.ag-ltr) :where(.ag-side-bar-right) .ag-tool-panel-horizontal-resize{left:-3px}:where(.ag-rtl) :where(.ag-side-bar-right) .ag-tool-panel-horizontal-resize{right:-3px}.ag-side-bar-left{flex-direction:row;order:-1}.ag-side-buttons{background-color:var(--ag-side-button-bar-background-color);padding-top:var(--ag-side-button-bar-top-padding);position:relative}.ag-side-button{background-color:var(--ag-side-button-background-color);border-bottom:var(--ag-side-button-border);border-top:var(--ag-side-button-border);color:var(--ag-side-button-text-color);margin-top:-1px;position:relative;&:before{background-color:transparent;bottom:0;content:"";display:block;position:absolute;top:0;transition:background-color var(--ag-side-button-selected-underline-transition-duration);width:var(--ag-side-button-selected-underline-width)}&:hover{background-color:var(--ag-side-button-hover-background-color);color:var(--ag-side-button-hover-text-color)}&.ag-selected{background-color:var(--ag-side-button-selected-background-color);border-bottom:var(--ag-side-button-selected-border);border-top:var(--ag-side-button-selected-border);color:var(--ag-side-button-selected-text-color);&:before{background-color:var(--ag-side-button-selected-underline-color)}}}:where(.ag-ltr) .ag-side-button{&:before{left:0}}:where(.ag-rtl) .ag-side-button{&:before{right:0}}.ag-side-button-button{align-items:center;display:flex;flex-direction:column;gap:var(--ag-spacing);position:relative;white-space:nowrap;width:100%;&:focus{box-shadow:none}}:where(.ag-ltr) .ag-side-button-button{padding:var(--ag-side-button-vertical-padding) var(--ag-side-button-right-padding) var(--ag-side-button-vertical-padding) var(--ag-side-button-left-padding)}:where(.ag-rtl) .ag-side-button-button{padding:var(--ag-side-button-vertical-padding) var(--ag-side-button-left-padding) var(--ag-side-button-vertical-padding) var(--ag-side-button-right-padding)}.ag-side-button-button:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-side-button-label{writing-mode:vertical-lr}@media (resolution <= 1.5x){.ag-side-button-label{font-family:"Segoe UI",var(--ag-font-family)}:where(.ag-ltr) .ag-side-button-label{transform:rotate(.05deg)}:where(.ag-rtl) .ag-side-button-label{transform:rotate(-.05deg)}}:where(.ag-ltr) .ag-side-bar-left,:where(.ag-rtl) .ag-side-bar-right{border-right:var(--ag-side-panel-border);:where(.ag-tool-panel-wrapper){border-left:var(--ag-side-panel-border)}}:where(.ag-ltr) .ag-side-bar-right,:where(.ag-rtl) .ag-side-bar-left{border-left:var(--ag-side-panel-border);:where(.ag-tool-panel-wrapper){border-right:var(--ag-side-panel-border)}}')}postConstruct(){var e;this.sideBarButtons.addEventListener("sideBarButtonClicked",this.onToolPanelButtonClicked.bind(this));const{beans:t,gos:i}=this,{sideBar:o}=null!==(e=i.get("initialState"))&&void 0!==e?e:{};this.setSideBarDef({sideBarDef:zn(i.get("sideBar")),sideBarState:o}),this.addManagedPropertyListener("sideBar",()=>this.setState()),t.sideBar.comp=this;const n=this.getFocusableElement();this.createManagedBean(new s.G21(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),(0,s.oQi)(t,this,n),this.addManagedPropertyListener("enableAdvancedFilter",this.onAdvancedFilterChanged.bind(this))}onTabKeyDown(e){if(e.defaultPrevented)return;const{beans:t,sideBarButtons:i}=this,o=this.getGui(),n=i.getGui(),r=(0,s.UlD)(t),a=o.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),l=e.target,d=e.shiftKey;if(!a)return(0,s.hHe)(t,d)?(e.preventDefault(),!0):(0,s.hHe)(t,d,!0);if(n.contains(r))return void((0,s.YtT)(a,d)&&e.preventDefault());if(!d)return;let c=null;a.contains(r)?c=(0,s.ey2)(t,a,void 0,!0):Pi(a,l)&&(c=Ri(a,l)),c||(c=n.querySelector(".ag-selected button"),c=(0,s.K05)(c)?c:null),c&&c!==e.target&&(e.preventDefault(),c.focus())}handleKeyDown(e){const t=(0,s.UlD)(this.beans),i=this.sideBarButtons;if(!i.getGui().contains(t))return;const o=i.getGui(),n=Array.prototype.slice.call(o.querySelectorAll(".ag-side-button")),r=n.findIndex(e=>e.contains(t));let a=null;switch(e.key){case s.DDm.LEFT:case s.DDm.UP:a=Math.max(0,r-1);break;case s.DDm.RIGHT:case s.DDm.DOWN:a=Math.min(r+1,n.length-1)}if(null===a)return;const l=n[a].querySelector("button");l&&(l.focus(),e.preventDefault())}onToolPanelButtonClicked(e){const t=e.toolPanelId;this.openedItem()===t?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(t,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtons.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef(e){let{sideBarDef:t,sideBarState:i,existingToolPanelWrappers:o}=e;if(this.setDisplayed(!1),this.sideBar=t,t&&this.sideBarButtons.setDisplayed(!t.hideButtons),null!==t&&void 0!==t&&t.toolPanels){const e=t.toolPanels;if(this.createToolPanelsAndSideButtons(e,i,o),!this.toolPanelWrappers.length)return;const n=i?i.visible:!t.hiddenByDefault;if(this.setDisplayed(n),this.setSideBarPosition(i?i.position:t.position),n)if(i){const{openToolPanel:e}=i;e&&this.openToolPanel(e,"sideBarInitializing")}else this.openToolPanel(t.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(e){e||(e="right"),this.position=e;const t="left"===e,i=t?"right":"left";this.toggleCss("ag-side-bar-left",t),this.toggleCss("ag-side-bar-right",!t);for(const o of this.toolPanelWrappers)o.setResizerSizerSide(i);return this.dispatchSideBarUpdated(),this}setDisplayed(e,t){super.setDisplayed(e,t),this.dispatchSideBarUpdated()}getState(){const e={};for(const o of this.toolPanelWrappers){var t,i;e[o.getToolPanelId()]=null===(t=o.getToolPanelInstance())||void 0===t||null===(i=t.getState)||void 0===i?void 0:i.call(t)}return{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:e}}createToolPanelsAndSideButtons(e,t,i){for(const n of e){var o;this.createToolPanelAndSideButton(n,null===t||void 0===t||null===(o=t.toolPanels)||void 0===o?void 0:o[n.id],null===i||void 0===i?void 0:i[n.id])}}validateDef(e){const{id:t,toolPanel:i}=e;if(null==t)return(0,s.ujB)(212),!1;var o;if(Xn(i)&&(null!==(o=this.beans.filterManager)&&void 0!==o&&o.isAdvFilterEnabled()))return(0,s.ujB)(213),!1;return!0}createToolPanelAndSideButton(e,t,i){if(!this.validateDef(e))return void this.destroyBean(i);let o;if(i)o=i;else{o=this.createBean(new Yn);if(!o.setToolPanelDef(e,(0,s.AuN)(this.gos,{initialState:t,onStateUpdated:()=>this.dispatchSideBarUpdated()})))return}o.setDisplayed(!1);const n=o.getGui(),r=e.parent instanceof HTMLElement?e.parent:this;r===e.parent&&(this.beans.environment.applyThemeClasses(r,["ag-external","ag-tool-panel-external"]),n.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr")),r.appendChild(n),this.toolPanelWrappers.push(o);const a=this.sideBarButtons.addButtonComp(e);(0,s.Ge7)(a.eToggleButton,n)}refresh(){for(const e of this.toolPanelWrappers)e.refresh()}renderToolPanelUnderParent(e,t){var i;const o=null===(i=this.sideBar)||void 0===i||null===(i=i.toolPanels)||void 0===i?void 0:i.find(t=>("string"===typeof t?t:t.id)===e);if(o){const i=Un(o);if(i){var n;const o=null===(n=this.gos.get("initialState"))||void 0===n||null===(n=n.sideBar)||void 0===n||null===(n=n.toolPanels)||void 0===n?void 0:n[i.id];i.parent=t;const s=this.toolPanelWrappers.find(t=>t.getToolPanelId()===e);this.createToolPanelAndSideButton(i,o,s)}}}openToolPanel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",i=arguments.length>2?arguments[2]:void 0;i&&e&&this.renderToolPanelUnderParent(e,i);const o=this.openedItem();if(o===e)return;for(const n of this.toolPanelWrappers){const t=e===n.getToolPanelId();n.setDisplayed(t)}o!==this.openedItem()&&(this.sideBarButtons.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,null!==o&&void 0!==o?o:void 0,t))}getToolPanelInstance(e){const t=this.toolPanelWrappers.filter(t=>t.getToolPanelId()===e)[0];if(t)return t.getToolPanelInstance();(0,s.ujB)(214,{key:e})}raiseToolPanelVisibleEvent(e,t,i){const o=!!e&&!!t,n=this.eventSvc;t&&n.dispatchEvent({type:"toolPanelVisibleChanged",source:i,key:t,visible:!1,switchingToolPanel:o}),e&&n.dispatchEvent({type:"toolPanelVisibleChanged",source:i,key:e,visible:!0,switchingToolPanel:o})}close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"api";this.openToolPanel(void 0,e)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let e=null;for(const t of this.toolPanelWrappers)t.isDisplayed()&&(e=t.getToolPanelId());return e}setState(e){const t=zn(this.gos.get("sideBar")),i={};var o;t&&this.sideBar&&(null===(o=t.toolPanels)||void 0===o||o.forEach(t=>{var o,r,a,l;const{id:d}=t;if(!d)return;const c=null===(o=this.sideBar.toolPanels)||void 0===o?void 0:o.find(e=>e.id===d);if(!c||t.toolPanel!==c.toolPanel)return;const u=this.toolPanelWrappers.find(e=>e.getToolPanelId()===d);if(!u)return;const h=(0,s.AuN)(this.gos,(0,n.A)((0,n.A)({},null!==(r=t.toolPanelParams)&&void 0!==r?r:{}),{},{initialState:null===e||void 0===e||null===(a=e.toolPanels)||void 0===a?void 0:a[d],onStateUpdated:()=>this.dispatchSideBarUpdated()}));!0===(null===(l=u.getToolPanelInstance())||void 0===l?void 0:l.refresh(h))&&(this.toolPanelWrappers=this.toolPanelWrappers.filter(e=>e!==u),(0,s.MwW)(u.getGui()),i[d]=u)}));this.clearDownUi(),this.setSideBarDef({sideBarDef:t,sideBarState:e,existingToolPanelWrappers:i})}dispatchSideBarUpdated(){this.eventSvc.dispatchEvent({type:"sideBarUpdated"})}destroyToolPanelWrappers(){for(const e of this.toolPanelWrappers)(0,s.MwW)(e.getGui()),this.destroyBean(e);this.toolPanelWrappers.length=0}onAdvancedFilterChanged(){var e;(null===(e=this.sideBar)||void 0===e||null===(e=e.toolPanels)||void 0===e?void 0:e.some(e=>Xn("string"===typeof e?e:e.toolPanel)))&&this.setState()}destroy(){this.destroyToolPanelWrappers(),super.destroy()}};function Xn(e){return"agFiltersToolPanel"===e||"agNewFiltersToolPanel"===e}var $n={selector:"AG-SIDE-BAR",component:Qn},Zn=class extends s.XQb{constructor(){super(...arguments),this.beanName="sideBar"}getSelector(){return $n}},Jn={moduleName:"SideBar",version:ki,beans:[Zn],apiFunctions:{isSideBarVisible:function(e){var t,i;return null!==(t=null===(i=e.sideBar)||void 0===i?void 0:i.comp.isDisplayed())&&void 0!==t&&t},setSideBarVisible:function(e,t){var i;null===(i=e.sideBar)||void 0===i||i.comp.setDisplayed(t)},setSideBarPosition:function(e,t){var i;null===(i=e.sideBar)||void 0===i||i.comp.setSideBarPosition(t)},openToolPanel:function(e,t,i){var o;null===(o=e.sideBar)||void 0===o||o.comp.openToolPanel(t,"api",i)},closeToolPanel:function(e){var t;null===(t=e.sideBar)||void 0===t||t.comp.close("api")},getOpenedToolPanel:function(e){var t,i;return null!==(t=null===(i=e.sideBar)||void 0===i?void 0:i.comp.openedItem())&&void 0!==t?t:null},refreshToolPanel:function(e){var t;null===(t=e.sideBar)||void 0===t||t.comp.refresh()},isToolPanelShowing:function(e){var t,i;return null!==(t=null===(i=e.sideBar)||void 0===i?void 0:i.comp.isToolPanelShowing())&&void 0!==t&&t},getToolPanelInstance:function(e,t){var i;const o=null===(i=e.sideBar)||void 0===i?void 0:i.comp.getToolPanelInstance(t);return(0,s.nnr)(o)},getSideBar:function(e){var t;return null===(t=e.sideBar)||void 0===t?void 0:t.comp.getDef()}},dependsOn:[Ii,s.WPS]},es=class extends Fi{constructor(){super({warnNoIcon:()=>(0,s.ujB)(227)})}},ts={moduleName:"MenuItem",version:ki,userComponents:{agMenuItem:es},icons:{check:"tick",subMenuOpen:"small-right",subMenuOpenRtl:"small-left"},css:['.ag-menu-list{cursor:default;display:table;padding:var(--ag-spacing) 0;width:100%}.ag-menu-option,.ag-menu-separator{display:table-row}.ag-menu-option-part,.ag-menu-separator-part{display:table-cell;vertical-align:middle}.ag-menu-option{cursor:pointer;font-weight:500}:where(.ag-ltr) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:right}:where(.ag-rtl) :where(.ag-menu-option-popup-pointer) .ag-icon{text-align:left}.ag-menu-option-text{white-space:nowrap}.ag-menu-option-custom{display:contents}.ag-compact-menu-option{display:flex;flex-wrap:nowrap;width:100%}.ag-compact-menu-option-text{flex:1 1 auto;white-space:nowrap}.ag-menu-separator{height:calc(var(--ag-spacing)*2 + 1px)}.ag-menu-separator-part:after{border-top:solid var(--ag-border-width) var(--ag-menu-separator-color);content:"";display:block}.ag-compact-menu-option-active,.ag-menu-option-active{background-color:var(--ag-row-hover-color)}.ag-compact-menu-option-part,.ag-menu-option-part{line-height:var(--ag-icon-size);padding:calc(var(--ag-spacing) + 2px) 0}.ag-compact-menu-option-disabled,.ag-menu-option-disabled{cursor:not-allowed;opacity:.5}.ag-compact-menu-option-icon,.ag-menu-option-icon{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-compact-menu-option-icon,:where(.ag-ltr) .ag-menu-option-icon{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-compact-menu-option-icon,:where(.ag-rtl) .ag-menu-option-icon{padding-right:calc(var(--ag-spacing)*2)}.ag-compact-menu-option-text,.ag-menu-option-text{padding-left:calc(var(--ag-spacing)*2);padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-compact-menu-option-shortcut,:where(.ag-ltr) .ag-menu-option-shortcut{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-shortcut,:where(.ag-rtl) .ag-menu-option-shortcut{padding-left:var(--ag-spacing)}:where(.ag-ltr) .ag-compact-menu-option-popup-pointer,:where(.ag-ltr) .ag-menu-option-popup-pointer{padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-compact-menu-option-popup-pointer,:where(.ag-rtl) .ag-menu-option-popup-pointer{padding-left:var(--ag-spacing)}.ag-menu-column-select-wrapper{height:265px;overflow:auto;:where(.ag-column-select){height:100%}}.ag-menu:where(.ag-tabs){min-width:290px}.ag-context-menu-loading-icon{pointer-events:none;position:absolute}']},is={tag:"div",cls:"ag-column-select-header",role:"presentation",children:[{tag:"div",ref:"eExpand",cls:"ag-column-select-header-icon"},{tag:"ag-checkbox",ref:"eSelect",cls:"ag-column-select-header-checkbox"},{tag:"ag-input-text-field",ref:"eFilterTextField",cls:"ag-column-select-header-filter-wrapper"}]},os={selector:"AG-PRIMARY-COLS-HEADER",component:class extends s.uAl{constructor(){super(is,[s.DXf,s.n1z]),this.eExpand=s.dRA,this.eSelect=s.dRA,this.eFilterTextField=s.dRA}postConstruct(){this.createExpandIcons(),this.addManagedListeners(this.eExpand,{click:this.onExpandClicked.bind(this),keydown:e=>{e.key===s.DDm.SPACE&&(e.preventDefault(),this.onExpandClicked())}}),this.addManagedElementListeners(this.eSelect.getInputElement(),{click:this.onSelectClicked.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",()=>this.onFunctionsReadOnlyPropChanged()),this.eFilterTextField.setAutoComplete(!1).onValueChange(()=>this.onFilterTextChanged()),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)});const e=this.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle All Columns Visibility")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){const e=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.toggleCss("ag-column-select-column-readonly",e)}init(e){this.params=e;const t=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.toggleCss("ag-column-select-column-readonly",t),this.beans.colModel.ready&&this.showOrHideOptions()}createExpandIcons(){const e=this.beans;this.eExpand.appendChild(this.eExpandChecked=(0,s.asF)("columnSelectOpen",e)),this.eExpand.appendChild(this.eExpandUnchecked=(0,s.asF)("columnSelectClosed",e)),this.eExpand.appendChild(this.eExpandIndeterminate=(0,s.asF)("columnSelectIndeterminate",e)),this.setExpandState(0)}showOrHideOptions(){var e;const t=this.params,i=!t.suppressColumnFilter,o=!t.suppressColumnSelectAll,n=!t.suppressColumnExpandAll,r=!(null===(e=this.beans.colModel.colDefCols)||void 0===e||!e.treeDepth),a=this.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(a("searchOoo","Search...")),(0,s.nl0)(this.eFilterTextField.getGui(),i),(0,s.nl0)(this.eSelect.getGui(),o),(0,s.nl0)(this.eExpand,n&&r)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=(0,s.pkA)(this,()=>{const e=this.eFilterTextField.getValue();this.dispatchLocalEvent({type:"filterChanged",filterText:e})},300)),this.onFilterTextChangedDebounced()}onSelectClicked(){this.dispatchLocalEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchLocalEvent({type:0===this.expandState?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,(0,s.nl0)(this.eExpandChecked,0===e),(0,s.nl0)(this.eExpandUnchecked,1===e),(0,s.nl0)(this.eExpandIndeterminate,2===e)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}}};function ns(e){return!!e&&"undefined"!==typeof e.children}function ss(e){return ns(e)?e.groupId:e.colId}function rs(e,t,i){if(!ns(e))return!0;const o=e,n=i;if(((e,t)=>{const i=e.children.map(ss).includes(ss(t)),o=(0,s.GXs)(e.children),n=o&&ss(o)!==ss(t);return i&&n})(o,n))return o.children.push(n),!0;if(o.groupId===t){if(!o.children.map(ss).includes(ss(n)))return o.children.push(n),!0}for(let s=o.children.length-1;s>=0&&!rs(o.children[s],t,i);s--);return!1}function as(e){const t=(e,t)=>ns(e)&&ns(t)&&ss(e)===ss(t),i=(e,t)=>{if(!ns(t))return e;const o=e,n=t;if(n.children&&n.groupId){if(rs(o,n.groupId,n.children[0]))return o}for(const s of n.children)i(o,s);return o},o=[];for(let n=1;n<=e.length;n++){const s=e[n-1],r=e[n];t(s,r)?e[n]=i(s,r):o.push(s)}return o}function ls(e,t){const i=[],o=(t,n)=>{if(ns(t)){const e=t,i="undefined"!==typeof e.groupId?e.groupId:e.headerName,r=new s.PuA(e,i,!1,n),a=[];for(const t of e.children){const e=o(t,n+1);e&&a.push(e)}return r.setChildren(a),r}{const o=t,n=o.colId?o.colId:o.field,s=e.getColDefCol(n);return s||i.push(o),s}},n=[];for(const s of t){const e=o(s,0);e&&n.push(e)}return i.length>0&&(0,s.ujB)(217,{invalidColIds:i}),n}function ds(e,t){const i=function(e){const t=(e,i)=>{let o;if((0,s.b6I)(e))if(e.isPadding())o=i;else{const t=Object.assign({},e.getColGroupDef());t.groupId=e.getGroupId(),t.children=[i],o=t}else{const t=Object.assign({},e.getColDef());t.colId=e.getColId(),o=t}const n=e.getOriginalParent();return n?t(n,o):o},i=e.getCols();return i.filter(e=>{const t=e.getColDef();return e.isPrimary()&&!t.showRowGroup}).map(e=>t(e,e.getColDef()))}(e);t(as(i))}var cs=class{constructor(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4?arguments[4]:void 0;this.displayName=e,this.depth=i,this.group=o,this.localEventService=new s.$UK,o?(this.columnGroup=t,this._expanded=n,this.children=[]):this.column=t}get expanded(){return!!this._expanded}set expanded(e){e!==this._expanded&&(this._expanded=e,this.localEventService.dispatchEvent({type:"expandedChanged"}))}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}};function us(e,t,i,o){hs(e,function(e){const t=[],i=e=>{for(const o of e)o.passesFilter&&(o.group?i(o.children):t.push(o.column))};return i(e),t}(t),i,o)}function hs(e,t,i,o){e.colModel.isPivotMode()?function(e,t,i,o){!function(e,t,i,o){const n=[],r=t=>{if(!t.isAnyFunctionActive())if(t.isAllowValue()){var i;const o="string"===typeof t.getAggFunc()?t.getAggFunc():null===(i=e.aggFuncSvc)||void 0===i?void 0:i.getDefaultAggFunc(t);n.push({colId:t.getId(),aggFunc:o})}else t.isAllowRowGroup()?n.push({colId:t.getId(),rowGroup:!0}):t.isAllowPivot()&&n.push({colId:t.getId(),pivot:!0})},a=e=>{(e.isPivotActive()||e.isRowGroupActive()||e.isValueActive())&&n.push({colId:e.getId(),pivot:!1,rowGroup:!1,aggFunc:null})},l=i?r:a;t.forEach(l),n.length>0&&(0,s.l8G)(e,{state:n},o)}(e,t,i,o)}(e,t,i,o):function(e,t,i,o){const n=[];for(const s of t)s.getColDef().lockVisible||s.isVisible()!=i&&n.push({colId:s.getId(),hide:!i});n.length>0&&(0,s.l8G)(e,{state:n},o)}(e,t,i,o)}function ps(e,t){const{columns:i,visibleState:o,pivotState:n,eventType:r}=t,a=i.map(t=>{const i=t.getColId();if(e.colModel.isPivotMode()){const e=null===n||void 0===n?void 0:n[i];return{colId:i,pivot:null===e||void 0===e?void 0:e.pivot,rowGroup:null===e||void 0===e?void 0:e.rowGroup,aggFunc:null===e||void 0===e?void 0:e.aggFunc}}return{colId:i,hide:!(null!==o&&void 0!==o&&o[i])}});(0,s.l8G)(e,{state:a},r)}function gs(e){return{pivot:e.isPivotActive(),rowGroup:e.isRowGroupActive(),aggFunc:e.isValueActive()?e.getAggFunc():void 0}}function vs(e,t,i,o){const n=t.getCol(i);let s=e._groupData;s||(s={},e._groupData=s);const r=n.getColId(),a=s[r];a!==o&&(s[r]=o,e.dispatchCellChangedEvent(n,o,a))}function ms(e,t,i){var o;e.group!==i&&(e.group&&!i&&(e.expanded=!1),e.group=i,e.updateHasChildren(),null===(o=t.selectionSvc)||void 0===o||o.updateRowSelectable(e),e.dispatchRowEvent("groupChanged"))}function fs(e,t){const{gos:i,rowGroupColsSvc:o}=t;if(!o||!e)return!1;const n=i.get("groupLockGroupColumns");if(!e.isRowGroupActive()||0===n)return!1;if(-1===n)return!0;return n>o.columns.findIndex(t=>t.getColId()===e.getColId())}var Cs={name:"menuItem",optionalMethods:["setActive","select","setExpanded","configureDefaults"]},ws={getMenuItemComp:(e,t,i)=>{var o;const n=e.userCompFactory.getCompDetails(t,Cs,"agMenuItem",(0,s.AuN)(e.gos,i),!0);return null!==(o=null===n||void 0===n?void 0:n.newAgStackInstance())&&void 0!==o?o:s.oY$.resolve()},getPostProcessPopupParams:e=>{let{column:t,node:i}=e;return{column:t,rowNode:i}},preserveRangesWhile:function(e,t){if(!e.gos.get("enableCellTextSelection"))return t();if(!(0,s.lju)()&&!(0,s.e3J)())return t();const{selection:i,ranges:o}=function(e){const t=(0,s.gKP)(e),i="getSelection"in t?t.getSelection():null,o=[];for(let s=0;s<(null!==(n=null===i||void 0===i?void 0:i.rangeCount)&&void 0!==n?n:0);s++){var n;const e=null===i||void 0===i?void 0:i.getRangeAt(s);e&&o.push(e)}return{selection:i,ranges:o}}(e);t(),null===i||void 0===i||i.removeAllRanges();for(const n of o)null===i||void 0===i||i.addRange(n)},stopPropagationCallbacks:s.w3i,warnNoItem:e=>{(0,s.ujB)(228,{menuItemOrString:e})}},bs=class extends bi{constructor(){super(ws)}},ys=class extends yi{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{column:null,node:null,value:null},ws)}},Ss=class extends s.uAl{constructor(e,t,i){super({tag:"div",cls:"ag-menu"}),this.column=e,this.mouseEventOrTouch=t,this.parentEl=i,this.displayName=null}postConstruct(){const{column:e,beans:{colNames:t}}=this;let i;if(this.initializeProperties(e),i=(0,s.R39)(e)?t.getDisplayNameForColumn(e,"columnToolPanel"):t.getDisplayNameForProvidedColumnGroup(null,e,"columnToolPanel"),this.displayName=i,this.buildMenuItemMap(),this.isActive()){const e=this.mouseEventOrTouch;"preventDefault"in e&&e.preventDefault();const t=this.getMappedMenuItems();if(0===t.length)return;this.displayContextMenu(t)}}initializeProperties(e){let t;t=(0,s.b6I)(e)?e.getLeafColumns():[e],this.columns=t;const i=this.beans.colModel.isPivotMode();this.allowScrollIntoView=!i&&t.some(this.isColumnValidForScrollIntoView),this.allowGrouping=t.some(e=>e.isPrimary()&&e.isAllowRowGroup()),this.allowValues=t.some(e=>e.isPrimary()&&e.isAllowValue()),this.allowPivoting=i&&t.some(e=>e.isPrimary()&&e.isAllowPivot())}buildMenuItemMap(){const e=this.getLocaleTextFunc(),{beans:t,displayName:i}=this,{rowGroupColsSvc:o,valueColsSvc:n,pivotColsSvc:s,colModel:r}=t,a=new Map;this.menuItemMap=a;const l=r.isPivotMode();a.set("scrollIntoView",{allowedFunction:e=>!e.isPinned()&&!l&&this.isColumnValidForScrollIntoView(e),activeFunction:()=>!1,activateLabel:()=>e("scrollColumnIntoView","Scroll ".concat(i," into View"),[i]),activateFunction:()=>{const e=this.columns.find(this.isColumnValidForScrollIntoView);e&&this.beans.ctrlsSvc.getScrollFeature().ensureColumnVisible(e)},deActivateFunction:()=>{},addIcon:"ensureColumnVisible"});const d=e=>e.isPrimary()&&e.isAllowRowGroup()&&!fs(e,t);a.set("rowGroup",{allowedFunction:d,activeFunction:e=>e.isRowGroupActive(),activateLabel:()=>"".concat(e("groupBy","Group by")," ").concat(i),deactivateLabel:()=>"".concat(e("ungroupBy","Un-Group by")," ").concat(i),activateFunction:()=>null===o||void 0===o?void 0:o.setColumns(this.addColumnsToList(o.columns,d),"toolPanelUi"),deActivateFunction:()=>null===o||void 0===o?void 0:o.setColumns(this.removeColumnsFromList(o.columns,d),"toolPanelUi"),addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"});const c=e=>e.isPrimary()&&e.isAllowValue();a.set("value",{allowedFunction:c,activeFunction:e=>e.isValueActive(),activateLabel:()=>e("addToValues","Add ".concat(i," to values"),[i]),deactivateLabel:()=>e("removeFromValues","Remove ".concat(i," from values"),[i]),activateFunction:()=>null===n||void 0===n?void 0:n.setColumns(this.addColumnsToList(n.columns,c),"toolPanelUi"),deActivateFunction:()=>null===n||void 0===n?void 0:n.setColumns(this.removeColumnsFromList(n.columns,c),"toolPanelUi"),addIcon:"valuePanel",removeIcon:"valuePanel"});const u=e=>l&&e.isPrimary()&&e.isAllowPivot();a.set("pivot",{allowedFunction:u,activeFunction:e=>e.isPivotActive(),activateLabel:()=>e("addToLabels","Add ".concat(i," to labels"),[i]),deactivateLabel:()=>e("removeFromLabels","Remove ".concat(i," from labels"),[i]),activateFunction:()=>null===s||void 0===s?void 0:s.setColumns(this.addColumnsToList(s.columns,u),"toolPanelUi"),deActivateFunction:()=>null===s||void 0===s?void 0:s.setColumns(this.removeColumnsFromList(s.columns,u),"toolPanelUi"),addIcon:"pivotPanel",removeIcon:"pivotPanel"})}isColumnValidForScrollIntoView(e){var t,i;if(!e.isVisible())return!1;const o=e.getParent();return!o||(null===(t=null===(i=o.getDisplayedChildren())||void 0===i?void 0:i.includes(e))||void 0===t||t)}addColumnsToList(e,t){return[...e].concat(this.columns.filter(i=>t(i)&&!e.includes(i)))}removeColumnsFromList(e,t){return e.filter(e=>t(e)&&this.columns.includes(e))}displayContextMenu(e){const t=this.getGui(),i=this.createBean(new ys),o=this.getLocaleTextFunc();let n=()=>{};t.appendChild(i.getGui()),i.addMenuItems(e),i.addManagedListeners(i,{closeMenu:()=>{this.parentEl.focus(),n()}});const r=this.beans.popupSvc,a=r.addPopup({modal:!0,eChild:t,closeOnEsc:!0,afterGuiAttached:()=>(0,s.YtT)(i.getGui()),ariaLabel:o("ariaLabelContextMenu","Context Menu"),closedCallback:e=>{e instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(i)}});a&&(n=a.hideFunc),r.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEventOrTouch,ePopup:t})}isActive(){return this.allowScrollIntoView||this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){const e=[],{menuItemMap:t,columns:i,displayName:o,beans:n}=this;for(const r of t.values()){const t=i.some(e=>r.allowedFunction(e)&&!r.activeFunction(e)),a=i.some(e=>r.allowedFunction(e)&&r.activeFunction(e));t&&e.push({name:r.activateLabel(o),icon:(0,s.asF)(r.addIcon,n,null),action:()=>r.activateFunction()}),a&&r.removeIcon&&r.deactivateLabel&&e.push({name:r.deactivateLabel(o),icon:(0,s.asF)(r.removeIcon,n,null),action:()=>{var e;return null===(e=r.deActivateFunction)||void 0===e?void 0:e.call(r)}})}return e}},xs={tag:"div",cls:"ag-column-select-column-group",children:[{tag:"span",ref:"eColumnGroupIcons",cls:"ag-column-group-icons",children:[{tag:"span",ref:"eGroupClosedIcon",cls:"ag-column-group-closed-icon"},{tag:"span",ref:"eGroupOpenedIcon",cls:"ag-column-group-opened-icon"}]},{tag:"ag-checkbox",ref:"cbSelect",cls:"ag-column-select-checkbox"},{tag:"span",ref:"eLabel",cls:"ag-column-select-column-label"}]},Fs=class extends s.uAl{constructor(e,t,i,o){super(),this.modelItem=e,this.allowDragging=t,this.eventType=i,this.focusWrapper=o,this.cbSelect=s.dRA,this.eLabel=s.dRA,this.eGroupOpenedIcon=s.dRA,this.eGroupClosedIcon=s.dRA,this.eColumnGroupIcons=s.dRA,this.processingColumnStateChange=!1;const{columnGroup:n,depth:r,displayName:a}=e;this.columnGroup=n,this.columnDepth=r,this.displayName=a}postConstruct(){this.setTemplate(xs,[s.DXf]);const{beans:e,cbSelect:t,eLabel:i,displayName:o,columnDepth:n,modelItem:r,focusWrapper:a,columnGroup:l}=this,{registry:d,gos:c}=e,u=(0,s.asF)("columnDrag",e);this.eDragHandle=u,u.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");const h=t.getGui(),p=t.getInputElement();h.after(u),p.setAttribute("tabindex","-1"),i.textContent=null!==o&&void 0!==o?o:"",this.setupExpandContract(),this.addCss("ag-column-select-indent-"+n),this.getGui().style.setProperty("--ag-indentation-level",String(n)),this.tooltipFeature=this.createOptionalManagedBean(d.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.focusWrapper,getLocation:()=>"columnToolPanelColumnGroup",shouldDisplayTooltip:(0,s.qmn)(c,()=>i)})),this.addManagedEventListeners({columnPivotModeChanged:this.onColumnStateChanged.bind(this)}),this.addManagedElementListeners(i,{click:this.onLabelClicked.bind(this)}),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedListeners(r,{expandedChanged:this.onExpandChanged.bind(this)});const g=new s.MVO(this.getGui(),!1);this.addManagedListeners(g,{longTap:e=>this.onContextMenu(e.touchStart)}),this.addDestroyFunc(g.destroy.bind(g)),this.addManagedListeners(a,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip();const v=(0,s.Xq0)(l.getColGroupDef(),c,null,l);for(const s of v)this.toggleCss(s,!0)}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){const e=this.columnGroup.getColGroupDef();if(!e)return;const t=()=>{var t;return null===(t=this.tooltipFeature)||void 0===t?void 0:t.setTooltipAndRefresh(e.headerTooltip)};t(),this.addManagedEventListeners({newColumnsLoaded:t})}handleKeyDown(e){switch(e.key){case s.DDm.LEFT:e.preventDefault(),this.modelItem.expanded=!1;break;case s.DDm.RIGHT:e.preventDefault(),this.modelItem.expanded=!0;break;case s.DDm.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}}onContextMenu(e){const{columnGroup:t,gos:i}=this;if(i.get("functionsReadOnly"))return;const o=this.createBean(new Ss(t,e,this.focusWrapper));this.addDestroyFunc(()=>{o.isAlive()&&this.destroyBean(o)})}addVisibilityListenersToAllChildren(){const e=this.onColumnStateChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())this.addManagedListeners(t,{visibleChanged:e,columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e})}setupDragging(){if(!this.allowDragging)return void(0,s.nl0)(this.eDragHandle,!1);const e=this.beans,{gos:t,eventSvc:i,dragAndDrop:o}=e;let n=!t.get("suppressDragLeaveHidesColumns");const r={type:s.qRA.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>n?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{n=!t.get("suppressDragLeaveHidesColumns"),i.dispatchEvent({type:"columnPanelItemDragStart",column:this.columnGroup})},onDragStopped:()=>{i.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:t=>{n&&ps(e,{columns:this.columnGroup.getLeafColumns(),visibleState:null===t||void 0===t?void 0:t.visibleState,pivotState:null===t||void 0===t?void 0:t.pivotState,eventType:this.eventType})},onGridExit:()=>{n&&this.onChangeCommon(!1)}};o.addDragSource(r,!0),this.addDestroyFunc(()=>o.removeDragSource(r))}createDragItem(){const e=this.columnGroup.getLeafColumns(),t={},i={};for(const o of e){const e=o.getId();t[e]=o.isVisible(),i[e]=gs(o)}return{columns:e,visibleState:t,pivotState:i}}setupExpandContract(){const{beans:e,eGroupClosedIcon:t,eGroupOpenedIcon:i,eColumnGroupIcons:o}=this;t.appendChild((0,s.fyk)("columnSelectClosed",e,null)),i.appendChild((0,s.fyk)("columnSelectOpen",e,null));const n=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(t,{click:n}),this.addManagedElementListeners(i,{click:n});const r=new s.MVO(o,!0);this.addManagedListeners(r,{tap:n}),this.addDestroyFunc(r.destroy.bind(r))}onLabelClicked(){const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){const e=[],t=i=>{for(const o of i)o.passesFilter&&(o.group?t(o.children):e.push(o.column))};return t(this.modelItem.children),e}onChangeCommon(e){this.refreshAriaLabel(),this.processingColumnStateChange||us(this.beans,this.modelItem.children,e,this.eventType)}refreshAriaLabel(){const{cbSelect:e,focusWrapper:t,displayName:i}=this,o=this.getLocaleTextFunc(),n=o("ariaColumnGroup","Column Group"),r=e.getValue(),a=void 0===r?o("ariaIndeterminate","indeterminate"):r?o("ariaVisible","visible"):o("ariaHidden","hidden"),l=o("ariaToggleVisibility","Press SPACE to toggle visibility");(0,s.PIC)(t,"".concat(i," ").concat(n)),e.setInputAriaLabel("".concat(l," (").concat(a,")")),(0,s.TMe)(t,e.getInputElement().id)}onColumnStateChanged(){const e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0;const i=this.cbSelect;i.setValue(e),i.setReadOnly(t),this.toggleCss("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1}workOutSelectedValue(){const e=this.beans.colModel.isPivotMode(),t=this.getVisibleLeafColumns();let i=0,o=0;for(const n of t)!e&&n.getColDef().lockVisible||(this.isColumnChecked(n,e)?i++:o++);if(!(i>0&&o>0))return i>0}workOutReadOnlyValue(){const e=this.beans.colModel.isPivotMode();let t=0;for(const i of this.columnGroup.getLeafColumns())e?i.isAnyFunctionAllowed()&&t++:i.getColDef().lockVisible||t++;return 0===t}isColumnChecked(e,t){if(t){const t=e.isPivotActive(),i=e.isRowGroupActive(),o=e.isValueActive();return t||i||o}return e.isVisible()}onExpandOrContractClicked(){const e=this.modelItem,t=e.expanded;e.expanded=!t}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){const e=this.modelItem.expanded;(0,s.nl0)(this.eGroupClosedIcon,!e),(0,s.nl0)(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){(0,s.oAJ)(this.focusWrapper,this.modelItem.expanded)}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect,i=t.getValue();!t.isReadOnly()&&(e&&!i||!e&&i)&&t.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}},Rs=e=>(0,s.b6I)(e)?e.getLeafColumns():e?[e]:[],Ps=(e,t,i)=>{if(!t)return 0;const o=t[0],n=t.length;return e.indexOf(o)<i?n:0},Ds=(e,t,i)=>{if(e.get("suppressMovableColumns")||t.colModel.isPivotMode())return!0;return!!i.find(e=>{let{colDef:t}=e;return!!t.suppressMovable||!!t.lockPosition})},Es=(e,t,i)=>{if(!i)return;const{component:o}=i;let n=null,s="top"===i.position;if(o instanceof Fs){n=o.getColumns()[0],s=!0}else o&&(n=o.column);if(!n)return;const r=((e,t,i,o)=>{if(!i||!t)return null;const n=e.colModel.getCols(),s=n.indexOf(i),r=o?s:s+1;return r-Ps(n,t,r)})(e,t,n,s);var a;null!=r&&(null===(a=e.colMoves)||void 0===a||a.moveColumns(t,r,"toolPanelUi"))},As={tag:"div",cls:"ag-column-select-column",children:[{tag:"ag-checkbox",ref:"cbSelect",cls:"ag-column-select-checkbox"},{tag:"span",ref:"eLabel",cls:"ag-column-select-column-label"}]},Ms=class extends s.uAl{constructor(e,t,i,o){super(),this.modelItem=e,this.allowDragging=t,this.groupsExist=i,this.focusWrapper=o,this.eLabel=s.dRA,this.cbSelect=s.dRA,this.processingColumnStateChange=!1;const{column:n,depth:r,displayName:a}=e;this.column=n,this.columnDepth=r,this.displayName=a}postConstruct(){this.setTemplate(As,[s.DXf]);const{beans:e,cbSelect:t,displayName:i,eLabel:o,columnDepth:n,groupsExist:r,column:a,gos:l,focusWrapper:d}=this,c=(0,s.asF)("columnDrag",e);this.eDragHandle=c,c.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");const u=t.getGui(),h=t.getInputElement();u.after(c),h.setAttribute("tabindex","-1"),o.textContent=i,r&&this.addCss("ag-column-select-add-group-indent"),this.addCss("ag-column-select-indent-".concat(n)),this.getGui().style.setProperty("--ag-indentation-level",String(n)),this.tooltipFeature=this.createOptionalManagedBean(e.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.focusWrapper,getLocation:()=>"columnToolPanelColumn",shouldDisplayTooltip:(0,s.qmn)(l,()=>o),getAdditionalParams:()=>({colDef:a.getColDef()})})),this.setupDragging();const p=this.onColumnStateChanged.bind(this);this.addManagedEventListeners({columnPivotModeChanged:p}),this.addManagedListeners(a,{columnValueChanged:p,columnPivotChanged:p,columnRowGroupChanged:p,visibleChanged:p}),this.addManagedListeners(d,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)});const g=new s.MVO(d);this.addManagedListeners(g,{longTap:e=>this.onContextMenu(e.touchStart)}),this.addDestroyFunc(g.destroy.bind(g)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListeners(t,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedElementListeners(o,{click:this.onLabelClicked.bind(this)}),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip();const v=(0,s.Xq0)(a.getColDef(),l,a,null);for(const s of v)this.toggleCss(s,!0)}getColumn(){return this.column}setupTooltip(){const e=()=>{var e;return null===(e=this.tooltipFeature)||void 0===e?void 0:e.setTooltipAndRefresh(this.column.getColDef().headerTooltip)};e(),this.addManagedEventListeners({newColumnsLoaded:e})}onContextMenu(e){const{column:t,gos:i}=this;if(i.get("functionsReadOnly"))return;const o=this.createBean(new Ss(t,e,this.focusWrapper));this.addDestroyFunc(()=>{o.isAlive()&&this.destroyBean(o)})}handleKeyDown(e){e.key===s.DDm.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||hs(this.beans,[this.column],e,"toolPanelUi"))}refreshAriaLabel(){const{cbSelect:e,focusWrapper:t,displayName:i}=this,o=this.getLocaleTextFunc(),n=o("ariaColumn","Column"),r=e.getValue()?o("ariaVisible","visible"):o("ariaHidden","hidden"),a=o("ariaToggleVisibility","Press SPACE to toggle visibility");(0,s.PIC)(t,"".concat(i," ").concat(n)),this.cbSelect.setInputAriaLabel("".concat(a," (").concat(r,")")),(0,s.TMe)(t,e.getInputElement().id)}setupDragging(){const e=this.eDragHandle;if(!this.allowDragging)return void(0,s.nl0)(e,!1);const t=this.beans,{gos:i,eventSvc:o,dragAndDrop:n}=t;let r=!i.get("suppressDragLeaveHidesColumns");const a={type:s.qRA.ToolPanel,eElement:e,dragItemName:this.displayName,getDefaultIconName:()=>r?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{r=!i.get("suppressDragLeaveHidesColumns"),o.dispatchEvent({type:"columnPanelItemDragStart",column:this.column})},onDragStopped:()=>{o.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:e=>{r&&ps(t,{columns:[this.column],visibleState:null===e||void 0===e?void 0:e.visibleState,pivotState:null===e||void 0===e?void 0:e.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{r&&this.onChangeCommon(!1)}};n.addDragSource(a,!0),this.addDestroyFunc(()=>n.removeDragSource(a))}createDragItem(){const e=this.column.getColId(),t={[e]:this.column.isVisible()},i={[e]:gs(this.column)};return{columns:[this.column],visibleState:t,pivotState:i}}onColumnStateChanged(){this.processingColumnStateChange=!0;const e=this.beans.colModel.isPivotMode();if(e){const e=this.column.isAnyFunctionActive();this.cbSelect.setValue(e)}else this.cbSelect.setValue(this.column.isVisible());let t=!0,i=!0;if(e){const e=this.gos.get("functionsReadOnly"),o=!this.column.isAnyFunctionAllowed();t=!e&&!o,i=t}else{const{enableRowGroup:e,enableValue:o,lockPosition:n,suppressMovable:s,lockVisible:r}=this.column.getColDef();t=!r,i=!!e||!!o||!(!!n||!!s)}this.cbSelect.setReadOnly(!t),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!i),this.toggleCss("ag-column-select-column-readonly",!i&&!t),this.cbSelect.setPassive(!1),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect;e!==t.getValue()&&(t.isReadOnly()||t.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){(0,s.ujB)(158)}},Ts=class{constructor(e){this.items=e}getRowCount(){return this.items.length}getRow(e){return this.items[e]}},ks={selector:"AG-PRIMARY-COLS-LIST",component:class extends s.uAl{constructor(){super({tag:"div",cls:"ag-column-select-list",role:"presentation"}),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1,this.skipRefocus=!1}wireBeans(e){this.colModel=e.colModel}destroy(){this.destroyColumnTree(),super.destroy()}destroyColumnTree(){this.allColsTree=[];for(const e of this.destroyColumnItemFuncs)e();this.destroyColumnItemFuncs=[]}init(e,t,i){this.params=e;const{suppressSyncLayoutWithGrid:o,contractColumnSelection:n,suppressColumnMove:r}=e;this.allowDragging=t,this.eventType=i,o||this.addManagedEventListeners({columnMoved:this.onColumnsChanged.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.onColumnsChanged.bind(this)});const a=this.fireSelectionChangedEvent.bind(this);this.addManagedEventListeners({columnPivotChanged:a,columnPivotModeChanged:a,columnRowGroupChanged:a,columnValueChanged:a,columnVisible:a,newColumnsLoaded:a}),this.expandGroupsByDefault=!n;const l=r||o,d=this.createManagedBean(new Ji({cssIdentifier:"column-select",ariaRole:"tree",moveItemCallback:(e,t)=>{l||this.moveItems(e,t)}}));this.virtualList=d,this.appendChild(d.getGui()),d.setComponentCreator((e,t)=>((0,s.v8T)(t,e.depth+1),this.createComponentFromItem(e,t))),this.colModel.ready&&this.onColumnsChanged(),l||this.createItemDragFeature()}createItemDragFeature(){const{gos:e,beans:t,virtualList:i}=this;this.createManagedBean(new po(this,i,{dragSourceType:s.qRA.ToolPanel,addListeners:(e,t,i)=>{e.addManagedEventListeners({columnPanelItemDragStart:t,columnPanelItemDragEnd:i})},getCurrentDragValue:e=>(e=>e.column)(e),isMoveBlocked:i=>Ds(e,t,Rs(i)),getNumRows:e=>e.getDisplayedColsList().length,moveItem:(e,i)=>Es(t,Rs(e),i)}))}moveItems(e,t){const{gos:i,beans:o}=this,{modelItem:n}=e,{group:s,columnGroup:r,column:a,expanded:l}=n,d=Rs(s?r:a);if(Ds(i,o,d))return;const c=this.displayedColsList.indexOf(n),u=t?-1:1;let h=0;if(t){var p;const t=e.columnDepth>0?null===(p=a.getParent())||void 0===p?void 0:p.getChildren():null;null!==t&&void 0!==t&&t.length&&a===t[0]&&(h=-1)}else s&&(h=l?n.children.length:0);const g=Math.min(Math.max(c+h+u,0),this.displayedColsList.length-1);this.skipRefocus=!0,Es(o,d,{rowIndex:g,position:t?"top":"bottom",component:this.virtualList.getComponentAt(g)}),this.focusRowIfAlive(g-h).then(()=>{this.skipRefocus=!1})}createComponentFromItem(e,t){const i=this.allowDragging;if(e.group){const o=new Fs(e,i,this.eventType,t);return this.createBean(o),o}const o=new Ms(e,i,this.groupsExist,t);return this.createBean(o),o}onColumnsChanged(){const e=this.params;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!e.initialState);const t=this.getExpandedStates(),i=this.colModel.isPivotMode();!e.suppressSyncLayoutWithGrid&&!i?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){const e={};if(this.isInitialState){const{expandedGroupIds:t}=this.params.initialState;for(const i of t)e[i]=!0;return e}return this.allColsTree?(this.forEachItem(t=>{if(!t.group)return;const i=t.columnGroup;i&&(e[i.getId()]=t.expanded)}),e):{}}setExpandedStates(e){if(!this.allColsTree)return;const{isInitialState:t}=this;this.forEachItem(i=>{if(!i.group)return;const o=i.columnGroup;if(o){const n=e[o.getId()];(null!=n||t)&&(i.expanded=!!n)}})}buildTreeFromWhatGridIsDisplaying(){ds(this.colModel,this.setColumnLayout.bind(this))}setColumnLayout(e){const t=ls(this.colModel,e);this.buildListModel(t),this.groupsExist=e.some(e=>e&&"undefined"!==typeof e.children),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){var e;const t=this.colModel;this.buildListModel(t.getColDefColTree()),this.groupsExist=!(null===(e=t.colDefCols)||void 0===e||!e.treeDepth)}buildListModel(e){const t=this.onColumnExpanded.bind(this),i=e=>{e.addEventListener("expandedChanged",t);const i=e.removeEventListener.bind(e,"expandedChanged",t);this.destroyColumnItemFuncs.push(i)},o=this.beans.colNames,n=(e,t,i)=>{for(const o of e)(0,s.b6I)(o)?r(o,t,i):a(o,t,i)},r=(e,t,s)=>{const r=e.getColGroupDef();if(null===r||void 0===r?void 0:r.suppressColumnsToolPanel)return;if(e.isPadding())return void n(e.getChildren(),t,s);const a=o.getDisplayNameForProvidedColumnGroup(null,e,"columnToolPanel"),l=new cs(a,e,t,!0,this.expandGroupsByDefault);s.push(l),i(l),n(e.getChildren(),t+1,l.children)},a=(e,t,i)=>{var n;if(null===(n=e.getColDef())||void 0===n?void 0:n.suppressColumnsToolPanel)return;const s=o.getDisplayNameForColumn(e,"columnToolPanel");i.push(new cs(s,e,t))};this.destroyColumnTree(),n(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];const e=t=>{t.passesFilter&&(this.displayedColsList.push(t),t.group&&t.expanded&&t.children.forEach(e))},t=this.virtualList;this.allColsTree.forEach(e),t.setModel(new Ts(this.displayedColsList));let i=null;this.skipRefocus||(i=t.getLastFocusedRow()),t.refresh(),null!=i&&this.focusRowIfAlive(i),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){const e=this.getLocaleTextFunc(),t=e("ariaColumnPanelList","Column List"),i=e("columns","Columns"),o=this.displayedColsList.length;(0,s.PIC)(this.virtualList.getAriaElement(),"".concat(t," ").concat(o," ").concat(i))}focusRowIfAlive(e){return-1===e?Promise.resolve():new Promise(t=>{window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e),t()},0)})}forEachItem(e){const t=i=>{for(const o of i)e(o),o.group&&t(o.children)},i=this.allColsTree;i&&t(i)}doSetExpandedAll(e){this.forEachItem(t=>{t.group&&(t.expanded=e)})}setGroupsExpanded(e,t){if(!t)return void this.doSetExpandedAll(e);const i=[];this.forEachItem(o=>{if(!o.group)return;const n=o.columnGroup.getId();t.indexOf(n)>=0&&(o.expanded=e,i.push(n))});const o=t.filter(e=>!i.includes(e));o.length>0&&(0,s.ujB)(157,{unrecognisedGroupIds:o})}getExpandState(){let e=0,t=0;return this.forEachItem(i=>{i.group&&(i.expanded?e++:t++)}),e>0&&t>0?2:t>0?1:0}doSetSelectedAll(e){us(this.beans,this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,t=0;const i=this.colModel.isPivotMode();if(this.forEachItem(o=>{if(o.group)return;if(!o.passesFilter)return;const n=o.column,s=n.getColDef();let r;if(i){if(!n.isAllowPivot()&&!n.isAllowRowGroup()&&!n.isAllowValue())return;r=n.isValueActive()||n.isPivotActive()||n.isRowGroupActive()}else{if(s.lockVisible)return;r=n.isVisible()}r?e++:t++}),!(e>0&&t>0))return!(0===e||t>0)}setFilterText(e){this.filterText=(0,s.Qmv)(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){const e=e=>{if(!(0,s.Qmv)(this.filterText))return!0;const t=e.displayName;return null==t||-1!==t.toLowerCase().indexOf(this.filterText)},t=(i,o)=>{let n=!1;if(i.group){const s=e(i);for(const e of i.children){const i=t(e,s||o);i&&(n=i)}}const s=!(!o&&!n)||e(i);return i.passesFilter=s,s};for(const i of this.allColsTree)t(i,!1)}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){const e=this.getExpandState();this.dispatchLocalEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;const e=this.getSelectionState();this.dispatchLocalEvent({type:"selectionChanged",state:e})}getExpandedGroups(){const e=[];return this.allColsTree?(this.forEachItem(t=>{t.group&&t.expanded&&e.push(t.columnGroup.getId())}),e):e}}},Is={tag:"div",cls:"ag-column-select",children:[{tag:"ag-primary-cols-header",ref:"primaryColsHeaderPanel"},{tag:"ag-primary-cols-list",ref:"primaryColsListPanel"}]},Ls=class extends s.uAl{constructor(){super(Is,[os,ks]),this.primaryColsHeaderPanel=s.dRA,this.primaryColsListPanel=s.dRA,this.registerCSS(".ag-column-select{display:flex;flex:3 1 0px;flex-direction:column;overflow:hidden;position:relative}.ag-column-select-header{align-items:center;display:flex;flex:none;gap:var(--ag-widget-horizontal-spacing);height:var(--ag-header-height);padding-left:var(--ag-widget-container-horizontal-padding);padding-right:var(--ag-widget-container-horizontal-padding);position:relative}.ag-column-select-column,.ag-column-select-column-group{align-items:center;display:flex;gap:var(--ag-widget-horizontal-spacing);height:100%;position:relative;&:where(:not(:last-child)){margin-bottom:var(--ag-widget-vertical-spacing)}}:where(.ag-ltr) .ag-column-select-column,:where(.ag-ltr) .ag-column-select-column-group{padding-left:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}:where(.ag-rtl) .ag-column-select-column,:where(.ag-rtl) .ag-column-select-column-group{padding-right:calc(var(--ag-indentation-level)*var(--ag-column-select-indent-size))}.ag-column-select-header-icon{border-radius:var(--ag-border-radius);cursor:pointer;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:focus-visible{box-shadow:var(--ag-focus-shadow)}}.ag-column-select-header-filter-wrapper{flex:1 1 auto}.ag-column-select-header-filter{width:100%}.ag-column-select-list{flex:1 1 0px;overflow:hidden}:where(.ag-ltr) .ag-column-select-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}:where(.ag-rtl) .ag-column-select-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-spacing)*1.5)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly{opacity:.5;pointer-events:none;.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-column-select-virtual-list-viewport{padding:calc(var(--ag-widget-container-vertical-padding)*.5) 0}.ag-column-select-virtual-list-item{padding:0 var(--ag-widget-container-horizontal-padding)}.ag-column-select-column-label{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-select-checkbox{display:flex}")}init(e,t,i){const{primaryColsHeaderPanel:o,primaryColsListPanel:n}=this;o.init(t);const r=t.suppressColumnFilter,a=t.suppressColumnSelectAll;t.suppressColumnExpandAll&&r&&a&&o.setDisplayed(!1),this.addManagedListeners(n,{groupExpanded:e=>{o.setExpandState(e.state),t.onStateUpdated()},selectionChanged:e=>o.setSelectionState(e.state)}),n.init(t,e,i),this.addManagedListeners(o,{expandAll:n.doSetExpandedAll.bind(n,!0),collapseAll:n.doSetExpandedAll.bind(n,!1),selectAll:n.doSetSelectedAll.bind(n,!0),unselectAll:n.doSetSelectedAll.bind(n,!1),filterChanged:e=>n.setFilterText(e.filterText)}),this.positionableFeature=this.createManagedBean(new s.qyQ(this.getGui(),{minHeight:100}))}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}},Ns=class extends s.uAl{constructor(){super({tag:"div",cls:"ag-column-panel"}),this.initialised=!1,this.childDestroyFuncs=[],this.registerCSS(".ag-column-panel{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.ag-pivot-mode-panel{display:flex;height:var(--ag-header-height)}.ag-pivot-mode-select{align-items:center;display:flex}:where(.ag-ltr) .ag-pivot-mode-select{margin-left:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-pivot-mode-select{margin-right:var(--ag-widget-container-horizontal-padding)}.ag-column-panel-column-select{border-bottom:var(--ag-tool-panel-separator-border)}.ag-column-panel-column-select:where(:nth-child(n+2 of :not(.ag-hidden))){border-top:var(--ag-tool-panel-separator-border)}:where(.ag-column-panel) .ag-column-drop-vertical{flex:1 1 0px;min-height:50px;&:where(:not(.ag-last-column-drop)){border-bottom:var(--ag-tool-panel-separator-border)}}")}wireBeans(e){this.colToolPanelFactory=e.colToolPanelFactory}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}init(e){const t=(0,s.AuN)(this.gos,{suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1}),i=(0,n.A)((0,n.A)({},t),e);this.params=i;const{childDestroyFuncs:o,colToolPanelFactory:r,gos:a}=this,l=a.isModuleRegistered("SharedPivot"),d=l||a.isModuleRegistered("SharedRowGrouping");!i.suppressPivotMode&&r&&l&&(this.pivotModePanel=r.createPivotModePanel(this,o));const c=this.createBean(new Ls);if(this.primaryColsPanel=c,o.push(()=>this.destroyBean(this.primaryColsPanel)),c.init(!0,i,"toolPanelUi"),c.addCss("ag-column-panel-column-select"),this.appendChild(c),r){!i.suppressRowGroups&&d&&(this.rowGroupDropZonePanel=r.createRowGroupPanel(this,o)),!i.suppressValues&&d&&(this.valuesDropZonePanel=r.createValuesPanel(this,o)),!i.suppressPivots&&l&&(this.pivotDropZonePanel=r.createPivotPanel(this,o)),this.setLastVisible();const[e]=this.addManagedEventListeners({columnPivotModeChanged:()=>{this.resetChildrenHeight(),this.setLastVisible()}});o.push(()=>e())}this.initialised=!0}setPivotModeSectionVisible(e){const t=this.colToolPanelFactory;t&&(this.pivotModePanel=t.setPanelVisible(this.pivotModePanel,e,t.createPivotModePanel.bind(t,this,this.childDestroyFuncs,!0)),this.setLastVisible())}setRowGroupsSectionVisible(e){const t=this.colToolPanelFactory;t&&(this.rowGroupDropZonePanel=t.setPanelVisible(this.rowGroupDropZonePanel,e,t.createRowGroupPanel.bind(t,this,this.childDestroyFuncs)),this.setLastVisible())}setValuesSectionVisible(e){const t=this.colToolPanelFactory;t&&(this.valuesDropZonePanel=t.setPanelVisible(this.valuesDropZonePanel,e,t.createValuesPanel.bind(t,this,this.childDestroyFuncs)),this.setLastVisible())}setPivotSectionVisible(e){var t;const i=this.colToolPanelFactory;i&&(this.pivotDropZonePanel=i.setPanelVisible(this.pivotDropZonePanel,e,i.createPivotPanel.bind(i,this,this.childDestroyFuncs)),null===(t=this.pivotDropZonePanel)||void 0===t||t.setDisplayed(e),this.setLastVisible())}setResizers(){for(const e of[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel]){if(!e)continue;const t=e.getGui();e.toggleResizable(!t.classList.contains("ag-last-column-drop")&&!t.classList.contains("ag-hidden"))}}setLastVisible(){const e=this.getGui(),t=Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop"));for(const n of t)n.classList.remove("ag-last-column-drop");const i=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),o=(0,s.GXs)(i);o&&o.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){const e=this.getGui().children;for(let t=0;t<e.length;t++){const{style:i}=e[t];i.removeProperty("height"),i.removeProperty("flex")}}expandColumnGroups(e){this.primaryColsPanel.expandGroups(e)}collapseColumnGroups(e){this.primaryColsPanel.collapseGroups(e)}setColumnLayout(e){this.primaryColsPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){const e=this.childDestroyFuncs;for(const t of e)t();e.length=0,(0,s.fDi)(this.getGui())}refresh(e){return this.destroyChildren(),this.init(e),!0}getState(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}}destroy(){this.destroyChildren(),super.destroy()}};function Os(e,t,i){null!=e&&null!=t&&e.splice(i,0,...t)}var Gs={tag:"div",cls:"ag-unselectable",role:"presentation"},Bs=class extends s.uAl{constructor(e){super(Gs),this.horizontal=e,this.state="notDragging",this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=(0,s.UCw)({tag:"div"}),this.addElementClasses(this.ePillDropList,"list"),this.registerCSS(".ag-column-drop{align-items:center;display:inline-flex;overflow:auto;position:relative;width:100%}.ag-column-drop-list{align-items:center;display:flex}.ag-column-drop-cell{align-items:center;background-color:var(--ag-column-drop-cell-background-color);border:var(--ag-column-drop-cell-border);border-radius:500px;color:var(--ag-column-drop-cell-text-color);display:flex;padding:calc(var(--ag-spacing)*.25);position:relative;&:focus-visible{box-shadow:var(--ag-focus-shadow)}:where(.ag-drag-handle){color:var(--ag-column-drop-cell-drag-handle-color)}}:where(.ag-ltr) .ag-column-drop-cell{padding-left:calc(var(--ag-spacing)*.75)}:where(.ag-rtl) .ag-column-drop-cell{padding-right:calc(var(--ag-spacing)*.75)}.ag-column-drop-cell-text{flex:1 1 auto;margin:0 var(--ag-spacing);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-column-drop-vertical{align-items:stretch;display:flex;flex-direction:column;min-height:75px;overflow:hidden}.ag-column-drop-vertical-title-bar{align-items:center;display:flex;flex:none;padding:var(--ag-widget-container-vertical-padding) calc(var(--ag-spacing)*2) 0}.ag-column-drop-vertical-list{align-items:stretch;flex-direction:column;flex-grow:1;overflow-x:auto;padding-bottom:var(--ag-spacing);padding-left:var(--ag-spacing);padding-right:var(--ag-spacing);position:relative;>*{flex:none}}:where(.ag-column-drop-empty) .ag-column-drop-vertical-list{overflow:hidden}.ag-column-drop-cell-button{cursor:pointer;min-width:0;opacity:.75;&:hover{opacity:1}}:where(.ag-ltr) .ag-column-drop-cell-button{margin-right:calc(var(--ag-spacing)/4)}:where(.ag-rtl) .ag-column-drop-cell-button{margin-left:calc(var(--ag-spacing)/4)}:where(.ag-ltr) .ag-column-drop-cell-drag-handle{margin-left:calc(var(--ag-spacing)/4)}:where(.ag-rtl) .ag-column-drop-cell-drag-handle{margin-right:calc(var(--ag-spacing)/4)}.ag-column-drop-wrapper{display:flex}.ag-column-drop-horizontal-half-width{width:50%!important}.ag-column-drop-cell-ghost{opacity:.5}.ag-column-drop-horizontal{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;white-space:nowrap}:where(.ag-ltr) .ag-column-drop-horizontal{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-column-drop-horizontal{padding-right:var(--ag-cell-horizontal-padding)}.ag-column-drop-horizontal-list{gap:var(--ag-cell-widget-spacing)}.ag-column-drop-vertical-cell{margin-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-icon{margin-right:var(--ag-widget-horizontal-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-icon{margin-left:var(--ag-widget-horizontal-spacing)}.ag-select-agg-func-popup{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);height:calc(var(--ag-spacing)*5*3.5);padding:0;position:absolute}.ag-select-agg-func-virtual-list-item{cursor:default;&:hover{background-color:var(--ag-selected-row-background-color)}}:where(.ag-ltr) .ag-select-agg-func-virtual-list-item{padding-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-select-agg-func-virtual-list-item{padding-right:calc(var(--ag-spacing)*2)}:where(.ag-ltr) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-column-drop-horizontal-half-width:where(:not(:last-child)){border-left:solid var(--ag-border-width) var(--ag-border-color)}")}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e}isSourceEventFromTarget(e){const{dropZoneTarget:t,dragSource:i}=e;return t.contains(i.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){for(const e of this.guiDestroyFunctions)e();this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,(0,s.fDi)(this.getGui()),(0,s.fDi)(this.ePillDropList)}init(e){this.params=null!==e&&void 0!==e?e:{},this.createManagedBean(new s.G21(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.onKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new s.qyQ(this.getGui()),this.createManagedBean(this.positionableFeature),this.refreshGui(),(0,s.PIC)(this.ePillDropList,this.getAriaLabel())}onTabKeyDown(e){const t=(0,s.YE1)(this.getFocusableElement(),null,!0),i=t.length;if(0===i)return;const{shiftKey:o}=e,n=(0,s.UlD)(this.beans),r=n===t[0],a=n===(0,s.GXs)(t);1===i||r&&o||a&&!o||t[o?0:i-1].focus()}onKeyDown(e){const{key:t}=e,i=!this.horizontal;let o=t===s.DDm.DOWN,n=t===s.DDm.UP;if(!i){const e=this.gos.get("enableRtl");o=!e&&t===s.DDm.RIGHT||e&&t===s.DDm.LEFT,n=!e&&t===s.DDm.LEFT||e&&t===s.DDm.RIGHT}if(o||n)if(e.preventDefault(),e.shiftKey)this.moveFocusedItem(n);else{const e=(0,s.ey2)(this.beans,this.getFocusableElement(),!1,n);e&&e.focus()}}moveFocusedItem(e){const t=this.getFocusedItem();if(-1===t)return;const i=e?-1:1;if(!this.normalizeAndUpdateInsertIndex(t,t+i))return;const o=this.childPillComponents[t];if(!o.isMovable())return;const n=o.getItem();this.focusItemAtIndex(this.insertIndex),this.rearrangeItems([n],!0)}addElementClasses(e,t){t=t?"-".concat(t):"";const i=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop".concat(t),"ag-column-drop-".concat(i).concat(t))}setupDropTarget(){var e;this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),onDragCancel:this.onDragCancel.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},null===(e=this.beans.dragAndDrop)||void 0===e||e.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){const t=this.getNewInsertIndex(e);return!(t<0)&&this.normalizeAndUpdateInsertIndex(this.insertIndex,t)}normalizeAndUpdateInsertIndex(e,t){const i=this.minimumAllowedNewInsertIndex(),o=Math.max(i,t),n=o!==e;return n&&(this.insertIndex=o),n}getNewInsertIndex(e){const t=e.event,i=this.horizontal?t.clientX:t.clientY,o=this.childPillComponents.map(e=>e.getGui().getBoundingClientRect()),n=o.findIndex(e=>this.horizontal?e.right>i&&e.left<i:e.top<i&&e.bottom>i);if(-1===n){const e=this.gos.get("enableRtl");if(o.every(e=>i>(this.horizontal?e.right:e.bottom)))return e&&this.horizontal?0:this.childPillComponents.length;return o.every(e=>i<(this.horizontal?e.left:e.top))?e&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=n?n+1:n}checkDragStartedBySelf(e){"notDragging"===this.state&&(this.state="rearrangeItems",this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){const t=this.getItems(e.dragSource.getDragItem());this.state="newItemsIn";const i=t.filter(t=>this.isItemDroppable(t,e)),o=i.every(e=>-1!==this.childPillComponents.map(e=>e.getItem()).indexOf(e));0!==i.length&&(this.potentialDndItems=i,o?this.state="notDragging":(this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()))}isPotentialDndItems(){var e;return!(null===(e=this.potentialDndItems)||void 0===e||!e.length)}handleDragLeaveEnd(e){}onDragLeave(e){if("rearrangeItems"===this.state){const t=this.getItems(e.dragSource.getDragItem());this.removeItems(t)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragCancel(e){this.isPotentialDndItems()&&("newItemsIn"===this.state&&this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragStop(){this.isPotentialDndItems()&&("newItemsIn"===this.state?this.addItems(this.potentialDndItems):this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}removeItems(e){const t=this.getExistingItems().filter(t=>!e.includes(t));this.updateItems(t)}addItems(e){if(!e)return;const t=this.getExistingItems().slice(),i=e.filter(e=>t.indexOf(e)<0);Os(t,i,this.insertIndex),this.updateItems(t)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e,t){let i;return i=t?this.getExistingItems().filter(t=>-1===e.indexOf(t)):this.getNonGhostItems().slice(),Os(i,e,this.insertIndex),!(0,s.MpY)(i,this.getExistingItems())&&(this.updateItems(i),!0)}refreshGui(){let e=0;this.horizontal||(e=this.ePillDropList.scrollTop);const t=this.resizeEnabled,i=this.getFocusedItem(),{eGridDiv:o}=this.beans,n=(0,s.g3$)();let r=null;var a;n&&(r=null!==(a=(0,s.ey2)(this.beans,o))&&void 0!==a?a:(0,s.ey2)(this.beans,o,!1,!0));this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),0!==e&&(this.ePillDropList.scrollTop=e),t&&this.toggleResizable(t),n&&this.restoreFocus(i,r)}getFocusedItem(){const e=this.getGui(),t=(0,s.UlD)(this.beans);if(!e.contains(t))return-1;return Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t)}focusItemAtIndex(e){const t=this.getGui(),i=Array.from(t.querySelectorAll(".ag-column-drop-cell"))[e];i&&i.focus({preventScroll:!0})}restoreFocus(e,t){const i=this.getGui(),o=Array.from(i.querySelectorAll(".ag-column-drop-cell"));if(-1===e)return;0===o.length&&t.focus();const n=o[Math.min(o.length-1,e)];n&&n.focus()}focusList(e){const t=e?this.childPillComponents.length-1:0;this.restoreFocus(t,this.getFocusableElement())}getNonGhostItems(){const e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(e=>!this.potentialDndItems.includes(e)):e}addItemsToGui(){const e=this.getNonGhostItems().map(e=>this.createItemComponent(e,!1));if(this.isPotentialDndItems()){const t=this.potentialDndItems.map(e=>this.createItemComponent(e,!0));this.insertIndex>=e.length?e.push(...t):e.splice(this.insertIndex,0,...t)}this.appendChild(this.ePillDropList),e.forEach((e,t)=>{t>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(e.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){const{childPillComponents:e,ePillDropList:t}=this,i=e.length;(0,s.lXX)(t,0===i?"presentation":"listbox");for(let o=0;o<i;o++){const t=e[o].getGui();(0,s.c7o)(t,o+1),(0,s.awo)(t,i)}}createItemComponent(e,t){const i=this.createPillComponent(e,this.dropTarget,t,this.horizontal);return i.addEventListener("columnRemove",this.removeItems.bind(this,[e])),this.createBean(i),this.guiDestroyFunctions.push(()=>this.destroyBean(i)),t||this.childPillComponents.push(i),i}addIconAndTitleToGui(){const{title:e,icon:t}=this.params;if(!e||!t)return;const i=(0,s.UCw)({tag:"div"});if((0,s.Pw7)(i,!0),this.addElementClasses(i,"title-bar"),this.addElementClasses(t,"icon"),this.toggleCss("ag-column-drop-empty",this.isExistingItemsEmpty()),i.appendChild(t),!this.horizontal){const t=(0,s.UCw)({tag:"span"});this.addElementClasses(t,"title"),t.textContent=e,i.appendChild(t)}this.appendChild(i)}isExistingItemsEmpty(){return 0===this.getExistingItems().length}addEmptyMessageToGui(){const{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const t=(0,s.UCw)({tag:"span"});t.textContent=e,this.addElementClasses(t,"empty-message"),this.ePillDropList.appendChild(t)}addArrow(e){if(this.horizontal){const t=this.gos.get("enableRtl"),i=(0,s.asF)(t?"panelDelimiterRtl":"panelDelimiter",this.beans);this.addElementClasses(i,"cell-separator"),e.appendChild(i)}}},Vs={tag:"span",role:"option",children:[{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle ag-column-drop-cell-drag-handle",role:"presentation"},{tag:"span",ref:"eText",cls:"ag-column-drop-cell-text",attrs:{"aria-hidden":"true"}},{tag:"span",ref:"eButton",cls:"ag-column-drop-cell-button",role:"presentation"}]},Hs=class extends s.uAl{constructor(e,t,i,o,n){super(),this.dragSourceDropTarget=e,this.ghost=t,this.horizontal=i,this.template=o,this.agComponents=n,this.eText=s.dRA,this.eDragHandle=s.dRA,this.eButton=s.dRA}postConstruct(){var e;this.setTemplate(null!==(e=this.template)&&void 0!==e?e:Vs,this.agComponents);const t=this.getGui(),{beans:i,eDragHandle:o,eText:n,eButton:r}=this;this.addElementClasses(t),this.addElementClasses(o,"drag-handle"),this.addElementClasses(n,"text"),this.addElementClasses(r,"button"),o.appendChild((0,s.asF)("columnDrag",i)),r.appendChild((0,s.asF)("cancel",i)),this.tooltipFeature=this.createOptionalManagedBean(i.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui()})),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const e=this.getLocaleTextFunc(),t=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(t,e),(0,s.PIC)(this.getGui(),t.join(". "))}addAdditionalAriaInstructions(e,t){if(this.isRemovable()){const i=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(i)}}setupTooltip(){const e=()=>{var e;return null===(e=this.tooltipFeature)||void 0===e?void 0:e.setTooltipAndRefresh(this.getTooltip())};e(),this.addManagedEventListeners({newColumnsLoaded:e})}getDragSourceId(){}getDefaultIconName(){return"notAllowed"}addDragSource(){const{beans:{dragAndDrop:e},eDragHandle:t}=this,i=this.createGetDragItem(),o=this.getDefaultIconName(),n={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:t,getDefaultIconName:()=>o,getDragItem:i,dragItemName:this.getDisplayName()};null===e||void 0===e||e.addDragSource(n,!0),this.addDestroyFunc(()=>null===e||void 0===e?void 0:e.removeDragSource(n))}setupComponents(){this.eText.textContent=this.getDisplayValue(),this.setupRemove(),this.ghost&&this.addCss("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){(0,s.nl0)(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const e={type:"columnRemove"};this.addGuiEventListener("keydown",e=>this.onKeyDown(e)),this.addManagedElementListeners(this.eButton,{click:t=>{this.dispatchLocalEvent(e),t.stopPropagation()}});const t=new s.MVO(this.eButton);this.addManagedListeners(t,{tap:()=>this.dispatchLocalEvent(e)}),this.addDestroyFunc(t.destroy.bind(t))}onKeyDown(e){e.key===s.DDm.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchLocalEvent({type:"columnRemove"}))}getDisplayValue(){return this.getDisplayName()}addElementClasses(e,t){t=t?"-".concat(t):"";const i=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop-cell".concat(t),"ag-column-drop-".concat(i,"-cell").concat(t))}destroy(){super.destroy(),this.dragSourceDropTarget=null}},zs=class extends Hs{constructor(e,t,i,o,n){super(t,i,n),this.column=e,this.dropZonePurpose=o,this.eSortIndicator=s.dRA,this.popupShowing=!1}postConstruct(){const{sortSvc:e,colNames:t}=this.beans;this.template={tag:"span",role:"option",children:[{tag:"span",ref:"eDragHandle",cls:"ag-drag-handle ag-column-drop-cell-drag-handle",role:"presentation"},{tag:"span",ref:"eText",cls:"ag-column-drop-cell-text",attrs:{"aria-hidden":"true"}},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:void 0,{tag:"span",ref:"eButton",cls:"ag-column-drop-cell-button",role:"presentation"}]},e&&(this.agComponents=[e.getSortIndicatorSelector()]),this.displayName=t.getDisplayNameForColumn(this.column,"columnDrop"),super.postConstruct(),e&&(this.setupSort(),this.addManagedEventListeners({sortChanged:()=>{this.setupAria()}})),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",()=>{this.refreshRemove(),this.refreshDraggable(),this.setupAria()})}getItem(){return this.column}getDisplayName(){return this.displayName}getTooltip(){return this.column.getColDef().headerTooltip}addAdditionalAriaInstructions(e,t){const i=this.gos.get("rowGroupPanelSuppressSort"),o=this.gos.get("functionsReadOnly");if(this.isAggregationZone()&&!o){const i=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");e.push(i)}if(this.isGroupingZone()&&this.column.isSortable()&&!i){const i=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");e.push(i)}super.addAdditionalAriaInstructions(e,t)}isMovable(){return this.isDraggable()}isDraggable(){return this.isReadOnly()}isRemovable(){return this.isReadOnly()}isReadOnly(){return!this.isGroupingAndLocked()&&!this.gos.get("functionsReadOnly")}getAriaDisplayName(){const e=this.getLocaleTextFunc(),{name:t,aggFuncName:i}=this.getColumnAndAggFuncName(),o=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),n={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},s=this.column.getSort(),r=this.gos.get("rowGroupPanelSuppressSort");return[i&&"".concat(i).concat(o),t,this.isGroupingZone()&&!r&&s&&", ".concat(n[s])].filter(e=>!!e).join("")}getColumnAndAggFuncName(){const e=this.displayName;let t="";if(this.isAggregationZone()){const e=this.column.getAggFunc(),i="string"===typeof e?e:"agg";t=this.getLocaleTextFunc()(i,i)}return{name:e,aggFuncName:t}}setupSort(){if(this.column.isSortable()&&this.isGroupingZone()&&!this.gos.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);const e=e=>{e.preventDefault(),this.beans.sortSvc.progressSortFromEvent(this.column,e)};this.addGuiEventListener("click",e),this.addGuiEventListener("keydown",t=>{t.key===s.DDm.ENTER&&this.isGroupingZone()&&e(t)})}}getDefaultIconName(){return"hide"}createGetDragItem(){const{column:e}=this;return()=>{const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}}setupComponents(){super.setupComponents(),this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}onKeyDown(e){super.onKeyDown(e);e.key===s.DDm.ENTER&&this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&(e.preventDefault(),this.onShowAggFuncSelection())}getDisplayValue(){const{name:e,aggFuncName:t}=this.getColumnAndAggFuncName();return this.isAggregationZone()?"".concat(t,"(").concat(e,")"):e}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;const{aggFuncSvc:e,popupSvc:t}=this.beans,i=new Ji({cssIdentifier:"select-agg-func"}),o=e.getFuncNames(this.column),n=this.getGui(),r=i.getGui();i.setModel({getRow:function(e){return o[e]},getRowCount:function(){return o.length}}),this.createBean(i);const a=(0,s.UCw)({tag:"div",cls:"ag-select-agg-func-popup"});a.style.top="0px",a.style.left="0px",a.appendChild(r),a.style.width="".concat(n.clientWidth,"px");const[l]=this.addManagedElementListeners(a,{focusout:e=>{!a.contains(e.relatedTarget)&&c&&c.hideFunc()}}),d=this.getLocaleTextFunc(),c=t.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:e=>{this.destroyBean(i),this.popupShowing=!1,"Escape"===(null===e||void 0===e?void 0:e.key)&&n.focus(),l&&l()},ariaLabel:d("ariaLabelAggregationFunction","Aggregation Function")});c&&i.setComponentCreator(this.createAggSelect.bind(this,c.hideFunc)),i.addGuiEventListener("keydown",e=>{if(e.key===s.DDm.ENTER||e.key===s.DDm.SPACE){const e=i.getLastFocusedRow();if(null==e)return;const t=i.getComponentAt(e);t&&t.selectItem()}}),t.positionPopupByComponent({type:"aggFuncSelect",eventSource:n,ePopup:a,keepWithinBounds:!0,additionalParams:{column:this.column},position:"under"}),i.refresh();let u=o.findIndex(e=>e===this.column.getAggFunc());-1===u&&(u=0),i.focusRow(u)}createAggSelect(e,t){const i=this.getLocaleTextFunc(),o=t.toString(),n=i(o,o);return new Ws(()=>{var i,o;e(),this.getGui().focus(),null===(i=this.beans.valueColsSvc)||void 0===i||null===(o=i.setColumnAggFunc)||void 0===o||o.call(i,this.column,t,"toolPanelDragAndDrop")},n)}isGroupingAndLocked(){return this.isGroupingZone()&&fs(this.column,this.beans)}isAggregationZone(){return"aggregation"===this.dropZonePurpose}isGroupingZone(){return"rowGroup"===this.dropZonePurpose}getDragSourceType(){return s.qRA.ToolPanel}destroy(){super.destroy(),this.column=null}},Ws=class extends s.uAl{constructor(e,t){super({tag:"div",cls:"ag-select-agg-func-item",children:t}),this.selectItem=e,this.addGuiEventListener("click",this.selectItem)}},Us=class extends Bs{constructor(e,t){super(e),this.dropZonePurpose=t,this.addElementClasses(this.getGui(),this.dropZonePurpose.toLowerCase())}init(e){super.init(e),this.addManagedEventListeners({newColumnsLoaded:this.refreshGui.bind(this)}),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this))}getItems(e){var t;return null!==(t=e.columns)&&void 0!==t?t:[]}isInterestedIn(e){return e===s.qRA.HeaderCell||e===s.qRA.ToolPanel}minimumAllowedNewInsertIndex(){var e;const{gos:t,rowGroupColsSvc:i}=this.beans,o=t.get("groupLockGroupColumns"),n=null!==(e=null===i||void 0===i?void 0:i.columns.length)&&void 0!==e?e:0;return-1===o?n:Math.min(o,n)}showOrHideColumnOnExit(e){return this.isRowGroupPanel()&&(0,s.DEP)(this.gos,!0)&&!e.fromNudge}handleDragEnterEnd(e){if(this.showOrHideColumnOnExit(e)){const t=e.dragSource.getDragItem().columns;this.setColumnsVisible(t,!1,"uiColumnDragged")}}handleDragLeaveEnd(e){if(this.showOrHideColumnOnExit(e)){const t=e.dragSource.getDragItem();this.setColumnsVisible(t.columns,!0,"uiColumnDragged")}}setColumnsVisible(e,t,i){if(e){const o=e.filter(e=>!e.getColDef().lockVisible);this.beans.colModel.setColsVisible(o,t,i)}}isRowGroupPanel(){return"rowGroup"===this.dropZonePurpose}createPillComponent(e,t,i,o){return new zs(e,t,i,this.dropZonePurpose,o)}},js=class extends Us{constructor(e){super(e,"pivot")}postConstruct(){const e=this.getLocaleTextFunc(),t=e("pivotColumnsEmptyMessage","Drag here to set column labels"),i=e("pivots","Column Labels");super.init({icon:(0,s.asF)("pivotPanel",this.beans,null),emptyMessage:t,title:i}),this.addManagedEventListeners({newColumnsLoaded:this.refresh.bind(this),columnPivotChanged:this.refresh.bind(this),columnPivotModeChanged:this.checkVisibility.bind(this)}),this.refresh()}getAriaLabel(){return this.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){const e=this.beans.colModel,t=e.isPivotMode();if(this.horizontal)switch(this.gos.get("pivotPanelShow")){case"always":this.setDisplayed(t);break;case"onlyWhenPivoting":{const i=e.isPivotActive();this.setDisplayed(t&&i);break}default:this.setDisplayed(!1)}else this.setDisplayed(t)}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary())&&(e.isAllowPivot()&&(!e.isPivotActive()||this.isSourceEventFromTarget(t)))}updateItems(e){var t;null===(t=this.beans.pivotColsSvc)||void 0===t||t.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"pivot":"notAllowed"}getExistingItems(){var e,t;return null!==(e=null===(t=this.beans.pivotColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}},_s=class extends Us{constructor(e){super(e,"rowGroup")}postConstruct(){const e=this.getLocaleTextFunc(),t=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),i=e("groups","Row Groups");super.init({icon:(0,s.asF)("rowGroupPanel",this.beans,null),emptyMessage:t,title:i}),this.addManagedEventListeners({columnRowGroupChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary()||e.colDef.showRowGroup)&&(e.isAllowRowGroup()&&(!e.isRowGroupActive()||this.isSourceEventFromTarget(t)))}updateItems(e){var t;null===(t=this.beans.rowGroupColsSvc)||void 0===t||t.setColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"group":"notAllowed"}getExistingItems(){var e,t;return null!==(e=null===(t=this.beans.rowGroupColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}},Ks=class extends Us{constructor(e){super(e,"aggregation")}postConstruct(){const e=this.getLocaleTextFunc(),t=e("valueColumnsEmptyMessage","Drag here to aggregate"),i=e("values","Values");super.init({icon:(0,s.asF)("valuePanel",this.beans,null),emptyMessage:t,title:i}),this.addManagedEventListeners({columnValueChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getIconName(){return this.isPotentialDndItems()?"aggregate":"notAllowed"}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary())&&(e.isAllowValue()&&(!e.isValueActive()||this.isSourceEventFromTarget(t)))}updateItems(e){var t;null===(t=this.beans.valueColsSvc)||void 0===t||t.setColumns(e,"toolPanelUi")}getExistingItems(){var e,t;return null!==(e=null===(t=this.beans.valueColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}},Ys={tag:"div",cls:"ag-pivot-mode-panel",children:[{tag:"ag-toggle-button",ref:"cbPivotMode",cls:"ag-pivot-mode-select"}]},qs=class extends s.uAl{constructor(){super(...arguments),this.cbPivotMode=s.dRA}postConstruct(){this.setTemplate(Ys,[s.OAh]);const e=this.cbPivotMode,{colModel:t,ctrlsSvc:i,gos:o}=this.beans;e.setValue(t.isPivotMode());const n=this.getLocaleTextFunc();e.setLabel(n("pivotMode","Pivot Mode"));const r=()=>{const i=t.isPivotMode();e.setValue(i)};this.addManagedListeners(e,{fieldValueChanged:()=>{const n=!!e.getValue();if(n!==t.isPivotMode()){o.updateGridOptions({options:{pivotMode:n},source:"toolPanelUi"});for(const e of i.getHeaderRowContainerCtrls())e.refresh()}}}),this.addManagedEventListeners({newColumnsLoaded:r,columnPivotModeChanged:r})}},Qs=class extends s.XQb{constructor(){super(...arguments),this.beanName="colToolPanelFactory"}setPanelVisible(e,t,i){return e?e.setDisplayed(t):t&&(e=i()),e}createRowGroupPanel(e,t){return this.createPanel(e,t,new _s(!1))}createValuesPanel(e,t){return this.createPanel(e,t,new Ks(!1))}createPivotPanel(e,t){return this.createPanel(e,t,new js(!1))}createPivotModePanel(e,t,i){return this.createPanel(e,t,new qs,i)}createPanel(e,t,i,o){return i=e.createBean(i),t.push(()=>e.destroyBean(i)),o?e.prependChild(i):e.appendChild(i),i}},Xs={moduleName:"ColumnsToolPanel",version:ki,beans:[Qs],userComponents:{agColumnsToolPanel:Ns},icons:{ensureColumnVisible:"column-arrow",columnsToolPanel:"columns",menuAddRowGroup:"group",menuRemoveRowGroup:"group",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},dependsOn:[Ii,Jn,s.Vc,s.RPC,s.gFd,ts]},$s=class extends s.XQb{constructor(){super(...arguments),this.beanName="chartMenuItemMapper"}getChartItems(e){var t,i;const o=this.beans,s=o.chartSvc,r="pivotChart"===e;if(!s)return null;const a=this.getLocaleTextFunc.bind(this),l=r?new Zs(o,s,a):new Js(o,s,a),d=s.isEnterprise();let c=l.getMenuItem();if(null!==(t=c)&&void 0!==t&&t.subMenu&&!d){const e=t=>{var i;return(0,n.A)((0,n.A)({},t),{},{subMenu:null===(i=t.subMenu)||void 0===i?void 0:i.filter(e=>!e._enterprise).map(t=>e(t))})};c=e(c)}const u=null===(i=this.gos.get("chartToolPanelsDef"))||void 0===i||null===(i=i.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;return u&&(c=this.filterAndOrderChartMenu(c,u,l.getConfigLookup())),this.cleanInternals(c)}cleanInternals(e){if(!e)return e;const t=e=>{null===e||void 0===e||delete e._key,null===e||void 0===e||delete e._enterprise;for(const o of null!==(i=null===e||void 0===e?void 0:e.subMenu)&&void 0!==i?i:[]){var i;t(o)}return e};return t(e)}buildLookup(e){const t={},i=e=>{if(t[e._key]=e,e.subMenu)for(const t of e.subMenu)i(t)};return i(e),t}filterAndOrderChartMenu(e,t,i){var o;const r=this.buildLookup(e),a=(0,n.A)((0,n.A)({},e),{},{subMenu:[]});for(const n of Object.keys(t)){const e=t[n],o=i[n];if(null===o)continue;if(void 0==o){(0,s.ujB)(173,{group:n});continue}const c=r[o._key];if(c)if(c.subMenu){const t=e.map(e=>{const t=o[e];if(void 0!=t)return r[t];(0,s.ujB)(174,{group:n,chartType:e})}).filter(e=>void 0!==e);var l;if(t.length>0)c.subMenu=t,null===(l=a.subMenu)||void 0===l||l.push(c)}else{var d;null===(d=a.subMenu)||void 0===d||d.push(c)}}return 0==(null===(o=a.subMenu)||void 0===o?void 0:o.length)?null:a}},Zs=class{constructor(e,t,i){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=i}getMenuItem(){var e=this;const t=this.getLocaleTextFunc(),i=function(i,o,n,s){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:t(i,o+"\u200e"),action:()=>e.chartSvc.createPivotChart({chartType:n}),_key:s,_enterprise:r}};return{name:t("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:t("columnChart","Column"),subMenu:[i("groupedColumn","Grouped","groupedColumn","pivotGroupedColumn"),i("stackedColumn","Stacked","stackedColumn","pivotStackedColumn"),i("normalizedColumn","100% Stacked","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:t("barChart","Bar"),subMenu:[i("groupedBar","Grouped","groupedBar","pivotGroupedBar"),i("stackedBar","Stacked","stackedBar","pivotStackedBar"),i("normalizedBar","100% Stacked","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:t("pieChart","Pie"),subMenu:[i("pie","Pie","pie","pivotPie"),i("donut","Donut","donut","pivotDonut")]},{_key:"pivotLineChart",name:t("lineChart","Line"),subMenu:[i("lineChart","Line","line","pivotLineChart"),i("stackedLine","Stacked","stackedLine","pivotStackedLine"),i("normalizedLine","100% Stacked","normalizedLine","pivotNormalizedLine")]},{_key:"pivotAreaChart",name:t("areaChart","Area"),subMenu:[i("areaChart","Area","area","pivotArea"),i("stackedArea","Stacked","stackedArea","pivotStackedArea"),i("normalizedArea","100% Stacked","normalizedArea","pivotNormalizedArea")]},{_key:"pivotXYChart",name:t("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter","scatter","pivotScatter"),i("bubble","Bubble","bubble","pivotBubble")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:t("statisticalChart","Statistical"),subMenu:[i("histogramChart","Histogram","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:t("hierarchicalChart","Hierarchical"),subMenu:[i("treemapChart","Treemap","treemap","pivotTreemap",!0),i("sunburstChart","Sunburst","sunburst","pivotSunburst",!0)]},{_key:"pivotFunnel",name:t("funnel","Funnel"),subMenu:[i("funnel","Funnel","funnel","pivotFunnel"),i("coneFunnel","Cone Funnel","coneFunnel","pivotConeFunnel"),i("pyramid","Pyramid","pyramid","pivotPyramid")]},{_key:"pivotCombinationChart",name:t("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line","columnLineCombo","pivotColumnLineCombo"),i("AreaColumnCombo","Area & Column","areaColumnCombo","pivotAreaColumnCombo")]}],icon:(0,s.asF)("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart",stackedLine:"pivotStackedLine",normalizedLine:"pivotNormalizedLine"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},funnelGroup:{_key:"pivotFunnel",funnel:"pivotFunnel",coneFunnel:"pivotConeFunnel",pyramid:"pivotPyramid"},polarGroup:null,specializedGroup:null}}},Js=class{constructor(e,t,i){this.beans=e,this.chartSvc=t,this.getLocaleTextFunc=i}getMenuItem(){var e=this;const t=this.getLocaleTextFunc(),i=function(i,o,n,s){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:t(i,o),action:()=>e.chartSvc.createChartFromCurrentRange(n),_key:s,_enterprise:r}};return{name:t("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:t("columnChart","Column"),subMenu:[i("groupedColumn","Grouped","groupedColumn","rangeGroupedColumn"),i("stackedColumn","Stacked","stackedColumn","rangeStackedColumn"),i("normalizedColumn","100% Stacked","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:t("barChart","Bar"),subMenu:[i("groupedBar","Grouped","groupedBar","rangeGroupedBar"),i("stackedBar","Stacked","stackedBar","rangeStackedBar"),i("normalizedBar","100% Stacked","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:t("pieChart","Pie"),subMenu:[i("pie","Pie","pie","rangePie"),i("donut","Donut","donut","rangeDonut")],_key:"rangePieChart"},{name:t("lineChart","Line"),subMenu:[i("lineChart","Line","line","rangeLineChart"),i("stackedLine","Stacked","stackedLine","rangeStackedLine"),i("normalizedLine","100% Stacked","normalizedLine","rangeNormalizedLine")],_key:"rangeLineChart"},{name:t("areaChart","Area"),subMenu:[i("areaChart","Area","area","rangeArea"),i("stackedArea","Stacked","stackedArea","rangeStackedArea"),i("normalizedArea","100% Stacked","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:t("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter","scatter","rangeScatter"),i("bubble","Bubble","bubble","rangeBubble")],_key:"rangeXYChart"},{name:t("polarChart","Polar"),subMenu:[i("radarLine","Radar Line","radarLine","rangeRadarLine"),i("radarArea","Radar Area","radarArea","rangeRadarArea"),i("nightingale","Nightingale","nightingale","rangeNightingale"),i("radialColumn","Radial Column","radialColumn","rangeRadialColumn"),i("radialBar","Radial Bar","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:t("statisticalChart","Statistical"),subMenu:[i("boxPlot","Box Plot","boxPlot","rangeBoxPlot",!0),i("histogramChart","Histogram","histogram","rangeHistogram",!1),i("rangeBar","Range Bar","rangeBar","rangeRangeBar",!0),i("rangeArea","Range Area","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:t("hierarchicalChart","Hierarchical"),subMenu:[i("treemap","Treemap","treemap","rangeTreemap"),i("sunburst","Sunburst","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:t("specializedChart","Specialized"),subMenu:[i("heatmap","Heatmap","heatmap","rangeHeatmap"),i("waterfall","Waterfall","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:t("funnel","Funnel"),subMenu:[i("funnel","Funnel","funnel","rangeFunnel"),i("coneFunnel","Cone Funnel","coneFunnel","rangeConeFunnel"),i("pyramid","Pyramid","pyramid","rangePyramid")],_key:"rangeFunnel",_enterprise:!0},{name:t("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line","columnLineCombo","rangeColumnLineCombo"),i("AreaColumnCombo","Area & Column","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:(0,s.asF)("chart",this.beans,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart",stackedLine:"rangeStackedLine",normalizedLine:"rangeNormalizedLine"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},funnelGroup:{_key:"rangeFunnel",funnel:"rangeFunnel",coneFunnel:"rangeConeFunnel",pyramid:"rangePyramid"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},er=class extends s.XQb{constructor(){super(...arguments),this.beanName="colChooserFactory"}createColumnSelectPanel(e,t,i,o){var n;const r=e.createManagedBean(new Ls),a=null!==(n=null!==o&&void 0!==o?o:null===t||void 0===t?void 0:t.getColDef().columnChooserParams)&&void 0!==n?n:{},{contractColumnSelection:l,suppressColumnExpandAll:d,suppressColumnFilter:c,suppressColumnSelectAll:u,suppressSyncLayoutWithGrid:h,columnLayout:p}=a;return r.init(!!i,(0,s.AuN)(this.gos,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!l,suppressColumnExpandAll:!!d,suppressColumnFilter:!!c,suppressColumnSelectAll:!!u,suppressSyncLayoutWithGrid:!!p||!!h,onStateUpdated:()=>{}}),"columnMenu"),p&&r.setColumnLayout(p),r}showColumnChooser(e){var t,i;let{column:o,chooserParams:n,eventSource:r,headerPosition:a}=e;this.hideActiveColumnChooser();const l=this.createColumnSelectPanel(this,o,!0,n),d=this.getLocaleTextFunc(),c=this.beans,{visibleCols:u,focusSvc:h,menuUtils:p}=c,g=u.allCols.indexOf(o),v=o&&null!==(t=null!==(i=h.focusedHeader)&&void 0!==i?i:a)&&void 0!==t?t:null;this.activeColumnChooserDialog=this.createBean(new Zi({title:d("chooseColumns","Choose Columns"),component:l,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var e;null===(e=(0,s.ey2)(c,l.getGui()))||void 0===e||e.focus({preventScroll:!0}),this.dispatchVisibleChangedEvent(!0,o)},closedCallback:e=>{const t=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,o),o&&p.restoreFocusOnClose({column:o,headerPosition:v,columnIndex:g,eventSource:r},t,e,!0)},postProcessPopupParams:{type:"columnChooser",column:o,eventSource:r}})),this.activeColumnChooser=l}hideActiveColumnChooser(){this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:"columnChooser",column:null!==t&&void 0!==t?t:null})}},tr={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",pinRowSubMenu:"PinnedRow",pinBottom:"PinnedRow",pinTop:"PinnedRow",unpinRow:"PinnedRow",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortAbsoluteAscending:"Sort",sortAbsoluteDescending:"Sort",sortUnSort:"Sort"};var ir="separator";function or(e,t){if(e)for(let i=e.length-2;i>=0;i--){const o=e[i]===t,n=e[i+1]===t;o&&n&&e.splice(i+1,1)}}var nr={sortAscending:{fallback:"Sort Ascending",getSortDef:()=>({type:"default",direction:"asc"})},sortDescending:{fallback:"Sort Descending",getSortDef:()=>({type:"default",direction:"desc"})},sortAbsoluteAscending:{fallback:"Sort Absolute Ascending",getSortDef:()=>({type:"absolute",direction:"asc"})},sortAbsoluteDescending:{fallback:"Sort Absolute Descending",getSortDef:()=>({type:"absolute",direction:"desc"})},sortUnSort:{fallback:"Clear Sort",getSortDef:e=>{var t;return{type:(0,s.xw4)(null===(t=e.getSortDef())||void 0===t?void 0:t.type),direction:null}}}},sr=class extends s.XQb{constructor(){super(...arguments),this.beanName="menuItemMapper"}mapWithStockItems(e,t,i,o,r){if(!e)return[];const a=[],l=this.getLocaleTextFunc(),{beans:d,gos:c}=this,{pinnedCols:u,colAutosize:h,aggFuncSvc:p,rowGroupColsSvc:g,colNames:v,colModel:m,clipboardSvc:f,expansionSvc:C,focusSvc:w,csvCreator:b,excelCreator:y,menuSvc:S,colChooserFactory:x,sortSvc:F,chartMenuItemMapper:R,valueColsSvc:P,pinnedRowModel:D}=d,E=(e,t,o,n)=>{switch(function(e,t){const i=tr[t];i&&e.assertModuleRegistered(i,"menu item '".concat(t,"'"))}(c,e),e){case"pinSubMenu":return u&&t?{name:l("pinColumn","Pin Column"),icon:(0,s.asF)("menuPin",d,null),subMenu:["clearPinned","pinLeft","pinRight"]}:null;case"pinLeft":return u&&t?{name:l("pinLeft","Pin Left"),action:()=>u.setColsPinned([t],"left",n),checked:!!t&&t.isPinnedLeft()}:null;case"pinRight":return u&&t?{name:l("pinRight","Pin Right"),action:()=>u.setColsPinned([t],"right",n),checked:!!t&&t.isPinnedRight()}:null;case"clearPinned":return u&&t?{name:l("noPin","No Pin"),action:()=>u.setColsPinned([t],null,n),checked:!!t&&!t.isPinned()}:null;case"pinRowSubMenu":{var r,a;const e=c.get("enableRowPinning"),o=[],n=null!==(r=null===i||void 0===i?void 0:i.rowPinned)&&void 0!==r?r:null===i||void 0===i||null===(a=i.pinnedSibling)||void 0===a?void 0:a.rowPinned;return n&&o.push("unpinRow"),e&&"bottom"!==e&&"top"!=n&&o.push("pinTop"),e&&"top"!==e&&"bottom"!=n&&o.push("pinBottom"),null!==D&&void 0!==D&&D.isManual()?{name:l("pinRow","Pin Row"),icon:(0,s.asF)("rowPin",d,t),subMenu:o}:null}case"pinTop":return null!==D&&void 0!==D&&D.isManual()?{name:l("pinTop","Pin to Top"),icon:(0,s.asF)("rowPinTop",d,t),action:e=>{let{node:t,column:i}=e;return t&&D.pinRow(t,"top",i)}}:null;case"pinBottom":return null!==D&&void 0!==D&&D.isManual()?{name:l("pinBottom","Pin to Bottom"),icon:(0,s.asF)("rowPinBottom",d,t),action:e=>{let{node:t,column:i}=e;return t&&D.pinRow(t,"bottom",i)}}:null;case"unpinRow":return null!==D&&void 0!==D&&D.isManual()?{name:l("unpinRow","Unpin Row"),icon:(0,s.asF)("rowUnpin",d,t),action:e=>{let{node:t,column:i}=e;return t&&D.pinRow(t,null,i)}}:null;case"valueAggSubMenu":return p&&P&&(null!==t&&void 0!==t&&t.isPrimary()||null!==t&&void 0!==t&&t.getColDef().pivotValueColumn)?{name:l("valueAggregation","Value Aggregation"),icon:(0,s.asF)("menuValue",d,null),subMenu:rr(t,p,P,l),disabled:c.get("functionsReadOnly")}:null;case"autoSizeThis":return h?{name:l("autosizeThisColumn","Autosize This Column"),action:()=>t&&h.autoSizeColumn(t,n,c.get("skipHeaderOnAutoSize"))}:null;case"autoSizeAll":return h?{name:l("autosizeAllColumns","Autosize All Columns"),action:()=>h.autoSizeAllColumns({source:n,skipHeader:c.get("skipHeaderOnAutoSize")})}:null;case"rowGroup":return g?{name:l("groupBy","Group by")+" "+v.getDisplayNameForColumn(t,"header"),disabled:c.get("functionsReadOnly")||(null===t||void 0===t?void 0:t.isRowGroupActive())||!(null!==t&&void 0!==t&&t.getColDef().enableRowGroup),action:()=>g.addColumns([t],n),icon:(0,s.asF)("menuAddRowGroup",d,null)}:null;case"rowUnGroup":if(g&&c.isModuleRegistered("SharedRowGrouping")){const e=null===t||void 0===t?void 0:t.getColDef().showRowGroup,i=c.get("groupLockGroupColumns");let o,r,a;var E;if(!0===e)o=l("ungroupAll","Un-Group All"),r=c.get("functionsReadOnly")||-1===i||i>=(null!==(E=g.columns.length)&&void 0!==E?E:0),a=()=>g.setColumns(g.columns.slice(0,i),n);else if("string"===typeof e){const t=m.getColDefCol(e),i=null!=t?v.getDisplayNameForColumn(t,"header"):e;o=l("ungroupBy","Un-Group by")+" "+i,r=c.get("functionsReadOnly")||fs(t,d),a=()=>{g.removeColumns([e],n)}}else o=l("ungroupBy","Un-Group by")+" "+v.getDisplayNameForColumn(t,"header"),r=c.get("functionsReadOnly")||!(null!==t&&void 0!==t&&t.isRowGroupActive())||!(null!==t&&void 0!==t&&t.getColDef().enableRowGroup)||fs(t,d),a=()=>g.removeColumns([t],n);return{name:o,disabled:r,action:a,icon:(0,s.asF)("menuRemoveRowGroup",d,null)}}return null;case"resetColumns":return{name:l("resetColumns","Reset Columns"),action:()=>(0,s.wT9)(d,n)};case"expandAll":return C?{name:l("expandAll","Expand All Row Groups"),action:()=>C.expandAll(!0)}:null;case"contractAll":return C?{name:l("collapseAll","Collapse All Row Groups"),action:()=>C.expandAll(!1)}:null;case"copy":return f?{name:l("copy","Copy"),shortcut:l("ctrlC","Ctrl+C"),icon:(0,s.asF)("clipboardCopy",d,null),action:()=>f.copyToClipboard()}:null;case"copyWithHeaders":return f?{name:l("copyWithHeaders","Copy with Headers"),icon:(0,s.asF)("clipboardCopy",d,null),action:()=>f.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return f?{name:l("copyWithGroupHeaders","Copy with Group Headers"),icon:(0,s.asF)("clipboardCopy",d,null),action:()=>f.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(f){const e=w.getFocusedCell(),t=e?(0,s.CFh)(d,e):null,i=!!t&&(null===e||void 0===e?void 0:e.column.isCellEditable(t));return{name:l("cut","Cut"),shortcut:l("ctrlX","Ctrl+X"),icon:(0,s.asF)("clipboardCut",d,null),disabled:!i||c.get("suppressCutToClipboard"),action:()=>f.cutToClipboard(void 0,"contextMenu")}}return null;case"paste":if(f){const e=c.get("suppressClipboardApi")||c.get("suppressClipboardPaste")||!t||!i||!t.isCellEditable(i)||t.isSuppressPaste(i);return{name:l("paste","Paste"),shortcut:l("ctrlV","Ctrl+V"),icon:(0,s.asF)("clipboardPaste",d,null),disabled:e,action:()=>f.pasteFromClipboard()}}return null;case"export":{const e=[];return!c.get("suppressCsvExport")&&b&&e.push("csvExport"),!c.get("suppressExcelExport")&&y&&e.push("excelExport"),e.length?{name:l("export","Export"),subMenu:e,icon:(0,s.asF)("save",d,null)}:null}case"csvExport":return b?{name:l("csvExport","CSV Export"),icon:(0,s.asF)("csvExport",d,null),action:()=>b.exportDataAsCsv()}:null;case"excelExport":return y?{name:l("excelExport","Excel Export"),icon:(0,s.asF)("excelExport",d,null),action:()=>y.exportDataAsExcel()}:null;case"separator":return e;case"pivotChart":case"chartRange":return R.getChartItems(e);case"columnFilter":return S&&t?{name:l("columnFilter","Column Filter"),icon:(0,s.asF)("filter",d,null),action:()=>S.showFilterMenu({column:t,buttonElement:o(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":{const e=w.focusedHeader;return x?{name:l("columnChooser","Choose Columns"),icon:(0,s.asF)("columns",d,null),action:()=>x.showColumnChooser({column:t,eventSource:o(),headerPosition:e})}:null}case"sortUnSort":case"sortAscending":case"sortDescending":case"sortAbsoluteAscending":case"sortAbsoluteDescending":{if(!F||!t)return null;const{fallback:i,getSortDef:o}=nr[e];return{name:l(e,i),icon:(0,s.asF)(e,d,null),action:()=>F.setSortForColumn(t,o(t),!1,n)}}default:return(0,s.ujB)(176,{key:e}),null}};for(const s of e){let e;if(e="string"===typeof s?E(s,t,o,r):(0,n.A)({},s),!e)continue;const l=e,{subMenu:d}=l;d&&d instanceof Array&&(l.subMenu=this.mapWithStockItems(d,t,i,o,r)),null!=e&&a.push(e)}return or(a,ir),a}};function rr(e,t,i,o){let n;if(e.isPrimary())n=e;else{const t=e.getColDef().pivotValueColumn;n=(0,s.Qmv)(t)?t:void 0}const r=[];if(n){const e=n.isValueActive(),s=t.getFuncNames(n);r.push({name:o("noAggregation","None"),action:()=>{i.removeColumns([n],"contextMenu"),i.setColumnAggFunc(n,void 0,"contextMenu")},checked:!e});for(const a of s)r.push({name:o(a,t.getDefaultFuncLabel(a)),action:()=>{i.setColumnAggFunc(n,a,"contextMenu"),i.addColumns([n],"contextMenu")},checked:e&&n.getAggFunc()===a})}return r}var ar=class extends s.XQb{constructor(){super(...arguments),this.beanName="colMenuFactory"}createMenu(e,t,i,o){const n=e.createManagedBean(new ys(0,{column:null!==i&&void 0!==i?i:null,node:null,value:null})),s=this.beans.menuItemMapper.mapWithStockItems(t,null!==i&&void 0!==i?i:null,null,o,"columnMenu");return n.addMenuItems(s),n}getMenuItems(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getDefaultMenuOptions(i);let r;const a=null===(e=null!==(t=null===i||void 0===i?void 0:i.getColDef())&&void 0!==t?t:null===o||void 0===o?void 0:o.getColGroupDef())||void 0===e?void 0:e.mainMenuItems;if(Array.isArray(a))r=a;else if("function"===typeof a)r=a((0,s.AuN)(this.gos,{column:i,columnGroup:o,defaultItems:n}));else{const e=this.gos.getCallback("getMainMenuItems");r=e?e({column:i,columnGroup:o,defaultItems:n}):n}return or(r,ir),r}getDefaultMenuOptions(e){var t;const i=[],{beans:o,gos:n}=this,{colChooserFactory:r,rowGroupColsSvc:a,colModel:l,expansionSvc:d,sortSvc:c,menuSvc:u,pinnedCols:h,aggFuncSvc:p,colAutosize:g}=o,v=(0,s.Dwf)(n),m=()=>{!v&&r&&i.push("columnChooser"),i.push("resetColumns")};if(!e)return m(),i;const{colDef:f}=e,C=h&&!f.lockPinned,w=null!==(t=null===a||void 0===a?void 0:a.columns.length)&&void 0!==t?t:0,b=w>0,y=(0,s.UcN)(n),S=n.get("treeData"),x=e.isPrimary(),F=!x||p&&e.isAllowValue()&&(b||y||S);if(c&&!v&&e.isSortable()){const t=e.getSortDef(),o=(0,s.xw4)(null===t||void 0===t?void 0:t.type),n=(0,s.cyu)(null===t||void 0===t?void 0:t.direction),r=e.getAvailableSortTypes(),a=r.has("default"),l=r.has("absolute"),d="absolute"===o,c="default"===o,u="asc"===n,h="desc"===n;!a||u&&c||i.push("sortAscending"),!a||h&&c||i.push("sortDescending"),!l||u&&d||i.push("sortAbsoluteAscending"),!l||h&&d||i.push("sortAbsoluteDescending"),n&&i.push("sortUnSort"),i.push(ir)}if(null!==u&&void 0!==u&&u.isFilterMenuItemEnabled(e)&&(i.push("columnFilter"),i.push(ir)),C&&i.push("pinSubMenu"),F&&i.push("valueAggSubMenu"),(C||F)&&i.push(ir),g&&(f.suppressAutoSize||i.push("autoSizeThis"),i.push("autoSizeAll"),i.push(ir)),a&&n.isModuleRegistered("SharedRowGrouping")){const t=i.length;if(f.showRowGroup)i.push("rowUnGroup");else if(e.isAllowRowGroup()&&x)if(e.isRowGroupActive()){fs(e,o)||i.push("rowUnGroup")}else i.push("rowGroup");i.length>t&&i.push(ir)}return m(),d&&((0,s.dbY)(n)||n.get("ssrmExpandAllAffectsAllRows"))&&(S||w>(l.isPivotMode()?1:0))&&(i.push("expandAll"),i.push("contractAll")),i}},lr="ag-context-menu-open",dr=class extends s.XQb{constructor(){super(...arguments),this.beanName="contextMenuSvc",this.focusedCell=null}postConstruct(){this.menu=this.createManagedBean(new Si({menuItemCallbacks:ws,getMenuItems:this.getMenuItems.bind(this),mapMenuItems:this.mapWithStockItems.bind(this),beforeMenuOpen:this.beforeMenuOpen.bind(this),onMenuOpen:this.onMenuOpen.bind(this),onMenuClose:this.onMenuClose.bind(this),afterMenuDestroyed:this.afterMenuDestroyed.bind(this),onVisibleChanged:this.dispatchVisibleChangedEvent.bind(this),shouldBlockMenuOpen:()=>{var e;return!(null===(e=this.beans.overlays)||void 0===e||!e.exclusive)}}))}hideActiveMenu(){this.menu.hideActiveMenu()}getMenuItems(e,t){var i;const{column:o,node:n,value:r}=e,a=[],{clipboardSvc:l,chartSvc:d,csvCreator:c,excelCreator:u,colModel:h,rangeSvc:p,gos:g}=this.beans;if((0,s.Qmv)(n)&&l&&o&&(g.get("suppressCutToClipboard")||a.push("cut"),a.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),g.get("enableCharts")&&d&&(h.isPivotMode()&&a.push("pivotChart"),p&&!p.isEmpty()&&a.push("chartRange")),(0,s.Qmv)(n)){const e=g.get("enableRowPinning"),t=g.get("isRowPinnable");if(e){const e=n.level>-1&&n.footer,i=-1===n.level&&n.footer,o=(0,s.UcN)(g);if(i&&!("pinnedBottom"===o||"pinnedTop"===o)||!i&&!e){var v;(null===(v=null===t||void 0===t?void 0:t(n))||void 0===v||v)&&a.push("pinRowSubMenu")}}const i=g.get("suppressExcelExport")||!u,o=g.get("suppressCsvExport")||!c;!(0,s.TvF)()&&(!i||!o)&&a.push("export")}const m=a.length?a:void 0,f=null===o||void 0===o?void 0:o.getColDef().contextMenuItems;if(Array.isArray(f))return f;if("function"===typeof f)return f((0,s.AuN)(g,{column:o,node:n,value:r,defaultItems:m,event:t}));const C=g.getCallback("getContextMenuItems");return null!==(i=null===C||void 0===C?void 0:C({column:o,node:n,value:r,defaultItems:m,event:t}))&&void 0!==i?i:a}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),o=this.getCellGui(i,t);var n;if(!o)return{x:0,y:null!==(n=null===i||void 0===i?void 0:i.getRowYPosition())&&void 0!==n?n:0};const s=o.getBoundingClientRect();return{x:s.x+s.width/2,y:s.y+s.height/2}}showContextMenu(e){var t,i,o,n;const s=null!==(t=e.rowNode)&&void 0!==t?t:null,r=null!==(i=e.column)&&void 0!==i?i:null;let{anchorToElement:a,value:l,source:d}=e;s&&r&&null==l&&(l=this.beans.valueSvc.getValueForDisplay({column:r,node:s}).value),null==a&&(a=this.getContextMenuAnchorElement(s,r)),this.beans.menuUtils.onContextMenu({mouseEvent:null!==(o=e.mouseEvent)&&void 0!==o?o:null,touchEvent:null!==(n=e.touchEvent)&&void 0!==n?n:null,showMenuCallback:e=>this.menu.showMenu({node:s,column:r,value:l},e,a),source:d})}handleContextMenuMouseEvent(e,t,i,o){var n,s,r,a,l;const d=null!==(n=null!==(s=null===o||void 0===o?void 0:o.rowNode)&&void 0!==s?s:null===i||void 0===i?void 0:i.rowNode)&&void 0!==n?n:null,c=null!==(r=null!==(a=null===o||void 0===o?void 0:o.column)&&void 0!==a?a:null===i||void 0===i||null===(l=i.findFullWidthInfoForEvent(e||t))||void 0===l?void 0:l.column)&&void 0!==r?r:null,{valueSvc:u,ctrlsSvc:h}=this.beans,p=c?u.getValue(c,d):null,g=h.getGridBodyCtrl(),v=o?o.eGui:g.eGridBody;this.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:d,column:c,value:p,anchorToElement:v,source:"ui"})}beforeMenuOpen(e){e.column||this.beans.focusSvc.clearFocusedCell()}onMenuOpen(){const{ctrlsSvc:e,focusSvc:t}=this.beans;e.getGridBodyCtrl().eGridBody.classList.add(lr),this.focusedCell=t.getFocusedCell()}onMenuClose(){this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.classList.remove(lr)}afterMenuDestroyed(){const{beans:e,focusedCell:t}=this;(0,s.ySq)(e,t)}dispatchVisibleChangedEvent(e,t){this.eventSvc.dispatchEvent({type:"contextMenuVisibleChanged",visible:e,source:t})}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(null!=t)return this.beans.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(null===i||void 0===i?void 0:i.eGui)||void 0}getContextMenuAnchorElement(e,t){const i=this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody,o=this.getRowCtrl(e);if(!o)return i;const n=this.getCellGui(o,t);return n||(o.isFullWidth()?o.getFullWidthElement():i)}mapWithStockItems(e,t,i){const{column:o,node:n}=t;return this.beans.menuItemMapper.mapWithStockItems(e,o,n,i,"contextMenu")}},cr="filterMenuTab",ur="generalMenuTab",hr="columnsMenuTab",pr=[ur,cr,hr],gr=class extends s.XQb{constructor(){super(...arguments),this.beanName="enterpriseMenuFactory"}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,t,i,o,n){const{column:s,columnGroup:r}=this.splitColumnOrGroup(e),a=n?"filterMenuTab":void 0;this.showMenu(s,r,e=>{const o=e.getGui();var n;(this.beans.popupSvc.positionPopupUnderMouseEvent({type:i,additionalParams:{column:s},mouseEvent:t,ePopup:o}),a)&&(null===(n=e.showTab)||void 0===n||n.call(e,a));this.dispatchVisibleChangedEvent(!0,!1,s,r,a)},i,a,void 0,t.target,o)}splitColumnOrGroup(e){const t=e&&(0,s.R39)(e);return{column:t?e:void 0,columnGroup:t?void 0:e}}showMenuAfterButtonClick(e,t,i,o,n){let r=-1,a="left";this.gos.get("enableRtl")&&(r=1,a="right");const l=n?"filterMenuTab":void 0,d=l?[l]:void 0,c=(0,s.Dwf)(this.gos),u=(c?9:4)*r,h=c?-23:4,{column:p,columnGroup:g}=this.splitColumnOrGroup(e);this.showMenu(p,g,e=>{const o=e.getGui();var n;(this.beans.popupSvc.positionPopupByComponent({type:i,additionalParams:{column:p},eventSource:t,ePopup:o,alignSide:a,nudgeX:u,nudgeY:h,position:"under",keepWithinBounds:!0}),l)&&(null===(n=e.showTab)||void 0===n||n.call(e,l));this.dispatchVisibleChangedEvent(!0,!1,p,g,l)},i,l,d,t,o)}showMenu(e,t,i,o,n,r,a,l){const d=this.getMenuParams(e,t,r,a);if(!d)return;const{menu:c,eMenuGui:u,anchorToElement:h,restoreFocusParams:p}=d,g=[],{menuUtils:v,popupSvc:m}=this.beans;g.push(t=>{const i=c.getGui();this.destroyBean(c),e&&((0,s.R7i)(e,!1,"contextMenu"),v.restoreFocusOnClose(p,i,t)),null===l||void 0===l||l()});const f=this.getLocaleTextFunc();var C;(m.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:i=>{for(const e of g)e(i);this.dispatchVisibleChangedEvent(!1,!1,e,t,n)},afterGuiAttached:e=>c.afterGuiAttached(Object.assign({},{container:o},e)),positionCallback:n?()=>i(c):void 0,ariaLabel:f("ariaLabelColumnMenu","Column Menu")}),n)||(null===(C=c.showTabBasedOnPreviousSelection)||void 0===C||C.call(c),i(c));if((0,s.xbs)(this.gos)){const t=m.setPopupPositionRelatedToElement(u,h);t&&e&&this.addStopAnchoring(t,e,g)}c.addEventListener("tabSelected",t=>{this.dispatchVisibleChangedEvent(!1,!0,e),this.lastSelectedTab=t.key,this.dispatchVisibleChangedEvent(!0,!0,e)}),e&&(0,s.R7i)(e,!0,"contextMenu"),this.activeMenu=c,c.addEventListener("destroyed",()=>{this.activeMenu===c&&(this.activeMenu=null)})}addStopAnchoring(e,t,i){e.then(e=>{t.__addEventListener("leftChanged",e),t.__addEventListener("visibleChanged",e),i.push(()=>{t.__removeEventListener("leftChanged",e),t.__removeEventListener("visibleChanged",e)})})}getMenuParams(e,t,i,o){const{focusSvc:n,visibleCols:s,ctrlsSvc:r}=this.beans,a={column:e,headerPosition:n.focusedHeader,columnIndex:s.allCols.indexOf(e),eventSource:o},l=this.createMenu(e,t,a,i,o);return l?{menu:l,eMenuGui:l.getGui(),anchorToElement:o||r.getGridBodyCtrl().eGridBody,restoreFocusParams:a}:void 0}createMenu(e,t,i,o,n){if((0,s.Dwf)(this.gos))return this.createBean(new vr(e,i,this.lastSelectedTab,o,n));{const o=this.beans.colMenuFactory.getMenuItems(e,t);return o.length?this.createBean(new mr(o,e,i,n)):void 0}}dispatchVisibleChangedEvent(e,t,i,o,n){var r,a;this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:t,key:null!==(r=null!==(a=this.lastSelectedTab)&&void 0!==a?a:n)&&void 0!==r?r:(0,s.Dwf)(this.gos)?ur:"columnMenu",column:null!==i&&void 0!==i?i:null,columnGroup:null!==o&&void 0!==o?o:null})}isMenuEnabled(e){var t,i;if(!(0,s.Dwf)(this.gos))return!0;const o=!(null!==(t=this.beans.filterManager)&&void 0!==t&&t.isFilterAllowed(e)),n=null!==(i=e.getColDef().menuTabs)&&void 0!==i?i:pr;return(o&&n.includes(cr)?n.length-1:n.length)>0}showMenuAfterContextMenuEvent(e,t,i){this.beans.menuUtils.onContextMenu({mouseEvent:t,touchEvent:i,source:"ui",showMenuCallback:t=>(this.showMenuAfterMouseEvent(e,t,"columnMenu"),!0)})}},vr=class extends s.XQb{constructor(e,t,i,o,n){super(),this.column=e,this.restoreFocusParams=t,this.initialSelection=i,this.restrictTo=o,this.sourceElement=n,this.tabFactories={},this.includeChecks={};const{tabFactories:s,includeChecks:r}=this;s[ur]=this.createMainPanel.bind(this),s[cr]=this.createFilterPanel.bind(this),s[hr]=this.createColumnsPanel.bind(this),r[ur]=()=>!0,r[cr]=()=>{var t;return!!e&&!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))},r[hr]=()=>!0}postConstruct(){var e;const t=this.getTabsToCreate().map(e=>this.createTab(e)),i=new Di({items:t,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)});this.tabbedLayout=this.createBean(i),null===(e=this.mainMenuList)||void 0===e||e.setParentComponent(i),this.addDestroyFunc(()=>this.destroyBean(i))}getTabsToCreate(){var e,t;return this.restrictTo?this.restrictTo:(null!==(e=null===(t=this.column)||void 0===t?void 0:t.getColDef().menuTabs)&&void 0!==e?e:pr).filter(e=>this.isValidMenuTabItem(e)&&this.isNotSuppressed(e))}isValidMenuTabItem(e){let t=!0,i=pr;return null!=this.restrictTo&&(t=this.restrictTo.indexOf(e)>-1,i=this.restrictTo),t=t&&pr.indexOf(e)>-1,t||(0,s.ujB)(175,{menuTabName:e,itemsToConsider:i}),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){const{tabItemColumns:t,tabbedLayout:i,tabItemFilter:o,tabItemGeneral:n}=this;t&&e===hr?i.showItem(t):o&&e===cr?i.showItem(o):n&&e===ur?i.showItem(n):i.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=hr;break;case this.tabItemFilter:t=cr;break;case this.tabItemGeneral:t=ur}t&&this.activateTab(t)}activateTab(e){const t={type:"tabSelected",key:e};this.dispatchLocalEvent(t)}createMainPanel(){const{beans:e,column:t}=this,i=e.colMenuFactory,o=i.createMenu(this,i.getMenuItems(t),this.column,()=>{var e;return null!==(e=this.sourceElement)&&void 0!==e?e:this.getGui()});this.mainMenuList=o,o.addEventListener("closeMenu",this.onHidePopup.bind(this));const n={title:(0,s.asF)("legacyMenu",e,t),titleLabel:ur.replace("MenuTab",""),bodyPromise:s.oY$.resolve(o.getGui()),name:ur};return this.tabItemGeneral=n,n}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){const e=this.column?this.createBean(new s.QdF(this.column,"COLUMN_MENU")):null;this.filterComp=e,null!==e&&void 0!==e&&e.hasFilter()||(0,s.CkN)(119);return this.tabItemFilter={title:(0,s.asF)("filterTab",this.beans,this.column),titleLabel:cr.replace("MenuTab",""),bodyPromise:s.oY$.resolve(null===e||void 0===e?void 0:e.getGui()),afterAttachedCallback:t=>null===e||void 0===e?void 0:e.afterGuiAttached(t),afterDetachedCallback:()=>null===e||void 0===e?void 0:e.afterGuiDetached(),name:cr},this.tabItemFilter}createColumnsPanel(){const e=(0,s.UCw)({tag:"div",cls:"ag-menu-column-select-wrapper"}),{beans:t,column:i}=this,o=t.colChooserFactory.createColumnSelectPanel(this,i).getGui();o.classList.add("ag-menu-column-select"),e.appendChild(o);const n={title:(0,s.asF)("columns",t,i),titleLabel:hr.replace("MenuTab",""),bodyPromise:s.oY$.resolve(e),name:hr};return this.tabItemColumns=n,n}afterGuiAttached(e){const{container:t,hidePopup:i}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:i}),i&&(this.hidePopupFunc=i,this.addDestroyFunc(i))}getGui(){return this.tabbedLayout.getGui()}destroy(){super.destroy(),this.destroyBean(this.filterComp)}},mr=class extends s.uAl{constructor(e,t,i,o){super({tag:"div",ref:"eColumnMenu",cls:"ag-menu ag-column-menu",role:"presentation"}),this.menuItems=e,this.column=t,this.restoreFocusParams=i,this.sourceElement=o,this.eColumnMenu=s.dRA}postConstruct(){const e=this.beans.colMenuFactory.createMenu(this,this.menuItems,this.column,()=>{var e;return null!==(e=this.sourceElement)&&void 0!==e?e:this.getGui()});this.mainMenuList=e,e.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(e.getGui())}onHidePopup(e){this.beans.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}afterGuiAttached(e){let{hidePopup:t}=e;t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),(0,s.YtT)(this.mainMenuList.getGui())}};var fr=class extends s.XQb{constructor(){super(...arguments),this.beanName="menuUtils"}restoreFocusOnClose(e,t,i,o){const{eventSource:n}=e,r=i instanceof KeyboardEvent;if(!o&&!r||!n)return;const a=(0,s.UlD)(this.beans);(t.contains(a)||(0,s.sNX)(this.beans))&&this.focusHeaderCell(e)}closePopupAndRestoreFocusOnSelect(e,t,i){let o;null!==i&&void 0!==i&&i.keyboardEvent&&(o=i.keyboardEvent),e(o&&{keyboardEvent:o});const n=this.beans,r=n.focusSvc,a=r.getFocusedCell();if((0,s.sNX)(n))if(a){const{rowIndex:e,rowPinned:t,column:i}=a;r.setFocusedCell({rowIndex:e,column:i,rowPinned:t,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(t)}onContextMenu(e){const{mouseEvent:t,touchEvent:i,showMenuCallback:o,source:n}=e;if(!this.gos.get("allowContextMenuWithControlKey")&&t&&(t.ctrlKey||t.metaKey))return;if(t&&this.blockMiddleClickScrollsIfNeeded(t),"ui"===n&&this.gos.get("suppressContextMenu"))return;if(o(null!==t&&void 0!==t?t:i.touches[0])){const e=null!==t&&void 0!==t?t:i;null!==e&&void 0!==e&&e.cancelable&&e.preventDefault()}}async focusHeaderCell(e){const{column:t,columnIndex:i,headerPosition:o,eventSource:n}=e,{visibleCols:r,headerNavigation:a,focusSvc:l}=this.beans,d=await r.allCols.some(e=>e===t);if(this.isAlive())if(null!==t&&void 0!==t&&t.isAlive()&&d&&n&&(0,s.K05)(n)){const e=(0,s.I_I)(n);e&&(null===a||void 0===a||a.scrollToColumn(t),e.focus())}else if(o&&-1!==i){const e=r.allCols,t=e[i]||(0,s.GXs)(e);t&&l.focusHeaderPosition({headerPosition:{headerRowIndex:o.headerRowIndex,column:t}})}}blockMiddleClickScrollsIfNeeded(e){this.gos.get("suppressMiddleClickScrolls")&&2===e.which&&e.preventDefault()}},Cr={moduleName:"MenuCore",version:ki,beans:[sr,$s,fr],icons:{chart:"chart",columns:"columns",loadingMenuItems:"loading",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",save:"save",csvExport:"csv",excelExport:"excel",sortAscending:"asc",sortDescending:"desc",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc",sortUnSort:"none"},dependsOn:[Ii,s.gFd,s.QhZ,ts]},wr={moduleName:"ColumnMenu",version:ki,beans:[gr,ar,er],icons:{ensureColumnVisible:"column-arrow",legacyMenu:"menu",filterTab:"filter",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate"},apiFunctions:{showColumnChooser:function(e,t){var i;null===(i=e.colChooserFactory)||void 0===i||i.showColumnChooser({chooserParams:t})},hideColumnChooser:function(e){var t;null===(t=e.colChooserFactory)||void 0===t||t.hideActiveColumnChooser()}},dependsOn:[Cr,s.RPC,s.Vc]},br={moduleName:"ContextMenu",version:ki,beans:[dr],apiFunctions:{showContextMenu:function(e,t){const{contextMenuSvc:i}=e;if(!i)return;const{rowNode:o,column:n,value:s,x:r,y:a}=t||{};let{x:l,y:d}=i.getContextMenuPosition(o,n);null!=r&&(l=r),null!=a&&(d=a),i.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:l,clientY:d}),rowNode:o,column:n,value:s,source:"api"})}},dependsOn:[Cr]},yr=class extends s.QKt{constructor(){super({tag:"div",cls:"ag-cell-edit-wrapper"}),this.currentSearchRequest=0,this.onSearchCallback=e=>{const t=++this.currentSearchRequest,i=this.eEditor;i.setValueList({refresh:!0,valueList:void 0});const o=this.params;if(o.search=e,!o.search)return;if("function"!==typeof o.values)return void(this.isFullAsync()&&(0,s.ujB)(294));const n=o.values(o);if(Array.isArray(n))return this.isFullAsync()&&(0,s.ujB)(294),void i.setValueList({refresh:!0,valueList:n});i.setValueList({valueList:n.then(e=>{if(t===this.currentSearchRequest)return e}),refresh:!0})}}initialiseEditor(e){const{cellStartedEdit:t,values:i,eventKey:o}=this.params;(0,s.MWY)(i)&&(0,s.ujB)(180);const{params:n,valueList:r}=this.buildRichSelectParams(),a=this.createManagedBean(new Po(n));this.eEditor=a,a.addCss("ag-cell-editor"),this.appendChild(a),this.isFullAsync()&&a.showPicker(),this.eEditor.setValueList({valueList:r,refresh:!0,isInitial:!0});r&&!Array.isArray(r)&&r.then(e=>{const t=this.getSearchStringCallback(e);t&&a.setSearchStringCreator(t),this.processEventKey(o)}),this.addManagedListeners(a,{fieldPickerValueSelected:this.onEditorPickerValueSelected.bind(this)}),this.focusAfterAttached=t}onEditorPickerValueSelected(e){"fullRow"!==this.gos.get("editType")&&setTimeout(()=>this.params.stopEditing(!e.fromEnterKey))}getPlaceholderText(){const{valuePlaceholder:e}=this.params;if(void 0!==e)return e;const t=this.getLocaleTextFunc();return this.isFullAsync()?t("typeToSearchOoo","Type to search..."):t("advancedFilterBuilderSelectOption","Select an option...")}isFullAsync(){const{allowTyping:e,filterListAsync:t,values:i}=this.params;return!("function"===typeof i)&&t&&(0,s.ujB)(294),!(!e||!t||"function"!==typeof i)}getInitialValueList(){const e=this.params,{values:t}=e,i=this.isFullAsync();return Array.isArray(t)||!t?null!==t&&void 0!==t?t:[]:"function"===typeof t?i?void 0:t((0,n.A)({},e)):[]}buildRichSelectParams(){const e=this.params,{cellRenderer:t,cellRendererParams:i,cellHeight:o,value:n,values:r,formatValue:a,searchDebounceDelay:l,valueListGap:d,valueListMaxHeight:c,valueListMaxWidth:u,allowTyping:h,filterList:p,searchType:g,highlightMatch:v,eventKey:m,multiSelect:f,suppressDeselectAll:C,suppressMultiSelectPillRenderer:w}=e,b={value:n,cellRenderer:t,cellRendererParams:i,cellRowHeight:o,searchDebounceDelay:l,valueFormatter:a,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:d,allowTyping:h,filterList:p,searchType:g,highlightMatch:v,maxPickerHeight:c,maxPickerWidth:u,placeholder:this.getPlaceholderText(),initialInputValue:1===(null===m||void 0===m?void 0:m.length)?m:m===s.DDm.BACKSPACE?"":void 0,multiSelect:f,suppressDeselectAll:C,suppressMultiSelectPillRenderer:w},y=this.getInitialValueList(),S=this.isFullAsync(),x="function"===typeof r;return Array.isArray(r)?(b.valueList=y,b.searchStringCreator=this.getSearchStringCallback(y)):x&&S&&(b.onSearch=this.onSearchCallback,b.allowNoResultsCopy=!0,b.filterList=!0),f&&h&&(e.allowTyping=!1,b.allowTyping=!1,(0,s.ujB)(181)),{params:b,valueList:y}}getSearchStringCallback(e){var t;if("object"!==typeof e[0])return;const i=this.params,{colDef:o,formatValue:n}=i;if(null!==(t=o.cellEditorParams)&&void 0!==t&&t.formatValue)return e=>e.map(n);const{keyCreator:r}=o;if(r){(0,s.ujB)(266);const{column:e,node:t,data:n}=i;return i=>i.map(i=>{const a=(0,s.AuN)(this.gos,{value:i,colDef:o,column:e,node:t,data:n});return r(a)})}return e=>e.map(n)}afterGuiAttached(){const{focusAfterAttached:e,params:t}=this;setTimeout(()=>{if(!this.isAlive())return;const i=this.eEditor,{allowTyping:o,eventKey:n,cellStartedEdit:s}=t;if(e){const e=i.getFocusableElement();e.focus(),!o||n&&1===n.length||e.select()}s&&i.showPicker(),this.processEventKey(n)})}processEventKey(e){e&&(e===s.DDm.BACKSPACE?this.eEditor.searchTextFromString(null):1===(null===e||void 0===e?void 0:e.length)&&this.eEditor.searchTextFromString(e))}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){var e,t;const{params:i}=this,o=this.eEditor.getValue();return null!==(e=null===(t=i.parseValue)||void 0===t?void 0:t.call(i,o))&&void 0!==e?e:o}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e;return t?t({value:this.getValue(),internalErrors:null,cellEditorParams:e}):null}},Sr={moduleName:"RichSelect",version:ki,beans:[],userComponents:{agRichSelect:yr,agRichSelectCellEditor:yr},icons:{richSelectOpen:"small-down",richSelectRemove:"cancel",richSelectLoading:"loading"},dependsOn:[Ii,s.hyn]},xr="__AG_SELECT_ALL__",Fr="__AG_ADD_SELECTION_TO_FILTER__",Rr=class{constructor(e,t,i,o){this.valueSvc=e,this.getValueFormatter=t,this.formatter=i,this.column=o,this.displayedKeys=[]}updateDisplayedValuesToAllAvailable(e,t,i){this.displayedKeys=Array.from(i)}updateDisplayedValuesToMatchMiniFilter(e,t,i,o,n){this.displayedKeys=[];const s=this.getValueFormatter();for(const r of i)if(null==r)n&&this.displayedKeys.push(r);else{const t=e(r),i=this.valueSvc.formatValue(this.column,null,t,s,!1);o(this.formatter(i))&&this.displayedKeys.push(r)}}getDisplayedValueCount(){return this.displayedKeys.length}getDisplayedItem(e){return this.displayedKeys[e]}getSelectAllItem(){return xr}getAddSelectionToFilterItem(){return Fr}getDisplayedKeys(){return this.displayedKeys}forEachDisplayedKey(e){this.displayedKeys.forEach(e)}someDisplayedKey(e){return this.displayedKeys.some(e)}hasGroups(){return!1}refresh(){}},Pr={tag:"div",cls:"ag-set-filter-item",attrs:{"aria-hidden":"true"},children:[{tag:"span",cls:"ag-set-filter-group-icons",children:[{tag:"span",ref:"eGroupClosedIcon",cls:"ag-set-filter-group-closed-icon"},{tag:"span",ref:"eGroupOpenedIcon",cls:"ag-set-filter-group-opened-icon"},{tag:"span",ref:"eGroupIndeterminateIcon",cls:"ag-set-filter-group-indeterminate-icon"}]},{tag:"ag-checkbox",ref:"eCheckbox",cls:"ag-set-filter-item-checkbox"}]},Dr={tag:"div",cls:"ag-set-filter-item",children:[{tag:"ag-checkbox",ref:"eCheckbox",cls:"ag-set-filter-item-checkbox"}]},Er=class extends s.uAl{constructor(e){var t;super(e.isGroup?Pr:Dr,[s.DXf]),this.eCheckbox=s.dRA,this.eGroupOpenedIcon=s.dRA,this.eGroupClosedIcon=s.dRA,this.eGroupIndeterminateIcon=s.dRA,this.formattedValue=null,this.focusWrapper=e.focusWrapper,this.value=e.value,this.params=e.params,this.translate=e.translate,this.valueFormatter=e.valueFormatter,this.item=e.item,this.isSelected=e.isSelected,this.isTree=e.isTree,this.depth=null!==(t=e.depth)&&void 0!==t?t:0,this.isGroup=e.isGroup,this.groupsExist=e.groupsExist,this.isExpanded=e.isExpanded,this.hasIndeterminateExpandState=e.hasIndeterminateExpandState}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.focusWrapper,getLocation:()=>"setFilterValue",shouldDisplayTooltip:()=>{var e,t;return null===(e=null===(t=this.shouldDisplayTooltip)||void 0===t?void 0:t.call(this))||void 0===e||e},getAdditionalParams:()=>{var e;const{colDef:t,column:i}=this.params,o={colDef:t,column:i,valueFormatted:null!==(e=this.formattedValue)&&void 0!==e?e:void 0};return this.isTree&&(o.level=this.depth),o}})),this.addDestroyFunc(()=>{var e;return null===(e=this.destroyCellRendererComponent)||void 0===e?void 0:e.call(this)}),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&(this.addCss("ag-set-filter-indent-"+this.depth),this.getGui().style.setProperty("--ag-indentation-level",String(this.depth))),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCss("ag-set-filter-add-group-indent"),(0,s.v8T)(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),this.params.readOnly||this.eCheckbox.onValueChange(e=>this.onCheckboxChanged(!!e))}getFocusableElement(){return this.focusWrapper}setupExpansion(){const{eGroupClosedIcon:e,eGroupOpenedIcon:t,eGroupIndeterminateIcon:i,hasIndeterminateExpandState:o,beans:n}=this;e.appendChild((0,s.fyk)("setFilterGroupClosed",n,null)),t.appendChild((0,s.fyk)("setFilterGroupOpen",n,null));const r=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(e,{click:r}),this.addManagedElementListeners(t,{click:r}),o&&(i.appendChild((0,s.fyk)("setFilterGroupIndeterminate",n,null)),this.addManagedElementListeners(i,{click:r})),this.setExpandedIcons(),this.refreshAriaExpanded()}onExpandOrContractClicked(){this.setExpanded(!this.isExpanded)}setExpanded(e,t){if(this.isGroup&&e!==this.isExpanded){this.isExpanded=e;const i={type:"expandedChanged",isExpanded:!!e,item:this.item};t||this.dispatchLocalEvent(i),this.setExpandedIcons(),this.refreshAriaExpanded()}}setExpandedIcons(){const{isExpanded:e,hasIndeterminateExpandState:t,eGroupClosedIcon:i,eGroupOpenedIcon:o,eGroupIndeterminateIcon:n}=this;(0,s.nl0)(i,t?!1===e:!e),(0,s.nl0)(o,!0===e),t&&(0,s.nl0)(n,void 0===e)}onCheckboxChanged(e){this.isSelected=e;const t={type:"selectionChanged",isSelected:e,item:this.item};this.dispatchLocalEvent(t),this.refreshVariableAriaLabels(),this.refreshAriaChecked()}toggleSelected(){this.params.readOnly||this.setSelected(!this.isSelected)}setSelected(e,t){this.isSelected=e,this.eCheckbox.setValue(e,t),this.refreshAriaChecked()}refreshVariableAriaLabels(){if(!this.isTree)return;const e=this.getLocaleTextFunc(),t=this.eCheckbox.getValue(),i=void 0===t?e("ariaIndeterminate","indeterminate"):t?e("ariaVisible","visible"):e("ariaHidden","hidden"),o=e("ariaToggleVisibility","Press SPACE to toggle visibility");(0,s.F4t)(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel("".concat(o," (").concat(i,")"))}setupFixedAriaLabels(e){if(!this.isTree)return;const t=this.getLocaleTextFunc()("ariaFilterValue","Filter Value"),i=this.getAriaElement();(0,s.PIC)(i,"".concat(e," ").concat(t)),(0,s.TMe)(i,this.eCheckbox.getInputElement().id)}refreshAriaChecked(){const e=this.getAriaElement();(0,s.cPC)(e,this.eCheckbox.getValue())}refreshAriaExpanded(){(0,s.oAJ)(this.getAriaElement(),!!this.isExpanded)}refresh(e,t,i){this.item=e,t!==this.isSelected&&this.setSelected(t,!0),this.setExpanded(i,!0);const{cellRendererComponent:o,cellRendererParams:n,beans:r,params:a}=this;if(this.valueFunction){const e=this.valueFunction();this.setTooltipAndCellRendererParams(e,e),o||this.renderCellWithoutCellRenderer()}if(o){var l,d;const e=(0,s.Jy1)(r.userCompFactory,a,n);if(!(null===(l=o.refresh)||void 0===l?void 0:l.call(o,null!==(d=null===e||void 0===e?void 0:e.params)&&void 0!==d?d:n))){const e=o;this.renderCell(),this.destroyBean(e)}}}render(){const{params:{column:e}}=this;let{value:t}=this,i=null;"function"===typeof t?(this.valueFunction=t,i=this.valueFunction(),t=i):i=this.isTree?(0,s.qph)(t):this.getFormattedValue(e,t),this.formattedValue=i,this.setTooltipAndCellRendererParams(t,i),this.renderCell()}setTooltipAndCellRendererParams(e,t){const i=this.gos;if(this.params.showTooltips&&(!(0,s.yGc)(i)||!this.params.cellRenderer)){var o;const n=null!=t?t:(0,s.qph)(e);this.shouldDisplayTooltip=(0,s.qmn)(i,()=>this.eCheckbox.getGui().querySelector(".ag-label")),null===(o=this.tooltipFeature)||void 0===o||o.setTooltipAndRefresh(n)}this.cellRendererParams=(0,s.AuN)(i,{value:e,valueFormatted:t,colDef:this.params.colDef,column:this.params.column,setTooltip:(e,t)=>{var o;i.assertModuleRegistered("Tooltip",3),this.shouldDisplayTooltip=t,null===(o=this.tooltipFeature)||void 0===o||o.setTooltipAndRefresh(e)}})}getFormattedValue(e,t){return this.beans.valueSvc.formatValue(e,null,t,this.valueFormatter,!1)}renderCell(){const e=(0,s.Jy1)(this.beans.userCompFactory,this.params,this.cellRendererParams),t=null===e||void 0===e?void 0:e.newAgStackInstance();null!=t?t.then(e=>{e&&(this.cellRendererComponent=e,this.eCheckbox.setLabel(e.getGui()),this.destroyCellRendererComponent=()=>this.destroyBean(e))}):this.renderCellWithoutCellRenderer()}renderCellWithoutCellRenderer(){var e;const{valueFormatted:t,value:i}=this.cellRendererParams;let o=null!==(e=null==t?i:t)&&void 0!==e?e:this.translate("blanks");"string"!==typeof o&&((0,s.ujB)(208),o=""),this.eCheckbox.setLabel(o),this.setupFixedAriaLabels(o)}getComponentHolder(){return this.params.column.getColDef()}},Ar={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches.",ariaSearchFilterValues:"Search filter values",ariaFilterList:"Filter List",filterSummaryListInactive:"is (All)",filterSummaryListSeparator:", ",filterSummaryListShort:e=>"is (".concat(e[0],")"),filterSummaryListLong:e=>"is (".concat(e[0],") and ").concat(e[1]," more")};function Mr(e,t,i){let o=e;return o?(o=o.map(e=>(0,s.qph)((0,s.X7E)(e))),!t&&i&&o.some(e=>null==e)?null==(0,s.GXs)(o)?null:o.filter(e=>null!=e):o):null}function Tr(e,t,i){return(0,s.O65)(e,Ar,t,i)}var kr=class{constructor(e,t,i,o){this.formatter=e,this.treeListPathGetter=t,this.treeListFormatter=i,this.treeDataOrGrouping=o,this.allDisplayedItemsTree=new Map,this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:xr,children:this.allDisplayedItemsTree,expanded:!0,key:xr,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:Fr,expanded:!0,key:Fr,parentTreeKeys:[]}}updateParams(e,t){this.treeListPathGetter=e,this.treeListFormatter=t}updateDisplayedValuesToAllAvailable(e,t,i,o){"reload"===o?this.generateItemTree(e,t,i):"otherFilter"===o?(this.updateAvailable(i),this.updateExpandAll()):"miniFilter"===o&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()}updateDisplayedValuesToMatchMiniFilter(e,t,i,o,n,s){"reload"===s?this.generateItemTree(e,t,i):"otherFilter"===s&&this.updateAvailable(i),this.updateFilter(o,n),this.updateExpandAll(),this.flattenItems()}generateItemTree(e,t,i){const o=new Map;this.allDisplayedItemsTree=o;let n=!1;const s=this.getTreeListPathGetter(e,i);for(const l of t){var r;const t=null!==(r=s(e(l)))&&void 0!==r?r:[null],d=t.length;d>1&&(n=!0);const c=i.has(l);let u,h=o,p=[];for(let e=0;e<d;e++){var a;const i=t[e];h||(h=new Map,u.children=h);const o=null!==(a=null===i||void 0===i?void 0:i.toUpperCase())&&void 0!==a?a:null;u=h.get(o),u||(u={treeKey:i,depth:e,filterPasses:!0,expanded:!1,available:c,parentTreeKeys:p},e===t.length-1&&(u.key=l),h.set(o,u)),h=u.children,p=[...p,i]}}this.groupsExist=n,this.updateAvailable(i),this.selectAllItem.children=o,this.selectAllItem.expanded=!1}getTreeListPathGetter(e,t){if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return e=>e;let i=!1;for(const o of t){const t=e(o);if(t instanceof Date){i=!0;break}if(null!=t)break}return i?e=>(0,s.sZb)(e,!1):((0,s.ujB)(211),e=>[String(e)])}flattenItems(){this.activeDisplayedItemsFlat=[];const e=t=>{for(const i of t.values())i.filterPasses&&i.available&&(this.activeDisplayedItemsFlat.push(i),i.children&&i.expanded&&e(i.children))};e(this.allDisplayedItemsTree)}resetFilter(){const e=t=>{const i=t.children;if(i)for(const o of i.values())e(o);t.filterPasses=!0};for(const t of this.allDisplayedItemsTree.values())e(t)}updateFilter(e,t){const i=i=>!!i.available&&(null==i.treeKey?t:e(this.formatter(this.treeListFormatter?this.treeListFormatter(i.treeKey,i.depth,i.parentTreeKeys):i.treeKey)));for(const o of this.allDisplayedItemsTree.values())this.recursiveItemCheck(o,!1,i,"filterPasses")}getDisplayedValueCount(){return this.activeDisplayedItemsFlat.length}getDisplayedItem(e){return this.activeDisplayedItemsFlat[e]}getSelectAllItem(){return this.selectAllItem}getAddSelectionToFilterItem(){return this.addSelectionToFilterItem}getDisplayedKeys(){const e=[];return this.forEachDisplayedKey(t=>e.push(t)),e}forEachDisplayedKey(e){const t=(i,o)=>{const n=i.children;if(n){if(!i.expanded||!o)for(const e of n.values())e.filterPasses&&t(e,!1)}else e(i.key)};for(const i of this.activeDisplayedItemsFlat)t(i,!0)}someDisplayedKey(e){const t=(i,o)=>{const n=i.children;if(!n)return e(i.key);if(!i.expanded||!o){for(const e of n.values())if(e.filterPasses&&t(e,!1))return!0;return!1}return!1};return this.activeDisplayedItemsFlat.some(e=>t(e,!0))}hasGroups(){return this.groupsExist}refresh(){this.updateExpandAll(),this.flattenItems()}updateExpandAll(){const e=(t,i,o)=>{for(const n of t.values()){if(!n.filterPasses||!n.available||!n.children)continue;if(i=i||!!n.expanded,o=o||!n.expanded,i&&o)return;const t=e(n.children,i,o);if(void 0===t)return;t?i=!0:o=!0}return i&&o?void 0:i},t=this.getSelectAllItem();t.expanded=e(t.children,!1,!1)}recursiveItemCheck(e,t,i,o){let n=!1;const s=e.children;if(s)for(const a of s.values()){const s=this.recursiveItemCheck(a,t||i(e),i,o);n=n||s}const r=t||n||i(e);return e[o]=r,r}updateAvailable(e){const t=t=>e.has(t.key);for(const i of this.allDisplayedItemsTree.values())this.recursiveItemCheck(i,!1,t,"available")}},Ir=class extends s.Q5x{constructor(){super("setFilter","set-filter"),this.filterType="set",this.eMiniFilter=s.dRA,this.eFilterLoading=s.dRA,this.eFilterLoadingIcon=s.dRA,this.eSetFilterList=s.dRA,this.eFilterNoMatches=s.dRA,this.hardRefreshVirtualList=!1,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.selectedKeys=new Set}setParams(e){super.setParams(e);const t=this.updateHandler(e.getHandler()),{column:i,textFormatter:o,treeList:n,treeListPathGetter:s,treeListFormatter:r}=e;this.formatter=null!==o&&void 0!==o?o:e=>null!==e&&void 0!==e?e:null,this.displayValueModel=n?new kr(this.formatter,s,r,t.isTreeDataOrGrouping()):new Rr(this.beans.valueSvc,()=>this.handler.valueFormatter,this.formatter,i),t.valueModel.allKeys.then(e=>{this.isAlive()&&(this.updateDisplayedValues("reload",null!==e&&void 0!==e?e:[]),this.resetSelectionState(null!==e&&void 0!==e?e:[]))}),t.valueModel.isLoading()&&this.setIsLoading(!0),this.initialiseFilterBodyUi()}refresh(e){return this.params.treeList===e.treeList&&(this.updateHandler(e.getHandler()),super.refresh(e))}updateParams(e,t){super.updateParams(e,t),this.updateMiniFilter(),e.suppressSelectAll!==t.suppressSelectAll&&this.createVirtualListModel(e);const{textFormatter:i,treeListPathGetter:o,treeListFormatter:n}=e;this.formatter=null!==i&&void 0!==i?i:e=>null!==e&&void 0!==e?e:null,this.displayValueModel instanceof kr&&this.displayValueModel.updateParams(o,n),this.handler.refreshFilterValues(!0)}updateHandler(e){if(this.handler!==e){for(const e of null!==(t=this.handlerDestroyFuncs)&&void 0!==t?t:[]){var t;e()}this.handlerDestroyFuncs=[...this.addManagedListeners(e,{anyFilterChanged:t=>{e.valueModel.allKeys.then(e=>{this.isAlive()&&(this.updateDisplayedValues("otherFilter",null!==e&&void 0!==e?e:[]),t.updated&&(this.checkAndRefreshVirtualList(),this.showOrHideResults()))})},dataChanged:t=>{let{hardRefresh:i}=t;e.valueModel.allKeys.then(e=>{var t,o;this.isAlive()&&(this.updateDisplayedValues("reload",null!==e&&void 0!==e?e:[]),this.setSelectedModel(null!==(t=null===(o=this.state.model)||void 0===o?void 0:o.values)&&void 0!==t?t:null),i&&(this.hardRefreshVirtualList=!0),this.checkAndRefreshVirtualList())})}}),...this.addManagedListeners(e.valueModel,{loadingStart:()=>this.setIsLoading(!0),loadingEnd:()=>this.setIsLoading(!1)})],this.handler=e}return e}updateUiVisibility(){}createBodyTemplate(){return{tag:"div",cls:"ag-set-filter",children:[{tag:"div",ref:"eFilterLoading",cls:"ag-filter-loading ag-loading ag-hidden",children:[{tag:"span",ref:"eFilterLoadingIcon",cls:"ag-loading-icon"},{tag:"span",cls:"ag-loading-text",children:Tr(this,"loadingOoo")}]},{tag:"ag-input-text-field",ref:"eMiniFilter",cls:"ag-mini-filter"},{tag:"div",ref:"eFilterNoMatches",cls:"ag-filter-no-matches ag-hidden",children:Tr(this,"noMatches")},{tag:"div",ref:"eSetFilterList",cls:"ag-set-filter-list",role:"presentation"}]}}getAgComponents(){return[s.n1z]}handleKeyDown(e){var t,i,o;if(super.handleKeyDown(e),e.defaultPrevented)return;const n=()=>{if(!this.eSetFilterList.contains((0,s.UlD)(this.beans)))return;const t=this.virtualList.getLastFocusedRow();if(null==t)return;const i=this.virtualList.getComponentAt(t);if(null==i)return;e.preventDefault();const{readOnly:o}=this.params;return o?void 0:i};switch(e.key){case s.DDm.SPACE:null===(t=n())||void 0===t||t.toggleSelected();break;case s.DDm.ENTER:this.handleKeyEnter(e);break;case s.DDm.LEFT:null===(i=n())||void 0===i||i.setExpanded(!1);break;case s.DDm.RIGHT:null===(o=n())||void 0===o||o.setExpanded(!0)}}handleKeyEnter(e){e.preventDefault();const{excelMode:t,readOnly:i}=this.params;t&&!i&&(this.params.onAction("apply",void 0,e),"mac"===this.params.excelMode&&this.eMiniFilter.getInputElement().select())}setModelAndRefresh(e){return this.setSelectedModel(e).then(()=>{this.isAlive()&&this.checkAndRefreshVirtualList()})}setModelIntoUi(e){var t,i;this.setMiniFilter(null!==(t=null===(i=this.params.state.state)||void 0===i?void 0:i.miniFilterValue)&&void 0!==t?t:null,!0);const o=null==e?null:e.values;return this.setModelAndRefresh(o)}getModelFromUi(){const e=this.getSelectedModel();return e?{values:e,filterType:this.filterType}:null}areNonNullModelsEqual(e,t){return(0,s.MpY)(e.values,t.values)}setIsLoading(e){(0,s.nl0)(this.eFilterLoading,e),e||(this.hardRefreshVirtualList=!0)}initialiseFilterBodyUi(){this.initVirtualList(),this.initMiniFilter(),this.initLoading()}initLoading(){const e=(0,s.asF)("setFilterLoading",this.beans,this.params.column);e&&this.eFilterLoadingIcon.appendChild(e)}initVirtualList(){const e=Tr(this,"ariaFilterList"),t=!!this.params.treeList,i=this.virtualList=this.createBean(new Ji({cssIdentifier:"filter",ariaRole:t?"tree":"listbox",listName:e})),o=this.eSetFilterList;t&&o.classList.add("ag-set-filter-tree-list"),o.appendChild(i.getGui());const{cellHeight:n}=this.params;null!=n&&i.setRowHeight(n);i.setComponentCreator((e,i)=>this.createSetListItem(e,t,i));i.setComponentUpdater((e,t)=>this.updateSetListItem(e,t)),this.createVirtualListModel(this.params)}createVirtualListModel(e){let t;t=e.suppressSelectAll?new Lr(this.displayValueModel):new Nr(this.displayValueModel,this.showAddCurrentSelectionToFilter.bind(this)),e.treeList&&(t=new Or(t)),this.virtualList.setModel(t)}getSelectAllLabel(){return Tr(this,null!=this.miniFilterText&&this.params.excelMode?"selectAllSearchResults":"selectAll")}getAddSelectionToFilterLabel(){return Tr(this,"addCurrentSelectionToFilter")}createSetListItem(e,t,i){const o=this.displayValueModel.hasGroups(),{isSelected:n,isExpanded:s}=this.isSelectedExpanded(e),{value:r,depth:a,isGroup:l,hasIndeterminateExpandState:d,selectedListener:c,expandedListener:u}=this.newSetListItemAttributes(e),h={focusWrapper:i,value:r,params:this.params,translate:e=>Tr(this,e),valueFormatter:this.handler.valueFormatter,item:e,isSelected:n,isTree:t,depth:a,groupsExist:o,isGroup:l,isExpanded:s,hasIndeterminateExpandState:d},p=this.createBean(new Er(h));return p.addEventListener("selectionChanged",c),u&&p.addEventListener("expandedChanged",u),p}newSetTreeItemAttributes(e){var t,i,o;const n=this.displayValueModel.hasGroups();return e.key===xr?{value:()=>this.getSelectAllLabel(),isGroup:n,depth:e.depth,hasIndeterminateExpandState:!0,selectedListener:e=>this.onSelectAll(e.isSelected),expandedListener:e=>this.onExpandAll(e.item,e.isExpanded)}:e.key===Fr?{value:()=>this.getAddSelectionToFilterLabel(),depth:e.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:e=>{this.addCurrentSelectionToFilter=e.isSelected,this.refreshAfterSelection()}}:e.children?{value:null!==(s=null===(r=(a=this.params).treeListFormatter)||void 0===r?void 0:r.call(a,e.treeKey,e.depth,e.parentTreeKeys))&&void 0!==s?s:e.treeKey,depth:e.depth,isGroup:!0,selectedListener:e=>this.onGroupItemSelected(e.item,e.isSelected),expandedListener:e=>this.onExpandedChanged(e.item,e.isExpanded)}:{value:null!==(t=null===(i=(o=this.params).treeListFormatter)||void 0===i?void 0:i.call(o,e.treeKey,e.depth,e.parentTreeKeys))&&void 0!==t?t:e.treeKey,depth:e.depth,selectedListener:e=>this.onItemSelected(e.item.key,e.isSelected)};var s,r,a}newSetListItemAttributes(e){var t;return this.isSetFilterModelTreeItem(e)?this.newSetTreeItemAttributes(e):e===xr?{value:()=>this.getSelectAllLabel(),selectedListener:e=>this.onSelectAll(e.isSelected)}:e===Fr?{value:()=>this.getAddSelectionToFilterLabel(),selectedListener:e=>{this.addCurrentSelectionToFilter=e.isSelected,this.refreshAfterSelection()}}:{value:null!==(t=this.handler.valueModel.allValues.get(e))&&void 0!==t?t:null,selectedListener:e=>this.onItemSelected(e.item,e.isSelected)}}updateSetListItem(e,t){const{isSelected:i,isExpanded:o}=this.isSelectedExpanded(e);t.refresh(e,i,o)}isSelectedExpanded(e){let t,i;return this.isSetFilterModelTreeItem(e)?(i=e.expanded,t=e.key===xr?this.isSelectAllSelected():e.key===Fr?this.isAddCurrentSelectionToFilterChecked():e.children?this.areAllChildrenSelected(e):this.selectedKeys.has(e.key)):t=e===xr?this.isSelectAllSelected():e===Fr?this.isAddCurrentSelectionToFilterChecked():this.selectedKeys.has(e),{isSelected:t,isExpanded:i}}isSetFilterModelTreeItem(e){return void 0!==(null===e||void 0===e?void 0:e.treeKey)}initMiniFilter(){const{eMiniFilter:e}=this;this.updateMiniFilter(),e.onValueChange(()=>this.onMiniFilterInput()),e.setInputAriaLabel(Tr(this,"ariaSearchFilterValues")),this.addManagedElementListeners(e.getInputElement(),{keydown:e=>this.onMiniFilterKeyDown(e)})}updateMiniFilter(){const{eMiniFilter:e,miniFilterText:t,params:i}=this;e.setDisplayed(!i.suppressMiniFilter),e.setValue(t)}afterGuiAttached(e){super.afterGuiAttached(e),this.resetExpansion(),this.refreshVirtualList();const{eMiniFilter:t}=this;t.setInputPlaceholder(Tr(this,"searchOoo")),null!==e&&void 0!==e&&e.suppressFocus||(t.isDisplayed()?t.getFocusableElement().focus():this.virtualList.awaitStable(()=>this.virtualList.focusRow(0)))}afterGuiDetached(){var e;super.afterGuiDetached();const{column:t,excelMode:i,model:o,onStateChange:n}=this.params;null!==(e=this.beans.colFilter)&&void 0!==e&&e.shouldKeepStateOnDetach(t)||(i&&this.resetMiniFilter(),(i||o!==this.state.model)&&(n({model:o,state:this.getState()}),this.showOrHideResults()))}canApply(e){return!this.params.excelMode||(null==e||e.values.length>0)}onNewRowsLoaded(){}setFilterValues(e){(0,s.ujB)(283),this.handler.setFilterValues(e)}resetFilterValues(){(0,s.ujB)(283),this.handler.resetFilterValues()}refreshFilterValues(){(0,s.ujB)(283),this.doRefreshFilterValues()}doRefreshFilterValues(){this.handler.refreshFilterValues()}onAnyFilterChanged(){}onMiniFilterInput(e){if(!this.doSetMiniFilter(this.eMiniFilter.getValue()))return;if(e)return void this.showOrHideResults();const{applyMiniFilterWhileTyping:t,readOnly:i,excelMode:o}=this.params,n=!i&&(t||!!o),s=t&&!i?"debounce":void 0;this.updateUiAfterMiniFilterChange(n,s)}updateUiAfterMiniFilterChange(e,t){if(e){const{excelMode:e,readOnly:t,model:o}=this.params;var i;if(e&&!t&&null==this.miniFilterText)this.setModelAndRefresh(null!==(i=null===o||void 0===o?void 0:o.values)&&void 0!==i?i:null);else this.selectAllMatchingMiniFilter(!0)}this.checkAndRefreshVirtualList(),this.onUiChanged(e?t:"prevent"),this.showOrHideResults()}showOrHideResults(){const e=null!=this.miniFilterText&&this.displayValueModel.getDisplayedValueCount()<1;(0,s.nl0)(this.eFilterNoMatches,e),(0,s.nl0)(this.eSetFilterList,!e)}resetMiniFilter(){this.eMiniFilter.setValue(null,!0),this.doSetMiniFilter(null)}onMiniFilterKeyDown(e){const{excelMode:t,readOnly:i}=this.params;e.key!==s.DDm.ENTER||t||i||this.updateUiAfterMiniFilterChange(!0,"immediately")}focusRowIfAlive(e){return null==e?Promise.resolve():new Promise(t=>{window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e),t()},0)})}onSelectAll(e){e?this.selectAllMatchingMiniFilter():this.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()}onGroupItemSelected(e,t){const i=e=>{if(!e.filterPasses)return;const o=e.children;if(o)for(const t of o.values())i(t);else this.setKeySelected(e.key,t)};i(e),this.refreshAfterSelection()}onItemSelected(e,t){this.setKeySelected(e,t),this.refreshAfterSelection()}onExpandAll(e,t){const i=e=>{if(e.filterPasses&&e.available&&e.children){for(const t of e.children.values())i(t);e.expanded=t}};i(e),this.refreshAfterExpansion()}onExpandedChanged(e,t){e.expanded=t,this.refreshAfterExpansion()}refreshAfterExpansion(){const e=this.virtualList.getLastFocusedRow();this.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(e)}refreshAfterSelection(){const e=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(e)}setMiniFilter(e,t){this.eMiniFilter.setValue(e,t),this.onMiniFilterInput(t)}doSetMiniFilter(e){return e=(0,s.X7E)(e),this.miniFilterText!==e&&(null===e&&(this.addCurrentSelectionToFilter=!1),this.miniFilterText=e,this.updateDisplayedValues("miniFilter"),!0)}getMiniFilter(){return this.miniFilterText}getUiChangeEventParams(){return{miniFilterValue:this.miniFilterText}}getState(){const e=this.miniFilterText;return e?{miniFilterValue:e}:void 0}checkAndRefreshVirtualList(){this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)}getFilterKeys(){return(0,s.ujB)(283),this.handler.getFilterKeys()}getFilterValues(){return(0,s.ujB)(283),this.handler.getFilterValues()}refreshVirtualList(){this.params.refreshValuesOnOpen?this.doRefreshFilterValues():this.checkAndRefreshVirtualList()}isSelectAllSelected(){if(this.params.defaultToNothingSelected){if(this.hasSelections()&&this.isEverythingVisibleSelected())return!0;if(this.isNothingVisibleSelected())return!1}else{if(this.hasSelections()&&this.isNothingVisibleSelected())return!1;if(this.isEverythingVisibleSelected())return!0}}areAllChildrenSelected(e){const t=e=>{if(e.children){let i=!1,o=!1;for(const n of e.children.values()){if(!n.filterPasses||!n.available)continue;const e=t(n);if(void 0===e)return;if(e?i=!0:o=!0,i&&o)return}return i}return this.selectedKeys.has(e.key)};return this.params.defaultToNothingSelected?this.hasSelections()&&t(e):t(e)}resetExpansion(){if(!this.params.treeList)return;const e=this.displayValueModel.getSelectAllItem();if(this.isSetFilterModelTreeItem(e)){const t=e=>{const i=e.children;if(i){for(const e of i.values())t(e);e.expanded=!1}};t(e),this.updateDisplayedValues("expansion")}}getModelAsString(e){return this.handler.getModelAsString(e)}getPositionableElement(){return this.eSetFilterList}updateDisplayedValues(e,t){if("expansion"===e)return void this.displayValueModel.refresh();const i=this.handler,o=i.valueModel;if(null==this.miniFilterText)return void this.displayValueModel.updateDisplayedValuesToAllAvailable(e=>{var t;return null!==(t=o.allValues.get(e))&&void 0!==t?t:null},t,o.availableKeys,e);const n=i.caseFormat(this.formatter(this.miniFilterText)||""),s=e=>null!=e&&i.caseFormat(e).includes(n),r=!!this.params.excelMode&&s(Tr(this,"blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(e=>{var t;return null!==(t=o.allValues.get(e))&&void 0!==t?t:null},t,o.availableKeys,s,r,e)}hasSelections(){return this.params.defaultToNothingSelected?this.selectedKeys.size>0:this.handler.valueModel.allValues.size!==this.selectedKeys.size}isInWindowsExcelMode(){return"windows"===this.params.excelMode}isAddCurrentSelectionToFilterChecked(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter}showAddCurrentSelectionToFilter(){return this.isInWindowsExcelMode()&&(0,s.Qmv)(this.miniFilterText)&&this.miniFilterText.length>0}selectAllMatchingMiniFilter(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null==this.miniFilterText?this.selectedKeys=new Set(this.handler.valueModel.allValues.keys()):(e&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(e=>this.selectedKeys.add(e)))}deselectAllMatchingMiniFilter(){null==this.miniFilterText?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(e=>this.selectedKeys.delete(e))}setKeySelected(e,t){t?this.selectedKeys.add(e):(this.params.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(e))}isEverythingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>!this.selectedKeys.has(e))}isNothingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>this.selectedKeys.has(e))}getSelectedModel(){var e;if(!this.hasSelections())return null;const t=this.isAddCurrentSelectionToFilterChecked()?null===(e=this.params.model)||void 0===e?void 0:e.values:void 0;if(null!==t&&void 0!==t&&t.length){if(this.selectedKeys){const e=new Set([...t,...this.selectedKeys]);return Array.from(e)}return Array.from(t)}return Array.from(this.selectedKeys)}setSelectedModel(e){const t=this.handler,i=t.valueModel;return i.allKeys.then(o=>{if(null==e)this.resetSelectionState(null!==o&&void 0!==o?o:[]);else{this.selectedKeys.clear();const o=new Map;i.allValues.forEach((e,i)=>{o.set(t.caseFormat(i),i)}),e.forEach(e=>{const i=t.caseFormat((0,s.X7E)(e)),n=o.get(i);void 0!==n&&this.selectedKeys.add(n)})}})}resetSelectionState(e){this.params.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(e)}getFilterHandler(){return this.handler}destroy(){this.virtualList=this.destroyBean(this.virtualList);for(const t of null!==(e=this.handlerDestroyFuncs)&&void 0!==e?e:[]){var e;t()}this.handler=void 0,this.displayValueModel=void 0,this.selectedKeys.clear(),super.destroy()}},Lr=class{constructor(e){this.model=e}getRowCount(){return this.model.getDisplayedValueCount()}getRow(e){return this.model.getDisplayedItem(e)}areRowsEqual(e,t){return e===t}},Nr=class{constructor(e,t){this.model=e,this.showAddCurrentSelectionToFilter=t}getRowCount(){const e=this.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+e}getRow(e){if(0===e)return this.model.getSelectAllItem();const t=this.showAddCurrentSelectionToFilter(),i=t?2:1;return 1===e&&t?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(e-i)}areRowsEqual(e,t){return e===t}},Or=class{constructor(e){this.model=e}getRowCount(){return this.model.getRowCount()}getRow(e){return this.model.getRow(e)}areRowsEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.treeKey===t.treeKey&&e.depth===t.depth}},Gr=class extends s.XQb{constructor(e,t,i,o,n){super(),this.createKey=e,this.caseFormat=t,this.getValue=i,this.isTreeDataOrGrouping=o,this.isTreeData=n}extractUniqueValuesAsync(e,t){return new s.oY$(i=>{if(this.beans.rowModel.rowCountReady)i(this.extractUniqueValues(e,t));else{const[o]=this.addManagedEventListeners({rowCountReady:()=>{null===o||void 0===o||o(),i(this.extractUniqueValues(e,t))}})}})}extractUniqueValues(e,t){var i;const o=new Map,n=this.extractExistingFormattedKeys(t),r=new Set,a=this.isTreeData(),l=this.isTreeDataOrGrouping(),d=null===(i=this.beans.rowGroupColsSvc)||void 0===i?void 0:i.columns,c=this.gos.get("groupAllowUnbalanced"),u=(e,i)=>{const a=this.caseFormat(e);if(!r.has(a)){r.add(a);let l=e,d=(0,s.X7E)(i);const c=null===n||void 0===n?void 0:n.get(a);null!=c&&(l=c,d=t.get(c)),o.set(l,d)}};return this.beans.rowModel.forEachLeafNode(t=>{if(!t.data||!e(t))return;if(l)return void this.addValueForTreeDataOrGrouping(t,a,d,u,c);const i=this.getValue(t);if(null!=i&&Array.isArray(i)){for(const e of i)u(this.createKey(e,t),e);0===i.length&&u(null,null)}else u(this.createKey(i,t),i)}),o}addValueForTreeDataOrGrouping(e,t){let i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(t){var r,a,l;if(null!==(r=e.childrenAfterGroup)&&void 0!==r&&r.length)return;i=null!==(a=e.getRoute())&&void 0!==a?a:[null!==(l=e.key)&&void 0!==l?l:e.id]}else i=o.map(t=>this.beans.valueSvc.getKeyForNode(t,e)),i.push(this.getValue(e));const d=Mr(i,t,s);n(this.createKey(d),d)}extractExistingFormattedKeys(e){if(!e)return null;const t=new Map;return e.forEach((e,i)=>{t.set(this.caseFormat(i),i)}),t}},Br=class{constructor(e){this.caseFormat=e,this.keys=null}isNull(){return null==this.keys}isEmpty(){var e;return!(null!==(e=this.keys)&&void 0!==e&&e.size)}update(e){const t=new Set;this.keys=t;const i=null===e||void 0===e?void 0:e.values;if(i){const e=this.caseFormat;for(let o=0,n=i.length;o<n;o++)t.add(e(i[o]))}}has(e){var t;return!(null===(t=this.keys)||void 0===t||!t.has(this.caseFormat(e)))}destroy(){this.keys=null}},Vr=(e=>(e[e.PROVIDED_LIST=0]="PROVIDED_LIST",e[e.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",e[e.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES",e))(Vr||{}),Hr=Vr,zr=class extends s.XQb{constructor(e,t,i,o,n){super(),this.clientSideValuesExtractor=e,this.caseFormat=t,this.createKey=i,this.isTreeDataOrGrouping=o,this.params=n,this.allValues=new Map,this.availableKeys=new Set,this.providedValues=null,this.initialised=!1}postConstruct(){const e=this.params,t=e.handlerParams.filterParams.values;this.updateParams(e),null==t?this.valuesType=2:(this.valuesType=Array.isArray(t)?0:1,this.providedValues=t),this.updateAllValues()}refresh(e){const t=e.handlerParams;if("colDef"!==t.source)return;const{values:i,suppressSorting:o}=t.filterParams,n=this.providedValues,s=this.params.handlerParams.filterParams.suppressSorting;this.params=e,this.updateParams(e),this.providedValues=null!==i&&void 0!==i?i:null,this.providedValues===n&&o===s||(i&&0!==i.length?this.valuesType=Array.isArray(i)?0:1:(this.valuesType=2,this.providedValues=null),this.updateAllValues())}updateParams(e){const{handlerParams:{colDef:t,filterParams:{comparator:i,treeList:o,treeListPathGetter:n}},usingComplexObjects:r}=e,a=null!==i&&void 0!==i?i:t.comparator,l=this.isTreeDataOrGrouping();let d;d=l&&!a?(e,t)=>{let[i,o]=e,[n,r]=t;if(null==o)return null==r?0:-1;if(null==r)return 1;for(let a=0;a<o.length;a++){if(a>=r.length)return 1;const e=(0,s.j0N)(o[a],r[a]);if(0!==e)return e}return 0}:!o||n||a?(e,t)=>{let[i,o]=e,[n,s]=t;return a(o,s)}:(e,t)=>{let[i,o]=e,[n,r]=t;return(0,s.j0N)(o,r)},this.entryComparator=d,this.keyComparator=null!==a&&void 0!==a?a:s.j0N,this.compareByValue=!!(r&&a||l||o&&!n)}updateAllValues(){return this.allKeys=new s.oY$(e=>{switch(this.valuesType){case 2:this.getValuesFromRowsAsync().then(t=>e(this.processAllValues(t)));break;case 0:e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(this.providedValues))));break;case 1:{this.dispatchLocalEvent({type:"loadingStart"});const t=this.providedValues,{column:i,colDef:o}=this.params.handlerParams,n=(0,s.AuN)(this.gos,{success:t=>{this.dispatchLocalEvent({type:"loadingEnd"}),e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(t))))},colDef:o,column:i});window.setTimeout(()=>t(n),0);break}}}),this.allKeys.then(e=>{this.updateAvailableKeys(null!==e&&void 0!==e?e:[]),this.initialised=!0}),this.allKeys}getAvailableValues(e){return this.sortKeys(this.getValuesFromRows(e))}overrideValues(e){return this.allKeys.then(()=>{this.valuesType=0,this.providedValues=e})}refreshAvailable(){return new s.oY$(e=>{this.showAvailableOnly()?this.allKeys.then(t=>{const i=null!==t&&void 0!==t?t:[];this.updateAvailableKeys(i),e(!0)}):e(!1)})}refreshAll(){return new s.oY$(e=>{this.allKeys.then(()=>{this.updateAllValues().then(()=>{e()})})})}isLoading(){return!this.initialised&&1===this.valuesType}isInitialised(){return this.initialised}getValueForFormatter(e){return this.initialised?this.allValues.get(e):e}getAvailableKeys(e){return this.initialised?e.filter(e=>this.availableKeys.has(e)):e}getParamsForValuesFromRows(e){if(!this.clientSideValuesExtractor)return void(0,s.CkN)(113);return e&&!this.params.handlerParams.filterParams.caseSensitive?this.allValues:void 0}getValuesFromRows(e){var t,i;const o=this.getParamsForValuesFromRows(!0);return null!==(t=null===(i=this.clientSideValuesExtractor)||void 0===i?void 0:i.extractUniqueValues(e,o))&&void 0!==t?t:null}getValuesFromRowsAsync(){var e,t;const i=this.getParamsForValuesFromRows(!1);return null!==(e=null===(t=this.clientSideValuesExtractor)||void 0===t?void 0:t.extractUniqueValuesAsync(()=>!0,i))&&void 0!==e?e:s.oY$.resolve(null)}processAllValues(e){const t=this.sortKeys(e);return this.allValues=null!==e&&void 0!==e?e:new Map,t}uniqueValues(e){const t=new Map,i=new Set,{caseFormat:o,createKey:n}=this;for(const r of null!==e&&void 0!==e?e:[]){const e=(0,s.X7E)(r),a=n(e),l=o(a);i.has(l)||(i.add(l),t.set(a,e))}return t}validateProvidedValues(e){if(this.params.usingComplexObjects&&null!==e&&void 0!==e&&e.length){const t=e[0];if(t&&"object"!==typeof t&&"function"!==typeof t){null==this.createKey(t)?(0,s.ujB)(209):(0,s.ujB)(210)}}return e}sortKeys(e){const t=null!==e&&void 0!==e?e:new Map,i=this.params.handlerParams.filterParams;if(i.suppressSorting)return Array.from(t.keys());let o;return o=this.compareByValue?Array.from(t.entries()).sort(this.entryComparator).map(e=>{let[t]=e;return t}):Array.from(t.keys()).sort(this.keyComparator),i.excelMode&&t.has(null)&&(o=o.filter(e=>null!=e),o.push(null)),o}showAvailableOnly(){return 2===this.valuesType}updateAvailableKeys(e){const t=this.showAvailableOnly()?this.getAvailableValues(e=>this.params.handlerParams.doesRowPassOtherFilter(e)):e;this.availableKeys=new Set(t),this.dispatchLocalEvent({type:"availableValuesChanged"})}},Wr=class extends s.XQb{constructor(){super(...arguments),this.filterType="set",this.treeDataTreeList=!1,this.groupingTreeList=!1,this.caseSensitive=!1,this.noValueFormatterSupplied=!1}init(e){var t;this.updateParams(e);const i=this.isTreeDataOrGrouping.bind(this),o=this.createKey,n=this.caseFormat.bind(this),{gos:r,beans:a}=this,l=(0,s.dbY)(r,a.rowModel)?this.createManagedBean(new Gr(o,n,e.getValue,i,()=>this.treeDataTreeList)):void 0;this.valueModel=this.createManagedBean(new zr(l,n,o,i,{handlerParams:e,usingComplexObjects:!!(null!==(t=e.filterParams.keyCreator)&&void 0!==t?t:e.colDef.keyCreator)})),this.appliedModel=new Br(this.caseFormat.bind(this)),this.appliedModel.update(e.model),this.validateModel(e),this.addEventListenersForDataChanges()}refresh(e){var t;this.updateParams(e),this.valueModel.refresh({handlerParams:e,usingComplexObjects:!!(null!==(t=e.filterParams.keyCreator)&&void 0!==t?t:e.colDef.keyCreator)}),this.appliedModel.update(e.model),this.validateModel(e)}updateParams(e){var t;this.params=e;const{colDef:i,filterParams:{caseSensitive:o,treeList:n,keyCreator:s,valueFormatter:r}}=e;this.caseSensitive=!!o;const a=!!i.showRowGroup;this.treeDataTreeList=this.gos.get("treeData")&&!!n&&a,this.groupingTreeList=!(null===(t=this.beans.rowGroupColsSvc)||void 0===t||!t.columns.length)&&!!n&&a;const l=null!==s&&void 0!==s?s:i.keyCreator;this.createKey=this.generateCreateKey(l,this.isTreeDataOrGrouping()),this.setValueFormatter(r,l,!!n,!!i.refData)}doesFilterPass(e){const{appliedModel:t,treeDataTreeList:i,groupingTreeList:o}=this;if(t.isNull())return!0;if(t.isEmpty())return!1;const{node:n}=e;if(i)return this.doesFilterPassForTreeData(n);if(o)return this.doesFilterPassForGrouping(n);const s=this.params.getValue(n);return null!=s&&Array.isArray(s)?0===s.length?t.has(null):s.some(e=>t.has(this.createKey(e,n))):t.has(this.createKey(s,n))}getFormattedValue(e){var t;let i=this.valueModel.getValueForFormatter(e);this.noValueFormatterSupplied&&this.isTreeDataOrGrouping()&&Array.isArray(i)&&(i=(0,s.GXs)(i));const o=this.beans.valueSvc.formatValue(this.params.column,null,i,this.valueFormatter,!1);return null!==(t=null==o?(0,s.qph)(i):o)&&void 0!==t?t:Tr(this,"blanks")}getModelAsString(e,t){const{values:i}=null!==e&&void 0!==e?e:{},o="filterToolPanel"===t;if(null==i)return o?Tr(this,"filterSummaryListInactive"):"";const n=this.valueModel.getAvailableKeys(i),s=n.length,r=o?3:10,a=n.slice(0,r).map(e=>this.getFormattedValue(e));if(o){const e=a.join(Tr(this,"filterSummaryListSeparator"));return s>3?Tr(this,"filterSummaryListLong",[e,String(s-3)]):Tr(this,"filterSummaryListShort",[e])}return"(".concat(s,") ").concat(a.join(",")).concat(s>10?",...":"")}onAnyFilterChanged(){window.setTimeout(()=>{this.isAlive()&&this.valueModel.refreshAvailable().then(e=>{this.dispatchLocalEvent({type:"anyFilterChanged",updated:!!e})})})}onNewRowsLoaded(){this.syncAfterDataChange()}setFilterValues(e){this.valueModel.overrideValues(e).then(()=>{this.refreshFilterValues()})}resetFilterValues(){this.valueModel.valuesType=Hr.TAKEN_FROM_GRID_VALUES,this.syncAfterDataChange()}refreshFilterValues(e){this.valueModel.isInitialised()&&this.valueModel.refreshAll().then(()=>{this.dispatchLocalEvent({type:"dataChanged",hardRefresh:!0}),this.validateModel(this.params,void 0,!e)})}getFilterKeys(){return Array.from(this.valueModel.allValues.keys())}getFilterValues(){return Array.from(this.valueModel.allValues.values())}isTreeDataOrGrouping(){return this.treeDataTreeList||this.groupingTreeList}caseFormat(e){return null==e||"string"!==typeof e||this.caseSensitive?e:e.toUpperCase()}addEventListenersForDataChanges(){this.addManagedPropertyListeners(["groupAllowUnbalanced"],()=>this.syncAfterDataChange());const e=(0,s.pkA)(this,this.syncAfterDataChange.bind(this),0);this.addManagedEventListeners({cellValueChanged:t=>{t.column===this.params.column&&e()}})}syncAfterDataChange(){this.isValuesTakenFromGrid()&&this.valueModel.refreshAll().then(()=>{this.dispatchLocalEvent({type:"dataChanged"}),this.validateModel(this.params,{afterDataChange:!0})})}validateModel(e,t,i){const o=this.valueModel;o.allKeys.then(()=>{const n=e.model;if(null==n)return;const r=new Map,a=e=>r.set(this.caseFormat(e),e);if(i)for(const e of o.availableKeys)a(e);else o.allValues.forEach((e,t)=>a(t));const l=[];let d=!1;for(const e of n.values){const t=this.caseFormat((0,s.X7E)(e)),i=r.get(t);void 0!==i?(l.push(i),i!==e&&(d=!0)):d=!0}const c=l.length,u=e.filterParams;if(0===c&&u.excelMode)return void e.onModelChange(null,t);const h=!u.defaultToNothingSelected&&(this.valueModel.valuesType===Hr.TAKEN_FROM_GRID_VALUES||!u.suppressClearModelOnRefreshValues)&&c===r.size;if(d||!n.filterType||h){const i=h?null:{filterType:this.filterType,values:l};e.onModelChange(i,t)}})}isValuesTakenFromGrid(){return this.valueModel.valuesType===Hr.TAKEN_FROM_GRID_VALUES}doesFilterPassForTreeData(e){var t,i,o;if(null!==(t=e.childrenAfterGroup)&&void 0!==t&&t.length)return!1;const{gos:n,appliedModel:s}=this;return s.has(this.createKey(Mr(null!==(i=e.getRoute())&&void 0!==i?i:[null!==(o=e.key)&&void 0!==o?o:e.id],!0,n.get("groupAllowUnbalanced"))))}doesFilterPassForGrouping(e){var t;const{appliedModel:i,params:o,gos:n,beans:{rowGroupColsSvc:s,valueSvc:r}}=this,a=(null!==(t=null===s||void 0===s?void 0:s.columns)&&void 0!==t?t:[]).map(t=>r.getKeyForNode(t,e));return a.push(o.getValue(e)),i.has(this.createKey(Mr(a,!1,n.get("groupAllowUnbalanced"))))}generateCreateKey(e,t){var i=this;return t&&!e?((0,s.CkN)(250),()=>null):e?function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=i.getKeyCreatorParams(t,o);return(0,s.X7E)(e(n))}:e=>(0,s.X7E)((0,s.qph)(e))}getKeyCreatorParams(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{colDef:i,column:o}=this.params;return(0,s.AuN)(this.gos,{value:e,colDef:i,column:o,node:t,data:null===t||void 0===t?void 0:t.data})}setValueFormatter(e,t,i,o){let n=e;if(!n){if(t&&!i)return void(0,s.CkN)(249);this.noValueFormatterSupplied=!0,o||(n=e=>(0,s.qph)(e.value))}this.valueFormatter=n}getCrossFilterModel(e){var t;const{createKey:i,valueModel:o,params:n}=this;return e(i,o.availableKeys,null===(t=n.model)||void 0===t?void 0:t.values)}destroy(){this.appliedModel.destroy(),super.destroy(),this.valueModel=void 0}},Ur={tag:"div",cls:"ag-floating-filter-input ag-set-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},jr=class extends s.uAl{constructor(){super(Ur,[s.n1z]),this.eFloatingFilterText=s.dRA,this.listenerAdded=!1}init(e){this.params=e,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams(e)}setParams(e){const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0),i=this.getLocaleTextFunc();if(this.eFloatingFilterText.setInputAriaLabel("".concat(t," ").concat(i("ariaFilterInput","Filter Input"))),this.gos.get("enableFilterHandlers")){const t=e;this.updateFloatingFilterText(t.model)}}refresh(e){this.params=e,this.setParams(e)}onParentModelChanged(e){this.updateFloatingFilterText(e)}parentSetFilterInstance(e){this.params.parentFilterInstance(t=>{t instanceof Ir?e(t):(0,s.CkN)(248)})}addAvailableValuesListener(){const e=e=>{if(null===e||void 0===e||!e.isAlive())return;const t=e.valueModel;this.destroyListeners=t.addManagedListeners(t,{availableValuesChanged:()=>this.updateFloatingFilterText(e.params.model),destroyed:()=>{this.listenerAdded=!1,this.destroyListeners=void 0}})};this.gos.get("enableFilterHandlers")?e(this.params.getHandler()):this.parentSetFilterInstance(t=>{e(t.handler)}),this.listenerAdded=!0}updateFloatingFilterText(e){var t,i,o;null==e?this.eFloatingFilterText.setValue(""):(this.listenerAdded||this.addAvailableValuesListener(),this.gos.get("enableFilterHandlers")?this.eFloatingFilterText.setValue(null!==(t=null===(i=(o=this.params.getHandler()).getModelAsString)||void 0===i?void 0:i.call(o,e))&&void 0!==t?t:""):this.parentSetFilterInstance(t=>{this.eFloatingFilterText.setValue(t.getModelAsString(e))}))}destroy(){const e=this.destroyListeners;if(e){for(const t of e)t();e.length=0}super.destroy()}},_r={moduleName:"SetFilter",version:ki,userComponents:{agSetColumnFilter:{classImp:Ir,params:{useForm:!0},processParams:e=>(function(e){"windows"===e.excelMode?(e.buttons||(e.buttons=["apply","cancel"]),null==e.closeOnApply&&(e.closeOnApply=!0)):"mac"===e.excelMode&&(e.buttons||(e.buttons=["reset"]),null==e.applyMiniFilterWhileTyping&&(e.applyMiniFilterWhileTyping=!0),null==e.debounceMs&&(e.debounceMs=500)),e.excelMode&&e.defaultToNothingSelected&&(e.defaultToNothingSelected=!1,(0,s.ujB)(207))}(e),e)},agSetColumnFloatingFilter:jr},dynamicBeans:{agSetColumnFilterHandler:Wr},icons:{setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",setFilterLoading:"loading"},dependsOn:[Ii,s.Sxk]};function Kr(e,t,i){return e.getCompDetails(t,Yr,void 0,i,!0)}var Yr={name:"statusPanel",optionalMethods:["refresh"]},qr={agAggregationComponent:{rowModels:["clientSide","serverSide"],warnArgs:[221]},agFilteredRowCountComponent:{rowModels:["clientSide"],warnArgs:[222]},agSelectedRowCountComponent:{rowModels:["clientSide","serverSide"],warnArgs:[223]},agTotalAndFilteredRowCountComponent:{rowModels:["clientSide"],warnArgs:[224]},agTotalRowCountComponent:{rowModels:["clientSide"],warnArgs:[225]}},Qr={tag:"div",cls:"ag-status-bar",children:[{tag:"div",ref:"eStatusBarLeft",cls:"ag-status-bar-left",role:"status"},{tag:"div",ref:"eStatusBarCenter",cls:"ag-status-bar-center",role:"status"},{tag:"div",ref:"eStatusBarRight",cls:"ag-status-bar-right",role:"status"}]},Xr={selector:"AG-STATUS-BAR",component:class extends s.uAl{constructor(){super(Qr),this.updateQueued=!1,this.panelsPromise=s.oY$.resolve(),this.eStatusBarLeft=s.dRA,this.eStatusBarCenter=s.dRA,this.eStatusBarRight=s.dRA,this.compDestroyFunctions={},this.registerCSS(".ag-status-bar{border-top:var(--ag-footer-row-border);display:flex;justify-content:space-between;line-height:1.5;overflow:hidden;padding-left:calc(var(--ag-spacing)*4);padding-right:calc(var(--ag-spacing)*4)}.ag-status-panel,:where(.ag-status-panel.ag-status-panel-aggregations .ag-status-name-value){display:inline-flex}.ag-status-name-value{color:var(--ag-status-bar-label-color);font-weight:var(--ag-status-bar-label-font-weight);margin-left:var(--ag-spacing);margin-right:var(--ag-spacing);padding-bottom:var(--ag-widget-container-vertical-padding);padding-top:var(--ag-widget-container-vertical-padding);white-space:nowrap}.ag-status-name-value-value{color:var(--ag-status-bar-value-color);font-weight:var(--ag-status-bar-value-font-weight)}.ag-status-bar-left{display:inline-flex}.ag-status-bar-center{display:inline-flex;text-align:center}.ag-status-bar-right{display:inline-flex}")}wireBeans(e){this.userCompFactory=e.userCompFactory,this.statusBarSvc=e.statusBarSvc}postConstruct(){this.processStatusPanels(new Map),this.addManagedPropertyListeners(["statusBar"],this.handleStatusBarChanged.bind(this))}getValidPanels(){var e;const t=this.gos,i=null===(e=t.get("statusBar"))||void 0===e?void 0:e.statusPanels;return i?i.filter(e=>{var i;const{rowModels:o,warnArgs:n}=null!==(i=qr[e.statusPanel])&&void 0!==i?i:{};return!o||(!!o.includes(t.get("rowModelType"))||((0,s.ujB)(...n),!1))}):i}processStatusPanels(e){const t=this.getValidPanels();if(t){const i=t.filter(e=>"left"===e.align),o=t.filter(e=>"center"===e.align),n=t.filter(e=>!e.align||"right"===e.align);this.panelsPromise=s.oY$.all([this.createAndRenderComponents(i,this.eStatusBarLeft,e),this.createAndRenderComponents(o,this.eStatusBarCenter,e),this.createAndRenderComponents(n,this.eStatusBarRight,e)])}else this.setDisplayed(!1)}handleStatusBarChanged(){this.updateQueued||(this.updateQueued=!0,this.panelsPromise.then(()=>{this.updateStatusBar(),this.updateQueued=!1}))}updateStatusBar(){const e=this.getValidPanels(),t=Array.isArray(e)&&e.length>0;this.setDisplayed(t);const i=new Map;if(t)for(const a of e){var o;const e=null!==(o=a.key)&&void 0!==o?o:a.statusPanel,t=this.statusBarSvc.getStatusPanel(e);if(null!==t&&void 0!==t&&t.refresh){var r;const o=(0,s.AuN)(this.gos,(0,n.A)((0,n.A)({},null!==(r=a.statusPanelParams)&&void 0!==r?r:{}),{},{key:e}));t.refresh(o)&&(i.set(e,t),delete this.compDestroyFunctions[e],(0,s.MwW)(t.getGui()))}}this.resetStatusBar(),t&&this.processStatusPanels(i)}resetStatusBar(){(0,s.fDi)(this.eStatusBarLeft),(0,s.fDi)(this.eStatusBarCenter),(0,s.fDi)(this.eStatusBarRight),this.destroyComponents(),this.statusBarSvc.unregisterAllComponents()}destroy(){this.destroyComponents(),super.destroy()}destroyComponents(){for(const e of Object.values(this.compDestroyFunctions))e();this.compDestroyFunctions={}}createAndRenderComponents(e,t,i){const o=[];for(const n of e){const e=n.key||n.statusPanel,t=i.get(e);let r;if(t)r=s.oY$.resolve(t);else{const t=Kr(this.userCompFactory,n,(0,s.AuN)(this.gos,{key:e}));if(null==t)continue;r=t.newAgStackInstance()}o.push({key:e,promise:r})}return s.oY$.all(o.map(e=>e.promise)).then(()=>{for(const e of o)e.promise.then(i=>{const o=()=>{this.destroyBean(i)};this.isAlive()?(this.statusBarSvc.registerStatusPanel(e.key,i),t.appendChild(i.getGui()),this.compDestroyFunctions[e.key]=o):o()})})}}},$r={tag:"div",cls:"ag-status-name-value",children:[{tag:"span",ref:"eLabel"},":\xa0",{tag:"span",ref:"eValue",cls:"ag-status-name-value-value"}]},Zr=class extends s.uAl{constructor(){super($r),this.eLabel=s.dRA,this.eValue=s.dRA}setLabel(e,t){this.setDisplayed(!1),this.eLabel.textContent=this.getLocaleTextFunc()(e,t)}setValue(e,t){this.eValue.textContent=this.valueFormatter((0,s.AuN)(this.gos,{value:e,totalRows:t,key:this.key}))}},Jr={selector:"AG-NAME-VALUE",component:Zr},ea=e=>{let t=0;return e.forEachNodeAfterFilter(e=>{e.data&&t++}),t},ta=e=>{let t=0;return e.forEachNode(e=>{e.data&&t++}),t};var ia={tag:"div",cls:"ag-status-panel ag-status-panel-aggregations",children:[{tag:"ag-name-value",ref:"avgAggregationComp"},{tag:"ag-name-value",ref:"countAggregationComp"},{tag:"ag-name-value",ref:"minAggregationComp"},{tag:"ag-name-value",ref:"maxAggregationComp"},{tag:"ag-name-value",ref:"sumAggregationComp"}]},oa=class extends s.uAl{constructor(){super(ia,[Jr]),this.sumAggregationComp=s.dRA,this.countAggregationComp=s.dRA,this.minAggregationComp=s.dRA,this.maxAggregationComp=s.dRA,this.avgAggregationComp=s.dRA}postConstruct(){this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedEventListeners({cellSelectionChanged:this.onCellSelectionChanged.bind(this),modelUpdated:this.onCellSelectionChanged.bind(this)})}init(e){this.refresh(e)}refresh(e){var t;this.params=e;const i=null!==(t=e.valueFormatter)&&void 0!==t?t:e=>{let{value:t}=e;return function(e,t){return"number"!==typeof e?"":(0,s.wdz)(Math.round(100*e)/100,t)}(t,this.getLocaleTextFunc.bind(this))},o=["avg","count","min","max","sum"];for(const n of o){const e=this.getAllowedAggregationValueComponent(n);e&&(e.key=n,e.valueFormatter=i.bind(this))}return this.onCellSelectionChanged(),!0}setAggregationComponentValue(e,t,i){const o=this.getAllowedAggregationValueComponent(e),n=ta(this.beans.rowModel);var r;(0,s.Qmv)(o)&&o?(o.setValue(t,n),o.setDisplayed(i)):null===(r=this.getAggregationValueComponent(e))||void 0===r||r.setDisplayed(!1)}getAllowedAggregationValueComponent(e){const{aggFuncs:t}=this.params;return!t||t.includes(e)?this.getAggregationValueComponent(e):null}getAggregationValueComponent(e){return this["".concat(e,"AggregationComp")]}onCellSelectionChanged(){const e=this.beans,{rangeSvc:t,valueSvc:i}=e,o=null===t||void 0===t?void 0:t.getCellRanges();let n=0,r=0,a=0,l=null,d=null;const c={};if(null!==o&&void 0!==o&&o.length&&t)for(let p=0;p<o.length;p++){const u=o[p];let h=t.getRangeStartRow(u);const g=t.getRangeEndRow(u);for(;;){if((0,s.MWY)(h)||!h||(0,s.$j0)(g,h)||!h||!u.columns)break;u.columns.forEach(t=>{if(null===h)return;const o=(0,s.PQ9)({rowPinned:h.rowPinned,column:t,rowIndex:h.rowIndex});if(c[o])return;c[o]=!0;const u=(0,s.CFh)(e,h);if((0,s.MWY)(u))return;let p=i.getValue(t,u);(0,s.MWY)(p)||""===p||(r++,"object"===typeof p&&"value"in p&&(p=p.value,""===p)||("string"===typeof p&&(p=Number(p)),"number"!==typeof p||isNaN(p)||(n+=p,(null===d||p>d)&&(d=p),(null===l||p<l)&&(l=p),a++)))}),h=(0,s.vcM)(e,h)}}const u=r>1,h=a>1;this.setAggregationComponentValue("count",r,u),this.setAggregationComponentValue("sum",n,h),this.setAggregationComponentValue("min",l,h),this.setAggregationComponentValue("max",d,h),this.setAggregationComponentValue("avg",n/a,h)}};var na=class extends s.XQb{constructor(){super(),this.beanName="statusBarSvc",this.comps=new Map}registerStatusPanel(e,t){this.comps.set(e,t)}unregisterStatusPanel(e){this.comps.delete(e)}unregisterAllComponents(){this.comps.clear()}getStatusPanel(e){return this.comps.get(e)}destroy(){this.unregisterAllComponents(),super.destroy()}},sa={moduleName:"StatusBar",version:ki,beans:[na],userComponents:{agAggregationComponent:oa,agTotalRowCountComponent:class extends Zr{postConstruct(){this.setLabel("totalRows","Total Rows"),this.addCss("ag-status-panel"),this.addCss("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedEventListeners({modelUpdated:this.onDataChanged.bind(this)})}onDataChanged(){const e=ta(this.beans.rowModel);this.setValue(e,e)}init(e){this.refresh(e),this.onDataChanged()}updateValueFormatter(e){this.valueFormatter=null!==e&&void 0!==e?e:e=>{let{value:t}=e;return(0,s.wdz)(t,this.getLocaleTextFunc.bind(this))}}refresh(e){const{key:t,valueFormatter:i}=e;return this.key=t,this.updateValueFormatter(i),!0}},agFilteredRowCountComponent:class extends Zr{postConstruct(){this.setLabel("filteredRows","Filtered"),this.addCss("ag-status-panel"),this.addCss("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);const e=this.onDataChanged.bind(this);this.addManagedEventListeners({modelUpdated:e})}onDataChanged(){const{rowModel:e}=this.beans,t=ta(e),i=ea(e);this.setValue(i,t),this.setDisplayed(t!==i)}init(e){this.refresh(e),this.onDataChanged()}updateValueFormatter(e){this.valueFormatter=null!==e&&void 0!==e?e:e=>{let{value:t}=e;return(0,s.wdz)(t,this.getLocaleTextFunc.bind(this))}}refresh(e){const{key:t,valueFormatter:i}=e;return this.key=t,this.updateValueFormatter(i),!0}},agTotalAndFilteredRowCountComponent:class extends Zr{postConstruct(){this.setLabel("totalAndFilteredRows","Rows"),this.addCss("ag-status-panel"),this.addCss("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedEventListeners({modelUpdated:this.onDataChanged.bind(this)})}onDataChanged(){const{rowModel:e}=this.beans,t=ea(e),i=ta(e);this.setValue(t,i)}init(e){this.refresh(e),this.onDataChanged()}updateValueFormatter(e){this.valueFormatter=null!==e&&void 0!==e?e:e=>{let{value:t,totalRows:i}=e;const o=this.getLocaleTextFunc.bind(this),n=(0,s.wdz)(t,o),r=(0,s.wdz)(null!==i&&void 0!==i?i:t,o);if(t===i)return n;const a=o();return"".concat(n," ").concat(a("of","of")," ").concat(r)}}refresh(e){const{key:t,valueFormatter:i}=e;return this.key=t,this.updateValueFormatter(i),!0}},agSelectedRowCountComponent:class extends Zr{postConstruct(){this.setLabel("selectedRows","Selected"),this.addCss("ag-status-panel"),this.addCss("ag-status-panel-selected-row-count");const e=this.onRowSelectionChanged.bind(this);this.addManagedEventListeners({modelUpdated:e,selectionChanged:e})}onRowSelectionChanged(){var e;const{selectionSvc:t,rowModel:i}=this.beans,o=null!==(e=null===t||void 0===t?void 0:t.getSelectionCount())&&void 0!==e?e:0,n=ta(i);this.setValue(o,n),o<0?this.setDisplayed(!0):this.setDisplayed(o>0)}init(e){this.refresh(e),this.onRowSelectionChanged()}updateValueFormatter(e){this.valueFormatter=null!==e&&void 0!==e?e:e=>{let{value:t}=e;return null==t||t>=0?(0,s.wdz)(t,this.getLocaleTextFunc.bind(this)):this.getLocaleTextFunc()("statusBarLastRowUnknown","?")}}refresh(e){const{key:t,valueFormatter:i}=e;return this.key=t,this.updateValueFormatter(i),!0}}},selectors:[Xr],apiFunctions:{getStatusPanel:function(e,t){var i;const o=null===(i=e.statusBarSvc)||void 0===i?void 0:i.getStatusPanel(t);return(0,s.nnr)(o)}},dependsOn:[Ii,s.FWU]};function ra(e){var t;return"MULTI_SHEET"!==(null===(t=e.excelCreator)||void 0===t?void 0:t.getFactoryMode())||((0,s.ujB)(161),!1)}var aa={moduleName:"ExcelExport",version:ki,beans:[ri],apiFunctions:{getDataAsExcel:function(e,t){var i;if(ra(e))return null===(i=e.excelCreator)||void 0===i?void 0:i.getDataAsExcel(t)},exportDataAsExcel:function(e,t){var i;ra(e)&&(null===(i=e.excelCreator)||void 0===i||i.exportDataAsExcel(t))},getSheetDataForExcel:function(e,t){var i,o;return null===(i=e.excelCreator)||void 0===i||i.setFactoryMode("MULTI_SHEET"),null===(o=e.excelCreator)||void 0===o?void 0:o.getSheetDataForExcel(t)},getMultipleSheetsAsExcel:function(e,t){var i;return null===(i=e.excelCreator)||void 0===i?void 0:i.getMultipleSheetsAsExcel(t)},exportMultipleSheetsAsExcel:function(e,t){var i;null===(i=e.excelCreator)||void 0===i||i.exportMultipleSheetsAsExcel(t)}},dependsOn:[s.vfN,Ii]};function la(e){const{filters:t}=e;return t&&t.length>0?t:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]}function da(e,t){if(null!=e)for(let i=e.length-1;i>=0;i--)t(e[i],i)}function ca(e,t,i,o){const n=[],s=null===e||void 0===e?void 0:e.filterModels;for(let a=0;a<t;a++){var r;n[a]=null!==(r=a===o?i:null===s||void 0===s?void 0:s[a])&&void 0!==r?r:null}return n.every(e=>null==e)?null:{filterType:"multi",filterModels:n}}function ua(e,t){var i,o;return null!==(i=null===e||void 0===e||null===(o=e.filterModels)||void 0===o?void 0:o[t])&&void 0!==i?i:null}function ha(e,t,i,o){const n=i.filterValueGetter;return n?e.colFilter.createGetValue(t,n):o}var pa=class extends s.aJZ{constructor(){super({tag:"div",cls:"ag-multi-filter ag-menu-list-compact"}),this.filterDefs=[],this.guiDestroyFuncs=[],this.filterGuis=[],this.lastActivatedMenuItem=null}postConstruct(){this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e)})}refreshGui(e){return e===this.lastOpenedInContainer?s.oY$.resolve():(this.tabGuardFeature.removeAllChildrenExceptTabGuards(),this.destroyChildren(),s.oY$.all(this.getFilterWrappers().map((t,i)=>{if(!t)return s.oY$.resolve(null);const o=this.getFilterFromWrapper(t),n=this.getCompFromWrapper(t),r=this.filterDefs[i],a=function(e,t){return null!=t.title?t.title:e instanceof s.Q5x?e.getFilterTitle():"Filter"}(o,r);let l;if("subMenu"===r.display&&"toolPanel"!==e)l=this.insertFilterMenu(n,o,a).then(e=>e.getGui());else if("subMenu"===r.display||"accordion"===r.display){const e=this.insertFilterGroup(o,n,a);l=s.oY$.resolve(e.getGui())}else l=s.oY$.resolve(n.getGui());return l})).then(t=>{t.forEach((e,t)=>{e&&(t>0&&this.appendChild((0,s.UCw)({tag:"div",cls:"ag-filter-separator"})),this.appendChild(e))}),this.filterGuis=t,this.lastOpenedInContainer=e}))}destroyChildren(){for(const e of this.guiDestroyFuncs)e();this.guiDestroyFuncs.length=0,this.filterGuis.length=0}insertFilterMenu(e,t,i){const o=e.getGui();(0,s.lXX)(o,"dialog");const n=this.createBean(new bs),r={getGui:()=>e.getGui(),afterGuiAttached:i=>{var o,n;(null===(o=e.afterGuiAttached)||void 0===o||o.call(e,i),e!==t)&&(null===(n=t.afterGuiAttached)||void 0===n||n.call(t,i))}};return n.init({menuItemDef:{name:i,subMenu:[],subMenuRole:"dialog",cssClasses:["ag-multi-filter-menu-item"],menuItem:es,menuItemParams:{cssClassPrefix:"ag-compact-menu-option",isCompact:!0}},level:0,isAnotherSubMenuOpen:()=>!1,childComponent:r,contextParams:{column:null,node:null,value:null}}).then(()=>{n.setParentComponent(this),this.guiDestroyFuncs.push(()=>this.destroyBean(n)),this.addManagedListeners(n,{menuItemActivated:e=>{this.lastActivatedMenuItem&&this.lastActivatedMenuItem!==e.menuItem&&this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=e.menuItem}});const e=n.getGui();return n.addManagedElementListeners(e,{keydown:e=>{const{key:t}=e;switch(t){case s.DDm.UP:case s.DDm.RIGHT:case s.DDm.DOWN:case s.DDm.LEFT:e.preventDefault(),t===s.DDm.RIGHT&&n.openSubMenu(!0)}},focusin:()=>n.activate(),focusout:()=>{n.isSubMenuOpen()||n.isSubMenuOpening()||n.deactivate()}}),n})}insertFilterGroup(e,t,i){const o=this.createBean(new Ei({title:i,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push(()=>this.destroyBean(o)),o.addItem(t.getGui()),o.toggleGroupExpand(!1),e.afterGuiAttached&&o.addManagedListeners(o,{expanded:()=>e.afterGuiAttached({container:this.lastOpenedInContainer,suppressFocus:!0,hidePopup:this.hidePopup})}),o}afterGuiAttached(e){let t;e?(this.hidePopup=e.hidePopup,t=this.refreshGui(e.container)):(this.hidePopup=void 0,t=s.oY$.resolve());const i=null===e||void 0===e?void 0:e.suppressFocus;t.then(()=>{const{filterDefs:t,filterGuis:o,beans:r}=this,a=this.getFilterWrappers();let l=!!i;t&&da(t,(t,r)=>{const d=0===r,c=t.display&&"inline"!==t.display,u=i||!d||c,h=(0,n.A)((0,n.A)({},null!==e&&void 0!==e?e:{}),{},{suppressFocus:u}),p=a[r],g=p?this.getFilterFromWrapper(p):void 0;if(p){const e=this.getCompFromWrapper(p);e!==g&&e.afterGuiAttached(h)}if(g&&(this.executeFunctionIfExistsOnFilter(g,"afterGuiAttached",h),d&&!u&&(l=!0)),!i&&d&&c){const e=o[r];e&&((0,s.YtT)(e)||e.focus({preventScroll:!0}),l=!0)}});const d=(0,s.UlD)(r);l||!(0,s.sNX)(r)&&!this.getGui().contains(d)||this.forceFocusOutOfContainer(!0)})}afterGuiDetached(){this.executeFunctionIfExists("afterGuiDetached")}onAnyFilterChanged(){this.executeFunctionIfExists("onAnyFilterChanged",e=>this.executeOnWrapper(e,"onAnyFilterChanged"))}onNewRowsLoaded(){this.executeFunctionIfExists("onNewRowsLoaded",e=>this.executeOnWrapper(e,"onNewRowsLoaded"))}destroy(){this.destroyChildren(),this.hidePopup=void 0,super.destroy()}executeOnWrapper(e,t){}executeFunctionIfExists(e,t){da(this.getFilterWrappers(),i=>{i&&(null===t||void 0===t||t(i),this.executeFunctionIfExistsOnFilter(this.getFilterFromWrapper(i),e))})}executeFunctionIfExistsOnFilter(e,t){const i=e[t];if("function"===typeof i){for(var o=arguments.length,n=new Array(o>2?o-2:0),s=2;s<o;s++)n[s-2]=arguments[s];i.apply(e,n)}}onFocusIn(e){const t=this.lastActivatedMenuItem;null==t||t.getGui().contains(e.target)||(t.deactivate(),this.lastActivatedMenuItem=null)}},ga=class extends pa{constructor(){super(...arguments),this.filterType="multi",this.wrappers=[],this.activeFilterIndices=[],this.afterFiltersReadyFuncs=[]}init(e){this.params=e,this.filterDefs=la(e);const t=(0,s.$f9)(this.beans.colFilter.model,e.column.getColId()),{filterChangedCallback:i}=e;this.filterChangedCallback=i;const o=this.filterDefs.map((e,i)=>this.createFilter(e,i,t));return new s.oY$(e=>{s.oY$.all(o).then(t=>{this.wrappers=t,this.refreshGui("columnMenu").then(()=>{e()})})}).then(()=>{for(const e of this.afterFiltersReadyFuncs)e();this.afterFiltersReadyFuncs.length=0})}refresh(e){return this.params=e,!0}isFilterActive(){return this.wrappers.some(e=>{if(!e)return!1;const{filter:t,handler:i,model:o}=e;return i?null!=o:t.isFilterActive()})}getLastActiveFilterIndex(){const e=this.activeFilterIndices;return e.length>0?e[e.length-1]:null}doesFilterPass(e,t){return this.wrappers.every((i,o)=>{if(!i||null!=t&&o===t)return!0;const{handler:s,filter:r,model:a}=i;return s?null==a||s.doesFilterPass((0,n.A)((0,n.A)({},e),{},{model:a,handlerParams:i.handlerParams})):!r.isFilterActive()||r.doesFilterPass(e)})}getModelFromUi(){return{filterType:this.filterType,filterModels:this.wrappers.map(e=>{if(!e)return null;const t=e.filter;return"function"===typeof t.getModelFromUi?t.getModelFromUi():null})}}getModel(){if(!this.isFilterActive())return null;return{filterType:this.filterType,filterModels:this.wrappers.map(e=>{if(!e)return null;const{filter:t,handler:i,model:o}=e;return i?o:t.isFilterActive()?t.getModel():null})}}setModel(e){const t=[];return this.wrappers.forEach((i,o)=>{if(!i)return;const n=ua(e,o),{filter:r,filterParams:a,handler:l,handlerParams:d,state:c}=i;if(l){const e={model:n,state:null===c||void 0===c?void 0:c.state};i.state=e,i.model=n,t.push((0,s.SvK)(()=>s.oY$.resolve({filter:r,filterParams:a}),l,d,n,e,"api").then(()=>{this.updateActiveListForHandler(o,i.model)}))}else t.push(((e,t)=>new s.oY$(i=>{const o=e.setModel(t);o?o.then(()=>i()):i()}))(r,n).then(()=>{this.updateActiveListForFilter(o,r)}))}),s.oY$.all(t).then(()=>{})}applyModel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"api",t=!1;for(const i of this.wrappers)if(i){const o=i.filter;o instanceof s.Q5x&&(t=o.applyModel(e)||t)}return t}getChildFilterInstance(e){var t;return null===(t=this.wrappers[e])||void 0===t?void 0:t.filter}getNumChildFilters(){return this.wrappers.length}destroy(){for(const e of this.wrappers)this.destroyBean(null===e||void 0===e?void 0:e.filter),this.destroyBean(null===e||void 0===e?void 0:e.handler);this.wrappers.length=0,super.destroy()}getFilterWrappers(){return this.wrappers}getFilterFromWrapper(e){return e.filter}getCompFromWrapper(e){return e.comp}executeOnWrapper(e,t){var i,o;null===(i=e.handler)||void 0===i||null===(o=i[t])||void 0===o||o.call(i)}createFilter(e,t,i){const o=this.params.column;let r,a=null;const l=this.beans,d=(e,i)=>{var o;const n=this.wrappers[t];if(!n)return;const r={model:e,state:null===(o=n.state)||void 0===o?void 0:o.state};n.state=r,n.model=e,(0,s.SvK)(()=>s.oY$.resolve({filter:n.filter,filterParams:n.filterParams}),n.handler,n.handlerParams,e,r,"ui").then(()=>{this.onHandlerModelChanged(t,n.model,i)})},{compDetails:c,handler:u,handlerParams:h,createFilterUi:p}=l.colFilter.createFilterInstance(o,e,"agTextColumnFilter",(s,h)=>{const p=(0,n.A)((0,n.A)({},s),{},{filterChangedCallback:h?()=>{}:e=>{this.executeWhenAllFiltersReady(()=>this.onFilterModelChanged(t,e))},doesRowPassOtherFilter:e=>s.doesRowPassOtherFilter(e)&&this.doesFilterPass({node:e,data:e.data},t),getValue:ha(l,o,e,s.getValue)});return h&&(a=ua(i,t),r=this.updateDisplayParams(p,t,a,()=>c,()=>u,d)),p});if(!p)return s.oY$.resolve(null);let g;if(u){var v;const{doesRowPassOtherFilter:i,getValue:s}=h;g=(0,n.A)((0,n.A)({},h),{},{onModelChange:d,doesRowPassOtherFilter:e=>i(e)&&this.doesFilterPass({node:e,data:e.data},t),getValue:ha(l,o,e,s)}),null===(v=u.init)||void 0===v||v.call(u,(0,n.A)((0,n.A)({},g),{},{model:a,source:"init"}))}return p().then(e=>{if(!u)return{filter:e,comp:e};const t=null===c||void 0===c?void 0:c.params;return{filter:e,comp:r(e),filterParams:t,handler:u,handlerParams:g,model:a}})}updateDisplayParams(e,t,i,o,n,r){const a=this.params.column,l=new s.$UK;e.model=i,e.state={model:i},e.onModelChange=r,e.getHandler=n;const d=(e,t)=>{e.state=t,l.dispatchEvent({type:"filterStateChanged",column:a,state:t})};e.onStateChange=e=>{var i;const o=this.wrappers[t];o&&(d(o,e),(0,s.nNd)(o.filter,o.filterParams,null!==(i=o.model)&&void 0!==i?i:null,e,"ui"))};const c=(e,i,n)=>{var r;const a=this.wrappers[t];if(!a)return;const l=()=>{var e;return null!==(e=null===a||void 0===a?void 0:a.model)&&void 0!==e?e:null};(0,s.O3D)({action:i,filterParams:a.filterParams,getFilterUi:()=>{const e=s.oY$.resolve(a.filter);return{created:!0,filterParams:a.filterParams,compDetails:o(),create:()=>e,promise:e}},getModel:l,getState:()=>{var e;return null!==(e=null===a||void 0===a?void 0:a.state)&&void 0!==e?e:{model:l()}},updateState:e=>d(a,e),updateModel:e=>{var t;return null===(t=a.filterParams)||void 0===t?void 0:t.onModelChange(e,n)},processModelToApply:null===(r=a.handler)||void 0===r||null===(r=r.processModelToApply)||void 0===r?void 0:r.bind(a.handler)})};return e.onAction=(e,t,i)=>{c(0,e,t),l.dispatchEvent({type:"filterAction",column:a,action:e,event:i})},e=>{var t;const i=null===(t=o())||void 0===t?void 0:t.params;return this.createManagedBean(new s.jfj(a,{comp:e,params:i,isHandler:!0},l,c,!1))}}executeWhenAllFiltersReady(e){var t,i;(null!==(t=null===(i=this.wrappers)||void 0===i?void 0:i.length)&&void 0!==t?t:0)>0?e():this.afterFiltersReadyFuncs.push(e)}updateActiveListForFilter(e,t){this.updateActiveList(e,()=>null===t||void 0===t?void 0:t.isFilterActive())}updateActiveListForHandler(e,t){this.updateActiveList(e,()=>null!=t)}updateActiveList(e,t){const i=this.activeFilterIndices;(0,s.$ii)(this.activeFilterIndices,e),t()&&i.push(e)}onFilterModelChanged(e,t){var i;this.updateActiveListForFilter(e,null===(i=this.wrappers[e])||void 0===i?void 0:i.filter),this.filterChanged(e,t)}onHandlerModelChanged(e,t,i){this.updateActiveListForHandler(e,t),this.filterChanged(e,i)}filterChanged(e,t){this.filterChangedCallback(t),this.wrappers.forEach((t,i)=>{var o;if(e===i||!t)return;const{filter:n,handler:s}=t;null===s||void 0===s||null===(o=s.onAnyFilterChanged)||void 0===o||o.call(s),"function"===typeof n.onAnyFilterChanged&&n.onAnyFilterChanged()})}getModelAsString(e){var t,i,o,n,s;if(null===e||void 0===e||null===(t=e.filterModels)||void 0===t||!t.length)return"";const r=null!==(i=this.getLastActiveFilterIndex())&&void 0!==i?i:0,a=null===(o=this.wrappers[r])||void 0===o?void 0:o.filter;return null!==(n=null===a||void 0===a||null===(s=a.getModelAsString)||void 0===s?void 0:s.call(a,e.filterModels[r]))&&void 0!==n?n:""}},va=class extends s.XQb{constructor(){super(...arguments),this.filterType="multi",this.handlerWrappers=[],this.activeFilterIndices=[],this.filterDefs=[]}init(e){this.params=e;const t=la(e.filterParams);this.filterDefs=t,t.forEach((t,i)=>{var o;const r=this.beans.colFilter.createHandler(e.column,t,"agTextColumnFilter");if(this.handlerWrappers.push(r),!r)return void(0,s.ujB)(278,{colId:e.column.getColId()});const{handler:a,handlerParams:l}=r;null===(o=a.init)||void 0===o||o.call(a,(0,n.A)((0,n.A)({},this.updateHandlerParams(l,i,!0)),{},{model:ua(e.model,i),source:"init"}))}),this.resetActiveList(e.model)}refresh(e){var t;this.params=e;const{model:i,source:o,filterParams:s}=e,r=null===s||void 0===s?void 0:s.filters;this.handlerWrappers.forEach((t,s)=>{if(t){var a,l;const d=this.updateHandlerParams(e,s,!1),c=d.filterParams,u=null===r||void 0===r?void 0:r[s].filterParams,h=u?(0,n.A)((0,n.A)({},c),u):c,p=(0,n.A)((0,n.A)({},d),{},{filterParams:h});t.handlerParams=p,null===(a=(l=t.handler).refresh)||void 0===a||a.call(l,(0,n.A)((0,n.A)({},p),{},{model:ua(i,s),source:o}))}}),"floating"!==e.source&&"ui"!==e.source&&this.resetActiveList(e.model),null!==(t=e.additionalEventAttributes)&&void 0!==t&&t.fromButtons&&this.onAnyFilterChanged()}updateHandlerParams(e,t,i){const{onModelChange:o,doesRowPassOtherFilter:r,getValue:a}=e,l=(0,n.A)((0,n.A)({},e),{},{onModelChange:(e,i)=>o(ca(this.params.model,this.handlerWrappers.length,e,t),i),doesRowPassOtherFilter:e=>r(e)&&this.doesFilterPass({node:e,data:e.data,model:this.params.model,handlerParams:l},t),getValue:ha(this.beans,e.column,this.filterDefs[t],a)});return l.filterParams.buttons&&(i&&(0,s.ujB)(292,{colId:e.column.getColId()}),delete l.filterParams.buttons),l}doesFilterPass(e,t){var i;const o=null===(i=e.model)||void 0===i?void 0:i.filterModels;return null==o||this.handlerWrappers.every((i,s)=>{const r=o[s];if(null==r||null!=t&&s===t)return!0;const a=null===i||void 0===i?void 0:i.handler;return!a||a.doesFilterPass((0,n.A)((0,n.A)({},e),{},{model:r,handlerParams:i.handlerParams}))})}resetActiveList(e){this.activeFilterIndices=[];const t=null===e||void 0===e?void 0:e.filterModels;if(null!=t)for(let i=0;i<this.handlerWrappers.length;i++){null!=t[i]&&this.activeFilterIndices.push(i)}}updateActiveList(e,t){const i=this.activeFilterIndices;(0,s.$ii)(i,e),null!=t&&i.push(e)}getLastActiveFilterIndex(){const e=this.activeFilterIndices;return e.length>0?e[e.length-1]:null}getModelAsString(e,t){var i,o,n,s,r;const a="filterToolPanel"===t,l=()=>a?this.getLocaleTextFunc()("filterSummaryInactive","is (All)"):"";if(null===e||void 0===e||null===(i=e.filterModels)||void 0===i||!i.length)return l();const d=null!==(o=this.getLastActiveFilterIndex())&&void 0!==o?o:0,c=this.handlerWrappers[d];return null!==(n=null===c||void 0===c||null===(s=(r=c.handler).getModelAsString)||void 0===s?void 0:s.call(r,e.filterModels[d],t))&&void 0!==n?n:l()}getHandler(e){var t;return null===(t=this.handlerWrappers[e])||void 0===t?void 0:t.handler}onAnyFilterChanged(){da(this.handlerWrappers,e=>{var t,i;return null===e||void 0===e||null===(t=e.handler)||void 0===t||null===(i=t.onAnyFilterChanged)||void 0===i?void 0:i.call(t)})}onNewRowsLoaded(){da(this.handlerWrappers,e=>{var t,i;return null===e||void 0===e||null===(t=e.handler)||void 0===t||null===(i=t.onNewRowsLoaded)||void 0===i?void 0:i.call(t)})}destroy(){for(const e of this.handlerWrappers)this.destroyBean(null===e||void 0===e?void 0:e.handler);this.handlerWrappers.length=0,super.destroy()}},ma=class extends s.XQb{constructor(){super(...arguments),this.beanName="multiFilter"}getParamsForDataType(e,t,i,o){let r=null===e||void 0===e?void 0:e.filters;const a=this.beans;if(!r){r=[{filter:(0,s.LCl)(i.baseDataType)},{filter:"agSetColumnFilter"}]}const l=this.getLocaleTextFunc();return r=r.map(e=>{const{filter:r,filterParams:d,filterValueGetter:c}=e;if("string"!==typeof r)return e;const{filterParams:u,filterValueGetter:h}=(0,s.hMi)(r,d,null!==c&&void 0!==c?c:t,i,o,a,l);return(0,n.A)((0,n.A)({},e),{},{filterParams:u,filterValueGetter:h})}),{filterParams:(0,n.A)((0,n.A)({},e),{},{filters:r})}}},fa=class extends pa{constructor(){super(...arguments),this.filterType="multi",this.filters=[],this.filterParams=[],this.validity=[]}init(e){this.params=e;const t=la(e).map(t=>{var i;if(null!==(i=t.filterParams)&&void 0!==i&&i.buttons){(0,s.ujB)(292,{colId:e.column.getColId()});const i=(0,n.A)({},t.filterParams);return delete i.buttons,(0,n.A)((0,n.A)({},t),{},{filterParams:i})}return t});this.filterDefs=t,this.allState=e.state;const i=this.filterDefs.map((e,t)=>this.createFilter(e,t));return new s.oY$(e=>{s.oY$.all(i).then(t=>{this.filters=t,this.refreshGui("columnMenu").then(()=>{e()})})})}refresh(e){const{model:t,state:i,source:o}=e;if("colDef"===o)return!1;this.params=e;const n=this.filterParams;if(i===this.allState)return!0;this.allState=i;const r=i.state;return this.filters.forEach((e,a)=>{const l=ua(t,a),d={state:null===r||void 0===r?void 0:r[a],model:ua(i.model,a)};(0,s.nNd)(e,n[a],l,d,o)}),!0}getLastActiveFilterIndex(){var e,t,i;return null!==(e=null===(t=(i=this.getHandler()).getLastActiveFilterIndex)||void 0===t?void 0:t.call(i))&&void 0!==e?e:null}getChildFilterInstance(e){var t;return null!==(t=this.filters[e])&&void 0!==t?t:void 0}getNumChildFilters(){return this.filters.length}destroy(){for(const e of this.filters)this.destroyBean(e);this.filters.length=0,super.destroy()}getFilterWrappers(){return this.filters}getFilterFromWrapper(e){return e}getCompFromWrapper(e){return e}createFilter(e,t){const i=this.beans.userCompFactory,o=this.updateParams(e,this.params,t),n=(0,s.wW7)(i,e,o,"agTextColumnFilter");return n?(this.filterParams[t]=n.params,n.newAgStackInstance()):s.oY$.resolve(null)}updateParams(e,t,i){var o;const{doesRowPassOtherFilter:r,model:a,onModelChange:l,state:d,onStateChange:c,column:u,source:h,onAction:p,onUiChange:g,getValue:v}=t,m=ua(a,i),f=d?{model:ua(d.model,i),state:null===(o=d.state)||void 0===o?void 0:o[i]}:{model:m},C=()=>{const e=this.getHandler();this.filters.forEach((t,o)=>{var n,s,r;i!==o&&(null===(n=e.getHandler(o))||void 0===n||null===(s=n.onAnyFilterChanged)||void 0===s||s.call(n),null===t||void 0===t||null===(r=t.onAnyFilterChanged)||void 0===r||r.call(t))})},w=this.beans.colFilter;return(0,n.A)((0,n.A)((0,n.A)({},w.createBaseFilterParams(u)),e),{},{doesRowPassOtherFilter:e=>r(e)&&this.getHandler().doesFilterPass({node:e,data:e.data,model:this.params.model,handlerParams:w.getHandlerParams(u)},i),model:m,state:f,onModelChange:(e,t)=>{const{filters:o,params:n}=this,s=ca(n.model,o.length,e,i);this.updateActiveList(i,e),l(s,t),C()},onStateChange:e=>this.onStateChange(c,i,e),getHandler:()=>this.getHandler().getHandler(i),onAction:(e,o,n)=>{if((0,s.jy1)(t))return;const r="apply"===e||"reset"===e;r&&this.updateActiveList(i,ua(this.params.state.model,i)),p(e,o,n),r&&C()},onUiChange:g,source:h,getValue:ha(this.beans,u,e,v)})}updateActiveList(e,t){var i,o;null===(i=(o=this.getHandler()).updateActiveList)||void 0===i||i.call(o,e,t)}getHandler(){return this.params.getHandler()}onStateChange(e,t,i){var o;const{model:n,state:s,valid:r}=i,a=this.validity;a[t]=r;const l=this.allState,d=ca(l.model,this.filters.length,n,t),c=a.every(e=>!1!==e),u=[...null!==(o=l.state)&&void 0!==o?o:[]];u[t]=s;const h={state:u,model:d,valid:c};this.allState=h,e(h)}getModelAsString(e){var t,i,o;return null!==(t=null===(i=(o=this.getHandler()).getModelAsString)||void 0===i?void 0:i.call(o,e))&&void 0!==t?t:""}},Ca={tag:"div",cls:"ag-multi-floating-filter ag-floating-filter-input"},wa=class extends s.uAl{constructor(){super(Ca),this.floatingFilters=[],this.compDetailsList=[]}init(e){this.params=e;const{compDetailsList:t}=this.getCompDetailsList(e);return this.setParams(t)}setParams(e){const t=[];return e.forEach(e=>{const i=null===e||void 0===e?void 0:e.newAgStackInstance();null!=i&&(this.compDetailsList.push(e),t.push(i))}),s.oY$.all(t).then(e=>{e.forEach((e,t)=>{this.floatingFilters.push(e);const i=e.getGui();this.appendChild(i),t>0&&(0,s.nl0)(i,!1)})})}refresh(e){this.params=e;const{compDetailsList:t,floatingFilterParamsList:i}=this.getCompDetailsList(e);if(t.length===this.compDetailsList.length&&t.every((e,t)=>{var i;return!(null!==(i=this.beans.colFilter)&&void 0!==i&&i.areFilterCompsDifferent(this.compDetailsList[t],e))})){if(i.forEach((e,t)=>{var i;const o=this.floatingFilters[t];null===(i=o.refresh)||void 0===i||i.call(o,e)}),this.gos.get("enableFilterHandlers")){const t=e;if(null==t.model)this.floatingFilters.forEach((e,t)=>{(0,s.nl0)(e.getGui(),0===t)});else{var o,n;const e=null===(o=t.getHandler())||void 0===o||null===(n=o.getLastActiveFilterIndex)||void 0===n?void 0:n.call(o);this.floatingFilters.forEach((t,i)=>{const o=null==e?0===i:i===e;(0,s.nl0)(t.getGui(),o)})}}}else(0,s.fDi)(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(t)}getCompDetailsList(e){const t=[],i=[],o=e.filterParams,r=e.currentParentModel,a=la(o);return a.forEach((o,l)=>{const d=(0,n.A)((0,n.A)({},e),{},{parentFilterInstance:e=>{this.parentMultiFilterInstance(t=>{const i=t.getChildFilterInstance(l);null!=i&&e(i)})},currentParentModel:()=>{var e,t;return null!==(e=null===(t=r())||void 0===t||null===(t=t.filterModels)||void 0===t?void 0:t[l])&&void 0!==e?e:null}});if(this.gos.get("enableFilterHandlers")){var c,u;const e=d;e.model=null!==(c=null===(u=e.model)||void 0===u||null===(u=u.filterModels)||void 0===u?void 0:u[l])&&void 0!==c?c:null;const{onModelChange:t,getHandler:i}=e;e.onModelChange=(e,i)=>t(ca(this.params.model,a.length,e,l),i),e.getHandler=()=>i().getHandler(l)}(0,s.WY6)(d.filterParams,o.filterParams);const h=this.getCompDetails(o,d);h&&(t.push(h),i.push(d))}),{compDetailsList:t,floatingFilterParamsList:i}}onParentModelChanged(e,t){null!==t&&void 0!==t&&t.afterFloatingFilter||this.parentMultiFilterInstance(i=>{if(null==e)this.floatingFilters.forEach((e,i)=>{e.onParentModelChanged(null,t),(0,s.nl0)(e.getGui(),0===i)});else{const o=i.getLastActiveFilterIndex();this.floatingFilters.forEach((i,n)=>{const r=e.filterModels.length>n?e.filterModels[n]:null;i.onParentModelChanged(r,t);const a=null==o?0===n:n===o;(0,s.nl0)(i.getGui(),a)})}})}destroy(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,super.destroy()}getCompDetails(e,t){var i;const{colFilter:o,frameworkOverrides:n,userCompFactory:r}=this.beans,a=null!==(i=(0,s.Dav)(n,e,()=>o.getDefaultFloatingFilter(this.params.column)))&&void 0!==i?i:"agReadOnlyFloatingFilter";return(0,s.JSz)(r,e,t,a)}parentMultiFilterInstance(e){this.params.parentFilterInstance(t=>{t instanceof ga||t instanceof fa||(0,s.CkN)(120),e(t)})}},ba={moduleName:"MultiFilter",version:ki,userComponents:{agMultiColumnFilter:{getComp:e=>e.gos.get("enableFilterHandlers")?{classImp:fa,params:{useForm:!0}}:ga},agMultiColumnFloatingFilter:wa},beans:[ma],dynamicBeans:{agMultiColumnFilterHandler:va},dependsOn:[Ii,s.Sxk,ts]},ya=class extends s.XQb{constructor(){super(...arguments),this.beanName="aggColNameSvc"}getHeaderName(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const{valueColsSvc:i,colModel:o,rowGroupColsSvc:n}=this.beans,r=e.getColDef().pivotValueColumn;let a,l=null;if((0,s.Qmv)(r)){var d;const o=null!==(d=null===i||void 0===i?void 0:i.columns)&&void 0!==d?d:[],n=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===o.length,s=void 0!==e.getColDef().pivotTotalColumnIds;if(n&&!s)return t;l=r?r.getAggFunc():null,a=!0}else{const t=e.isValueActive(),i=0!==(null===n||void 0===n?void 0:n.columns.length),s=o.isPivotMode()||i||this.gos.get("treeData");t&&s?(l=e.getAggFunc(),a=!0):a=!1}if(a){const e="string"===typeof l?l:"func",i=this.getLocaleTextFunc()(e,e);return"".concat(i,"(").concat(t,")")}return t}},Sa={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},xa=class extends s.XQb{constructor(){super(...arguments),this.beanName="aggFuncSvc",this.aggFuncsMap={},this.initialised=!1}postConstruct(){this.init()}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gos.get("aggFuncs")))}initialiseWithDefaultAggregations(){const e=this.aggFuncsMap;e.sum=Fa,e.first=Ra,e.last=Pa,e.min=Da,e.max=Ea,e.count=Ma,e.avg=ka,this.initialised=!0}isAggFuncPossible(e,t){const i=this.getFuncNames(e).includes(t),o=(0,s.Qmv)(this.aggFuncsMap[t]);return i&&o}getDefaultFuncLabel(e){var t;return null!==(t=Sa[e])&&void 0!==t?t:e}getDefaultAggFunc(e){const t=e.getColDef().defaultAggFunc;if((0,s.Qmv)(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,"sum"))return"sum";const i=this.getFuncNames(e);return null!==i&&void 0!==i&&i.length?i[0]:null}addAggFuncs(e){if(this.init(),e)for(const t of Object.keys(e))e[t]&&(this.aggFuncsMap[t]=e[t])}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){const t=e.getColDef().allowedAggFuncs;return null==t?Object.keys(this.aggFuncsMap).sort():t}clear(){this.aggFuncsMap={}}};function Fa(e){const{values:t}=e;let i=null;for(let o=0;o<t.length;o++){const e=t[o];"number"===typeof e?null===i?i=e:i+="number"===typeof i?e:BigInt(e):"bigint"===typeof e&&(i=null===i?e:("bigint"===typeof i?i:BigInt(i))+e)}return i}function Ra(e){return e.values.length>0?e.values[0]:null}function Pa(e){return e.values.length>0?(0,s.GXs)(e.values):null}function Da(e){const{values:t}=e;let i=null;for(let o=0;o<t.length;o++){const e=t[o];"number"!==typeof e&&"bigint"!==typeof e||!(null===i||i>e)||(i=e)}return i}function Ea(e){const{values:t}=e;let i=null;for(let o=0;o<t.length;o++){const e=t[o];"number"!==typeof e&&"bigint"!==typeof e||!(null===i||i<e)||(i=e)}return i}var Aa=Object.freeze({toString:function(){return this.value.toString()},toNumber:function(){return this.value}});function Ma(e){var t;const{values:i}=e;let o=0;for(let r=0;r<i.length;r++){const e=i[r];o+=null!=e&&"number"===typeof e.value?e.value:1}const n=null===(t=e.rowNode)||void 0===t||null===(t=t.aggData)||void 0===t?void 0:t[e.column.getColId()];if(n&&n.value===o)return n;const s=Object.create(Aa);return s.value=o,s}var Ta=Object.freeze({toString:function(){return"number"===typeof this.value||"bigint"===typeof this.value?this.value.toString():""},toNumber:function(){return this.value}});function ka(e){var t,i;const{values:o}=e;let n=0,s=0;for(let d=0;d<o.length;d++){const e=o[d];let t=null;"number"===typeof e||"bigint"===typeof e?(t=e,s++):null==e||"number"!==typeof e.value&&"bigint"!==typeof e.value||"number"!==typeof e.count||(t=e.value*("number"===typeof e.value?e.count:BigInt(e.count)),s+=e.count),"number"===typeof t?n+="number"===typeof n?t:BigInt(t):"bigint"===typeof t&&(n=("bigint"===typeof n?n:BigInt(n))+t)}let r=null;s>0&&(r=n/("number"===typeof n?s:BigInt(s)));const a=null===(t=e.rowNode)||void 0===t||null===(t=t.aggData)||void 0===t?void 0:t[null===(i=e.column)||void 0===i?void 0:i.getColId()];if(a&&a.count===s&&a.value===r)return a;const l=Object.create(Ta);return l.count=s,l.value=r,l}function Ia(e,t,i,o,n,r){const a="string"===typeof i?e.aggFuncSvc.getAggFunc(i):i;if("function"!==typeof a)return(0,s.ujB)(109,{inputValue:i.toString(),allSuggestions:e.aggFuncSvc.getFuncNames(o)}),null;return a((0,s.AuN)(e.gos,{values:t,column:o,colDef:o.colDef,pivotResultColumn:r,rowNode:n,data:null===n||void 0===n?void 0:n.data}))}var La=class extends s.XQb{constructor(){super(...arguments),this.beanName="aggStage",this.step="aggregate",this.refreshProps=["getGroupRowAgg","alwaysAggregateAtRootLevel","suppressAggFilteredOnly","grandTotalRow"]}wireBeans(e){this.colModel=e.colModel,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.pivotResultCols=e.pivotResultCols,this.valueSvc=e.valueSvc}execute(e){var t;const i=!(null!==(t=this.valueColsSvc)&&void 0!==t&&null!==(t=t.columns)&&void 0!==t&&t.length),o=!this.gos.getCallback("getGroupRowAgg");if(i&&o&&null!==e&&void 0!==e&&e.active)return;const n=this.createAggDetails(e);this.recursivelyCreateAggData(n)}createAggDetails(e){var t;const i=this.colModel.isPivotActive(),o=null===(t=this.valueColsSvc)||void 0===t?void 0:t.columns,n=i&&this.pivotColsSvc?this.pivotColsSvc.columns:[];return{alwaysAggregateAtRootLevel:this.gos.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:!!(0,s.UcN)(this.gos),changedPath:e,valueColumns:null!==o&&void 0!==o?o:[],pivotColumns:n,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gos.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return void 0!==(0,s.euU)(this.gos)||this.gos.get("suppressAggFilteredOnly")}recursivelyCreateAggData(e){e.changedPath.forEachChangedNodeDepthFirst(t=>{if(!t.hasChildren())return void(t.aggData&&this.setAggData(t,null));if(-1===t.level&&!e.groupIncludeTotalFooter){const i=!this.colModel.isPivotMode();if(!e.alwaysAggregateAtRootLevel&&i)return void this.setAggData(t,null)}this.aggregateRowNode(t,e)},!0)}aggregateRowNode(e,t){const i=0===t.valueColumns.length,o=0===t.pivotColumns.length;let n;n=t.userAggFunc?t.userAggFunc({nodes:e.childrenAfterFilter}):i?null:o?this.aggregateRowNodeUsingValuesOnly(e,t):this.aggregateRowNodeUsingValuesAndPivot(e),this.setAggData(e,n),e.sibling&&(this.setAggData(e.sibling,n),e.sibling.pinnedSibling&&this.setAggData(e.sibling.pinnedSibling,n))}aggregateRowNodeUsingValuesAndPivot(e){var t,i;const o={},n=null!==(t=null===(i=this.pivotResultCols)||void 0===i||null===(i=i.getPivotResultCols())||void 0===i?void 0:i.list)&&void 0!==t?t:[];let s=!0;const r=this.beans;for(let d=0;d<n.length;d++){var a;const t=n[d],i=t.getColDef();if(null!=i.pivotTotalColumnIds){s=!1;continue}const l=null!==(a=i.pivotKeys)&&void 0!==a?a:[];let c;c=e.leafGroup?this.getValuesFromMappedSet(e.childrenMapped,l,i.pivotValueColumn):this.getValuesPivotNonLeaf(e,i.colId),o[i.colId]=Ia(r,c,i.pivotValueColumn.getAggFunc(),i.pivotValueColumn,e,t)}if(!s)for(let d=0;d<n.length;d++){var l;const t=n[d],i=t.getColDef();if(null===(l=i.pivotTotalColumnIds)||void 0===l||!l.length)continue;const s=i.pivotTotalColumnIds.map(e=>o[e]);o[i.colId]=Ia(r,s,i.pivotValueColumn.getAggFunc(),i.pivotValueColumn,e,t)}return o}aggregateRowNodeUsingValuesOnly(e,t){const i={},{changedPath:o,valueColumns:n,filteredOnly:s}=t,r=o.active?o.getValueColumnsForNode(e,n):n,a=o.active?o.getNotValueColumnsForNode(e,n):null,l=this.getValuesNormal(e,r,s),d=e.aggData,c=this.beans;if(r.forEach((t,o)=>{i[t.getId()]=Ia(c,l[o],t.getAggFunc(),t,e)}),a&&d)for(const u of a)i[u.getId()]=d[u.getId()];return i}getValuesPivotNonLeaf(e,t){return e.childrenAfterFilter.map(e=>e.aggData[t])}getValuesFromMappedSet(e,t,i){let o=e;for(let n=0;n<t.length;n++){const e=t[n];o=o?o[e]:null}return o?o.map(e=>this.valueSvc.getValue(i,e)):[]}getValuesNormal(e,t,i){const o=[];t.forEach(()=>o.push([]));const n=t.length,s=i?e.childrenAfterFilter:e.childrenAfterGroup,r=s.length;for(let a=0;a<r;a++){const e=s[a];for(let i=0;i<n;i++){const n=t[i],s=this.valueSvc.getValue(n,e);o[i].push(s)}}return o}setAggData(e,t){const i=e.aggData;if(e.aggData=t,e.__localEventService){const o=t=>{const o=e.aggData?e.aggData[t]:void 0,n=i?i[t]:void 0;if(o===n)return;const s=this.colModel.getColById(t);s&&e.dispatchCellChangedEvent(s,o,n)};if(i)for(const e of Object.keys(i))o(e);if(t)for(const e of Object.keys(t))i&&e in i||o(e)}}},Na=class extends s.XQb{constructor(){super(...arguments),this.beanName="filterAggStage",this.step="filter_aggregates",this.refreshProps=[]}wireBeans(e){this.filterManager=e.filterManager}execute(e){var t,i,o=this;const n=this.beans.colModel.isPivotMode(),r=(null===(t=this.filterManager)||void 0===t?void 0:t.isAggregateFilterPresent())||(null===(i=this.filterManager)||void 0===i?void 0:i.isAggregateQuickFilterPresent()),a=(0,s.euU)(this.gos)||(n?e=>e.node.leafGroup:e=>!e.node.group),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.childrenAfterFilter){if(e.childrenAfterAggFilter=e.childrenAfterFilter,t)for(const i of e.childrenAfterAggFilter)l(i,t);o.setAllChildrenCount(e)}e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)};e.forEachChangedNodeDepthFirst(r?e=>{var t;e.childrenAfterAggFilter=(null===(t=e.childrenAfterFilter)||void 0===t?void 0:t.filter(e=>{var t;if(a({node:e})){if(this.filterManager.doesRowPassAggregateFilters({rowNode:e}))return l(e,!0),!0}return null===(t=e.childrenAfterAggFilter)||void 0===t?void 0:t.length}))||null,this.setAllChildrenCount(e),e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)}:l,!0)}setAllChildrenCountTreeData(e){const t=e.childrenAfterAggFilter;let i=0;if(t){const e=t.length;i=e;for(let n=0;n<e;++n){var o;i+=null!==(o=t[n].allChildrenCount)&&void 0!==o?o:0}}e.setAllChildrenCount(0===i&&e.level>=0?null:i)}setAllChildrenCountGridGrouping(e){let t=0;e.childrenAfterAggFilter.forEach(e=>{e.group?t+=e.allChildrenCount:t++}),e.setAllChildrenCount(t)}setAllChildrenCount(e){e.hasChildren()?this.gos.get("treeData")?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e):e.setAllChildrenCount(null)}};function Oa(e,t){if(e.sibling)return;const i=(0,s.sTg)(e,t);i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+e.id,i.sibling=e,e.sibling=i}function Ga(e){const t=e.sibling;t&&(t._destroy(!1),e.sibling=void 0,t.sibling=void 0)}var Ba=class extends s.XQb{constructor(){super(...arguments),this.beanName="footerSvc"}addTotalRows(e,t,i,o,n,r){let a=e;if(n){return function(e,t){switch(t){case"top":case"pinnedTop":return"top"===e;case"bottom":case"pinnedBottom":return"bottom"===e;default:return!1}}(r,o&&(0,s.UcN)(this.gos))&&(Oa(t,this.beans),i(t.sibling,a++)),a}const l=(0,s.MPk)(this.gos);return(o&&l({node:t}))===r&&(Oa(t,this.beans),i(t.sibling,a++)),a}getTopDisplayIndex(e,t,i,o){let n=t;if(e[0].footer){if(0===t)return 0;n-=1}const s=e[e.length-1],r=n>=i.length;return s.footer&&r?s.rowIndex:o(n)}doesCellShowTotalPrefix(e,t){return!(!e.footer||null===t||void 0===t||!t.getColDef().showRowGroup)&&(!!this.gos.get("treeData")||(-1===e.level?(null===(i=this.beans.showRowGroupCols)||void 0===i?void 0:i.columns[0])===t:!!e.rowGroupColumn&&(null===t||void 0===t?void 0:t.isRowGroupDisplayed(e.rowGroupColumn.getId()))));var i}applyTotalPrefix(e,t,i,o){var n,r;const a=null===(n=o.getColDef().cellRendererParams)||void 0===n?void 0:n.totalValueGetter;if(a){const n=(0,s.AuN)(this.gos,{column:o,node:i,value:e,formattedValue:t});if("function"===typeof a)return a(n);var l;if("string"===typeof a)return null===(l=this.beans.expressionSvc)||void 0===l?void 0:l.evaluate(a,n);(0,s.ujB)(179)}return-1===i.level?this.getLocaleTextFunc()("footerTotal","Total")+" ":null!==(r=this.getTotalValue(null!==t&&void 0!==t?t:e))&&void 0!==r?r:""}getTotalValue(e){return this.getLocaleTextFunc()("footerTotal","Total")+" "+(null!==e&&void 0!==e?e:"")}};var Va=class extends s.unA{constructor(){super(...arguments),this.beanName="valueColsSvc",this.eventName="columnValueChanged",this.columnProcessors={set:(e,t,i)=>this.setValueActive(t,e,i),add:(e,t,i)=>this.setValueActive(!0,e,i),remove:(e,t,i)=>this.setValueActive(!1,e,i)},this.columnExtractors={setFlagFunc:(e,t,i)=>this.setColValueActive(e,t,i),getIndexFunc:()=>{},getInitialIndexFunc:()=>{},getValueFunc:e=>{const t=e.aggFunc;return null===t||""===t?null:void 0!==t?!!t:void 0},getInitialValueFunc:e=>null!=e.initialAggFunc&&""!=e.initialAggFunc},this.modifyColumnsNoEventsCallbacks={addCol:e=>this.columns.push(e),removeCol:e=>(0,s.$ii)(this.columns,e)}}extractCols(e,t){this.columns=super.extractCols(e,t);for(const i of this.columns){const e=i.getColDef();null!=e.aggFunc&&""!=e.aggFunc?this.setColAggFunc(i,e.aggFunc):i.getAggFunc()||this.setColAggFunc(i,e.initialAggFunc)}return this.columns}setColumnAggFunc(e,t,i){if(!e)return;const o=this.colModel.getColDefCol(e);o&&(this.setColAggFunc(o,t),this.dispatchColumnChangedEvent(this.eventSvc,this.eventName,[o],i))}syncColumnWithState(e,t,i){const o=i("aggFunc").value1;void 0!==o&&("string"===typeof o?(this.setColAggFunc(e,o),e.isValueActive()||(this.setColValueActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e))):((0,s.Qmv)(o)&&(0,s.ujB)(33),e.isValueActive()&&(this.setColValueActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e))))}setValueActive(e,t,i){if(e!==t.isValueActive()&&(this.setColValueActive(t,e,i),e&&!t.getAggFunc()&&this.aggFuncSvc)){const e=this.aggFuncSvc.getDefaultAggFunc(t);this.setColAggFunc(t,e)}}setColAggFunc(e,t){e.aggFunc=t,e.dispatchStateUpdatedEvent("aggFunc")}setColValueActive(e,t,i){e.aggregationActive!==t&&(e.aggregationActive=t,e.dispatchColEvent("columnValueChanged",i))}},Ha={moduleName:"SharedAggregation",version:ki,beans:[xa,ya,Ba,Va],apiFunctions:{addAggFuncs:function(e,t){e.aggFuncSvc&&e.aggFuncSvc.addAggFuncs(t)},clearAggFuncs:function(e){e.aggFuncSvc&&e.aggFuncSvc.clear()},setColumnAggFunc:function(e,t,i){var o,n;null===(o=e.valueColsSvc)||void 0===o||null===(n=o.setColumnAggFunc)||void 0===n||n.call(o,t,i,"api")}},dependsOn:[Ii]},za={moduleName:"Aggregation",version:ki,beans:[La,Na],rowModels:["clientSide"],dependsOn:[Ha]},Wa=(e,t,i,o)=>n=>{var r;const a=((e,t,i)=>{let{valueSvc:o,dataTypeSvc:n}=e;const r=o.getValue(t,i);let a=null;if(r instanceof Date)a=r;else if("string"===typeof r){var l,d;a=null!==(d=(null!==(l=null===n||void 0===n?void 0:n.getDateParserFunction(t))&&void 0!==l?l:s.xmb)(r))&&void 0!==d?d:null}return a})(e,t,n.node),l=(0,s.sZb)(a);return l?null!==(r=null===o||void 0===o?void 0:o(l[i]))&&void 0!==r?r:l[i]:null},Ua=(e,t,i)=>{let{colNames:o}=e;return e=>{const n=o.getDisplayNameForColumn(t,e.location);return n?"".concat(n," (").concat(i,")"):""}},ja=Object.fromEntries(s.Z4t.map(e=>[e,e.toLowerCase()]));function _a(e){var t;return null!==(t=e.groupHierarchy)&&void 0!==t?t:e.rowGroupingHierarchy}var Ka=class extends s.XQb{constructor(){super(...arguments),this.beanName="groupHierarchyColSvc",this.columns=null,this.sourceColumnMap=new WeakMap,this.inverseColumnMap=new WeakMap}addColumns(e){const t=this.columns;null!=t&&(e.list=t.list.filter(t=>!e.list.some(e=>e.getColId()===t.getColId())).concat(e.list),e.tree=t.tree.filter(t=>!e.tree.some(e=>e.getId()===t.getId())).concat(e.tree),(0,s.YkS)(e))}createColumns(e){var t,i,o,n,r;const a=new WeakMap,l=new WeakMap,d=this.createGroupHierarchyColumns(e,a,l);if((0,s.kFn)(d,null!==(t=null===(i=this.columns)||void 0===i?void 0:i.list)&&void 0!==t?t:[]))return;(0,s.yxN)(this.beans,null===(o=this.columns)||void 0===o?void 0:o.tree),this.columns=null;const{colGroupSvc:c}=this.beans,u=null!==(n=null===c||void 0===c?void 0:c.findDepth(e.tree))&&void 0!==n?n:0,h=null!==(r=null===c||void 0===c?void 0:c.balanceTreeForAutoCols(d,u))&&void 0!==r?r:[];this.columns={list:d,tree:h,treeDepth:u,map:{}},this.sourceColumnMap=a,this.inverseColumnMap=l}updateColumns(e){}getColumn(e){var t,i;return null!==(t=null===(i=this.columns)||void 0===i?void 0:i.list.find(t=>(0,s.E2E)(t,e)))&&void 0!==t?t:null}getColumns(){var e,t;return null!==(e=null===(t=this.columns)||void 0===t?void 0:t.list)&&void 0!==e?e:null}expandColumnInto(e,t){const i=this.getVirtualColumnsForColumn(t).concat(t);for(const o of i)e.some(e=>(0,s.E2E)(e,o)||e.getColId()===o.getColId())||e.push(o)}compareVirtualColumns(e,t){var i,o;const n=this.inverseColumnMap.get(e),s=this.inverseColumnMap.get(t);if(n&&n===s){var r;const i=null!==(r=this.sourceColumnMap.get(n))&&void 0!==r?r:[];return(null===i||void 0===i?void 0:i.indexOf(e))-(null===i||void 0===i?void 0:i.indexOf(t))}return null!==(i=this.sourceColumnMap.get(e))&&void 0!==i&&i.includes(t)?1:null!==(o=this.sourceColumnMap.get(t))&&void 0!==o&&o.includes(e)?-1:null}insertVirtualColumnsForCol(e,t){const i=this.getVirtualColumnsForColumn(t);if(!i)return[];let o=e.indexOf(t);return o<0&&(o=e.length-1),(0,s.kA8)(e,i),e.splice(o,0,...i),i}getVirtualColumnsForColumn(e){var t;return this.isGroupHierarchyColsEnabledForCol(e)&&null!==(t=this.sourceColumnMap.get(e))&&void 0!==t?t:[]}isGroupHierarchyColsEnabled(e){return e.list.some(e=>this.isGroupHierarchyColsEnabledForCol(e))}isGroupHierarchyColsEnabledForCol(e){const t=e.getColDef();return!(!_a(t)||!(t.rowGroup||t.enableRowGroup||null!=t.rowGroupIndex||t.pivot||t.enablePivot||null!=t.pivotIndex))}createGroupHierarchyColDefs(e){const t=[],i=e.getColDef(),o=_a(i);if(!o)return t;if(!this.isGroupHierarchyColsEnabledForCol(e))return t;for(const n of o){let o=null;o="string"===typeof n?this.createColDefForPart(n,e,i):n,o&&t.push(o)}return t}createGroupHierarchyColumns(e,t,i){if(!this.isGroupHierarchyColsEnabled(e))return[];const o=[];for(const n of e.list)for(const e of this.createGroupHierarchyColDefs(n)){const r=e.colId;this.gos.validateColDef(e,r,!0);const a=new s.Brr(e,null,r,!0);this.createBean(a),o.push(a),Ya(t,n,a),i.set(a,n)}return o}createColDefForPart(e,t,i){var o;const{beans:r,gos:a}=this,l="".concat(s.O$T,"-").concat(t.getColId(),"-").concat(e),d={enableRowGroup:i.enableRowGroup,rowGroup:i.rowGroup,enablePivot:i.enablePivot,hide:!0,editable:!1},c=null!==(o=a.get("groupHierarchyConfig"))&&void 0!==o?o:{};if(e in c){var u;const t=(0,n.A)((0,n.A)({},d),c[e]);return null!==(u=t.colId)&&void 0!==u||(t.colId=l),(0,s.cmC)(r,t,t.colId,!0)}const h=(0,s.cmC)(r,(0,n.A)({colId:l},d),l,!0),p=this.getLocaleTextFunc(),g=(e,t)=>{var i;return null!==(i=null===p||void 0===p?void 0:p(e,t))&&void 0!==i?i:t};switch(e){case"year":return(0,n.A)((0,n.A)({},h),{},{headerValueGetter:Ua(r,t,g(e,"Year")),valueGetter:Wa(r,t,0)});case"quarter":return(0,n.A)((0,n.A)({},h),{},{headerValueGetter:Ua(r,t,g(e,"Quarter")),valueGetter:Wa(r,t,1,e=>(Math.floor(Number(e)/4)+1).toString())});case"month":return(0,n.A)((0,n.A)({},h),{},{headerValueGetter:Ua(r,t,g(e,"Month")),valueGetter:Wa(r,t,1)});case"formattedMonth":return(0,n.A)((0,n.A)({},h),{},{headerValueGetter:Ua(r,t,g("month","Month")),valueGetter:Wa(r,t,1,e=>{const t=(e=>{var t,i;const o=null!==(t=s.Z4t[Number.parseInt(e,10)-1])&&void 0!==t?t:e;return{month:o,localeKey:null!==(i=ja[o])&&void 0!==i?i:e}})(e);return g(t.localeKey,t.month)})});case"day":return(0,n.A)((0,n.A)({},h),{},{headerValueGetter:Ua(r,t,g(e,"Day")),valueGetter:Wa(r,t,2)});case"hour":return(0,n.A)((0,n.A)({},h),{},{headerValueGetter:Ua(r,t,g(e,"Hour")),valueGetter:Wa(r,t,3)});case"minute":return(0,n.A)((0,n.A)({},h),{},{headerValueGetter:Ua(r,t,g(e,"Minute")),valueGetter:Wa(r,t,4)});case"second":return(0,n.A)((0,n.A)({},h),{},{headerValueGetter:Ua(r,t,g(e,"Second")),valueGetter:Wa(r,t,5)});default:return null}}};function Ya(e,t,i){const o=e.get(t);e.set(t,(null!==o&&void 0!==o?o:[]).concat(i))}var qa={moduleName:"GroupHierarchy",version:ki,beans:[Ka]},Qa=class extends s.unA{constructor(){super(...arguments),this.beanName="pivotColsSvc",this.eventName="columnPivotChanged",this.columnProcessors={set:(e,t,i)=>this.setColPivotActive(e,t,i),add:(e,t,i)=>this.setColPivotActive(e,!0,i),remove:(e,t,i)=>this.setColPivotActive(e,!1,i)},this.columnOrdering={enableProp:"pivot",initialEnableProp:"initialPivot",indexProp:"pivotIndex",initialIndexProp:"initialPivotIndex"},this.columnExtractors={setFlagFunc:(e,t,i)=>this.setColPivotActive(e,t,i),getIndexFunc:e=>e.pivotIndex,getInitialIndexFunc:e=>e.initialPivotIndex,getValueFunc:e=>e.pivot,getInitialValueFunc:e=>e.initialPivot},this.modifyColumnsNoEventsCallbacks={addCol:e=>{this.columns.includes(e)||this.columns.push(e)},removeCol:e=>(0,s.$ii)(this.columns,e)}}syncColumnWithState(e,t,i,o){const{value1:n,value2:s}=i("pivot","pivotIndex");void 0===n&&void 0===s||("number"===typeof s||n?(e.isPivotActive()||(this.setColPivotActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e)),o&&"number"===typeof s&&(o[e.getId()]=s)):e.isPivotActive()&&(this.setColPivotActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setColPivotActive(e,t,i){if(e.pivotActive!==t){if(e.pivotActive=t,t){var o;const n=null===(o=this.beans.groupHierarchyColSvc)||void 0===o?void 0:o.insertVirtualColumnsForCol(this.columns,e);null===n||void 0===n||n.forEach(e=>this.setColPivotActive(e,t,i))}e.dispatchColEvent("columnPivotChanged",i)}e.dispatchStateUpdatedEvent("pivot")}},Xa=class extends s.unA{constructor(){super(...arguments),this.beanName="rowGroupColsSvc",this.eventName="columnRowGroupChanged",this.columnProcessors={set:(e,t,i)=>this.setActive(t,e,i),add:(e,t,i)=>this.setActive(!0,e,i),remove:(e,t,i)=>this.setActive(!1,e,i)},this.columnOrdering={enableProp:"rowGroup",initialEnableProp:"initialRowGroup",indexProp:"rowGroupIndex",initialIndexProp:"initialRowGroupIndex"},this.columnExtractors={setFlagFunc:(e,t,i)=>this.setColRowGroupActive(e,t,i),getIndexFunc:e=>e.rowGroupIndex,getInitialIndexFunc:e=>e.initialRowGroupIndex,getValueFunc:e=>e.rowGroup,getInitialValueFunc:e=>e.initialRowGroup},this.modifyColumnsNoEventsCallbacks={addCol:e=>{this.columns.includes(e)||this.columns.push(e)},removeCol:e=>(0,s.$ii)(this.columns,e)}}moveColumn(e,t,i){if(0===this.columns.length)return;const o=this.columns[e],n=this.columns.slice(e,t);this.columns.splice(e,1),this.columns.splice(t,0,o),this.updateIndexMap(),this.eventSvc.dispatchEvent({type:this.eventName,columns:n,column:1===n.length?n[0]:null,source:i})}syncColumnWithState(e,t,i,o){const{value1:n,value2:s}=i("rowGroup","rowGroupIndex");void 0===n&&void 0===s||("number"===typeof s||n?(e.isRowGroupActive()||(this.setColRowGroupActive(e,!0,t),this.modifyColumnsNoEventsCallbacks.addCol(e)),o&&"number"===typeof s&&(o[e.getId()]=s)):e.isRowGroupActive()&&(this.setColRowGroupActive(e,!1,t),this.modifyColumnsNoEventsCallbacks.removeCol(e)))}setActive(e,t,i){var o;if(e===t.isRowGroupActive())return;this.setColRowGroupActive(t,e,i);const n=null===(o=this.beans.groupHierarchyColSvc)||void 0===o?void 0:o.getColumn(t);(0,s.DEP)(this.gos,e)&&!n&&this.colModel.setColsVisible([t],!e,i)}setColRowGroupActive(e,t,i){if(e.rowGroupActive!==t){if(e.rowGroupActive=t,t){var o;const n=null===(o=this.beans.groupHierarchyColSvc)||void 0===o?void 0:o.insertVirtualColumnsForCol(this.columns,e);null===n||void 0===n||n.forEach(e=>this.setColRowGroupActive(e,t,i))}e.dispatchColEvent("columnRowGroupChanged",i)}e.dispatchStateUpdatedEvent("rowGroup")}},$a=class extends s.XQb{constructor(){super(...arguments),this.beanName="autoColSvc"}postConstruct(){this.addManagedPropertyListener("autoGroupColumnDef",this.updateColumns.bind(this))}addColumns(e){null!=this.columns&&(e.list=this.columns.list.concat(e.list),e.tree=this.columns.tree.concat(e.tree),(0,s.YkS)(e))}createColumns(e,t,i){var o,n,r;const a=this.beans,{colModel:l,gos:d,rowGroupColsSvc:c,colGroupSvc:u}=a,h=l.isPivotMode(),p=(0,s.BNA)(d,h),g=h?d.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),v=null===c||void 0===c?void 0:c.columns,m=()=>{this.columns&&((0,s.yxN)(a,this.columns.tree),this.columns=null)};if(!(v&&v.length>0||d.get("treeData"))||g||p)return void m();const f=this.generateAutoCols(v),C=(0,s.kFn)(f,(null===(o=this.columns)||void 0===o?void 0:o.list)||null),w=e.treeDepth,b=this.columns?this.columns.treeDepth:-1;if(C&&b==w){const e=new Map(f.map(e=>[e.getId(),e]));for(const t of null!==(y=null===(S=this.columns)||void 0===S?void 0:S.list)&&void 0!==y?y:[]){var y,S;const o=e.get(t.getId());o&&t.setColDef(o.getColDef(),null,i)}return}m();const x=null!==(n=null===u||void 0===u?void 0:u.findDepth(e.tree))&&void 0!==n?n:0,F=null!==(r=null===u||void 0===u?void 0:u.balanceTreeForAutoCols(f,x))&&void 0!==r?r:[];this.columns={list:f,tree:F,treeDepth:x,map:{}};t(e=>{if(!e)return null;const t=e.filter(e=>!(0,s.dYA)(e));return[...f,...t]})}updateColumns(e){var t;const i=(0,s.sHF)(e.source);null===(t=this.columns)||void 0===t||t.list.forEach((e,t)=>this.updateOneAutoCol(e,t,i))}getColumn(e){var t,i;return null!==(t=null===(i=this.columns)||void 0===i?void 0:i.list.find(t=>(0,s.E2E)(t,e)))&&void 0!==t?t:null}getColumns(){var e,t;return null!==(e=null===(t=this.columns)||void 0===t?void 0:t.list)&&void 0!==e?e:null}generateAutoCols(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],{gos:i}=this,o=i.get("treeData");let n=(0,s.Njs)(i);return o&&n&&((0,s.ujB)(182),n=!1),n?e.forEach((e,i)=>{t.push(this.createOneAutoCol(e,i))}):t.push(this.createOneAutoCol()),t}isSuppressAutoCol(){const e=this.gos;if("custom"===e.get("groupDisplayType"))return!0;return"custom"===e.get("treeDataDisplayType")}createOneAutoCol(e,t){let i;i=e?"".concat(s.JPk,"-").concat(e.getId()):s.JPk;const o=this.createAutoColDef(i,e,t);o.colId=i;const n=new s.Brr(o,null,i,!0);return this.createBean(n),n}updateOneAutoCol(e,t,i){const o=e.getColDef(),n="string"==typeof o.showRowGroup?o.showRowGroup:void 0,r=this.beans,a=null!=n?r.colModel.getColDefCol(n):void 0,l=e.getId(),d=this.createAutoColDef(l,null!==a&&void 0!==a?a:void 0,t);e.setColDef(d,null,i),(0,s.l8G)(r,{state:[(0,s.oJH)(d,l)]},i)}createAutoColDef(e,t,i){let o=this.createBaseColDef(t);const n=this.gos.get("autoGroupColumnDef");if((0,s.WY6)(o,n),o=(0,s.cmC)(this.beans,o,e,!0),!this.gos.get("treeData")){(0,s.MWY)(o.field)&&(0,s.MWY)(o.valueGetter)&&(0,s.MWY)(o.filterValueGetter)&&"agGroupColumnFilter"!==o.filter&&(o.filter=!1)}i&&i>0&&(o.headerCheckboxSelection=!1);const r=(0,s.hnU)(this.gos),a=o.valueGetter||null!=o.field;return r&&!a&&(o.sortIndex=void 0,o.initialSort=void 0),o}createBaseColDef(e){var t;const i=this.gos.get("autoGroupColumnDef"),o={headerName:this.getLocaleTextFunc()("group","Group"),showRowGroup:null===(t=null===e||void 0===e?void 0:e.getColId())||void 0===t||t};var n;(i&&(i.cellRenderer||i.cellRendererSelector)||(o.cellRenderer="agGroupCellRenderer"),e)&&(o.headerName=null!==(n=this.beans.colNames.getDisplayNameForColumn(e,"header"))&&void 0!==n?n:void 0,o.headerValueGetter=e.colDef.headerValueGetter);return o}destroy(){var e;(0,s.yxN)(this.beans,null===(e=this.columns)||void 0===e?void 0:e.tree),super.destroy()}},Za=class extends s.XQb{addExpandedCss(e,t){t.isExpandable()&&(e.push("ag-row-group"),e.push(t.expanded?"ag-row-group-expanded":"ag-row-group-contracted"))}getRowExpandedListeners(e){const{rowNode:t}=e,i=this.updateExpandedCss.bind(this,e,t);return{expandedChanged:i,hasChildrenChanged:i}}setExpanded(e,t,i,o){if(e.expanded===t)return;e.expanded=t,e.dispatchRowEvent("expandedChanged");const r=(0,n.A)((0,n.A)({},(0,s.zRK)(e,this.gos,"rowGroupOpened")),{},{expanded:t,event:i||null});this.dispatchExpandedEvent(r,o)}isExpandable(e){return!e.footer&&(this.beans.colModel.isPivotMode()?e.hasChildren()&&!e.leafGroup:e.hasChildren()||e.master)}updateExpandedCss(e,t){const i=t.isExpandable(),o=1==t.expanded;e.forEachGui(void 0,e=>{const t=e.rowComp;t.toggleCss("ag-row-group",i),t.toggleCss("ag-row-group-expanded",i&&o),t.toggleCss("ag-row-group-contracted",i&&!o),(0,s.oAJ)(e.element,i&&o)})}dispatchStateUpdatedEvent(){this.eventSvc.dispatchEvent({type:"rowExpansionStateChanged"})}};function Ja(e){let t=e.get("groupHideParentOfSingleChild");return t||(t=e.get("groupRemoveSingleChildren"),!t&&e.get("groupRemoveLowestSingleChildren")&&(t="leafGroupsOnly")),{groupHideParentOfSingleChild:t,isGroupMultiAutoColumn:(0,s.Njs)(e),hideOpenParents:e.get("groupHideOpenParents"),grandTotalRow:(0,s.UcN)(e),groupTotalRow:(0,s.MPk)(e)}}function el(e,t,i){return!0===e.groupHideParentOfSingleChild&&i&&1===t.childrenAfterGroup.length}function tl(e,t,i){return"leafGroupsOnly"===e.groupHideParentOfSingleChild&&i&&t.leafGroup&&1===t.childrenAfterGroup.length}function il(e,t,i,o,n,s){const r=o&&!i,a=o&&t.leafGroup,l=e.hideOpenParents&&t.expanded&&!t.master&&!a;return!r&&!l&&!n&&!s}var ol=class extends s.XQb{constructor(){super(...arguments),this.beanName="flattenStage",this.step="map",this.refreshProps=["groupHideParentOfSingleChild","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupTotalRow","masterDetail"]}execute(){const{beans:e,gos:t}=this,i=[],o=e.rowModel.rootNode;if(!o)return i;const n=e.colModel.isPivotMode(),s=n&&o.leafGroup&&o.aggData,r=s?[o]:o.childrenAfterSort,a=Ja(t);this.recursivelyAddToRowsToDisplay(a,r,i,n,0);const l=i.length>0,d=a.grandTotalRow;if(!s&&l&&d)if(Oa(o,e),"pinnedBottom"===d||"pinnedTop"===d){var c;null===(c=this.beans.pinnedRowModel)||void 0===c||c.setGrandTotalPinned("pinnedBottom"===d?"bottom":"top")}else{const e="top"===d;this.addRowNodeToRowsToDisplay(a,o.sibling,i,0,e)}return i}recursivelyAddToRowsToDisplay(e,t,i,o,n){if(null===t||void 0===t||!t.length)return;const s=this.beans.masterDetailSvc;for(let r=0;r<t.length;r++){const a=t[r],l=a.hasChildren(),d=el(e,a,l),c=tl(e,a,l);if(il(e,a,l,o,d,c)&&this.addRowNodeToRowsToDisplay(e,a,i,n),!o||!a.leafGroup)if(l){const t=d||c;if(a.expanded||t){const r=e.groupTotalRow({node:a});r||Ga(a);const l=t?n:n+1;"top"===r&&(Oa(a,this.beans),this.addRowNodeToRowsToDisplay(e,a.sibling,i,l));const d=null===s||void 0===s?void 0:s.getDetail(a);d&&this.addRowNodeToRowsToDisplay(e,d,i,n),this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,i,o,l),"bottom"===r&&(Oa(a,this.beans),this.addRowNodeToRowsToDisplay(e,a.sibling,i,l))}}else{const t=null===s||void 0===s?void 0:s.getDetail(a);t&&this.addRowNodeToRowsToDisplay(e,t,i,n)}}}addRowNodeToRowsToDisplay(e,t,i,o,n){n?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:o)}},nl=class extends s.XQb{constructor(){super(...arguments),this.beanName="groupEditSvc",this.pendingEditRefresh=null,this.dropGroupTarget=null,this.dropGroupTimer=null,this.dropGroupThrottled=!1,this.draggingGroups=null}postConstruct(){(0,s.dbY)(this.gos)&&this.addManagedListeners(this.eventSvc,{cellValueChanged:e=>this.onCsrmCellChange(e),batchEditingStopped:()=>this.flushGroupEdits()})}destroy(){this.stopDragging(!0),super.destroy()}isGroupingDrop(e){var t;return!(!e.rowDragManaged||!e.sameGrid)&&(!!this.gos.get("refreshAfterGroupEdit")&&(!(null===(t=this.beans.rowGroupColsSvc)||void 0===t||null===(t=t.columns)||void 0===t||!t.length)&&!this.beans.colModel.isPivotMode()))}initDraggingGroups(e){const t=new Map,i=e=>{const o=e.childrenAfterGroup;if(o){if(t.has(e))return;const n=o.slice();t.set(e,n);for(const e of n)i(e)}};for(const o of e.rows)o.group&&i(o);this.draggingGroups=t}canSetParent(e){var t,i;return!!e.sameGrid&&(!(null===(t=this.beans.groupStage)||void 0===t||!t.treeData)||!(e.rowDragManaged&&!this.gos.get("refreshAfterGroupEdit"))&&!(null===(i=this.beans.rowGroupColsSvc)||void 0===i||null===(i=i.columns)||void 0===i||!i.length))}canDropRow(e,t){var i,o,n,s,r,a;if(null!==(i=this.beans.groupStage)&&void 0!==i&&i.treeData)return!al(e,t.newParent);const{position:l,target:d,newParent:c,rootNode:u}=t,h=e.parent;if(e.group&&(rl(e,d)||rl(e,c)))return!1;if("inside"===l)return!0;if(c&&c!==h)return c!==u||h===u;const p=null!==(o=null!==c&&void 0!==c?c:null===d||void 0===d?void 0:d.parent)&&void 0!==o?o:u;if(p!==h)return!1;const g=e.group?e.level:null!==(n=h.level)&&void 0!==n?n:-1,v=d?d.group?d.level:null!==(s=null===(r=d.parent)||void 0===r?void 0:r.level)&&void 0!==s?s:-1:null!==(a=null===p||void 0===p?void 0:p.level)&&void 0!==a?a:-1;return!(g>=0&&v>=0&&v!==g)}fixRowsDrop(e,t,i,o){var n,r,a,l,d;const c=!(null===(n=this.beans.groupStage)||void 0===n||!n.treeData);e.treeData=c;if(!(!(null===(r=this.beans.rowGroupColsSvc)||void 0===r||null===(r=r.columns)||void 0===r||!r.length)||this.gos.get("pivotMode"))&&!c)return;this.draggingGroups||!this.isGroupingDrop(e)||e.suppressMoveWhenRowDragging||this.initDraggingGroups(e);let u=e.target,h=null,p=!1;const g=e.rootNode,v=this.beans.rowModel,m=!!u&&this.canDropStartGroup(u);this.updateDropTarget(m?u:null,i,e);const f=null!==(a=null===(l=this.beans.pageBounds)||void 0===l||null===(d=l.getLastRow)||void 0===d?void 0:d.call(l))&&void 0!==a?a:v.getRowCount()-1;if(t){var C,w,b;if(!u||o>=.5&&u.rowIndex===f?h=g:e.moved&&u&&this.dropGroupThrottled&&this.shouldDropTargetBeParent(e)&&(h=u),!h)h=null!==(w=null===(b=u)||void 0===b?void 0:b.parent)&&void 0!==w?w:g;!i&&u&&m&&(!h||!u.expanded&&null!==(C=u.childrenAfterSort)&&void 0!==C&&C.length)&&this.startDropGroupDelay(u)}else!i&&u&&m&&this.startDropGroupDelay(u);if(h){if(u&&h===u&&h!==g){const e=h.expanded?(0,s.uV7)(v,1,u):null;(null===e||void 0===e?void 0:e.parent)===h?(u=e,o=-.5):p=!0}if(u&&!p){let e=u;for(;e&&e!==g&&e!==h;)u=e,e=e.parent}}e.target=u,e.newParent=h,e.yDelta=o,e.inside=p}clearNewSameParent(e,t){const i=e.newParent;!i||t&&!ll(e.rows,i)||(e.newParent=null)}updateDropTarget(e,t,i){var o,n;this.dropGroupTarget&&this.dropGroupTarget!==e&&this.resetDragGroup(),null!==e&&void 0!==e&&null!==(o=e.childrenAfterSort)&&void 0!==o&&o.length&&(t&&this.dropGroupThrottled&&!e.expanded&&null!==(n=e.isExpandable)&&void 0!==n&&n.call(e)&&e.setExpanded(!0,void 0,!0),this.canDropInTarget(e,i)&&(this.dropGroupThrottled=!0,this.dropGroupTarget=e))}canDropInTarget(e,t){if(e.expanded)return!0;if(!e.group)return!1;if("inside"===t.pointerPos)return!0;if(t.treeData)return!1;const i=t.rows,o=e.level;for(let n=0,s=i.length;n<s;++n){const t=i[n];if(t!==e&&t.group&&t.level!==o)return!1}return!0}startDropGroupDelay(e){if(this.dropGroupTarget&&this.dropGroupTarget!==e&&this.resetDragGroup(),this.dropGroupTarget=e,null!==this.dropGroupTimer)return;const t=this.gos.get("rowDragInsertDelay");this.dropGroupTimer=window.setTimeout(()=>{var e;this.dropGroupTimer=null,this.dropGroupThrottled=!0,null===(e=this.beans.dragAndDrop)||void 0===e||e.nudge()},t)}resetDragGroup(){null!==this.dropGroupTimer&&(window.clearTimeout(this.dropGroupTimer),this.dropGroupTimer=null),this.dropGroupTarget=null,this.dropGroupThrottled=!1}stopDragging(e){e&&(this.draggingGroups=null),this.resetDragGroup()}shouldDropTargetBeParent(e){var t,i;let{target:o,rows:n,pointerPos:s,treeData:r}=e;if(!o||"none"===s)return!1;if("inside"===s)return!0;if(!r&&o.group&&!o.expanded)return!0;if("above"===s)return!1;const a=this.beans.rowModel;let l,d=o.rowIndex+1;do{var c;l=a.getRow(d++)}while(null!==(c=l)&&void 0!==c&&c.footer);const u=null!==(t=null===(i=this.draggingGroups)||void 0===i?void 0:i.get(o))&&void 0!==t?t:o.childrenAfterGroup;if(l&&l.parent===o&&null!==u&&void 0!==u&&u.length){const e=new Set(n);for(let t=0,i=u.length;t<i;++t){const i=u[t];if(null!==i.rowIndex&&!e.has(i))return!0}}return!1}dropGroupEdit(e){var t,i,o,n;const{beans:r}=this,a=e.position,l=null!==(t=e.target)&&void 0!==t?t:null,d=e.rootNode,c=null!==(i=null!==(o=e.newParent)&&void 0!==o?o:null===l||void 0===l?void 0:l.parent)&&void 0!==i?i:d,u=r.focusSvc,h=u.getFocusedCell(),p=h&&(0,s.odY)(r,h),g=new Set,v=new s.VVe,m=v.updates;let f;const C=e=>{g.has(e)||(g.add(e),null!==f&&void 0!==f||(f=this.newGroupValues(c)),this.setRowGroup(e,f)&&m.add(e))},w=e=>{var t,i;const o=null!==(t=null===(i=this.draggingGroups)||void 0===i?void 0:i.get(e))&&void 0!==t?t:e.childrenAfterGroup,n=null===o||void 0===o?void 0:o.length;if(n)for(let s=0;s<n;++s){const e=o[s];e.sourceRowIndex>=0?C(e):w(e)}};for(const s of e.rows)if(s.group)w(s);else{const e=s.sourceRowIndex>=0&&!s.destroyed?s:this.csrmFirstLeaf(s);e&&C(e)}const b="inside"===a?"above":a,y="inside"===a&&null!==(n=this.findFirstLeafForParent(c,g))&&void 0!==n?n:l;let S=!1;if(g.size&&"none"!==b&&(S=(0,s.YFT)(d._leafs,g,y,"above"===b)),!m.size&&!S)return!1;v.reordered=S;for(const s of g)v.updates.add(s);return this.csrmRefresh(v),p?p.focusCell():u.clearFocusedCell(),!0}canDropStartGroup(e){var t,i;return!!e&&e.level>=0&&!e.footer&&!e.detail&&((null===(t=e.isExpandable)||void 0===t?void 0:t.call(e))||!(null===(i=e.childrenAfterSort)||void 0===i||!i.length))}flushGroupEdits(){const e=this.pendingEditRefresh;e&&(this.pendingEditRefresh=null,this.csrmRefresh(e))}csrmRefresh(e){const t=this.beans.rowModel,i=t.rootNode;i&&t.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new s.k$d(!1,i),changedRowNodes:e})}newGroupValues(e){var t,i;const o=null!==(t=null===(i=this.beans.rowGroupColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[],n=new Array(o.length);let s=-1,r=e;for(;r&&r.level>=0;){const e=o[r.level];if(e){var a,l,d;const t=e.getColId(),i=r.level;n[i]=null!==(a=null!==(l=null===(d=r.groupData)||void 0===d?void 0:d[t])&&void 0!==l?l:r.key)&&void 0!==a?a:void 0,i>s&&(s=i)}r=r.parent}return{values:n,columns:o,maxLevel:s}}setRowGroup(e,t){let{values:i,columns:o,maxLevel:n}=t;if(n<0)return!1;const{valueSvc:s,editSvc:r}=this.beans;let a=!1;for(let l=0;l<o.length;++l){const t=o[l];if(!t||l>n)continue;const d=i[l],c=s.getValue(t,e,!1,"api");if(c===d||null==c&&null==d)continue;let u=d;const h=s.parseValue(t,e,d,c);void 0!==h&&(u=h);const p=null===r||void 0===r?void 0:r.setDataValue({rowNode:e,column:t},u,"rowDrag");(null!=p?!!p:e.setDataValue(t,u,"rowDrag"))&&(a=!0)}return a}onCsrmCellChange(e){const{column:t,node:i,source:o}=e;if(!this.gos.get("refreshAfterGroupEdit"))return;if("rowDrag"===o)return;if(null===t||void 0===t||!t.isRowGroupActive())return;if(i.group||!i.data)return;const n=this.beans.editSvc;if(null!==n&&void 0!==n&&n.isBatchEditing()){let e=this.pendingEditRefresh;e||(e=sl(),this.pendingEditRefresh=e),e.updates.add(i)}else{const e=sl();e.updates.add(i),this.csrmRefresh(e)}}csrmFirstLeaf(e){var t;if(!e)return null;const i=this.draggingGroups;let o=null!==(t=null===i||void 0===i?void 0:i.get(e))&&void 0!==t?t:e.childrenAfterGroup;for(;null!==(n=o)&&void 0!==n&&n.length;){var n,r;const e=o[0];if(e.sourceRowIndex>=0)return e.destroyed?this.firstAliveChildLeaf(e):e;o=null!==(r=null===i||void 0===i?void 0:i.get(e))&&void 0!==r?r:e.childrenAfterGroup}return(0,s.fj_)(e)}firstAliveChildLeaf(e){var t,i;const o=null!==(t=null===(i=this.draggingGroups)||void 0===i?void 0:i.get(e))&&void 0!==t?t:e.childrenAfterGroup;if(o)for(const n of o)if(n.sourceRowIndex>=0&&!n.destroyed)return n;return null}findFirstLeafForParent(e,t){var i,o;if(!e)return null;const n=null!==(i=null===(o=this.draggingGroups)||void 0===o?void 0:o.get(e))&&void 0!==i?i:null===e||void 0===e?void 0:e.childrenAfterGroup;if(!n)return null;for(let s=0,r=n.length;s<r;++s){const e=n[s];if(e.sourceRowIndex>=0&&!t.has(e))return e;const i=this.findFirstLeafForParent(e,t);if(null!==i)return i}return null}},sl=()=>{const e=new s.VVe;return e.reordered=!0,e},rl=(e,t)=>{if(!e||!t)return!1;let i=t;for(;i;){if(i===e)return!0;i=i.parent}return!1},al=(e,t)=>{if(!t||e.parent===t)return!1;let i=t;const o=e.id;for(;i;){if(i===e)return!0;if(null!=o&&i.id===o)return!0;i=i.parent}return!1},ll=(e,t)=>{for(let i=0,o=e.length;i<o;++i)if(e[i].parent!==t)return!1;return!0},dl=class extends s.XQb{constructor(){super(...arguments),this.beanName="groupStage",this.step="group",this.refreshProps=["groupAllowUnbalanced","groupDefaultExpanded","groupDisplayType","groupHideOpenParents","initialGroupOrderComparator","treeData","treeDataChildrenField","treeDataParentIdField"],this.treeData=!1,this.hasTreeData=!1,this.needReset=!1,this.nested=!1,this.strategy=void 0}postConstruct(){const e=this.gos;e.isModuleRegistered("TreeData")&&(this.hasTreeData=!0,this.treeData=e.get("treeData")),this.addManagedEventListeners({showRowGroupColsSetChanged:()=>{var e;return null===(e=this.strategy)||void 0===e?void 0:e.onShowRowGroupColsSetChanged()}})}invalidateGroupCols(){var e,t;null===(e=this.strategy)||void 0===e||null===(t=e.invalidateGroupCols)||void 0===t||t.call(e)}destroy(){this.strategy=this.destroyBean(this.strategy),super.destroy()}getNonLeaf(e){var t;return null===(t=this.strategy)||void 0===t||null===(t=t.nonLeafsById)||void 0===t?void 0:t.get(e)}getNestedDataGetter(){var e;return null===(e=this.getStrategy())||void 0===e?void 0:e.nestedDataGetter}onPropChange(e){var t,i,o;const n=this.gos,s=null===(t=this.strategy)||void 0===t?void 0:t.nestedDataGetter;if(e.has("treeData")){const e=n.get("treeData")&&this.hasTreeData;var r;if(this.treeData!==e)null===(r=this.beans.rowDragSvc)||void 0===r||r.cancelRowDrag(),this.treeData=e,this.needReset=!0,this.strategy=this.destroyBean(this.strategy)}return null===(i=this.strategy)||void 0===i||null===(o=i.onPropChange)||void 0===o||o.call(i,e),this.getNestedDataGetter()!==s}extractData(){const e=this.beans.rowModel.rootNode,t=this.nested?null===e||void 0===e?void 0:e.childrenAfterGroup:null===e||void 0===e?void 0:e._leafs;var i;if(!t)return null!==(i=this.gos.get("rowData"))&&void 0!==i?i:[];const o=t.length,n=new Array(o);let s=0;for(let r=0;r<o;++r){const e=t[r].data;null!=e&&(n[s++]=e)}return n.length=s,n}execute(e){const t=this.beans,i=t.rowModel.rootNode;if(!i)return!1;const o=this.getStrategy(),n=!(null===o||void 0===o||!o.nestedDataGetter),s=this.needReset;var r;(this.nested=n,s)&&(this.needReset=!1,null===(r=t.rowDragSvc)||void 0===r||r.cancelRowDrag(),e.animate=!1,hl(i,!n));return o?o.execute(i,e)||s:void 0}loadLeafs(e){return e.footer?cl(e):ul(e)}loadGroupData(e){const t=this.getStrategy();return t?t.loadGroupData(e):(e._groupData=null,null)}clearNonLeafs(){var e;null===(e=this.strategy)||void 0===e||e.clearNonLeafs()}getStrategy(){var e;let t=this.strategy;return void 0!==t&&this.isAlive()||(t=null!==(e=this.beans.registry.createDynamicBean(this.treeData?"treeGroupStrategy":"groupStrategy",!1))&&void 0!==e?e:null,this.strategy=t&&this.createBean(t)),t}},cl=e=>{const t=e.sibling;if(!t)return null;const i=t._leafs;return void 0!==i?i:ul(t)},ul=e=>{const t=e.childrenAfterGroup,i=null===t||void 0===t?void 0:t.length;if(e._leafs=null,!i)return null;let o;const n=1===i?t[0]:null;if(null!==n&&void 0!==n&&n.group&&n.sourceRowIndex<0)o=n._leafs,void 0===o&&(o=ul(n));else if(e.leafGroup)o=t;else{o=[];for(let e=0;e<i;++e){const i=t[e];if(i.sourceRowIndex>=0&&o.push(i),!i.group)continue;let n=i._leafs;if(void 0===n&&(n=ul(i)),n)for(let e=0,t=n.length;e<t;++e)o.push(n[e])}}return e._leafs=o,o},hl=(e,t)=>{const i=e._leafs,o=e.sibling;e.treeNodeFlags=0,e.childrenAfterGroup=i,e.childrenMapped=null,e._groupData=void 0,o&&(o.childrenAfterGroup=e.childrenAfterGroup,o.childrenAfterAggFilter=e.childrenAfterAggFilter,o.childrenAfterFilter=e.childrenAfterFilter,o.childrenAfterSort=e.childrenAfterSort,o.childrenMapped=null,o._groupData=void 0);for(let s=0,r=null!==(n=i.length)&&void 0!==n?n:0;s<r;++s){var n;const o=i[s],r=o.sibling;o._leafs=void 0,pl(o),r&&pl(r),o.parent=e,t&&(o.treeParent=null),o.group=!1,o.updateHasChildren()}e.updateHasChildren()},pl=e=>{e.key=null,e.treeNodeFlags=0,e.allChildrenCount=null,e.childrenAfterGroup=null,e.childrenAfterAggFilter=null,e.childrenAfterFilter=null,e.childrenAfterSort=null,e.childrenMapped=null,e.level=0,e._groupData=void 0};function gl(e,t,i){let o=e;const n=o.level-t.level;if(n<=0)return!1;if(!i.get("groupHideOpenParents"))return!1;for(let r=0;r<n;r++){var s;if(!((null===(s=o.parent)||void 0===s?void 0:s.getFirstChild())===o))return!1;o=o.parent}return o===t}var vl=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.group;const n=e.gos,s=o&&n.get("isGroupOpenByDefault");if(!s){const e=n.get("groupDefaultExpanded");return-1===e||i<e}return 1==s({api:e.gridApi,context:e.gridOptions.context,rowNode:t,field:t.field,key:t.key,level:i,rowGroupColumn:t.rowGroupColumn})},ml=class extends s.XQb{constructor(){super(...arguments),this.indentClass=null}init(e,t,i,o,n,s,r){var a,l;this.params=r,this.eGui=t,this.eCheckbox=i,this.eExpanded=o,this.eContracted=n,this.comp=e,this.compClass=s;const{node:d,column:c}=r;this.node=d,this.displayedNode=d;this.isEmbeddedRowMismatch()||(d.footer?this.initFooterCell():c?(this.displayedNode=null!==(a=null===(l=this.beans.showRowGroupColValueSvc)||void 0===l?void 0:l.getDisplayedNode(d,c))&&void 0!==a?a:this.node,this.setupExpand(),this.setupCheckbox(),this.addGroupValue(),this.setupIndent()):this.initFullWidthCell())}initFooterCell(){const{node:e}=this.params;this.addGroupValue(),this.setupIndent();-1===e.level||this.comp.toggleCss("ag-row-group-leaf-indent",!0)}initFullWidthCell(){this.setupExpand(),(()=>{const{rowDragSvc:e}=this.beans;if(!this.params.rowDrag||!e)return;const t=e.createRowDragComp(()=>this.params.value,this.params.node);this.createManagedBean(t),this.eGui.insertAdjacentElement("afterbegin",t.getGui())})(),this.setupCheckbox(),this.addGroupValue(),this.setupIndent()}getCellAriaRole(){var e,t;const i=null===(e=this.params.colDef)||void 0===e?void 0:e.cellAriaRole,o=null===(t=this.params.column)||void 0===t?void 0:t.getColDef().cellAriaRole;return i||o||"gridcell"}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;const{visibleCols:e}=this.beans,t="left"===this.params.pinned,i="right"===this.params.pinned,o=!t&&!i;return this.gos.get("enableRtl")?e.isPinningLeft()?!i:!o:e.isPinningLeft()?!t:!o}addGroupValue(){var e;const{params:{value:t,valueFormatted:i}}=this,o=this.getInnerCompDetails();this.comp.setInnerRenderer(o,null!==(e=null!==i&&void 0!==i?i:t)&&void 0!==e?e:null)}setupExpand(){const{colModel:e}=this.beans,{eGridCell:t,column:i,suppressDoubleClickExpand:o}=this.params,n=(e,t)=>{const i=(0,s.asF)(e,this.beans,null);i&&(t.appendChild(i),this.addDestroyFunc(()=>i.remove()))};n("groupExpanded",this.eExpanded),n("groupContracted",this.eContracted);const r=this.comp,a=()=>{if(!this.isExpandable())return;const e=this.displayedNode.expanded;r.setExpandedDisplayed(e),r.setContractedDisplayed(!e),(0,s.oAJ)(t,!!this.displayedNode.expanded)},l=()=>{const i=this.isExpandable();r.toggleCss("ag-cell-expandable",i),r.toggleCss("ag-row-group",i);const o=!i&&e.isPivotMode();r.toggleCss("ag-pivot-leaf-group",o);const n=!e.isPivotMode()&&(!this.displayedNode.footer||-1!==this.displayedNode.level);r.toggleCss("ag-row-group-leaf-indent",!i&&n);const l=this.getChildCount(),d=l>0?"(".concat(l,")"):"";r.setChildCount(d),i?a():(r.setExpandedDisplayed(!1),r.setContractedDisplayed(!1),(0,s.WnW)(t))};(()=>{(null===i||void 0===i?void 0:i.isCellEditable(this.displayedNode))&&this.gos.get("enableGroupEdit")||o||this.addManagedListeners(t,{dblclick:this.onCellDblClicked.bind(this)}),this.addManagedListeners(this.eExpanded,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(this.eContracted,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedListeners(this.displayedNode,{allChildrenCountChanged:l,masterChanged:l,groupChanged:l,hasChildrenChanged:l,expandedChanged:a})})(),l()}getInnerCompDetails(){var e;const{userCompFactory:t,findSvc:i}=this.beans,o=this.params;if(o.fullWidth){const e=this.gos.get("groupRowRendererParams"),r=(0,s.lK1)(t,e,o);return r||(null!==i&&void 0!==i&&i.isMatch(o.node,null)?(0,s.lK1)(t,(0,n.A)((0,n.A)({},e),{},{innerRenderer:"agFindCellRenderer"}),o):void 0)}const r=e=>e&&e.componentClass==this.compClass,a=(0,s.lK1)(t,o,o);if(a&&!r(a))return a;const{displayedNode:{rowGroupColumn:l}}=this,d=null===l||void 0===l?void 0:l.colDef,c=l&&(null===(e=o.column)||void 0===e?void 0:e.isRowGroupDisplayed(l.getId()));if(d&&c){const e=(0,s.Jy1)(t,d,o);if(e){if(!r(e))return e;var u;if(null!==d&&void 0!==d&&null!==(u=d.cellRendererParams)&&void 0!==u&&u.innerRenderer)return(0,s.lK1)(t,d.cellRendererParams,o)}}return null!==i&&void 0!==i&&i.isMatch(o.node,o.column)?(0,s.Jy1)(t,(0,n.A)((0,n.A)({},null!==d&&void 0!==d?d:o.colDef),{},{cellRenderer:"agFindCellRenderer"}),o):void 0}getChildCount(){const{column:e,suppressCount:t}=this.params;if(t)return 0;const{allChildrenCount:i,rowGroupColumn:o}=this.displayedNode;if(!((null!==i&&void 0!==i?i:0)>0&&(!o||!e||(null===e||void 0===e?void 0:e.isRowGroupDisplayed(o.getId())))))return 0;return this.gos.get("showOpenedGroup")&&this.displayedNode!==this.node&&!gl(this.node,this.displayedNode,this.gos)?0:null!==i&&void 0!==i?i:0}isExpandable(){const{node:e,column:t,colDef:i}=this.params;if(!this.displayedNode.isExpandable())return!1;if(e.rowPinned)return!1;if(!t)return!0;if(e.hasChildren()&&i){const{showRowGroup:e}=i;if(!e)return!1;if(!0===e)return!0}if(e===this.displayedNode){if(e.rowGroupColumn){if(null===t||void 0===t?void 0:t.isRowGroupDisplayed(e.rowGroupColumn.getId()))return!0}return!!e.master&&(!0===(null===i||void 0===i?void 0:i.showRowGroup)||null==(null===i||void 0===i?void 0:i.showRowGroup))}return gl(this.node,this.displayedNode,this.gos)}setupIndent(){const{suppressPadding:e,node:t,colDef:i}=this.params;if(e)return;const o=()=>{let e=t.uiLevel;i&&!0!==i.showRowGroup&&(e=0);const o="ag-row-group-indent-"+e;o!==this.indentClass&&(this.indentClass&&this.comp.toggleCss(this.indentClass,!1),this.indentClass=o,this.comp.toggleCss(o,!0),this.eGui.style.setProperty("--ag-indentation-level",String(e)))};this.addManagedListeners(t,{uiLevelChanged:o.bind(this)}),o()}setupCheckbox(){const{node:e}=this.params;!e.footer&&!e.rowPinned&&!e.detail&&(this.addManagedPropertyListener("rowSelection",e=>{let{currentValue:t,previousValue:i}=e;const o="object"===typeof t?t:void 0,n="object"===typeof i?i:void 0;(null===o||void 0===o?void 0:o.checkboxLocation)!==(null===n||void 0===n?void 0:n.checkboxLocation)&&(this.destroyCheckbox(),this.addCheckbox())}),this.addCheckbox())}addCheckbox(){const{selectionSvc:e}=this.beans;if(!e||!(0,s.MBb)(this.gos))return;const{node:t,column:i}=this.params,o=this.gos.get("rowSelection"),n=(0,s.oJj)(o);if("selectionColumn"===n)return;if("autoGroupColumn"===n){const e=null!=(null===i||void 0===i?void 0:i.getColDef().showRowGroup),o=!i&&t.group;if(!(e||o))return}const r="object"===typeof o?(0,s.jER)(o):this.params.checkbox;if(!("function"===typeof r||!0===r))return;if("string"===typeof(null===i||void 0===i?void 0:i.getColDef().showRowGroup)&&!this.isExpandable())return void this.comp.setCheckboxSpacing(!0);const a=e.createCheckboxSelectionComponent();this.cbComp=a,this.createBean(a),a.init({rowNode:t,column:i,overrides:{isVisible:r,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(a.getGui()),this.comp.setCheckboxVisible(!0)}destroyCheckbox(){var e;this.comp.setCheckboxSpacing(!1),this.comp.setCheckboxVisible(!1),null===(e=this.cbComp)||void 0===e||e.getGui().remove(),this.cbComp=this.destroyBean(this.cbComp)}onExpandClicked(e){(0,s.RTK)(e)||((0,s.rYD)(e),this.onExpandOrContract(e))}onKeyDown(e){var t;if(!(e.key===s.DDm.ENTER)||this.params.suppressEnterExpand)return;(null===(t=this.params.column)||void 0===t?void 0:t.isCellEditable(this.params.node))||this.onExpandOrContract(e)}onCellDblClicked(e){if((0,s.RTK)(e))return;(0,s.KE4)(this.eExpanded,e)||(0,s.KE4)(this.eContracted,e)||this.onExpandOrContract(e)}onExpandOrContract(e){if(!this.isExpandable())return;const t=this.displayedNode,i=!t.expanded;!i&&t.sticky&&this.beans.ctrlsSvc.getScrollFeature().setVerticalScrollPosition(t.rowTop-t.stickyRowTop),t.setExpanded(i,e)}destroy(){super.destroy(),this.destroyCheckbox()}},fl={tag:"span",cls:"ag-cell-wrapper",children:[{tag:"span",ref:"eExpanded",cls:"ag-group-expanded ag-hidden"},{tag:"span",ref:"eContracted",cls:"ag-group-contracted ag-hidden"},{tag:"span",ref:"eCheckbox",cls:"ag-group-checkbox ag-invisible"},{tag:"span",ref:"eValue",cls:"ag-group-value"},{tag:"span",ref:"eChildCount",cls:"ag-group-child-count"}]},Cl=class extends s.uAl{constructor(){super(fl),this.eExpanded=s.dRA,this.eContracted=s.dRA,this.eCheckbox=s.dRA,this.eValue=s.dRA,this.eChildCount=s.dRA}init(e){const t={setInnerRenderer:(e,t)=>this.setRenderDetails(e,t),setChildCount:e=>this.eChildCount.textContent=e,toggleCss:(e,t)=>this.toggleCss(e,t),setContractedDisplayed:e=>(0,s.nl0)(this.eContracted,e),setExpandedDisplayed:e=>(0,s.nl0)(this.eExpanded,e),setCheckboxVisible:e=>this.eCheckbox.classList.toggle("ag-invisible",!e),setCheckboxSpacing:e=>this.eCheckbox.classList.toggle("ag-group-checkbox-spacing",e)},i=this.createManagedBean(new ml),o=!e.colDef,n=this.getGui();i.init(t,n,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),o&&(0,s.lXX)(n,i.getCellAriaRole())}setRenderDetails(e,t){e?e.newAgStackInstance().then(e=>{if(!e)return;const t=()=>this.destroyBean(e);this.isAlive()?(this.eValue.appendChild(e.getGui()),this.addDestroyFunc(t)):t()}):this.eValue.innerText=t}destroy(){this.destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}},wl=class extends s.XQb{constructor(){super(...arguments),this.beanName="showRowGroupColValueSvc"}getGroupValue(e,t){if(!t)return e.group?{displayedNode:e,value:e.groupValue}:null;const i=this.beans.valueSvc,o=t.colDef.showRowGroup;if(!o)return null;if(-1===e.level&&e.footer)return{displayedNode:e,value:null};if("string"===typeof o){var n,s;if((null!==(n=null===(s=this.beans.rowGroupColsSvc)||void 0===s?void 0:s.getColumnIndex(o))&&void 0!==n?n:-1)>e.level)return null;const r=this.getDisplayedNode(e,t,!0);if(r)return{displayedNode:r,value:i.getValue(t,r)}}const r=i.getValue(t,e);if(null==r){const o=this.getDisplayedNode(e,t);if(o)return{displayedNode:o,value:i.getValue(t,o)}}return{displayedNode:e,value:r}}formatAndPrefixGroupColValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.formatGroupColValue(e,t,i),{value:n,displayedNode:s}=e,r=this.beans.footerSvc;if(null!==r&&void 0!==r&&r.doesCellShowTotalPrefix(s,t)){return r.applyTotalPrefix(n,o,s,t)}return s.footer&&-1===s.level?null:o}formatGroupColValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.beans.valueSvc,{displayedNode:n,value:s}=e,r=n.rowGroupColumn,a=n.group&&!t;if(r&&(a||(null===t||void 0===t?void 0:t.isRowGroupDisplayed(r.colId)))){if(i&&!1===r.colDef.useValueFormatterForExport)return null;const e=o.formatValue(r,n,s);if(null==e&&""===n.key){return this.getLocaleTextFunc()("blanks","(Blanks)")}return e}return!t||n.group||i&&!1===t.colDef.useValueFormatterForExport?null:o.formatValue(t,n,s)}getDisplayedNode(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.gos,n=o.get("groupHideOpenParents"),s=o.get("showOpenedGroup")&&!i;if(!n&&!s)return;const r=t.colDef.showRowGroup;if(!0===r){var a;if(e.group)return;return null!==(a=e.parent)&&void 0!==a?a:void 0}let l=e;for(;l&&(null===(d=l.rowGroupColumn)||void 0===d?void 0:d.getId())!=r;){var d,c;const e=l===(null===(c=l.parent)||void 0===c?void 0:c.getFirstChild());if(!s&&!e)return;l=l.parent}return l!==e&&null!==l&&void 0!==l?l:void 0}},bl=class extends s.XQb{constructor(){super(...arguments),this.beanName="showRowGroupCols",this.columns=[],this.colsSet=new Set,this.colsMap=new Map}destroy(){super.destroy(),this.columns.length=0,this.colsSet.clear(),this.colsMap.clear()}refresh(){const{colModel:e,rowGroupColsSvc:t}=this.beans,i=this.columns,o=this.colsSet,n=this.colsMap;n.clear();const s=i.length;let r=0,a=!1;const l=e.getCols();for(let d=0,c=l.length;d<c;++d){const e=l[d],c=e.getColDef().showRowGroup;if("string"===typeof c)n.set(c,e);else{if(!0!==c)continue;{const i=null===t||void 0===t?void 0:t.columns;if(i)for(let t=0,o=i.length;t<o;++t)n.set(i[t].getId(),e)}}a||(a=r>=s||!o.has(e)),i[r++]=e}if(a||(a=r!==s),a){i.length=r,o.clear();for(let e=0;e<r;++e)o.add(i[e]);this.eventSvc.dispatchEvent({type:"showRowGroupColsSetChanged"})}}getShowRowGroupCol(e){return this.colsMap.get(e)}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;const{rowGroupColsSvc:i,colModel:o}=this.beans;if(!0===t&&i)return i.columns;const n=o.getColDefCol(t);return n?[n]:null}isRowGroupDisplayed(e,t){var i;const o=null===(i=e.getColDef())||void 0===i?void 0:i.showRowGroup;return!0===o||null!=o&&o===t}},yl=class extends s.XQb{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}postConstruct(){this.isClientSide=(0,s.dbY)(this.gos),this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventSvc.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getLastPixelOfGroup(e){return this.isClientSide?function(e){if(e.isExpandable()||e.footer){if(e.footer&&0===e.rowIndex)return Number.MAX_SAFE_INTEGER;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.footer?e.sibling:e;for(;t.isExpandable()&&t.expanded;)if(t.master&&t.detailNode)t=t.detailNode;else if(t.childrenAfterSort){if(0===t.childrenAfterSort.length)break;t=(0,s.GXs)(t.childrenAfterSort)}return t.rowTop+t.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}(e):function(e){if(e.isExpandable()||e.footer){if(e.master&&e.detailNode)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){var t,i,o,n,s;let a=null===(t=e.childStore)||void 0===t?void 0:t.getStoreBounds();var r;if(e.footer)a=null===(r=e.sibling.childStore)||void 0===r?void 0:r.getStoreBounds();return(null!==(i=null===(o=a)||void 0===o?void 0:o.heightPx)&&void 0!==i?i:0)+(null!==(n=null===(s=a)||void 0===s?void 0:s.topPx)&&void 0!==n?n:0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}updateStickyRows(e){const t="top"===e;let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const{rowModel:o,rowRenderer:n,pinnedRowModel:s}=this.beans,r=t?n.firstVisibleVPixel-this.extraTopHeight:n.lastVisibleVPixel-this.extraTopHeight,a=new Set,l=e=>{if(a.add(e),t){const t=this.getLastPixelOfGroup(e),o=r+i+e.rowHeight;e.stickyRowTop=t<o?i+(t-o):i}else{const t=this.getFirstPixelOfGroup(e),o=r-(i+e.rowHeight);e.stickyRowTop=t>o?i-(t-o):i}i=0,a.forEach(e=>{const t=e.stickyRowTop+e.rowHeight;i<t&&(i=t)})},d=this.areFooterRowsStickySuppressed(),c=this.gos.get("suppressGroupRowsSticky"),u=t=>{if(!t.displayed)return!1;if(t.footer){if(!0===d)return!1;if("grand"===d&&-1===t.level)return!1;if("group"===d&&t.level>-1)return!1;const i=!!t.sibling.rowIndex&&t.sibling.rowIndex+1===t.rowIndex;if("bottom"===e&&i)return!1;if(-1===t.level&&null!==s&&void 0!==s&&s.getGrandTotalPinned())return!1;return!a.has(t)}if(t.isExpandable()){if(!0===c)return!1;if("bottom"===e)return!1;return!a.has(t)&&t.expanded}return!1};for(let h=0;h<100;h++){let e=r+i;t||(e=r-i);const n=o.getRowIndexAtPixel(e),s=o.getRow(n);if(null==s)break;const a=this.getStickyAncestors(s).find(e=>(t?e.rowIndex<n:e.rowIndex>n)&&u(e));if(a){l(a);continue}if(!(t?s.rowTop<e:s.rowTop+s.rowHeight>e)||!u(s))break;l(s)}return t||a.forEach(e=>{e.stickyRowTop=i-(e.stickyRowTop+e.rowHeight)}),this.refreshNodesAndContainerHeight(e,a,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(!0===e)return!0;const t="group"===e,i="grand"===e;return!(!t||!i)||(i?"grand":!!t&&"group")}canRowsBeSticky(){const e=(0,s.Fhk)(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(t=>t.rowNode===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const o=this.stickyTopRowCtrls[i].rowNode;o!==e&&t.add(o)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows()}else{for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const o=this.stickyBottomRowCtrls[i].rowNode;o!==e&&t.add(o)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}}refreshNodesAndContainerHeight(e,t,i){const o="top"===e,n=o?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,s={},r=[];for(let p=0;p<n.length;p++){const e=n[p].rowNode;!t.has(e)?(s[e.id]=n[p],e.sticky=!1):r.push(n[p])}const a=new Set;for(let p=0;p<r.length;p++)a.add(r[p].rowNode);const l=[];t.forEach(e=>{a.has(e)||(e.sticky=!0,l.push(this.createRowCon(e,!1,!1)))});let d=!!l.length||r.length!==n.length;o?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),d=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),d=!0),this.destroyRowCtrls(s,!1);const c=[...r,...l];c.sort((e,t)=>t.rowNode.rowIndex-e.rowNode.rowIndex),o||c.reverse();for(const p of c)p.setRowTop(p.rowNode.stickyRowTop);const u=this.beans.pageBounds;let h=0;if(o){for(const e of t)e.rowIndex<u.getFirstRow()&&(h+=e.rowHeight);h>this.topContainerHeight&&(h=this.topContainerHeight),this.setOffsetTop(h)}else{for(const e of t)e.rowIndex>u.getLastRow()&&(h+=e.rowHeight);h>this.bottomContainerHeight&&(h=this.bottomContainerHeight),this.setOffsetBottom(h)}return!!d&&(o?this.stickyTopRowCtrls=c:this.stickyBottomRowCtrls=c,!0)}ensureRowHeightsValid(){let e=!1;const t=t=>{const i=t.rowNode;if(i.rowHeightEstimated){const t=(0,s.Syv)(this.beans,i);i.setRowHeight(t.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}};var Sl=class extends s.XQb{constructor(){super(...arguments),this.beanName="stickyRowSvc"}createStickyRowFeature(e,t,i){const o=this.gos;if((0,s.Fhk)(o)&&(0,s.dbY)(o)||(0,s.TiQ)(o))return e.createManagedBean(new yl(t,i))}},xl={moduleName:"GroupCellRenderer",version:ki,userComponents:{agGroupRowRenderer:Cl,agGroupCellRenderer:Cl},dynamicBeans:{groupCellRendererCtrl:ml},icons:{groupContracted:"tree-closed",groupExpanded:"tree-open"},css:[".ag-group-checkbox-spacing{width:var(--ag-icon-size)}:where(.ag-ltr) .ag-group-checkbox-spacing{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-checkbox-spacing{margin-left:var(--ag-cell-widget-spacing)}"],dependsOn:[Ii]},Fl={moduleName:"GroupColumn",version:ki,beans:[$a,bl,wl,Xa,Qa,Va],dependsOn:[Ii,xl]},Rl={moduleName:"ClientSideRowModelHierarchy",version:ki,rowModels:["clientSide"],beans:[dl,ol,class extends Za{constructor(){super(...arguments),this.beanName="expansionSvc",this.events=null,this.dispatchExpandedDebounced=null}destroy(){super.destroy(),this.events=null,this.dispatchExpandedDebounced=null}setExpansionState(e){const t=new Set(e.expandedRowGroupIds);this.beans.rowModel.forEachNode(e=>{const i=e.id;i&&(e.expanded=t.has(i))}),this.onGroupExpandedOrCollapsed()}getExpansionState(){const e=[],t=[];return this.beans.rowModel.forEachNode(i=>{const o=i.id;o&&(i.expanded?e.push(o):t.push(o))}),{expandedRowGroupIds:e,collapsedRowGroupIds:t}}expandAll(e){const{gos:t,rowModel:i,colModel:o,eventSvc:n}=this.beans,r=t.get("treeData"),a=o.isPivotActive(),l=t=>{if(t)for(const i of t){const t=()=>{i.expanded=e,l(i.childrenAfterGroup)};if(i.master){t();continue}if(r){(0,s.Qmv)(i.childrenAfterGroup)&&t();continue}if(a){!i.leafGroup&&t();continue}i.group&&t()}},d=i.rootNode;d&&l(d.childrenAfterGroup),this.onGroupExpandedOrCollapsed(),n.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}onGroupExpandedOrCollapsed(){this.dispatchStateUpdatedEvent(),this.beans.rowModel.refreshModel({step:"map"})}setDetailsExpansionState(e){const t=this.getExpansionState(),i=0===t.collapsedRowGroupIds.length;if(0===t.expandedRowGroupIds.length!==i)return i?e.expandAll():e.collapseAll()}dispatchExpandedEvent(e,t){var i;if((null!==(i=this.events)&&void 0!==i?i:this.events=[]).push(e),t)return void this.dispatchExpandedEvents();let o=this.dispatchExpandedDebounced;if(!o){if(!this.isAlive())return;o=this.debounce(()=>this.dispatchExpandedEvents()),this.dispatchExpandedDebounced=o}o()}dispatchExpandedEvents(){const{eventSvc:e,rowRenderer:t}=this.beans,i=this.events,o=null===i||void 0===i?void 0:i.length;if(!o)return;this.events=null;const n=new Array(o);for(let s=0;s<o;++s)n[s]=i[s].node,e.dispatchEvent(i[s]);this.dispatchStateUpdatedEvent(),t.refreshCells({rowNodes:n})}debounce(e){const t=this.beans.animationFrameSvc;if(!t)return()=>window.setTimeout(e,0);let i=!1;return()=>{t.active?i||(i=!0,t.addDestroyTask(()=>{i=!1,e()})):window.setTimeout(e,0)}}}],dependsOn:[Ii]},Pl={moduleName:"StickyRow",version:ki,beans:[Sl]},Dl={moduleName:"GroupEdit",version:ki,beans:[nl],dependsOn:[Ii,Rl]},El={selector:"AG-GRID-HEADER-DROP-ZONES",component:class extends s.uAl{constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel());const e=this.onRowGroupChanged.bind(this);this.addManagedEventListeners({columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedPropertyListener("rowGroupPanelShow",e),this.addManagedPropertyListener("pivotPanelShow",()=>this.onPivotPanelShow()),this.onRowGroupChanged()}createNorthPanel(){const e=(0,s.UCw)({tag:"div",cls:"ag-column-drop-wrapper",role:"presentation"}),t=new _s(!0);this.rowGroupComp=this.createManagedBean(t);const i=new js(!0);this.pivotComp=this.createManagedBean(i),e.appendChild(t.getGui()),e.appendChild(i.getGui());const o=this.onDropPanelVisible.bind(this);return this.addManagedListeners(t,{displayChanged:o}),this.addManagedListeners(i,{displayChanged:o}),this.onDropPanelVisible(),e}onDropPanelVisible(){const{rowGroupComp:e,pivotComp:t}=this,i=e.isDisplayed()&&t.isDisplayed(),o="ag-column-drop-horizontal-half-width";e.toggleCss(o,i),t.toggleCss(o,i)}onRowGroupChanged(){const e=this.rowGroupComp;if(!e)return;const t=this.gos.get("rowGroupPanelShow");if("always"===t)e.setDisplayed(!0);else if("onlyWhenGrouping"===t){var i;const t=0!==(null===(i=this.beans.rowGroupColsSvc)||void 0===i||null===(i=i.columns)||void 0===i?void 0:i.length);e.setDisplayed(t)}else e.setDisplayed(!1)}onPivotPanelShow(){const e=this.pivotComp;if(!e)return;const t=this.gos.get("pivotPanelShow");if("always"===t)e.setDisplayed(!0);else if("onlyWhenPivoting"===t){const t=this.beans.colModel.isPivotActive();e.setDisplayed(t)}else e.setDisplayed(!1)}}};var Al={tag:"div",cls:"ag-group-filter",children:[{tag:"div",ref:"eGroupField"},{tag:"div",ref:"eUnderlyingFilter"}]},Ml=class extends s.aJZ{constructor(){super(Al),this.filterType="group",this.eGroupField=s.dRA,this.eUnderlyingFilter=s.dRA}wireBeans(e){this.groupFilterSvc=e.groupFilter}postConstruct(){this.initialiseTabGuard({})}init(e){return this.params=e,this.updateParams().then(()=>{this.addHandlerListeners(this.updateGroups.bind(this))})}refresh(e){const t=e;return this.params=t,"colDef"===t.source&&this.updateParams(),!0}updateParams(){return this.validateParams(),this.updateGroups()}validateParams(){const{colDef:e}=this.params;e.field&&(0,s.ujB)(234),e.filterValueGetter&&(0,s.ujB)(235),e.filterParams&&(0,s.ujB)(236)}addHandlerListeners(e){const t=this.addManagedListeners(this.getHandler(),{sourceColumnsChanged:()=>{this.updateGroups()},destroyed:()=>{for(const e of t)e();this.addHandlerListeners(e)}})}updateGroups(){const{sourceColumns:e,selectedColumn:t}=this.updateGroupField();return this.dispatchLocalEvent({type:"columnsChanged"}),this.getUnderlyingFilters(e,t)}updateGroupField(){this.groupColumn=this.params.column;const e=this.getHandler();if(!e)return{sourceColumns:null};const{sourceColumns:t,hasMultipleColumns:i,selectedColumn:o}=e,n=this.eGroupField;return(0,s.fDi)(n),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect),i&&t&&(this.createGroupFieldSelectElement(t,o),n.appendChild(this.eGroupFieldSelect.getGui()),n.appendChild((0,s.UCw)({tag:"div",cls:"ag-filter-separator"}))),(0,s.nl0)(n,i),{sourceColumns:t,selectedColumn:o}}createGroupFieldSelectElement(e,t){const i=this.createManagedBean(new s.Ju4);this.eGroupFieldSelect=i;const o=this.getLocaleTextFunc();i.setLabel(o("groupFilterSelect","Select field:")),i.setLabelAlignment("top"),i.addOptions(e.map(e=>{var t;return{value:e.getColId(),text:null!==(t=this.beans.colNames.getDisplayNameForColumn(e,"groupFilter",!1))&&void 0!==t?t:void 0}})),i.setValue(t.getColId()),i.onValueChange(e=>this.updateSelectedColumn(e)),i.addCss("ag-group-filter-field-select-wrapper"),1===e.length&&i.setDisabled(!0)}getUnderlyingFilters(e,t){if(!e)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,s.oY$.resolve();const i=[],o=[],n=this.beans.colFilter;for(const s of e){const e=n.getOrCreateFilterUi(s);e&&i.push(e.then(e=>{e&&o.push({filter:e,column:s}),s.getColId()===t.getColId()&&(this.selectedFilter=null!==e&&void 0!==e?e:void 0)}))}return s.oY$.all(i).then(()=>{this.filterColumnPairs=o})}addUnderlyingFilterElement(e){var t,i;if((0,s.fDi)(this.eUnderlyingFilter),!e)return s.oY$.resolve();const o=this.createManagedBean(new s.QdF(e,"COLUMN_MENU"));return this.filterComp=o,o.hasFilter()?(this.eUnderlyingFilter.appendChild(o.getGui()),null!==(t=null===(i=o.getFilter())||void 0===i?void 0:i.then(()=>{var e,t;null===(e=o.afterGuiAttached)||void 0===e||e.call(o,this.afterGuiAttachedParams),null!==(t=this.afterGuiAttachedParams)&&void 0!==t&&t.suppressFocus||!this.eGroupFieldSelect||this.eGroupFieldSelect.isDisabled()||this.eGroupFieldSelect.getFocusableElement().focus()}))&&void 0!==t?t:s.oY$.resolve()):s.oY$.resolve()}updateSelectedColumn(e){var t;if(!e)return;null===(t=this.filterComp)||void 0===t||t.afterGuiDetached(),this.destroyBean(this.filterComp);const i=this.getFilterColumnPair(e),o=null===i||void 0===i?void 0:i.column;this.selectedFilter=null===i||void 0===i?void 0:i.filter,this.getHandler().setSelectedColumn(o),this.dispatchLocalEvent({type:"columnsChanged"}),this.addUnderlyingFilterElement(o)}isFilterActive(){return this.groupFilterSvc.isFilterActive(this.groupColumn)}doesFilterPass(){return!0}getModel(){return null}setModel(){}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.addUnderlyingFilterElement(this.getHandler().selectedColumn)}afterGuiDetached(){var e,t;(0,s.fDi)(this.eUnderlyingFilter),null===(e=this.selectedFilter)||void 0===e||null===(t=e.afterGuiDetached)||void 0===t||t.call(e)}getSelectedColumn(){return this.getHandler().selectedColumn}getHandler(){return this.params.getHandler()}getFilterColumnPair(e){var t;if(e)return null===(t=this.filterColumnPairs)||void 0===t?void 0:t.find(t=>{let{column:i}=t;return i.getColId()===e})}},Tl=class extends s.XQb{init(e){this.params=e,this.validateModel(e),this.updateColumns(),this.addManagedEventListeners({columnRowGroupChanged:this.updateColumns.bind(this),filterDestroyed:e=>this.onFilterDestroyed(e)})}refresh(e){this.params=e,this.validateModel(e),"colDef"===e.source&&this.updateColumns()}doesFilterPass(){return!0}setSelectedColumn(e){this.selectedColumn=e,this.dispatchLocalEvent({type:"selectedColumnChanged"})}validateModel(e){null!=e.model&&e.onModelChange(null)}getSourceColumns(){const e=this.params.column;if(this.gos.get("treeData"))return(0,s.ujB)(237),[];const t=this.beans.groupFilter.getSourceColumns(e);return t||((0,s.ujB)(183),[])}updateColumns(){const e=this.getSourceColumns(),t=e.filter(e=>e.isFilterAllowed());let i,o;this.sourceColumns=t,t.length?1===e.length?(i=t[0],o=!1):(i=this.selectedColumn,i&&t.some(e=>e.getId()===i.getId())||(i=t[0]),o=!0):(i=void 0,o=!1),this.selectedColumn=i,this.hasMultipleColumns=o,this.dispatchLocalEvent({type:"sourceColumnsChanged"})}onFilterDestroyed(e){var t;let{column:i,source:o}=e;if("gridDestroyed"===o)return;const n=i.getColId();null!==(t=this.sourceColumns)&&void 0!==t&&t.some(e=>e.getColId()===n)&&setTimeout(()=>{this.isAlive()&&this.updateColumns()})}},kl=class extends s.XQb{constructor(){super(...arguments),this.beanName="groupFilter"}postConstruct(){this.addManagedEventListeners({columnRowGroupChanged:()=>this.updateFilterFlags("columnRowGroupChanged")})}isGroupFilter(e){return"agGroupColumnFilter"===e.getColDef().filter}isFilterAllowed(e){var t;const i=this.beans.colFilter;return!(null===(t=this.getSourceColumns(e))||void 0===t||!t.some(e=>null===i||void 0===i?void 0:i.isFilterAllowed(e)))}isFilterActive(e){var t;const i=this.beans.colFilter;return!(null===(t=this.getSourceColumns(e))||void 0===t||!t.some(e=>null===i||void 0===i?void 0:i.isFilterActive(e)))}getSourceColumns(e){var t;return null===(t=this.beans.showRowGroupCols)||void 0===t?void 0:t.getSourceColumnsForGroupColumn(e)}updateFilterFlags(e,t){var i;const{autoColSvc:o,colFilter:n}=this.beans;null===o||void 0===o||null===(i=o.getColumns())||void 0===i||i.forEach(i=>{this.isGroupFilter(i)&&(null===n||void 0===n||n.setColFilterActive(i,this.isFilterActive(i),e,t))})}},Il={tag:"div",ref:"eFloatingFilter",cls:"ag-group-floating-filter ag-floating-filter-input",role:"presentation"},Ll=class extends s.uAl{constructor(){super(Il),this.eFloatingFilter=s.dRA,this.haveAddedColumnListeners=!1}init(e){this.params=e;const t=(0,s.Njs)(this.gos),i=this.onColChange.bind(this),o=e=>{t?this.setupUnderlyingFloatingFilterElement().then(()=>e()):(this.setupReadOnlyFloatingFilterElement(),e())};return this.gos.get("enableFilterHandlers")?new s.oY$(e=>o(e)).then(()=>{this.addHandlerListeners(e,i)}):new s.oY$(e=>{this.params.parentFilterInstance(t=>{this.parentFilterInstance=t,o(e)})}).then(()=>{this.addManagedListeners(this.parentFilterInstance,{columnsChanged:i})})}refresh(e){if(this.params=e,this.setParams(),this.gos.get("enableFilterHandlers"))if(this.showingUnderlyingFloatingFilter){var t,i;const e=this.getSelectedColumn(),o=this.beans.colFilter.getFloatingFilterCompDetails(e,this.params.showParentFilter);null===(t=this.underlyingFloatingFilter)||void 0===t||null===(i=t.refresh)||void 0===i||i.call(t,null===o||void 0===o?void 0:o.params)}else this.updateDisplayedValue()}setParams(){var e;const t=this.beans.colNames.getDisplayNameForColumn(this.params.column,"header",!0),i=this.getLocaleTextFunc();null===(e=this.eFloatingFilterText)||void 0===e||e.setInputAriaLabel("".concat(t," ").concat(i("ariaFilterInput","Filter Input")))}addHandlerListeners(e,t){const i=this.addManagedListeners(e.getHandler(),{selectedColumnChanged:t,sourceColumnsChanged:t,destroyed:()=>{for(const e of i)e();this.addHandlerListeners(this.params,t)}})}setupReadOnlyFloatingFilterElement(){this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new s.stt),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())}setupUnderlyingFloatingFilterElement(){this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,(0,s.fDi)(this.eFloatingFilter);const e=this.getSelectedColumn();if(e&&!e.isVisible()){const t=this.beans.colFilter,i=t.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(i)return this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListeners(e,{visibleChanged:this.onColumnVisibleChanged.bind(this),colDefChanged:this.onColDefChanged.bind(this)})),i.newAgStackInstance().then(i=>{var o;this.underlyingFloatingFilter=i,null===(o=this.underlyingFloatingFilter)||void 0===o||o.onParentModelChanged(t.getModelForColumn(e)),this.appendChild(i.getGui()),this.showingUnderlyingFloatingFilter=!0})}return this.setupReadOnlyFloatingFilterElement(),s.oY$.resolve()}getSelectedColumn(){if(this.gos.get("enableFilterHandlers")){return this.params.getHandler().selectedColumn}return this.parentFilterInstance.getSelectedColumn()}onColumnVisibleChanged(){this.setupUnderlyingFloatingFilterElement()}onColDefChanged(e){if(!e.column)return;const t=this.beans.colFilter.getFloatingFilterCompDetails(e.column,this.params.showParentFilter);var i,o;t&&(null===(i=this.underlyingFloatingFilter)||void 0===i||null===(o=i.refresh)||void 0===o||o.call(i,t.params))}onParentModelChanged(e,t){var i;this.showingUnderlyingFloatingFilter?null===(i=this.underlyingFloatingFilter)||void 0===i||i.onParentModelChanged(this.beans.colFilter.getModelForColumn(this.getSelectedColumn()),t):this.updateDisplayedValue()}updateDisplayedValue(){const e=this.eFloatingFilterText;if(!e)return;const t=this.beans.colFilter,i=this.getSelectedColumn(),o=o=>{if(o){var n,s;const r=i?t.getModelForColumn(i):null;e.setValue(null==r?"":null!==(n=null===(s=o.getModelAsString)||void 0===s?void 0:s.call(o,r))&&void 0!==n?n:""),e.setDisplayed(!0)}else e.setValue(""),e.setDisplayed(!1)};var n;this.gos.get("enableFilterHandlers")?o(t.getHandler(i)):null===(n=t.getOrCreateFilterUi(i))||void 0===n||n.then(e=>{o(e)})}onColChange(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}};function Nl(e,t){const i=e.sourceRowIndex,o=t.sourceRowIndex,n=i>=0,s=o>=0;return n&&s?i-o:!n&&!s?e.__objectId-t.__objectId:n?1:-1}var Ol=class extends s.XQb{constructor(){super(...arguments),this.groupCols=[],this.nonLeafsById=new Map,this.checkGroupCols=!0,this.pivotMode=!1,this.groupEmpty=!1}invalidateGroupCols(){this.checkGroupCols=!0}destroy(){super.destroy(),this.groupCols.length=0,this.nonLeafsById.clear()}clearNonLeafs(){const e=this.nonLeafsById;for(const t of e.values())t._destroy(!1);e.clear()}loadGroupData(e){if(!e.group)return e._groupData=null,null;const t=e.rowGroupColumn,{valueSvc:i,showRowGroupCols:o}=this.beans,n={};if(e._groupData=n,!t)return n;const r=(0,s.fj_)(e),a=t.getId();if(!o)return n;const l=o.columns;for(let s=0,d=l.length;s<d;++s){const e=l[s];e.isRowGroupDisplayed(a)&&(n[e.getColId()]=i.getValue(t,r))}return n}execute(e,t){var i;const o=t.changedPath;if(this.initRefresh(t)){const i=t.changedRowNodes;i?this.handleDeltaUpdate(e,o,i,!!t.animate):this.shotgunResetEverything(e)}this.positionLeafsAndGroups(o),this.orderGroups(e),null===(i=this.beans.selectionSvc)||void 0===i||i.updateSelectableAfterGrouping(o)}positionLeafsAndGroups(e){e.forEachChangedNodeDepthFirst(e=>{const t=e.childrenAfterGroup,i=null===t||void 0===t?void 0:t.length;if(!i)return;const o=new Array(i);let n,s=0,r=!1;for(let d=0;d<i;++d){var a;const e=t[d];if(null!==(a=e.childrenAfterGroup)&&void 0!==a&&a.length){if(!n&&""===e.key){n=e;const t=i-1;r||(r=d!==t),o[t]=e}}else r||(r=s!==d),o[s++]=e}if(r){for(let e=0;e<i;++e){var l;const i=t[e];null!==(l=i.childrenAfterGroup)&&void 0!==l&&l.length&&i!==n&&(o[s++]=i)}e.childrenAfterGroup=o;const r=e.sibling;r&&(r.childrenAfterGroup=o)}},!1)}initRefresh(e){const{rowGroupColsSvc:t,colModel:i,gos:o}=this.beans,n=i.isPivotMode();this.pivotMode=n,this.groupEmpty=n||!o.get("groupAllowUnbalanced");const s=null===t||void 0===t?void 0:t.columns,r=this.groupCols,a=e.afterColumnsChanged;if(a||!r||this.checkGroupCols)if(this.checkGroupCols=!1,r&&!((e,t)=>{const i=e.length;if(i!==(null===t||void 0===t?void 0:t.length))return!0;for(let o=0;o<i;o++){const i=e[o],n=t[o];if(i.col!==n)return!0;const s=n.getColDef();if(i.field!==s.field||i.type!==s.type||i.valueGetter!==s.valueGetter||i.keyCreator!==s.keyCreator)return!0}return!1})(r,s)){if(a)return!1}else e.animate=!1,((e,t)=>{if(!e)return void(t.length=0);const i=e.length;t.length=i;for(let o=0;o<i;o++){const i=e[o],n=i.getColDef();t[o]={col:i,field:n.field,type:n.type,keyCreator:n.keyCreator,valueGetter:n.valueGetter}}})(s,this.groupCols);return!0}handleDeltaUpdate(e,t,i,o){let{removals:n,updates:s,adds:r,reordered:a}=i;const l=new Set;let d=t;d.active||(d=null);for(let C=0,w=n.length;C<w;++C){const e=n[C],t=this.removeFromParent(e);var c;if(!l.has(t))l.add(t),null===(c=d)||void 0===c||c.addParentNode(t)}for(const C of s){var u;const t=C.parent;if(null===(u=d)||void 0===u||u.addParentNode(t),this.moveNodeInWrongPath(e,C)){var h,p,g;l.add(t);const e=C.parent;null===(h=d)||void 0===h||h.addParentNode(e),a||(a=(null!==(p=null===e||void 0===e||null===(g=e.childrenAfterGroup)||void 0===g?void 0:g.length)&&void 0!==p?p:0)>1)}}if(r.size)for(const C of r){var v,m,f;this.insertOneNode(e,C);const t=C.parent;null===(v=d)||void 0===v||v.addParentNode(t),a||(a=(null!==(m=null===t||void 0===t||null===(f=t.childrenAfterGroup)||void 0===f?void 0:f.length)&&void 0!==m?m:0)>1)}l.size&&(Gl(l),this.removeEmptyGroups(l,o)),a&&this.sortChildren(t)}sortChildren(e){e.forEachChangedNodeDepthFirst(t=>{(function(e){if(!e)return!1;const t=e.length;if(t<2)return!1;let i=!1;for(let o=1;o<t;o++)if(Nl(e[o-1],e[o])>0){i=!0;break}return!!i&&(e.sort(Nl),!0)})(t.childrenAfterGroup)&&e.active&&e.addParentNode(t)},!1,!0)}orderGroups(e){const t=this.gos.getCallback("initialGroupOrderComparator");if(!t)return;const i=this.beans,o=i.gridApi,n=i.gridOptions.context,s=(e,i)=>t({api:o,context:n,nodeA:e,nodeB:i}),r=e=>{const t=e.childrenAfterGroup,i=null===t||void 0===t?void 0:t.length;if(i&&!e.leafGroup){i>1&&t.sort(s);for(let e=0,o=i;e<o;++e)r(t[e])}};r(e)}moveNodeInWrongPath(e,t){var i;const{valueSvc:o}=this.beans,n=this.groupEmpty;let s=t.parent,r=!1;const a=this.groupCols;if(!a)return!1;for(let d=a.length-1;d>=0;--d){var l;const{col:e}=a[d];let i=o.getKeyForNode(e,t);if(null==i||""===i){if(!n)continue;i=""}if(null===(l=s)||void 0===l||!l.parent||s.key!==i){r=!0;break}s=s.parent}return r||(r=!(null===(i=s)||void 0===i||!i.parent)),!!r&&(this.removeFromParent(t),this.insertOneNode(e,t),t.setData(t.data),!0)}groupShouldBeRemoved(e){var t,i,o;const n=this.getChildrenMappedKey(e.key,e.rowGroupColumn),s=null===(t=e.parent)||void 0===t?void 0:t.childrenMapped;return!(!s||!s[n])&&(!!e.group&&0===(null!==(i=null===(o=e.childrenAfterGroup)||void 0===o?void 0:o.length)&&void 0!==i?i:0))}removeEmptyGroups(e,t){const i=this.beans.selectionSvc;let o;const n=Array.from(e),s=this.nonLeafsById;do{e.clear();for(let r=0;r<n.length;++r){let a=n[r];for(;a;){const l=a.parent;if(a.destroyed)n[r]=l,a=l;else{if(!l)break;this.groupShouldBeRemoved(a)?(e.add(l),this.removeFromParent(a),i&&a.isSelected()&&(null!==o&&void 0!==o||(o=[]),o.push(a)),n[r]=l,s.delete(a.id),a._destroy(t),a=l):a=l}}}Gl(e)}while(e.size);o&&i.setNodesSelected({nodes:o,newValue:!1,source:"rowGroupChanged"})}removeFromParent(e){const t=e.parent;if(t){const i=this.getChildrenMappedKey(e.key,e.rowGroupColumn),o=t.childrenMapped;o&&delete o[i]}return e.setRowTop(null),e.setRowIndex(null),t}addToParent(e,t){var i;const o=null!==(i=t.childrenMapped)&&void 0!==i?i:t.childrenMapped={},n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);if(o[n]!==e){o[n]=e;let i=t.childrenAfterGroup;if(!i){t.childrenAfterGroup=i=[];const e=t.sibling;e&&(e.childrenAfterGroup=t.childrenAfterGroup)}i.push(e),ms(t,this.beans,!0),Bl(t)}}shotgunResetEverything(e){var t,i,o;null===(t=this.beans.selectionSvc)||void 0===t||null===(i=t.filterFromSelection)||void 0===i||i.call(t,e=>!e.group),this.nonLeafsById.clear(),e.leafGroup=!(null!==(o=this.groupCols)&&void 0!==o&&o.length),e.childrenAfterGroup=[],e.childrenMapped={},e.updateHasChildren();const n=e.sibling;n&&(n.childrenAfterGroup=e.childrenAfterGroup,n.childrenMapped=e.childrenMapped);const s=e._leafs;for(let r=0,a=s.length;r<a;++r)this.insertOneNode(e,s[r])}insertOneNode(e,t){let i=e;const{beans:o,pivotMode:n,groupCols:r,groupEmpty:a}=this,l=o.valueSvc;if(!r)return;const d=r.length;for(let s=0;s<d;++s){var c;const e=r[s],o=e.col;let u=l.getKeyForNode(o,t);if(null==u||""===u){if(!a)continue;u=""}const h=null===(c=i.childrenMapped)||void 0===c?void 0:c[this.getChildrenMappedKey(u,o)];if(h){i=h;continue}const p=i.level+1,g=p>=d-1,v=this.createGroup(i,e,u,p,g,t);this.addToParent(v,i),this.setExpandedInitialValue(n,v),i=v}i.group||(0,s.ujB)(184,{parentGroupData:i.data,childNodeData:t.data}),t.parent=i,t.level=i.level+1,i.childrenAfterGroup.push(t),i.updateHasChildren(),Bl(i)}createGroup(e,t,i,o,n,r){var a;const l=t.col,d=(e.level>=0?e.id+"-":"row-group-")+l.getColId()+"-"+i,c=this.nonLeafsById;let u=c.get(d);return void 0!==u||(u=new s.TUE(this.beans),u.group=!0,u.parent=e,u.field=null!==(a=t.field)&&void 0!==a?a:null,u.rowGroupColumn=l,u.key=i,u.id=d,u.level=o,u.leafGroup=n,u.rowGroupIndex=o,u.childrenAfterGroup=[],u.childrenMapped={},c.set(d,u),u.groupValue=r&&this.beans.valueSvc.getValue(l,r),u.setAllChildrenCount(0),u.updateHasChildren()),u}getChildrenMappedKey(e,t){return t?t.getId()+"-"+e:e}setExpandedInitialValue(e,t){e&&t.leafGroup?t.expanded=!1:t.expanded=vl(this.beans,t,t.level)}onShowRowGroupColsSetChanged(){var e;const{rowModel:t,valueSvc:i}=this.beans;for(const n of this.nonLeafsById.values()){n._groupData=void 0;const e=n.rowGroupColumn,t=e&&(0,s.fj_)(n);n.groupValue=t&&i.getValue(e,t)}const o=null===(e=t.rootNode)||void 0===e?void 0:e._leafs;if(o)for(let n=0,s=o.length;n<s;++n){o[n].parent._groupData=void 0}}},Gl=e=>{for(const t of e){const e=null===t||void 0===t?void 0:t.childrenAfterGroup;if(!e)continue;const i=e.length;let o=0;for(let n=0;n<i;++n){const i=e[n];i.parent!==t||i.destroyed||(o!==n&&(e[o]=i),++o)}i!==o&&(e.length=o,t.updateHasChildren(),Bl(t))}},Bl=e=>{for(;void 0!==e._leafs;){const t=e.parent;if(!t)break;e._leafs=void 0,e=t}};var Vl={moduleName:"SharedRowGrouping",version:ki,apiFunctions:{setRowGroupColumns:function(e,t){var i;null===(i=e.rowGroupColsSvc)||void 0===i||i.setColumns(t,"api")},removeRowGroupColumns:function(e,t){var i;null===(i=e.rowGroupColsSvc)||void 0===i||i.removeColumns(t,"api")},addRowGroupColumns:function(e,t){var i;null===(i=e.rowGroupColsSvc)||void 0===i||i.addColumns(t,"api")},getRowGroupColumns:function(e){var t,i;return null!==(t=null===(i=e.rowGroupColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]},moveRowGroupColumn:function(e,t,i){var o,n;null===(o=e.rowGroupColsSvc)||void 0===o||null===(n=o.moveColumn)||void 0===n||n.call(o,t,i,"api")}},dependsOn:[Ii,Ha,Fl,Pl,qa]},Hl={moduleName:"RowGrouping",version:ki,dynamicBeans:{groupStrategy:Ol},rowModels:["clientSide"],dependsOn:[Vl,za,Rl,Dl]},zl={moduleName:"RowGroupingPanel",version:ki,selectors:[El],icons:{pivotPanel:"pivot",rowGroupPanel:"group",panelDelimiter:"small-right",panelDelimiterRtl:"small-left"},dependsOn:[Ii,s.gFd]},Wl={moduleName:"GroupFilter",version:ki,userComponents:{agGroupColumnFilter:{classImp:Ml,processParams:function(e){return e.buttons&&(e.buttons=[]),e}},agGroupColumnFloatingFilter:Ll},beans:[kl],dynamicBeans:{agGroupColumnFilterHandler:Tl},dependsOn:[Ii,s.Sxk]},Ul=class extends s.XQb{constructor(){super(...arguments),this.beanName="rowModel",this.firstRow=-1,this.lastRow=-1,this.rowCount=-1,this.rowNodesByIndex={},this.rootNode=null,this.viewportChangedContext=!1}ensureRowHeightsValid(e,t,i,o){return!1}postConstruct(){const e=this.beans,t=new s.TUE(e);this.rootNode=t,t.level=-1,this.rowHeight=(0,s.YvH)(e),this.addManagedEventListeners({viewportChanged:this.onViewportChanged.bind(this)}),this.addManagedPropertyListener("viewportDatasource",()=>this.updateDatasource()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=(0,s.YvH)(e),this.updateRowHeights()})}start(){this.updateDatasource()}isLastRowIndexKnown(){return!0}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){var e;const t=this.datasource;t&&(null===(e=t.destroy)||void 0===e||e.call(t),this.beans.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)}updateDatasource(){const e=this.gos.get("viewportDatasource");e&&this.setViewportDatasource(e)}getPageSize(){return this.gos.get("viewportRowModelPageSize")}getBufferSize(){return this.gos.get("viewportRowModelBufferSize")}calculateFirstRow(e){const t=this.getBufferSize(),i=this.getPageSize(),o=e-t;return o<0?0:Math.floor(o/i)*i}calculateLastRow(e){if(-1===e)return e;const t=this.getBufferSize(),i=this.getPageSize(),o=e+t,n=Math.ceil(o/i)*i,s=this.rowCount-1;return Math.min(n,s)}onViewportChanged(e){const t=this.calculateFirstRow(e.firstRow),i=this.calculateLastRow(e.lastRow);var o;this.firstRow===t&&this.lastRow===i||(this.firstRow=t,this.lastRow=i,this.purgeRowsNotInViewport(),this.viewportChangedContext=!0,null===(o=this.datasource)||void 0===o||o.setViewportRange(this.firstRow,this.lastRow),this.viewportChangedContext=!1)}purgeRowsNotInViewport(){const e=this.rowNodesByIndex;for(const i of Object.keys(e)){const o=parseInt(i,10);if(o<this.firstRow||o>this.lastRow){var t;if(this.isRowFocused(o)||null!==(t=this.beans.editSvc)&&void 0!==t&&t.isRowEditing(e[o]))continue;delete e[o]}}}isRowFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;return t.rowIndex===e}setViewportDatasource(e){this.destroyDatasource(),this.datasource=e,this.rowCount=-1,e.init?e.init((0,s.AuN)(this.gos,{setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)})):(0,s.ujB)(226)}getType(){return"viewport"}getRow(e){return this.rowNodesByIndex[e]||(this.rowNodesByIndex[e]=this.createBlankRowNode(e)),this.rowNodesByIndex[e]}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}getRowCount(){return-1===this.rowCount?0:this.rowCount}getRowIndexAtPixel(e){return 0!==this.rowHeight?Math.floor(e/this.rowHeight):0}resetRowHeights(){}onRowHeightChanged(){}getRowBounds(e){const t=this.rowHeight;return{rowHeight:t,rowTop:t*e}}updateRowHeights(){const e=this.rowHeight;this.forEachNode(t=>{t.setRowHeight(e),t.setRowTop(e*t.rowIndex)}),this.eventSvc.dispatchEvent({type:"modelUpdated",newData:!1,newPage:!1,keepRenderedRows:!0,animate:!1})}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}isEmpty(){return this.rowCount>0}getOverlayType(){return null}isRowsToRender(){return this.rowCount>0}getNodesInRangeForSelection(e,t){const i=e.rowIndex,o=t.rowIndex,n=i<this.firstRow||i>this.lastRow,s=o<this.firstRow||o>this.lastRow;if(n||s)return[];const r=[],a=i<=o?o:i;for(let l=i<=o?i:o;l<=a;l++)r.push(this.rowNodesByIndex[l]);return r}forEachNode(e){let t=0;for(const i of Object.keys(this.rowNodesByIndex)){const o=parseInt(i,10);e(this.rowNodesByIndex[o],t),t++}}setRowData(e){const t=(0,s.En5)(this.beans.gos),i=new Map;if(t)for(const o of Object.values(this.rowNodesByIndex))i.set(o.id,o);for(let o=this.firstRow;o<=this.lastRow;o++){const n=e[o];if(!n)continue;let s,r;t?(s=t({data:n,rowPinned:void 0,level:0,parentKeys:void 0}),r=i.get(s)):r=this.rowNodesByIndex[o],r?(r.updateData(n),r.setRowIndex(o),r.setRowTop(this.rowHeight*o)):(r=this.createBlankRowNode(o),r.setDataAndId(n,null!==s&&void 0!==s?s:o.toString())),this.rowNodesByIndex[o]=r}this.viewportChangedContext||this.eventSvc.dispatchEvent({type:"modelUpdated",newData:!1,newPage:!1,keepRenderedRows:!0,animate:!1})}createBlankRowNode(e){const t=new s.TUE(this.beans),i=this.rowHeight;return t.setRowHeight(i),t.setRowTop(i*e),t.setRowIndex(e),t}setRowCount(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e===this.rowCount)return;this.rowCount=e;const i=this.eventSvc;i.dispatchEventOnce({type:"rowCountReady"}),i.dispatchEvent({type:"modelUpdated",newData:!1,newPage:!1,keepRenderedRows:t,animate:!1})}isRowPresent(e){return!!this.getRowNode(e.id)}},jl={moduleName:"ViewportRowModel",version:ki,rowModels:["viewport"],beans:[Ul],dependsOn:[Ii]};var _l="paste",Kl="dragCopy",Yl="clipboard";var ql=class extends s.XQb{constructor(){super(...arguments),this.beanName="clipboardSvc",this.clientSideRowModel=null,this.gridCtrl=null,this.lastPasteOperationTime=0,this.navigatorApiFailed=!1}postConstruct(){const{gos:e,rowModel:t,ctrlsSvc:i}=this.beans;(0,s.dbY)(e,t)&&(this.clientSideRowModel=t),i.whenReady(this,e=>{this.gridCtrl=e.gridCtrl})}destroy(){super.destroy(),this.clientSideRowModel=null,this.gridCtrl=null}pasteFromClipboard(){var e;!this.gos.get("suppressClipboardApi")&&!this.navigatorApiFailed&&null!==(e=navigator.clipboard)&&void 0!==e&&e.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(e=>{(0,s.ujB)(40,{e:e,method:"readText"}),this.navigatorApiFailed=!0,this.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()}pasteFromClipboardLegacy(){let e=!1;const t=t=>{const i=Date.now();i-this.lastPasteOperationTime<50&&(e=!0,t.preventDefault()),this.lastPasteOperationTime=i};this.executeOnTempElement(e=>{e.addEventListener("paste",t),e.focus({preventScroll:!0})},i=>{const o=i.value;e?this.refocusLastFocusedCell():this.processClipboardData(o),i.removeEventListener("paste",t)})}refocusLastFocusedCell(){const{focusSvc:e}=this.beans,t=e.getFocusedCell();t&&e.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})}getClipboardDelimiter(){const e=this.gos.get("clipboardDelimiter");return(0,s.Qmv)(e)?e:"\t"}processClipboardData(e){if(null==e)return;let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";const i=[],o=e=>"\r"===e||"\n"===e;let n=!1;if(""===e)return[[""]];for(let s=0,r=0,a=0;a<e.length;a++){const l=e[a-1],d=e[a],c=e[a+1],u=()=>{i[s]||(i[s]=[]),i[s][r]||(i[s][r]="")};if(u(),'"'===d&&(n?'"'===c?(i[s][r]+='"',a++):n=!1:(void 0===l||l===t||o(l))&&(n=!0)),!n&&'"'!==d){if(d===t){r++,u();continue}if(o(d)){r=0,s++,u(),"\r"===d&&"\n"===c&&a++;continue}}i[s][r]+=d}return i}(e,this.getClipboardDelimiter());const i=this.gos.getCallback("processDataFromClipboard");if(i&&(t=i({data:t})),null==t)return;this.gos.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(t);const{rangeSvc:o,editSvc:n}=this.beans;this.doPasteOperation((e,i,s,r)=>{(null===o||void 0===o?void 0:o.isMoreThanOneCell())&&!this.hasOnlyOneValueToPaste(t)?this.pasteIntoActiveRange(t,e,i,r):this.pasteStartingFromFocusedCell(t,e,i,s,r),null===n||void 0===n||n.stopEditing(void 0,{source:_l})})}doPasteOperation(e){const t="clipboard",{eventSvc:i,focusSvc:o,rowRenderer:n,gos:r}=this.beans;i.dispatchEvent({type:"pasteStart",source:t});const{clientSideRowModel:a}=this,l=null===a||void 0===a?void 0:a.rootNode,d=l&&new s.k$d(r.get("aggregateOnlyChangedColumns"),l),c={},u=[];e(c,u,o.getFocusedCell(),d);const h=[...u];d&&(a.doAggregate(d),d.forEachChangedNodeDepthFirst(e=>{h.push(e)})),n.refreshCells({rowNodes:h}),this.dispatchFlashCells(c),this.fireRowChanged(u),this.refocusLastFocusedCell(),i.dispatchEvent({type:"pasteEnd",source:t})}getPreProcessRangeCallback(e){return t=>{const{rangeSvc:i}=this.beans;if(!i)return;const{rowDiff:o,colDiff:n}=this.getAdjustedRangeDimensionForPaste(t,e);0!==o&&i.extendRangeRowCountBy(t,o),0!==n&&i.extendRangeColumnCountBy(t,n)}}getAdjustedRangeDimensionForPaste(e,t){const i=this.beans.rangeSvc,o=t.length,n=i.getRangeRowCount(e),s=n>=o&&n%o===0,r=t[0].length,a=e.columns.length;return{rowDiff:s?0:o-n,colDiff:a>=r&&a%r===0?0:r-a}}pasteIntoActiveRange(e,t,i,o){let n=0,r=0;this.iterateActiveRanges((a,l,d,c)=>{if(c-n>=e.length){if(c%e.length!==0)return;n+=r,r=0}const u=e[c-n];i.push(l);const h=this.gos.getCallback("processCellFromClipboard"),p=d.columns,g=p.findIndex(s.LoC);-1!==g&&p.splice(g,1);for(let e=0;e<p.length;e++){const i=p[e];if(!i.isCellEditable(l)||i.isSuppressPaste(l))continue;let n=e;e>=u.length&&(n=e%u.length);const r=this.processCell(l,i,u[n],Kl,h,!0);l.setDataValue(i,r,_l),null===o||void 0===o||o.addParentNode(l.parent,[i]);const{rowIndex:d,rowPinned:c}=a,g=(0,s.PQ9)({rowIndex:d,column:i,rowPinned:c});t[g]=!0}r++},!1,this.getPreProcessRangeCallback(e))}getDisplayedColumnsStartingAt(e){let t=e;const i=[],{visibleCols:o}=this.beans;for(;t&&(0,s.ybP)(t);)t=o.getColAfter(t);for(;null!=t;)i.push(t),t=o.getColAfter(t);return i}pasteStartingFromFocusedCell(e,t,i,o,n){if(!o)return;const s={rowIndex:o.rowIndex,rowPinned:o.rowPinned},r=this.getDisplayedColumnsStartingAt(o.column);this.isPasteSingleValueIntoRange(e)?this.pasteSingleValueIntoRange(e,i,t,n):this.pasteMultipleValues(e,s,i,r,t,Yl,n)}isPasteSingleValueIntoRange(e){const t=this.beans.rangeSvc;return this.hasOnlyOneValueToPaste(e)&&!!t&&!t.isEmpty()}pasteSingleValueIntoRange(e,t,i,o){const n=e[0][0];this.iterateActiveRanges((e,s,r)=>{t.push(s),r.columns.forEach(e=>this.updateCellValue(s,e,n,i,Yl,o))})}hasOnlyOneValueToPaste(e){return 1===e.length&&1===e[0].length}copyRangeDown(){const{rangeSvc:e,gos:t,formula:i,valueSvc:o}=this.beans;if(!e||e.isEmpty())return;const n=[];this.doPasteOperation((e,r,a,l)=>{const d=t.getCallback("processCellForClipboard"),c=t.getCallback("processCellFromClipboard");this.iterateActiveRanges((t,a,u)=>{const{columns:h}=u;n.length?(r.push(a),h.forEach((o,r)=>{if(!o.isCellEditable(a)||o.isSuppressPaste(a))return;o.isAllowFormula()&&(null===i||void 0===i?void 0:i.isFormula(n[r]))&&(n[r]=null===i||void 0===i?void 0:i.updateFormulaByOffset({value:n[r],rowDelta:1}));const d=this.processCell(a,o,n[r],Kl,c,!0);a.setDataValue(o,d,_l),l&&l.addParentNode(a.parent,[o]);const{rowIndex:u,rowPinned:h}=t,p=(0,s.PQ9)({rowIndex:u,column:o,rowPinned:h});e[p]=!0})):h.forEach(e=>{const t=this.processCell(a,e,o.getValue(e,a),Kl,d,!1,!0);n.push(t)})},!0)})}removeLastLineIfBlank(e){const t=(0,s.GXs)(e);if(t&&1===t.length&&""===t[0]){if(1===e.length)return;(0,s.$ii)(e,t)}}fireRowChanged(e){if("fullRow"===this.gos.get("editType"))for(const t of e)this.eventSvc.dispatchEvent({type:"rowValueChanged",node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned})}pasteMultipleValues(e,t,i,o,n,r,a){let l=t;const d=this.beans,{gos:c}=d,u=null!=this.clientSideRowModel&&!c.get("enableGroupEdit")&&!c.get("treeData"),h=()=>{for(;;){if(!l)return null;const e=(0,s.CFh)(d,l);if(l=(0,s.vcM)(d,{rowPinned:l.rowPinned,rowIndex:l.rowIndex}),null==e)return null;if(!(e.detail||e.footer||u&&e.group))return e}};for(const s of e){const e=h();e&&(s.forEach((t,i)=>this.updateCellValue(e,o[i],t,n,r,a)),i.push(e))}}updateCellValue(e,t,i,o,n,r){if(!e||null===t||void 0===t||!t.isCellEditable(e)||null!==t&&void 0!==t&&t.isSuppressPaste(e))return;const a=this.processCell(e,t,i,n,this.gos.getCallback("processCellFromClipboard"),!0);e.setDataValue(t,a,_l);const{rowIndex:l,rowPinned:d}=e;o[(0,s.PQ9)({rowIndex:l,column:t,rowPinned:d})]=!0,r&&r.addParentNode(e.parent,[t])}copyToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.copyOrCutToClipboard(e)}cutToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.gos.get("suppressCutToClipboard")||(this.eventSvc.dispatchEvent({type:"cutStart",source:t}),this.copyOrCutToClipboard(e,!0),this.eventSvc.dispatchEvent({type:"cutEnd",source:t}))}copyOrCutToClipboard(e,t){let{includeHeaders:i,includeGroupHeaders:o}=e;const{gos:n,focusSvc:s}=this.beans;null==i&&(i=n.get("copyHeadersToClipboard")),null==o&&(o=n.get("copyGroupHeadersToClipboard"));const r={includeHeaders:i,includeGroupHeaders:o},a=n.get("rowSelection"),l=n.get("cellSelection");let d=null;this.shouldCopyCells(l,a)?(this.copySelectedRangeToClipboard(r),d=0):this.shouldCopyRows(a)?(this.copySelectedRowsToClipboard(r),d=1):s.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(r),d=2),t&&null!==d&&this.clearCellsAfterCopy(d)}shouldCopyCells(e,t){const{rangeSvc:i,selectionSvc:o,gos:n}=this.beans;if(!i||i.isEmpty())return!1;if(e){return!("object"===typeof t&&t.copySelectedRows&&!(null!==o&&void 0!==o&&o.isEmpty()))}{const e=n.get("suppressCopySingleCellRanges");return!(!i.isMoreThanOneCell()&&e)}}shouldCopyRows(e){var t;const{selectionSvc:i,gos:o}=this.beans;return null!==(t=null===i||void 0===i?void 0:i.isEmpty())&&void 0!==t&&!t&&(e&&"string"!==typeof e?null!==(n=e.copySelectedRows)&&void 0!==n&&n:!o.get("suppressCopyRowsToClipboard"));var n}clearCellsAfterCopy(e){const t=this.beans,{rangeSvc:i,focusSvc:o,eventSvc:n}=t;if(n.dispatchEvent({type:"keyShortcutChangedCellStart"}),0===e)i.clearCellRangeCellValues({cellEventSource:"clipboardSvc"});else if(1===e)this.clearSelectedRows();else{const e=o.getFocusedCell();if(null==e)return;const i=(0,s.CFh)(t,e);i&&this.clearCellValue(i,e.column)}n.dispatchEvent({type:"keyShortcutChangedCellEnd"})}clearSelectedRows(){var e;const{selectionSvc:t,visibleCols:i}=this.beans,o=null!==(e=null===t||void 0===t?void 0:t.getSelectedNodes())&&void 0!==e?e:[],n=i.allCols;for(const s of o)for(const e of n)this.clearCellValue(s,e)}clearCellValue(e,t){if(!t.isCellEditable(e))return;const i=this.beans.valueSvc.getDeleteValue(t,e);e.setDataValue(t,i,"clipboardSvc")}iterateActiveRanges(e,t,i){const o=this.beans.rangeSvc;if(!o||o.isEmpty())return;const n=o.getCellRanges(),s=t?[n[0]]:n;for(const r of s)this.iterateActiveRange({cellRange:r,rowCallback:e,preProcessRange:i})}iterateActiveRange(e){const{cellRange:t,preProcessRange:i,rowCallback:o}=e,{beans:n}=this,{rangeSvc:r}=n;if(!r)return;i&&i(t);let a=r.getRangeStartRow(t);const l=r.getRangeEndRow(t);let d=0,c=!1;for(;!c&&null!=a;){const e=(0,s.CFh)(n,a);c=(0,s._wY)(a,l),o(a,e,t,d++),a=(0,s.vcM)(n,a)}}copySelectedRangeToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.beans.rangeSvc;if(!t||t.isEmpty())return;const i=t.areAllRangesAbleToMerge(),{data:o,cellsToFlash:n}=i?this.buildDataFromMergedRanges(t,e):this.buildDataFromRanges(t,e);this.copyDataToClipboard(o),this.dispatchFlashCells(n)}buildDataFromMergedRanges(e,t){const i=new Set,o=e.getCellRanges(),n=new Map,r=[],a={},l=(0,s.dbY)(this.gos,this.beans.rowModel),d=new Set;l||this.beans.rowModel.forEachNode(e=>{d.add(e.rowIndex)});for(const s of o){s.columns.forEach(e=>i.add(e));const{rowPositions:t,cellsToFlash:o}=this.getRangeRowPositionsAndCellsToFlash(e,s);for(const e of t){const t=d.has(e.rowIndex);if(!l&&!t)continue;const i="".concat(e.rowIndex,"-").concat(e.rowPinned||"null");n.get(i)||(n.set(i,!0),r.push(e))}Object.assign(a,o)}const c=this.beans.visibleCols.allCols,u=Array.from(i);u.sort((e,t)=>c.indexOf(e)-c.indexOf(t));return{data:this.buildExportParams({columns:u,rowPositions:r,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}),cellsToFlash:a}}buildDataFromRanges(e,t){const i=e.getCellRanges(),o=[],n={};for(const s of i){const{rowPositions:i,cellsToFlash:r}=this.getRangeRowPositionsAndCellsToFlash(e,s);Object.assign(n,r),o.push(this.buildExportParams({columns:s.columns,rowPositions:i,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}))}return{data:o.join("\n"),cellsToFlash:n}}getRangeRowPositionsAndCellsToFlash(e,t){const i=[],o={},n=e.getRangeStartRow(t),r=e.getRangeEndRow(t);let a=n;for(;a;){i.push(a);for(const e of t.columns){const{rowIndex:t,rowPinned:i}=a;o[(0,s.PQ9)({rowIndex:t,column:e,rowPinned:i})]=!0}if((0,s._wY)(a,r))break;a=(0,s.vcM)(this.beans,a)}return{rowPositions:i,cellsToFlash:o}}getCellsToFlashFromRowNodes(e){const t=this.beans.visibleCols.allCols,i={};for(let o=0;o<e.length;o++){const{level:n,rowIndex:r,rowPinned:a,sibling:l}=e[o],d=-1===n?l.rowIndex:r;if(null!=d)for(let e=0;e<t.length;e++){const o=t[e];i[(0,s.PQ9)({rowIndex:d,column:o,rowPinned:a})]=!0}}return i}copyFocusedCellToClipboard(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this.beans.focusSvc.getFocusedCell();if(null==o)return;o=null!==(e=null===(t=this.beans.rowSpanSvc)||void 0===t?void 0:t.getCellStart(o))&&void 0!==e?e:o;const n=(0,s.PQ9)(o),r={rowPinned:o.rowPinned,rowIndex:o.rowIndex},a=o.column,l=this.buildExportParams({columns:[a],rowPositions:[r],includeHeaders:i.includeHeaders,includeGroupHeaders:i.includeGroupHeaders});this.copyDataToClipboard(l),this.dispatchFlashCells({[n]:!0})}copySelectedRowsToClipboard(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{columnKeys:i,includeHeaders:o,includeGroupHeaders:n}=t,s=this.buildExportParams({columns:i,includeHeaders:o,includeGroupHeaders:n});this.copyDataToClipboard(s);const r=(null===(e=this.beans.selectionSvc)||void 0===e?void 0:e.getSelectedNodes())||[];this.dispatchFlashCells(this.getCellsToFlashFromRowNodes(r))}buildExportParams(e){const{columns:t,rowPositions:i,includeHeaders:o=!1,includeGroupHeaders:n=!1}=e,{gos:s,csvCreator:r}=this.beans,a={columnKeys:t,rowPositions:i,skipColumnHeaders:!o,skipColumnGroupHeaders:!n,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!i,processCellCallback:s.getCallback("processCellForClipboard"),processRowGroupCallback:e=>{var t;let{node:i,column:o}=e;const{value:n,valueFormatted:r}=this.beans.valueSvc.getValueForDisplay({column:o,node:i,includeValueFormatted:!0}),a=null!==(t=null!==r&&void 0!==r?r:n)&&void 0!==t?t:"",l=s.getCallback("processCellForClipboard");return l?l({column:o,node:i,value:a,type:Yl,formatValue:e=>{var t;return null!==(t=this.beans.valueSvc.formatValue(o,i,e))&&void 0!==t?t:e},parseValue:e=>{var t;return null!==(t=this.beans.valueSvc.parseValue(o,i,e,n))&&void 0!==t?t:e}}):a},processHeaderCallback:s.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:s.getCallback("processGroupHeaderForClipboard")};return r.getDataAsCsv(a,!0)}dispatchFlashCells(e){window.setTimeout(()=>{this.eventSvc.dispatchEvent({type:"flashCells",cells:e})},0)}processCell(e,t,i,o,n,s,r){const{valueSvc:a,formula:l}=this.beans;if(n){return n({column:t,node:e,value:i,type:o,formatValue:i=>{var o;return null!==(o=a.formatValue(t,null!==e&&void 0!==e?e:null,i))&&void 0!==o?o:i},parseValue:i=>a.parseValue(t,null!==e&&void 0!==e?e:null,i,a.getValue(t,e))})}return s&&!1!==t.getColDef().useValueParserForImport?a.parseValue(t,null!==e&&void 0!==e?e:null,i,a.getValue(t,e)):r&&!1!==t.getColDef().useValueFormatterForExport?null!==l&&void 0!==l&&l.isFormula(i)?i:null!==(d=a.formatValue(t,null!==e&&void 0!==e?e:null,i))&&void 0!==d?d:i:i;var d}copyDataToClipboard(e){const t=this.gos.getCallback("sendToClipboard");if(t)return void t({data:e});!this.gos.get("suppressClipboardApi")&&navigator.clipboard?navigator.clipboard.writeText(e).catch(t=>{(0,s.ujB)(40,{e:t,method:"writeText"}),this.copyDataToClipboardLegacy(e)}):this.copyDataToClipboardLegacy(e)}copyDataToClipboardLegacy(e){this.executeOnTempElement(t=>{const i=(0,s.BxM)(this.beans),o=(0,s.UlD)(this.beans);t.value=e||" ",t.select(),t.focus({preventScroll:!0});i.execCommand("copy")||(0,s.ujB)(41),null!=(null===o||void 0===o?void 0:o.focus)&&o.focus({preventScroll:!0})})}executeOnTempElement(e,t){if(!this.gridCtrl)return;const i=(0,s.BxM)(this.beans),o=i.createElement("textarea"),n=o.style;n.width="1px",n.height="1px";const r=i.documentElement;n.top=r.scrollTop+"px",n.left=r.scrollLeft+"px",n.position="absolute",n.opacity="0";this.gridCtrl.getGui().appendChild(o);try{e(o)}catch(a){(0,s.ujB)(42)}t?window.setTimeout(()=>{t(o),o.remove()},100):o.remove()}},Ql={moduleName:"Clipboard",version:ki,beans:[ql],apiFunctions:{copyToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.copyToClipboard(t)},cutToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.cutToClipboard(t)},copySelectedRowsToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.copySelectedRowsToClipboard(t)},copySelectedRangeToClipboard:function(e,t){var i;null===(i=e.clipboardSvc)||void 0===i||i.copySelectedRangeToClipboard(t)},copySelectedRangeDown:function(e){var t;null===(t=e.clipboardSvc)||void 0===t||t.copyRangeDown()},pasteFromClipboard:function(e){var t;null===(t=e.clipboardSvc)||void 0===t||t.pasteFromClipboard()}},dependsOn:[Ii,s.n76,s.FWU,s.O4V]},Xl={tag:"div",cls:"ag-row-numbers-resizer"},$l=class extends s.uAl{constructor(e){super(Xl),this.cellCtrl=e,this.initialYPosition=-1,this.dragging=!1}postConstruct(){const{beans:e,cellCtrl:t}=this,{dragSvc:i,environment:o}=e;this.defaultRowHeight=o.getDefaultRowHeight(),i.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:this.onDragging.bind(this),onDragStop:this.onDragStop.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:!0,stopPropagationForTouch:!0});const n=t.getRowPosition();this.node=(0,s.CFh)(this.beans,n)}onDragStart(e){if(!this.node)return;const{beans:{ctrlsSvc:t,eventSvc:i}}=this;t.get("gridCtrl").setResizeCursor(s.OP3.Vertical),this.dragging=!0,this.initialHeight=this.node.rowHeight,i.dispatchEvent({type:"rowResizeStarted",node:this.node,event:e,rowHeight:this.initialHeight})}onDragging(e){let{clientY:t}=e;if("bottom"===this.cellCtrl.rowNode.rowPinned&&(t*=-1),-1===this.initialYPosition||!this.dragging)return void(this.initialYPosition=t);const{beans:i,initialHeight:o,initialYPosition:n,defaultRowHeight:s,node:r}=this;if(null==o)return;const a=null===r||void 0===r?void 0:r.rowHeight,l=Math.max(o-(n-t),s);if(a===l)return;null===r||void 0===r||r.setRowHeight(l);const{rowRenderer:d,rowModel:c,pinnedRowModel:u}=i,h=!(null===r||void 0===r||!r.rowPinned);h&&d.redraw({afterScroll:!0}),(!h||null!==u&&void 0!==u&&u.isManual())&&c.onRowHeightChanged({animate:!1})}onDragStop(e){var t;this.beans.eventSvc.dispatchEvent({type:"rowResizeEnded",node:this.node,event:e,rowHeight:null===(t=this.node)||void 0===t?void 0:t.rowHeight}),this.clearDragDetails(!0)}onDragCancel(){this.clearDragDetails(!0)}clearDragDetails(e){if(this.initialYPosition=-1,this.initialHeight=null,this.dragging=!1,e){this.beans.ctrlsSvc.get("gridCtrl").setResizeCursor(!1)}}destroy(){this.clearDragDetails(!1),this.node=void 0,super.destroy()}};function Zl(e){const t=(0,s.wds)(e);return!(!t||"object"!==typeof t||!t.enableRowResizer)}var Jl=class{constructor(e,t){this.beans=e,this.cellCtrl=t}refreshRowResizer(){Zl(this.beans)&&this.isRowResizeSupported(this.cellCtrl.rowNode)?this.addResizerToCellComp():this.removeRowResizerFromCellComp()}isRowResizeSupported(e){const{pinnedRowModel:t,rowModel:i,visibleCols:o}=this.beans,n=!!i.onRowHeightChanged;return o.autoHeightCols.length?((0,s.ujB)(276),!1):null!=e.rowPinned&&(null===t||void 0===t||!t.isManual())||n}addResizerToCellComp(){const{beans:e,cellCtrl:t}=this,{eGui:i}=t;let{rowResizer:o}=this;o?i.appendChild(o.getGui()):(o=e.registry.createDynamicBean("rowNumberRowResizer",!1,t),o&&(this.rowResizer=e.context.createBean(o),i.appendChild(o.getGui())))}removeRowResizerFromCellComp(){const{rowResizer:e,beans:{context:t}}=this;e&&((0,s.MwW)(e.getGui()),this.rowResizer=t.destroyBean(e))}destroy(){this.removeRowResizerFromCellComp()}},ed=class extends s.XQb{constructor(){super(...arguments),this.beanName="rowNumbersSvc",this.isIntegratedWithSelection=!1,this.lastColumnResized=0}postConstruct(){const e=(0,s.pkA)(this,this.refreshCells.bind(this),10);this.addManagedEventListeners({columnResized:()=>{this.lastColumnResized=Date.now()},modelUpdated:t=>{e(!1,!t.keepRenderedRows)},rangeSelectionChanged:()=>this.refreshCells(!0),pinnedRowsChanged:()=>e(!1,!0)}),this.addManagedPropertyListeners(["rowNumbers","cellSelection"],e=>{this.updateColumns(e)}),this.refreshSelectionIntegration()}addColumns(e){null!=this.columns&&(e.list=this.columns.list.concat(e.list),e.tree=this.columns.tree.concat(e.tree),(0,s.YkS)(e))}createColumns(e,t){var i,o,n,r,a,l;const d=()=>{var e;(0,s.yxN)(this.beans,null===(e=this.columns)||void 0===e?void 0:e.tree),this.columns=null},{beans:c}=this;if(!(0,s.wds)(c))return void d();const u=e.treeDepth,h=(null!==(i=null===(o=this.columns)||void 0===o?void 0:o.treeDepth)&&void 0!==i?i:-1)==u,p=this.generateRowNumberCols();if((0,s.kFn)(p,null!==(n=null===(r=this.columns)||void 0===r?void 0:r.list)&&void 0!==n?n:[])&&h)return;d();const{colGroupSvc:g}=this.beans,v=null!==(a=null===g||void 0===g?void 0:g.findDepth(e.tree))&&void 0!==a?a:0,m=null!==(l=null===g||void 0===g?void 0:g.balanceTreeForAutoCols(p,v))&&void 0!==l?l:[];this.columns={list:p,tree:m,treeDepth:v,map:{}};t(e=>{if(!e)return null;const t=e.filter(e=>!(0,s.uQ3)(e));return[...p,...t]})}handleMouseDownOnCell(e,t){return!this.isIntegratedWithSelection||t.target.classList.contains("ag-row-numbers-resizer")?(this.beans.rangeSvc&&t.preventDefault(),t.stopImmediatePropagation(),!1):(t.shiftKey||(0,s.vVf)(this.beans,t)||this.focusFirstRenderedCellAtRowPosition(e),!0)}updateColumns(e){const t=(0,s.sHF)(e.source);this.refreshSelectionIntegration();for(const n of null!==(i=null===(o=this.columns)||void 0===o?void 0:o.list)&&void 0!==i?i:[]){var i,o;const e=this.createRowNumbersColDef();n.setColDef(e,null,t),(0,s.l8G)(this.beans,{state:[(0,s.oJH)(e,n.getColId())]},t)}}getColumn(){var e,t;return null!==(e=null===(t=this.columns)||void 0===t?void 0:t.list.find(s.uQ3))&&void 0!==e?e:null}getColumns(){var e,t;return null!==(e=null===(t=this.columns)||void 0===t?void 0:t.list)&&void 0!==e?e:null}setupForHeader(e){const{column:t,eGridHeader:i}=e.params;(0,s.uQ3)(t)&&((0,s.PIC)(i,"Row Number"),this.addManagedElementListeners(i,{click:this.onHeaderClick.bind(this),keydown:this.onHeaderKeyDown.bind(this),focus:this.onHeaderFocus.bind(this)}))}createRowNumbersRowResizerFeature(e){if(Zl(this.beans))return new Jl(this.beans,e)}refreshSelectionIntegration(){const{beans:e}=this,{gos:t,rangeSvc:i}=e,o=t.get("cellSelection");this.refreshRowNumberOverrides(),this.isIntegratedWithSelection=!!i&&!!o&&!this.isSuppressCellSelectionIntegration}refreshRowNumberOverrides(){const e=(0,s.wds)(this.beans);if(this.rowNumberOverrides={},!e||"object"!==typeof e)return;e.suppressCellSelectionIntegration&&(this.isSuppressCellSelectionIntegration=!0);const t=["contextMenuItems","context","onCellClicked","onCellContextMenu","onCellDoubleClicked","headerTooltip","headerStyle","headerComponent","headerComponentParams","suppressHeaderKeyboardEvent","tooltipField","tooltipValueGetter","tooltipComponent","tooltipComponentParams","tooltipComponentSelector","valueGetter","valueFormatter","width","maxWidth","minWidth","resizable"];for(const i of t)null!=e[i]&&(this.rowNumberOverrides[i]=e[i])}onHeaderFocus(){var e;null===(e=this.beans.ariaAnnounce)||void 0===e||e.announceValue("Press Space to select all cells","ariaSelectAllCells")}onHeaderKeyDown(e){this.isIntegratedWithSelection&&e.key===s.DDm.SPACE&&this.handleFocusAllCellsFromHeader()}onHeaderClick(e){var t;Date.now()-this.lastColumnResized<100||!this.isIntegratedWithSelection||null!==(t=this.getColumn())&&void 0!==t&&t.resizing||this.handleFocusAllCellsFromHeader()}handleFocusAllCellsFromHeader(){(0,s.YMc)(this.beans),this.focusFirstRenderedCellAtRowPosition()}refreshCells(e,t){const i=this.getColumn();if(i){if(t){var o;const e=null===(o=this.beans.autoWidthCalc)||void 0===o?void 0:o.getPreferredWidthForElements([this.createDummyElement(i)],2);var n;if(null!=e)null===(n=this.beans.colResize)||void 0===n||n.setColumnWidths([{key:i,newWidth:e}],!1,!0,"rowNumbersService")}this.beans.rowRenderer.refreshCells({columns:[i],force:e})}}createDummyElement(e){const t=(0,s.UCw)({tag:"div",cls:"ag-cell-value ag-cell"});let i=String(this.beans.rowModel.getRowCount()+1);if("function"===typeof this.rowNumberOverrides.valueFormatter){const t=(0,s.AuN)(this.beans.gos,{data:void 0,value:i,node:null,column:e,colDef:e.colDef});i=this.rowNumberOverrides.valueFormatter(t)}return t.textContent=i,t}createRowNumbersColDef(){const{gos:e,contextMenuSvc:t}=this.beans,i=e.get("enableRtl");return(0,n.A)((0,n.A)({minWidth:60,width:60,resizable:!1,valueGetter:this.valueGetter.bind(this),contextMenuItems:this.isIntegratedWithSelection||!t?void 0:()=>[]},this.rowNumberOverrides),{},{colId:s.lzn,chartDataType:"excluded",suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPinned:!0,pinned:i?"right":"left",lockPosition:i?"right":"left",editable:!1,suppressFillHandle:!0,suppressAutoSize:!0,suppressSizeToFit:!0,suppressHeaderContextMenu:!0,suppressNavigable:!0,headerClass:this.getHeaderClass(),cellClass:this.getCellClass.bind(this),cellAriaRole:"rowheader"})}valueGetter(e){var t;const i=e.node,o=null===(t=this.beans.formula)||void 0===t?void 0:t.active,n=null===i||void 0===i?void 0:i.pinnedSibling;if(null!==i&&void 0!==i&&i.rowPinned&&n){const e=o?n.formulaRowIndex:n.rowIndex;return"".concat(null==e?"-":e+1)}return String(((o?null===i||void 0===i?void 0:i.formulaRowIndex:null===i||void 0===i?void 0:i.rowIndex)||0)+1)}getHeaderClass(){const e=["ag-row-number-header"];return this.isIntegratedWithSelection&&e.push("ag-row-number-selection-enabled"),e}getCellClass(e){const{beans:t}=this,{rangeSvc:i,gos:o}=t,{node:n}=e,s=["ag-row-number-cell"],r=o.get("cellSelection");if(!i||!r)return s;this.isIntegratedWithSelection&&s.push("ag-row-number-selection-enabled");const a=i.getCellRanges();if(!a.length)return s;const l=this.beans.visibleCols.allCols.length-1,d="object"===typeof r&&r.enableHeaderHighlight;for(const c of a)i.isRowInRange({rowIndex:n.rowIndex,rowPinned:n.rowPinned},c)&&(d&&s.push("ag-row-number-range-highlight"),c.columns.length===l&&s.push("ag-row-number-range-selected"));return s}generateRowNumberCols(){const{gos:e,beans:t}=this;if(!(0,s.wds)(t))return[];const i=this.createRowNumbersColDef(),o=i.colId;e.validateColDef(i,o,!0);const n=new s.Brr(i,null,o,!1);return this.createBean(n),[n]}focusFirstRenderedCellAtRowPosition(e){if(!e&&!(e=(0,s.iE6)(this.beans)))return;const{beans:t,gos:i}=this,{visibleCols:o,colViewport:n}=t,r=i.get("enableRtl")?o.rightCols:o.leftCols;let a;if(1==r.length){const i=(0,s.CFh)(t,e);if(!i)return;a=n.getColsWithinViewport(i)}else a=r;const l=a.find(e=>!(0,s.uQ3)(e));if(!l)return;const{rowPinned:d,rowIndex:c}=e;setTimeout(()=>{t.focusSvc.setFocusedCell({rowIndex:c,rowPinned:d,column:l,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})})}destroy(){var e;(0,s.yxN)(this.beans,null===(e=this.columns)||void 0===e?void 0:e.tree),this.rowNumberOverrides=null,super.destroy()}},td={moduleName:"RowNumbers",version:ki,beans:[ed],dynamicBeans:{rowNumberRowResizer:$l},dependsOn:[Ii,s.Iws,s.RPC],css:['.ag-row-number-cell{background-color:var(--ag-header-background-color);border:none;color:var(--ag-header-text-color);font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap;width:100%}:where(.ag-ltr) .ag-row-number-cell{text-align:right}:where(.ag-rtl) .ag-row-number-cell{text-align:left}.ag-row-numbers-resizer{bottom:-2px;cursor:ns-resize;height:4px;position:absolute;width:100%}:where(.ag-ltr) .ag-row-numbers-resizer{left:0}:where(.ag-rtl) .ag-row-numbers-resizer{right:0}.ag-floating-bottom .ag-row-numbers-resizer{bottom:unset;top:-2px}:where(.ag-row-number-header.ag-row-number-selection-enabled){cursor:cell}.ag-row-number-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-row-number-range-selected{background-color:var(--ag-row-numbers-selected-color)}:where(.ag-ltr){.ag-row-number-header,:where(.ag-cell.ag-row-number-cell):not(.ag-cell-last-left-pinned){border-right:var(--ag-pinned-column-border)}:where(.ag-cell.ag-row-number-cell.ag-row-number-selection-enabled){cursor:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxLjUiPjxwYXRoIGQ9Ik0zLjQ0NSA4LjkxMVY3LjQwOUg5Ljc1VjYuMDE0bDIuNTM1IDIuMTQ2LTIuNTM1IDIuMTQ2VjguOTExeiIgc3R5bGU9InN0cm9rZTojZmZmO3N0cm9rZS13aWR0aDouNDFweCIgdHJhbnNmb3JtPSJtYXRyaXgoMS41Nzg0IDAgMCAxLjg2NDI5IC00LjQxMyAtNy4yMTIpIi8+PC9zdmc+"),auto}}:where(.ag-rtl){.ag-row-number-header,:where(.ag-cell.ag-row-number-cell):not(.ag-cell-first-right-pinned){border-left:var(--ag-pinned-column-border)}:where(.ag-cell.ag-row-number-cell.ag-row-number-selection-enabled){cursor:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxLjUiPjxwYXRoIGQ9Ik01Ljk3OSA4LjkxMXYxLjM5NUwzLjQ0NSA4LjE2bDIuNTM0LTIuMTQ2djEuMzk1aDYuMzA2djEuNTAyeiIgc3R5bGU9InN0cm9rZTojZmZmO3N0cm9rZS13aWR0aDouNDFweCIgdHJhbnNmb3JtPSJtYXRyaXgoMS41Nzg0IDAgMCAxLjg2NDI5IC00LjQxMyAtNy4yMTIpIi8+PC9zdmc+"),auto}}']},id={tag:"div",cls:"ag-filter-toolpanel-search",role:"presentation",children:[{tag:"div",ref:"eExpand",cls:"ag-filter-toolpanel-expand"},{tag:"ag-input-text-field",ref:"eFilterTextField",cls:"ag-filter-toolpanel-search-input"}]},od=class extends s.uAl{constructor(){super(...arguments),this.eExpand=s.dRA,this.eFilterTextField=s.dRA}postConstruct(){this.setTemplate(id,[s.n1z]);const e=this.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(0),this.addManagedElementListeners(this.eExpand,{click:this.onExpandClicked.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)})}init(e){this.params=e,this.beans.colModel.ready&&this.showOrHideOptions()}createExpandIcons(){const{eExpand:e,beans:t}=this;e.appendChild(this.eExpandChecked=(0,s.asF)("accordionOpen",t)),e.appendChild(this.eExpandUnchecked=(0,s.asF)("accordionClosed",t)),e.appendChild(this.eExpandIndeterminate=(0,s.asF)("accordionIndeterminate",t))}showOrHideOptions(){const{params:e,eFilterTextField:t}=this,i=!e.suppressFilterSearch,o=!e.suppressExpandAll,n=this.getLocaleTextFunc();t.setInputPlaceholder(n("searchOoo","Search..."));const r=this.beans.colModel.getCols().some(e=>e.getOriginalParent()&&e.isFilterAllowed());(0,s.nl0)(t.getGui(),i),(0,s.nl0)(this.eExpand,o&&r)}onSearchTextChanged(){this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=(0,s.pkA)(this,()=>this.dispatchLocalEvent({type:"searchChanged",searchText:this.eFilterTextField.getValue()}),300)),this.onSearchTextChangedDebounced()}onExpandClicked(){const e=0===this.currentExpandState?{type:"collapseAll"}:{type:"expandAll"};this.dispatchLocalEvent(e)}setExpandState(e){this.currentExpandState=e,(0,s.nl0)(this.eExpandChecked,0===e),(0,s.nl0)(this.eExpandUnchecked,1===e),(0,s.nl0)(this.eExpandIndeterminate,2===e)}},nd={selector:"AG-FILTERS-TOOL-PANEL-HEADER",component:od},sd={tag:"div",cls:"ag-filter-toolpanel-instance",children:[{tag:"div",ref:"eFilterToolPanelHeader",cls:"ag-filter-toolpanel-header ag-filter-toolpanel-instance-header",role:"button",attrs:{"aria-expanded":"false"},children:[{tag:"div",ref:"eExpand",cls:"ag-filter-toolpanel-expand"},{tag:"span",ref:"eFilterName",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilterIcon",cls:"ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon"}]},{tag:"div",ref:"agFilterToolPanelBody",cls:"ag-filter-toolpanel-instance-body ag-filter"}]},rd=class extends s.uAl{constructor(e,t){super(sd),this.hideHeader=e,this.expandedCallback=t,this.eFilterToolPanelHeader=s.dRA,this.eFilterName=s.dRA,this.agFilterToolPanelBody=s.dRA,this.eFilterIcon=s.dRA,this.eExpand=s.dRA,this.expanded=!1}postConstruct(){const{beans:e,eExpand:t,eFilterIcon:i}=this,o=(0,s.asF)("accordionOpen",e);this.eExpandChecked=o;const n=(0,s.asF)("accordionClosed",e);this.eExpandUnchecked=n,t.appendChild(o),t.appendChild(n);const r=this.getLocaleTextFunc();(0,s.PIC)(i,r("ariaFilterActive","Filter Active")),(0,s.lXX)(i,"img")}setColumn(e){this.column=e;const{beans:t,eFilterToolPanelHeader:i,eFilterIcon:o,eExpandChecked:n,hideHeader:r}=this;this.eFilterName.innerText=t.colNames.getDisplayNameForColumn(e,"filterToolPanel",!1)||"",this.addManagedListeners(i,{click:this.toggleExpanded.bind(this),keydown:this.onKeyDown.bind(this)}),this.addManagedEventListeners({filterOpened:this.onFilterOpened.bind(this)}),this.addInIcon("filterActive",o,e),(0,s.nl0)(o,this.isFilterActive()),(0,s.nl0)(n,!1),r?((0,s.nl0)(i,!1),i.removeAttribute("tabindex")):i.setAttribute("tabindex","0"),this.addManagedListeners(e,{filterChanged:this.onFilterChanged.bind(this)})}onKeyDown(e){const{key:t}=e,{ENTER:i,SPACE:o,LEFT:n,RIGHT:r}=s.DDm;t!==i&&t!==o&&t!==n&&t!==r||(e.preventDefault(),t===i||t===o?this.toggleExpanded():t===s.DDm.LEFT?this.collapse():this.expand())}getColumn(){return this.column}getColumnFilterName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"filterToolPanel",!1)}addCssClassToTitleBar(e){this.eFilterToolPanelHeader.classList.add(e)}addInIcon(e,t,i){if(null==t)return;const o=(0,s.asF)(e,this.beans,i);t.appendChild(o)}isFilterActive(){var e;return!(null===(e=this.beans.colFilter)||void 0===e||!e.isFilterActive(this.column))}onFilterChanged(){(0,s.nl0)(this.eFilterIcon,this.isFilterActive()),this.dispatchLocalEvent({type:"filterChanged"})}toggleExpanded(){this.expanded?this.collapse():this.expand()}expand(){this.expanded||(this.expanded=!0,(0,s.oAJ)(this.eFilterToolPanelHeader,!0),(0,s.nl0)(this.eExpandChecked,!0),(0,s.nl0)(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())}addFilterElement(e){var t;const i=(0,s.UCw)({tag:"div",cls:"ag-filter-toolpanel-instance-filter"}),o=this.createManagedBean(new s.QdF(this.column,"TOOLBAR"));this.filterComp=o,o.hasFilter()&&(null===(t=o.getFilter())||void 0===t||t.then(t=>{this.underlyingFilter=t,t&&(i.appendChild(o.getGui()),this.agFilterToolPanelBody.appendChild(i),o.afterGuiAttached({container:"toolPanel",suppressFocus:e}))}))}collapse(){if(!this.expanded)return;this.expanded=!1,(0,s.oAJ)(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),(0,s.nl0)(this.eExpandChecked,!1),(0,s.nl0)(this.eExpandUnchecked,!0);const e=this.filterComp;null===e||void 0===e||e.afterGuiDetached(),this.destroyBean(e),this.expandedCallback()}removeFilterElement(){(0,s.fDi)(this.agFilterToolPanelBody)}isExpanded(){return this.expanded}onPanelHidden(){var e;if(!this.expanded)return;const t=this.underlyingFilter;t&&(null===(e=t.afterGuiDetached)||void 0===e||e.call(t))}onFilterOpened(e){"COLUMN_MENU"===e.source&&e.column===this.column&&this.expanded&&this.collapse()}},ad=class extends s.uAl{constructor(e,t,i,o,n){super(),this.columnGroup=e,this.childFilterComps=t,this.expandedCallback=i,this.depth=o,this.showingColumn=n,this.filterGroupComp=s.dRA}postConstruct(){this.setTemplate({tag:"div",cls:"ag-filter-toolpanel-group-wrapper",children:[{tag:"ag-group-component",ref:"filterGroupComp"}]},[Ti],{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}}),this.setGroupTitle();const{filterGroupComp:e,depth:t,childFilterComps:i,gos:o}=this;e.setAlignItems("stretch"),e.addCss("ag-filter-toolpanel-group-level-".concat(t)),e.getGui().style.setProperty("--ag-indentation-level",String(t)),e.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(t,"-header"));for(const s of i)e.addItem(s),s.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(t+1,"-header")),s.getGui().style.setProperty("--ag-indentation-level",String(t+1));const n=this.showingColumn?this.columnGroup:void 0;this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.getGui(),getLocation:()=>"filterToolPanelColumnGroup",shouldDisplayTooltip:(0,s.qmn)(o,()=>e.getGui().querySelector(".ag-group-title")),getAdditionalParams:()=>({colDef:null===n||void 0===n?void 0:n.getColDef(),column:n})})),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip(),this.addInIcon("filterActive")}setupTooltip(){if(!this.showingColumn)return;const e=()=>{var e;null===(e=this.tooltipFeature)||void 0===e||e.setTooltipAndRefresh(this.columnGroup.getColDef().headerTooltip)};e(),this.addManagedEventListeners({newColumnsLoaded:e})}addCssClassToTitleBar(e){this.filterGroupComp.addCssClassToTitleBar(e)}onPanelHidden(){for(const e of this.childFilterComps)e.onPanelHidden()}isColumnGroup(){return(0,s.b6I)(this.columnGroup)}isExpanded(){return this.filterGroupComp.isExpanded()}getChildren(){return this.childFilterComps}getFilterGroupName(){var e;return null!==(e=this.filterGroupName)&&void 0!==e?e:""}getFilterGroupId(){return this.columnGroup.getId()}hideGroupItem(e,t){this.filterGroupComp.hideItem(e,t)}hideGroup(e){this.setDisplayed(!e)}addInIcon(e){const t=(0,s.asF)(e,this.beans);if(t){t.classList.add("ag-filter-toolpanel-group-instance-header-icon");const e=this.getLocaleTextFunc();(0,s.PIC)(t,e("ariaFilterActive","Filter Active")),(0,s.lXX)(t,"img")}this.filterGroupComp.addTitleBarWidget(t)}forEachToolPanelFilterChild(e){for(const t of this.childFilterComps)t instanceof rd&&e(t)}addExpandCollapseListeners(){const e=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(e=>e.expand()),t=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(e=>e.collapse());this.addManagedListeners(this.filterGroupComp,{expanded:e,collapsed:t})}getColumns(){return(0,s.b6I)(this.columnGroup)?this.columnGroup.getLeafColumns():[this.columnGroup]}addFilterChangedListeners(){for(const e of this.getColumns())this.addManagedListeners(e,{filterChanged:()=>this.refreshFilterClass()});(0,s.b6I)(this.columnGroup)||this.addManagedEventListeners({filterOpened:this.onFilterOpened.bind(this)})}refreshFilterClass(){const e=this.getColumns();this.filterGroupComp.toggleCss("ag-has-filter",e.some(e=>e.isFilterActive()))}onFilterOpened(e){"COLUMN_MENU"===e.source&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()}expand(){this.filterGroupComp.toggleGroupExpand(!0)}collapse(){this.filterGroupComp.toggleGroupExpand(!1)}setGroupTitle(){const e=this.columnGroup,t=(0,s.b6I)(e)?this.getColumnGroupName(e):this.getColumnName(e);this.filterGroupName=t,this.filterGroupComp.setTitle(t||"")}getColumnGroupName(e){return this.beans.colNames.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")}getColumnName(e){return this.beans.colNames.getDisplayNameForColumn(e,"filterToolPanel",!1)}destroyFilters(){this.childFilterComps=this.destroyBeans(this.childFilterComps),(0,s.fDi)(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}},ld={selector:"AG-FILTERS-TOOL-PANEL-LIST",component:class extends s.uAl{constructor(){super({tag:"div",cls:"ag-filter-list-panel"}),this.initialised=!1,this.hasLoadedInitialState=!1,this.isInitialState=!1,this.filterGroupComps=[],this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending=!1}wireBeans(e){this.colModel=e.colModel}init(e){this.initialised=!0;const t=(0,s.AuN)(this.gos,{suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});(0,s.WY6)(t,e),this.params=t,t.suppressSyncLayoutWithGrid||this.addManagedEventListeners({columnMoved:()=>this.onColumnsChanged()}),this.addManagedEventListeners({newColumnsLoaded:()=>this.onColumnsChanged(),toolPanelVisibleChanged:e=>{"filters"!==e.key||e.visible||this.onPanelHidden()},dragStarted:()=>{this.suppressOnColumnsChanged=!0},dragStopped:()=>{this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending&&(this.onColumnsChangedPending=!1,this.onColumnsChanged())}}),this.colModel.ready&&this.onColumnsChanged()}onColumnsChanged(){if(this.suppressOnColumnsChanged)return void(this.onColumnsChangedPending=!0);const e=this.colModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()}syncFilterLayout(){ds(this.colModel,this.setFiltersLayout.bind(this)),this.refreshAriaLabel()}buildTreeFromProvidedColumnDefs(){const e=this.colModel.getColDefColTree();this.recreateFilters(e)}setFiltersLayout(e){const t=ls(this.colModel,e);this.recreateFilters(t)}recreateFilters(e){const t=(0,s.UlD)(this.beans);this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const i=this.getExpansionState();this.destroyFilters();const o=this.recursivelyAddComps(e,0,i);this.filterGroupComps=o;const n=o.length;if(n){for(const e of o)this.appendChild(e);this.setFirstAndLastVisible(0,n-1)}const r=this.searchFilterText;(0,s.Qmv)(r)&&this.searchFilters(r),this.fireExpandedEvent(),this.getGui().contains(t)&&t.focus(),this.isInitialState=!1,this.refreshAriaLabel()}recursivelyAddComps(e,t,i){return e.map(e=>{var o,n;if((0,s.b6I)(e))return null!==(o=null===(n=this.recursivelyAddFilterGroupComps(e,t,i))||void 0===n?void 0:n.flatMap(e=>e))&&void 0!==o?o:[];const r=e;if(!this.shouldDisplayFilter(r))return[];const a=new rd(0===t,()=>this.onFilterExpanded());if(this.createBean(a),a.setColumn(r),i.get(r.getId())&&a.expand(),t>0)return a;const l=this.createBean(new ad(r,[a],this.onGroupExpanded.bind(this),t,!0));return l.addCssClassToTitleBar("ag-filter-toolpanel-header"),i.get(l.getFilterGroupId())||l.collapse(),l}).flatMap(e=>e)}refreshAriaLabel(){const e=this.getLocaleTextFunc(),t=e("ariaFilterPanelList","Filter List"),i=e("filters","Filters"),o=this.getGui().querySelectorAll("".concat(".ag-filter-toolpanel-group-item",":not(").concat(".ag-filter-toolpanel-group-wrapper",", ").concat(".ag-hidden",")")).length;(0,s.PIC)(this.getAriaElement(),"".concat(t," ").concat(o," ").concat(i))}recursivelyAddFilterGroupComps(e,t,i){if(!this.filtersExistInChildren(e.getChildren()))return;const o=e.getColGroupDef();if(null!==o&&void 0!==o&&o.suppressFiltersToolPanel)return[];const n=e.isPadding()?t:t+1,s=this.recursivelyAddComps(e.getChildren(),n,i).flatMap(e=>e);if(e.isPadding())return s;const r=new ad(e,s,this.onGroupExpanded.bind(this),t,!1);this.createBean(r),r.addCssClassToTitleBar("ag-filter-toolpanel-header");const a=i.get(r.getFilterGroupId());return(this.isInitialState&&!a||!1===a)&&r.collapse(),[r]}filtersExistInChildren(e){return e.some(e=>(0,s.b6I)(e)?this.filtersExistInChildren(e.getChildren()):this.shouldDisplayFilter(e))}shouldDisplayFilter(e){var t;const i=null===(t=e.getColDef())||void 0===t?void 0:t.suppressFiltersToolPanel;return e.isFilterAllowed()&&!i}getExpansionState(){const e=new Map;if(this.isInitialState){const{expandedColIds:t,expandedGroupIds:i}=this.params.initialState;for(const o of t)e.set(o,!0);for(const o of i)e.set(o,!0);return e}const t=i=>{e.set(i.getFilterGroupId(),i.isExpanded());for(const o of i.getChildren())o instanceof ad?t(o):e.set(o.getColumn().getId(),o.isExpanded())};return this.filterGroupComps.forEach(t),e}refresh(){}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}expandFilterGroups(e,t){const i=[],o=n=>{const s=n.getFilterGroupId();(!t||t.includes(s))&&(e&&n.isColumnGroup()?n.expand():n.collapse(),i.push(s));for(const e of n.getChildren())e instanceof ad&&o(e)};if(this.filterGroupComps.forEach(o),this.onGroupExpanded(),t){const e=t.filter(e=>i.indexOf(e)<0);e.length>0&&(0,s.ujB)(166,{unrecognisedGroupIds:e})}}expandFilters(e,t){const i=[],o=n=>{if(n instanceof ad){let t=!1;for(const i of n.getChildren()){o(i)&&(e?(n.expand(),t=!0):n.isColumnGroup()||n.collapse())}return t}const s=n.getColumn().getColId(),r=!t||t.includes(s);return r&&(e?n.expand():n.collapse(),i.push(s)),r};if(this.filterGroupComps.forEach(o),this.onGroupExpanded(),t){const e=t.filter(e=>i.indexOf(e)<0);e.length>0&&(0,s.ujB)(167,{unrecognisedColIds:e})}}onGroupExpanded(){this.fireExpandedEvent()}onFilterExpanded(){this.dispatchLocalEvent({type:"filterExpanded"})}fireExpandedEvent(){let e=0,t=0;const i=o=>{if(o.isColumnGroup()){o.isExpanded()?e++:t++;for(const e of o.getChildren())e instanceof ad&&i(e)}};let o;this.filterGroupComps.forEach(i),o=e>0&&t>0?2:t>0?1:0,this.dispatchLocalEvent({type:"groupExpanded",state:o})}performFilterSearch(e){this.searchFilterText=(0,s.Qmv)(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)}searchFilters(e){const t=t=>!(0,s.Qmv)(e)||-1!==t.toLowerCase().indexOf(e),i=(e,o)=>{if(!(e instanceof ad))return t(e.getColumnFilterName()||"");const n=e.getChildren(),s=t(e.getFilterGroupName()),r=o||s;if(r){e.hideGroup(!1);for(let t=0;t<n.length;t++)i(n[t],r),e.hideGroupItem(!1,t);return!0}let a=!1;return n.forEach((t,n)=>{const s=i(t,o);e.hideGroupItem(!s,n),s&&(a=!0)}),e.hideGroup(!a),a};let o,n;this.filterGroupComps.forEach((e,t)=>{var s;i(e,!1);const r=null===(s=e.getGui())||void 0===s?void 0:s.classList.contains("ag-hidden");void 0===o?r||(o=t,n=t):r||n===t||(n=t)}),this.setFirstAndLastVisible(o,n),this.refreshAriaLabel()}setFirstAndLastVisible(e,t){this.filterGroupComps.forEach((i,o)=>{i.removeCss("ag-first-group-visible"),i.removeCss("ag-last-group-visible"),o===e&&i.addCss("ag-first-group-visible"),o===t&&i.addCss("ag-last-group-visible")})}onPanelHidden(){for(const e of this.filterGroupComps)e.onPanelHidden()}getExpandedFiltersAndGroups(){const e=[],t=new Set,i=o=>{if(o instanceof ad){for(const e of o.getChildren())i(e);const n=o.getFilterGroupId();o.isExpanded()&&!t.has(n)&&e.push(n)}else o.isExpanded()&&t.add(o.getColumn().getColId())};return this.filterGroupComps.forEach(i),{expandedGroupIds:e,expandedColIds:Array.from(t)}}destroyFilters(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),(0,s.fDi)(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}}},dd={tag:"div",cls:"ag-filter-toolpanel",children:[{tag:"ag-filters-tool-panel-header",ref:"filtersToolPanelHeaderPanel"},{tag:"ag-filters-tool-panel-list",ref:"filtersToolPanelListPanel"}]},cd=class extends s.uAl{constructor(){super(dd,[nd,ld]),this.filtersToolPanelHeaderPanel=s.dRA,this.filtersToolPanelListPanel=s.dRA,this.initialised=!1,this.listenerDestroyFuncs=[],this.registerCSS(".ag-filter-toolpanel{flex:1 1 0px;min-width:0}.ag-filter-toolpanel-header,.ag-filter-toolpanel-search{align-items:center;color:var(--ag-header-text-color);display:flex;font-weight:var(--ag-header-font-weight);padding:0 var(--ag-spacing);>*{align-items:center;display:flex}}.ag-filter-toolpanel-header{padding-bottom:var(--ag-spacing);padding-top:var(--ag-spacing);position:relative;&:focus-visible{border-radius:var(--ag-border-radius);box-shadow:inset var(--ag-focus-shadow)}}:where(.ag-ltr) .ag-filter-toolpanel-group-instance-header-icon,:where(.ag-ltr) .ag-filter-toolpanel-instance-header-icon{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-toolpanel-group-instance-header-icon,:where(.ag-rtl) .ag-filter-toolpanel-instance-header-icon{margin-right:var(--ag-spacing)}.ag-filter-toolpanel-search{min-height:var(--ag-header-height);padding-bottom:var(--ag-spacing);padding-top:var(--ag-widget-container-vertical-padding)}:where(.ag-filter-toolpanel-group:not(.ag-has-filter)>.ag-group-title-bar) .ag-filter-toolpanel-group-instance-header-icon{display:none}.ag-filter-toolpanel-search-input{flex-grow:1;height:calc(var(--ag-spacing)*4)}:where(.ag-ltr) .ag-filter-toolpanel-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-toolpanel-group-title-bar-icon{margin-left:var(--ag-spacing)}.ag-filter-toolpanel-expand{cursor:pointer}:where(.ag-ltr) .ag-filter-toolpanel-expand{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-toolpanel-expand{margin-left:var(--ag-spacing)}:where(.ag-ltr) .ag-filter-toolpanel-group-title-bar,:where(.ag-ltr) .ag-filter-toolpanel-instance-header{padding-left:calc(var(--ag-spacing) + var(--ag-filter-tool-panel-group-indent)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-filter-toolpanel-group-title-bar,:where(.ag-rtl) .ag-filter-toolpanel-instance-header{padding-right:calc(var(--ag-spacing) + var(--ag-filter-tool-panel-group-indent)*var(--ag-indentation-level))}:where(.ag-ltr) .ag-filter-toolpanel-instance-body{margin-left:var(--ag-filter-tool-panel-group-indent)}:where(.ag-rtl) .ag-filter-toolpanel-instance-body{margin-right:var(--ag-filter-tool-panel-group-indent)}.ag-filter-toolpanel-instance-filter{background-color:var(--ag-chrome-background-color)}.ag-filter-toolpanel-group-level-0{border-top:none}")}init(e){if(this.initialised){for(const e of this.listenerDestroyFuncs)e();this.listenerDestroyFuncs=[]}this.initialised=!0;const t=(0,n.A)((0,n.A)({},{suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1}),e);this.params=t;const{filtersToolPanelHeaderPanel:i,filtersToolPanelListPanel:o}=this;i.init(t),o.init(t);const{suppressExpandAll:s,suppressFilterSearch:r}=t;s&&r&&i.setDisplayed(!1),this.listenerDestroyFuncs.push(...this.addManagedListeners(i,{expandAll:()=>o.expandFilterGroups(!0),collapseAll:()=>o.expandFilterGroups(!1),searchChanged:e=>o.performFilterSearch(e.searchText)}),...this.addManagedListeners(o,{filterExpanded:t.onStateUpdated,groupExpanded:e=>{i.setExpandState(e.state),t.onStateUpdated()}}))}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}setFilterLayout(e){this.filtersToolPanelListPanel.setFiltersLayout(e)}expandFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)}collapseFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)}expandFilters(e){this.filtersToolPanelListPanel.expandFilters(!0,e)}collapseFilters(e){this.filtersToolPanelListPanel.expandFilters(!1,e)}syncLayoutWithGrid(){this.filtersToolPanelListPanel.syncFilterLayout()}refresh(e){return this.init(e),!0}getState(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()}},ud=class extends s.XQb{constructor(){super(...arguments),this.beanName="filterPanelSvc",this.states=new Map,this.orderedStates=[],this.initialStateApplied=!1,this.columnsLoaded=!1,this.isActive=!1}postConstruct(){if(!this.gos.get("enableFilterHandlers"))return;const e=this.updateFilterStates.bind(this),t=()=>this.dispatchStatesUpdates(void 0,!0),i=this.onFilterDestroyed.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>{this.columnsLoaded=!0,this.initialStateApplied||this.applyState(),e()},dataTypesInferred:e,filterChanged:e,filterDestroyed:i,filterHandlerDestroyed:i,filterOpened:t,filterClosed:t}),this.addManagedListeners(this.beans.colFilter,{filterStateChanged:e=>{var i,o;let{column:n}=e;null===(i=this.states.get(n.getColId()))||void 0===i||null===(o=i.refresh)||void 0===o||o.call(i),t()}})}updateParams(e,t){var i,o;this.params=e;let n=!1;if(t&&(this.currState=t,this.columnsLoaded)){var s;const e=new Set(null===(s=t.filters)||void 0===s?void 0:s.map(e=>e.colId));for(const t of this.getIds())e.has(t)||this.remove(t);this.clear(),this.applyState(),this.updateFilterStates(),n=!0}n||this.dispatchStatesUpdates(),null===(i=this.beans.colFilter)||void 0===i||i.setGlobalButtons(!(null===(o=e.buttons)||void 0===o||!o.length))}getIds(){return Array.from(this.states.keys())}getAvailable(){const e=this.beans,t=[];for(const o of null!==(i=e.colModel.getColDefCols())&&void 0!==i?i:[]){var i;const n=o.getColId();!o.isFilterAllowed()||o.colDef.suppressFiltersToolPanel||this.states.get(n)||t.push({id:n,name:hd(e,o)})}return t}add(e){this.createFilter(e,!0),this.dispatchStatesUpdates(e)}remove(e){var t;const{states:i,orderedStates:o,beans:{colFilter:n,selectableFilter:s}}=this,r=i.get(e);if(!r)return;null===(t=r.destroy)||void 0===t||t.call(r);const a=r.state.column;i.delete(e),null===s||void 0===s||s.clearActive(e),null===n||void 0===n||n.destroyFilter(a),this.eventSvc.dispatchEvent({type:"filterSwitched",column:a});const l=o.indexOf(e);o.splice(l,1);const d=o[l];this.dispatchStatesUpdates(d)}getState(e){var t;return null===(t=this.states.get(e))||void 0===t?void 0:t.state}updateFilterState(e,t,i,o){const n=this.getState(e);n&&(n[t]=i,o||this.dispatchLocalEvent({type:"filterPanelStateChanged",id:e,state:n}))}expand(e,t){var i;const o=this.states.get(e);if(!o)return;null===(i=o.destroy)||void 0===i||i.call(o);const{handler:n,state:{column:s}}=o,r=this.createFilterState(s,n,t);this.states.set(e,r),this.dispatchLocalEvent({type:"filterPanelStateChanged",id:e,state:r.state})}updateType(e,t){const i=this.states.get(e);if(!i)return;const o=i.state;if(!1===o.expanded)return;const n=o.filterDefs;if(!n)return;const{colFilter:s,selectableFilter:r}=this.beans;null===r||void 0===r||r.setActive(e,n,t),s.filterParamsChanged(e,"columnFilter");const a=o.column;this.eventSvc.dispatchEvent({type:"filterSwitched",column:a});const l=this.states.get(e);if(!l)return;const d=l.state;this.dispatchLocalEvent({type:"filterPanelStateChanged",id:e,state:d})}getActions(){var e,t;const i=null===(e=this.params)||void 0===e?void 0:e.buttons;if(null===i||void 0===i||!i.length)return;return{actions:i,canApply:!(null===(t=this.beans.colFilter)||void 0===t||!t.canApplyAll())}}doAction(e){var t;null===(t=this.beans.colFilter)||void 0===t||t.updateAllModels(e)}getGridState(){const e=[];return this.states.forEach((t,i)=>{e.push({colId:i,expanded:t.state.expanded})}),{filters:e}}createFilter(e,t){const i=this.createFilterStateWrapper(e,t);i&&(this.states.set(e,i),this.orderedStates.push(e))}createFilterStateWrapper(e,t){const{colModel:i,colFilter:o}=this.beans,n=i.getColDefCol(e);if(n&&!n.colDef.suppressFiltersToolPanel){const e=o.getHandler(n,!0);if(e)return this.createFilterState(n,e,t)}}updateFilterStates(){if(!this.params)return;const e=this.beans.colFilter.getModel(),t=new Set;for(const o of Object.keys(e)){const e=this.states.get(o);var i;if(e)null===(i=e.refresh)||void 0===i||i.call(e);else this.createFilter(o);t.add(o)}this.states.forEach((e,i)=>{var o;t.has(i)||(null===(o=e.refresh)||void 0===o||o.call(e))}),this.dispatchStatesUpdates()}createFilterState(e,t,i){const o=this.beans,{colFilter:n,selectableFilter:r}=o,a=hd(o,e),l=e.getColId(),d=()=>{var e;return!(null===(e=this.params)||void 0===e||!e.buttons)&&n.hasUnappliedModel(l)},c=d();if(i){var u;const o=e.colDef,{filterDefs:n,activeFilterDef:h}=null!==(u=null===r||void 0===r?void 0:r.getDefs(e,o))&&void 0!==u?u:{},p=this.createBean(new s.QdF(e,"TOOLBAR",!0));return{state:{column:e,name:a,isEditing:c,expanded:i,detail:p.getGui(),activeFilterDef:h,filterDefs:n,afterGuiAttached:p.afterGuiAttached.bind(p),afterGuiDetached:p.afterGuiDetached.bind(p)},handler:t,refresh:()=>{this.updateFilterState(l,"isEditing",d())},destroy:()=>this.destroyBean(p)}}{const i=e.getColId(),o=()=>{var e,o;return null!==(e=null===(o=t.getModelAsString)||void 0===o?void 0:o.call(t,n.getStateForColumn(i).model,"filterToolPanel"))&&void 0!==e?e:""};return{state:{column:e,name:a,isEditing:c,expanded:!1,summary:o()},handler:t,refresh:()=>{this.updateFilterState(i,"isEditing",d(),!0),this.updateFilterState(i,"summary",o())}}}}onFilterDestroyed(e){let{column:t,source:i}=e;const{colFilter:o,filterManager:n}=this.beans;if(null===o||void 0===o||!o.isAlive()||null===n||void 0===n||!n.isFilterAllowed(t))return;const s=this.states,r=t.getColId(),a=s.get(r);if(a){const e=this.createFilterStateWrapper(r,a.state.expanded);var l;if(e)null===(l=a.destroy)||void 0===l||l.call(a),s.set(r,e);else this.remove(r);"api"===i&&this.dispatchStatesUpdates()}}dispatchStatesUpdates(e,t){this.dispatchLocalEvent({type:"filterPanelStatesChanged",activeId:e,action:t})}applyState(){if(this.params&&this.columnsLoaded){this.initialStateApplied=!0;for(const{colId:i,expanded:o}of null!==(e=null===(t=this.currState)||void 0===t?void 0:t.filters)&&void 0!==e?e:[]){var e,t;this.createFilter(i,o)}}}destroy(){this.clear(),this.params=void 0,this.currState=void 0,super.destroy()}clear(){const{states:e,orderedStates:t}=this;e.forEach(e=>{var t;return null===(t=e.destroy)||void 0===t?void 0:t.call(e)}),e.clear(),t.length=0}};function hd(e,t){var i;return null!==(i=e.colNames.getDisplayNameForColumn(t,"filterToolPanel"))&&void 0!==i?i:t.getColId()}var pd={addFilterCard:"Add Filter",ariaLabelAddFilterField:"Add Filter Field",ariaLabelFilterCardDelete:"Delete Filter",ariaLabelFilterCardHasEdits:"Has Edits",agTextColumnFilterDisplayName:"Simple Filter",agNumberColumnFilterDisplayName:"Simple Filter",agDateColumnFilterDisplayName:"Simple Filter",agSetColumnFilterDisplayName:"Selection Filter",agMultiColumnFilterDisplayName:"Combo Filter",addFilterPlaceholder:"Search columns..."};function gd(e,t){return(0,s.O65)(e,pd,t)}var vd=class extends s.XQb{constructor(){super(...arguments),this.beanName="selectableFilter",this.selectedFilters=new Map,this.valueGetters=new Map}postConstruct(){var e,t;const{gos:i,selectedFilters:o}=this,n=null!==(e=null===(t=i.get("initialState"))||void 0===t||null===(t=t.filter)||void 0===t?void 0:t.selectableFilters)&&void 0!==e?e:{};for(const s of Object.keys(n))o.set(s,n[s])}getFilterValueGetter(e){return this.valueGetters.get(e)}isSelectable(e){return"agSelectableColumnFilter"===e.filter}getFilterDef(e,t){return this.getDefs(e,t).activeFilterDef}getDefs(e,t,i){var o,r;if(!this.isSelectable(t))return;const a=this.beans,{gos:l,dataTypeSvc:d,colFilter:c}=a;let u=t.filterParams;const h=e.colDef;"function"===typeof u&&(u=u((0,s.AuN)(l,{column:e,colDef:h})));const p=null===d||void 0===d?void 0:d.getBaseDataType(e),g=null===d||void 0===d?void 0:d.getDataTypeDefinition(e),v=null===d||void 0===d?void 0:d.getFormatValue(p),{filters:m,defaultFilterParams:f,defaultFilterIndex:C}=null!==u&&void 0!==u?u:{},w=(null!==m&&void 0!==m?m:this.getDefaultFilters(e)).map(t=>{const{filter:i,filterParams:o,name:r,filterValueGetter:l=h.filterValueGetter}=t,d=f?(0,n.A)((0,n.A)({},f),o):o;let u;var m;g&&v&&(u="agMultiColumnFilter"===i?null===(m=a.multiFilter)||void 0===m?void 0:m.getParamsForDataType(d,l,g,v):(0,s.hMi)(i,d,l,g,v,a,this.getLocaleTextFunc()));let C;if(!r){let t=i;"boolean"===typeof i&&(t=null===c||void 0===c?void 0:c.getDefaultFilterFromDataType(()=>p)),"string"===typeof t?C=gd(this,"".concat(t,"DisplayName")):((0,s.ujB)(280,{colId:e.getColId()}),C="")}return f||u||C?(0,n.A)((0,n.A)({},t),{},{filterParams:d,name:null!==C&&void 0!==C?C:r},u):t});let b=null!==(o=null!==(r=null!==i&&void 0!==i?i:this.selectedFilters.get(e.getColId()))&&void 0!==r?r:C)&&void 0!==o?o:!m&&(0,s.ck3)(l)?1:0;b>=w.length&&(b=0);return{filterDefs:w,activeFilterDef:w[b]}}setActive(e,t,i,o){const n=t.indexOf(i);if(n<0)return;const{selectedFilters:s,valueGetters:r}=this;s.set(e,n);const a=i.filterValueGetter;a?r.set(e,a):r.delete(e),o||this.onChange()}clearActive(e){const{selectedFilters:t,valueGetters:i}=this;t.delete(e),i.delete(e),this.onChange()}getState(){return Object.fromEntries(this.selectedFilters)}setState(e){this.clearAll();const t=this.beans.colModel;for(const i of Object.keys(e)){const o=t.getColDefCol(i);if(o){const t=this.getDefs(o,o.colDef,e[i]);t&&this.setActive(i,t.filterDefs,t.activeFilterDef,!0)}}}destroy(){this.clearAll(),super.destroy()}clearAll(){const{selectedFilters:e,valueGetters:t}=this;e.clear(),t.clear()}onChange(){this.dispatchLocalEvent({type:"selectedFilterChanged"})}getDefaultFilters(e){const t=this.beans,{gos:i,dataTypeSvc:o}=t,n=i.isModuleRegistered("MultiFilter"),r=null===o||void 0===o?void 0:o.getBaseDataType(e);return[{filter:(0,s.LCl)(r,!1)},{filter:"agSetColumnFilter"},...n?[{filter:"agMultiColumnFilter"}]:[]]}},md={tag:"div",cls:"ag-filter-card ag-filter-card-add"},fd=class extends s.uAl{constructor(e){super(md),this.options=new Map,this.setOptions(e)}postConstruct(){this.showButton()}refresh(e){this.setOptions(e);const{eSelect:t,options:i}=this;t&&t.setValueList({valueList:Array.from(i.keys()),refresh:!0})}showButton(){(0,s.fDi)(this.getGui()),this.destroySelect();const e=(0,s.UCw)({tag:"button",cls:"ag-button ag-standard-button ag-filter-add-button",children:[{tag:"span",children:[()=>(0,s.asF)("filterAdd",this.beans)]},{tag:"span",cls:"ag-filter-add-button-label",children:gd(this,"addFilterCard")}]});this.activateTabIndex([e]);const t=this.showSelect.bind(this);e.addEventListener("click",t),this.removeButton=()=>{e.removeEventListener("click",t)},this.appendChild(e),e.focus()}showSelect(){(0,s.fDi)(this.getGui()),this.destroyButton();const e="ariaLabelAddFilterField",t={className:"ag-filter-add-select",pickerType:"virtual-list",pickerAriaLabelKey:e,pickerAriaLabelValue:gd(this,e),placeholder:gd(this,"addFilterPlaceholder"),value:"",valueList:Array.from(this.options.keys()),searchType:"matchAny",allowTyping:!0,filterList:!0,highlightMatch:!0,valueFormatter:e=>this.options.get(e)},i=this.createManagedBean(new Po(t));this.eSelect=i,this.appendChild(i.getGui()),i.showPicker(),i.getFocusableElement().focus(),i.addManagedListeners(i,{fieldPickerValueSelected:e=>{let{value:t}=e;return this.dispatchLocalEvent({type:"filterSelected",id:t})},pickerHidden:()=>{this.showButton()}})}setOptions(e){const t=this.options;t.clear();for(const{id:i,name:o}of e)t.set(i,o)}destroySelect(){this.eSelect=this.destroyBean(this.eSelect)}destroyButton(){var e;this.removeButton=null===(e=this.removeButton)||void 0===e?void 0:e.call(this)}destroy(){this.destroySelect(),this.destroyButton(),super.destroy()}},Cd={tag:"div",cls:"ag-filter-card-body",children:[{tag:"ag-select",cls:"ag-filter-type-select",ref:"eFilterType"}]},wd=class extends s.uAl{constructor(){super(...arguments),this.eFilterType=s.dRA}postConstruct(){const e={onValueChange:e=>this.dispatchLocalEvent({type:"filterTypeChanged",filterDef:e})};this.setTemplate(Cd,[s._gz],{eFilterType:e}),this.eFilterType.setDisplayed(!1)}refresh(e){const t=this.state;this.state=e;const{activeFilterDef:i,filterDefs:o,detail:n,afterGuiAttached:r,afterGuiDetached:a}=e,{activeFilterDef:l,filterDefs:d,detail:c}=null!==t&&void 0!==t?t:{},u=this.eFilterType;if(o!==d){u.clearOptions();const e=null===o||void 0===o?void 0:o.map(e=>({value:e,text:e.name}));e&&u.clearOptions().addOptions(e).setValue(i,!0),u.setDisplayed(!!e)}else i!==l&&u.setValue(i,!0);n!==c&&(c&&((0,s.MwW)(c),a()),this.appendChild(n),r({container:"newFiltersToolPanel",suppressFocus:!0}))}},bd={tag:"div",cls:"ag-filter-card-summary",attrs:{"aria-hidden":"true"}},yd=class extends s.uAl{constructor(){super(bd)}refresh(e){this.getGui().textContent=e.summary}},Sd={tag:"div",cls:"ag-filter-card",children:[{tag:"div",cls:"ag-filter-card-header",role:"presentation",children:[{tag:"div",cls:"ag-filter-card-heading",role:"heading",attrs:{"aria-level":"2"},children:[{tag:"button",ref:"eExpand",cls:"ag-button ag-filter-card-expand",children:[{tag:"span",ref:"eTitle",cls:"ag-filter-card-title"},{tag:"span",ref:"eEditing",cls:"ag-filter-card-editing-icon"},{tag:"span",ref:"eExpandIcon",cls:"ag-filter-card-expand-icon"}]}]},{tag:"button",ref:"eDelete",cls:"ag-button ag-filter-card-delete",children:[{tag:"span",ref:"eDeleteIcon",cls:"ag-filter-card-delete-icon"}]}]}]},xd=class extends s.uAl{constructor(e){super(Sd),this.id=e,this.eTitle=s.dRA,this.eExpand=s.dRA,this.eDelete=s.dRA,this.eExpandIcon=s.dRA,this.eDeleteIcon=s.dRA,this.eEditing=s.dRA}postConstruct(){const{beans:e,eDelete:t,eExpand:i,eDeleteIcon:o,eEditing:n,id:r}=this,a=e.filterPanelSvc;(0,s.PIC)(t,gd(this,"ariaLabelFilterCardDelete")),o.appendChild((0,s.fyk)("close",e,null)),this.activateTabIndex([i,t]),this.addManagedElementListeners(i,{click:()=>{var e;return a.expand(r,!(null!==(e=this.state)&&void 0!==e&&e.expanded))}}),this.addManagedElementListeners(t,{click:()=>a.remove(r)}),this.addManagedEventListeners({filterOpened:this.onFilterOpened.bind(this)}),n.appendChild((0,s.fyk)("filterCardEditing",e,null))}refresh(e){const{eExpand:t,eEditing:i,state:o,beans:n}=this;this.state=e;const{name:r,expanded:a,isEditing:l}=e;this.eTitle.textContent=r,(0,s.nl0)(i,l),o&&a===o.expanded||this.toggleExpand(e);let d=a?null:"".concat(r," ").concat(e.summary);l&&(d="".concat(null!==d&&void 0!==d?d:r,". ").concat(gd(this,"ariaLabelFilterCardHasEdits"))),(0,s.PIC)(t,d);const c=e=>{if(e)return(0,s.MwW)(e.getGui()),this.destroyBean(e)},u=(t,i,o)=>(t||(t=this.createBean(new i),null===o||void 0===o||o(t),this.appendChild(t.getGui())),t.refresh(e),t);if(e.expanded){this.summaryComp=c(this.summaryComp);const e=u(this.detailComp,wd,e=>e.addManagedListeners(e,{filterTypeChanged:e=>{let{filterDef:t}=e;return n.filterPanelSvc.updateType(this.id,t)}}));this.detailComp=e;const i="ag-".concat(this.getCompId(),"-filter");e.getGui().id=i,(0,s.xo4)(t,i)}else this.detailComp=c(this.detailComp),this.summaryComp=u(this.summaryComp,yd),(0,s.xo4)(t,null)}toggleExpand(e){const t=!!e.expanded,{eExpandIcon:i,eExpand:o,beans:n}=this;(0,s.fDi)(i),i.appendChild((0,s.fyk)(t?"filterCardCollapse":"filterCardExpand",n,null)),(0,s.oAJ)(o,t)}onFilterOpened(e){const{state:t,beans:i,id:o}=this;"COLUMN_MENU"===e.source&&e.column===(null===t||void 0===t?void 0:t.column)&&null!==t&&void 0!==t&&t.expanded&&i.filterPanelSvc.expand(o,!1)}destroy(){this.detailComp=this.destroyBean(this.detailComp),this.summaryComp=this.destroyBean(this.summaryComp),this.state=void 0,super.destroy()}};var Fd={tag:"div",cls:"ag-filter-panel",children:[{tag:"div",cls:"ag-filter-panel-container",ref:"eContainer"}]},Rd=class extends s.uAl{constructor(){super(Fd),this.eContainer=s.dRA,this.filters=new Map}refresh(e){var t,i;if(function(e){return!(null===e||void 0===e||!e.action)}(e))return void this.refreshActions();if(function(e){return!(null===e||void 0===e||!e.id)}(e))return void(null===(i=this.filters.get(e.id))||void 0===i||i.refresh(e.state));const{eContainer:o,filters:n,beans:r}=this,a=r.filterPanelSvc,l=a.getIds(),d=new Map,c=!(0,s.sNX)(r),u=c?(0,s.UlD)(r):void 0,h=c&&o.contains(u),p=[],g=[];for(const s of l){var v;const e=null!==(v=n.get(s))&&void 0!==v?v:this.createBean(new xd(s));e.refresh(a.getState(s)),d.set(s,e),g.push(e.getGui())}this.filters=d;const m=[];n.forEach((e,t)=>{p.push(e.getGui()),d.has(t)||m.push(e)});let f=this.addFilterComp;f&&p.push(f.getGui());const C=a.getAvailable();C.length?(f||(f=this.createBean(new fd(C)),f.addManagedListeners(f,{filterSelected:e=>{let{id:t}=e;return a.add(t)}})),f.refresh(C),g.push(f.getGui())):f=this.destroyBean(f),this.addFilterComp=f,function(e,t,i){let o=0;for(let n=0;n<i.length;n++){const e=i[n];e===t[o]?o++:(0,s.MwW)(e)}for(;o<t.length;)e.appendChild(t[o++])}(o,g,p);for(const s of m)this.destroyBean(s);const w=null===e||void 0===e?void 0:e.activeId,b=w&&(null===(t=d.get(w))||void 0===t?void 0:t.getGui());if(b)(0,s.YtT)(b);else if(h&&(0,s.sNX)(r)){var y;(0,s.YtT)(null!==(y=g[g.length-1])&&void 0!==y?y:o)}this.refreshActions()}refreshActions(){var e;const t=this.beans.filterPanelSvc,{actions:i,canApply:o}=null!==(e=t.getActions())&&void 0!==e?e:{};let n=this.buttonComp;if(null!==i&&void 0!==i&&i.length){const e=i.map(e=>({type:e,label:(0,s.PLD)(this,"".concat(e,"Filter"))}));if(!n){n=this.createBean(new s.Cq2({className:"ag-filter-panel-buttons"})),this.getGui().appendChild(n.getGui());const e={};for(const i of["apply","clear","reset","cancel"])e[i]=()=>t.doAction(i);n.addManagedListeners(n,e)}n.updateButtons(e),n.updateValidity(!1!==o)}else n&&((0,s.MwW)(n.getGui()),n=this.destroyBean(n));this.buttonComp=n}destroy(){var e,t;null===(e=this.beans.filterPanelSvc)||void 0===e||null===(t=e.clear)||void 0===t||t.call(e),this.addFilterComp=this.destroyBean(this.addFilterComp),this.buttonComp=this.destroyBean(this.buttonComp);const i=this.filters;i.forEach(e=>this.destroyBean(e)),i.clear(),super.destroy()}},Pd=class extends s.uAl{constructor(){super(),this.registerCSS(".ag-filter-panel{display:flex;flex-direction:column;width:100%;:where(.ag-standard-button){transition:background-color .25s ease-in-out,color .25s ease-in-out}}.ag-filter-panel .ag-simple-filter-body-wrapper{padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) 0}.ag-filter-panel .ag-mini-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-vertical-spacing)}.ag-filter-panel-container{flex:1;overflow:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding) 0}.ag-filter-panel-container>:where(:not(:last-child)){margin-bottom:var(--ag-widget-container-vertical-padding)}.ag-filter-card{background-color:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius)}.ag-filter-card-header{align-items:center;display:flex;flex-direction:row;padding-top:var(--ag-widget-vertical-spacing)}:where(.ag-ltr) .ag-filter-card-header{&>:where(:not(:last-child)){padding-right:var(--ag-spacing)}}:where(.ag-rtl) .ag-filter-card-header{&>:where(:not(:last-child)){padding-left:var(--ag-spacing)}}.ag-filter-card-heading{flex:1;overflow:hidden;padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));padding-top:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing))}:where(.ag-ltr) .ag-filter-card-heading{padding-left:var(--ag-widget-horizontal-spacing)}:where(.ag-rtl) .ag-filter-card-heading{padding-right:var(--ag-widget-horizontal-spacing)}.ag-filter-card-expand{align-items:center;display:flex;flex-direction:row;width:100%}.ag-filter-card-title{font-weight:var(--ag-header-font-weight);overflow:hidden;text-overflow:ellipsis}.ag-filter-card-expand-icon{display:flex;flex:1;justify-content:end}.ag-filter-card-editing-icon{margin:0 var(--ag-spacing)}.ag-filter-card-delete-icon,.ag-filter-card-editing-icon,.ag-filter-card-expand-icon,.ag-filter-card-summary{color:var(--ag-filter-panel-card-subtle-color)}.ag-filter-card-delete-icon,.ag-filter-card-expand-icon{transition:color .25s ease-in-out}.ag-filter-card-delete-icon:hover,.ag-filter-card-expand-icon:hover,.ag-filter-card-heading:hover .ag-filter-card-expand-icon{color:var(--ag-filter-panel-card-subtle-hover-color)}.ag-filter-add-button,.ag-filter-card-delete,.ag-filter-card-expand{border-radius:var(--ag-button-border-radius)}.ag-filter-card-summary,.ag-filter-type-select{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-filter-card-delete{margin-right:var(--ag-widget-horizontal-spacing)}:where(.ag-rtl) .ag-filter-card-delete{margin-left:var(--ag-widget-horizontal-spacing)}.ag-filter-card-summary{margin-bottom:var(--ag-widget-container-vertical-padding)}.ag-filter-type-select{padding-top:var(--ag-widget-vertical-spacing)}.ag-filter-card-add{border:0;padding:0}.ag-filter-add-button{align-items:center;display:flex;flex-direction:row;line-height:1.5;width:100%}:where(.ag-ltr) .ag-filter-add-button-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) .ag-filter-add-button-label{margin-right:var(--ag-spacing)}.ag-filter-add-select{border:0;.ag-rich-select-value{border:0;padding:calc(((1.5*var(--ag-font-size) + 2*var(--ag-button-vertical-padding)) - var(--ag-input-height))/2) var(--ag-spacing)}}:where(.ag-ltr) .ag-filter-add-select{.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)!important}}:where(.ag-rtl) .ag-filter-add-select{.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)!important}}.ag-filter-panel-buttons{display:flex;flex-wrap:wrap;gap:var(--ag-widget-vertical-spacing) var(--ag-widget-horizontal-spacing);justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding) 0}.ag-filter-panel-buttons-button{line-height:1.5}.ag-filter-panel .ag-filter-panel-buttons-apply-button{background-color:var(--ag-filter-panel-apply-button-background-color);color:var(--ag-filter-panel-apply-button-color)}.ag-filter-panel>:where(:last-child){padding-bottom:var(--ag-widget-container-vertical-padding)}.ag-filter-panel .ag-set-filter-body-wrapper,.ag-filter-panel .ag-simple-filter-body-wrapper>:last-child{margin-bottom:var(--ag-widget-container-vertical-padding)}")}init(e){if(!this.gos.get("enableFilterHandlers"))return void(0,s.ujB)(282);const t=this.beans.filterPanelSvc;t.isActive=!0,this.addDestroyFunc(()=>{t.isActive=!1}),this.updateParams(e,e.initialState);const i=this.createManagedBean(new Rd);this.filterPanel=i;const o=t=>{i.refresh(t),e.onStateUpdated()};o(),this.addManagedListeners(t,{filterPanelStatesChanged:o,filterPanelStateChanged:o})}getGui(){var e;return null===(e=this.filterPanel)||void 0===e?void 0:e.getGui()}refresh(e){return this.updateParams(e,e.initialState),!0}updateParams(e,t){var i;null===(i=this.beans.filterPanelSvc)||void 0===i||i.updateParams(e,t)}getState(){var e,t;return null!==(e=null===(t=this.beans.filterPanelSvc)||void 0===t?void 0:t.getGridState())&&void 0!==e?e:{}}},Dd={moduleName:"FiltersToolPanel",version:ki,userComponents:{agFiltersToolPanel:cd},icons:{filtersToolPanel:"filter"},dependsOn:[Jn,Ii,s.Sxk]},Ed={moduleName:"NewFiltersToolPanel",version:ki,userComponents:{agNewFiltersToolPanel:Pd},beans:[ud,vd],icons:{filterAdd:"filter-add",filtersToolPanel:"filter",richSelectOpen:"small-down",richSelectRemove:"cancel",richSelectLoading:"loading",filterCardExpand:"chevron-down",filterCardCollapse:"chevron-up",filterCardEditing:"edit"},dependsOn:[Jn,Ii,s.Sxk]},Ad=class extends s.XQb{constructor(){super(...arguments),this.loadRowDataVersion=0}wireBeans(e){this.environment=e.environment}init(e,t){this.params=t,this.comp=e;null!=t.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.createDetailGrid(),this.loadRowData(),this.addManagedEventListeners({fullWidthRowFocused:this.onFullWidthRowFocused.bind(this)}))}onFullWidthRowFocused(e){const t=this.params,i={rowIndex:t.node.rowIndex,rowPinned:t.node.rowPinned},o={rowIndex:e.rowIndex,rowPinned:e.rowPinned};(0,s._wY)(i,o)&&(0,s.YtT)(this.comp.getGui(),e.fromBelow)}setAutoHeightClasses(){const e=this.gos.get("detailRowAutoHeight"),t=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",i=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height",o=this.comp;o.toggleCss(t,!0),o.toggleDetailGridCss(i,!0)}setupRefreshStrategy(){const e=this.params.refreshStrategy;"everything"==e||"nothing"==e||"rows"==e?this.refreshStrategy=e:(null!=e&&(0,s.ujB)(170,{providedStrategy:e}),this.refreshStrategy="rows")}createDetailGrid(){const{params:e,gos:t}=this;if((0,s.MWY)(e.detailGridOptions))return void(0,s.ujB)(171);const i=t.get("theme"),o=e.detailGridOptions.theme;o&&o!==i&&(0,s.ujB)(267);const r=(0,n.A)((0,n.A)({themeStyleContainer:this.environment.eStyleContainer},e.detailGridOptions),{},{theme:i});t.get("detailRowAutoHeight")&&(r.domLayout="autoHeight"),this.comp.setDetailGrid(r)}registerDetailWithMaster(e){const{params:t,beans:{selectionSvc:i,findSvc:o,expansionSvc:n}}=this,s=t.node.id,r=t.api,a={id:s,api:e},l=t.node;if(r.isDestroyed())return;r.addDetailGridInfo(s,a),l.detailGridInfo=a;const d=l.parent;function c(){d&&(null===i||void 0===i||i.refreshMasterNodeState(d))}function u(t){let{source:i}=t;return"expandAll"===i?e.expandAll():"collapseAll"===i?e.collapseAll():void 0}function h(o){let{node:n,source:s}=o;n!==d||"masterDetail"===s||e.isDestroyed()||null===i||void 0===i||i.setDetailSelectionState(d,t.detailGridOptions,e)}null===o||void 0===o||o.registerDetailGrid(l,e),e.addEventListener("firstDataRendered",()=>{if(e.isDestroyed()||r.isDestroyed())return;null===i||void 0===i||i.setDetailSelectionState(d,t.detailGridOptions,e),e.addEventListener("selectionChanged",c),r.addEventListener("rowSelected",h);const o="".concat("CsrmSsrmSharedApi","Module");e.isModuleRegistered(o)&&(r.addEventListener("expandOrCollapseAll",u),null===n||void 0===n||n.setDetailsExpansionState(e))}),this.addManagedListeners(d,{masterChanged:e=>{e.node.master||this.onDestroy(a)}}),this.addDestroyFunc(()=>this.onDestroy(a))}onDestroy(e){const{params:t}=this,i=t.node,o=t.api;i.detailGridInfo===e&&(o.isDestroyed()||o.removeDetailGridInfo(i.id),i.detailGridInfo=null)}loadRowData(){var e;this.loadRowDataVersion++;const t=this.loadRowDataVersion,i=this.params;if("serverSide"===(null===(e=i.detailGridOptions)||void 0===e?void 0:e.rowModelType)){var o;return void(null===(o=i.node.detailGridInfo)||void 0===o||null===(o=o.api)||void 0===o||o.refreshServerSide({purge:!0}))}const n=i.getDetailRowData;if(!n)return void(0,s.ujB)(172);n({node:i.node,data:i.node.data,successCallback:e=>{this.loadRowDataVersion===t&&this.comp.setRowData(e)},context:(0,s.AuN)(this.gos,{}).context})}refresh(){const e=!0;switch(this.refreshStrategy){case"nothing":return e;case"everything":return false}return this.loadRowData(),e}},Md=class{constructor(e){this.parentWrapper=e}wrap(e,t,i,o){return this.parentWrapper.wrap(e,t,i,o)}},Td={tag:"div",cls:"ag-details-row"},kd={tag:"div",cls:"ag-details-row",role:"gridcell",children:[{tag:"div",ref:"eDetailGrid",cls:"ag-details-grid",role:"presentation"}]},Id=class extends s.uAl{constructor(){super(...arguments),this.eDetailGrid=s.dRA}wireBeans(e){this.context=e.context}init(e){this.params=e,this.selectAndSetTemplate();const t={toggleCss:(e,t)=>this.toggleCss(e,t),toggleDetailGridCss:(e,t)=>this.eDetailGrid.classList.toggle(e,t),setDetailGrid:e=>this.setDetailGrid(e),setRowData:e=>this.setRowData(e),getGui:()=>this.eDetailGrid};this.ctrl=this.createManagedBean(new Ad),this.ctrl.init(t,e)}refresh(){var e,t;return null!==(e=null===(t=this.ctrl)||void 0===t?void 0:t.refresh())&&void 0!==e&&e}selectAndSetTemplate(){const e=this.params;if(e.pinned)return void this.setTemplate(Td);const t=()=>{this.setTemplate(kd)};if((0,s.MWY)(e.template))t();else if("string"===typeof e.template)this.setTemplate(e.template,[]);else if("function"===typeof e.template){const t=(0,e.template)(e);this.setTemplate(t,[])}else(0,s.ujB)(168),t();null==this.eDetailGrid&&(0,s.ujB)(169)}setDetailGrid(e){var t,i;if(!this.eDetailGrid)return;const o=this.context.getBean("frameworkCompWrapper"),n=new Md(o),{frameworkOverrides:r}=this.beans,a=(0,s.Dvw)(this.eDetailGrid,e,{frameworkOverrides:r,providedBeanInstances:{frameworkCompWrapper:n},modules:(0,s.Dii)(this.params.api.getGridId(),null!==(t=e.rowModelType)&&void 0!==t?t:"clientSide")});this.detailApi=a,null===(i=this.ctrl)||void 0===i||i.registerDetailWithMaster(a),this.addDestroyFunc(()=>{a.destroy()})}setRowData(e){var t;null===(t=this.detailApi)||void 0===t||t.setGridOption("rowData",e)}};function Ld(e,t){var i;const o=null===(i=e.masterDetailSvc)||void 0===i?void 0:i.store;return o?t(o):void 0}var Nd=class extends s.XQb{constructor(){super(...arguments),this.beanName="masterDetailSvc",this.store={}}isEnabled(){return this.gos.get("masterDetail")}postConstruct(){const e=this.gos;(0,s.dbY)(e)&&(this.enabled=this.isEnabled()),(0,s.TiQ)(e)&&this.addEventListeners()}addEventListeners(){const e=e=>{this.setMaster(e.node,!1,!0)};let t;const i=()=>{if(t){for(const e of t)e();t=void 0}this.isEnabled()&&(t=this.addManagedListeners(this.beans.eventSvc,{rowNodeDataChanged:e}))};i(),this.gos.addPropertyEventListener("masterDetail",i)}refreshModel(e){if(e.changedProps){const e=this.isEnabled();if(this.enabled!==e)return void this.setMasters(null)}e.rowDataUpdated&&this.setMasters(e.changedRowNodes)}setMaster(e,t,i){const o=e.master,n=this.isEnabled();let s=n;const r=this.gos,a=r.get("isRowMaster"),l=r.get("treeData");if(n)if(t||i){if(a){const t=e.data;s=!!t&&!!a(t)}}else s=o;const d=this.beans;if(!l)if(s&&t){var c,u;const t=null!==(c=null===(u=d.rowGroupColsSvc)||void 0===u?void 0:u.columns.length)&&void 0!==c?c:0;e.expanded=vl(d,e,t,!1)}else!s&&o&&(e.expanded=!1);s!==o&&(e.master=s,e.dispatchRowEvent("masterChanged"))}setMasters(e){if(this.enabled=this.isEnabled(),e){for(const t of e.updates)this.setMaster(t,!1,!0);for(const t of e.adds)this.setMaster(t,!0,!1)}else{var t;const e=null===(t=(0,s.zCU)(this.beans))||void 0===t||null===(t=t.rootNode)||void 0===t?void 0:t._leafs;if(e)for(let t=0,i=e.length;t<i;++t)this.setMaster(e[t],!0,!1)}}getDetail(e){if(!e.master||!e.expanded)return null;let t=e.detailNode;return t||(t=new s.TUE(this.beans),t.detail=!0,t.selectable=!1,t.parent=e,(0,s.Qmv)(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t)}setupDetailRowAutoHeight(e,t){const{gos:i,beans:o}=this;if(!i.get("detailRowAutoHeight"))return;const n=()=>{const o=t.clientHeight;if(null!=o&&o>0){const t=()=>{const{rowModel:t}=this.beans,{rowNode:n}=e;n.setRowHeight(o),((0,s.dbY)(i,t)||(0,s.TiQ)(i,t))&&t.onRowHeightChanged()};window.setTimeout(t,0)}},r=(0,s.QSI)(o,t,n);e.addDestroyFunc(r),n()}destroy(){this.store={},super.destroy()}},Od={moduleName:"MasterDetail",version:ki,dependsOn:[{moduleName:"SharedMasterDetail",version:ki,beans:[Nd],userComponents:{agDetailCellRenderer:Id},dynamicBeans:{detailCellRendererCtrl:Ad},apiFunctions:{addDetailGridInfo:function(e,t,i){Ld(e,e=>{e[t]=i})},removeDetailGridInfo:function(e,t){Ld(e,e=>{delete e[t]})},getDetailGridInfo:function(e,t){return Ld(e,e=>e[t])},forEachDetailGridInfo:function(e,t){Ld(e,e=>{let i=0;Object.values(e).forEach(e=>{e&&t(e,i++)})})}},dependsOn:[Ii,xl,Pl],css:[".ag-details-row{width:100%}.ag-details-row-fixed-height{height:100%}.ag-details-grid{width:100%}.ag-details-grid-fixed-height{height:100%}"]},Rl,s.Lt]},Gd=class extends s.uAl{constructor(){super(...arguments),this.changedCalculatedValues=!1,this.dragging=!1,this.shouldDestroyOnEndDragging=!1}postConstruct(){this.beans.dragSvc.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragging:e=>{if(!this.dragging){var t;this.dragging=!0;null===(t=(0,s.HBH)(this.beans).classList)||void 0===t||t.add(this.getDraggingCssClass())}this.updateValuesOnMove(e),this.beans.rangeSvc.autoScrollService.check(e),this.changedCalculatedValues&&(this.onDrag(e),this.changedCalculatedValues=!1)},onDragStop:e=>{this.dragging=!1,this.onDragEnd(e),this.clearDragProperties()},onDragCancel:()=>{this.dragging=!1,this.onDragCancel(),this.clearDragProperties()}}),this.addManagedElementListeners(this.getGui(),{pointerdown:Bd,mousedown:Bd})}getLastCellHovered(){return this.lastCellHovered}getDraggingCssClass(){return"ag-dragging-".concat(0===this.type?"fill":"range","-handle")}updateValuesOnMove(e){const t=(0,s.oND)(this.gos,e);!t||this.shouldSkipCell(t)||this.lastCellHovered&&(0,s.Bl0)(t,this.lastCellHovered)||(this.lastCellHovered=t,this.changedCalculatedValues=!0)}clearDragProperties(){var e;this.clearValues(),this.beans.rangeSvc.autoScrollService.ensureCleared();null===(e=(0,s.HBH)(this.beans).classList)||void 0===e||e.remove(this.getDraggingCssClass()),this.shouldDestroyOnEndDragging&&this.destroy()}getType(){return this.type}refresh(e){const t=this.cellCtrl,i=this.getGui(),o=(0,s.GXs)(this.beans.rangeSvc.getCellRanges()),n=o.startRow,r=o.endRow;if(n&&r){(0,s.$j0)(r,n)?(this.rangeStartRow=r,this.rangeEndRow=n):(this.rangeStartRow=n,this.rangeEndRow=r)}if(t!==e||!(0,s.K05)(i)){this.cellCtrl=e;const t=e.comp.getParentOfValue();t&&t.appendChild(i)}this.cellRange=o}clearValues(){this.lastCellHovered=void 0}destroy(){var e;if(!this.shouldDestroyOnEndDragging&&this.dragging)return(0,s.nl0)(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,super.destroy(),null===(e=this.getGui())||void 0===e||e.remove()}},Bd=e=>{e.stopPropagation()};function Vd(e){const t=e.length;let i=0;if(t<=1)return e;for(let u=0;u<e.length;u++){const t=e[u],o=t.toString().split("e-");o.length>1?i=Math.max(i,parseInt(o[1],10)):Math.floor(t)!==t&&(i=Math.max(i,t.toString().split(".")[1].length))}let o=0,n=0,s=0,r=0,a=0;for(let u=0;u<t;u++)a=e[u],o+=u,n+=a,r+=u*u,s+=u*a;const l=(t*s-o*n)/(t*r-o*o),d=n/t-l*o/t,c=[];for(let u=0;u<=t;u++)c.push(parseFloat((u*l+d).toFixed(i)));return c}var Hd={tag:"div",cls:"ag-fill-handle"};function zd(e){var t;null===(t=e.rangeSvc)||void 0===t||t.removeAllCellRanges()}var Wd="ag-cell-range-selected";function Ud(e){var t;const i=e.get("cellSelection");return void 0!==i?"boolean"!==typeof i&&"fill"===(null===(t=i.handle)||void 0===t?void 0:t.mode):e.get("enableFillHandle")}var jd=class{constructor(e,t){this.beans=e,this.cellCtrl=t,this.rangeSvc=e.rangeSvc}setComp(e){this.cellComp=e,this.eGui=this.cellCtrl.eGui,this.onCellSelectionChanged()}unsetComp(){this.beans.context.destroyBean(this.selectionHandle)}onCellSelectionChanged(){const e=this.cellComp;if(!e)return;const{rangeSvc:t,cellCtrl:i,eGui:o}=this,n=t.getCellRangeCount(i.cellPosition);this.rangeCount=n;const r=this.getHasChartRange();this.hasChartRange=r,e.toggleCss(Wd,0!==n),e.toggleCss("".concat(Wd,"-1"),1===n),e.toggleCss("".concat(Wd,"-2"),2===n),e.toggleCss("".concat(Wd,"-3"),3===n),e.toggleCss("".concat(Wd,"-4"),n>=4),e.toggleCss("ag-cell-range-chart",r),(0,s.QyW)(o,n>0||void 0),e.toggleCss("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle()}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,o=!t&&e.right,n=!t&&e.bottom,s=!t&&e.left,r=this.cellComp;r.toggleCss("ag-cell-range-top",i),r.toggleCss("ag-cell-range-right",o),r.toggleCss("ag-cell-range-bottom",n),r.toggleCss("ag-cell-range-left",s)}isSingleCell(){const{rangeSvc:e}=this;return 1===this.rangeCount&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeSvc:e}=this;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(e=>[s.OnL.DIMENSION,s.OnL.VALUE].includes(e.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,o=!1,n=!1;const{rangeSvc:r,beans:{visibleCols:a},cellCtrl:{cellPosition:l}}=this,d=l.column,c=r.getCellRanges().filter(e=>r.isCellInSpecificRange(l,e));if(!c.length)return{top:t,right:i,bottom:o,left:n};let u,h;e?(u=a.getColAfter(d),h=a.getColBefore(d)):(u=a.getColBefore(d),h=a.getColAfter(d)),u||(n=!0),h||(i=!0);for(let p=0;p<c.length&&!(t&&i&&o&&n);p++){const e=c[p],a=r.getRangeStartRow(e),d=r.getRangeEndRow(e);!t&&(0,s._wY)(a,l)&&(t=!0),!o&&(0,s._wY)(d,l)&&(o=!0),!n&&u&&e.columns.indexOf(u)<0&&(n=!0),!i&&h&&e.columns.indexOf(h)<0&&(i=!0)}return{top:t,right:i,bottom:o,left:n}}refreshHandle(){const{context:e}=this.beans;if(e.isDestroyed())return;const t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=e.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.toggleCss("ag-cell-range-handle",!!this.selectionHandle)}shouldHaveSelectionHandle(){const{gos:e,editSvc:t}=this.beans,i=this.rangeSvc,o=i.getCellRanges(),n=o.length;if(this.rangeCount<1||n<1)return!1;const r=(0,s.GXs)(o),{cellPosition:a,column:l}=this.cellCtrl,d=Ud(e)&&!l.isSuppressFillHandle(),c=function(e){var t;const i=e.get("cellSelection");return void 0!==i?"boolean"!==typeof i&&"range"===(null===(t=i.handle)||void 0===t?void 0:t.mode):e.get("enableRangeHandle")}(e),u=null===t||void 0===t?void 0:t.isEditing(this.cellCtrl,{withOpenEditor:!0});let h=1===n&&!u&&(d||c);if(this.hasChartRange){const e=o[0].type===s.OnL.DIMENSION&&i.isCellInSpecificRange(a,o[0]);this.cellComp.toggleCss("ag-cell-range-chart-category",e),h=r.type===s.OnL.VALUE}return h&&null!=r.endRow&&i.isContiguousRange(r)&&i.isBottomRightCell(r,a)}addSelectionHandle(){var e;const{beans:t,rangeSvc:i}=this,o=(0,s.GXs)(i.getCellRanges()).type,n=Ud(t.gos)&&(0,s.MWY)(o)?0:1;if(this.selectionHandle&&this.selectionHandle.getType()!==n&&(this.selectionHandle=t.context.destroyBean(this.selectionHandle)),!this.selectionHandle){const e=t.registry.createDynamicBean(0===n?"fillHandle":"rangeHandle",!1);e&&(this.selectionHandle=t.context.createBean(e))}null===(e=this.selectionHandle)||void 0===e||e.refresh(this.cellCtrl)}destroy(){this.unsetComp()}},_d=class extends s.XQb{constructor(e){super(),this.eContainer=e}postConstruct(){const{beans:e,gos:t,eContainer:i}=this,o=e.rangeSvc,n={eElement:i,onDragStart:o.onDragStart.bind(o),onDragStop:o.onDragStop.bind(o),onDragging:o.onDragging.bind(o)},r=e.dragSvc,a=r.addDragSource.bind(r,n),l=r.removeDragSource.bind(r,n);this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{(0,s.Jch)(t)?a():l()}),this.addDestroyFunc(l),(0,s.Jch)(t)&&a()}},Kd=class extends s.XQb{constructor(e,t){super(),this.column=e,this.eGui=t}postConstruct(){this.addManagedElementListeners(this.eGui,{click:e=>e&&this.onClick(e)})}onClick(e){var t;null===(t=this.beans.rangeSvc)||void 0===t||t.handleColumnSelection(this.column,e)}},Yd=class extends s.XQb{constructor(e,t){super(),this.column=e,this.comp=t,this.columnMap=new Map,this.isActive=!1,this.resetColumnMap()}postConstruct(){this.addManagedPropertyListener("cellSelection",()=>{this.refreshActive()}),this.refreshActive(),this.setupRangeHeaderHighlight()}resetColumnMap(){let e;this.columnMap.clear(),e=this.column.isColumn?[this.column]:this.column.getDisplayedLeafColumns();for(const t of e)this.columnMap.set(t,!1)}refreshActive(){const{gos:e,rangeSvc:t}=this.beans,i=e.get("cellSelection");this.isActive=!!(i&&t&&"object"===typeof i&&i.enableHeaderHighlight)}setupRangeHeaderHighlight(){const e=this.onRangeSelectionChanged.bind(this);this.addManagedEventListeners({rangeSelectionChanged:e,columnPinned:e,columnMoved:e,columnGroupOpened:e}),e()}onRangeSelectionChanged(){if(!this.isActive)return;this.resetColumnMap();const e=this.beans.rangeSvc.getCellRanges();let t=!1,i=!0;for(const o of e){if(t)break;for(const e of o.columns)this.columnMap.has(e)&&(this.columnMap.set(e,!0),t||(t=!0))}for(const o of Array.from(this.columnMap.values()))if(!1===o){i=!1;break}this.comp.toggleCss("ag-header-range-highlight",t&&i)}destroy(){super.destroy(),this.comp=null,this.column=null}},qd=class extends s.XQb{constructor(){super(...arguments),this.beanName="rangeSvc",this.cellRanges=[],this.bodyScrollListener=this.onBodyScroll.bind(this),this.dragging=!1,this.intersectionRange=!1,this.columnRangeSelectionCtx={}}wireBeans(e){this.rowModel=e.rowModel,this.dragSvc=e.dragSvc,this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.cellNavigation=e.cellNavigation,this.ctrlsSvc=e.ctrlsSvc,this.valueSvc=e.valueSvc}postConstruct(){const e=this.onColumnsChanged.bind(this),t=()=>this.removeAllCellRanges(),i=this.refreshLastRangeStart.bind(this);this.addManagedEventListeners({newColumnsLoaded:e,columnVisible:e,columnValueChanged:e,columnPivotModeChanged:t,columnRowGroupChanged:t,columnPivotChanged:t,columnGroupOpened:i,columnMoved:i,columnPinned:i}),this.ctrlsSvc.whenReady(this,e=>{const t=e.gridBodyCtrl;this.autoScrollService=new s.MSA({scrollContainer:t.eBodyViewport,scrollAxis:"xy",getVerticalPosition:()=>t.scrollFeature.getVScrollPosition().top,setVerticalPosition:e=>t.scrollFeature.setVerticalScrollPosition(e),getHorizontalPosition:()=>t.scrollFeature.getHScrollPosition().left,setHorizontalPosition:e=>t.scrollFeature.setHorizontalScrollPosition(e),shouldSkipVerticalScroll:()=>!(0,s.yy7)(this.gos,"normal"),shouldSkipHorizontalScroll:()=>!t.scrollFeature.isHorizontalScrollShowing()})})}onDragStart(e){var t,i;const o=this.gos;if(!(0,s.Jch)(o)||null!==(t=(0,s.z61)(o,e.target))&&void 0!==t&&t.isSuppressMouseEvent(e))return;const{ctrlKey:n,metaKey:r,shiftKey:a}=e,l=n||r,d=!!!(0,s.q_H)(o)&&l,c=a&&!(null===(i=this.cellRanges)||void 0===i||!i.length);d||c&&!(0,s.Qmv)((0,s.GXs)(this.cellRanges).type)||this.removeAllCellRanges(!0);const u=this.dragSvc.startTarget;if(u&&this.updateValuesOnMove(u),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,this.intersectionRange=d&&this.getCellRangeCount(this.lastCellHovered)>1,c||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=(0,s.GXs)(this.cellRanges);else{const e={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned},t=this.getColumnsFromModel([this.lastCellHovered.column]);if(null===t||void 0===t||!t.length)return;this.draggingRange={startRow:e,endRow:e,columns:t,startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsSvc.getGridBodyCtrl().eBodyViewport.addEventListener("scroll",this.bodyScrollListener,{passive:!0}),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}onDragging(e){const{dragging:t,lastCellHovered:i,newestRangeStartCell:o,autoScrollService:n,cellHasChanged:s}=this;if(!t||!e)return;this.updateValuesOnMove(e.target),this.lastMouseEvent=e;const r=e=>i&&i.rowPinned===e&&o.rowPinned===e,a=r("top")||r("bottom");if(n.check(e,a),!s||!i)return;const l=null===o||void 0===o?void 0:o.column,d=null===i||void 0===i?void 0:i.column,c=this.calculateColumnsBetween(l,d);if(!c)return;const{rowIndex:u,rowPinned:h}=i;this.draggingRange.endRow={rowIndex:u,rowPinned:h},this.draggingRange.columns=c,this.dispatchChangedEvent(!1,!1,this.draggingRange.id)}onDragStop(){if(!this.dragging)return;const{id:e}=this.draggingRange;this.autoScrollService.ensureCleared(),this.ctrlsSvc.getGridBodyCtrl().eBodyViewport.removeEventListener("scroll",this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,e)}onColumnsChanged(){this.refreshLastRangeStart();const e=this.visibleCols.allCols;for(const i of this.cellRanges){const t=i.columns;i.columns=i.columns.filter(t=>t.isVisible()&&-1!==e.indexOf(t));!(0,s.MpY)(t,i.columns)&&this.dispatchChangedEvent(!1,!0,i.id)}const t=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(e=>e.columns.length>0),t>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)}refreshLastRangeStart(){const e=(0,s.GXs)(this.cellRanges);e&&this.refreshRangeStart(e)}isContiguousRange(e){const t=e.columns;if(!t.length)return!1;const i=this.visibleCols.allCols,o=t.map(e=>i.indexOf(e)).sort((e,t)=>e-t);return(0,s.GXs)(o)-o[0]+1===t.length}getRangeStartRow(e){var t,i;if(e.startRow&&e.endRow)return(0,s.$j0)(e.startRow,e.endRow)?e.startRow:e.endRow;return{rowIndex:0,rowPinned:(null!==(t=null===(i=this.beans.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRowCount())&&void 0!==t?t:0)>0?"top":null}}getRangeEndRow(e){var t,i;if(e.startRow&&e.endRow)return(0,s.$j0)(e.startRow,e.endRow)?e.endRow:e.startRow;const o=null!==(t=null===(i=this.beans.pinnedRowModel)||void 0===i?void 0:i.getPinnedBottomRowCount())&&void 0!==t?t:0;return o>0?{rowIndex:o-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}}getRangeRowCount(e){const t=this.beans,i=this.getRangeStartRow(e),o=this.getRangeEndRow(e),n=(0,s.BlQ)(t,i);return(0,s.BlQ)(t,o)-n+1}handleCellMouseDown(e,t){const{beans:i}=this,o=(0,s.uQ3)(t.column);if(o&&e.preventDefault(),e.shiftKey)return this.extendLatestRangeToCell(t);if(o&&(0,s.vVf)(i,e))return;const n=e.ctrlKey||e.metaKey;this.setSelectionMode(o);const r=this.calculateColumnsBetween(t.column,t.column);if(!r)return;const a=this.findContainingRange({columns:r,startRow:t,endRow:t});o&&n&&a?this.removeRowFromRowNumberRange(t,a):this.setRangeToCell(t,n)}removeRowFromRowNumberRange(e,t){const{beans:i,cellRanges:o}=this,r=(0,s.iE6)(i),a=(0,s.Uun)(i),l=this.getRangeStartRow(t),d=this.getRangeEndRow(t);if(!l&&(0,s._wY)(r,e))Jd(t,(0,s.vcM)(i,r),"top");else if(!d&&(0,s._wY)(a,e))Jd(t,(0,s.PIz)(i,a),"bottom");else if((0,s._wY)(l,d))(0,s.$ii)(o,t);else if((0,s._wY)(l,e))Jd(t,(0,s.vcM)(i,e),"top");else if((0,s._wY)(d,e))Jd(t,(0,s.PIz)(i,e),"bottom");else{const r=(0,s.PIz)(i,e),a=(0,s.vcM)(i,e);t.startRow=l,t.endRow=null!==r&&void 0!==r?r:void 0,o.push((0,n.A)((0,n.A)({},t),{},{startRow:null!==a&&void 0!==a?a:void 0,endRow:d}))}this.dispatchChangedEvent(!0,!0)}setRangeToCell(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{gos:i,beans:o}=this;if(!(0,s.Jch)(i))return;if((0,s.wds)(o)){const t=(0,s.uQ3)(e.column);this.setSelectionMode(t)}const n=this.calculateColumnsBetween(e.column,e.column);if(!n)return;((0,s.q_H)(i)||!t||(0,s.MWY)(this.cellRanges))&&this.removeAllCellRanges(!0);const r={rowIndex:e.rowIndex,rowPinned:e.rowPinned},a={startRow:r,endRow:r,columns:n,startColumn:e.column};this.cellRanges.push(a),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}getRangeLastColumn(e){var t;const i=e.columns[0],o=(0,s.GXs)(e.columns);return(null===(t=this.newestRangeStartCell)||void 0===t?void 0:t.column)===i?o:i}extendRangeRowCountBy(e,t){const{beans:i}=this,{startRow:o,endRow:r}=e;if(!o||!r)return;let a,l=0;const d=(0,s.$j0)(r,o);a=d?o:r;const c=t>0?s.vcM:s.PIz,u=Math.abs(t);for(;l<u;){const e=c(i,a);if(!e)break;a=e,l++}if(l!==u)return;const h=(0,n.A)((0,n.A)({},a),{},{column:this.getRangeLastColumn(e)});this.updateRangeRowBoundary({cellRange:e,boundary:d?"start":"end",cellPosition:h})}extendRangeColumnCountBy(e,t){const{columns:i,startColumn:o}=e;if(0===t)return;const n=this.getColumnsFromModel();if(!n)return;const r=(0,s.GXs)(i),a=o===i[0]?r:i[0];if(!r||!a)return;let l=n.indexOf(o);const d=n.indexOf(a),c=d<l;c&&(l=d);const u=i.length+t;if(u<=0)return;const h=[];for(let s=l;s<l+u;s++){const e=n[s];if(!e)break;h.push(e)}if(h.length===u){if(c){const t=(0,s.GXs)(h);e.startColumn=t,this.focusCellOnNewColumn(e,t)}e.columns=h,this.dispatchChangedEvent(!0,!0,e.id)}}extendLatestRangeToCell(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=(0,s.GXs)(this.cellRanges);this.setSelectionMode((0,s.uQ3)(e.column)),this.updateRangeRowBoundary({cellRange:t,boundary:"end",cellPosition:e})}updateRangeRowBoundary(e){const{cellRange:t,boundary:i,cellPosition:o,silent:n=!1}=e,r=o.column,a=this.calculateColumnsBetween(t.startColumn,r);a&&!function(e,t){const{startRow:i,endRow:o}=e,n=(0,s.$j0)(i,o)?o:i,r=t.rowIndex===n.rowIndex&&t.rowPinned===n.rowPinned,a=e.columns[0],l=(0,s.GXs)(e.columns),d=e.startColumn===a?l:a;return t.column===d&&r}(t,o)&&("start"===i&&this.focusCellOnNewRow(t,o),t.columns=a,t["start"===i?"startRow":"endRow"]={rowIndex:o.rowIndex,rowPinned:o.rowPinned},n||this.dispatchChangedEvent(!0,!0,t.id))}getRangeEdgeColumns(e){const t=this.visibleCols.allCols,i=e.columns.map(e=>t.indexOf(e)).filter(e=>e>-1).sort((e,t)=>e-t);return{left:t[i[0]],right:t[(0,s.GXs)(i)]}}extendLatestRangeInDirection(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=e.key,i=e.ctrlKey||e.metaKey,o=(0,s.GXs)(this.cellRanges),n=this.newestRangeStartCell,r=o.endRow.rowIndex,a=o.endRow.rowPinned,l={column:this.getRangeLastColumn(o),rowIndex:r,rowPinned:a},d=this.cellNavigation.getNextCellToFocus(t,l,i);return d?(this.setCellRange({rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:d.rowIndex,rowEndPinned:d.rowPinned,columnStart:n.column,columnEnd:d.column}),d):void 0}setCellRange(e){(0,s.Jch)(this.gos)&&(this.removeAllCellRanges(!0),this.addCellRange(e))}setCellRanges(e){if(!(0,s.MpY)(this.cellRanges,e)&&this.verifyCellRanges(this.gos)){this.removeAllCellRanges(!0);for(const t of e){if(t.columns&&t.startRow){const e=this.getColumnsFromModel(t.columns);if(!e||0===e.length)continue;t.columns=e;const{startRow:i}=t;this.setNewestRangeStartCell({rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:t.columns[0]})}this.cellRanges.push(t)}this.dispatchChangedEvent(!1,!0)}}clearCellRangeCellValues(e){const{beans:t,valueSvc:i,eventSvc:o}=this,{cellEventSource:n="rangeSvc",dispatchWrapperEvents:r,wrapperEventSource:a="deleteKey"}=e;let{cellRanges:l}=e;r&&(o.dispatchEvent({type:"cellSelectionDeleteStart",source:a}),o.dispatchEvent({type:"rangeDeleteStart",source:a})),l||(l=this.cellRanges);for(const d of l)this.forEachRowInRange(d,e=>{const o=(0,s.CFh)(t,e);if(o)for(let t=0;t<d.columns.length;t++){const e=this.getColumnFromModel(d.columns[t]);if(null===e||void 0===e||!e.isCellEditable(o))continue;const s=i.getDeleteValue(e,o);o.setDataValue(e,s,n)}});r&&(o.dispatchEvent({type:"cellSelectionDeleteEnd",source:a}),o.dispatchEvent({type:"rangeDeleteEnd",source:a}))}createCellRangeFromCellRangeParams(e){return this.createPartialCellRangeFromRangeParams(e,!1)}createPartialCellRangeFromRangeParams(e,t){var i;const{columns:o,columnStart:n,columnEnd:r,rowStartIndex:a,rowStartPinned:l,rowEndIndex:d,rowEndPinned:c}=e,u=this.getColumnsFromParams(o,n,r);if(!u||!t&&0===u.columns.length)return;const{columns:h,startsOnTheRight:p}=u;return{startRow:Qd(a,l),endRow:Qd(d,c),columns:h,startColumn:null!==(i=this.getColumnFromModel(n))&&void 0!==i?i:p?(0,s.GXs)(h):h[0]}}addCellRange(e){const t=this.gos;if(!(0,s.Jch)(t)||!this.verifyCellRanges(t))return;this.setSelectionMode(!1);const i=this.createCellRangeFromCellRangeParams(e);return i?(i.startRow&&this.setNewestRangeStartCell({rowIndex:i.startRow.rowIndex,rowPinned:i.startRow.rowPinned,column:i.startColumn}),this.cellRanges.push(i),this.dispatchChangedEvent(!1,!0,i.id),i):void 0}getCellRanges(){return this.cellRanges}isEmpty(){return 0===this.cellRanges.length}isMoreThanOneCell(){const e=this.cellRanges.length;if(0===e)return!1;if(e>1)return!0;const t=this.cellRanges[0],i=this.getRangeStartRow(t),o=this.getRangeEndRow(t);return i.rowPinned!==o.rowPinned||i.rowIndex!==o.rowIndex||1!==t.columns.length}areAllRangesAbleToMerge(){const e=new Map;if(this.cellRanges.length<=1)return!0;for(const i of this.cellRanges)this.forEachRowInRange(i,t=>{const o="".concat(t.rowPinned||"normal","_").concat(t.rowIndex),n=e.get(o),s=i.columns.map(e=>e.getId());if(n){const e=s.filter(e=>-1===n.indexOf(e));n.push(...e)}else e.set(o,s)});let t;for(const i of e.values()){const e=i.sort().join();if(void 0!==t){if(t!==e)return!1}else t=e}return!0}removeAllCellRanges(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))}isCellInAnyRange(e){return this.getCellRangeCount(e)>0}isCellInSpecificRange(e,t){var i;const o=null===(i=t.columns)||void 0===i?void 0:i.includes(e.column),n=this.isRowInRange(e,t);return o&&n}isColumnInAnyRange(e){const{beans:t}=this,i=(0,s.iE6)(t),o=(0,s.Uun)(t);if(!i||!o)return!1;const n=e.isColumn?[e]:e.getDisplayedLeafColumns();return null!=this.findContainingRange({columns:n,startRow:i,endRow:o},!0)}findContainingRange(e){let{columns:t,startRow:i,endRow:o}=e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.cellRanges;for(let a=r.length-1;a>=0;a--){const e=r[a],l=t.every(t=>e.columns.includes(t));let d=!1;if(n)d=(0,s._wY)(e.startRow,i)&&(0,s._wY)(e.endRow,o);else{const t=i&&this.isRowInRange(i,e),n=o&&this.isRowInRange(o,e);d=!!t&&!!n}if(l&&d)return e}}isBottomRightCell(e,t){const i=this.visibleCols.allCols,o=e.columns.map(e=>i.indexOf(e)).sort((e,t)=>e-t),{startRow:n,endRow:r}=e,a=(0,s.$j0)(n,r)?r:n,l=i.indexOf(t.column)===(0,s.GXs)(o),d=t.rowIndex===a.rowIndex&&(0,s.X7E)(t.rowPinned)===(0,s.X7E)(a.rowPinned);return l&&d}getCellRangeCount(e){return this.cellRanges.filter(t=>this.isCellInSpecificRange(e,t)).length}isRowInRange(e,t){const i=this.getRangeStartRow(t),o=this.getRangeEndRow(t),n=(0,s._wY)(e,i),r=(0,s._wY)(e,o);if(n||r)return!0;const a=!(0,s.$j0)(e,i),l=(0,s.$j0)(e,o);return a&&l}intersectLastRange(e){if(e&&this.dragging)return;if((0,s.q_H)(this.gos))return;if(this.isEmpty())return;const t=(0,s.GXs)(this.cellRanges),i=this.getRangeStartRow(t),o=this.getRangeEndRow(t),r=[];for(const a of this.cellRanges.slice(0,-1)){const e=this.getRangeStartRow(a),l=this.getRangeEndRow(a),d=a.columns,c=d.filter(e=>-1===t.columns.indexOf(e));if(c.length===d.length){r.push(a);continue}if((0,s.$j0)(o,e)||(0,s.$j0)(l,i)){r.push(a);continue}const u=r.length;if((0,s.$j0)(e,i)){const o={columns:[...d],startColumn:t.startColumn,startRow:(0,n.A)({},e),endRow:(0,s.PIz)(this.beans,i)};r.push(o)}if(c.length>0){const s={columns:c,startColumn:c.includes(t.startColumn)?t.startColumn:c[0],startRow:Xd([(0,n.A)({},i),(0,n.A)({},e)]),endRow:$d([(0,n.A)({},o),(0,n.A)({},l)])};r.push(s)}(0,s.$j0)(o,l)&&r.push({columns:[...d],startColumn:t.startColumn,startRow:(0,s.vcM)(this.beans,o),endRow:(0,n.A)({},l)}),r.length-u===1&&(r[r.length-1].id=a.id)}this.cellRanges=r,e&&this.dispatchChangedEvent(!1,!0)}createRangeHighlightFeature(e,t,i){e.createManagedBean(new Yd(t,i))}setSelectionMode(e){this.selectionMode=e?1:0}refreshRangeStart(e){const{startColumn:t,columns:i}=e,o=(t,i)=>{const o=e.columns.filter(e=>e!==t);t?(e.startColumn=t,e.columns=i?[t,...o]:[...o,t]):e.columns=o},{left:n,right:r}=this.getRangeEdgeColumns(e);if(t===i[0]&&t!==n)return void o(n,!0);t===(0,s.GXs)(i)&&t===r&&o(r,!1)}setNewestRangeStartCell(e){this.newestRangeStartCell=e}getColumnsFromParams(e,t,i){const o=!e&&!t&&!i;let n,s=!1;if(o||e)n=this.getColumnsFromModel(o?void 0:e);else if(t&&i){var r;n=this.calculateColumnsBetween(t,i),null!==(r=n)&&void 0!==r&&r.length&&(s=n[0]!==this.getColumnFromModel(t))}return n?{columns:n,startsOnTheRight:s}:void 0}verifyCellRanges(e){const t=(0,s.s8J)(e)&&(0,s.q_H)(e)&&this.cellRanges.length>1;return t&&(0,s.ujB)(93),!t}forEachRowInRange(e,t){const i=this.getRangeStartRow(e),o=this.getRangeEndRow(e);let n=i;for(;n&&(t(n),!(0,s._wY)(n,o));)n=(0,s.vcM)(this.beans,n)}onBodyScroll(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)}updateValuesOnMove(e){var t;const i=(0,s.Xeg)(this.gos,e),o=null===i||void 0===i?void 0:i.cellPosition;if(this.cellHasChanged=!1,!o||this.lastCellHovered&&(0,s.Bl0)(o,this.lastCellHovered))return;(null===(t=this.beans.editSvc)||void 0===t?void 0:t.isEditing(i,{withOpenEditor:!0}))?this.dragSvc.cancelDrag(e):(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=o)}dispatchChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"cellSelectionChanged",started:e,finished:t,id:i}),this.eventSvc.dispatchEvent({type:"rangeSelectionChanged",started:e,finished:t,id:i})}getColumnFromModel(e){return"string"===typeof e?this.colModel.getCol(e):e}getColumnsFromModel(e){const{visibleCols:t,beans:i,selectionMode:o}=this,n=(0,s.wds)(i);e&&1!==o||(e=t.allCols);const r=[];for(const s of e){const e=this.getColumnFromModel(s);!e||n&&Zd(e)||r.push(e)}return r.length?r:void 0}calculateColumnsBetween(e,t){const i=this.visibleCols.allCols,o=this.getColumnFromModel(e),n=this.getColumnFromModel(t),r=o===n,a=i.indexOf(o);if(a<0)return void(0,s.ujB)(178,{colId:o.getId()});const l=r?a:i.indexOf(n);if(l<0)return void(0,s.ujB)(178,{colId:n.getId()});if(r||1===this.selectionMode)return this.getColumnsFromModel([o]);const d=Math.min(a,l),c=d===a?l:a;return this.getColumnsFromModel(i.slice(d,c+1))}focusCellOnNewColumn(e,t){const{focusSvc:i}=this.beans,o=i.getFocusedCell();o&&this.isCellInSpecificRange(o,e)&&i.setFocusedCell((0,n.A)((0,n.A)({},o),{},{column:t,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0}))}focusCellOnNewRow(e,t){const{focusSvc:i}=this.beans,o=i.getFocusedCell();o&&this.isCellInSpecificRange(o,e)&&i.setFocusedCell((0,n.A)((0,n.A)({},t),{},{column:o.column,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0}))}createDragListenerFeature(e){return new _d(e)}createCellRangeFeature(e){return new jd(this.beans,e)}createHeaderGroupCellMouseListenerFeature(e,t){return new Kd(e,t)}handleColumnSelection(e,t){const{gos:i,beans:o,columnRangeSelectionCtx:r,cellRanges:a}=this;if(!(0,s.prb)(i))return;const l=(0,s.q_H)(i),d=a.length>0,c=t.ctrlKey||t.metaKey,u=(0,s.iE6)(o),h=(0,s.Uun)(o);if(u&&h)if(t.shiftKey){const t=r.root;if(!t)return;const i=e.isColumn?e:(0,s.GXs)(e.getLeafColumns()),o=this.findContainingRange({columns:[t],startRow:u,endRow:h},!0);if(!o)return(0,s.$ii)(a,r.lastCellRange),void this.selectColumns(this.calculateColumnsBetween(t,i),u,h);this.updateRangeRowBoundary({cellRange:o,boundary:"end",cellPosition:(0,n.A)({column:i},h)})}else if(e.isColumn){!d||!l&&c||this.removeAllCellRanges(!0);const t=this.findContainingRange({columns:[e],startRow:u,endRow:h},!0),i=t?this.deselectColumnsFromRange(t,[e]):this.selectColumns([e],u,h);i&&(r.lastCellRange=i),r.root=e}else{!d||!l&&c||this.removeAllCellRanges(!0);const t=e.getDisplayedLeafColumns(),i=this.findContainingRange({columns:t,startRow:u,endRow:h},!0);if(i)this.deselectColumnsFromRange(i,t),r.root=t[0];else{const e=this.selectColumns(t,u,h);r.root=t[0],e&&(r.lastCellRange=e)}}}deselectColumnsFromRange(e,t){(0,s.kA8)(e.columns,t),t.includes(e.startColumn)&&(e.startColumn=e.columns[0]),0===e.columns.length&&(0,s.$ii)(this.cellRanges,e),this.dispatchChangedEvent(!0,!0)}selectColumns(e,t,i){return this.addCellRange({columns:e,columnStart:e[0],columnEnd:(0,s.GXs)(e),rowStartIndex:t.rowIndex,rowStartPinned:t.rowPinned,rowEndIndex:i.rowIndex,rowEndPinned:i.rowPinned})}};function Qd(e,t){return null!=e?{rowIndex:e,rowPinned:t}:void 0}function Xd(e){let t;for(const i of e)(void 0===t||(0,s.$j0)(t,i))&&(t=i);return t}function $d(e){let t;for(const i of e)(void 0===t||(0,s.$j0)(i,t))&&(t=i);return t}function Zd(e){return(0,s.uQ3)(e)}function Jd(e,t,i){let o;o="top"===i?e.startRow&&e.endRow&&!(0,s.$j0)(e.startRow,e.endRow)?"endRow":"startRow":e.startRow&&e.endRow&&!(0,s.$j0)(e.startRow,e.endRow)?"startRow":"endRow",e[o]=null!==t&&void 0!==t?t:void 0}var ec={moduleName:"CellSelection",version:ki,beans:[qd],dynamicBeans:{fillHandle:class extends Gd{constructor(){super(Hd),this.markedCells=[],this.cellValues=[],this.isUp=!1,this.isLeft=!1,this.isReduce=!1,this.type=0}postConstruct(){super.postConstruct(),this.addManagedElementListeners(this.getGui(),{dblclick:this.onDblClick.bind(this)})}onDblClick(e){var t,i,o;(0,s.rYD)(e);const{cellRange:n,rangeStartRow:r,beans:a}=this,{rangeSvc:l,visibleCols:d}=a,c=(0,s.Uun)(a);if(!c)return;const u=this.getFillHandleDirection();this.dragAxis="xy"===u?"y":u;const h=null===l||void 0===l?void 0:l.createCellRangeFromCellRangeParams({rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,columnStart:n.columns[0],rowEndIndex:"x"===this.dragAxis?null!==(t=null===(i=n.endRow)||void 0===i?void 0:i.rowIndex)&&void 0!==t?t:null:c.rowIndex,rowEndPinned:"x"===this.dragAxis?null===(o=n.endRow)||void 0===o?void 0:o.rowPinned:c.rowPinned,columnEnd:"x"===this.dragAxis?(0,s.GXs)(d.allCols):(0,s.GXs)(n.columns)});this.isUp=!1,this.isLeft=!1,h&&this.performFill({event:e,initialRange:n,finalRange:h}),this.dragAxis=void 0}updateValuesOnMove(e){super.updateValuesOnMove(e),this.initialXY||(this.initialXY=(0,s.OON)(this.beans,e));const{x:t,y:i}=this.initialXY,{x:o,y:n}=(0,s.OON)(this.beans,e),r=Math.abs(t-o),a=Math.abs(i-n),l=this.getFillHandleDirection();let d;d="xy"===l?r>a?"x":"y":l,d!==this.dragAxis&&(this.dragAxis=d,this.changedCalculatedValues=!0)}shouldSkipCell(e){return(0,s.uQ3)(e.column)}onDrag(e){if(!this.initialPosition){const e=this.cellCtrl;if(!e)return;this.initialPosition=e.cellPosition}const t=this.getLastCellHovered();t&&this.markPathFrom(this.initialPosition,t)}onDragEnd(e){if(this.initialXY=null,!this.markedCells.length)return;const t="x"===this.dragAxis,{cellRange:i,rangeStartRow:o,rangeEndRow:n,beans:{rangeSvc:s}}=this,r=i.columns.length;let a;if(this.isUp||this.isLeft){const e=t?o:this.lastCellMarked;a=s.createCellRangeFromCellRangeParams({rowStartIndex:e.rowIndex,rowStartPinned:e.rowPinned,columnStart:t?this.lastCellMarked.column:i.columns[0],rowEndIndex:n.rowIndex,rowEndPinned:n.rowPinned,columnEnd:i.columns[r-1]})}else a=s.createCellRangeFromCellRangeParams({rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,columnStart:i.columns[0],rowEndIndex:t?n.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:t?n.rowPinned:this.lastCellMarked.rowPinned,columnEnd:t?this.lastCellMarked.column:i.columns[r-1]});a&&this.performFill({event:e,initialRange:i,finalRange:a,shouldUpdateRange:!0})}onDragCancel(){this.initialXY=null,this.markedCells.length&&this.clearMarkedPath()}performFill(e){let{event:t,initialRange:i,finalRange:o,shouldUpdateRange:n}=e;const{eventSvc:s,rangeSvc:r}=this.beans;s.dispatchEvent({type:"fillStart"}),this.handleValueChanged(i,o,t),n&&r.setCellRanges([o]),s.dispatchEvent({type:"fillEnd",initialRange:i,finalRange:o})}getFillHandleDirection(){var e;const t=null===(e=(0,s.dK4)(this.gos))||void 0===e?void 0:e.direction;return t?"x"!==t&&"y"!==t&&"xy"!==t?((0,s.ujB)(177),"xy"):t:"xy"}handleValueChanged(e,t,i){var o,n;const{beans:r}=this,{rangeSvc:a,gos:l,valueSvc:d}=r,c=a.getRangeEndRow(e),u=a.getRangeStartRow(e),h=a.getRangeEndRow(t),p=a.getRangeStartRow(t),g="y"===this.dragAxis;if(this.isReduce&&(null===(o=(0,s.dK4)(l))||void 0===o||!o.suppressClearOnFillReduction)){const i=g?e.columns:e.columns.filter(e=>t.columns.indexOf(e)<0),o=g?(0,s.vcM)(r,h):p;return void(o&&this.clearCellsInRange(o,c,i))}const v=[],m=[],f=[],C=[];let w=!0,b=0;const y=()=>{v.length=0,m.length=0,f.length=0,C.length=0,b=0},S=(t,i)=>{let o=this.isUp?c:u,n=!1;for(g&&(w=!0,y());!n&&o;){const a=(0,s.CFh)(r,o);if(!a)break;if(g&&t)x(v,t,a,()=>!(0,s._wY)(o,this.isUp?u:c));else if(i){w=!0,y();for(const t of i)x(v,t,a,()=>t!==(this.isLeft?e.columns[0]:(0,s.GXs)(e.columns)))}n=(0,s._wY)(o,this.isUp?p:h),o=this.isUp?(0,s.PIz)(this.beans,o):(0,s.vcM)(r,o)}},x=(e,t,o,n)=>{let r,a=!1;if(w)r=d.getValue(t,o),m.push(r),f.push(d.getValue(t,o,!0)),C.push(d.getValueForDisplay({column:t,node:o}).valueFormatted),w=n();else{const{value:n,fromUserFunction:l,sourceCol:c,sourceRowNode:u}=this.processValues({event:i,values:e,initialValues:m,initialNonAggregatedValues:f,initialFormattedValues:C,col:t,rowNode:o,idx:b++});if(r=n,t.isCellEditable(o)){const e=d.getValue(t,o);if(!l){if(c){const e=c.getColDef();if(!1!==e.useValueFormatterForExport&&e.valueFormatter){const e=d.getValueForDisplay({column:c,node:u,includeValueFormatted:!0}).valueFormatted;null!=e&&(r=e)}}!1!==t.getColDef().useValueParserForImport&&(r=d.parseValue(t,o,c?r:(0,s.qph)(r),e))}l&&e===r?a=!0:o.setDataValue(t,r,"rangeSvc")}}a||e.push({value:r,column:t,rowNode:o})};if(g)e.columns.forEach(e=>{S(e)});else{const e=this.isLeft?[...t.columns].reverse():t.columns;S(void 0,e)}null===(n=this.beans.editSvc)||void 0===n||n.stopEditing(void 0,{source:"fillHandle"})}clearCellsInRange(e,t,i){const o={startRow:e,endRow:t,columns:i,startColumn:i[0]};this.beans.rangeSvc.clearCellRangeCellValues({cellRanges:[o]})}processValues(e){var t;const{formula:i,valueSvc:o}=this.beans,{event:n,values:r,initialValues:a,initialNonAggregatedValues:l,initialFormattedValues:d,col:c,rowNode:u,idx:h}=e,p=null===(t=(0,s.dK4)(this.gos))||void 0===t?void 0:t.setFillValue;let g;if(g="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",p){const e=p((0,s.AuN)(this.gos,{event:n,values:r.map(e=>{let{value:t}=e;return t}),initialValues:a,initialNonAggregatedValues:l,initialFormattedValues:d,currentIndex:h,currentCellValue:o.getValue(c,u),direction:g,column:c,rowNode:u}));if(!1!==e)return{value:e,fromUserFunction:!0}}const v=r.every(e=>{let{value:t}=e;return"number"===typeof(i=t)&&Number.isFinite(i)||"string"===typeof i&&/^[+-]?\d+(?:\.\d+)?$/.test(i.trim());var i});if(n.altKey||!v){var m,f;const e=String(null!==(m=null===(f=(0,s.GXs)(r))||void 0===f?void 0:f.value)&&void 0!==m?m:"");if(v&&1===a.length){const t=this.isUp||this.isLeft?-1:1;return{value:parseFloat(e)+1*t,fromUserFunction:!1}}const{value:t,column:o,rowNode:n}=r[h%r.length];let l;if(o.isAllowFormula()&&null!==i&&void 0!==i&&i.isFormula(e)){const t="up"===g?-1:"down"===g?1:0,o="left"===g?-1:"right"===g?1:0;l=i.updateFormulaByOffset({value:e,rowDelta:t,columnDelta:o})}else l=t;return{value:l,fromUserFunction:!1,sourceCol:o,sourceRowNode:n}}return{value:(0,s.GXs)(Vd(r.map(e=>{let{value:t}=e;return Number(t)}))),fromUserFunction:!1}}clearValues(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,super.clearValues()}clearMarkedPath(){for(const e of this.markedCells){if(!e.isAlive())continue;const{comp:t}=e;t.toggleCss("ag-selection-fill-top",!1),t.toggleCss("ag-selection-fill-right",!1),t.toggleCss("ag-selection-fill-bottom",!1),t.toggleCss("ag-selection-fill-left",!1)}this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1}clearCellValues(){this.cellValues.length=0}markPathFrom(e,t){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if((0,s._wY)(t,e))return;const i=(0,s.$j0)(t,e),{rangeStartRow:o,rangeEndRow:n}=this;i&&(t.rowPinned==o.rowPinned&&t.rowIndex>=o.rowIndex||o.rowPinned!=n.rowPinned&&t.rowPinned==n.rowPinned&&t.rowIndex<=n.rowIndex)?(this.reduceVertical(e,t),this.isReduce=!0):(this.extendVertical(e,t,i),this.isReduce=!1)}else{const i=e.column,o=t.column;if(i===o)return;const n=this.beans.visibleCols.allCols,s=n.indexOf(i),r=n.indexOf(o);r<=s&&r>=n.indexOf(this.cellRange.columns[0])?(this.reduceHorizontal(e,t),this.isReduce=!0):(this.extendHorizontal(e,t,r<s),this.isReduce=!1)}this.lastCellMarked=t}extendVertical(e,t,i){const o=this.beans,{rangeSvc:r}=o;let a=e;do{const l=this.cellRange,d=l.columns.length;for(let c=0;c<d;c++){const u=l.columns[c],h={rowIndex:a.rowIndex,rowPinned:a.rowPinned},p=(0,n.A)((0,n.A)({},h),{},{column:u}),g=r.isCellInSpecificRange(p,l),v=(0,s._wY)(a,e);if(i&&(this.isUp=!0),!v){const e=(0,s.odY)(o,p);if(e){this.markedCells.push(e);const o=e.comp;g||(o.toggleCss("ag-selection-fill-left",0===c),o.toggleCss("ag-selection-fill-right",c===d-1)),o.toggleCss(i?"ag-selection-fill-top":"ag-selection-fill-bottom",(0,s._wY)(a,t))}}}if((0,s._wY)(a,t))break}while(a=i?(0,s.PIz)(this.beans,a):(0,s.vcM)(o,a))}reduceVertical(e,t){let i=e;const o=this.beans;do{const e=this.cellRange,r=e.columns.length,a=(0,s._wY)(i,t);for(let l=0;l<r;l++){const r={rowIndex:i.rowIndex,rowPinned:i.rowPinned},a=(0,n.A)((0,n.A)({},r),{},{column:e.columns[l]}),d=(0,s.odY)(o,a);d&&(this.markedCells.push(d),d.comp.toggleCss("ag-selection-fill-bottom",(0,s._wY)(i,t)))}if(a)break}while(i=(0,s.PIz)(o,i))}extendHorizontal(e,t,i){const o=this.beans,{visibleCols:n}=o,r=n.allCols,a=r.indexOf(i?t.column:e.column),l=r.indexOf(i?this.cellRange.columns[0]:t.column),d=i?0:1,c=r.slice(a+d,l+d),{rangeStartRow:u,rangeEndRow:h}=this;for(const p of c){let e=u,t=!1;do{t=(0,s._wY)(e,h);const n=(0,s.odY)(o,{rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:p});if(n){this.markedCells.push(n);const t=n.comp;t.toggleCss("ag-selection-fill-top",(0,s._wY)(e,u)),t.toggleCss("ag-selection-fill-bottom",(0,s._wY)(e,h)),i?(this.isLeft=!0,t.toggleCss("ag-selection-fill-left",p===c[0])):t.toggleCss("ag-selection-fill-right",p===(0,s.GXs)(c))}e=(0,s.vcM)(o,e)}while(!t)}}reduceHorizontal(e,t){const i=this.beans,{visibleCols:o}=i,n=o.allCols,r=n.indexOf(t.column),a=n.indexOf(e.column),l=n.slice(r,a),{rangeStartRow:d,rangeEndRow:c}=this;for(const u of l){let e=d,t=!1;do{t=(0,s._wY)(e,c);const o=(0,s.odY)(this.beans,{rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:u});o&&(this.markedCells.push(o),o.comp.toggleCss("ag-selection-fill-right",u===l[0])),e=(0,s.vcM)(i,e)}while(!t)}}refresh(e){const t=this.beans.rangeSvc.getCellRanges()[0];t.startRow&&t.endRow?super.refresh(e):this.destroy()}},rangeHandle:class extends Gd{constructor(){super({tag:"div",cls:"ag-range-handle"}),this.type=1,this.rangeFixed=!1}onDrag(e){const t=this.getLastCellHovered();if(!t)return;const i=this.beans.rangeSvc,o=i.getCellRanges(),r=(0,s.GXs)(o);if(this.rangeFixed||(this.fixRangeStartEnd(r),this.rangeFixed=!0),this.endPosition={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column},2===o.length&&o[0].type===s.OnL.DIMENSION&&r.type===s.OnL.VALUE){!(0,s._wY)(this.endPosition,i.getRangeEndRow(r))&&i.updateRangeRowBoundary({cellRange:o[0],boundary:"end",cellPosition:(0,n.A)((0,n.A)({},this.endPosition),{},{column:o[0].columns[0]}),silent:!0})}i.extendLatestRangeToCell(this.endPosition)}shouldSkipCell(e){return!1}onDragEnd(e){const t=(0,s.GXs)(this.beans.rangeSvc.getCellRanges());this.fixRangeStartEnd(t),this.rangeFixed=!1}onDragCancel(){this.rangeFixed=!1}fixRangeStartEnd(e){const t=this.beans.rangeSvc,i=t.getRangeStartRow(e),o=t.getRangeEndRow(e),n=e.columns[0];e.startRow=i,e.endRow=o,e.startColumn=n}}},apiFunctions:{getCellRanges:function(e){var t,i;return null!==(t=null===(i=e.rangeSvc)||void 0===i?void 0:i.getCellRanges())&&void 0!==t?t:null},addCellRange:function(e,t){var i;null===(i=e.rangeSvc)||void 0===i||i.addCellRange(t)},clearRangeSelection:zd,clearCellSelection:zd},dependsOn:[Ii,s.FWU,s.uAR],css:[".ag-body-viewport:not(.ag-has-focus) .ag-cell-range-single-cell:not(.ag-cell-inline-editing),.ag-cell-range-selected.ag-cell-range-chart,.ag-cell-range-selected:not(.ag-cell-focus){background-color:var(--ag-range-selection-background-color);&.ag-cell-range-chart{background-color:var(--ag-range-selection-chart-background-color)!important;&.ag-cell-range-chart-category{background-color:var(--ag-range-selection-chart-category-background-color)!important}}}.ag-cell-range-selected-1.ag-cell-range-chart,.ag-cell-range-selected-1:not(.ag-cell-focus),.ag-root:not(.ag-context-menu-open) .ag-body-viewport:not(.ag-has-focus) .ag-cell-range-selected-1:not(.ag-cell-inline-editing){background-color:var(--ag-range-selection-background-color)}.ag-cell-range-selected-2.ag-cell-range-chart,.ag-cell-range-selected-2:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell-range-selected-3.ag-cell-range-chart,.ag-cell-range-selected-3:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell-range-selected-4.ag-cell-range-chart,.ag-cell-range-selected-4:not(.ag-cell-focus){background-image:linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color)),linear-gradient(var(--ag-range-selection-background-color),var(--ag-range-selection-background-color))}.ag-cell.ag-cell-range-selected:not(.ag-cell-range-single-cell){&.ag-cell-range-top{border-top-color:var(--ag-range-selection-border-color);border-top-style:var(--ag-range-selection-border-style)}&.ag-cell-range-right{border-right-color:var(--ag-range-selection-border-color);border-right-style:var(--ag-range-selection-border-style)}&.ag-cell-range-bottom{border-bottom-color:var(--ag-range-selection-border-color);border-bottom-style:var(--ag-range-selection-border-style)}&.ag-cell-range-left{border-left-color:var(--ag-range-selection-border-color);border-left-style:var(--ag-range-selection-border-style)}}.ag-cell.ag-selection-fill-top,.ag-cell.ag-selection-fill-top.ag-cell-range-selected{border-top:1px dashed;border-top-color:var(--ag-range-selection-border-color)}:where(.ag-ltr) .ag-cell.ag-selection-fill-right,:where(.ag-ltr) .ag-cell.ag-selection-fill-right.ag-cell-range-selected{border-right:1px dashed var(--ag-range-selection-border-color)!important}:where(.ag-rtl) .ag-cell.ag-selection-fill-right,:where(.ag-rtl) .ag-cell.ag-selection-fill-right.ag-cell-range-selected{border-left:1px dashed var(--ag-range-selection-border-color)!important}.ag-cell.ag-selection-fill-bottom,.ag-cell.ag-selection-fill-bottom.ag-cell-range-selected{border-bottom:1px dashed;border-bottom-color:var(--ag-range-selection-border-color)}:where(.ag-ltr) .ag-cell.ag-selection-fill-left,:where(.ag-ltr) .ag-cell.ag-selection-fill-left.ag-cell-range-selected{border-left:1px dashed var(--ag-range-selection-border-color)!important}:where(.ag-rtl) .ag-cell.ag-selection-fill-left,:where(.ag-rtl) .ag-cell.ag-selection-fill-left.ag-cell-range-selected{border-right:1px dashed var(--ag-range-selection-border-color)!important}.ag-fill-handle,.ag-range-handle{background-color:var(--ag-range-selection-border-color);bottom:-1px;height:6px;position:absolute;width:6px}:where(.ag-ltr) .ag-fill-handle,:where(.ag-ltr) .ag-range-handle{right:-1px}:where(.ag-rtl) .ag-fill-handle,:where(.ag-rtl) .ag-range-handle{left:-1px}.ag-fill-handle{cursor:crosshair}:where(.ag-ltr) .ag-range-handle{cursor:nwse-resize}:where(.ag-rtl) .ag-range-handle{cursor:nesw-resize}"]},tc={tag:"div",cls:"ag-loading",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},ic=class extends s.uAl{constructor(){super(tc),this.eLoadingIcon=s.dRA,this.eLoadingText=s.dRA}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){this.eLoadingText.textContent=this.getLocaleTextFunc()("loadingError","ERR")}setupLoading(){const e=(0,s.asF)("groupLoading",this.beans,null);e&&this.eLoadingIcon.appendChild(e),this.eLoadingText.textContent=this.getLocaleTextFunc()("loadingOoo","Loading...")}refresh(e){return!1}},oc={moduleName:"LoadingCellRenderer",version:ki,userComponents:{agLoadingCellRenderer:ic},icons:{groupLoading:"loading"},dependsOn:[Ii]};var nc="PivotRowTotal_",sc=(e,t)=>{let{headerName:i}=e,{headerName:o}=t;return i&&!o?1:!i&&o?-1:i||o?i<o?-1:i>o?1:0:0},rc=class extends s.XQb{constructor(){super(...arguments),this.beanName="pivotColDefSvc"}wireBeans(e){this.colModel=e.colModel,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.colNames=e.colNames}postConstruct(){const e=()=>{var e;return null!==(e=this.gos.get("serverSidePivotResultFieldSeparator"))&&void 0!==e?e:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",()=>{this.fieldSeparator=e()});const t=()=>this.gos.get("pivotDefaultExpanded");this.pivotDefaultExpanded=t(),this.addManagedPropertyListener("pivotDefaultExpanded",()=>{this.pivotDefaultExpanded=t()})}createPivotColumnDefs(e){const t=this.createPivotColumnsFromUniqueValues(e);const i=function e(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach(t=>{void 0!==t.children?e(t.children,i):i.push(t)}),i}(t);return this.addRowGroupTotals(t,i),this.addExpandablePivotGroups(t,i),this.addPivotTotalsToGroups(t,i),t}createPivotColumnsFromUniqueValues(e){var t,i;const o=null!==(t=null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[],n=o.length;return this.recursivelyBuildGroup(0,e,[],n,o)}recursivelyBuildGroup(e,t,i,o,n){var s;if(e>=o)return this.buildMeasureCols(i);const{pivotComparator:r}=n[e].getColDef(),a=r?(e=>(t,i)=>e(t.headerName,i.headerName))(r):sc,l=null===(s=this.valueColsSvc)||void 0===s?void 0:s.columns;if(1===(null===l||void 0===l?void 0:l.length)&&this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&e===o-1){const e=[];for(const o of t.keys()){const t=[...i,o],n=this.createColDef(l[0],o,t);n.columnGroupShow="open",e.push(n)}return e.sort(a),e}const d=[];for(const c of t.keys()){const s=-1===this.pivotDefaultExpanded||e<this.pivotDefaultExpanded,r=[...i,c];d.push({children:this.recursivelyBuildGroup(e+1,t.get(c),r,o,n),headerName:c,pivotKeys:r,columnGroupShow:"open",openByDefault:s,groupId:this.generateColumnGroupId(r)})}return d.sort(a),d}buildMeasureCols(e){var t,i;const o=null!==(t=null===(i=this.valueColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[];return 0===o.length?[this.createColDef(null,"-",e)]:o.map(t=>{const i=this.colNames.getDisplayNameForColumn(t,"header"),o=this.createColDef(t,i,e);return o.columnGroupShow="open",o})}addExpandablePivotGroups(e,t){const i=this.gos.get("suppressExpandablePivotGroups");if(i||this.gos.get("pivotColumnGroupTotals"))return;const o=(e,t,n)=>{if("children"in e){const{valueColsSvc:s}=this,{columns:r=[]}=null!==s&&void 0!==s?s:{},a=new Map;e.children.forEach(e=>{o(e,t,a)});const l=!e.children.some(e=>e.children),d=l&&1===r.length&&this.gos.get("removePivotHeaderRowWhenSingleValueColumn");for(const o of r){const n=this.colNames.getDisplayNameForColumn(o,"header"),s=this.createColDef(o,n,e.pivotKeys);if(s.pivotTotalColumnIds=a.get(o.getColId()),s.columnGroupShow=i?"open":"closed",s.aggFunc=o.getAggFunc(),!l||d){e.children.push(s),t.push(s)}}return void this.merge(n,a)}if(!e.pivotValueColumn)return;const s=e.pivotValueColumn.getColId();if(n.has(s)){n.get(s).push(e.colId)}else n.set(s,[e.colId])};e.forEach(e=>{o(e,t,new Map)})}addPivotTotalsToGroups(e,t){var i;if(!this.gos.get("pivotColumnGroupTotals"))return;const o="after"===this.gos.get("pivotColumnGroupTotals"),n=null===(i=this.valueColsSvc)||void 0===i?void 0:i.columns,s=null===n||void 0===n?void 0:n.map(e=>e.getAggFunc());if(s&&!(s.length<1)&&this.sameAggFuncs(s)&&n){const i=n[0];e.forEach(e=>{this.recursivelyAddPivotTotal(e,t,i,o)})}}recursivelyAddPivotTotal(e,t,i,o){const n=e;if(!n.children){const t=e;return t.colId?[t.colId]:null}let s=[];if(n.children.forEach(e=>{const n=this.recursivelyAddPivotTotal(e,t,i,o);n&&(s=s.concat(n))}),n.children.length>1){const n=this.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),r=this.createColDef(i,n,e.pivotKeys,!0);r.pivotTotalColumnIds=s,r.aggFunc=i.getAggFunc(),r.columnGroupShow=this.gos.get("suppressExpandablePivotGroups")?"open":void 0;const a=e.children;o?a.push(r):a.unshift(r),t.push(r)}return s}addRowGroupTotals(e,t){var i,o;if(!this.gos.get("pivotRowTotals"))return;const n="after"===this.gos.get("pivotRowTotals"),s=(null!==(i=null===(o=this.valueColsSvc)||void 0===o?void 0:o.columns)&&void 0!==i?i:[]).slice();n||s.reverse();const r=s.length>1||!this.gos.get("removePivotHeaderRowWhenSingleValueColumn");for(let a=0;a<s.length;a++){const i=s[a],o=this.colNames.getDisplayNameForColumn(i,"header"),l=this.createColDef(i,o,[]),d=[];for(let e=0;e<t.length;e++){const o=t[e];o.pivotValueColumn===i&&d.push(o.colId)}l.pivotTotalColumnIds=d,l.colId=nc+l.colId;const c=r?{children:[l],pivotKeys:[],groupId:"".concat(nc,"_pivotGroup_").concat(i.getColId())}:l;t.push(l),n?e.push(c):e.unshift(c)}}recreateColDef(e){var t;const{pivotValueColumn:i,headerName:o,pivotKeys:n,pivotTotalColumnIds:s,columnGroupShow:r,colId:a,valueGetter:l,aggFunc:d}=e;if(!i)return e;const c=this.createColDef(i,o,n,!!s);return c.columnGroupShow=r,c.colId=a,c.valueGetter=l,c.aggFunc=d,c.pivotTotalColumnIds=s,null===(t=this.gos.get("processPivotResultColDef"))||void 0===t||t(c),c}createColDef(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n={};if(e){const t=e.getColDef();Object.assign(n,t),n.hide=!1}return n.headerName=t,n.colId=this.generateColumnId(i||[],e&&!o?e.getColId():""),n.field=n.colId,n.valueGetter=e=>{var t;return null===(t=e.data)||void 0===t?void 0:t[e.colDef.field]},n.pivotKeys=i,n.pivotValueColumn=e,!0===n.filter&&(n.filter="agNumberColumnFilter"),n}sameAggFuncs(e){if(1==e.length)return!0;for(let t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0}merge(e,t){t.forEach((t,i)=>{const o=[...e.has(i)?e.get(i):[],...t];e.set(i,o)})}generateColumnGroupId(e){var t,i;const o=(null!==(t=null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]).map(e=>e.getColId());return"pivotGroup_".concat(o.join("-"),"_").concat(e.join("-"))}generateColumnId(e,t){var i,o;const n=(null!==(i=null===(o=this.pivotColsSvc)||void 0===o?void 0:o.columns)&&void 0!==i?i:[]).map(e=>e.getColId());return"pivot_".concat(n.join("-"),"_").concat(e.join("-"),"_").concat(t)}createColDefsFromFields(e){const t=new Map;for(let n=0;n<e.length;n++){const i=e[n].split(this.fieldSeparator);let o=t;for(let e=0;e<i.length;e++){const t=i[e];let n=o.get(t);n||(n=new Map,o.set(t,n)),o=n}}const i=(e,t,o,n)=>{const s=[];for(const[a,l]of o){const t=i("".concat(e).concat(this.fieldSeparator).concat(a),a,l,n+1);s.push(t)}if(0===s.length){const i=this.colModel.getColDefCol(t);if(i){var r;const o=null!==(r=this.colNames.getDisplayNameForColumn(i,"header"))&&void 0!==r?r:t,n=this.createColDef(i,o,void 0,!1);return n.colId=e,n.aggFunc=i.getAggFunc(),n.valueGetter=t=>{var i;return null===(i=t.data)||void 0===i?void 0:i[e]},n}return{colId:e,headerName:t,valueGetter:t=>{var i;return null===(i=t.data)||void 0===i?void 0:i[e]}}}if(this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===s.length&&"colId"in s[0])return s[0].headerName=t,s[0];return{openByDefault:-1===this.pivotDefaultExpanded||n<this.pivotDefaultExpanded,groupId:e,headerName:t,children:s}},o=[];for(const[n,s]of t){const e=i(n,n,s,0);o.push(e)}return o}},ac=class extends s.XQb{constructor(){super(...arguments),this.beanName="pivotResultCols"}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols}destroy(){var e;(0,s.yxN)(this.beans,null===(e=this.pivotResultCols)||void 0===e?void 0:e.tree),super.destroy()}isPivotResultColsPresent(){return null!=this.pivotResultCols}lookupPivotResultCol(e,t){if(null==this.pivotResultCols)return null;const i=this.colModel.getColDefCol(t);let o=null;for(const n of this.pivotResultCols.list){const t=n.getColDef().pivotKeys,r=n.getColDef().pivotValueColumn;(0,s.MpY)(t,e)&&r===i&&(o=n)}return o}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.colModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.colModel.ready&&(null!=e||null!=this.pivotResultCols)){if(e){var i,o;this.processPivotResultColDef(e);const n=("api"===t?s.OCe:s.m$O)(this.beans,e,!1,(null===(i=this.pivotResultCols)||void 0===i?void 0:i.tree)||this.previousPivotResultCols||void 0,t);(0,s.yxN)(this.beans,null===(o=this.pivotResultCols)||void 0===o?void 0:o.tree,n.columnTree);const r=n.columnTree,a=n.treeDepth,l=(0,s.lm8)(r),d={};this.pivotResultCols={tree:r,treeDepth:a,list:l,map:d};for(const e of this.pivotResultCols.list)this.pivotResultCols.map[e.getId()]=e;const c=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.colModel.refreshCols(!c,t)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.colModel.refreshCols(!1,t);this.visibleCols.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const o=e=>{e.forEach(e=>{if((0,s.Qmv)(e.children)){const t=e;i&&i(t),o(t.children)}else{t&&t(e)}})};e&&o(e)}},lc="Exceeded maximum allowed pivot column count.",dc=e=>{const t={};return e.forEach((e,i)=>t[i]=e instanceof Map?dc(e):e),t},cc=class extends s.XQb{constructor(){super(...arguments),this.beanName="pivotStage",this.step="pivot",this.refreshProps=["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"],this.uniqueValues=new Map,this.lastTimeFailed=!1,this.maxUniqueValues=-1,this.currentUniqueCount=0}wireBeans(e){this.valueSvc=e.valueSvc,this.colModel=e.colModel,this.pivotResultCols=e.pivotResultCols,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueColsSvc=e.valueColsSvc,this.pivotColsSvc=e.pivotColsSvc,this.pivotColDefSvc=e.pivotColDefSvc}execute(e){this.colModel.isPivotActive()?this.executePivotOn(e):this.executePivotOff(e)}executePivotOff(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues=new Map,this.pivotResultCols.isPivotResultColsPresent()&&(this.pivotResultCols.setPivotResultCols(null,"rowModelUpdated"),e&&(e.active=!1))}executePivotOn(e){var t,i,o,n,s,r;const a=null!==(t=null===(i=this.valueColsSvc)||void 0===i?void 0:i.columns.length)&&void 0!==t?t:1,l=this.gos.get("pivotMaxGeneratedColumns");let d;this.maxUniqueValues=-1===l?-1:l/a;try{d=this.bucketUpRowNodes(e)}catch(x){if(x.message===lc)return this.pivotResultCols.setPivotResultCols([],"rowModelUpdated"),this.eventSvc.dispatchEvent({type:"pivotMaxColumnsExceeded",message:x.message}),void(this.lastTimeFailed=!0);throw x}const c=this.setUniqueValues(d),u=null!==(o=null===(n=this.valueColsSvc)||void 0===n?void 0:n.columns)&&void 0!==o?o:[],h=u.map(e=>"".concat(e.getId(),"-").concat(e.getColDef().headerName)).join("#"),p=u.map(e=>e.getAggFunc().toString()).join("#"),g=this.aggregationColumnsHashLastTime!==h,v=this.aggregationFuncsHashLastTime!==p;this.aggregationColumnsHashLastTime=h,this.aggregationFuncsHashLastTime=p;const m=(null!==(s=null===(r=this.rowGroupColsSvc)||void 0===r?void 0:r.columns)&&void 0!==s?s:[]).map(e=>e.getId()).join("#"),f=m!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=m;const C=this.gos.get("pivotRowTotals"),w=this.gos.get("pivotColumnGroupTotals"),b=this.gos.get("suppressExpandablePivotGroups"),y=this.gos.get("removePivotHeaderRowWhenSingleValueColumn"),S=C!==this.pivotRowTotalsLastTime||w!==this.pivotColumnGroupTotalsLastTime||b!==this.suppressExpandablePivotGroupsLastTime||y!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=C,this.pivotColumnGroupTotalsLastTime=w,this.suppressExpandablePivotGroupsLastTime=b,this.removePivotHeaderRowWhenSingleValueColumnLastTime=y,this.lastTimeFailed||c||g||f||v||S){const t=this.pivotColDefSvc.createPivotColumnDefs(this.uniqueValues);this.pivotResultCols.setPivotResultCols(t,"rowModelUpdated"),e&&(e.active=!1)}this.lastTimeFailed=!1}setUniqueValues(e){return!!(JSON.stringify(dc(this.uniqueValues))!==JSON.stringify(dc(e)))&&(this.uniqueValues=e,!0)}bucketUpRowNodes(e){this.currentUniqueCount=0;const t=new Map;e.forEachChangedNodeDepthFirst(e=>{e.leafGroup&&(e.childrenMapped=null)});const i=e=>{var o;e.leafGroup?this.bucketRowNode(e,t):null===(o=e.childrenAfterFilter)||void 0===o||o.forEach(i)};return e.executeFromRootNode(i),t}bucketRowNode(e,t){var i;const o=null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns;0===(null===o||void 0===o?void 0:o.length)?e.childrenMapped=null:e.childrenMapped=dc(this.bucketChildren(e.childrenAfterFilter,o,0,t)),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)}bucketChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;const n=new Map,r=t[i];if(e.forEach(e=>{let t=this.valueSvc.getKeyForNode(r,e);if((0,s.MWY)(t)&&(t=""),!o.get(t)){this.currentUniqueCount+=1,o.set(t,new Map);const e=-1!==this.maxUniqueValues,i=this.currentUniqueCount>this.maxUniqueValues;if(e&&i)throw Error(lc)}n.has(t)||n.set(t,[]),n.get(t).push(e)}),i===t.length-1)return n;const a=new Map;for(const s of n.keys())a.set(s,this.bucketChildren(n.get(s),t,i+1,o.get(s)));return a}},uc={moduleName:"SharedPivot",version:ki,beans:[ac,rc,Qa],apiFunctions:{isPivotMode:function(e){return e.colModel.isPivotMode()},getPivotResultColumn:function(e,t,i){var o,n;return null!==(o=null===(n=e.pivotResultCols)||void 0===n?void 0:n.lookupPivotResultCol(t,i))&&void 0!==o?o:null},setValueColumns:function(e,t){var i;null===(i=e.valueColsSvc)||void 0===i||i.setColumns(t,"api")},getValueColumns:function(e){var t,i;return null!==(t=null===(i=e.valueColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]},removeValueColumns:function(e,t){var i;null===(i=e.valueColsSvc)||void 0===i||i.removeColumns(t,"api")},addValueColumns:function(e,t){var i;null===(i=e.valueColsSvc)||void 0===i||i.addColumns(t,"api")},setPivotColumns:function(e,t){var i;null===(i=e.pivotColsSvc)||void 0===i||i.setColumns(t,"api")},removePivotColumns:function(e,t){var i;null===(i=e.pivotColsSvc)||void 0===i||i.removeColumns(t,"api")},addPivotColumns:function(e,t){var i;null===(i=e.pivotColsSvc)||void 0===i||i.addColumns(t,"api")},getPivotColumns:function(e){var t,i;return null!==(t=null===(i=e.pivotColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]},setPivotResultColumns:function(e,t){var i;null===(i=e.pivotResultCols)||void 0===i||i.setPivotResultCols(t,"api")},getPivotResultColumns:function(e){var t;const i=null===(t=e.pivotResultCols)||void 0===t?void 0:t.getPivotResultCols();return i?i.list:null}},dependsOn:[Vl,s.X8R]},hc={moduleName:"Pivot",version:ki,rowModels:["clientSide"],beans:[cc],dependsOn:[uc,Hl,Rl]},pc=e=>{const t=e.split(".");if(t.includes("__proto__"))return()=>{};const i=t.length;return i<2?t=>null===t||void 0===t?void 0:t[e]:e=>{let o=0;do{var n;if(e=null===(n=e)||void 0===n?void 0:n[t[o++]],o===i)return e}while("object"===typeof e)}},gc=2147483648,vc=1073741824,mc=536870912,fc=268435456,Cc=268435455,wc=String.fromCodePoint(31,41150,8291),bc=class extends s.XQb{constructor(){super(...arguments),this.nestedDataGetter=null,this.parentIdGetter=null,this.nonLeafsById=null,this.nodesToUnselect=null,this.fullReload=!1}postConstruct(){this.onPropChange(null)}onPropChange(e){const t=this.gos;if(!e||e.has("treeDataParentIdField")){const e=t.get("treeDataParentIdField"),i=e?pc(e):null;this.fullReload||(this.fullReload=this.parentIdGetter!==i),this.parentIdGetter=i,i&&(this.nestedDataGetter=null)}if(!e||e.has("treeDataChildrenField")){const e=this.parentIdGetter?"":t.get("treeDataChildrenField"),i=e?pc(e):null;this.fullReload||(this.fullReload=this.nestedDataGetter!==i),this.nestedDataGetter=i}}destroy(){this.nodesToUnselect=null,this.reset(),super.destroy()}reset(){this.clearNonLeafs(),this.deselectHiddenNodes(!1),this.fullReload=!0}clearNonLeafs(){const e=this.nonLeafsById;if(e){for(const t of e.values())t._destroy(!1);e.clear(),this.nonLeafsById=null}}getNonLeaf(e){var t;return null===(t=this.nonLeafsById)||void 0===t?void 0:t.get(e)}loadGroupData(e){var t;const i=e.key;if(null==i)return e._groupData=null,null;const o={};e._groupData=o;const n=null===(t=this.beans.showRowGroupCols)||void 0===t?void 0:t.columns;if(n)for(let s=0,r=n.length;s<r;++s)o[n[s].getColId()]=i;return o}execute(e,t){this.fullReload&&this.reset();const{changedRowNodes:i,changedPath:o}=t,n=null!==o&&void 0!==o&&o.active?o:void 0,s=this.fullReload||!i&&!n,r=!!i&&this.flagUpdatedNodes(i);(s||r)&&(this.fullReload=!1,this.parentIdGetter?this.loadSelfRef(e,s):this.nestedDataGetter?this.loadNested(e,i,s):this.loadDataPath(e,s));const a=this.initRowsParents(e);this.destroyFillerRows(!!t.animate),this.initRowsChildrenSize(e);let l=this.preprocessRows(e);const d=a||0!==(l&gc);l&=2147483647;const c=this.traverseRoot(e,n);return l>0&&l!==c&&(this.handleCycles(e),this.traverseRoot(e,n)),e.treeNodeFlags=0,this.deselectHiddenNodes(a||s),d}flagUpdatedNodes(e){const{adds:t,updates:i,removals:o}=e;let n=o.length>0;if(t.size>0){n=!0;for(const e of t)e.treeNodeFlags|=vc}if(i.size>0){n=!0;for(const e of i)e.treeNodeFlags|=vc}return n}initRowsParents(e){const t=e._leafs,i=t.length;let o=!1;for(let n=0;n<i;++n)this.initRowParent(t[n])&&(o=!0);return o}initRowParent(e){let t=!1;for(;;){const i=e.parent,o=e.treeParent;if(null===o){i&&(t=!0,this.hideRow(e));break}let n=o.treeNodeFlags+1;const s=i!==o;if(s&&(t=!0,n|=vc,e.parent=o),s&&i&&(i.destroyed&&Sc(o,i)&&(n|=fc),i.treeNodeFlags|=vc),o.sourceRowIndex>=0||o.treeNodeFlags&mc||null===o.treeParent){o.treeNodeFlags=n;break}o.treeNodeFlags=n|mc|e.treeNodeFlags&vc,e=o}return t}destroyFillerRows(e){const t=this.nonLeafsById;if(t){for(const i of t.values())null!==i.treeParent&&0!==(i.treeNodeFlags&Cc)||(t.delete(i.id),i._destroy(e),this.hideRow(i));0===t.size&&(this.nonLeafsById=null)}}initRowsChildrenSize(e){this.initRowChildrenSize(e);const t=e._leafs,i=t.length;for(let n=0;n<i;++n)this.initRowChildrenSize(t[n]);const o=this.nonLeafsById;if(null!==o)for(const n of o.values())this.initRowChildrenSize(n)}initRowChildrenSize(e){var t;let{childrenAfterGroup:i,_leafs:o,treeNodeFlags:n}=e;const r=null===(t=i)||void 0===t?void 0:t.length,a=n&Cc;if(e.treeNodeFlags=-268435456&n|((r||0)===a?0:gc),0===a&&e.level>=0){if(i!==s.s5B){e.childrenAfterGroup=s.s5B;const t=e.sibling;t&&(t.childrenAfterGroup=s.s5B)}}else if(r!==a||i===o)if(i&&i!==s.s5B&&i!==o)i.length=a;else{e.childrenAfterGroup=i=new Array(a);const t=e.sibling;t&&(t.childrenAfterGroup=i)}}preprocessRows(e){const t=e._leafs,i=t.length;let o=0,n=!1;for(let s=0;s<i;++s){let e=t[s];for(;;){const t=e.treeParent;if(null===t)break;++o;let i=t.treeNodeFlags;const s=t.childrenAfterGroup,r=i&Cc;if(i=-268435456&i|r+1,(i&gc||s[r]!==e)&&(i|=gc,s[r]=e,n=!0),t.treeNodeFlags=i,t.data||0===(t.treeNodeFlags&mc)||null===t.treeParent)break;t.treeNodeFlags=-536870913&i|e.treeNodeFlags&vc,e=t}}return o|(n?gc:0)}traverseRoot(e,t){let i=0;const o=e.childrenAfterGroup;for(let n=0,s=o.length;n<s;++n)i+=this.traverse(o[n],0,!1,t);return 2147483647&i}traverse(e,t,i,o){const n=e.childrenAfterGroup,s=n.length;let r=e.treeNodeFlags;e.treeNodeFlags=r&fc,e.level=t,e.group!==!!s?(ms(e,this.beans,!!s),r|=vc):e.hasChildren()!==!!s&&(e.updateHasChildren(),r|=vc),0!==(-1073741824&r)&&(null===o||void 0===o||o.addParentNode(e));0!==s||e.master?0===(r&fc)&&(e.treeNodeFlags|=fc,e.expanded=vl(this.beans,e,t)):(e.expanded&&(e.expanded=!1),0!==(r&fc)&&(e.treeNodeFlags&=-268435457)),i&&null!==e.rowIndex&&e.clearRowTopAndRowIndex(),i||(i=!1===e.expanded),++t,r&=gc;for(let a=0;a<s;++a){const e=n[a],s=this.traverse(e,t,i,o);r=r+(2147483647&s)|s&gc}return r&gc&&(e._leafs=void 0),r+1}handleCycles(e){const t=new Set,i=e=>{if(t.has(e))return!1;t.add(e);for(const t of e.childrenAfterGroup)i(t);return!0};i(e);const o=e.childrenAfterGroup;o.length=0;const n=e._leafs;for(let a=0,l=n.length;a<l;++a){const t=n[a],l=t.treeParent;var r;if(l&&i(t))l.treeNodeFlags|=-1073741824,t.parent=e,(0,s.$ii)(l.childrenAfterGroup,t),o.push(t),(0,s.ujB)(270,{id:t.id,parentId:null!==(r=null===l||void 0===l?void 0:l.id)&&void 0!==r?r:""});else l===e&&o.push(t)}}loadNested(e,t,i){if(!i&&t){for(const e of t.adds)e.key=e.id;return}const o=e._leafs;for(let n=0,s=o.length;n<s;++n){const e=o[n],t=e.id;e.key!==t&&xc(e,t)}}loadSelfRef(e,t){const i=e._leafs,o=i.length;if(!this.gos.get("getRowId")){for(let e=0;e<o;e++)i[e].treeParent=null;return}const n=this.beans.rowModel,r=this.parentIdGetter;for(let d=0;d<o;d++){var a;const o=i[d];if(t||o.treeNodeFlags&vc||null!==(a=o.treeParent)&&void 0!==a&&a.destroyed){let t;const i=null===r||void 0===r?void 0:r(o.data);null!==i&&void 0!==i&&(t=n.getRowNode(i),t||(0,s.ujB)(271,{id:o.id,parentId:i})),o.treeParent=null!==t&&void 0!==t?t:e;const a=o.id;o.key!==a&&xc(o,a)}else{var l;null!==(l=o.treeParent)&&void 0!==l||(o.treeParent=e)}}}loadFlattened(e){const t=e._leafs;for(let i=0,o=t.length;i<o;++i){const o=t[i];o.treeParent=e;const n=o.id;o.key!==n&&xc(o,n)}}loadDataPath(e,t){const i=this.gos.get("getDataPath");if(!i)return void this.loadFlattened(e);const o=new Map,n=new Map;let r;t||(r=this.loadExistingDataPath(e,o,n));const a=e._leafs;for(let l=0,d=a.length;l<d;++l){const e=a[l];if(!t&&null!==e.treeParent&&0===(e.treeNodeFlags&vc))continue;const d=i(e.data),c=null===d||void 0===d?void 0:d.length;if(!c){(0,s.ujB)(185,{data:e.data});continue}const u=d[c-1];e.key!==u&&xc(e,u);const h=d.join(wc);n.set(e,h);const p=o.get(h);void 0===p?o.set(h,e):p!==e&&(r=this.duplicatedPath(o,r,p,e,h))}r&&this.processDuplicatePaths(r,n),this.buildFromPaths(e,o,n)}loadExistingDataPath(e,t,i){let o;const n=e._leafs;for(let s=0,r=n.length;s<r;++s){const r=n[s],a=r.treeParent;if(null===a||0!==(r.treeNodeFlags&vc))continue;let l=r.key,d=a;for(;d&&d!==e&&d!==r;){l=wc+l;const e=i.get(d);if(void 0!==e){l=e+l;break}l=d.key+l,d=d.treeParent}if(d!==r){i.set(r,l);const e=t.get(l);void 0===e?t.set(l,r):e!==r&&(o=this.duplicatedPath(t,o,e,r,l))}}return o}duplicatedPath(e,t,i,o,n){o.sourceRowIndex<i.sourceRowIndex&&e.set(n,o);const s=(null!==t&&void 0!==t?t:t=new Map).get(n);return void 0===s?t.set(n,[i,o]):s.push(o),t}buildFromPaths(e,t,i){const o=new Array(48),n=e._leafs;for(let s=0,r=n.length;s<r;++s){const r=n[s],a=i.get(r);if(void 0===a)continue;const l=this.splitPathKey(o,a);let d=0,c=e;for(let e=l-1;e>=0;--e){const i=t.get(a.slice(0,o[e]));if(i){c=i,d=e+1;break}}d<l&&(c=this.buildMissingFillers(t,a,o,l,d,c)),r.treeParent=c}}splitPathKey(e,t){let i=0,o=0;const n=t.length;for(;o<n;){const n=t.indexOf(wc,o);if(-1===n)break;e[i++]=n,o=n+3}return i}buildMissingFillers(e,t,i,o,n,s){let r=0,a="row-group";s.sourceRowIndex<0&&s.treeParent&&(r=n,a=s.id);do{const o=0===n?0:i[n-1]+3,l=i[n],d=t.slice(0,l);let c=e.get(d);if(void 0===c){const s=0===o?d:t.slice(o,l);a=this.makeFillerIdBase(t,i,n,a,r)+s,c=this.getOrCreateFiller(s,a),e.set(d,c),r=n+1}else c.sourceRowIndex<0&&(a=c.id,r=n+1);c.treeParent=s,s=c,++n}while(n<o);return s}processDuplicatePaths(e,t){for(const i of e.values()){i.sort(yc);const e=i.length,o=new Array(e-1);for(let s=1;s<e;++s){const e=i[s];t.delete(e),e.treeParent=null,o[s-1]=e.data}const n=i[0];(0,s.ujB)(186,{rowId:n.id,rowData:n.data,duplicateRowsData:o})}}getOrCreateFiller(e,t){var i;const o=null!==(i=this.nonLeafsById)&&void 0!==i?i:this.nonLeafsById=new Map;let n=o.get(t);return void 0===n&&(n=new s.TUE(this.beans),n.id=t,n.key=e,n.group=!0,n.leafGroup=!1,n.rowGroupIndex=null,o.set(t,n)),n}makeFillerIdBase(e,t,i,o,n){for(;n<i;){const i=n>0?t[n-1]+3:0,s=t[n];o+="-"+n+"-"+e.slice(i,s),++n}return o+"-"+i+"-"}deselectHiddenNodes(e){const t=this.beans.selectionSvc,i=this.nodesToUnselect,o="rowDataChanged";var n;(i&&(this.nodesToUnselect=null,null===t||void 0===t||t.setNodesSelected({newValue:!1,nodes:i,suppressFinishActions:!0,source:o})),i||e)&&(null===t||void 0===t||null===(n=t.updateGroupsFromChildrenSelections)||void 0===n||n.call(t,o));if(i){var s;const e=null!==(s=null===t||void 0===t?void 0:t.getSelectedNodes())&&void 0!==s?s:null;this.eventSvc.dispatchEvent({type:"selectionChanged",source:o,selectedNodes:e,serverSideState:null})}}hideRow(e){var t;e.isSelected()&&(null!==(t=this.nodesToUnselect)&&void 0!==t?t:this.nodesToUnselect=[]).push(e);e.parent=null,e.group=!1,e.treeParent=null,e.treeNodeFlags=0,e.childrenAfterGroup=s.s5B,e._leafs=void 0,e._groupData=null;const i=e.sibling;i&&(i.childrenAfterGroup=s.s5B),e.updateHasChildren(),null!==e.rowIndex&&e.clearRowTopAndRowIndex()}onShowRowGroupColsSetChanged(){const e=this.beans.rowModel.rootNode._leafs;if(!e)return;for(let i=0,o=e.length;i<o;++i)e[i]._groupData=void 0;const t=this.nonLeafsById;if(t)for(const i of t.values())i._groupData=void 0}},yc=(e,t)=>e.sourceRowIndex-t.sourceRowIndex,Sc=(e,t)=>0!==(t.treeNodeFlags&fc)&&0===(e.treeNodeFlags&fc)&&null!==e.treeParent&&e.sourceRowIndex<0&&(e.expanded=t.expanded,!0),xc=(e,t)=>{const i=void 0!==e._groupData;e.key=t,e.groupValue=t;const o=e.sibling;o&&(o.key=t),i&&(e._groupData=void 0,e.setData(e.data))},Fc={moduleName:"SharedTreeData",version:ki,dependsOn:[Ii,Ha,Fl,Pl]},Rc={moduleName:"TreeData",version:ki,dynamicBeans:{treeGroupStrategy:bc},rowModels:["clientSide"],dependsOn:[Fc,za,Rl,Dl]},Pc=class extends s.XQb{constructor(){super(...arguments),this.beanName="ssrmBlockUtils"}wireBeans(e){this.valueSvc=e.valueSvc,this.showRowGroupCols=e.showRowGroupCols,this.nodeManager=e.ssrmNodeManager,this.expansionSvc=e.expansionSvc,this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}createRowNode(e){const t=new s.TUE(this.beans),i=null!=e.rowHeight?e.rowHeight:(0,s.YvH)(this.beans);return t.setRowHeight(i),t.group=e.group,t.leafGroup=e.leafGroup,t.level=e.level,t.uiLevel=e.level,t.parent=e.parent,t.stub=!0,t.__needsRefreshWhenVisible=!1,t.group&&(t.expanded=!1,t.field=e.field,t.rowGroupColumn=e.rowGroupColumn,t.rowGroupIndex=e.level),t}destroyRowNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.childStore&&!t&&(this.destroyBean(e.childStore),e.childStore=null);const i=e.sibling;i&&!e.footer&&this.destroyRowNode(i,!1),e._destroy(!0),null!=e.id&&this.nodeManager.removeNode(e)}setTreeGroupInfo(e){e.updateHasChildren();const t=this.gos.get("getServerSideGroupKey"),i=e.hasChildren();i&&null!=t&&(e.key=t(e.data)),i||null==e.childStore||(this.destroyBean(e.childStore),e.childStore=null,e.master||(e.expanded=!1))}setRowGroupInfo(e){e.key=this.valueSvc.getValue(e.rowGroupColumn,e),null!==e.key&&void 0!==e.key||(0,s.keA)(()=>{var t;(0,s.ujB)(190,{rowGroupId:null===(t=e.rowGroupColumn)||void 0===t?void 0:t.getId(),data:e.data})},"SSBlock-BadKey");if(this.gos.get("groupAllowUnbalanced")&&""===e.key){const t=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(t,e))}(0,s.MPk)(this.beans.gos)({node:e})&&(Oa(e,this.beans),e.sibling&&(e.sibling.uiLevel=e.uiLevel+1))}setMasterDetailInfo(e){const t=this.gos.get("isRowMaster");e.master=null==t||t(e.data)}updateDataIntoRowNode(e,t){e.updateData(t),this.gos.get("treeData")?(this.setTreeGroupInfo(e),this.setChildCountIntoRowNode(e),this.updateRowFooter(e)):e.group?(this.setChildCountIntoRowNode(e),this.updateRowFooter(e)):this.gos.get("masterDetail")}updateRowFooter(e){if(!e.footer){if(e.group){if((0,s.MPk)(this.beans.gos)({node:e})&&!e.sibling)return void Oa(e,this.beans)}e.sibling&&Ga(e)}}setDataIntoRowNode(e,t,i,o){e.stub=!1;const n=this.gos.get("treeData");e.setDataAndId(t,i);const r=e.group;var a;(!n&&r||!this.gos.get("masterDetail")||this.setMasterDetailInfo(e),n?this.setTreeGroupInfo(e):r&&this.setRowGroupInfo(e),(n||r)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),(0,s.Qmv)(t))&&(e.setRowHeight((0,s.Syv)(this.beans,e,!1,o).height),null===(a=e.sibling)||void 0===a||a.setRowHeight((0,s.Syv)(this.beans,e.sibling,!1,o).height))}setChildCountIntoRowNode(e){const t=this.gos.get("getChildCount");t&&e.setAllChildrenCount(t(e.data))}setGroupDataIntoRowNode(e){var t;const i=e.key;e.groupValue=i,e.sibling&&(e.sibling.groupValue=i);const o=null===(t=this.showRowGroupCols)||void 0===t?void 0:t.columns;if(!o)return;const n=this.gos.get("treeData");for(const s of o){let t=e._groupData;if(t||(t={},e._groupData=t),n)t[s.getColId()]=i;else if(s.isRowGroupDisplayed(e.rowGroupColumn.getId())){const i=this.valueSvc.getValue(e.rowGroupColumn,e);t[s.getColId()]=i}}}clearDisplayIndex(e){e.clearRowTopAndRowIndex();var t;e.hasChildren()&&!!e.childStore&&(null===(t=e.childStore)||void 0===t||t.clearDisplayIndexes());var i;e.master&&e.detailNode&&(null===(i=e.detailNode)||void 0===i||i.clearRowTopAndRowIndex())}setDisplayIndex(e,t,i,o){const n=this.gos.get("groupAllowUnbalanced")&&e.group&&""===e.key;if(this.gos.get("groupHideOpenParents")&&e.group&&e.expanded||n?(e.setRowIndex(null),e.setRowTop(null)):(e.setRowIndex(t.value++),e.setRowTop(i.value),i.value+=e.rowHeight),e.setUiLevel(o),e.footer)return;e.master&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(t.value++),e.detailNode.setRowTop(i.value),i.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex());if(e.hasChildren()&&!!e.childStore){const s=e.childStore;e.expanded||n?s.setDisplayIndexes(t,i,n?o:o+1):s.clearDisplayIndexes()}}extractRowBounds(e,t){const i=e=>({rowHeight:e.rowHeight,rowTop:e.rowTop});if(e.rowIndex===t)return i(e);if(e.hasChildren()&&e.expanded&&e.childStore){const i=e.childStore;if(i.isDisplayIndexInStore(t))return i.getRowBounds(t)}else if(e.master&&e.expanded&&e.detailNode&&e.detailNode.rowIndex===t)return i(e.detailNode)}isPixelInNodeRange(e,t){return!(!(0,s.Qmv)(e.rowTop)||!(0,s.Qmv)(e.rowHeight))&&(t>=e.rowTop&&t<e.rowTop+e.rowHeight)}getIndexAtPixel(e,t){if(this.isPixelInNodeRange(e,t))return e.rowIndex;const i=e.master&&e.expanded,o=e.detailNode;if(i&&o&&this.isPixelInNodeRange(o,t))return o.rowIndex;if(e.hasChildren()&&e.expanded&&e.childStore){const i=e.childStore;if(i.isPixelInRange(t))return i.getRowIndexAtPixel(t)}return null}createNodeIdPrefix(e){const t=[];let i=e;for(;i&&i.level>=0;)""===i.key?t.push("ag-Grid-MissingKey"):t.push(i.key),i=i.parent;if(t.length>0)return t.reverse().join("-")}checkOpenByDefault(e){var t;const i=!(null===(t=this.expansionSvc)||void 0===t||!t.isNodeExpanded(e)),o=e.expanded;!!o!==i?e.setExpanded(i):void 0===o&&(e.expanded=i)}},Dc=class extends s.XQb{constructor(){super(...arguments),this.beanName="ssrmExpandListener"}postConstruct(){(0,s.TiQ)(this.gos)&&this.addManagedEventListeners({rowExpansionStateChanged:this.onRowExpandStateChanged.bind(this)})}onRowExpandStateChanged(){const e=this.beans,t=e.expansionSvc;e.rowModel.forEachNode(e=>{t.updateExpandedState(e)}),this.eventSvc.dispatchEvent({type:"storeUpdated"})}},Ec=class extends s.XQb{constructor(){super(...arguments),this.beanName="ssrmFilterListener"}wireBeans(e){this.serverSideRowModel=e.rowModel,this.filterManager=e.filterManager,this.listenerUtils=e.ssrmListenerUtils}postConstruct(){(0,s.TiQ)(this.gos)&&this.addManagedEventListeners({advancedFilterEnabledChanged:()=>this.onFilterChanged(!0),filterChanged:()=>this.onFilterChanged()})}onFilterChanged(e){var t;const i=this.serverSideRowModel.getParams();if(!i)return;const o=i.filterModel;let n,s;if(null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterEnabled()){n=this.filterManager.getAdvFilterModel();const t=e?Object.keys(null!==o&&void 0!==o?o:{}):this.getAdvancedFilterColumns(o),i=this.getAdvancedFilterColumns(n);for(const e of t)i.add(e);s=Array.from(i)}else{var r,a;if(n=null!==(r=null===(a=this.filterManager)||void 0===a?void 0:a.getFilterModel())&&void 0!==r?r:{},e){const e=this.getAdvancedFilterColumns(o);for(const t of Object.keys(n))e.add(t);s=Array.from(e)}else s=this.findChangedColumns(o,n)}const l={valueColChanged:this.listenerUtils.isSortingWithValueColumn(s),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(s),changedColumns:s};this.serverSideRowModel.refreshAfterFilter(n,l)}findChangedColumns(e,t){const i={};for(const n of Object.keys(e))i[n]=!0;for(const n of Object.keys(t))i[n]=!0;const o=[];for(const n of Object.keys(i)){JSON.stringify(e[n])!=JSON.stringify(t[n])&&o.push(n)}return o}getAdvancedFilterColumns(e){const t=new Set;if(!e)return t;const i=e=>{if("join"===e.filterType)for(const t of e.conditions)i(t);else t.add(e.colId)};return i(e),t}},Ac=class extends s.XQb{constructor(){super(...arguments),this.beanName="ssrmListenerUtils"}wireBeans(e){this.pivotResultCols=e.pivotResultCols,this.valueColsSvc=e.valueColsSvc}isSortingWithValueColumn(e){var t,i;const o=(null!==(t=null===(i=this.valueColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[]).map(e=>e.getColId());for(let n=0;n<e.length;n++)if(o.indexOf(e[n])>-1)return!0;return!1}isSortingWithSecondaryColumn(e){var t;const i=null===(t=this.pivotResultCols)||void 0===t?void 0:t.getPivotResultCols();if(!i)return!1;const o=i.list.map(e=>e.getColId());for(let n=0;n<e.length;n++)if(o.indexOf(e[n])>-1)return!0;return!1}},Mc=class extends s.XQb{constructor(){super(...arguments),this.beanName="ssrmSortSvc"}wireBeans(e){this.sortSvc=e.sortSvc,this.serverSideRowModel=e.rowModel,this.listenerUtils=e.ssrmListenerUtils}postConstruct(){(0,s.TiQ)(this.gos)&&this.addManagedEventListeners({sortChanged:this.onSortChanged.bind(this)})}onSortChanged(){const e=this.serverSideRowModel.getParams();if(!e)return;const t=this.sortSvc.getSortModel(),i=e.sortModel,o=this.findChangedColumnsInSort(t,i),n={valueColChanged:this.listenerUtils.isSortingWithValueColumn(o),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(o),changedColumns:o};this.serverSideRowModel.refreshAfterSort(t,n)}findChangedColumnsInSort(e,t){let i=[];for(const o of[e,t])if(o){const e=o.map(e=>e.colId);i=i.concat(e)}return i.filter(i=>{const o=t.find(e=>e.colId===i),n=e.find(e=>e.colId===i);return((e,t)=>(e?e.sort:null)!==(t?t.sort:null))(o,n)||((i,o)=>(i?t.indexOf(i):-1)!==(o?e.indexOf(o):-1))(o,n)})}},Tc=class extends s.XQb{constructor(){super(...arguments),this.beanName="ssrmNodeManager",this.rowNodes=new Map}addRowNode(e){const t=e.id;this.rowNodes.has(t)&&(0,s.ujB)(187,{rowId:t,firstData:this.rowNodes.get(t).data,secondData:e.data}),this.rowNodes.set(t,e)}removeNode(e){const t=e.id;this.rowNodes.delete(t)}destroy(){this.clear(),super.destroy()}clear(){this.rowNodes.clear(),super.destroy()}},kc=class extends s.XQb{constructor(){super(...arguments),this.beanName="rowModel",this.started=!1,this.managingPivotResultColumns=!1,this.onRowHeightChanged_debounced=(0,s.pkA)(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.pivotResultCols=e.pivotResultCols,this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc,this.valueColsSvc=e.valueColsSvc,this.filterManager=e.filterManager,this.sortSvc=e.sortSvc,this.rowRenderer=e.rowRenderer,this.nodeManager=e.ssrmNodeManager,this.storeFactory=e.ssrmStoreFactory,this.pivotColDefSvc=e.pivotColDefSvc}ensureRowHeightsValid(){return!1}start(){this.started=!0,this.updateDatasource()}destroyDatasource(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)}postConstruct(){const e=this.resetRootStore.bind(this);this.addManagedEventListeners({newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onStoreUpdated.bind(this),columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e,columnPivotModeChanged:e}),this.addManagedPropertyListeners(["masterDetail","treeData","removePivotHeaderRowWhenSingleValueColumn","cacheBlockSize"],e),this.addManagedPropertyListeners(["groupAllowUnbalanced","groupTotalRow"],()=>this.onStoreUpdated()),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights()),this.verifyProps(),this.addManagedPropertyListener("serverSideDatasource",()=>this.updateDatasource())}updateDatasource(){const e=this.gos.get("serverSideDatasource");e&&this.setDatasource(e)}verifyProps(){(0,s.MBb)(this.gos)&&!this.gos.exists("getRowId")&&(0,s.ujB)(188,{feature:"selection"})}setDatasource(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())}applyRowData(e,t,i){const o=this.getRootStore();if(!o)return;const n=o.getChildStore(i);n&&n.applyRowData(e,t,e.rowData.length)}isLastRowIndexKnown(){const e=this.getRootStore();return!!e&&e.isLastRowIndexKnown()}onColumnEverything(){var e,t,i,o,n;if(!this.storeParams)return void this.resetRootStore();const r=this.columnsToValueObjects(null===(e=this.rowGroupColsSvc)||void 0===e?void 0:e.columns),a=this.columnsToValueObjects(null===(t=this.valueColsSvc)||void 0===t?void 0:t.columns),l=this.columnsToValueObjects(null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns),d=e=>{const t={};for(const n of e.oldCols)t[n.id]=n;const i=e.newCols.every(e=>{const i=t[e.id];return i&&delete t[e.id],i&&i.field===e.field&&i.aggFunc===e.aggFunc}),o=!e.allowRemovedColumns&&!!Object.values(t).length;return i&&!o},c=!(0,s.V67)(this.storeParams.sortModel,null!==(o=null===(n=this.sortSvc)||void 0===n?void 0:n.getSortModel())&&void 0!==o?o:[]),u=!d({oldCols:this.storeParams.rowGroupCols,newCols:r}),h=!d({oldCols:this.storeParams.pivotCols,newCols:l}),p=!(null===r||void 0===r||!r.length)&&!d({oldCols:this.storeParams.valueCols,newCols:a,allowRemovedColumns:!0});if(c||u||h||p)this.resetRootStore();else{const e=this.createStoreParams();this.storeParams.rowGroupCols=e.rowGroupCols,this.storeParams.pivotCols=e.pivotCols,this.storeParams.valueCols=e.valueCols}}destroyRootStore(){var e;null!==(e=this.rootNode)&&void 0!==e&&e.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())}refreshAfterSort(e,t){this.storeParams&&(this.storeParams.sortModel=e);const i=this.getRootStore();i&&(i.refreshAfterSort(t),this.onStoreUpdated())}generateSecondaryColumns(e){var t;if(!this.pivotColDefSvc)return void this.gos.assertModuleRegistered("SharedPivot",2);const i=this.pivotColDefSvc.createColDefsFromFields(e);this.managingPivotResultColumns=!0,null===(t=this.pivotResultCols)||void 0===t||t.setPivotResultCols(i,"rowModelUpdated")}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes(),t=(0,s.Syv)(this.beans,this.rootNode);if(this.rootNode.setRowHeight(t.height,t.estimated),this.rootNode.sibling){const e=(0,s.Syv)(this.beans,this.rootNode.sibling);this.rootNode.sibling.setRowHeight(e.height,e.estimated)}e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{const i=(0,s.Syv)(this.beans,t);t.setRowHeight(i.height,i.estimated);const o=t.detailNode;if(o){const e=(0,s.Syv)(this.beans,o);o.setRowHeight(e.height,e.estimated)}if(t.sibling){const e=(0,s.Syv)(this.beans,t.sibling);null===o||void 0===o||o.setRowHeight(e.height,e.estimated)}e=!0}),e}resetRootStore(){var e;(this.destroyRootStore(),this.rootNode=new s.TUE(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns)&&(null===(e=this.pivotResultCols)||void 0===e||e.setPivotResultCols(null,"api"),this.managingPivotResultColumns=!1);this.dispatchModelUpdated(!0)}columnsToValueObjects(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>({id:e.getId(),aggFunc:e.getAggFunc(),displayName:this.colNames.getDisplayNameForColumn(e,"model"),field:e.getColDef().field}))}createStoreParams(){var e,t,i,o,n,r,a,l,d;const c=this.columnsToValueObjects(null===(e=this.rowGroupColsSvc)||void 0===e?void 0:e.columns),u=this.columnsToValueObjects(null===(t=this.valueColsSvc)||void 0===t?void 0:t.columns),h=this.columnsToValueObjects(null===(i=this.pivotColsSvc)||void 0===i?void 0:i.columns),p=(0,s.bT4)(this.gos);return{valueCols:u,rowGroupCols:c,pivotCols:h,pivotMode:this.colModel.isPivotMode(),filterModel:null!==(o=this.filterManager)&&void 0!==o&&o.isAdvFilterEnabled()?null===(n=this.filterManager)||void 0===n?void 0:n.getAdvFilterModel():null!==(r=null===(a=this.filterManager)||void 0===a?void 0:a.getFilterModel())&&void 0!==r?r:{},sortModel:null!==(l=null===(d=this.sortSvc)||void 0===d?void 0:d.getSortModel())&&void 0!==l?l:[],datasource:this.datasource,lastAccessedSequence:{value:0},dynamicRowHeight:p}}getParams(){return this.storeParams}dispatchModelUpdated(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.eventSvc.dispatchEvent({type:"modelUpdated",animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1})}onStoreUpdated(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}onRowHeightChanged(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}updateRowIndexesAndBounds(){const e=this.getRootStore();e&&e.setDisplayIndexes({value:0},{value:0},0)}retryLoads(){const e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())}getRow(e){const t=this.getRootStore();if(t)return t.getRowUsingDisplayIndex(e)}refreshAfterFilter(e,t){this.storeParams&&(this.storeParams.filterModel=e);const i=this.getRootStore();i&&(i.refreshAfterFilter(t),this.onStoreUpdated())}getRootStore(){var e;return null===(e=this.rootNode)||void 0===e?void 0:e.childStore}getRowCount(){const e=this.getRootStore();return e?e.getDisplayIndexEnd():0}getTopLevelRowCount(){const e=this.getRootStore();return e?e.getRowCount():1}getTopLevelRowDisplayedIndex(e){const t=this.getRootStore();return t?t.getTopLevelRowDisplayedIndex(e):e}getRowBounds(e){const t=this.getRootStore();if(!t){return{rowTop:0,rowHeight:(0,s.YvH)(this.beans)}}return t.getRowBounds(e)}getBlockStates(){const e=this.getRootStore();if(!e)return;const t={};return e.forEachStoreDeep(e=>{const i=e.getBlockStates();for(const o of Object.keys(i))t[o]=i[o]}),t}getRowIndexAtPixel(e){const t=this.getRootStore();return e<=0||!t?0:t.getRowIndexAtPixel(e)}isEmpty(){return!1}getOverlayType(){const e=this.getRootStore();var t;return 0===(null===e||void 0===e?void 0:e.getDisplayIndexEnd())?null!==(t=this.filterManager)&&void 0!==t&&t.isAnyFilterPresent()?"noMatchingRows":"noRows":null}isRowsToRender(){return null!=this.getRootStore()&&this.getRowCount()>0}getType(){return"serverSide"}forEachNode(e){const t=this.getRootStore();t&&t.forEachNodeDeep(e)}forEachDisplayedNode(e){this.forEachNode((t,i)=>{!t.stub&&t.displayed&&e(t,i)})}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getRootStore();i&&i.forEachNodeDeepAfterFilterAndSort(e,void 0,t)}executeOnStore(e,t){if(!this.started)return!1;const i=this.getRootStore();if(!i)return!0;const o=i.getChildStore(e);return o&&t(o),!0}refreshStore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.route?e.route:[];this.executeOnStore(t,t=>t.refreshStore(1==e.purge))}getStoreState(){const e=[],t=this.getRootStore();return t&&t.addStoreStates(e),e}getNodesInRangeForSelection(e,t){const i=e.rowIndex,o=t.rowIndex;if(null===i&&null===o)return[];if(null===o)return e?[e]:[];if(null===i)return[t];const n=[],[s,r]=[i,o].sort((e,t)=>e-t);return this.forEachNode(e=>{const t=e.rowIndex;null==t||e.stub||t>=s&&t<=r&&n.push(e)}),n.length!==r-s+1?null:n}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i),i.detailNode&&i.detailNode.id===e&&(t=i.detailNode)}),t}isRowPresent(e){return!!this.getRowNode(e.id)}setRowCount(e,t){const i=this.getRootStore();i&&i.setRowCount(e,t)}destroy(){this.destroyDatasource(),this.destroyRootStore(),super.destroy()}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};var Ic=class extends s.XQb{constructor(){super(...arguments),this.name="expand",this.expanded=new Set,this.collapsed=new Set,this.initialState=new Map}setExpandedState(e){let{expandedRowGroupIds:t,collapsedRowGroupIds:i}=e;this.expanded=new Set(t),this.collapsed=new Set(i);for(const o of this.expanded)this.initialState.set(o,!1);for(const o of this.collapsed)this.initialState.set(o,!0)}getExpandedState(){return{expandedRowGroupIds:Array.from(this.expanded),collapsedRowGroupIds:Array.from(this.collapsed)}}setRowExpanded(e,t){const i=e.id,o=this.initialState.get(i)===t;if(t)return this.collapsed.delete(i),void(o||this.expanded.add(i));this.expanded.delete(i),o||this.collapsed.add(i)}isRowExpanded(e){const t=e.id;if(this.expanded.has(t))return!0;if(this.collapsed.has(t))return!1;const i=this.initialState.get(t);if(null!=i)return i;const o=this.getInitialRowState(e);return this.initialState.set(t,o),o}getInitialRowState(e){if(!e.isExpandable())return!1;const t=this.gos.getCallback("isServerSideGroupOpenByDefault");if(!t)return!1;return t({data:e.data,rowNode:e})}isRowInitialised(e){return this.initialState.has(e)}expandAll(e){this.beans.rowModel.forEachNode(t=>{this.setRowExpanded(t,e)})}},Lc=class extends s.XQb{constructor(){super(...arguments),this.name="expandAll",this.allExpanded=void 0,this.flipped=new Set}setExpandedState(e){this.allExpanded=e.expandAll,this.flipped=new Set(e.invertedRowGroupIds)}getExpandedState(){return{expandAll:this.allExpanded,invertedRowGroupIds:Array.from(this.flipped)}}setRowExpanded(e,t){const i=e.id;t!==this.allExpanded?this.flipped.add(i):this.flipped.delete(i)}isRowExpanded(e){const t=e.id;return this.allExpanded!==this.flipped.has(t)}isRowInitialised(){return!0}expandAll(e){this.allExpanded=e,this.flipped.clear()}},Nc=class extends s.XQb{constructor(e){super(),this.selectionCtx=e,this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectAllUsed=!1,this.selectedNodes={}}getSelectedState(){return{selectAll:this.selectedState.selectAll,toggledNodes:[...this.selectedState.toggledNodes]}}setSelectedState(e){if("object"!==typeof e)return void(0,s.CkN)(116);if(!("selectAll"in e))return void(0,s.CkN)(116);if("boolean"!==typeof e.selectAll)return void(0,s.CkN)(117);if(!("toggledNodes"in e)||!Array.isArray(e.toggledNodes))return(0,s.ujB)(197);const t={selectAll:e.selectAll,toggledNodes:new Set};e.toggledNodes.forEach(e=>{"string"===typeof e?t.toggledNodes.add(e):(0,s.ujB)(196,{key:e})});const i=t.selectAll||t.toggledNodes.size>1;(0,s.iFJ)(this.gos)&&!(0,s.F_Q)(this.gos)&&i?(0,s.ujB)(130):this.selectedState=t}deleteSelectionStateFromParent(e,t){if(0===this.selectedState.toggledNodes.size)return!1;let i=!1;for(const o of t)this.selectedState.toggledNodes.delete(o)&&(i=!0);return i}setNodesSelected(e){var t=this;const{nodes:i,clearSelection:o,newValue:n,source:r}=e;if(0===i.length)return 0;const a=o&&n;if(!(0,s.F_Q)(this.gos)||a){if(i.length>1)return(0,s.CkN)(130),0;const e=i[0],t=e.footer?e.sibling:e;return n&&t.selectable?(this.selectedNodes={[t.id]:t},this.selectedState={selectAll:!1,toggledNodes:new Set([t.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),1}const l=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const o=e.footer?e.sibling:e;i&&o.selectable?t.selectedNodes[o.id]=o:delete t.selectedNodes[o.id];i===t.selectedState.selectAll||!o.selectable?t.selectedState.toggledNodes.delete(o.id):t.selectedState.toggledNodes.add(o.id)};for(const s of i)l(s);return 1===i.length&&"api"===r&&this.selectionCtx.setRoot(i[0].footer?i[0].sibling:i[0]),1}processNewRow(e){this.selectedNodes[e.id]&&(this.selectedNodes[e.id]=e)}isNodeSelected(e){const t=this.selectedState.toggledNodes.has(e.id);return this.selectedState.selectAll?!t:t}getSelectedNodes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{selectedState:{selectAll:i},selectedNodes:o,selectAllUsed:n}=this;return t&&n&&(0,s.ujB)(199),e&&i?null:Object.values(o)}getSelectedRows(){var e;return(null!==(e=this.getSelectedNodes())&&void 0!==e?e:[]).map(e=>e.data)}getSelectionCount(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size}isEmpty(){var e;return!this.selectedState.selectAll&&!(null!==(e=this.selectedState.toggledNodes)&&void 0!==e&&e.size)}selectAllRowNodes(){this.reset(!0)}deselectAllRowNodes(){this.reset(!1)}reset(e){this.selectedState={selectAll:e,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed||(this.selectAllUsed=e)}getSelectAllState(){return this.selectedState.selectAll?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null}},Oc=class extends s.XQb{constructor(e){super(),this.selectionCtx=e,this.selectedState={selectAllChildren:!1,toggledNodes:new Map}}wireBeans(e){this.rowModel=e.rowModel,this.rowGroupColsSvc=e.rowGroupColsSvc,this.filterManager=e.filterManager,this.selectionSvc=e.selectionSvc}postConstruct(){this.addManagedEventListeners({modelUpdated:()=>this.removeRedundantState(),columnRowGroupChanged:()=>this.selectionSvc.reset("rowGroupChanged")})}getSelectedState(){const{gos:e,rowGroupColsSvc:t,selectedState:i}=this,o=e.get("treeData"),n=(e,i,s)=>{const r={nodeId:s};if((o||t&&i<=t.columns.length)&&(r.selectAllChildren=e.selectAllChildren),e.toggledNodes.size){const t=[];e.toggledNodes.forEach((e,o)=>{const s=n(e,i+1,o);t.push(s)}),r.toggledNodes=t}return r};return n(i,0)}setSelectedState(e){if("selectAll"in e)return void(0,s.CkN)(111);const t=(e,i)=>{var o,n;if("object"!==typeof e)throw(0,s.CkN)(243),new Error;if("selectAllChildren"in e&&"boolean"!==typeof e.selectAllChildren)throw(0,s.CkN)(244),new Error;if("toggledNodes"in e){if(!Array.isArray(e.toggledNodes))throw(0,s.CkN)(245),new Error;if(!e.toggledNodes.every(e=>"object"===typeof e&&"nodeId"in e&&"string"===typeof e.nodeId))throw(0,s.CkN)(246),new Error}const r=null!==(o=e.selectAllChildren)&&void 0!==o?o:!i,a=null===(n=e.toggledNodes)||void 0===n?void 0:n.map(e=>[e.nodeId,t(e,r)]);if(null===a||void 0===a?void 0:a.some(e=>{let[,t]=e;return r===t.selectAllChildren&&0===t.toggledNodes.size}))throw(0,s.CkN)(247),new Error;return{selectAllChildren:r,toggledNodes:new Map(a)}};try{this.selectedState=t(e,!!e.selectAllChildren)}catch(i){}}deleteSelectionStateFromParent(e,t){let i=this.selectedState;const o=[...e];for(;i&&o.length;)i=i.toggledNodes.get(o.pop());if(!i)return!1;let n=!1;for(const r of t){var s;null!==(s=i)&&void 0!==s&&s.toggledNodes.delete(r)&&(n=!0)}return n&&this.removeRedundantState(),n}setNodesSelected(e){let{nodes:t,newValue:i,clearSelection:o,source:n}=e;if(0===t.length)return 0;const r=o&&i;if(!(0,s.F_Q)(this.gos)||r){if(t.length>1)return(0,s.CkN)(130),0;this.deselectAllRowNodes()}for(const s of t){const e=s.footer?s.sibling:s,t=this.getRouteToNode(e);this.recursivelySelectNode(t,this.selectedState,i)}return this.removeRedundantState(),1===t.length&&"api"===n&&this.selectionCtx.setRoot(t[0].footer?t[0].sibling:t[0]),1}isNodeSelected(e){const t=this.getRouteToNode(e);return this.isNodePathSelected(t,this.selectedState)}isNodePathSelected(e,t){let[i,...o]=e;if(0===o.length){const e=t.toggledNodes.has(i.id);if(i.hasChildren()){const e=t.toggledNodes.get(i.id);if(null!==e&&void 0!==e&&e.toggledNodes.size)return}return t.selectAllChildren?!e:e}if(t.toggledNodes.has(i.id)){const e=t.toggledNodes.get(i.id);if(e)return this.isNodePathSelected(o,e)}return t.selectAllChildren}getRouteToNode(e){const t=[];let i=e;for(;i.parent;)t.push(i),i=i.parent;return t.reverse()}removeRedundantState(){var e,t=this;if(null!==(e=this.filterManager)&&void 0!==e&&e.isAnyFilterPresent())return;const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.selectedState,o=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e.toggledNodes.forEach((t,o)=>{i(t,o,e)}),o){const i=t.rowModel.getRowNode(o),n=null===i||void 0===i?void 0:i.childStore;if(null===n||void 0===n?void 0:n.isLastRowIndexKnown()){if(e.toggledNodes.size>=n.getRowCount()){for(const i of e.toggledNodes.entries()){const[e,o]=i;if(o.toggledNodes.size>0)return;if(!t.rowModel.getRowNode(e))return}e.selectAllChildren=!e.selectAllChildren,e.toggledNodes.clear()}}}const s=0===e.toggledNodes.size,r=(null===n||void 0===n?void 0:n.selectAllChildren)===e.selectAllChildren;s&&r&&(null===n||void 0===n||n.toggledNodes.delete(o))};i()}recursivelySelectNode(e,t,i){var o;let[n,...s]=e;if(!n)return;if(!s.length){const e=n.selectable;if(t.selectAllChildren===i||!e)return void t.toggledNodes.delete(n.id);const o={selectAllChildren:i,toggledNodes:new Map};return void t.toggledNodes.set(n.id,o)}const r=t.toggledNodes.has(n.id),a=null!==(o=t.toggledNodes.get(n.id))&&void 0!==o?o:{selectAllChildren:t.selectAllChildren,toggledNodes:new Map};r||t.toggledNodes.set(n.id,a),this.recursivelySelectNode(s,a,i),t.selectAllChildren===a.selectAllChildren&&0===a.toggledNodes.size&&t.toggledNodes.delete(n.id)}getSelectedNodes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if((0,s.ujB)(202),this.selectedState.selectAllChildren&&e)return null;const t=[];return this.rowModel.forEachNode(e=>{e.isSelected()&&t.push(e)}),t}processNewRow(){}getSelectedRows(){var e,t;return null!==(e=null===(t=this.getSelectedNodes())||void 0===t?void 0:t.map(e=>e.data))&&void 0!==e?e:[]}getSelectionCount(){return-1}isEmpty(){var e;return!this.selectedState.selectAllChildren&&!(null!==(e=this.selectedState.toggledNodes)&&void 0!==e&&e.size)}selectAllRowNodes(){this.reset(!0)}deselectAllRowNodes(){this.reset(!1)}reset(e){this.selectedState={selectAllChildren:e,toggledNodes:new Map}}getSelectAllState(){return this.selectedState.selectAllChildren?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null}},Gc=class extends s.RAh{constructor(){super(...arguments),this.beanName="selectionSvc"}postConstruct(){super.postConstruct(),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{const e=(0,s.wEz)(this.gos),t=e&&this.selectionStrategy instanceof Nc?Oc:!e&&this.selectionStrategy instanceof Oc?Nc:void 0;t&&(this.destroyBean(this.selectionStrategy),this.selectionStrategy=this.createManagedBean(new t(this.selectionCtx)),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged("api"))}),this.addManagedPropertyListeners(["rowSelection"],()=>{const e=(0,s.jit)(this.gos);e!==this.selectionMode&&(this.selectionMode=e,this.deselectAllRowNodes({source:"api"}))}),this.selectionMode=(0,s.jit)(this.gos);const e=(0,s.wEz)(this.gos)?Oc:Nc;this.selectionStrategy=this.createManagedBean(new e(this.selectionCtx))}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;let o=0;const n=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);return null==n?0:(this.selectionCtx.selectAll=!1,"select"in n?(n.reset?this.selectionStrategy.deselectAllRowNodes({source:"api"}):this.selectionStrategy.setNodesSelected({nodes:n.deselect,newValue:!1,source:i}),o=this.selectionStrategy.setNodesSelected({nodes:n.select,newValue:!0,source:i})):o=this.selectionStrategy.setNodesSelected({nodes:[n.node],newValue:n.newValue,clearSelection:n.clearSelection,event:e,source:i}),this.shotgunResetNodeSelectionState(i),this.dispatchSelectionChanged(i),o)}getSelectionState(){return this.selectionStrategy.getSelectedState()}setSelectionState(e,t){(0,s.MBb)(this.gos)?Array.isArray(e)||(e?(this.selectionStrategy.setSelectedState(e),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged(t)):this.deselectAllRowNodes({source:t})):e&&(0,s.ujB)(132)}setNodesSelected(e){if(!(0,s.MBb)(this.gos)&&e.newValue)return(0,s.ujB)(132),0;const{nodes:t}=e,i=(0,o.A)(e,r);if(t.length>1&&"multiRow"!==this.selectionMode)return(0,s.ujB)(130),0;const a=(0,n.A)({nodes:t.filter(e=>e.selectable)},i);if(!a.nodes.length)return 0;const l=this.selectionStrategy.setNodesSelected(a);return this.shotgunResetNodeSelectionState(a.source),this.dispatchSelectionChanged(a.source),l}deleteSelectionStateFromParent(e,t){this.selectionStrategy.deleteSelectionStateFromParent(e,t)&&(this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged("api"))}shotgunResetNodeSelectionState(e){this.beans.rowModel.forEachNode(t=>{if(t.stub)return;const i=this.selectionStrategy.isNodeSelected(t);i!==t.isSelected()&&this.selectRowNode(t,i,void 0,e)})}getSelectedNodes(){var e;return null!==(e=this.selectionStrategy.getSelectedNodes())&&void 0!==e?e:[]}getSelectedRows(){return this.selectionStrategy.getSelectedRows()}getSelectionCount(){return this.selectionStrategy.getSelectionCount()}syncInRowNode(e){this.selectionStrategy.processNewRow(e);const t=this.selectionStrategy.isNodeSelected(e);if(0!=t&&!e.selectable)return this.selectionStrategy.setNodesSelected({nodes:[e],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState(),void this.dispatchSelectionChanged("api");e.__selected=t}reset(){this.selectionStrategy.deselectAllRowNodes({source:"api"}),this.selectionCtx.reset()}isEmpty(){return this.selectionStrategy.isEmpty()}hasNodesToSelect(){return!0}selectAllRowNodes(e){if((0,s.MBb)(this.gos)){if(Bc(e),(0,s.iFJ)(this.gos)&&!(0,s.F_Q)(this.gos))return(0,s.ujB)(130);this.selectionStrategy.selectAllRowNodes(e),this.selectionCtx.selectAll=!0,this.beans.rowModel.forEachNode(t=>{t.stub||this.selectRowNode(t,!0,void 0,e.source)}),this.dispatchSelectionChanged(e.source)}else(0,s.ujB)(132)}deselectAllRowNodes(e){Bc(e),this.selectionStrategy.deselectAllRowNodes(e),this.selectionCtx.selectAll=!1,this.beans.rowModel.forEachNode(t=>{t.stub||this.selectRowNode(t,!1,void 0,e.source)}),this.dispatchSelectionChanged(e.source)}getSelectAllState(e){return this.selectionStrategy.getSelectAllState(e)}getBestCostNodeSelection(){return(0,s.ujB)(194,{method:"getBestCostNodeSelection"})}updateSelectable(){if(!(0,s.MBb)(this.gos))return;const e=[];this.beans.rowModel.forEachNode(t=>{!this.updateRowSelectable(t,!0)&&t.isSelected()&&e.push(t)}),e.length&&this.setNodesSelected({nodes:e,newValue:!1,source:"selectableChanged"})}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.selectionStrategy instanceof Oc?null:this.selectionStrategy.getSelectedNodes(!0,!1),serverSideState:this.getSelectionState()})}updateSelectableAfterGrouping(){return(0,s.CkN)(194,{method:"updateSelectableAfterGrouping"})}refreshMasterNodeState(){}setDetailSelectionState(){}};function Bc(e){let{selectAll:t}=e;"filtered"!==t&&"currentPage"!==t||(0,s.ujB)(195,{justCurrentPage:"currentPage"===t})}var Vc=class extends s.XQb{constructor(){super(...arguments),this.beanName="rowChildrenSvc"}getHasChildrenValue(e){const t=this.gos.get("treeData"),i=this.gos.get("isServerSideGroup");return!e.stub&&!e.footer&&(t?!!i&&i(e.data):!!e.group)}},Hc=class extends s.XQb{constructor(){super(...arguments),this.beanName="lazyBlockLoadingSvc",this.outboundRequests=0,this.cacheLoadingNodesMap=new Map,this.isCheckQueued=!1,this.nextBlockToLoad=void 0}wireBeans(e){this.rowRenderer=e.rowRenderer,this.rowModel=e.rowModel}postConstruct(){this.maxOutboundRequests=(0,s.KTf)(this.gos)}subscribe(e){this.cacheLoadingNodesMap.set(e,new Set)}unsubscribe(e){this.cacheLoadingNodesMap.delete(e)}queueLoadCheck(){this.isCheckQueued||(this.isCheckQueued=!0,setTimeout(()=>{this.queueLoadAction(),this.isCheckQueued=!1}))}onLoadComplete(){this.outboundRequests-=1,this.queueLoadCheck()}hasAvailableLoadBandwidth(){return void 0===this.maxOutboundRequests||this.outboundRequests<this.maxOutboundRequests}queueLoadAction(){const e=this.getBlockToLoad();if(!e)return;const t=this.nextBlockToLoad&&this.nextBlockToLoad.cache===e.cache&&this.nextBlockToLoad.index===e.index;if(!t&&(!this.nextBlockToLoad||!t)){this.nextBlockToLoad=e,window.clearTimeout(this.loaderTimeout);const t=Number(this.nextBlockToLoad.index),i=this.nextBlockToLoad.cache,o=e.index+e.cache.getBlockSize();this.loaderTimeout=window.setTimeout(()=>{i.isAlive()&&(this.loaderTimeout=void 0,this.attemptLoad(i,t,o),this.nextBlockToLoad=void 0)},this.gos.get("blockLoadDebounceMillis"))}}attemptLoad(e,t,i){this.hasAvailableLoadBandwidth()&&(this.executeLoad(e,t,i),this.queueLoadCheck())}executeLoad(e,t,i){var o,n;const r=e.getSsrmParams(),a={startRow:t,endRow:i,rowGroupCols:r.rowGroupCols,valueCols:r.valueCols,pivotCols:r.pivotCols,pivotMode:r.pivotMode,groupKeys:null!==(o=e.store.getParentNode().getRoute())&&void 0!==o?o:[],filterModel:r.filterModel,sortModel:r.sortModel},l=this.cacheLoadingNodesMap.get(e),d=()=>{for(let e=0;e<i-t;e++)l.delete(t+e)},c=(0,s.AuN)(this.gos,{request:a,success:o=>{this.onLoadComplete(),e.onLoadSuccess(t,i-t,o),d()},fail:()=>{this.onLoadComplete(),e.onLoadFailed(t,i-t),d()},parentNode:e.store.getParentNode()});(()=>{for(let e=0;e<i-t;e++)l.add(t+e)})(),this.outboundRequests+=1,null===(n=e.getSsrmParams().datasource)||void 0===n||n.getRows(c)}getBlockToLoad(){var e;const t=this.rowRenderer.firstRenderedRow,i=this.rowRenderer.lastRenderedRow;for(let d=t;d<=i;d++){var o;const e=this.rowModel.getRow(d);if(!e)continue;const t=null===(o=e.parent)||void 0===o?void 0:o.childStore;if(!t)continue;const i=t.getCache(),n=i.getNodes().getBy("node",e);if(!n)continue;const s=this.cacheLoadingNodesMap.get(i);if((null===s||void 0===s||!s.has(n.index))&&(e.__needsRefreshWhenVisible||e.stub&&!e.failedLoad))return{cache:i,index:i.getBlockStartIndex(n.index)}}let n=null,s=null,r=Number.MAX_SAFE_INTEGER;for(const d of this.cacheLoadingNodesMap.keys()){d.getNodesToRefresh().forEach(e=>{if(null==e.rowIndex)return s=e,void(n=d);const o=d.getNodes().getBy("node",e);if(!o)return;const a=this.cacheLoadingNodesMap.get(d);if(null!==a&&void 0!==a&&a.has(o.index))return;const l=Math.abs(t-e.rowIndex),c=Math.abs(e.rowIndex-i);l<r&&(s=e,r=l,n=d),c<r&&(s=e,r=c,n=d)})}if(!n)return;const a=n,l=null===(e=a.getNodes().getBy("node",s))||void 0===e?void 0:e.index;return null==l?void 0:{cache:a,index:a.getBlockStartIndex(l)}}isRowLoading(e,t){var i,o;return null!==(i=null===(o=this.cacheLoadingNodesMap.get(e))||void 0===o?void 0:o.has(t))&&void 0!==i&&i}},zc=class{constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.indexes=t,this.maps=new Map(this.indexes.map(e=>[e,new Map]))}getSize(){return this.maps.get(this.indexes[0]).size}getBy(e,t){return this.maps.get(e).get(t)}set(e){for(const t of this.indexes){this.maps.get(t).set(e[t],e)}}delete(e){for(const t of this.indexes){this.maps.get(t).delete(e[t])}}clear(){this.maps.forEach(e=>e.clear())}getIterator(e){return this.maps.get(e).values()}forEach(e){const t=this.getIterator(this.indexes[0]);let i;for(;(i=t.next())&&!i.done;)e(i.value)}find(e){const t=this.getIterator(this.indexes[0]);let i;for(;(i=t.next())&&!i.done;)if(e(i.value))return i.value}filter(e){const t=this.getIterator(this.indexes[0]);let i;const o=[];for(;(i=t.next())&&!i.done;)e(i.value)&&o.push(i.value);return o}},Wc=class extends s.XQb{constructor(e,t,i,o){super(),this.live=!0,this.removedNodeCache=new Map,this.store=e,this.numberOfRows=t,this.isLastRowKnown=i,this.storeParams=o}wireBeans(e){this.rowRenderer=e.rowRenderer,this.blockUtils=e.ssrmBlockUtils,this.focusSvc=e.focusSvc,this.nodeManager=e.ssrmNodeManager,this.serverSideRowModel=e.rowModel,this.rowNodeSorter=e.rowNodeSorter,this.sortSvc=e.sortSvc,this.lazyBlockLoadingSvc=e.lazyBlockLoadingSvc,this.colModel=e.colModel}postConstruct(){this.lazyBlockLoadingSvc.subscribe(this),this.nodeMap=new zc("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set;const{blockUtils:e,gos:t,store:i}=this;this.defaultNodeIdPrefix=e.createNodeIdPrefix(i.getParentNode()),this.getRowIdFunc=(0,s.En5)(t),this.isMasterDetail=t.get("masterDetail")}destroy(){this.lazyBlockLoadingSvc.unsubscribe(this),this.numberOfRows=0,this.nodeMap.forEach(e=>this.blockUtils.destroyRowNode(e.node)),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1,super.destroy()}getRowByDisplayIndex(e){var t;if(!this.store.isDisplayIndexInStore(e))return;const i=this.nodeDisplayIndexMap.get(e);if(i)return(i.stub||i.__needsRefreshWhenVisible)&&this.lazyBlockLoadingSvc.queueLoadCheck(),i;if(this.gos.get("groupHideOpenParents")||this.gos.get("groupAllowUnbalanced")){const t=this.nodeMap.find(t=>{var i;return!(null===(i=t.node.childStore)||void 0===i||!i.isDisplayIndexInStore(e))});var o;if(t)return null===(o=t.node.childStore)||void 0===o?void 0:o.getRowUsingDisplayIndex(e)}if(e===this.store.getDisplayIndexStart())return this.createStubNode(0,e);const n=this.nodeDisplayIndexMap.get(e-1);if(n){var s,r;if(this.isMasterDetail&&n.master&&n.expanded)return n.detailNode;if(n.expanded&&null!==(s=n.childStore)&&void 0!==s&&s.isDisplayIndexInStore(e))return null===(r=n.childStore)||void 0===r?void 0:r.getRowUsingDisplayIndex(e);const t=this.nodeMap.getBy("node",n);return this.createStubNode(t.index+1,e)}const a=this.getSurroundingNodesByDisplayIndex(e);if(null==a){const t=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(t,e)}const{previousNode:l,nextNode:d}=a;var c;if(null!==l&&void 0!==l&&l.node.expanded&&null!==(t=l.node.childStore)&&void 0!==t&&t.isDisplayIndexInStore(e))return null===(c=l.node.childStore)||void 0===c?void 0:c.getRowUsingDisplayIndex(e);if(d){const t=d.node.rowIndex-e,i=d.index-t;return this.createStubNode(i,e)}const u=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(u,e)}createStubNode(e,t){const i=this.store.getRowBounds(t),o=this.createRowAtIndex(e,null,e=>{e.setRowIndex(t),e.setRowTop(i.rowTop),this.nodeDisplayIndexMap.set(t,e)});if(0===e&&this.gos.get("groupHideOpenParents")){const e=this.store.getParentNode().groupData;if(e)for(const t of Object.keys(e))vs(o,this.colModel,t,e[t])}return this.lazyBlockLoadingSvc.queueLoadCheck(),o}getRowByStoreIndex(e){var t;return null===(t=this.nodeMap.getBy("index",e))||void 0===t?void 0:t.node}skipDisplayIndexes(e,t,i){if(0===e)return;const o=(0,s.YvH)(this.beans);t.value+=e,i.value+=e*o}setDisplayIndexes(e,t,i){this.nodeDisplayIndexMap.clear();const o={};this.nodeMap.forEach(e=>{o[e.index]=e.node});let n=-1;for(const r of Object.keys(o)){const s=o[r],a=Number(r),l=a-1-n;this.skipDisplayIndexes(l,e,t);const d=0===a;if(s.firstChild!==d&&(s.firstChild=d,s.dispatchRowEvent("firstChildChanged")),d&&this.gos.get("groupHideOpenParents")){const e=this.store.getParentNode().groupData;if(e)for(const t of Object.keys(e))vs(s,this.colModel,t,d?e[t]:void 0)}this.blockUtils.setDisplayIndex(s,e,t,i),null!=s.rowIndex&&this.nodeDisplayIndexMap.set(s.rowIndex,s),n=a}const s=this.numberOfRows-1-n;this.skipDisplayIndexes(s,e,t),this.purgeExcessRows()}getRowCount(){return this.numberOfRows}setRowCount(e,t){this.numberOfRows=e,null!=t&&(this.isLastRowKnown=t,!1===t&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()}getNodes(){return this.nodeMap}getNodeCachedByDisplayIndex(e){var t;return null!==(t=this.nodeDisplayIndexMap.get(e))&&void 0!==t?t:null}getNodesToRefresh(){return this.nodesToRefresh}getSurroundingNodesByDisplayIndex(e){let t,i;return this.nodeMap.forEach(o=>{e>o.node.rowIndex?(null==i||i.node.rowIndex<o.node.rowIndex)&&(i=o):(null==t||t.node.rowIndex>o.node.rowIndex)&&(t=o)}),i||t?{previousNode:i,nextNode:t}:null}getDisplayIndexFromStoreIndex(e){var t,i;const o=this.nodeMap.getBy("index",e);if(o)return o.node.rowIndex;let n,s;if(this.nodeMap.forEach(t=>{e>t.index?(null==s||s.index<t.index)&&(s=t):(null==n||n.index>t.index)&&(n=t)}),!n)return this.store.getDisplayIndexEnd()-(this.numberOfRows-e);if(!s)return this.store.getDisplayIndexStart()+e;const r=e-s.index;return(null!==(t=null===(i=s.node.childStore)||void 0===i?void 0:i.getDisplayIndexEnd())&&void 0!==t?t:s.node.rowIndex)+r}createRowAtIndex(e,t,i){const o=this.nodeMap.getBy("index",e);if(o){const{node:i}=o;if(i.__needsRefreshWhenVisible=!1,this.doesNodeMatch(t,i))return this.blockUtils.updateDataIntoRowNode(i,t),this.nodesToRefresh.delete(i),i;if(null==this.getRowIdFunc&&i.hasChildren()&&i.expanded)return this.nodesToRefresh.delete(i),i;this.destroyRowAtIndex(e)}if(t&&null!=this.getRowIdFunc){var n;const i=this.getRowId(t),o=i&&(null===(n=this.removedNodeCache)||void 0===n?void 0:n.get(i));var s;if(o)return null===(s=this.removedNodeCache)||void 0===s||s.delete(i),this.blockUtils.updateDataIntoRowNode(o,t),this.nodeMap.set({id:o.id,node:o,index:e}),this.nodesToRefresh.delete(o),o.__needsRefreshWhenVisible=!1,o;const r=this.nodeMap.getBy("id",i);if(r){this.nodeMap.delete(r);const{node:i,index:o}=r;return this.blockUtils.updateDataIntoRowNode(i,t),this.nodeMap.set({id:i.id,node:i,index:e}),this.nodesToRefresh.delete(i),i.__needsRefreshWhenVisible=!1,this.getBlockStartIndex(o)===this.getBlockStartIndex(e)?i:(this.markBlockForVerify(o),i)}}const r=this.blockUtils.createRowNode(this.store.getRowDetails());if(null!=t){const e=this.getPrefixedId(this.store.getIdSequence().value++);this.blockUtils.setDataIntoRowNode(r,t,e,void 0),this.blockUtils.checkOpenByDefault(r),this.nodeManager.addRowNode(r)}return this.nodeMap.set({id:r.id,node:r,index:e}),i&&i(r),r}getBlockStates(){const e={},t={};this.nodeMap.forEach(i=>{let{node:o,index:n}=i;const s=this.getBlockStartIndex(n);var r;o.stub||o.failedLoad||(e[s]=(null!==(r=e[s])&&void 0!==r?r:0)+1);let a="loaded";o.failedLoad?a="failed":this.lazyBlockLoadingSvc.isRowLoading(this,s)?a="loading":(this.nodesToRefresh.has(o)||o.stub)&&(a="needsLoading"),t[s]||(t[s]=new Set),t[s].add(a)});const i={loading:4,failed:3,needsLoading:2,loaded:1},o=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),n={};for(const r of Object.keys(t)){var s;const a=[...t[r]].sort((e,t)=>{var o,n;return(null!==(o=i[e])&&void 0!==o?o:0)-(null!==(n=i[t])&&void 0!==n?n:0)})[0],l=Number(r)/this.getBlockSize();n[o?"".concat(o,"-").concat(l):String(l)]={blockNumber:l,startRow:Number(r),endRow:Number(r)+this.getBlockSize(),pageStatus:a,loadedRowCount:null!==(s=e[r])&&void 0!==s?s:0}}return n}destroyRowAtIndex(e){const t=this.nodeMap.getBy("index",e);t&&(this.nodeMap.delete(t),this.nodeDisplayIndexMap.delete(t.node.rowIndex),this.nodesToRefresh.size>0?this.removedNodeCache.set(t.node.id,t.node):this.blockUtils.destroyRowNode(t.node),this.nodesToRefresh.delete(t.node))}getSsrmParams(){return this.store.getSsrmParams()}getPrefixedId(e){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+e:e.toString()}markBlockForVerify(e){const[t,i]=this.getBlockBounds(e);this.nodeMap.filter(e=>e.index>=t&&e.index<i).forEach(e=>{let{node:t}=e;t.__needsRefreshWhenVisible=!0})}doesNodeMatch(e,t){if(t.stub)return!1;const i=this.getRowId(e);return null===i?t.data===e:t.id===i}purgeStubsOutsideOfViewport(){const{firstRenderedRow:e,lastRenderedRow:t}=this.rowRenderer,i=this.getBlockStartIndex(e),[,o]=this.getBlockBounds(t);this.nodeMap.forEach(e=>{this.lazyBlockLoadingSvc.isRowLoading(this,e.index)||e.node.failedLoad||e.node.stub&&(e.index<i||e.index>o)&&this.destroyRowAtIndex(e.index)})}getBlocksDistanceFromRow(e,t){const i={};return e.forEach(e=>{let{node:o,index:n}=e;const[s,r]=this.getBlockBounds(n);if(s in i)return;const a=Math.abs(o.rowIndex-t);let l;const d=this.nodeMap.getBy("index",[r-1]);d&&(l=Math.abs(d.node.rowIndex-t));const c=null==l||a<l?a:l;i[s]=c}),Object.entries(i)}purgeExcessRows(){var e;if(this.purgeStubsOutsideOfViewport(),null==this.store.getDisplayIndexEnd()||null==this.storeParams.maxBlocksInCache)return;const{firstRenderedRow:t,lastRenderedRow:i}=this.rowRenderer,o=new Set,n=new Set;this.nodeMap.forEach(e=>{let{index:s,node:r}=e;const a=this.getBlockStartIndex(s);o.add(a);r.rowIndex>=t&&r.rowIndex<=i&&n.add(a)});const s=Math.max(n.size,null!==(e=this.storeParams.maxBlocksInCache)&&void 0!==e?e:0),r=o.size-s;if(r<=0)return;let a=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;n.forEach(e=>{a>e&&(a=e),l<e&&(l=e)});const d=this.nodeMap.filter(e=>{let{node:t,index:i}=e;const o=this.getBlockStartIndex(i);return!(o>=a&&o<=l)&&!this.isNodeCached(t)});if(0===d.length)return;const c=t+(i-t)/2,u=this.getBlocksDistanceFromRow(d,c),h=this.getBlockSize();u.sort((e,t)=>Math.sign(t[1]-e[1]));for(let p=0;p<Math.min(r,u.length);p++){const e=Number(u[p][0]);for(let t=e;t<e+h;t++){const e=this.nodeMap.getBy("index",t);e&&!this.isNodeCached(e.node)&&this.destroyRowAtIndex(t)}}}isNodeFocused(e){const t=this.focusSvc.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;return t.rowIndex===e.rowIndex}isNodeCached(e){var t;const i=e.isExpandable()&&e.expanded,o=this.gos.get("groupAllowUnbalanced")&&""===e.key,n=!(null===(t=this.beans.editSvc)||void 0===t||!t.isRowEditing(e));return i||this.isNodeFocused(e)||o||n}extractDuplicateIds(e){if(null==this.getRowIdFunc)return[];const t=new Set,i=new Set;return e.forEach(e=>{const o=this.getRowId(e);t.has(o)?i.add(o):t.add(o)}),[...i]}onLoadSuccess(e,t,i){if(!this.live)return;const o=i.groupLevelInfo;if(this.store.setStoreInfo(o),null!=this.getRowIdFunc){const o=this.extractDuplicateIds(i.rowData);if(o.length>0){const i=o.join(", ");return(0,s.ujB)(205,{duplicateIdText:i}),void this.onLoadFailed(e,t)}}i.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(i.pivotResultFields);const n=this.nodesToRefresh.size>0;if(i.rowData.forEach((t,i)=>{var o;const n=e+i,s=this.nodeMap.getBy("index",n);if(null===s||void 0===s||null===(o=s.node)||void 0===o||!o.stub)return s&&this.doesNodeMatch(t,s.node)?(this.blockUtils.updateDataIntoRowNode(s.node,t),this.nodesToRefresh.delete(s.node),void(s.node.__needsRefreshWhenVisible=!1)):void this.createRowAtIndex(n,t);this.createRowAtIndex(n,t)}),void 0!=i.rowCount&&-1!==i.rowCount)this.numberOfRows=i.rowCount,this.isLastRowKnown=!0;else if(t>i.rowData.length)this.numberOfRows=e+i.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){const t=e+i.rowData.length+1;t>this.numberOfRows&&(this.numberOfRows=t)}if(this.isLastRowKnown){this.nodeMap.filter(e=>e.index>=this.numberOfRows).forEach(e=>this.destroyRowAtIndex(e.index))}this.fireStoreUpdatedEvent();const r=0===this.nodesToRefresh.size;n&&r&&this.fireRefreshFinishedEvent()}fireRefreshFinishedEvent(){0===this.nodesToRefresh.size&&(this.removedNodeCache.forEach(e=>{this.blockUtils.destroyRowNode(e)}),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())}isStoreFullyLoaded(){const e=this.isLastRowKnown,t=this.nodeMap.getSize()===this.numberOfRows;if(!e||!t)return;if(this.nodesToRefresh.size>0)return;let i=-1;return null==this.nodeMap.find(e=>(i+=1,e.index!==i||(!!e.node.__needsRefreshWhenVisible||!!e.node.stub)))}isLastRowIndexKnown(){return this.isLastRowKnown}onLoadFailed(e,t){if(!this.live)return;const i=this.nodesToRefresh.size>0;for(let r=e;r<e+t&&r<this.getRowCount();r++){var o,n;let{node:e}=null!==(o=this.nodeMap.getBy("index",r))&&void 0!==o?o:{};e&&this.nodesToRefresh.delete(e),null!==(n=e)&&void 0!==n&&n.stub||(e&&!e.stub&&this.destroyRowAtIndex(r),e=this.createRowAtIndex(r)),e.__needsRefreshWhenVisible=!1,e.failedLoad=!0}const s=0===this.nodesToRefresh.size;i&&s&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}markNodesForRefresh(){this.nodeMap.forEach(e=>{e.node.stub&&!e.node.failedLoad||this.nodesToRefresh.add(e.node)}),this.lazyBlockLoadingSvc.queueLoadCheck(),this.isLastRowKnown&&0===this.numberOfRows&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())}isNodeInCache(e){return!!this.nodeMap.getBy("id",e)}fireStoreUpdatedEvent(){this.live&&this.store.fireStoreUpdatedEvent()}getRowId(e){var t;if(null==this.getRowIdFunc)return null;const{level:i}=this.store.getRowDetails(),o=null!==(t=this.store.getParentNode().getRoute())&&void 0!==t?t:[];return this.getRowIdFunc({data:e,parentKeys:o.length>0?o:void 0,level:i})}getOrderedNodeMap(){const e={};return this.nodeMap.forEach(t=>e[t.index]=t),e}clearDisplayIndexes(){this.nodeDisplayIndexMap.clear()}clientSideSortRows(){var e,t;const i=null!==(e=null===(t=this.sortSvc)||void 0===t?void 0:t.getSortOptions())&&void 0!==e?e:[];if(!i.some(e=>null!=e.sort)||!this.rowNodeSorter)return;const o=new Array(this.nodeMap.getSize());this.nodeMap.forEach(e=>o[e.index]=e.node),this.nodeMap.clear();this.rowNodeSorter.doFullSort(o,i).forEach((e,t)=>{this.nodeMap.set({id:e.id,node:e,index:t})})}updateRowNodes(e){const t=[];return e.forEach(e=>{const i=this.getRowId(e),o=this.nodeMap.getBy("id",i);o&&(this.blockUtils.updateDataIntoRowNode(o.node,e),t.push(o.node))}),t}insertRowNodes(e,t){const i=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),o=null==t&&this.isLastRowKnown?i:t;if(null==o||i<o)return[];const n={};e.forEach(e=>{const t=this.getRowId(e);t&&this.isNodeInCache(t)||(n[t]=e)});const s=Object.values(n),r=s.length;if(0===r)return[];const a=this.nodeMap.filter(e=>e.index>=o);return a.forEach(e=>this.nodeMap.delete(e)),a.forEach(e=>{this.nodeMap.set({node:e.node,index:e.index+r,id:e.id})}),this.numberOfRows+=r,s.map((e,t)=>this.createRowAtIndex(o+t,e))}removeRowNodes(e){const t=[],i=[];let o=0;const n=[...e],s=this.getOrderedNodeMap();let r=-1;for(const a of Object.keys(s)){r+=1;const e=s[a],l=n.findIndex(t=>t===e.id);if(-1!==l){n.splice(l,1),this.destroyRowAtIndex(Number(a)),t.push(e.node),o+=1;continue}if(0===o)continue;const d=Number(a);r!==d&&i.push(e.node),this.nodeMap.delete(e),this.nodeMap.set({id:e.id,node:e.node,index:d-o})}return this.numberOfRows-=this.isLastRowIndexKnown()?e.length:o,n.length>0&&i.length>0&&(i.forEach(e=>e.__needsRefreshWhenVisible=!0),this.lazyBlockLoadingSvc.queueLoadCheck()),t}getBlockSize(){return this.storeParams.cacheBlockSize||100}getBlockStartIndex(e){return e-e%this.getBlockSize()}getBlockBounds(e){const t=this.getBlockStartIndex(e);return[t,t+this.getBlockSize()]}},Uc=class extends s.XQb{constructor(e,t,i){super(),this.idSequence={value:0},this.ssrmParams=e,this.parentRowNode=i,this.storeParams=t,this.level=i.level+1,this.group=!!e.rowGroupCols&&this.level<e.rowGroupCols.length,this.leafGroup=!!e.rowGroupCols&&this.level===e.rowGroupCols.length-1,this.info={}}wireBeans(e){this.blockUtils=e.ssrmBlockUtils,this.storeUtils=e.ssrmStoreUtils,this.selectionSvc=e.selectionSvc,this.rowGroupColsSvc=e.rowGroupColsSvc}postConstruct(){let e=1;var t;0===this.level&&(e=null!==(t=this.storeUtils.getServerSideInitialRowCount())&&void 0!==t?t:1,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}));this.cache=this.createManagedBean(new Wc(this,e,!1,this.storeParams));if(!this.gos.get("treeData")&&this.group&&this.rowGroupColsSvc){const e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.rowGroupColsSvc.columns[this.level]}}destroy(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache),super.destroy()}applyRowData(e,t,i){this.cache.onLoadSuccess(t,i,e)}applyTransaction(e){var t,i,o,n,r;const a=(0,s.En5)(this.gos);if(!a)return(0,s.ujB)(206),{status:s.a8A.Cancelled};const l=this.gos.getCallback("isApplyServerSideTransaction");if(l){if(!l({transaction:e,parentNode:this.parentRowNode,groupLevelInfo:this.info}))return{status:s.a8A.Cancelled}}const d=this.cache.isStoreFullyLoaded();let c,u,h;if(null!==(t=e.update)&&void 0!==t&&t.length&&(c=this.cache.updateRowNodes(e.update)),null!==(i=e.add)&&void 0!==i&&i.length){let t=e.addIndex;null!=t&&t<0&&(t=void 0),u=this.cache.insertRowNodes(e.add,t)}if(null!==(o=e.remove)&&void 0!==o&&o.length){const t=e.remove.map(e=>{var t;return a({level:this.level,parentKeys:null!==(t=this.parentRowNode.getRoute())&&void 0!==t?t:[],data:e})}),i=[...new Set(t)];h=this.cache.removeRowNodes(i)}const p=this.gos.get("serverSideEnableClientSideSort"),g=(null===(n=c)||void 0===n?void 0:n.length)||(null===(r=u)||void 0===r?void 0:r.length);return d&&p&&g&&this.cache.clientSideSortRows(),this.updateSelectionAfterTransaction(c,h),{status:s.a8A.Applied,update:c,add:u,remove:h}}updateSelectionAfterTransaction(e,t){if(!this.selectionSvc)return;const i=[];for(const o of null!==e&&void 0!==e?e:[])o.isSelected()&&!o.selectable&&i.push(o);for(const o of null!==t&&void 0!==t?t:[])o.isSelected()&&i.push(o);i.length&&this.selectionSvc.setNodesSelected({newValue:!1,clearSelection:!1,nodes:i,source:"rowDataChanged"})}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach(e=>this.blockUtils.clearDisplayIndex(e.node)),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()}getDisplayIndexStart(){return this.displayIndexStart}getDisplayIndexEnd(){return this.displayIndexEnd}getRowCount(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()}setRowCount(e,t){this.cache.setRowCount(e,t)}isDisplayIndexInStore(e){return 0!==this.cache.getRowCount()&&(this.displayIndexStart<=e&&e<this.getDisplayIndexEnd())}setDisplayIndexes(e,t,i){this.displayIndexStart=e.value,this.topPx=t.value;const o=this.parentRowNode.level>-1&&(0,s.MPk)(this.gos)({node:this.parentRowNode});o||Ga(this.parentRowNode),"top"===o&&(Oa(this.parentRowNode,this.beans),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t,i)),this.cache.setDisplayIndexes(e,t,i),"bottom"===o&&(Oa(this.parentRowNode,this.beans),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t,i)),this.displayIndexEnd=e.value,this.heightPx=t.value-this.topPx}forEachStoreDeep(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{value:0};e(this,t.value++),this.cache.getNodes().forEach(i=>{const o=i.node.childStore;o&&o.forEachStoreDeep(e,t)})}forEachNodeDeep(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{value:0};this.cache.getNodes().forEach(i=>{e(i.node,t.value++);const o=i.node.childStore;o&&o.forEachNodeDeep(e,t)})}forEachNodeDeepAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{value:0},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.parentRowNode.level>-1&&(0,s.MPk)(this.gos)({node:this.parentRowNode});"top"===o&&e(this.parentRowNode.sibling,t.value++);const n=this.cache.getOrderedNodeMap();for(const s of Object.values(n)){e(s.node,t.value++);const o=s.node.childStore;o&&o.forEachNodeDeepAfterFilterAndSort(e,t,i)}"bottom"===o&&e(this.parentRowNode.sibling,t.value++)}retryLoads(){this.cache.getNodes().forEach(e=>{let{node:t}=e;t.failedLoad&&(t.failedLoad=!1,t.__needsRefreshWhenVisible=!0,t.stub=!0)}),this.forEachChildStoreShallow(e=>e.retryLoads()),this.fireStoreUpdatedEvent()}getRowUsingDisplayIndex(e){return this.parentRowNode.sibling&&e===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(e)}getRowBounds(e){var t;if(!this.isDisplayIndexInStore(e))return null;const i=this.cache.getNodeCachedByDisplayIndex(e);if(i){const t=this.blockUtils.extractRowBounds(i,e);if(t)return t}const{previousNode:o,nextNode:n}=null!==(t=this.cache.getSurroundingNodesByDisplayIndex(e))&&void 0!==t?t:{};if(o){const t=this.blockUtils.extractRowBounds(o.node,e);if(null!=t)return t}const r=(0,s.YvH)(this.beans);if(n){const t=(n.node.rowIndex-e)*r;return{rowTop:n.node.rowTop-t,rowHeight:r}}return{rowTop:this.topPx+this.heightPx-(this.getDisplayIndexEnd()-e)*r,rowHeight:r}}isPixelInRange(e){return e>=this.topPx&&e<this.topPx+this.heightPx}getRowIndexAtPixel(e){if(e<this.topPx)return this.getDisplayIndexStart();if(e>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;if(this.parentRowNode.sibling&&e>this.parentRowNode.sibling.rowTop&&e<this.parentRowNode.sibling.rowTop+this.parentRowNode.sibling.rowHeight)return this.parentRowNode.sibling.rowIndex;let t=Number.MAX_SAFE_INTEGER,i=null,o=Number.MAX_SAFE_INTEGER,n=null;if(this.cache.getNodes().forEach(s=>{let{node:r}=s;const a=Math.abs(e-r.rowTop);r.rowTop<e?a<t&&(t=a,i=r):a<o&&(o=a,n=r)}),i){const t=this.blockUtils.getIndexAtPixel(i,e);if(null!=t)return t}const r=(0,s.YvH)(this.beans);if(n){const t=n.rowTop,i=Math.ceil((t-e)/r);return n.rowIndex-i}const a=this.topPx+this.heightPx,l=Math.floor((a-e)/r);return this.getDisplayIndexEnd()-l}getChildStore(e){return this.storeUtils.getChildStore(e,this,e=>{const t=this.cache.getNodes().find(t=>t.node.key==e);return t?t.node:null})}forEachChildStoreShallow(e){this.cache.getNodes().forEach(t=>{let{node:i}=t;i.childStore&&e(i.childStore)})}refreshAfterSort(e){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){const e=this.cache.isStoreFullyLoaded(),t=this.gos.get("serverSideEnableClientSideSort");if(!(e&&t)){const e=this.cache.getRowCount(),t=this.cache.isLastRowIndexKnown();return this.destroyBean(this.cache),void(this.cache=this.createManagedBean(new Wc(this,e,t,this.storeParams)))}this.cache.clientSideSortRows()}this.forEachChildStoreShallow(t=>t.refreshAfterSort(e))}refreshAfterFilter(e){!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)?this.refreshStore(!0):this.forEachChildStoreShallow(t=>t.refreshAfterFilter(e))}refreshStore(e){if(e)return this.destroyBean(this.cache),this.cache=this.createManagedBean(new Wc(this,1,!1,this.storeParams)),void this.fireStoreUpdatedEvent();this.cache.markNodesForRefresh()}getTopLevelRowDisplayedIndex(e){const t=this.cache.getDisplayIndexFromStoreIndex(e);return null!==t&&void 0!==t?t:e}isLastRowIndexKnown(){return this.cache.isLastRowIndexKnown()}getRowNodesInRange(e,t){return this.cache.getNodes().filter(i=>{let{node:o}=i;return o.rowIndex>=e.rowIndex&&o.rowIndex<=t.rowIndex}).map(e=>{let{node:t}=e;return t})}addStoreStates(e){var t;e.push({route:null!==(t=this.parentRowNode.getRoute())&&void 0!==t?t:[],rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(t=>t.addStoreStates(e))}getIdSequence(){return this.idSequence}getParentNode(){return this.parentRowNode}getRowDetails(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}}getSsrmParams(){return this.ssrmParams}setStoreInfo(e){e&&Object.assign(this.info,e)}fireStoreUpdatedEvent(){this.eventSvc.dispatchEvent({type:"storeUpdated"})}fireRefreshFinishedEvent(){this.eventSvc.dispatchEvent({type:"storeRefreshed",route:this.parentRowNode.getRoute()})}getBlockStates(){return this.cache.getBlockStates()}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}getCache(){return this.cache}getFirstNode(){var e;const t=this.cache.getNodes().getBy("index",0);return null!==(e=null===t||void 0===t?void 0:t.node)&&void 0!==e?e:null}},jc=class extends s.XQb{constructor(){super(...arguments),this.beanName="ssrmStoreFactory"}wireBeans(e){this.colModel=e.colModel,this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc,this.rowAutoHeight=e.rowAutoHeight}createStore(e,t){const i=this.getStoreParams(e,t);return new Uc(e,i,t)}getStoreParams(e,t){const i=this.getLevelSpecificParams(t);return{cacheBlockSize:this.getBlockSize(i),maxBlocksInCache:this.getMaxBlocksInCache(e,i)}}getMaxBlocksInCache(e,t){var i;const o=null!=(null===t||void 0===t?void 0:t.maxBlocksInCache)?t.maxBlocksInCache:this.gos.get("maxBlocksInCache");if(null!=o&&o>=0)if(e.dynamicRowHeight)(0,s.ujB)(203);else{if(null===(i=this.rowAutoHeight)||void 0===i||!i.active)return o;(0,s.ujB)(204)}}getBlockSize(e){const t=null!=(null===e||void 0===e?void 0:e.cacheBlockSize)?e.cacheBlockSize:this.gos.get("cacheBlockSize");return null!=t&&t>0?t:100}getLevelSpecificParams(e){var t,i,o,n;const s=this.gos.getCallback("getServerSideGroupLevelParams");if(!s)return;return s({level:e.level+1,parentRowNode:e.level>=0?e:void 0,rowGroupColumns:null!==(t=null===(i=this.rowGroupColsSvc)||void 0===i?void 0:i.columns)&&void 0!==t?t:[],pivotColumns:null!==(o=null===(n=this.pivotColsSvc)||void 0===n?void 0:n.columns)&&void 0!==o?o:[],pivotMode:this.colModel.isPivotMode()})}},_c=class extends s.XQb{constructor(){super(...arguments),this.beanName="ssrmStoreUtils"}wireBeans(e){this.colModel=e.colModel,this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}getChildStore(e,t,i){if(null===e||void 0===e||!e.length)return t;const o=i(e[0]);if(o){if(1===e.length&&!o.childStore){const e=this.serverSideRowModel.getParams();o.childStore=this.createBean(this.storeFactory.createStore(e,o))}const t=e.slice(1,e.length),i=o.childStore;return i?i.getChildStore(t):null}return null}isServerRefreshNeeded(e,t,i){if(i.valueColChanged||i.secondaryColChanged)return!0;const o=e.level+1;if(!(o<t.length))return!0;const n=t[o].id;if(i.changedColumns.indexOf(n)>-1)return!0;return this.colModel.getCols().filter(e=>e.getColDef().showRowGroup&&i.changedColumns.includes(e.getId())).map(e=>e.getColDef().showRowGroup).some(e=>!0===e||e===n)}getServerSideInitialRowCount(){return this.gos.get("serverSideInitialRowCount")}isServerSideSortAllLevels(){return this.gos.get("serverSideSortAllLevels")&&(0,s.TiQ)(this.gos)}isServerSideOnlyRefreshFilteredGroups(){return this.gos.get("serverSideOnlyRefreshFilteredGroups")&&(0,s.TiQ)(this.gos)}},Kc=class extends s.XQb{constructor(){super(...arguments),this.beanName="ssrmTxnManager",this.asyncTransactions=[]}wireBeans(e){this.valueCache=e.valueCache,this.serverSideRowModel=e.rowModel,this.selectionSvc=e.selectionSvc}postConstruct(){(0,s.TiQ)(this.gos)}applyTransactionAsync(e,t){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:t})}scheduleExecuteAsync(){const e=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimeout=window.setTimeout(()=>{this.executeAsyncTransactions()},e)}executeAsyncTransactions(){if(!this.asyncTransactions)return;const e=[],t=[],i=[];let o=!1;for(const r of this.asyncTransactions){let n;this.serverSideRowModel.executeOnStore(r.transaction.route,e=>{n=e.applyTransaction(r.transaction)})?void 0==n&&(n={status:s.a8A.StoreNotFound}):n={status:s.a8A.StoreNotStarted},t.push(n);n.status==s.a8A.StoreLoading?i.push(r):(r.callback&&e.push(()=>r.callback(n)),n.status===s.a8A.Applied&&(o=!0))}var n;(e.length>0&&window.setTimeout(()=>{for(const t of e)t()},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=i,o)&&(null===(n=this.valueCache)||void 0===n||n.onDataChanged(),this.eventSvc.dispatchEvent({type:"storeUpdated"}));t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t})}flushAsyncTransactions(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()}applyTransaction(e){let t;if(this.serverSideRowModel.executeOnStore(e.route,i=>{t=i.applyTransaction(e)})){if(t){var i;if(null===(i=this.valueCache)||void 0===i||i.onDataChanged(),t.remove&&this.selectionSvc){const i=t.remove.map(e=>e.id);this.selectionSvc.deleteSelectionStateFromParent(e.route||[],i)}return this.eventSvc.dispatchEvent({type:"storeUpdated"}),t}return{status:s.a8A.StoreNotFound}}return{status:s.a8A.StoreNotStarted}}},Yc={moduleName:"ServerSideRowModel",version:ki,rowModels:["serverSide"],beans:[kc,Dc,_c,Pc,Tc,Kc,Ec,jc,Ac,Gc,Hc,Vc,class extends Za{constructor(){super(...arguments),this.beanName="expansionSvc"}wireBeans(e){this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}postConstruct(){const e=()=>{this.strategy=this.createManagedBean(new Ic)};this.addManagedEventListeners({columnRowGroupChanged:e,columnPivotChanged:e,columnPivotModeChanged:e}),this.addManagedPropertyListener("ssrmExpandAllAffectsAllRows",e=>{e.currentValue||(this.strategy=this.createManagedBean(new Ic),this.updateAllNodes(),this.dispatchStateUpdatedEvent())}),e()}setExpansionState(e){const t="expandAll"in e;t!==this.isExpandAllStrategy(this.strategy)&&(this.strategy=t?this.createManagedBean(new Lc):this.createManagedBean(new Ic)),this.strategy.setExpandedState(e),this.dispatchStateUpdatedEvent(),this.updateAllNodes()}getExpansionState(){return this.strategy.getExpandedState()}updateAllNodes(){this.serverSideRowModel.forEachNode(e=>{super.setExpanded(e,this.isNodeExpanded(e))})}isNodeExpanded(e){return this.strategy.isRowExpanded(e)}setExpanded(e,t,i,o){this.strategy.setRowExpanded(e,t),super.setExpanded(e,t,i),this.dispatchStateUpdatedEvent(),this.updateExpandedState(e)}expandAll(e){const t=this.beans.gos.get("ssrmExpandAllAffectsAllRows"),i=!this.isExpandAllStrategy(this.strategy)&&t;this.strategy=i?new Lc:this.strategy,this.strategy.expandAll(e),this.updateAllNodes(),this.dispatchStateUpdatedEvent(),this.beans.eventSvc.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}isExpandAllStrategy(e){return"expandAll"===e.name}onGroupExpandedOrCollapsed(){}setDetailsExpansionState(e){const{gos:t}=this.beans;if(!t.get("ssrmExpandAllAffectsAllRows"))return;const i=this.getExpansionState();if(void 0===i.expandAll)return;const o=i.expandAll&&0===i.invertedRowGroupIds.length;return(!i.expandAll&&0===i.invertedRowGroupIds.length)!==o?o?e.expandAll():e.collapseAll():void 0}dispatchExpandedEvent(e){this.eventSvc.dispatchEvent(e),this.beans.rowRenderer.refreshCells({rowNodes:[e.node]})}updateExpandedState(e){const t=e.childStore;if(e.expanded){if(e.master&&!e.detailNode&&(e.detailNode=this.createDetailNode(e)),!t&&e.hasChildren()){const t=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(t,e))}}else t&&this.gos.get("purgeClosedRowNodes")&&(e.childStore=this.destroyBean(t))}createDetailNode(e){const t=new s.TUE(this.beans);t.detail=!0,t.selectable=!1,t.parent=e,(0,s.Qmv)(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1;const i=(0,s.Syv)(this.beans,t).height;return t.rowHeight=i||200,t}},Mc],dependsOn:[Ii,s.CdH,s.h_e,uc,Fc,oc]},qc={moduleName:"ServerSideRowModelApi",version:ki,apiFunctions:{getServerSideSelectionState:function(e){var t,i;return null!==(t=null===(i=e.selectionSvc)||void 0===i?void 0:i.getSelectionState())&&void 0!==t?t:null},setServerSideSelectionState:function(e,t){var i;null===(i=e.selectionSvc)||void 0===i||i.setSelectionState(t,"api")},applyServerSideTransaction:function(e,t){var i;return null===(i=e.ssrmTxnManager)||void 0===i?void 0:i.applyTransaction(t)},applyServerSideTransactionAsync:function(e,t,i){var o;return null===(o=e.ssrmTxnManager)||void 0===o?void 0:o.applyTransactionAsync(t,i)},applyServerSideRowData:function(e,t){var i,o,n;const r=null!==(i=t.startRow)&&void 0!==i?i:0,a=null!==(o=t.route)&&void 0!==o?o:[];r<0?(0,s.ujB)(189,{startRow:r}):null===(n=(0,s.xDz)(e))||void 0===n||n.applyRowData(t.successParams,r,a)},retryServerSideLoads:function(e){var t;null===(t=(0,s.xDz)(e))||void 0===t||t.retryLoads()},flushServerSideAsyncTransactions:function(e){var t;return null===(t=e.ssrmTxnManager)||void 0===t?void 0:t.flushAsyncTransactions()},refreshServerSide:function(e,t){var i;null===(i=(0,s.xDz)(e))||void 0===i||i.refreshStore(t)},getServerSideGroupLevelState:function(e){var t,i;return null!==(t=null===(i=(0,s.xDz)(e))||void 0===i?void 0:i.getStoreState())&&void 0!==t?t:[]},resetRowHeights:s.GET,onRowHeightChanged:s.H1b},dependsOn:[Ii,s.idh,s.rzr,s.Mvm]},Qc=class extends s.XQb{constructor(){super(...arguments),this.beanName="formulaDataSvc",this.hasSource=!1}postConstruct(){const e=this.gos.get("formulaDataSource");e&&this.setDataSource(e)}hasDataSource(){return this.hasSource}getFormula(e){var t;const i=null===(t=this.dataSource)||void 0===t?void 0:t.getFormula(e);return(0,s.PZy)(i)?i:void 0}setFormula(e){var t;null===(t=this.dataSource)||void 0===t||t.setFormula(e)}setDataSource(e){var t;this.dataSource=e,this.hasSource=!0,null===(t=e.init)||void 0===t||t.call(e,this.createInitParams())}createInitParams(){return(0,s.AuN)(this.gos,{})}destroy(){var e,t;null===(e=this.dataSource)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),super.destroy()}},Xc=[{symbol:"%",fixity:"postfix",precedence:100},{symbol:"-",fixity:"prefix",precedence:90},{symbol:"+",fixity:"prefix",precedence:90},{symbol:"^",fixity:"infix",precedence:80,associativity:"right"},{symbol:"*",fixity:"infix",precedence:70,associativity:"left",isAssociative:!0},{symbol:"/",fixity:"infix",precedence:70,associativity:"left"},{symbol:"+",fixity:"infix",precedence:60,associativity:"left",isAssociative:!0},{symbol:"-",fixity:"infix",precedence:60,associativity:"left"},{symbol:"&",fixity:"infix",precedence:55,associativity:"left",isAssociative:!0},{symbol:"=",fixity:"infix",precedence:50,associativity:"left"},{symbol:"<>",fixity:"infix",precedence:50,associativity:"left"},{symbol:">=",fixity:"infix",precedence:50,associativity:"left"},{symbol:"<=",fixity:"infix",precedence:50,associativity:"left"},{symbol:">",fixity:"infix",precedence:50,associativity:"left"},{symbol:"<",fixity:"infix",precedence:50,associativity:"left"}],$c=new Map;for(const cf of Xc){var Zc;const e=null!==(Zc=$c.get(cf.symbol))&&void 0!==Zc?Zc:[];e.push(cf),$c.set(cf.symbol,e)}function Jc(e,t){var i;const o=null!==(i=$c.get(e))&&void 0!==i?i:[];return t?o.find(e=>e.fixity===t):o[0]}var eu=[...new Set(Xc.map(e=>e.symbol))].sort((e,t)=>t.length-e.length),tu=$c,iu=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ERROR!";super(e),this.type=t,this.name="FormulaError"}},ou=class extends iu{constructor(e,t,i){super(e,"#PARSE!"),this.errorStart=t,this.errorEnd=i}},nu=(e,t,i)=>{const o=t.trim();if(o.startsWith('"')&&o.endsWith('"')&&o.length>2)return o.slice(1,-1);if("true"===o.toLowerCase())return!0;if("false"===o.toLowerCase())return!1;const n=Number(o);if(!isNaN(n))return n;const r=o.match(/^(\$?)([A-Z]+)(\$?)([0-9]+)(?::(\$?)([A-Z]+)(\$?)([0-9]+))?$/i);if(r){const[,t,n,a,l,d,c,u,h]=r,p=(t,i,n,r,a)=>{var l,d;const c=t||a?i.toUpperCase():null===(l=e.formula)||void 0===l||null===(l=l.getColByRef(i))||void 0===l?void 0:l.colId,u=n||a?r:null===(d=(0,s.zCU)(e))||void 0===d||null===(d=d.getFormulaRow(Number(r)-1))||void 0===d?void 0:d.id;if(null==c||null==u)throw new ou("Invalid cell reference: ".concat(o),0,0);return{column:{id:c,absolute:t},row:{id:u,absolute:n}}},g=p("$"===t,n,"$"===a,l,i);if(c&&h){const e=p("$"===d,c,"$"===u,h,i);g.endColumn=e.column,g.endRow=e.row}return g}return null};function su(e){const t=[];let i=0;const o=(e,t)=>{let i=t;const o=()=>"$"===e[i]&&(i++,!0),n=()=>{const t=i;return o(),(()=>{const t=i;for(;i<e.length&&/[A-Za-z]/.test(e[i]);)i++;return i>t})()?(o(),!!(()=>{const t=i;for(;i<e.length&&/[0-9]/.test(e[i]);)i++;return i>t})()||(i=t,!1)):(i=t,!1)};if(!n())return 0;if(":"===e[i]){const e=i;if(i++,!n())throw new ou("Invalid range end reference",e,i)}return i-t};for(;i<e.length;){const n=e[i];if(/\s/.test(n)){i++;continue}if('"'===n){let o=i+1;for(;o<e.length&&'"'!==e[o];)o++;if(o>=e.length)throw new ou("Unterminated string",i,e.length);t.push(e.slice(i,o+1)),i=o+1;continue}if(/[0-9]/.test(n)||"."===n&&/[0-9]/.test(e[i+1])){let o=i+1;for(;o<e.length&&/[0-9.]/.test(e[o]);)o++;t.push(e.slice(i,o)),i=o;continue}if("$"===n||/[A-Za-z]/.test(n)){const n=o(e,i);if(n>0){t.push(e.slice(i,i+n)),i+=n;continue}let s=i+1;for(;s<e.length&&/[A-Za-z0-9]/.test(e[s]);)s++;t.push(e.slice(i,s)),i=s;continue}if("("===n||")"===n||","===n){t.push(n),i++;continue}const s=eu.find(t=>e.startsWith(t,i));if(!s)throw new ou("Unexpected character: "+n,i,i+1);t.push(s),i+=s.length}return t}function ru(e,t){return"infix"!==e.fixity||"infix"!==t.fixity||("right"!==e.associativity||e.precedence!==t.precedence)&&e.precedence>=t.precedence}function au(e,t){var i,o;const n=tu.get(e);if(!n)return null;const s=void 0!==t&&tu.has(t);var r,a;return void 0!==t&&!s&&!("("===t||","===t)&&"("!==t||")"===t?null!==(r=null!==(a=n.find(e=>"postfix"===e.fixity))&&void 0!==a?a:n.find(e=>"infix"===e.fixity))&&void 0!==r?r:null:null!==(i=null!==(o=n.find(e=>"prefix"===e.fixity))&&void 0!==o?o:n.find(e=>"infix"===e.fixity))&&void 0!==i?i:null}var lu=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(0,s.PZy)(t))throw new ou("Formulas must begin with =",0,1);return gu(function(e,t,i){const o=su(t),n=[],s=[],r=()=>{const e=s.pop();if(!e)throw new ou("Operator stack underflow",0,0);if("op"===e.kind){const t=e.def;if("infix"!==t.fixity){const e=n.pop();if(!e)throw new ou("Missing operand for '".concat(t.symbol,"'"),0,0);return"+"===t.symbol&&"prefix"===t.fixity?void n.push(e):"postfix"===t.fixity&&"%"===t.symbol?void n.push({type:"operation",operation:t.symbol,operands:[e]}):void("-"===t.symbol&&"prefix"===t.fixity?n.push({type:"operation",operation:"-",operands:[{type:"operand",value:0},e]}):n.push({type:"operation",operation:t.symbol,operands:[e]}))}const i=n.pop(),o=n.pop();if(!o||!i)throw new ou("Missing operand for '".concat(t.symbol,"'"),0,0);return void n.push({type:"operation",operation:t.symbol,operands:[o,i]})}throw new ou("Internal error: unexpected frame during reduction",0,0)};let a=0;for(;a<o.length;){const t=o[a];if(/[A-Za-z]/.test(t[0]||"")&&"("===o[a+1]){const e=t;s.push({kind:"function",name:e,args:[]}),s.push({kind:"parenthesis",outLen:n.length}),a+=2;continue}if("("===t){s.push({kind:"parenthesis",outLen:n.length}),a++;continue}if(","===t){for(;;){const e=s[s.length-1];if(!e||"parenthesis"===e.kind)break;if("op"!==e.kind)throw new ou("Internal error: unexpected frame before '('",a,a+1);r()}const e=s[s.length-1];if(!e||"parenthesis"!==e.kind)throw new ou("Misplaced comma",a,a+1);const t=s[s.length-2];if(!t||"function"!==t.kind)throw new ou("Comma outside of a function call",a,a+1);n.length>e.outLen&&t.args.push(n.pop()),a++;continue}if(")"===t){for(var l;;){const e=s[s.length-1];if(!e||"parenthesis"===e.kind)break;if("op"!==e.kind)throw new ou("Internal error: unexpected frame before ')'",a,a+1);r()}const e=s[s.length-1];if(!e||"parenthesis"!==e.kind)throw new ou("Mismatched parentheses",a,a+1);const t=e.outLen;if(s.pop(),"function"===(null===(l=s[s.length-1])||void 0===l?void 0:l.kind)){const e=s.pop();n.length>t&&e.args.push(n.pop()),n.push({type:"operation",operation:e.name,operands:e.args})}a++;continue}const d=tu.has(t)?au(t,o[a-1]):null;if(d){for(;;){const e=s[s.length-1];if(!e||"op"!==e.kind)break;if(!ru(e.def,d))break;r()}s.push({kind:"op",def:d}),a++;continue}const c=nu(e,t,i);if(null==c)throw new ou("Unsupported operand: "+t,0,t.length);n.push({type:"operand",value:c}),a++}for(;s.length;){if("op"!==s[s.length-1].kind)throw new ou("Mismatched parentheses or unfinished function call",0,0);r()}if(1!==n.length)throw new ou("Invalid expression",0,0);return n[0]}(e,t.slice(1).trim(),i))};function du(e,t){return"operation"===e.type&&e.operation.toUpperCase()===t.toUpperCase()}function cu(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?"operand"!==e.type?t:!!e.value:t}function uu(e){if(!e||"operand"!==e.type)return null;const t=e.value;return"string"===typeof t?t:"number"===typeof t||"boolean"===typeof t?String(t):null}function hu(e){if(!du(e,"COLUMN"))return null;const t=uu(e.operands[0]);if(null==t)return null;return{id:t,absolute:cu(e.operands[1],!1)}}function pu(e){if(!du(e,"ROW"))return null;const t=uu(e.operands[0]);if(null==t)return null;return{id:t,absolute:cu(e.operands[1],!1)}}function gu(e){if("operation"===e.type){const t=e.operands.map(gu),i={type:"operation",operation:e.operation,operands:t},o=function(e){if(!du(e,"REF"))return null;const t=e.operands;if(2!==t.length&&4!==t.length)return null;const i=hu(t[0]),o=pu(t[1]);if(!i||!o)return null;const n={column:i,row:o};if(4===t.length){const e=hu(t[2]),i=pu(t[3]);if(!e||!i)return null;n.endColumn=e,n.endRow=i}return{type:"operand",value:n}}(i);return null!==o&&void 0!==o?o:i}return e}var vu=e=>"operation"===e.type;function mu(e,t){const i=e.colModel.getColById(t);var o,n;return i&&null!==(o=null===(n=e.formula)||void 0===n?void 0:n.getColRef(i))&&void 0!==o?o:null}function fu(e,t){var i,o;const n=null===(i=e.rowModel)||void 0===i||null===(o=i.getRowNode)||void 0===o?void 0:o.call(i,t);return null!=(null===n||void 0===n?void 0:n.formulaRowIndex)?n.formulaRowIndex+1:null}function Cu(e,t){var i,o,n;return null!==(i=null===(o=(0,s.zCU)(e))||void 0===o||null===(n=o.getFormulaRow)||void 0===n||null===(n=n.call(o,t-1))||void 0===n?void 0:n.id)&&void 0!==i?i:null}function wu(e){if(e.includes('"'))throw'String contains a quote (") which the tokenizer does not support.';return'"'.concat(e,'"')}function bu(e,t){if(t.absolute)return t.id;const i=mu(e,t.id);if(i)return i.toUpperCase();throw"Cannot map column id '".concat(t.id,"' to A1 label")}function yu(e,t){if(t.absolute){const e=Number(t.id);if(Number.isFinite(e)&&e>=1)return e;throw"Cannot parse absolute row index '".concat(t.id,"'")}const i=fu(e,t.id);if(null!=i)return i;throw"Cannot map row id '".concat(t.id,"' to A1 index")}function Su(e,t){const i=t=>"COLUMN(".concat(wu(function(e,t){const i=/^[A-Za-z]+$/.test(t.id);if(t.absolute){if(i)return t.id.toUpperCase();const o=mu(e,t.id);if(o)return o.toUpperCase();throw"Cannot produce absolute COLUMN label from id '".concat(t.id,"'")}if(i){const i=function(e,t){var i,o,n;return null!==(i=null===(o=e.formula)||void 0===o||null===(n=o.getColByRef)||void 0===n||null===(n=n.call(o,t))||void 0===n?void 0:n.colId)&&void 0!==i?i:null}(e,t.id);if(i)return i}return t.id}(e,t))).concat(t.absolute?",true":"",")"),o=t=>"ROW(".concat(wu(function(e,t){const{id:i,absolute:o}=t;if(o){if(null==Cu(e,Number(i)))throw"Cannot produce absolute ROW index from id '".concat(i,"'")}else if(null==fu(e,i))throw"Cannot produce ROW index from id '".concat(i,"'");return i}(e,t))).concat(t.absolute?",true":"",")"),n="REF(".concat(i(t.column),",").concat(o(t.row));return t.endColumn&&t.endRow?"".concat(n,",").concat(i(t.endColumn),",").concat(o(t.endRow),")"):"".concat(n,")")}function xu(e){if(!vu(e)||"-"!==e.operation||2!==e.operands.length)return null;const[t,i]=e.operands;return"operand"===t.type&&0===t.value?i:null}function Fu(e,t,i){if(!vu(t))return!1;if(xu(t))return!1;const o=Jc(t.operation,"infix");if(!o||"infix"!==o.fixity)return!1;const n=e.precedence,s=o.precedence;if(s<n)return!0;if(s>n)return!1;if("right"===e.associativity){const t=o.symbol===e.symbol;return"left"===i&&t}return!(!0===e.isAssociative)&&"right"===i}function Ru(e,t,i,o){const n=t=>i?Su(e,t):function(e,t,i){const o=(e,t)=>(e?"$":"")+String(t),n=i?t.column.id:bu(e,t.column),s=i?t.row.id:yu(e,t.row),r=o(t.column.absolute,n)+o(t.row.absolute,s);if(t.endColumn&&t.endRow){const n=i?t.endColumn.id:bu(e,t.endColumn),s=i?t.endRow.id:yu(e,t.endRow);return"".concat(r,":").concat(o(t.endColumn.absolute,n)).concat(o(t.endRow.absolute,s))}return r}(e,t,o);return"="+function e(t){if("operand"===t.type){const e=t.value;return"string"===typeof e?wu(e):"number"===typeof e?String(e):"boolean"===typeof e?e?"TRUE":"FALSE":n(e)}const i=xu(t);if(i){const t=e(i);return function(e){if(!vu(e))return!1;const t=Jc(e.operation,"infix");return!!t&&!("^"===t.symbol)}(i)?"-(".concat(t,")"):"-".concat(t)}const o=t.operation.toUpperCase();if(1===t.operands.length){const i=t.operands[0],n=Jc(o,"postfix");if(n)return"".concat(e(i)).concat(n.symbol);const s=Jc(o,"prefix");if(s){const t=e(i),o=function(e){return!!vu(e)&&!!Jc(e.operation,"infix")}(i);return o?"".concat(s.symbol,"(").concat(t,")"):"".concat(s.symbol).concat(t)}return"".concat(o,"(").concat(e(i),")")}if(2===t.operands.length){const i=Jc(o,"infix");if(i){const[o,n]=t.operands,s=Fu(i,o,"left")?"(".concat(e(o),")"):e(o),r=Fu(i,n,"right")?"(".concat(e(n),")"):e(n);return"".concat(s).concat(i.symbol).concat(r)}}return"".concat(o,"(").concat(t.operands.map(e).join(","),")")}(t)}function Pu(e){return!(!e.endColumn||!e.endRow)}function Du(e,t){var i;const{row:o,column:n}=t,r=o.absolute?null===(i=(0,s.zCU)(e))||void 0===i?void 0:i.getFormulaRow(Number(o.id)-1):e.rowModel.getRowNode(o.id),a=n.absolute?e.formula.getColByRef(n.id):e.colModel.getColById(n.id);return r&&a?{row:r,column:a}:null}function Eu(e,t,i,o){var n;if("operand"===t.type){const o=t.value;if("object"!==typeof o)return o;if(Pu(o))throw new iu("Range is not allowed in scalar context");const n=Du(e,o);if(!n)throw new iu("Unknown reference to cell","#REF!");return i(n)}const s=null===(n=e.formula)||void 0===n?void 0:n.getFunction(t.operation);if(!s)throw new iu("Unsupported operation ".concat(t.operation),"#NAME?");const{args:r,values:a}=function(e,t,i,o){const n={[Symbol.iterator]:()=>new Mu(e,t,i,o)},s={[Symbol.iterator]:()=>new Tu(e,t,i,o)};return{args:n,values:s}}(e,t.operands,i,o);return s({row:o.row,column:o.column,args:r,values:a})}function Au(e,t,i,o){if("operand"===t.type){const o=t.value;if("object"!==typeof o)return{kind:"value",value:o};if(Pu(o))return function(e,t,i){const o=ku(e,t.row),n=t.endRow?ku(e,t.endRow):o,s=Math.min(o,n),r=Math.max(o,n),a=Iu(e,t.column),l=t.endColumn?Iu(e,t.endColumn):a;return{kind:"range",rowStart:s,rowEnd:r,colStart:a,colEnd:l,[Symbol.iterator]:()=>new Lu(e,s,r,a,l,i)}}(e,o,i);const n=Du(e,o);if(!n)throw new iu("Unknown reference to cell","#REF!");return{kind:"value",value:i(n)}}return{kind:"value",value:Eu(e,t,i,o)}}var Mu=class{constructor(e,t,i,o){this.beans=e,this.operandNodes=t,this.getCellValue=i,this.caller=o,this.i=0,this.res={done:!1,value:void 0}}next(){return this.i>=this.operandNodes.length?(this.res.done=!0,this.res.value=void 0,this.res):(this.res.done=!1,this.res.value=Au(this.beans,this.operandNodes[this.i++],this.getCellValue,this.caller),this.res)}[Symbol.iterator](){return this}},Tu=class{constructor(e,t,i,o){this.beans=e,this.operandNodes=t,this.getCellValue=i,this.caller=o,this.i=0,this.inner=null,this.res={done:!1,value:void 0}}next(){for(;;){if(this.inner){const e=this.inner.next();if(!e.done)return this.res.done=!1,this.res.value=e.value,this.res;this.inner=null;continue}if(this.i>=this.operandNodes.length)return this.res.done=!0,this.res.value=void 0,this.res;const e=Au(this.beans,this.operandNodes[this.i++],this.getCellValue,this.caller);if("value"===e.kind)return this.res.done=!1,this.res.value=e.value,this.res;this.inner=e[Symbol.iterator]()}}[Symbol.iterator](){return this}};function ku(e,t){var i,o;if(t.absolute){const e=Number(t.id)-1;if(!Number.isFinite(e)||e<0)throw new iu("Invalid absolute row","#REF!");return e}const n=null===(i=e.rowModel)||void 0===i||null===(o=i.getRowNode)||void 0===o?void 0:o.call(i,t.id);if(null==(null===n||void 0===n?void 0:n.formulaRowIndex))throw new iu("Unrecognised row id","#REF!");return n.formulaRowIndex}function Iu(e,t){if(t.absolute){var i;const o=null===(i=e.formula)||void 0===i?void 0:i.getColByRef(t.id);if(!o)throw new iu("Invalid absolute column","#REF!");return o}const o=e.colModel.getColById(t.id);if(!o)throw new iu("Unrecognised column id","#REF!");return o}var Lu=class{constructor(e,t,i,o,n,s){this.beans=e,this.rowStartIndex=t,this.rowEndIndex=i,this.colStart=o,this.colEnd=n,this.getCellValue=s,this.cols=null,this.currentRowIndex=this.rowStartIndex,this.currentColIdx=-1,this.colStartIdx=-1,this.colEndIdx=-1,this.res={done:!1,value:void 0}}initColsOnce(){var e;if(this.cols)return;this.cols=null!==(e=this.beans.colModel.getCols())&&void 0!==e?e:[];const t=Nu(this.beans,this.colStart,this.colEnd);if(!t)return this.colStartIdx=-1,void(this.colEndIdx=-1);[this.colStartIdx,this.colEndIdx]=t,this.currentColIdx=this.colStartIdx}next(){if(!this.cols&&(this.initColsOnce(),this.colStartIdx<0))return this.res.done=!0,this.res;if(this.currentRowIndex<=this.rowEndIndex){var e;const t=null===(e=(0,s.zCU)(this.beans))||void 0===e?void 0:e.getFormulaRow(this.currentRowIndex);if(!t)throw new iu("Unrecognised row in range","#REF!");const i=this.cols[this.currentColIdx];return this.currentColIdx<this.colEndIdx?this.currentColIdx++:(this.currentColIdx=this.colStartIdx,this.currentRowIndex++),this.res.value=this.getCellValue({row:t,column:i}),this.res}return this.res.done=!0,this.res.value=void 0,this.res}};function Nu(e,t,i){var o;const n=null!==(o=e.colModel.getCols())&&void 0!==o?o:[];let s=null,r=null;for(let a=0;a<n.length&&(null===s||null===r);a++){const e=n[a];if(e===i&&(r=a),e===t&&(s=a),null!==r&&null!==s)break}if(null===s||null===r)return null;return[Math.min(s,r),Math.max(s,r)]}function*Ou(e,t,i,o,n){var r;const a=null!==(r=e.colModel.getCols())&&void 0!==r?r:[],l=Nu(e,o,n);if(null==l)return;const[d,c]=l;for(let h=t;h<=i;h++){var u;const t=null===(u=(0,s.zCU)(e))||void 0===u?void 0:u.getFormulaRow(h);if(t)for(let e=d;e<=c;e++)yield{row:t,column:a[e]}}}function Gu(e,t,i){const o=e[Symbol.iterator](),n=new Array(i);for(let s=0;s<i;s++){const e=o.next();if(e.done)throw new iu("".concat(t,": expected exactly ").concat(i," arguments"));n[s]=e.value}if(!o.next().done)throw new iu("".concat(t,": expected exactly ").concat(i," arguments"));return n}function Bu(e){return{*[Symbol.iterator](){for(const t of e)null!=t&&""!==t&&(yield t)}}}var Vu=e=>"range"===e.kind,Hu=e=>"value"===e.kind,zu=["<=",">=","<>","<",">","="];function Wu(e){if("number"===typeof e&&Number.isFinite(e))return e;if(e instanceof Date)return+e;if("string"===typeof e){const t=Number(e);if(!Number.isNaN(t))return t}return null}function Uu(e){if(null==e)return"";switch(typeof e){case"string":return e;case"number":return String(e);case"boolean":return e?"TRUE":"FALSE"}return e instanceof Date?String(+e):String(e)}var ju=(e,t,i)=>{let o=Wu(t),n=Wu(i);switch(null!=o&&null!=n||(o=t,n=Uu(i).toUpperCase()),e){case"<":return n<o;case">":return n>o;case"<=":return n<=o;case">=":return n>=o;case"=":return n===o;case"<>":return n!==o}return!1},_u=(e,t,i)=>{const o=Uu(i),n=t.test(o);return"="===e?n:!n},Ku=e=>null==e||""===e;function Yu(e){if("number"===typeof e)return t=>Wu(t)===e;if("string"!==typeof e)return t=>e===t;const t=e.trim();if(""===t)return Ku;const i=function(e){for(const t of zu)if(e.startsWith(t))return t;return null}(t),o=i?t.substring(i.length):t;if(!/[*?]/.test(o))return ju.bind(null,null!==i&&void 0!==i?i:"=",o.toUpperCase());if(i&&"="!==i&&"<>"!==i)throw new iu("Invalid criteria: wildcards with comparator","#VALUE!");const n=function(e){let t="^";for(let i=0;i<e.length;i++){const o=e[i];"~"===o&&i+1<e.length&&("*"===e[i+1]||"?"===e[i+1])?t+="\\"+e[++i]:"*"!==o?"?"!==o?/[-/\\^$*+?.()|[\]{}]/.test(o)?t+="\\"+o:t+=o:t+=".":t+=".*"}return t+="$",new RegExp(t,"i")}(o);return _u.bind(null,null!==i&&void 0!==i?i:"=",n)}var qu=(e,t,i)=>{if(!i||0===t||i.absolute)return;const{visibleCols:o,colModel:n}=e,s=o.allCols,r=function(e,t,i){const o=e.getColById(i);if(!o)return null;const n=t.indexOf(o);return n>=0?n:null}(n,s,i.id);if(null==r)return;const a=r+t;if(a<0)return;const l=function(e,t){var i;const o=e[t];return o&&null!==(i=o.getId())&&void 0!==i?i:null}(s,a);l&&(i.id=l)},Qu=(e,t,i,o)=>{if(!i||0===t||i.absolute)return;if(o){const e=Number(i.id);if(!Number.isFinite(e))return;return void(i.id=String(e+t))}const n=fu(e,i.id);if(null==n)return;const s=n+t;if(s<1)return;const r=Cu(e,s);r&&(i.id=r)},Xu=(e,t,i,o,n)=>{if("operand"===t.type){const{value:s}=t;if(!(e=>!!e&&"object"===typeof e&&null!==e&&"row"in e&&"column"in e)(s))return;const{row:r,column:a,endRow:l,endColumn:d}=s;return Qu(e,i,r,n),qu(e,o,a),Qu(e,i,l,n),void qu(e,o,d)}if("operation"===t.type)for(const s of t.operands)Xu(e,s,i,o,n)},$u=864e5;function Zu(e){return new Date(e*$u)}function Ju(e){return e instanceof Date}function eh(e,t){if((e=>"number"===typeof e&&Number.isFinite(e))(t))return t;if(Ju(t))return t.getTime()/$u;if("boolean"===typeof t)return t?1:0;if("string"===typeof t){const e=Number(t.trim());if(Number.isFinite(e))return e}throw new iu("".concat(e,": values must be numeric"),"#VALUE!")}var th=e=>{let{values:t}=e,i=1;for(const o of Bu(t)){const e=eh("PRODUCT",o);if(null!=e){if(0===e)return 0;i*=e}}return i},ih=e=>{let{values:t}=e,i=!1,o=0,n=!1;for(const s of Bu(t)){i||(i=Ju(s));const e=eh("SUM",s);null!=e&&(o+=e,n=!0)}if(!n)throw new iu("SUM: requires at least one numeric value","#PARSE!");return i?Zu(o):o},oh=e=>{let{values:t}=e;const[i,o]=Gu(t,"POWER",2),n=eh("POWER",i),s=eh("POWER",o);if(null==n||null==s)throw new iu("POWER: non-numeric argument","#VALUE!");return Math.pow(n,s)},nh=e=>{let{values:t}=e,i="";for(const o of t)if(null!=o)switch(typeof o){case"string":i+=o;break;case"number":i+=String(o);break;case"boolean":i+=o?"TRUE":"FALSE";break;case"object":i+=o.toString();break;default:throw new iu("CONCAT: unsupported value type","#VALUE!")}return i},sh={IF:e=>{let{values:t}=e;const[i,o,n]=Gu(t,"IF",3);return i?o:n},NOW:()=>new Date,TODAY:()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},PRODUCT:th,SUM:ih,ADD:ih,SUMIF:e=>{let{args:t}=e;const[i,o,n]=function(e,t,i,o){const n=[];for(const s of e)if(n.push(s),n.length>o)throw new iu("".concat(t,": expected at most ").concat(o," arguments"));if(n.length<i)throw new iu("".concat(t,": expected at least ").concat(i," arguments"));return n}(t,"SUMIF",2,3);if(!Vu(i))throw new iu("SUMIF: first argument must be a range","#VALUE!");if(!Hu(o))throw new iu("SUMIF: second argument must be a value (criteria)","#VALUE!");if(n&&!Vu(n))throw new iu("SUMIF: third argument must be a range (sum_range)","#VALUE!");const s=Yu(o.value);if(!n){let e=0;for(const t of i)if(s(t)){const i=eh("SUMIF",t);null!=i&&(e+=i)}return e}if(i.rowEnd-i.rowStart!==n.rowEnd-n.rowStart)throw new iu("SUMIF: ranges have different sizes","#VALUE!");const r=i[Symbol.iterator](),a=n[Symbol.iterator]();let l=0;for(;;){const e=r.next(),t=a.next();if(e.done||t.done){if(e.done!==t.done)throw new iu("SUMIF: ranges have different sizes","#VALUE!");break}if(s(e.value)){const e=eh("SUMIF",t.value);null!=e&&(l+=e)}}return l},POWER:oh,MIN:e=>{let{values:t}=e,i=null;for(const o of t)null!=o&&(null===i||o<i)&&(i=o);if(null===i)throw new iu("MIN: requires at least one value");return i},MAX:e=>{let{values:t}=e,i=null;for(const o of t)null!=o&&(null===i||o>i)&&(i=o);if(null===i)throw new iu("MAX: requires at least one value");return i},AVERAGE:e=>{let{values:t}=e,i=0,o=0,n=!0;for(const r of Bu(t)){const e=eh("AVG",r);null!=e&&(i+=e,o++,n&&(n=Ju(r)))}if(0===o)throw new iu("AVG: requires at least one value");const s=i/o;return n?Zu(s):s},MEDIAN:e=>{let{values:t}=e,i=!0;const o=[];for(const r of Bu(t)){const e=eh("MEDIAN",r);if(null==e)throw new iu("MEDIAN: all values must be numbers","#VALUE!");o.push(e),i&&(i=Ju(r))}if(0===o.length)throw new iu("MEDIAN: requires at least one value");o.sort((e,t)=>e-t);const n=Math.floor(o.length/2),s=o.length%2===1?o[n]:(o[n-1]+o[n])/2;return i?Zu(s):s},COUNT:e=>{let{values:t}=e,i=0;for(const o of t)null==o||""===o||isNaN(o)||i++;return i},COUNTA:e=>{let{values:t}=e,i=0;for(const o of t)null!=o&&""!==o&&i++;return i},COUNTBLANK:e=>{let{values:t}=e,i=0;for(const o of t)null!=o&&""!==o||i++;return i},COUNTIF:e=>{let{args:t}=e;const[i,o]=Gu(t,"COUNTIF",2);if(!Vu(i))throw new iu("COUNTIF: first argument must be a range","#VALUE!");if(!Hu(o))throw new iu("COUNTIF: second argument must be a value (criteria)","#VALUE!");const n=Yu(o.value);let s=0;for(const r of i)n(r)&&s++;return s},RAND:()=>Math.random(),CONCAT:nh,CONCATENATE:nh,"+":ih,"-":e=>{let{values:t}=e;const[i,o]=Gu(Bu(t),"MINUS",2),n=eh("MINUS",i),s=eh("MINUS",o);if(null==n||null==s)throw new iu("MINUS: non-numeric argument","#VALUE!");const r=Ju(i),a=Ju(o);return r&&!a?Zu(n-s):n-s},"*":th,"/":e=>{let{values:t}=e;const[i,o]=Gu(Bu(t),"DIVIDE",2),n=eh("DIV",i),s=eh("DIV",o);if(null==n||null==s)throw new iu("DIV: non-numeric argument","#VALUE!");if(0===s)throw new iu("DIV: division by zero","#DIV/0!");return n/s},"^":oh,"%":e=>{let{values:t}=e;const[i]=Gu(t,"PERCENT",1),o=eh("PERCENT",i);if(null==o)throw new iu("PERCENT: non-numeric argument","#VALUE!");return o/100},"=":e=>{let{values:t}=e;const[i,o]=Gu(t,"EQUALS",2);return i===o},"&":nh,"<>":e=>{let{values:t}=e;const[i,o]=Gu(t,"NOT_EQUALS",2);return i!==o},">":e=>{let{values:t}=e;const[i,o]=Gu(t,"GT",2);return i>o},">=":e=>{let{values:t}=e;const[i,o]=Gu(t,"GTE",2);return i>=o},"<":e=>{let{values:t}=e;const[i,o]=Gu(t,"LT",2);return i<o},"<=":e=>{let{values:t}=e;const[i,o]=Gu(t,"LTE",2);return i<=o}},rh=class{constructor(e,t,i,o){this.rowNode=e,this.column=t,this.formulaString=i,this.beans=o,this.error=null,this.ast=null,this.astStale=!0,this._value=void 0,this._valueStale=!0}setFormulaString(e){this.formulaString!==e&&(this.formulaString=e,this.astStale=!0,this._valueStale=!0)}setComputedValue(e){this._value=e,this._valueStale=!1,this.error=null}setError(e){this.error=e,this._valueStale=!1}isValueReady(){return!this._valueStale}getValue(){var e,t;return null!==(e=null===(t=this.error)||void 0===t?void 0:t.type)&&void 0!==e?e:this._value}getError(){return this.error}getAst(){if(!this.astStale)return this.ast;const e=lu(this.beans,this.formulaString);return this.ast=null!==e&&void 0!==e?e:null,this.astStale=!1,this.ast}},ah=class extends s.XQb{constructor(){super(...arguments),this.beanName="formula",this.cachedResult=new WeakMap,this.colRefMap=new Map,this.active=!1}setFormulasActive(e){const t=e.list.some(e=>e.isAllowFormula())&&this.checkForIncompatibleServices(e);t!==this.active&&(this.active=t,this.refreshFormulas(!0))}checkForIncompatibleServices(e){return this.gos.get("masterDetail")?((0,s.ujB)(295,{blockedService:"Master Detail"}),!1):this.gos.get("treeData")?((0,s.ujB)(295,{blockedService:"Tree Data"}),!1):this.gos.get("enableCellExpressions")?((0,s.ujB)(295,{blockedService:"Cell Expressions"}),!1):e.list.every(e=>e.isAllowPivot()||e.isPivotActive()?((0,s.ujB)(295,{blockedService:"Column Pivoting"}),!1):e.isAllowRowGroup()||e.isRowGroupActive()?((0,s.ujB)(295,{blockedService:"Row Groups"}),!1):!(e.isAllowValue()||e.isValueActive()||e.getAggFunc())||((0,s.ujB)(295,{blockedService:"Value Aggregation"}),!1))}postConstruct(){this.setupFunctions();const e=()=>{this.active&&this.refreshFormulas(!0)},t=()=>{this.active&&this.setupColRefMap()};this.addManagedPropertyListeners(["masterDetail","enableCellExpressions"],e=>{var t;const{colModel:i}=this.beans;(null===(t=i.cols)||void 0===t?void 0:t.list.some(e=>e.isAllowFormula()))&&this.beans.colModel.refreshAll((0,s.sHF)(e.source))}),this.addManagedListeners(this.beans.eventSvc,{modelUpdated:e,cellValueChanged:e,rowDataUpdated:e,newColumnsLoaded:t,columnMoved:t})}updateFormulaByOffset(e){const{value:t,rowDelta:i=0,columnDelta:o=0,useRefFormat:n=!0}=e;try{const e=!n,s=lu(this.beans,t,e);return Xu(this.beans,s,i,o,e),Ru(this.beans,s,n,e)}catch(s){return t}}setupFunctions(){this.supportedOperations=new Map(Object.entries(sh));const e=this.gos.get("formulaFuncs");e&&Object.keys(e).forEach(t=>{this.supportedOperations.set(t.toUpperCase(),e[t].func)})}setupColRefMap(){if(!this.active)return void(this.colRefMap=new Map);const e="abcdefghijklmnopqrstuvwxyz",t=this.beans.colModel.getCols(),i=new Map;let o=0;null===t||void 0===t||t.forEach(t=>{if(!t.isPrimary())return;let n="",s=o++;for(;n=e[s%26]+n,!(s<26);)s=Math.floor(s/26)-1;t.formulaRef!==n.toUpperCase()&&(t.formulaRef=n.toUpperCase(),t.dispatchColEvent("formulaRefChanged","api")),i.set(n.toUpperCase(),t)}),this.colRefMap=i,this.refreshFormulas(!0)}getColByRef(e){var t;return null!==(t=this.colRefMap.get(e.toUpperCase()))&&void 0!==t?t:null}getColRef(e){for(const[t,i]of this.colRefMap.entries())if(i===e)return t;return null}refreshFormulas(e){this.cachedResult=new WeakMap,e&&this.beans.rowRenderer.refreshCells({suppressFlash:!0,force:!0})}isFormula(e){return this.active&&(0,s.PZy)(e)}normaliseFormula(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const i=lu(this.beans,e);return Ru(this.beans,i,!t,!1)}catch(i){return null}}getFormulaError(e,t){var i;const o=this.cachedResult.get(t),n=null===o||void 0===o?void 0:o.get(e);return null!==(i=null===n||void 0===n?void 0:n.error)&&void 0!==i?i:null}getFunction(e){return this.supportedOperations.get(e.toUpperCase())}ensureCellFormula(e,t){var i,o;let n=this.cachedResult.get(e),s=null===(i=n)||void 0===i?void 0:i.get(t);if(s)return s;const r=null!==(o=this.getFormulaFromDataSource(e,t))&&void 0!==o?o:this.fetchRawValue(t,e);return"string"!==typeof r||"="!==r[0]?null:(s=new rh(e,t,r,this.beans),n||(n=new Map,this.cachedResult.set(e,n)),n.set(t,s),s)}getFormulaFromDataSource(e,t){const i=this.beans.formulaDataSvc;if(null!==i&&void 0!==i&&i.hasDataSource())return i.getFormula({column:t,rowNode:e})}fetchRawValue(e,t){return this.beans.valueSvc.getValue(e,t,!1,"ui")}getVisitorContext(){if(this.activeCtx)return this.activeCtx;const e=new Map;return this.activeCtx={setVisited:(t,i)=>{const o=e.get(t);o&&(o.delete(i),0===o.size&&e.delete(t))},setVisiting:(t,i)=>{var o;let n=e.get(t);if(null===(o=n)||void 0===o?void 0:o.has(i))throw new iu("Circular reference","#CIRCREF!");n||(n=new Set,e.set(t,n)),n.add(i)},errorAllVisitors:t=>{for(const[i,o]of e)for(const e of o){const o=this.ensureCellFormula(i,e);null===o||void 0===o||o.setError(t)}}}}makeFormulaFrame(e){const t=this.ensureCellFormula(e.row,e.column).getAst();if(!t)throw new iu("Expected parsable formula","#PARSE!");return{address:e,ast:t,unresolvedDepIterator:function*(e,t,i){const o=[t];for(;o.length;){const t=o.pop();if("operand"===t.type){const o=t.value;if("object"!==typeof o||null==o)continue;if(!o.endColumn&&!o.endRow){const t=Du(e,o);if(!t)throw new iu("Unrecognised reference to cell","#REF!");const n=i(t.row,t.column);if(!n||n.isValueReady())continue;yield t;continue}if(!o.endColumn||!o.endRow)throw new iu("Incomplete range reference","#REF!");const n=ku(e,o.row),s=ku(e,o.endRow),r=Math.min(n,s),a=Math.max(n,s),l=Iu(e,o.column),d=Iu(e,o.endColumn);for(const t of Ou(e,r,a,l,d)){const e=i(t.row,t.column);e&&!e.isValueReady()&&(yield t)}continue}for(let e=0;e<t.operands.length;e++)o.push(t.operands[e])}}(this.beans,t,this.ensureCellFormula.bind(this))}}resolveValue(e,t){const i=this.ensureCellFormula(t,e);if(!i)return this.fetchRawValue(e,t);if(i.isValueReady())return i.getValue();const o=!!this.activeCtx,{setVisited:n,setVisiting:s,errorAllVisitors:r}=this.getVisitorContext(),a=[];try{for(s(t,e),a.push(this.makeFormulaFrame({row:t,column:e}));a.length;){const{address:e,ast:t,unresolvedDepIterator:i}=a[a.length-1],{row:o,column:r}=e,l=this.ensureCellFormula(o,r);if(l.isValueReady()){if(a.pop(),n(o,r),l.error)throw l.error;continue}const d=i.next();if(!d.done){const e=d.value,t=this.ensureCellFormula(e.row,e.column);if(!t||t.isValueReady())continue;s(e.row,e.column),a.push(this.makeFormulaFrame(e));continue}const c=Eu(this.beans,t,e=>{const t=this.ensureCellFormula(e.row,e.column);if(t){if(!t.isValueReady())throw new iu("Internal scheduling error");const e=t.getError();if(e)throw e;return t.getValue()}return this.fetchRawValue(e.column,e.row)},{row:o,column:r}),u=l.getError();if(u)throw n(o,r),u;l.setComputedValue(c),n(o,r),a.pop()}if(!i.isValueReady())throw new iu("Internal scheduling error");return i.getValue()}catch(d){var l;const e=d instanceof iu?d:new iu(String(null!==(l=null===d||void 0===d?void 0:d.message)&&void 0!==l?l:d));return r(e),e.type}finally{o||(this.activeCtx=null)}}},lh={moduleName:"Formula",version:ki,beans:[ah,Qc],dependsOn:[td],css:['.formula-error:after{background-color:var(--ag-invalid-color);content:"";height:12px;position:absolute;top:-6px;width:12px}:where(.ag-ltr) .formula-error:after{right:-6px;transform:rotate(45deg)}:where(.ag-rtl) .formula-error:after{left:-6px;transform:rotate(-45deg)}']},dh=Symbol("WrappedFunctionMarker"),ch=(e,t)=>{if(e[dh])return e;const i=function(){for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return t(e,...o)};return i[dh]=dh,i};function uh(e){return{content:"".concat(e.xValue," ").concat(e.yValue)}}function hh(e){return{content:"".concat(e.yValue)}}s.uAl;var ph={tag:"span",cls:"ag-find-cell"},gh=class extends s.uAl{constructor(){super(ph)}init(e){this.refresh(e)}refresh(e){var t;const{node:i,column:o}=e,{findSvc:n,valueSvc:r}=this.beans,{value:a,valueFormatted:l}=r.getValueForDisplay({column:o,node:i,includeValueFormatted:!0}),d=null!==(t=null!==l&&void 0!==l?l:a)&&void 0!==t?t:"",c=this.getGui();(0,s.fDi)(c);const u=null===n||void 0===n?void 0:n.getParts({value:d,node:i,column:null!==o&&void 0!==o?o:null});if(u){let e=!1;for(const{value:t,match:i,activeMatch:o}of u){var h;const n=null!==(h=(0,s.SjP)(t))&&void 0!==h?h:"";if(i){const t=(0,s.UCw)({tag:"mark",cls:"ag-find-match"});t.textContent=n,o&&(t.classList.add("ag-find-active-match"),e=!0),c.appendChild(t)}else c.appendChild(document.createTextNode(n))}c.classList.toggle("ag-find-cell-active-match",e)}else{var p;c.textContent=null!==(p=(0,s.SjP)(d))&&void 0!==p?p:"",c.classList.remove("ag-find-cell-active-match")}return!0}};function vh(e){return null===e||void 0===e?void 0:e.toLocaleLowerCase()}function mh(e,t,i){const o=t((0,s.SjP)(i));let n=0;if(null!==o&&void 0!==o&&o.length){let t=-1;for(;t=o.indexOf(e,t+1),-1!=t;)n++}return n}var fh=class extends s.XQb{constructor(){super(...arguments),this.beanName="findSvc",this.active=!1,this.topMatches=new Map,this.topNodes=[],this.topNumMatches=0,this.centerMatches=new Map,this.centerNodes=[],this.centerNumMatches=0,this.bottomMatches=new Map,this.bottomNodes=[],this.caseFormat=vh,this.scrollOnRefresh=!1,this.totalMatches=0}postConstruct(){if(!(0,s.dbY)(this.gos))return;const e=this.refresh.bind(this,!1),t=this.refresh.bind(this,!0),i=(0,s.pkA)(this,()=>{this.isAlive()&&t()},0);this.refreshDebounced=i,this.addManagedPropertyListener("findSearchValue",e),this.addManagedPropertyListener("findOptions",t=>{let{currentValue:i,previousValue:o}=t;(0,s.V67)(i,o)||e()}),this.addManagedPropertyListeners(["groupSuppressBlankHeader","showOpenedGroup"],t),this.addManagedEventListeners({modelUpdated:t,displayedColumnsChanged:t,pinnedRowDataChanged:t,cellValueChanged:i,rowNodeDataChanged:i});const o=this.beans.rowSpanSvc;o&&this.addManagedListeners(o,{spannedCellsUpdated:i}),e()}next(){this.findAcrossContainers(!1,["top",null,"bottom"],1,1)}previous(){this.findAcrossContainers(!0,["bottom",null,"top"],this.totalMatches,-1)}goTo(e,t){var i;if(!t&&e===(null===(i=this.activeMatch)||void 0===i?void 0:i.numOverall))return;const{topMatches:o,topNumMatches:n,centerMatches:s,centerNumMatches:r,bottomMatches:a}=this;e<=n?this.goToInContainer(o,e,0):e<=r?this.goToInContainer(s,e,n):this.goToInContainer(a,e,n+r)}clearActive(){this.activeMatch&&this.setActive(void 0)}isMatch(e,t){var i;return this.active&&!(null===(i=this.getMatches(e.rowPinned).get(e))||void 0===i||!i.some(e=>{let[i]=e;return i===t}))}getNumMatches(e,t){var i,o;return null!==(i=null===(o=this.getMatches(e.rowPinned).get(e))||void 0===o||null===(o=o.find(e=>{let[i]=e;return i===t}))||void 0===o?void 0:o[1])&&void 0!==i?i:0}getParts(e){var t,i;const{value:o,node:n,column:r,precedingNumMatches:a}=e,l=this.findSearchValue,d=null!==(t=(0,s.SjP)(o))&&void 0!==t?t:"";if((0,s.MWY)(l))return[{value:d}];const c=null!==(i=this.caseFormat(d))&&void 0!==i?i:"",u=this.getActiveMatchNum(n,r)-(null!==a&&void 0!==a?a:0);let h=0,p=0;const g=l.length,v=[];for(;;){const e=c.indexOf(l,h);if(-1==e)return h<d.length&&v.push({value:d.slice(h)}),v;{p++,e>h&&v.push({value:d.slice(h,e)});const t=e+g;v.push({value:d.slice(e,t),match:!0,activeMatch:p===u}),h=t}}}registerDetailGrid(e,t){const i=this.gos;if(!(0,s.dbY)(i))return;const o=()=>{var e;return null===(e=i.get("findOptions"))||void 0===e?void 0:e.searchDetail},n=t=>{var i,o;const n=null===(i=this.centerMatches.get(e))||void 0===i?void 0:i[0];t!==(null!==(o=null===n||void 0===n?void 0:n[1])&&void 0!==o?o:0)&&this.refreshDebounced()};t.addEventListener("findChanged",e=>{!t.isDestroyed()&&this.isAlive()&&this.active&&o()&&n(e.totalMatches)}),t.addEventListener("gridPreDestroyed",()=>{var t,s,r;if(!this.isAlive()||!this.active||!o())return;const a=e.parent,l=this.findSearchValue;if(!a||!l)return;const d=null!==(t=null===(s=i.get("detailCellRendererParams"))||void 0===s||null===(r=s.getFindMatches)||void 0===r?void 0:r.call(s,{node:a,data:a.data,findSearchValue:i.get("findSearchValue"),updateMatches:this.refreshDebounced,getMatchesForValue:e=>mh(l,this.caseFormat,e)}))&&void 0!==t?t:0;n(d)}),o()&&t.setGridOption("findSearchValue",i.get("findSearchValue"))}refresh(e){const t=new Set([...this.topNodes,...this.centerNodes,...this.bottomNodes]);this.topNodes=[],this.centerNodes=[],this.bottomNodes=[];const{topNodes:i,topMatches:o,centerMatches:n,centerNodes:r,bottomNodes:a,bottomMatches:l,beans:{gos:d,visibleCols:c,rowModel:u,valueSvc:h,pinnedRowModel:p,pagination:g,rowSpanSvc:v,masterDetailSvc:m,colModel:f},findSearchValue:C}=this,w=d.get("findOptions"),b=null!==w&&void 0!==w&&w.caseSensitive?e=>null!==e&&void 0!==e?e:void 0:vh;this.caseFormat=b;const y=d.get("findSearchValue"),S=b(null===y||void 0===y?void 0:y.trim());this.findSearchValue=S,o.clear(),n.clear(),l.clear();const x=e?this.activeMatch:void 0;this.activeMatch=void 0;const F=d.get("masterDetail")&&(null===w||void 0===w?void 0:w.searchDetail)&&m;if((0,s.MWY)(S)){if(this.active=!1,this.topNumMatches=0,this.centerNumMatches=0,this.totalMatches=0,this.refreshRows(t),F){const e=m.store;for(const t of Object.keys(e)){var R;null===(R=e[t])||void 0===R||null===(R=R.api)||void 0===R||R.findClearActive()}}return void((0,s.MWY)(C)||this.dispatchFindChanged())}const P=c.allCols,D=d.getCallback("isFullWidthRow"),E=d.get("detailCellRendererParams"),A=d.get("fullWidthCellRendererParams"),M=d.get("groupRowRendererParams"),T=Ja(d),k=f.isPivotMode();let I,L,N=0,O=!1;const G=(e,i,o,n)=>{if(!o)return;let s=I.get(e);s||(s=[],I.set(e,s),L.push(e),n||t.add(e)),s.push([i,o]),N+=o},B=e=>{var t,i;if(O){let t=e.rowIndex,i=e.parent;for(;null==t&&i;)t=i.rowIndex,i=i.parent;if(null==t||!g.isRowInPage(t))return}const o=e.hasChildren();if(!il(T,e,o,k,el(T,e,o),tl(T,e,o)))return;const n=e.data;if(null!==D&&void 0!==D&&D({rowNode:e})){if(A){var r,a;const t=null!==(r=null===(a=A.getFindMatches)||void 0===a?void 0:a.call(A,{node:e,data:n,findSearchValue:y,updateMatches:this.refreshDebounced,getMatchesForValue:e=>mh(S,b,e)}))&&void 0!==r?r:0;G(e,null,t)}return}if((0,s.UZN)(d,e,k)){let t;const i=null===M||void 0===M?void 0:M.getFindText;if(i){const o=h.getValueForDisplay({node:e}).value;t=i((0,s.AuN)(d,{value:o,node:e,data:n,column:null,colDef:null,getValueFormatted:()=>{const{valueFormatted:t}=h.getValueForDisplay({node:e,includeValueFormatted:!0});return t}}))}else{const{value:i,valueFormatted:o}=h.getValueForDisplay({node:e,includeValueFormatted:!0});t=null!==o&&void 0!==o?o:i}const o=mh(S,b,t);return void G(e,null,o)}const l=e.level>0&&d.get("groupHideOpenParents")&&(null===(t=e.parent)||void 0===t?void 0:t.getFirstChild())===e&&!(null!==(i=e.parent)&&void 0!==i&&i.expanded);for(const g of P){if((0,s.ybP)(g))continue;const t=null===v||void 0===v?void 0:v.getCellSpan(g,e);if(t&&t.firstNode!==e)continue;if(g.colDef.showRowGroup&&l)continue;let i;const o=g.colDef,r=o.getFindText;if(r){const t=h.getValueForDisplay({column:g,node:e}).value;i=r((0,s.AuN)(d,{value:t,node:e,data:n,column:g,colDef:o,getValueFormatted:()=>{const{valueFormatted:t}=h.getValueForDisplay({column:g,node:e,includeValueFormatted:!0});return t}}))}else{const{value:t,valueFormatted:o}=h.getValueForDisplay({column:g,node:e,includeValueFormatted:!0});i=null!==o&&void 0!==o?o:t}const a=mh(S,b,i);G(e,g,a)}if(e.master&&F){const t=e.detailNode;if(t){var c;const e=null===(c=t.detailGridInfo)||void 0===c?void 0:c.api;if(e){e.setGridOption("findSearchValue",y);const i=e.findGetTotalMatches();return void G(t,null,i)}}if(E){var u,p;const i=null!==(u=null===(p=E.getFindMatches)||void 0===p?void 0:p.call(E,{node:e,data:n,findSearchValue:y,updateMatches:this.refreshDebounced,getMatchesForValue:e=>mh(S,b,e)}))&&void 0!==u?u:0;G(null!==t&&void 0!==t?t:{parent:e,dummy:!0},null,i,!t)}}};I=o,L=i,null===p||void 0===p||p.forEachPinnedRow("top",B),this.topNumMatches=N;let V=N;I=n,L=r,N=0,O=!!g&&!(null===w||void 0===w||!w.currentPageOnly),u.forEachNodeAfterFilterAndSort(B,!0),this.centerNumMatches=N,V+=N,I=l,L=a,N=0,O=!1,null===p||void 0===p||p.forEachPinnedRow("bottom",B),V+=N,this.totalMatches=V,this.active=!0,this.refreshRows(t),x&&this.resetActiveMatch(x),this.dispatchFindChanged()}resetActiveMatch(e){var t,i;const{column:o,numInMatch:s}=e;let r=e.node;if(r.dummy){var a;const e=null===(a=r.parent)||void 0===a?void 0:a.detailNode;if(!e)return;r=e}const l=null!==(t=r.rowPinned)&&void 0!==t?t:null;if(!(null===(i=this.getMatches(l))||void 0===i||null===(i=i.get(r))||void 0===i?void 0:i.some(e=>{let[t,i]=e;return t===o&&i>=s})))return;let d=0;null==l?d=this.topNumMatches:"bottom"===l&&(d=this.topNumMatches+this.centerNumMatches);(()=>{const e=this.getMatches(l);for(const t of e.keys()){const i=t===r,n=e.get(t);for(const[e,t]of n){if(i&&e===o)return void(d+=s);d+=t}}})();const c=(0,n.A)((0,n.A)({},e),{},{node:r,numOverall:d});this.activeMatch=c,this.refreshRows(new Set([r]),null==o?void 0:new Set([o])),this.scrollOnRefresh&&(this.scrollOnRefresh=!1,this.scrollToActive(c)),this.setDetailActive(c)}refreshRows(e,t){e.size&&this.beans.rowRenderer.refreshCells({rowNodes:[...e],columns:t?[...t]:void 0,force:!0,suppressFlash:!0})}findAcrossContainers(e,t,i,o){if(!this.totalMatches)return void this.setActive();const n=this.activeMatch;let s=t;if(n){var r;const{column:i,node:a,numInMatch:l,numOverall:d}=n,c=null!==(r=a.rowPinned)&&void 0!==r?r:null,u=d+o;if(this.findInContainer(c,e,u,a,i,l))return;const h=t.indexOf(c),p=t.length;if(t.slice(h+1,p).some(t=>this.findInContainer(t,e,u)))return;s=t.slice(0,h+1)}s.some(t=>this.findInContainer(t,e,i))}findInContainer(e,t,i,o,n,s){const r=this.getMatches(e),a=this.getRowNodes(e),l=t?-1:1;if(null!=o){const e=r.get(o),a=null===e||void 0===e?void 0:e.findIndex(e=>{let[t]=e;return t===n});if(null!=a&&-1!=a){const[n,r]=e[a];if(t?s>1:s<r)return this.setActive({column:n,node:o,numInMatch:s+l,numOverall:i}),!0}const d=null!=a&&-1!=a?null===e||void 0===e?void 0:e[a+l]:void 0;if(d){const[e,n]=d;return this.setActive({column:e,node:o,numInMatch:t?n:1,numOverall:i}),!0}}let d;if(null==o)d=a[t?a.length-1:0];else{const e=a.findIndex(e=>e===o);d=a[e+l]}if(null==d)return!1;const c=r.get(d),u=null===c||void 0===c?void 0:c[t?c.length-1:0];if(u){const[e,o]=u;return this.setActive({column:e,node:d,numInMatch:t?o:1,numOverall:i}),!0}return!1}dispatchFindChanged(){const{eventSvc:e,activeMatch:t,totalMatches:i,findSearchValue:o}=this;e.dispatchEvent({type:"findChanged",activeMatch:t,totalMatches:i,findSearchValue:o})}setActive(e){if(e&&null==e.node.rowIndex){var t;const i=e.node;let o=i.footer?i.sibling:i.parent;for(;o&&-1!==o.level;)o.expanded=!0,o=o.parent;return this.activeMatch=e,this.scrollOnRefresh=!0,void(null===(t=this.beans.expansionSvc)||void 0===t||t.onGroupExpandedOrCollapsed())}const i=this.activeMatch;this.activeMatch=e,this.refreshAndScrollToActive(e,i),e&&this.setDetailActive(e),this.dispatchFindChanged()}setDetailActive(e){let{node:t,numInMatch:i}=e;var o;t.detail&&(null===(o=t.detailGridInfo)||void 0===o||null===(o=o.api)||void 0===o||o.findGoTo(i))}refreshAndScrollToActive(e,t){if(e||t){const i=new Set,o=new Set;let n=!1;const s=e=>{if(!e)return;const{node:t,column:s}=e;i.add(t),null==s?n=!0:o.add(s)};s(e),s(t),this.refreshRows(i,n?void 0:o)}e&&this.scrollToActive(e)}scrollToActive(e){let{node:{rowPinned:t,rowIndex:i},column:o}=e;const{ctrlsSvc:n,pagination:s,gos:r}=this.beans,a=n.getScrollFeature();var l;null==t&&null!=i&&(!s||null!==(l=r.get("findOptions"))&&void 0!==l&&l.currentPageOnly||s.isRowInPage(i)||s.goToPageWithIndex(i),a.ensureIndexVisible(i));a.ensureColumnVisible(o)}goToInContainer(e,t,i){let o=i;for(const n of e.keys()){const i=e.get(n);for(const[e,s]of i){if(t<=o+s)return void this.setActive({column:e,node:n,numInMatch:t-o,numOverall:t});o+=s}}}getMatches(e){return"top"===e?this.topMatches:"bottom"===e?this.bottomMatches:this.centerMatches}getRowNodes(e){return"top"===e?this.topNodes:"bottom"===e?this.bottomNodes:this.centerNodes}getActiveMatchNum(e,t){const i=this.activeMatch;return null!=i&&i.node===e&&i.column===t?i.numInMatch:0}destroy(){this.topMatches.clear(),this.topNodes.length=0,this.centerMatches.clear(),this.centerNodes.length=0,this.bottomMatches.clear(),this.bottomNodes.length=0,this.activeMatch=void 0,super.destroy()}},Ch={moduleName:"Find",version:ki,apiFunctions:{findGetTotalMatches:function(e){var t,i;return null!==(t=null===(i=e.findSvc)||void 0===i?void 0:i.totalMatches)&&void 0!==t?t:0},findGoTo:function(e,t,i){var o;null===(o=e.findSvc)||void 0===o||o.goTo(t,i)},findNext:function(e){var t;null===(t=e.findSvc)||void 0===t||t.next()},findPrevious:function(e){var t;null===(t=e.findSvc)||void 0===t||t.previous()},findGetActiveMatch:function(e){var t;return null===(t=e.findSvc)||void 0===t?void 0:t.activeMatch},findGetNumMatches:function(e,t){var i,o;const{node:n,column:s}=t;return null!==(i=null===(o=e.findSvc)||void 0===o?void 0:o.getNumMatches(n,s))&&void 0!==i?i:0},findGetParts:function(e,t){var i,o;return null!==(i=null===(o=e.findSvc)||void 0===o?void 0:o.getParts(t))&&void 0!==i?i:[]},findClearActive:function(e){var t;null===(t=e.findSvc)||void 0===t||t.clearActive()},findRefresh:function(e){var t;return null===(t=e.findSvc)||void 0===t?void 0:t.refresh(!0)}},dependsOn:[{moduleName:"FindCore",version:ki,rowModels:["clientSide"],beans:[fh],userComponents:{agFindCellRenderer:gh},css:[".ag-find-cell{display:block;overflow:hidden;text-overflow:ellipsis}.ag-find-match{background-color:var(--ag-find-match-background-color);color:var(--ag-find-match-color)}.ag-find-active-match{background-color:var(--ag-find-active-match-background-color);color:var(--ag-find-active-match-color)}"]}]};var wh={moduleName:"BatchEdit",version:ki,beans:[],apiFunctions:{isBatchEditing:function(e){var t,i;return null!==(t=null===(i=e.editSvc)||void 0===i?void 0:i.isBatchEditing())&&void 0!==t&&t},startBatchEdit:function(e){let{editSvc:t,gos:i,rowModel:o}=e;if(null===t||void 0===t||!t.isBatchEditing()){if(!(0,s.dbY)(i,o))return void(0,s.ujB)(289,{rowModelType:i.get("rowModelType")});null===t||void 0===t||t.setBatchEditing(!0)}},cancelBatchEdit:function(e){let{editSvc:t}=e;null!==t&&void 0!==t&&t.isBatchEditing()&&(null===t||void 0===t||t.stopEditing(void 0,{cancel:!0,source:"api",forceCancel:!0}),null===t||void 0===t||t.setBatchEditing(!1))},commitBatchEdit:function(e){let{editSvc:t}=e;null!==t&&void 0!==t&&t.isBatchEditing()&&(null===t||void 0===t||t.stopEditing(void 0,{source:"api",forceStop:!0}),null===t||void 0===t||t.setBatchEditing(!1))}},dependsOn:[s.hyn,Ii],css:[]};s.XQb;function bh(e){return null!=e.chart?e.chart:e}var yh=new Set(["__proto__","constructor","prototype"]);function Sh(e,t,i){if(null==e)return i;const o=t.split(".");let n=e;for(;o.length>1;)if(n=n[o.shift()],null==n)return i;const s=n[o[0]];return null!=s?s:i}var xh={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",stackedLine:"line",normalizedLine:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall",funnel:"funnel",coneFunnel:"cone-funnel",pyramid:"pyramid"},Fh=new Set(["columnLineCombo","areaColumnCombo","customCombo"]),Rh=["grouped","stacked","normalized"],Ph={area:{isCartesian:!0,canInvert:!0},bar:{isCartesian:!0,canInvert:!0},histogram:{isCartesian:!0},line:{isCartesian:!0,canInvert:!0},pie:{isPie:!0},donut:{isPie:!0,canInvert:!0},scatter:{isCartesian:!0},bubble:{isCartesian:!0},"radial-column":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radial-bar":{isPolar:!0,isEnterprise:!0,isRadial:!0,canInvert:!0},"radar-line":{isPolar:!0,isEnterprise:!0,canInvert:!0},"radar-area":{isPolar:!0,isEnterprise:!0,canInvert:!0},nightingale:{isPolar:!0,isEnterprise:!0,canInvert:!0},"range-bar":{isCartesian:!0,isStatistical:!0,isEnterprise:!0,canSwitchDirection:!0},"range-area":{isCartesian:!0,isStatistical:!0,isEnterprise:!0},"box-plot":{isCartesian:!0,isStatistical:!0,isEnterprise:!0,canSwitchDirection:!0},treemap:{isEnterprise:!0,isHierarchical:!0},sunburst:{isEnterprise:!0,isHierarchical:!0},heatmap:{isCartesian:!0,isEnterprise:!0},waterfall:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},funnel:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},"cone-funnel":{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0},pyramid:{isCartesian:!0,isEnterprise:!0,canSwitchDirection:!0}};function Dh(e){return Fh.has(e)}function Eh(e,t){var i;return!(null===(i=Ph[e])||void 0===i||!i[t])}var Ah=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function Mh(e){return Eh(e,"isCartesian")}function Th(e){return"funnel"===e||"cone-funnel"===e||"pyramid"===e}function kh(e){return Eh(e,"isPolar")}function Ih(e){return Eh(e,"isHierarchical")}function Lh(e){return"doughnut"===e?"donut":e}function Nh(e){return xh[e]}function Oh(e){var t;return null!==(t=Nh(e))&&void 0!==t?t:"line"}function Gh(e){return Eh(e,"isPie")}function Bh(e){return Ih(Oh(e))?void 0:1}function Vh(e){return Ih(Oh(e))?2:function(e){return"pie"===e||"waterfall"===e||"histogram"===e||"funnel"===e||"coneFunnel"===e||"pyramid"===e}(e)?1:void 0}function Hh(e){return!Dh(e)&&Eh(Oh(e),"canInvert")}function zh(e){switch(e){case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":case"stackedLine":case"normalizedLine":case"stackedArea":case"normalizedArea":return"".concat(e,"Full");case"doughnut":return"donut";case"areaColumnCombo":return"AreaColumnCombo";default:return e}}var Wh=["number","category","grouped-category","log","time"];function Uh(e,t,i,o,s){var r;const{chartOptionsToRestore:a,chartPaletteToRestore:l,chartThemeToRestore:d,agChartsExports:c}=e,u=function(e){let t=e.getChartThemeName();const i=e.getChartThemes();i.includes(t)||(t=i[0]);return t}(e),h=jh(u,c._Theme),p=h?{baseTheme:u}:null!==(r=Yh(e,u))&&void 0!==r?r:{},g=e.getGridOptionsChartThemeOverrides(),v=e.apiChartThemeOverrides,m=Oh(e.chartType),f=e.crossFiltering?function(e,t,i){const o={listeners:{legendItemClick:t=>{const i=e.getChart(),o=[t.seriesId,"".concat(t.seriesId,"-filtered-out")];for(const e of i.series.filter(e=>o.includes(e.id)))e.toggleSeriesItem(void 0,"category",t.itemId,void 0)}}},s={tooltip:{delay:500},legend:o,listeners:{click:e=>t.crossFilterCallback(e,!0)}};if("pie"===i||"donut"===i)return{[i]:(0,n.A)({series:{fills:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"fills"},{$if:[{$eq:[{$value:"$parentIndex"},0]},{$mix:[{$value:"$1"},{$ref:"backgroundColor"},.7]},{$value:"$1"}]}]},strokes:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"strokes"},{$if:[{$eq:[{$value:"$parentIndex"},0]},{$mix:[{$value:"$1"},{$ref:"backgroundColor"},.7]},{$value:"$1"}]}]}}},s)};const r={};"line"!==i&&(r.fill={$if:[{$isEven:[{$value:"$index"}]},{$palette:"fill"},{$mix:[{$path:["../$prevIndex/fill",{$palette:"fill"}]},{$ref:"backgroundColor"},.7]}]});return{[i]:(0,n.A)({series:(0,n.A)({stroke:{$if:[{$isEven:[{$value:"$index"}]},{$palette:"stroke"},{$mix:[{$path:["../$prevIndex/fill",{$palette:"stroke"}]},{$ref:"backgroundColor"},.7]}]}},r)},s)}}(t,e,m):void 0,C=[h?Kh(e,i,(()=>{const e=e=>!!e&&Object.keys(e).some(t=>Sh(e[t],"title.enabled",!1));return e(g)||e(v)})()):void 0,{pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}},donut:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}},o,f,g,v,(0,n.A)({},null!==a&&void 0!==a?a:{}),s].filter(e=>!!e).reduce((e,t)=>({baseTheme:e,overrides:t}),p);if(l&&u===d){(function(e,t){const i=(e,t)=>{var i;return e===t||(null===e||void 0===e?void 0:e.length)===(null===t||void 0===t?void 0:t.length)&&(null!==(i=null===e||void 0===e?void 0:e.every((e,i)=>e===(null===t||void 0===t?void 0:t[i])))&&void 0!==i&&i)};return i(e.fills,t.fills)&&i(e.strokes,t.strokes)})(l,e.agChartsExports._Theme.getChartTheme(p).palette)||(C.palette=l)}return C}function jh(e,t){return Object.keys(t.themes).includes(e)}var _h=Wh.reduce((e,t)=>(0,n.A)((0,n.A)({},e),{},{[t]:{title:{_enabledFromTheme:!0}}}),{});function Kh(e,t,i){const o=e.getExtraPaddingDirections();return{common:(0,n.A)((0,n.A)({},t?{animation:{duration:500}}:void 0),{},{axes:_h,padding:{top:!i&&o.includes("top")?40:20,right:o.includes("right")?30:20,bottom:o.includes("bottom")?40:20,left:o.includes("left")?30:20}})}}function Yh(e,t){const{customChartThemes:i}=e,o=null===i||void 0===i?void 0:i[t];return o||(0,s.ujB)(140,{name:t}),o}function qh(e){const t={unhighlightedSeries:{opacity:1},highlightedItem:{strokeWidth:2}};return e||(t.unhighlightedItem={opacity:1}),t}var Qh=class{constructor(e){this.chartProxyParams=e,this.clearThemeOverrides=!1,this.agChartsExports=e.agChartsExports,this.chart=e.chartInstance,this.chartType=e.chartType,this.crossFiltering=e.crossFiltering,this.crossFilterCallback=e.crossFilterCallback,this.standaloneChartType=Oh(this.chartType),null==this.chart?this.chart=e.agChartsExports.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}crossFilteringReset(){}update(e){this.getChartRef().update(this.getUpdateOptions(e,this.getCommonChartOptions(e.updatedOverrides)))}updateThemeOverrides(e){this.getChartRef().updateDelta({theme:{overrides:e}})}getChart(){return bh(this.chart)}getChartRef(){return this.chart}downloadChart(e,t,i){const{chart:o}=this,n=bh(o),s=t||n.title.node.getPlainText(),{width:r,height:a}=e||{};o.download({width:r,height:a,fileName:s,fileFormat:i})}getChartImageDataURL(e){return this.getChart().getCanvasDataURL(e)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var e;return null!==(e=this.getChartOptions().theme.overrides)&&void 0!==e?e:{}}getChartPalette(){return this.agChartsExports._Theme.getChartTheme(this.getChartOptions().theme).palette}setPaired(e){const t=Oh(this.chartProxyParams.chartType);this.chart.updateDelta({theme:{overrides:{[t]:{paired:e}}}})}isPaired(){const e=Oh(this.chartProxyParams.chartType);return Sh(this.getChartThemeOverrides(),"".concat(e,".paired"),!0)}lookupCustomChartTheme(e){return Yh(this.chartProxyParams,e)}getSeriesGroupType(){}transformCategoryData(e,t){return e.map((e,i)=>{const o=e[t],s=null!==o&&void 0!==o&&o.toString?o.toString():"",r=(0,n.A)({},e);return r[t]={id:i,value:o,toString:()=>s},r})}getCommonChartOptions(e){var t,i;const o=this.clearThemeOverrides?{}:null!==(t=null===(i=this.chart)||void 0===i?void 0:i.getOptions())&&void 0!==t?t:{},s=null!=this.chart?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;const r=this.chartProxyParams.styleNonce,a=Uh(this.chartProxyParams,this,this.agChartsExports.isEnterprise,this.getChartThemeDefaults(),null!==e&&void 0!==e?e:s);return(0,n.A)((0,n.A)((0,n.A)({},o),{},{mode:"integrated"},r?{styleNonce:r}:{}),{},{suppressFieldDotNotation:!0,theme:a,container:this.chartProxyParams.parentElement})}getChartThemeDefaults(){const e={enabled:!0,snap:!0,label:{enabled:!1}},t=this.agChartsExports.isEnterprise?{zoom:{enabled:!0},animation:{enabled:!0,duration:500},axes:{number:{crosshair:e},category:{crosshair:e},log:{crosshair:e},time:{crosshair:e}}}:{};t.minHeight=0,t.minWidth=0,t.navigator={enabled:!1,height:18},t.context=this.chartProxyParams.context;const i={common:t};return this.setSeriesChartThemeDefaults(i),i}setSeriesChartThemeDefaults(e){const t=this.getSeriesChartThemeDefaults();t&&(e[this.standaloneChartType]=t)}getSeriesChartThemeDefaults(){}getActiveFormattingPanelOverrides(){var e,t;if(this.clearThemeOverrides)return{};const i=null===(e=this.chart)||void 0===e?void 0:e.getOptions().theme;return null!==(t=null===i||void 0===i?void 0:i.overrides)&&void 0!==t?t:{}}destroy(){let{keepChartInstance:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}},Xh=class extends Qh{constructor(){super(...arguments),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}getUpdateOptions(e,t){const i=this.getAxes(e,t);return(0,n.A)((0,n.A)({},t),{},{data:this.getData(e,i),axes:i,series:this.getSeries(e)})}getData(e,t){const i=["area","line"].includes(this.standaloneChartType);return this.crossFiltering&&i?this.getCrossFilterData(e):this.getDataTransformedData(e,t)}getDataTransformedData(e,t){const i=t.x.type,{categories:o,data:n}=e,[s]=o;switch(i){case"category":return this.transformCategoryData(n,s.id);case"time":return this.transformTimeData(n,s.id,s.convertTime);default:return n}}getXAxisType(e){return e.grouping?"grouped-category":this.isXAxisOfType(e,"time",e=>e instanceof Date)?"time":this.isXAxisOfType(e,"number")?"number":"category"}isXAxisOfType(e,t,i){const[o]=e.categories;if(null!==o&&void 0!==o&&o.chartDataType)return o.chartDataType===t;if(!i)return!1;const n=e.data[0];return!!n&&i(n[o.id])}transformTimeData(e,t,i){var o;return(null===(o=e[0])||void 0===o?void 0:o[t])instanceof Date?e:e.map(e=>{const o=e[t];return"string"===typeof o?(0,n.A)((0,n.A)({},e),{},{[t]:i?i(o):(0,s.xmb)(o)}):e})}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(e){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(e)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(e,t){const[i]=t.categories,o=e=>{if("area"===this.standaloneChartType){return t.getCrossFilteringContext().lastSelectedChartId===t.chartId?e+"-total":e}return e+"-total"};return e.map(e=>(e.yKey=o(e.yKey),e.listeners={seriesNodeClick:t=>{const i=t.datum[e.xKey],o=t.event.metaKey||t.event.ctrlKey;this.crossFilteringAddSelectedPoint(o,i),this.crossFilterCallback(t)}},e.marker={itemStyler:e=>{const t=e.datum[i.id],o="highlighted-item"===e.highlightState;return{fill:o?"yellow":e.fill,size:o?14:this.crossFilteringPointSelected(t)?8:0}}},"area"===this.standaloneChartType&&(e.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),"line"===this.standaloneChartType&&(e.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),e))}getCrossFilterData(e){this.crossFilteringAllPoints.clear();const[t]=e.categories,i=e.fields[0].colId,o="".concat(i,"-filtered-out"),n=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map(s=>{const r=s[t.id];this.crossFilteringAllPoints.add(r);const a=this.crossFilteringPointSelected(r);return"area"===this.standaloneChartType&&n===e.chartId&&(s["".concat(i,"-total")]=a?s[i]:s[i]+s[o]),"line"===this.standaloneChartType&&(s["".concat(i,"-total")]=a?s[i]:s[i]+s[o]),s})}crossFilteringAddSelectedPoint(e,t){e?this.crossFilteringSelectedPoints.push(t):this.crossFilteringSelectedPoints=[t]}isHorizontal(e){const t=this.standaloneChartType;if("waterfall"!==t&&"box-plot"!==t&&"range-bar"!==t)return!1;const i=e.theme,o=e=>{var i;const n=null===e||void 0===e||null===(i=e.overrides)||void 0===i||null===(i=i[t])||void 0===i||null===(i=i.series)||void 0===i?void 0:i.direction;return null!=n?"horizontal"===n:"object"===typeof(null===e||void 0===e?void 0:e.baseTheme)&&o(e.baseTheme)};return o(i)}getSeriesChartThemeDefaults(){return{series:{highlight:qh(this.crossFiltering)}}}},$h=class extends Xh{getSeries(e){const t=e.fields[0];return[{type:this.standaloneChartType,xKey:t.colId,xName:t.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(e){return{x:{type:"number",position:"bottom"},y:{type:"number",position:"left"}}}},Zh=class extends Xh{getAxes(e,t){const i=this.isHorizontal(t),o=i?"y":"x",n=i?"x":"y";return{[o]:{type:this.getXAxisType(e),position:i?"left":"bottom"},[n]:{type:"number",position:i?"bottom":"left"}}}getSeries(e){var t;const[i]=e.categories,[o]=e.fields;return[{type:this.standaloneChartType,xKey:i.id,xName:i.name,yKey:o.colId,yName:null!==(t=o.displayName)&&void 0!==t?t:void 0}]}},Jh=class extends Qh{getUpdateOptions(e,t){return(0,n.A)((0,n.A)({},t),{},{data:this.transformFunnelCategories(e),series:this.getSeries(e)})}transformFunnelCategories(e){const{data:t}=e,[{id:i}]=e.categories;return t.map((e,t)=>(0,n.A)((0,n.A)({},e),{},{[i]:{name:e[i],id:t,toString:()=>String(e[i])}}))}getSeriesChartThemeDefaults(){const e={crosshair:{enabled:!1}};return(0,n.A)({zoom:{enabled:!1}},"pyramid"!==this.chartType&&{axes:{category:e,number:e}})}getSeries(e){const[{id:t}]=e.categories,[{colId:i}]=e.fields;return[{type:this.standaloneChartType,stageKey:t,valueKey:i}]}},ep="AG-GRID-DEFAULT-LABEL-KEY";function tp(e,t){return ip(op(e,function(e){return t.length},function(e,i){const o=t[i];return function(e){if(null==e)return null;return String(e)}(e[o])}))}function ip(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;const{depth:o,rootValues:s,value:r,children:a}=e;if(s)return s.map(e=>(0,n.A)({[ep]:t},e));if(0===o)return[(0,n.A)({[ep]:t},r)];const l=[];for(const[n,d]of a.entries())l.push(...ip(d,n,!0));return i?[(0,n.A)({[ep]:t,children:l},null!==r&&void 0!==r?r:{})]:l}function op(e,t,i){const o={depth:0,children:new Map};for(const s of e){n(s,t(s),i,0,o)}return o;function n(e,t,i,o,s){if(o===t)return 0===o?(s.rootValues||(s.rootValues=[]),s.rootValues.push(e)):s.value=e,s;{const r=i(e,o),a=n(e,t,i,o+1,s.children.get(r)||{depth:0,children:new Map});return s.children.set(r,a),s.depth=Math.max(1+a.depth,s.depth),s}}}var np=class extends Qh{getUpdateOptions(e,t){const{fields:i}=e,[o,s]=i;return(0,n.A)((0,n.A)({},t),{},{series:this.getSeries(o,s),data:this.getData(e,o,s)})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200},position:"right"}}}getSeries(e,t){var i,o;return[{type:this.standaloneChartType,labelKey:ep,sizeKey:null===e||void 0===e?void 0:e.colId,sizeName:null!==(i=null===e||void 0===e?void 0:e.displayName)&&void 0!==i?i:void 0,colorKey:null===t||void 0===t?void 0:t.colId,colorName:null!==(o=null===t||void 0===t?void 0:t.displayName)&&void 0!==o?o:void 0}]}getData(e,t,i){const{categories:o,data:r,groupData:a,grouping:l}=e;if(l){var d;return function(e,t){return ip(op(e,function(e){var i,o;return null!==(i=null===(o=t(e))||void 0===o?void 0:o.length)&&void 0!==i?i:0},function(e,i){const o=t(e);return o?o[i]:o}))}(i?r.concat(null!==(d=null===a||void 0===a?void 0:a.map(e=>{const i=(0,n.A)({},e);return delete i[t.colId],i}))&&void 0!==d?d:[]):r,e=>{var t,i;return null!==(t=null===(i=e[s.JPk])||void 0===i?void 0:i.value)&&void 0!==t?t:null})}return tp(r,o.map(e=>{let{id:t}=e;return t}))}},sp=class extends Qh{getAxes(e){const t="radial-bar"===this.standaloneChartType;return{angle:{type:t?"angle-number":"angle-category"},radius:{type:t?"radius-category":"radius-number"}}}getSeries(e){const{fields:t,categories:i,seriesGroupType:o}=e,[s]=i,r="radial-bar"===this.standaloneChartType,a=this.getSeriesGroupTypeOptions(o);return t.map(e=>{var t,i;return(0,n.A)({type:this.standaloneChartType,angleKey:r?e.colId:s.id,angleName:r?null!==(t=e.displayName)&&void 0!==t?t:void 0:s.name,radiusKey:r?s.id:e.colId,radiusName:r?s.name:null!==(i=e.displayName)&&void 0!==i?i:void 0},a)})}getSeriesGroupType(){var e;const t=this.standaloneChartType;if(!["nightingale","radial-bar","radial-column"].includes(t))return;const i=null===(e=this.getChart().series)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.properties.toJson(),o=()=>i.normalizedTo?"normalized":"stacked";return"nightingale"===t?i.grouped?"grouped":o():i.stacked?o():"grouped"}getUpdateOptions(e,t){const i=this.getAxes(e);return(0,n.A)((0,n.A)({},t),{},{data:this.getData(e,i),axes:i,series:this.getSeries(e)})}getData(e,t){if("angle-category"===t.angle.type||"radius-category"===t.radius.type){const[t]=e.categories;return this.transformCategoryData(e.data,t.id)}return e.data}getSeriesGroupTypeOptions(e){return e?{grouped:"grouped"===e||void 0,stacked:"grouped"!==e||void 0,normalizedTo:"normalized"===e?100:void 0}:{}}getSeriesChartThemeDefaults(){return{series:{highlight:qh(this.crossFiltering)}}}};var rp=class extends Qh{getUpdateOptions(e,t){const i="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",o="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY",s="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY";return(0,n.A)((0,n.A)({},t),{},{series:this.getSeries(e,i,o,s),data:this.getData(e,i,o,s)})}getSeries(e,t,i,o){const[n]=e.categories;return[{type:this.standaloneChartType,yKey:o,xKey:t,colorKey:i,yName:n.name,xName:void 0,colorName:void 0}]}getData(e,t,i,o){const[s]=e.categories;return r=e.data,a=(r,a)=>{const l=r[s.id],d=null==l?"":String(l),c={id:a,value:l,toString:()=>d};return e.fields.map(e=>{let{colId:s,displayName:a}=e;return(0,n.A)((0,n.A)({},r),{},{[t]:a,[i]:r[s],[o]:c})})},r.reduce((e,t,i,o)=>e.concat(a(t,i,o)),new Array);var r,a}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200},position:"right"},series:{tooltip:{renderer:ap}}}}};function ap(e){const{xKey:t,yKey:i,colorKey:o,yName:n,datum:s}=e;return{title:"",data:[{label:n,value:s[i]},{label:s[t],value:o&&s[o]}].map(e=>{let{label:t,value:i}=e;return{label:String(t),value:String(i)}})}}var lp=class extends s.XQb{wireBeans(e){this.sortSvc=e.sortSvc,this.gridRowModel=e.rowModel,this.colModel=e.colModel,this.valueSvc=e.valueSvc,this.pivotResultCols=e.pivotResultCols,this.rowNodeSorter=e.rowNodeSorter}getData(e){if(e.crossFiltering){if(e.grouping)return(0,s.ujB)(141),{chartData:[],colNames:{}};if(!(0,s.dbY)(this.gos))return(0,s.ujB)(142),{chartData:[],colNames:{}}}(0,s.TiQ)(this.gos)&&e.pivoting&&this.updatePivotKeysForSSRM();const t=this.extractRowsFromGridRowModel(e);return t.chartData=this.aggregateRowsByDimension(e,t.chartData),t}extractRowsFromGridRowModel(e){const{crossFiltering:t,startRow:i,endRow:o,valueCols:n,dimensionCols:s,grouping:r,crossFilteringSort:a,combineGroupValues:l}=e;let d=[];const c={},u={},h={};let p,g={},v=[];if(t)g=this.getFilteredRowNodes(),v=this.getAllRowNodes(a),p=v.length;else{const e=this.gridRowModel.getRowCount()-1;if(i===o&&0===i&&0===s.length&&0===n.length)p=0;else{p=(o>=0?Math.min(o,e):e)-i+1}}if(p>0)for(const b of n){let e=[];const t=b.getColDef().pivotKeys;t&&(e=t.slice());const i=b.getColDef().headerName;i&&e.push(i),e.length>0&&(c[b.getId()]=e)}let m=0,f=0;const C={};for(let b=0;b<p;b++){const o=t?v[b]:this.gridRowModel.getRow(b+i);if(o.footer||o.detail){m++;continue}const a={node:o};for(const e of s){const t=e.colId,i=this.colModel.getCol(t);if(i){const e=this.valueSvc.getValue(i,o);if(r){const i=null!==e&&void 0!==e&&e.toString?String(e.toString()):" ",n=this.getGroupLabels(o,i),s=n.slice().reverse();let r={value:s,id:f++,toString:()=>s.filter(Boolean).join(" - ")};if(l){const e=r.toString(),t=C[e];t?r=t:C[e]=r}a[t]=r,o.group&&(u[n.toString()]=b-m);const d=n.slice(1,n.length).toString();d&&(h[d]=u[d])}else a[t]=e}else a[hp]=b+1}for(const i of n){const n=i.getColId();if(t){const t=n+"-filtered-out",s=this.valueSvc.getValue(i,o);let r=s;null!=s&&("function"===typeof s.toNumber?r=s.toNumber():"number"===typeof s.value&&(r=s.value)),g[o.id]?(a[n]=r,a[t]=e.aggFunc||e.isScatter?void 0:0):(a[n]=e.aggFunc||e.isScatter?void 0:0,a[t]=r)}else{let e=this.valueSvc.getValue(i,o);e&&"number"===typeof e.value&&(e=e.value),e&&Object.prototype.hasOwnProperty.call(e,"toString")&&(e=parseFloat(e.toString())),a[n]=null!=e&&"function"===typeof e.toNumber?e.toNumber():e}}d.push(a)}let w;if(r){const e=Object.values(h),t=d;d=[],w=[];for(let i=0;i<t.length;i++)(e.includes(i)?w:d).push(t[i])}return{chartData:d,colNames:c,groupChartData:w}}aggregateRowsByDimension(e,t){const i=e.dimensionCols;if(!e.aggFunc||0===i.length)return t;const o=(0,s.GXs)(i),n=null===o||void 0===o?void 0:o.colId,r={},a=[];for(const s of t){let e=r;for(const t of i){const o=t.colId,r=s[o];if(o===n){let t=e[r];if(!t){t={__children:[]};for(const e of i){const i=e.colId;t[i]=s[i]}e[r]=t,a.push(t)}t.__children.push(s)}else e[r]||(e[r]={}),e=e[r]}}if(this.gos.assertModuleRegistered("SharedAggregation",1))for(const s of a)for(const t of e.valueCols){const i=t.getColId();if(e.crossFiltering){const o=s.__children.filter(e=>"undefined"!==typeof e[i]).map(e=>e[i]),n=Ia(this.beans,o,e.aggFunc,t);s[i]=n&&"undefined"!==typeof n.value?n.value:n;const r="".concat(i,"-filtered-out"),a=s.__children.filter(e=>"undefined"!==typeof e[r]).map(e=>e[r]),l=Ia(this.beans,a,e.aggFunc,t);s[r]=l&&"undefined"!==typeof l.value?l.value:l}else{const o=s.__children.map(e=>e[i]),n=Ia(this.beans,o,e.aggFunc,t);s[i]=n&&"undefined"!==typeof n.value?n.value:n}}return a}updatePivotKeysForSSRM(){var e;const t=null===(e=this.pivotResultCols)||void 0===e||null===(e=e.getPivotResultCols())||void 0===e?void 0:e.list;if(!t)return;const i=this.extractPivotKeySeparator(t);for(const o of t)if(""===i)o.getColDef().pivotKeys=[];else{const e=o.getColId().split(i);o.getColDef().pivotKeys=e.slice(0,e.length-1)}}extractPivotKeySeparator(e){if(0===e.length)return"";const t=(e,i)=>{const o=e.getGroupId();return e.getParent()?t(e.getParent(),o):i.split(o)[1][0]},i=e[0];return null==i.getParent()?"":t(i.getParent(),i.getColId())}getGroupLabels(e,t){const i=[t];for(;e&&0!==e.level;)if(e=e.parent)if(e.group){const t=this.colModel.getCol(s.JPk);if(t){const o=this.valueSvc.getValue(t,e),n=null!==o&&void 0!==o&&o.toString?String(o.toString()):" ";i.push(n)}}else i.push(e.key);return i}getFilteredRowNodes(){const e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(t=>{e[t.id]=t}),e}getAllRowNodes(e){const t=[];return this.gridRowModel.forEachNode(e=>{t.push(e)}),this.sortRowNodes(t,e)}sortRowNodes(e,t){var i;const o=!0===t?null===(i=this.sortSvc)||void 0===i?void 0:i.getSortOptions():t;return o&&0!=o.length&&this.rowNodeSorter?this.rowNodeSorter.doFullSort(e,o):e}},dp=class extends s.XQb{constructor(){super(...arguments),this.valueColsWithoutSeriesType=new Set}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.valueSvc=e.valueSvc}postConstruct(){const e=()=>this.valueColsWithoutSeriesType.clear();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e})}getColumn(e){return this.colModel.getColDefCol(e)}getAllDisplayedColumns(){return this.beans.visibleCols.allCols}getColDisplayName(e){return this.colNames.getDisplayNameForColumn(e,"chart")}getColGroupDisplayName(e){return this.colNames.getDisplayNameForColumnGroup(e,"chart")}getRowGroupColumns(){var e,t;return null!==(e=null===(t=this.beans.rowGroupColsSvc)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}getGroupDisplayColumns(){var e,t;return null!==(e=null===(t=this.beans.showRowGroupCols)||void 0===t?void 0:t.columns)&&void 0!==e?e:[]}isPivotMode(){return this.colModel.isPivotMode()}isPivotActive(){return this.colModel.isPivotActive()}getChartColumns(){const e=this.colModel.getCols(),t=new Set,i=new Set;for(const o of e){const e=o.getColDef(),n=e.chartDataType;if(n)switch(n){case"category":case"time":t.add(o);continue;case"series":i.add(o);continue;case"excluded":continue;default:(0,s.ujB)(153,{chartDataType:n})}"ag-Grid-AutoColumn"!==e.colId?o.isPrimary()?(this.isInferredValueCol(o)?i:t).add(o):i.add(o):t.add(o)}return{dimensionCols:t,valueCols:i}}isInferredValueCol(e){const t=e.getColId();if("ag-Grid-AutoColumn"===t)return!1;const i=(0,s.CFh)(this.beans,{rowIndex:0,rowPinned:null});if(!i)return this.valueColsWithoutSeriesType.has(t);let o=this.valueSvc.getValue(e,i);null==o&&(o=this.extractLeafData(i,e)),null!=o&&("function"===typeof o.toNumber?o=o.toNumber():"number"===typeof o.value&&(o=o.value));const n="number"===typeof o||"number"===e.colDef.cellDataType||["series","time"].includes(e.colDef.chartDataType);return n?this.valueColsWithoutSeriesType.add(t):null==o&&"number"!==e.colDef.cellDataType&&(0,s.ujB)(265,{colId:t}),n}extractLeafData(e,t){const i=e.data&&this.valueSvc.getValue(t,e);if(null!=i)return i;const o=e.childrenAfterGroup;if(o)for(let n=0,s=o.length;n<s;++n){const e=o[n],i=this.extractLeafData(e,t);if(null!=i)return i}return null}destroy(){this.valueColsWithoutSeriesType.clear(),super.destroy()}},cp=new Set(["line","groupedColumn","stackedColumn","area","stackedArea"]),up=class extends s.XQb{constructor(e){var t;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=e,this.seriesChartTypes=null!==(t=e.params.seriesChartTypes)&&void 0!==t?t:[]}postConstruct(){this.initComboCharts()}update(e){this.seriesChartTypes=null!==e&&void 0!==e?e:this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){const e=this.seriesChartTypes&&this.seriesChartTypes.length>0;("customCombo"===this.chartDataModel.chartType||e)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){this.chartDataModel.isComboChart()&&(this.seriesChartTypes=this.seriesChartTypes.map(e=>{const t=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=!t&&e.secondaryAxis,e}),"customCombo"!==this.chartDataModel.chartType?this.updateChartSeriesTypesForBuiltInCombos():this.updateSeriesChartTypesForCustomCombo())}updateSeriesChartTypesForCustomCombo(){this.seriesChartTypes&&this.seriesChartTypes.length>0||this.suppressComboChartWarnings||(0,s.ujB)(150),this.seriesChartTypes=this.seriesChartTypes.map(e=>(cp.has(e.chartType)||((0,s.ujB)(151,{chartType:e.chartType}),e.chartType="line"),e));const e=this.chartDataModel.valueColState.map(e=>{this.savedCustomSeriesChartTypes&&0!==this.savedCustomSeriesChartTypes.length||(this.savedCustomSeriesChartTypes=this.seriesChartTypes);const t=this.savedCustomSeriesChartTypes.find(t=>t.colId===e.colId);return t||(e.selected&&!this.suppressComboChartWarnings&&(0,s.ujB)(152,{colId:e.colId}),{colId:e.colId,chartType:"line",secondaryAxis:!1})});this.seriesChartTypes=e,this.savedCustomSeriesChartTypes=e,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){const{chartType:e,valueColState:t}=this.chartDataModel,i="columnLineCombo"===e?"groupedColumn":"stackedArea",o="columnLineCombo"===e?"line":"groupedColumn",n=t.filter(e=>e.selected),s=Math.ceil(n.length/2);this.seriesChartTypes=n.map((e,t)=>{const n=t>=s?o:i;return{colId:e.colId,chartType:n,secondaryAxis:!1}})}},hp="AG-GRID-DEFAULT-CATEGORY",pp=class extends s.XQb{constructor(e){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.colNames={},this.crossFiltering=!1,this.crossFilteringSort=!0,this.grouping=!1,this.useGroupColumnAsCategory=!1,this.params=e,this.chartId=e.chartId,this.setParams(e)}wireBeans(e){this.rangeSvc=e.rangeSvc,this.chartTranslation=e.chartTranslation}setParams(e){const{chartType:t,pivotChart:i,chartThemeName:o,switchCategorySeries:n,aggFunc:s,cellRange:r,suppressChartRanges:a,unlinkChart:l,crossFiltering:d,crossFilteringSort:c,seriesGroupType:u,useGroupColumnAsCategory:h}=e;this.chartType=t,this.pivotChart=null!==i&&void 0!==i&&i,this.chartThemeName=o,this.switchCategorySeries=!!n,this.aggFunc=s,this.referenceCellRange=r,this.suppliedCellRange=r,this.suppressChartRanges=null!==a&&void 0!==a&&a,this.unlinked=!!l,this.crossFiltering=!!d,this.crossFilteringSort=null===c||void 0===c||c,this.seriesGroupType=u,this.useGroupColumnAsCategory=!!h}postConstruct(){this.datasource=this.createManagedBean(new lp),this.chartColSvc=this.createManagedBean(new dp),this.comboChartModel=this.createManagedBean(new up(this)),this.updateCellRanges({setColsFromRange:!0}),this.updateData()}updateModel(e){const{cellRange:t,seriesChartTypes:i}=e;t!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.setParams(e),this.updateSelectedDimensions(null===t||void 0===t?void 0:t.columns),this.updateCellRanges({setColsFromRange:!0});(this.isComboChart()||i)&&this.comboChartModel.update(i),this.unlinked||this.updateData()}updateCellRanges(e){const{updatedColState:t,resetOrder:i,maintainColState:o,setColsFromRange:n}=null!==e&&void 0!==e?e:{};this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);const{dimensionCols:s,valueCols:r}=this.chartColSvc.getChartColumns(),a=this.getAllColumnsFromRanges();t&&this.updateColumnState(t,i),this.setDimensionCellRange(s,a,t),this.setValueCellRange(r,a,n),t||o||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){const{startRow:e,endRow:t}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();const i={aggFunc:this.aggFunc,dimensionCols:this.getSelectedDimensions(),grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,crossFilteringSort:this.getCrossFilteringSort(),valueCols:this.getSelectedValueCols(),startRow:e,endRow:t,isScatter:["scatter","bubble"].includes(this.chartType),combineGroupValues:(o=Oh(this.chartType),Eh(o,"isStatistical"))};var o;const{chartData:n,colNames:s,groupChartData:r}=this.datasource.getData(i);this.chartData=n,this.groupChartData=r,this.colNames=s,this.categoryAxisType=void 0}isGrouping(){const e=this.gos.get("treeData"),t=e?null:this.chartColSvc.getRowGroupColumns(),i=e||t&&t.length>0,o=this.getSelectedDimensions().map(e=>{let{colId:t}=e;return t}),n=this.chartColSvc.getGroupDisplayColumns().map(e=>e.getColId()).some(e=>o.includes(e));return!!i&&n}getSelectedValueCols(){return this.valueColState.filter(e=>e.selected).map(e=>e.column)}getSelectedDimensions(){return this.dimensionColState.filter(e=>e.selected)}getValueColState(){return this.valueColState.map(this.displayNameMapper.bind(this))}displayNameMapper(e){const{column:t}=e;if(t){const i=this.getColDisplayName(t);e.displayName=this.isPivotMode()?this.getPivotDisplayName(t,i):i}else{const i=this.colNames[e.colId];e.displayName=i?i.join(" - "):this.getColDisplayName(t)}return e}getPivotDisplayName(e,t){let i=!1,o=[t];const n=e=>{if(!e)return;const t=this.chartColSvc.getColGroupDisplayName(e);null!==t&&void 0!==t&&t.length?(o.unshift(t),n(e.getParent())):i=!0};if(n(e.getParent()),i){const t=this.colNames[e.getColId()];t&&(o=t)}return o.join(" - ")}getColDisplayName(e){return this.chartColSvc.getColDisplayName(e)}isPivotMode(){return this.chartColSvc.isPivotMode()}getChartDataType(e){const t=this.chartColSvc.getColumn(e);return t?t.getColDef().chartDataType:void 0}getConvertTime(e){const t=this.chartColSvc.getColumn(e);var i;if("dateString"===(null===t||void 0===t?void 0:t.colDef.cellDataType))return null===(i=this.beans.dataTypeSvc)||void 0===i?void 0:i.getDateParserFunction(t)}isPivotActive(){return this.chartColSvc.isPivotActive()}createCellRange(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:i,startColumn:e===s.OnL.DIMENSION||null==this.referenceCellRange.startColumn?i[0]:this.referenceCellRange.startColumn,type:e}}getAllColumnsFromRanges(){if(this.pivotChart)return new Set(this.chartColSvc.getAllDisplayedColumns());const e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),new Set(e)}getRowIndexes(){let e=0,t=0;const{rangeSvc:i,valueCellRange:o,dimensionCellRange:n}=this,s=o||n;if(i&&s){e=i.getRangeStartRow(s).rowIndex;const o=i.getRangeEndRow(s);t="bottom"===o.rowPinned?-1:o.rowIndex}return{startRow:e,endRow:t}}resetColumnState(){const{dimensionCols:e,valueCols:t}=this.chartColSvc.getChartColumns(),i=this.getAllColumnsFromRanges(),o=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];const n=Ih(Oh(this.chartType));let r=!1,a=1;const l=this.suppliedCellRange.columns[0],d=this.gos.get("treeData"),c=d?null:this.chartColSvc.getRowGroupColumns(),u=d||c&&c.length>0;e.forEach(e=>{const t=(0,s.dYA)(e),o=this.crossFiltering&&this.aggFunc?l.getColId()===e.getColId():this.useGroupColumnAsCategory&&u&&t||(!r||n)&&i.has(e);this.dimensionColState.push({column:e,colId:e.getColId(),displayName:this.getColDisplayName(e),selected:o,order:a++}),o&&(r=!0)});const h={colId:hp,displayName:this.chartTranslation.translate("defaultCategory"),selected:!r,order:0};this.dimensionColState.unshift(h);const p=this.referenceCellRange.columns.filter(e=>t.has(e));t.forEach(e=>{o&&this.referenceCellRange.columns.includes(e)&&(e=p.shift()),this.valueColState.push({column:e,colId:e.getColId(),displayName:this.getColDisplayName(e),selected:i.has(e),order:a++})})}updateColumnState(e,t){const i=t=>t.colId===e.colId,{dimensionColState:o,valueColState:n}=this,s=o.find(i),r=n.find(i);if(s){if(Ih(Oh(this.chartType)))s.selected=e.selected;else{const t=e.selected?s:o.filter(e=>e!==s).find(e=>{let{selected:t}=e;return t});o.forEach(e=>e.selected=e===t)}}else r&&(r.selected=e.selected);const a=[...o,...n],l=[];t||(a.forEach((t,i)=>{i===e.order&&l.push(e.colId),t.colId!==e.colId&&l.push(t.colId)}),a.forEach(e=>{const t=l.indexOf(e.colId);e.order=t>=0?l.indexOf(e.colId):a.length-1})),this.reorderColState()}reorderColState(){const e=(e,t)=>e.order-t.order;this.dimensionColState.sort(e),this.valueColState.sort(e)}setDimensionCellRange(e,t,i){this.dimensionCellRange=void 0;const o=Ih(Oh(this.chartType));if(!i&&!this.dimensionColState.length){const i=new Array;return e.forEach(e=>{i.length>0&&!o||!t.has(e)||i.push(e)}),void(i.length>0&&(this.dimensionCellRange=this.createCellRange(s.OnL.DIMENSION,...i)))}let n=i?[i]:[];if(this.crossFiltering&&this.aggFunc){const e=this.suppliedCellRange.columns[0];n=this.dimensionColState.filter(t=>t.colId===e.getColId())}else(o||0===n.length||n.some(t=>{let{column:i}=t;return!i||!e.has(i)}))&&(n=this.dimensionColState.filter(e=>e.selected));const r=1===n.length&&n[0].colId===hp,a=n.map(e=>{let{column:t}=e;return t}).filter(e=>null!=e);a.length>0&&!r&&(this.dimensionCellRange=this.createCellRange(s.OnL.DIMENSION,...a))}setValueCellRange(e,t,i){this.valueCellRange=void 0;const o=[],n=Vh(this.chartType);let r=0;if(e.forEach(e=>{i?(null==n||r<n)&&t.has(e)&&(o.push(e),r++):this.valueColState.some(t=>t.selected&&t.colId===e.getColId())&&o.push(e)}),o.length>0){let e=[];this.valueColState.length>0?e=this.valueColState.map(e=>e.colId):t.forEach(t=>e.push(t.getColId())),o.sort((t,i)=>e.indexOf(t.getColId())-e.indexOf(i.getColId())),this.valueCellRange=this.createCellRange(s.OnL.VALUE,...o)}}resetCellRanges(e,t){if(!e&&!t)return;const{dimensionCols:i,valueCols:o}=this.chartColSvc.getChartColumns(),n=this.getAllColumnsFromRanges();e&&this.setDimensionCellRange(i,n),t&&this.setValueCellRange(o,n)}updateSelectedDimensions(e){const t=new Set(e.map(e=>e.getColId()));if(Ih(Oh(this.chartType))){const e=this.dimensionColState.filter(e=>t.has(e.colId)),i=new Set(e.map(e=>e.colId));this.dimensionColState=this.dimensionColState.map(e=>(0,n.A)((0,n.A)({},e),{},{selected:i.has(e.colId)}))}else{const e=(this.dimensionColState.find(e=>t.has(e.colId))||this.dimensionColState[0]).colId;this.dimensionColState=this.dimensionColState.map(t=>(0,n.A)((0,n.A)({},t),{},{selected:t.colId===e}))}}syncDimensionCellRange(){const e=this.getSelectedDimensions();if(0===e.length)return;const t=e.map(e=>{let{column:t}=e;return t}).filter(e=>null!=e);t.length>0&&(this.dimensionCellRange=this.createCellRange(s.OnL.DIMENSION,...t))}isComboChart(e){return Dh(null!==e&&void 0!==e?e:this.chartType)}getCrossFilteringSort(){const e=this.crossFilteringSort;if("boolean"===typeof e)return e;const t=[];return e.forEach(e=>{let{sort:i,colId:o}=e;const n=this.chartColSvc.getColumn(o);var r;n&&t.push({sort:i,column:n,type:(0,s.xw4)(null===(r=n.getSortDef())||void 0===r?void 0:r.type)})}),t}},gp=class extends Xh{getAxes(e,t){return{x:{type:this.getXAxisType(e),position:this.isHorizontal(t)?"left":"bottom"},y:{type:"number",position:this.isHorizontal(t)?"bottom":"left"}}}computeSeriesStatistics(e,t){const{data:i,fields:o}=e,[n]=e.categories,s=n.id||hp,r=this.groupDataByCategory(s,i);return Array.from(r).map(e=>{let[i,s]=e;const r={[n.id]:i};return o.forEach((e,i)=>{const o=s.map(t=>t[e.colId]).filter(e=>"number"===typeof e&&!isNaN(e)),n=t(o);for(const t of Object.keys(n)){const e="".concat(t,":").concat(i);r[e]=o.length>0?n[t]:null}}),r})}groupDataByCategory(e,t){return t.reduce((t,i)=>{const o=(t=>{if(e===hp)return 1;const i=t[e];return null===i||void 0===i?"":i instanceof Date?i.getTime():i})(i),n=t.get(o);return n?n.push(i):t.set(o,[i]),t},new Map)}},vp=class extends gp{getSeries(e){const[t]=e.categories;return e.fields.map((e,i)=>{var o;return{type:this.standaloneChartType,xKey:t.id,xName:t.name,yName:null!==(o=e.displayName)&&void 0!==o?o:void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:"min:".concat(i),q1Key:"q1:".concat(i),medianKey:"median:".concat(i),q3Key:"q3:".concat(i),maxKey:"max:".concat(i)}})}getData(e){return this.computeSeriesStatistics(e,e=>{const t=e.sort((e,t)=>e-t);return{min:t[0],q1:this.quantile(t,.25),median:this.quantile(t,.5),q3:this.quantile(t,.75),max:t[t.length-1]}})}quantile(e,t){const i=(e.length-1)*t,o=Math.floor(i),n=i-o;return void 0!==e[o+1]?e[o]+n*(e[o+1]-e[o]):e[o]}},mp=class extends gp{getSeries(e){const[t]=e.categories;return e.fields.map((e,i)=>{var o;return{type:this.standaloneChartType,xKey:t.id,xName:t.name,yName:null!==(o=e.displayName)&&void 0!==o?o:void 0,yLowName:"Min",yHighName:"Max",yLowKey:"min:".concat(i),yHighKey:"max:".concat(i)}})}getData(e){return this.computeSeriesStatistics(e,e=>({min:Math.min(...e),max:Math.max(...e)}))}},fp=(s.XQb,class extends s.XQb{constructor(e,t,i,o){super(),this.chartController=e,this.eGui=t,this.cssClass=i,this.createPanels=o,this.panels=[]}postConstruct(){this.addManagedListeners(this.chartController,{chartUpdated:()=>this.refreshPanels(!0),chartApiUpdate:()=>this.refreshPanels(!1)})}addComponent(e){this.createBean(e),this.panels.push(e),e.addCss(this.cssClass),this.eGui.appendChild(e.getGui())}refreshPanels(e){const t=this.chartController.getChartType(),i=this.chartController.isGrouping(),o=Oh(t);e&&t===this.chartType&&i===this.isGrouping||(this.destroyPanels(),this.createPanels(t,o),this.chartType=t,this.isGrouping=i)}destroyPanels(){for(const e of this.panels)(0,s.MwW)(e.getGui()),this.destroyBean(e);this.panels=[]}destroy(){this.destroyPanels(),super.destroy()}}),Cp=class extends s.uAl{constructor(e){super(),this.chartMenuParamsFactory=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuParamsFactory.addEnableParams("animation.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("animation"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultNumberInputParams("animation.duration","durationMillis",{min:0});this.setTemplate('<div>\n            <ag-group-component data-ref="animationGroup">\n                <ag-input-number-field data-ref="animationHeightInput"></ag-input>\n            </ag-group-component>\n        </div>',[Ti,s.HUZ],{animationGroup:e,animationHeightInput:t})}},wp=class extends Ci{constructor(e){super((0,n.A)((0,n.A)({},e),{},{dialogCallbacks:$i}))}},bp={selector:"AG-COLOR-PICKER",component:wp},yp=class extends s.uAl{constructor(e){super(),this.chartMenuParamsFactory=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuParamsFactory.addEnableParams("crosshair.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("crosshair"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.label.enabled","crosshairLabel"),i=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.snap","crosshairSnap"),o=this.chartMenuParamsFactory.getDefaultColorPickerParams("crosshair.stroke","color");this.setTemplate('<div>\n            <ag-group-component data-ref="crosshairGroup">\n                <ag-checkbox data-ref="crosshairLabelCheckbox"></ag-checkbox>\n                <ag-checkbox data-ref="crosshairSnapCheckbox"></ag-checkbox>\n                <ag-color-picker data-ref="crosshairStrokeColorPicker"></ag-color-picker>\n            </ag-group-component>\n        </div>',[Ti,s.DXf,bp],{crosshairGroup:e,crosshairLabelCheckbox:t,crosshairSnapCheckbox:i,crosshairStrokeColorPicker:o})}},Sp=class extends s.uAl{constructor(e){super(),this.chartMenuParamsFactory=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuParamsFactory.addEnableParams("navigator.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("navigator"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultSliderParams("navigator.height","height",60);t.minValue=10;const i=this.chartMenuParamsFactory.getDefaultCheckboxParams("navigator.miniChart.enabled","miniChart");this.setTemplate('<div>\n            <ag-group-component data-ref="navigatorGroup">\n                <ag-slider data-ref="navigatorHeightSlider"></ag-slider>\n                <ag-checkbox data-ref="navigatorMiniChartCheckbox"></ag-checkbox>\n            </ag-group-component>\n        </div>',[Ti,hi,s.DXf],{navigatorGroup:e,navigatorHeightSlider:t,navigatorMiniChartCheckbox:i})}},xp=class extends s.uAl{constructor(e){super(),this.chartMenuParamsFactory=e,this.zoomScrollingStepInput=s.dRA}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuParamsFactory.addEnableParams("zoom.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("zoom"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableScrolling","scrollingZoom"),i=this.chartMenuParamsFactory.getDefaultSliderParams("zoom.scrollingStep","scrollingStep",1);i.step=.01,i.minValue=i.step;const o=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableSelecting","selectingZoom");t.onValueChange=(e=>t=>{e&&(e(t),this.zoomScrollingStepInput.setDisabled(!t))})(t.onValueChange),this.setTemplate('<div>\n            <ag-group-component data-ref="zoomGroup">\n                <ag-checkbox data-ref="zoomSelectingCheckbox"></ag-checkbox>\n                <ag-checkbox data-ref="zoomScrollingCheckbox"></ag-checkbox>\n                <ag-slider data-ref="zoomScrollingStepInput"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,s.DXf,hi],{zoomGroup:e,zoomScrollingCheckbox:t,zoomScrollingStepInput:i,zoomSelectingCheckbox:o}),this.zoomScrollingStepInput.setDisabled(!t.value)}},Fp=["navigator","zoom","animation","crosshair"],Rp=class extends s.uAl{constructor(e){super('<div class="ag-chart-advanced-settings-wrapper"></div>'),this.chartMenuContext=e}postConstruct(){this.chartPanelFeature=this.createManagedBean(new fp(this.chartMenuContext.chartController,this.getGui(),"ag-chart-advanced-settings-section",(e,t)=>this.createPanels(e,t))),this.chartPanelFeature.refreshPanels()}createPanels(e,t){for(const i of Fp){if(!this.isGroupPanelShownForSeries(i,t))continue;const e=this.createPanel(i);this.chartPanelFeature.addComponent(e)}}isGroupPanelShownForSeries(e,t){return"animation"===e||Mh(t)&&!Th(t)}createPanel(e){const{chartMenuParamsFactory:t,chartAxisMenuParamsFactory:i}=this.chartMenuContext;switch(e){case"navigator":return new Sp(t);case"zoom":return new xp(t);case"animation":return new Cp(t);case"crosshair":return new yp(i)}}},Pp=(s.XQb,class extends s.aJZ{constructor(e){super('<div class="ag-chart-advanced-settings"></div>'),this.chartMenuContext=e}postConstruct(){this.advancedSettingsPanel=this.createManagedBean(new Rp(this.chartMenuContext)),this.getGui().appendChild(this.advancedSettingsPanel.getGui()),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),focusTrapActive:!0})}onTabKeyDown(e){if(e.defaultPrevented)return;e.preventDefault();const t=e.shiftKey,i=this.advancedSettingsPanel.getGui(),o=(0,s.ey2)(this.beans,i,!1,t);if(o)o.focus();else{const e=(0,s.YE1)(i);e.length&&e[t?e.length-1:0].focus()}}}),Dp=(s.XQb,class extends s.uAl{constructor(e){super('\n            <div data-ref="eChartsMenu" role="presentation" class="ag-menu ag-chart-menu-popup"></div>\n        '),this.menuItems=e,this.eChartsMenu=s.dRA}postConstruct(){this.mainMenuList=this.createManagedBean(new ys(0)),this.mainMenuList.addMenuItems(this.menuItems),this.mainMenuList.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eChartsMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(){var e;null===(e=this.hidePopupFunc)||void 0===e||e.call(this)}afterGuiAttached(e){let{hidePopup:t}=e;t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),(0,s.YtT)(this.mainMenuList.getGui())}});s.XQb;function Ep(e,t,i){const o=new Array(i);for(let n=0;n<i;n++)o[n]=n===t?e:null;return{filterType:"multi",filterModels:o}}function Ap(e){return e.xKey||e.calloutLabelKey}var Mp=["chartUnlink","chartLink","chartDownload","chartMenu"],Tp={settings:"chartSettings",data:"chartData",format:"chartFormat"},kp=(s.XQb,{pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Chart",data:"Set Up",format:"Customize",categories:"Categories",defaultCategory:"(None)",series:"Series",switchCategorySeries:"Switch Category / Series",categoryValues:"Category Values",seriesLabels:"Series Labels",aggregate:"Aggregate",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",xAxis:"Horizontal Axis",yAxis:"Vertical Axis",polarAxis:"Polar Axis",radiusAxis:"Radius Axis",navigator:"Navigator",zoom:"Zoom",animation:"Animation",crosshair:"Crosshair",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",axisType:"Axis Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",timeFormat:"Time Format",autoRotate:"Auto Rotate",labelRotation:"Rotation",circle:"Circle",polygon:"Polygon",square:"Square",cross:"Cross",diamond:"Diamond",plus:"Plus",triangle:"Triangle",heart:"Heart",orientation:"Orientation",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",gridLines:"Grid Lines",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chartStyle:"Chart Style",title:"Title",chartTitles:"Titles",chartTitle:"Chart Title",chartSubtitle:"Subtitle",horizontalAxisTitle:"Horizontal Axis Title",verticalAxisTitle:"Vertical Axis Title",polarAxisTitle:"Polar Axis Title",titlePlaceholder:"Chart Title",background:"Background",font:"Font",weight:"Weight",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",scrollingZoom:"Scrolling",scrollingStep:"Scrolling Step",selectingZoom:"Selecting",durationMillis:"Duration (ms)",crosshairLabel:"Label",crosshairSnap:"Snap to Node",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",miniChart:"Mini-Chart",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",stackedLineTooltip:"Stacked",normalizedLineTooltip:"100% Stacked",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",waterfallTooltip:"Waterfall",heatmapTooltip:"Heatmap",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",chartMenuToolbarTooltip:"Menu",chartEdit:"Edit Chart",chartAdvancedSettings:"Advanced Settings",chartLink:"Link to Grid",chartUnlink:"Unlink from Grid",chartDownload:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis",seriesAdd:"Add a series",categoryAdd:"Add a category",bar:"Bar",column:"Column",histogram:"Histogram",advancedSettings:"Advanced Settings",direction:"Direction",horizontal:"Horizontal",vertical:"Vertical",seriesGroupType:"Group Type",groupedSeriesGroupType:"Grouped",stackedSeriesGroupType:"Stacked",normalizedSeriesGroupType:"100% Stacked",legendEnabled:"Enabled",groupedColumnFull:"Grouped Column",stackedColumnFull:"Stacked Column",normalizedColumnFull:"100% Stacked Column",groupedBarFull:"Grouped Bar",stackedBarFull:"Stacked Bar",normalizedBarFull:"100% Stacked Bar",stackedAreaFull:"Stacked Area",normalizedAreaFull:"100% Stacked Area",stackedLineFull:"Stacked Line",normalizedLineFull:"100% Stacked Line",customCombo:"Custom Combination",funnel:"Funnel",coneFunnel:"Cone Funnel",pyramid:"Pyramid",funnelGroup:"Funnel",funnelTooltip:"Funnel",coneFunnelTooltip:"Cone Funnel",pyramidTooltip:"Pyramid",dropOff:"Drop-Off",stageLabels:"Stage Labels",reverse:"Reverse",tooltipMode:"Tooltip Mode",tooltipModeSingle:"Single",tooltipModeShared:"Multiple",tooltipModeCompact:"Compact",groupedColumn:"Grouped",stackedColumn:"Stacked",pie:"Pie",donut:"Donut",line:"Line",scatter:"Scatter",bubble:"Bubble",area:"Area",stackedArea:"Stacked",radarLine:"Radar Line",radarArea:"Radar Area",nightingale:"Nightingale",radialColumn:"Radial Column",radialBar:"Radial Bar",boxPlot:"Box Plot",rangeBar:"Range Bar",rangeArea:"Range Area",treemap:"Treemap",sunburst:"Sunburst",waterfall:"Waterfall",heatmap:"Heatmap",columnLineCombo:"Column & Line",AreaColumnCombo:"Area & Column",ariaChartMenuClose:"Close Chart Edit Menu",ariaChartSelected:"Selected",group:"Group",timeFormatSlashesDDMMYYYY:"DD/MM/YYYY",timeFormatSlashesMMDDYYYY:"MM/DD/YYYY",timeFormatSlashesDDMMYY:"DD/MM/YY",timeFormatSlashesMMDDYY:"MM/DD/YY",timeFormatDotsDDMYY:"DD.M.YY",timeFormatDotsMDDYY:"M.DD.YY",timeFormatDashesYYYYMMDD:"YYYY-MM-DD",timeFormatSpacesDDMMMMYYYY:"DD MMMM YYYY",timeFormatHHMMSS:"HH:MM:SS",timeFormatHHMMSSAmPm:"HH:MM:SS AM/PM",sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"}),Ip=(s.XQb,e=>t=>void 0==t||e(t)),Lp=e=>"string"===typeof e,Np=e=>"boolean"===typeof e,Op=e=>"object"===typeof e,Gp=(e,t)=>i=>"AG Grid - unable to update chart as invalid params supplied:  `".concat(e,": ").concat(i,"`, expected ").concat(t,"."),Bp=e=>"".concat(e," is not supported in AG Charts Community ('ag-charts-enterprise' hasn't been loaded). See ").concat("https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"," for more details."),Vp=["doughnut"],Hp=["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"];var zp=Ip(e=>{if(Nh(t=e)||Dh(t))return!0;var t;if(function(e){return Vp.includes(e)}(e)){const t=Lh(e);return(0,s.JT7)("The chart type '".concat(e,"' has been deprecated. Please use '").concat(t,"' instead.")),t}return!1}),Wp=Ip(e=>"object"===typeof e),Up=Ip(e=>"object"===typeof e),jp=Ip(e=>"string"===typeof e||"function"===typeof e),_p=e=>({property:"chartType",validationFn:Ip(t=>e||!t||!function(e){return Eh(Oh(e),"isEnterprise")}(t)),warnMessage:e=>Bp("The '".concat(e,"' chart type"))}),Kp=e=>({property:"switchCategorySeries",validationFn:Ip(t=>{if(!t||e)return!0}),warnMessage:()=>Bp("'switchCategorySeries' has been ignored as it"),warnIfFixed:!0}),Yp=()=>[{property:"chartId",validationFn:Lp,warnMessage:Gp("chartId","string")},{property:"chartType",validationFn:zp,warnMessage:Gp("chartType","ChartType")},{property:"chartThemeName",validationFn:Lp,warnMessage:Gp("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:Wp,warnMessage:Gp("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:Np,warnMessage:Gp("unlinkChart","boolean")}],qp=e=>[{property:"cellRange",validationFn:Up,warnMessage:Gp("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:Np,warnMessage:Gp("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:jp,warnMessage:Gp("aggFunc","string or IAggFunc")},Kp(e)];function Qp(e,t){switch(e.type){case"rangeChartUpdate":return function(e,t){const i=[...Yp(),_p(t),...qp(t),{property:"seriesChartTypes",validationFn:e=>void 0===e||Array.isArray(e)&&e.every(Op),warnMessage:Gp("seriesChartTypes","Array of SeriesChartType")},{property:"useGroupColumnAsCategory",validationFn:Np,warnMessage:Gp("useGroupColumnAsCategory","boolean")}];return Xp(e,i,[...Hp,"cellRange","suppressChartRanges","switchCategorySeries","aggFunc","seriesChartTypes","seriesGroupType","useGroupColumnAsCategory"],"UpdateRangeChartParams")}(e,t);case"pivotChartUpdate":return function(e){const t=[...Yp()];return Xp(e,t,[...Hp],"UpdatePivotChartParams")}(e);case"crossFilterChartUpdate":return function(e,t){const i=[...Yp(),...qp(t)];return Xp(e,i,[...Hp,"cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}(e,t);default:return(0,s.JT7)("Invalid value supplied for 'type': ".concat(e.type,". It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.")),!1}}function Xp(e,t,i,o){let r;for(const a of t){const{property:t,validationFn:i,warnMessage:o,warnIfFixed:l}=a;if(t in e){const a=e[t],d=i(a);if(!0===d)continue;if(!1===d)return(0,s.JT7)(o(a)),!1;r=r||(0,n.A)({},e),r[t]=d,l&&(0,s.JT7)(o(a))}}if(i)for(const n of Object.keys(e))if(!i.includes(n))return(0,s.JT7)("Unexpected property supplied. ".concat(o," does not contain: `").concat(n,"`.")),!1;return r||!0}var $p=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],Zp=class extends s.XQb{constructor(e){super(),this.model=e,this.isEnterprise=()=>this.agChartsExports.isEnterprise}wireBeans(e){this.rangeSvc=e.rangeSvc,this.agChartsExports=e.agChartsExports}postConstruct(){this.setChartRange(),this.model.unlinked&&this.rangeSvc&&this.rangeSvc.setCellRanges([]);const e=this.updateForGridChange.bind(this,{});this.addManagedEventListeners({cellSelectionChanged:e=>{e.id&&e.id===this.model.chartId&&this.updateForRangeChange()},columnMoved:e,columnPinned:e,columnVisible:e,columnRowGroupChanged:e,modelUpdated:e,cellValueChanged:this.updateForDataChange.bind(this),cellEditValuesChanged:this.updateForDataChange.bind(this)})}update(e){if(!this.validUpdateType(e))return!1;const t=Qp(e,this.agChartsExports.isEnterprise);if(!t)return!1;const i=!0===t?e:t;return this.applyValidatedChartParams(i),!0}applyValidatedChartParams(e){var t,i,o,s,r,a,l,d,c,u;const{chartId:h,chartType:p,chartThemeName:g,unlinkChart:v}=e,m={chartId:h,pivotChart:this.model.pivotChart,chartType:null!==p&&void 0!==p?p:this.model.chartType,chartThemeName:null!==g&&void 0!==g?g:this.model.chartThemeName,unlinkChart:null!==v&&void 0!==v?v:this.model.unlinked,cellRange:this.model.suppliedCellRange,switchCategorySeries:this.model.switchCategorySeries,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1},f=(0,n.A)({},m);switch(e.type){case"rangeChartUpdate":f.cellRange=null!==(t=this.createCellRange(e))&&void 0!==t?t:this.model.suppliedCellRange,f.switchCategorySeries=null!==(i=e.switchCategorySeries)&&void 0!==i?i:this.model.switchCategorySeries,f.aggFunc=null!==(o=e.aggFunc)&&void 0!==o?o:this.model.aggFunc,f.seriesChartTypes=e.seriesChartTypes,f.suppressChartRanges=null!==(s=e.suppressChartRanges)&&void 0!==s?s:this.model.suppressChartRanges,f.seriesGroupType=null!==(r=e.seriesGroupType)&&void 0!==r?r:this.model.seriesGroupType,f.useGroupColumnAsCategory=null!==(a=e.useGroupColumnAsCategory)&&void 0!==a?a:this.model.useGroupColumnAsCategory;break;case"crossFilterChartUpdate":f.cellRange=null!==(l=this.createCellRange(e))&&void 0!==l?l:this.model.suppliedCellRange,f.switchCategorySeries=!1,f.aggFunc=null!==(d=e.aggFunc)&&void 0!==d?d:this.model.aggFunc,f.crossFiltering=!0,f.crossFilteringSort=this.model.crossFilteringSort,f.suppressChartRanges=null!==(c=e.suppressChartRanges)&&void 0!==c?c:this.model.suppressChartRanges;break;case"pivotChartUpdate":f.switchCategorySeries=!1}this.model.updateModel(f);f.unlinkChart||f.suppressChartRanges?null===(u=this.rangeSvc)||void 0===u||u.setCellRanges([]):this.setChartRange()}updateForGridChange(e){if(this.model.unlinked)return;const{maintainColState:t,setColsFromRange:i}=null!==e&&void 0!==e?e:{};this.model.updateCellRanges({maintainColState:t,setColsFromRange:i}),this.model.updateData(),this.setChartRange()}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange({setColsFromRange:!0}),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(e){this.model.updateCellRanges(e),this.model.updateData(),e.skipAnimation&&this.getChartProxy().getChartRef().skipAnimations(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}updateThemeOverrides(e){this.chartProxy.updateThemeOverrides(e)}getChartUpdateParams(e){const t=this.getSelectedValueColState().map(e=>({colId:e.colId,displayName:e.displayName})),i=this.getChartData(),o=this.getSelectedDimensions(),n=this.model,s={data:i,groupData:n.groupChartData,grouping:this.isGrouping(),categories:o.map(e=>{var t;let{colId:i,displayName:o}=e;const s=null!==(t=n.categoryAxisType)&&void 0!==t?t:n.getChartDataType(i);return{id:i,name:o,chartDataType:s,convertTime:"time"===s?n.getConvertTime(i):void 0}}),fields:t,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e,seriesGroupType:n.seriesGroupType};return this.isCategorySeriesSwitched()?this.invertCategorySeriesParams(s):s}invertCategorySeriesParams(e){const[t]=e.categories,i=[{id:hp,name:""}],o=e.data.map((e,i)=>{const o="".concat(t.id,":").concat(i),n=e[t.id];return{colId:o,displayName:null==n?"":String(n)}}),s=e.fields.map(i=>{const o={[hp]:i.displayName};for(const[n,s]of e.data.entries()){const e="".concat(t.id,":").concat(n),r=s[i.colId];o[e]=r}return o});return(0,n.A)((0,n.A)({},e),{},{categories:i,fields:o,data:s})}getChartModel(){var e,t;const i=this.model.pivotChart?"pivot":"range",o=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:i,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:null===(e=this.chartProxy)||void 0===e?void 0:e.getChartThemeOverrides(),chartPalette:null===(t=this.chartProxy)||void 0===t?void 0:t.getChartPalette(),cellRange:this.getCellRangeParams(),switchCategorySeries:this.model.switchCategorySeries,suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:o,seriesGroupType:this.model.seriesGroupType,useGroupColumnAsCategory:this.model.useGroupColumnAsCategory}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(e){this.updateMultiSeriesAndCategory(this.model.chartType,e),this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.model.switchCategorySeries=!1,this.model.categoryAxisType=void 0,this.model.seriesGroupType=void 0,this.raiseChartModelUpdateEvent()}isCategorySeriesSwitched(){return this.model.switchCategorySeries&&!this.model.isGrouping()}switchCategorySeries(e){Hh(this.getChartType())&&(this.model.switchCategorySeries=e,this.raiseChartModelUpdateEvent())}getAggFunc(){return this.model.aggFunc}setAggFunc(e,t){this.model.aggFunc!==e&&(this.model.aggFunc=e,t||(this.model.updateData(),this.raiseChartModelUpdateEvent()))}updateMultiSeriesAndCategory(e,t){var i,o;const n=(e,t)=>{let i=0;for(const o of e)o.selected&&(i>=t?o.selected=!1:i++);0===i&&(e[0].selected=!0)},s=Bh(t),r=Vh(t),a=null!=s&&(null!==(i=Bh(e))&&void 0!==i?i:100)>(null!==s&&void 0!==s?s:100),l=null!=r&&(null!==(o=Vh(e))&&void 0!==o?o:100)>(null!==r&&void 0!==r?r:100);a&&n(this.model.dimensionColState,s),l&&n(this.model.valueColState,r),(a||l)&&(this.model.resetCellRanges(a,l),this.setChartRange(!0))}setChartThemeName(e,t){this.model.chartThemeName=e,t||this.raiseChartModelUpdateEvent()}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemeNames(){return this.gos.get("chartThemes")||$p}getThemes(){return this.getThemeNames().map(e=>{const t=jh(e,this.agChartsExports._Theme)?e:this.chartProxy.lookupCustomChartTheme(e);return this.agChartsExports._Theme.getChartTheme(t)})}getPalettes(){return this.getThemes().map(e=>e.palette)}getSelectedValueColState(){return this.model.getValueColState().filter(e=>e.selected)}getSelectedDimensions(){return this.model.getSelectedDimensions()}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.model.getValueColState()}}setChartRange(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this.rangeSvc||this.model.suppressChartRanges||this.model.unlinked||this.rangeSvc.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeSvc&&this.rangeSvc.setCellRanges([]):this.updateForGridChange(),this.dispatchLocalEvent({type:"chartLinkedChanged"})}setChartProxy(e){this.chartProxy=e}getChartProxy(){return this.chartProxy}isActiveXYChart(){return["scatter","bubble"].includes(this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){const e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(e){return this.model.isComboChart(e)}updateSeriesChartType(e,t,i){const o=this.model.comboChartModel.seriesChartTypes.find(t=>t.colId===e);if(o){const e="customCombo"!==this.model.chartType;e&&(this.model.chartType="customCombo");const n=o.chartType;null!=t&&(o.chartType=t),null!=i&&(o.secondaryAxis=i),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),e&&this.dispatchLocalEvent({type:"chartTypeChanged"}),n!==t&&this.dispatchLocalEvent({type:"chartSeriesChartTypeChanged"}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){const e=this.getSelectedValueColState().map(e=>e.colId);return this.getSeriesChartTypes().filter(t=>e.includes(t.colId))}getChartSeriesTypes(e){const t=null!==e&&void 0!==e?e:this.getChartType();return this.isComboChart(t)?["line","bar","area"]:[Oh(t)]}getChartSeriesType(){const e=this.getSeriesChartTypes();if(0===e.length)return"bar";const t=e[0].chartType;return"columnLineCombo"===t?"bar":"areaColumnCombo"===t?"area":Oh(t)}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(e=>e)}createCellRange(e){var t;return e.cellRange&&(null===(t=this.rangeSvc)||void 0===t?void 0:t.createPartialCellRangeFromRangeParams(e.cellRange,!0))}validUpdateType(e){var t;if(!e.type)return(0,s.ujB)(136),!1;const i={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},o=null!==(t=Object.keys(i).find(e=>i[e]()))&&void 0!==t?t:"Range Chart",n=e.type==="".concat(o[0].toLowerCase()).concat(o.slice(1).replace(/ /g,""),"Update");return n||(0,s.ujB)(137,{currentChartType:o,type:e.type}),n}getCellRangeParams(){var e,t;const i=this.getCellRanges(),o=i[0],n=(null===o||void 0===o?void 0:o.startRow)||null,s=(null===o||void 0===o?void 0:o.endRow)||null;return{rowStartIndex:null!==(e=null===n||void 0===n?void 0:n.rowIndex)&&void 0!==e?e:null,rowStartPinned:null===n||void 0===n?void 0:n.rowPinned,rowEndIndex:null!==(t=null===s||void 0===s?void 0:s.rowIndex)&&void 0!==t?t:null,rowEndPinned:null===s||void 0===s?void 0:s.rowPinned,columns:i.reduce((e,t)=>e.concat(t.columns.map(e=>e.getId())),[])}}setCategoryAxisType(e){this.model.categoryAxisType=e,this.raiseChartModelUpdateEvent()}getSeriesGroupType(){var e;return null!==(e=this.model.seriesGroupType)&&void 0!==e?e:this.chartProxy.getSeriesGroupType()}setSeriesGroupType(e){this.model.seriesGroupType=e,this.raiseChartModelUpdateEvent()}raiseChartModelUpdateEvent(){this.dispatchLocalEvent({type:"chartModelUpdate"}),this.raiseChartOptionsChangedEvent()}raiseChartUpdatedEvent(){this.dispatchLocalEvent({type:"chartUpdated"})}raiseChartApiUpdateEvent(){this.dispatchLocalEvent({type:"chartApiUpdate"})}raiseChartOptionsChangedEvent(){var e;const{chartId:t,chartType:i}=this.getChartModel();this.eventSvc.dispatchEvent({type:"chartOptionsChanged",chartId:t,chartType:i,chartThemeName:this.getChartThemeName(),chartOptions:null===(e=this.chartProxy)||void 0===e?void 0:e.getChartThemeOverrides()})}raiseChartRangeSelectionChangedEvent(){this.eventSvc.dispatchEvent({type:"chartRangeSelectionChanged",id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()})}destroy(){super.destroy(),this.rangeSvc&&this.rangeSvc.setCellRanges([])}},Jp=class extends Xh{getAxes(e){const t={x:{type:this.getXAxisType(e),position:"bottom"},y:{type:"number",position:"left"}};return this.isNormalised()&&(t.y.label=(0,n.A)((0,n.A)({},t.y.label),{},{formatter:e=>Math.round(e.value)+"%"})),t}getSeries(e){const[t]=e.categories,i=e.fields.map(e=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:e.colId,yName:e.displayName,normalizedTo:"normalizedArea"===this.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,e):i}isNormalised(){return!this.crossFiltering&&"normalizedArea"===this.chartType}},eg=new Set(["bar","groupedBar","stackedBar","normalizedBar"]),tg=class extends Xh{getAxes(e){const t={x:{type:this.getXAxisType(e),position:this.isHorizontal()?"left":"bottom"},y:{type:"number",position:this.isHorizontal()?"bottom":"left"}};return this.isNormalised()&&(t.y.label=(0,n.A)((0,n.A)({},t.y.label),{},{formatter:e=>Math.round(e.value)+"%"})),t}getSeries(e){const[t]=e.categories,i=e.fields.map(e=>{return{type:this.standaloneChartType,direction:this.isHorizontal()?"horizontal":"vertical",stacked:this.crossFiltering||(i=this.chartType,Ah.has(i)),normalizedTo:this.isNormalised()?100:void 0,xKey:t.id,xName:t.name,yKey:e.colId,yName:e.displayName};var i});return this.crossFiltering?this.extractCrossFilterSeries(i):i}extractCrossFilterSeries(e){const t=[];for(let i=0;i<e.length;i++){const o=e[i],s=(0,n.A)((0,n.A)({},o),{},{listeners:{seriesNodeClick:this.crossFilterCallback}}),r=(0,n.A)((0,n.A)({},s),{},{yKey:"".concat(s.yKey,"-filtered-out"),showInLegend:!1});t.push(s),t.push(r)}return t}isNormalised(){return!this.crossFiltering&&["normalizedColumn","normalizedBar"].includes(this.chartType)}isHorizontal(){return eg.has(this.chartType)}},ig=class extends Xh{getAxes(e){const t={x:{type:this.getXAxisType(e),position:"bottom"},y:{type:"number",position:"left"}};return this.isNormalised()&&(t.y.label=(0,n.A)((0,n.A)({},t.y.label),{},{formatter:e=>Math.round(e.value)+"%"})),t}getSeries(e){const[t]=e.categories,i=["normalizedLine","stackedLine"].includes(this.chartType),o=e.fields.map(e=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:e.colId,yName:e.displayName,normalizedTo:i&&this.isNormalised()?100:void 0,stacked:i}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(o,e):o}isNormalised(){return!this.crossFiltering&&["normalizedLine"].includes(this.chartType)}},og=class extends Xh{getAxes(e){return{x:{type:"number",position:"bottom"},y:{type:"number",position:"left"}}}getSeries(e){const[t]=e.categories,i=this.isPaired(),o=this.getSeriesDefinitions(e.fields,i),n=t.id===hp?void 0:t,s=o.map(e=>{var t,i;if(null!==e&&void 0!==e&&e.sizeField){var o,s,r;return{type:"bubble",xKey:e.xField.colId,xName:null!==(o=e.xField.displayName)&&void 0!==o?o:void 0,yKey:e.yField.colId,yName:null!==(s=e.yField.displayName)&&void 0!==s?s:void 0,title:"".concat(e.yField.displayName," vs ").concat(e.xField.displayName),sizeKey:e.sizeField.colId,sizeName:null!==(r=e.sizeField.displayName)&&void 0!==r?r:"",labelKey:n?n.id:e.yField.colId,labelName:n?n.name:void 0}}return{type:"scatter",xKey:e.xField.colId,xName:null!==(t=e.xField.displayName)&&void 0!==t?t:void 0,yKey:e.yField.colId,yName:null!==(i=e.yField.displayName)&&void 0!==i?i:void 0,title:"".concat(e.yField.displayName," vs ").concat(e.xField.displayName),labelKey:n?n.id:e.yField.colId,labelName:n?n.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(s,e):s}extractCrossFilterSeries(e,t){const{data:i}=t,o=e=>"".concat(e,"-filtered-out"),s=e.map(e=>{let t;if("bubble"===e.type){const{sizeKey:n}=e;t=((e,t)=>{const i=[1/0,-1/0];if(null!=t)for(const s of e){var n;const e=null!==(n=s[t])&&void 0!==n?n:s[o(t)];e<i[0]&&(i[0]=e),e>i[1]&&(i[1]=e)}if(i[0]<=i[1])return i})(i,n)}return(0,n.A)((0,n.A)({},e),{},{domain:t,highlight:{highlightedItem:{fill:"yellow"}},listeners:(0,n.A)((0,n.A)({},e.listeners),{},{seriesNodeClick:this.crossFilterCallback})})});return[...s,...s.map(e=>{const{yKey:t,xKey:i}=e;let s={};return"bubble"===e.type&&(s={sizeKey:o(e.sizeKey)}),(0,n.A)((0,n.A)((0,n.A)({},e),s),{},{yKey:o(t),xKey:o(i),showInLegend:!1,listeners:(0,n.A)((0,n.A)({},e.listeners),{},{seriesNodeClick:e=>{const t=e.datum[o(i)],s=(0,n.A)((0,n.A)({},e),{},{xKey:i,datum:(0,n.A)((0,n.A)({},e.datum),{},{[i]:t})});this.crossFilterCallback(s)}})})})]}getSeriesDefinitions(e,t){if(e.length<2)return[];const i="bubble"===this.chartType;if(t)return i?e.map((t,i)=>i%3===0?{xField:t,yField:e[i+1],sizeField:e[i+2]}:null).filter(e=>(null===e||void 0===e?void 0:e.yField)&&e.sizeField):e.map((t,i)=>i%2===0?{xField:t,yField:e[i+1]}:null).filter(e=>null===e||void 0===e?void 0:e.yField);const o=e[0];return i?e.map((t,i)=>i%2===1?{xField:o,yField:t,sizeField:e[i+1]}:null).filter(e=>null===e||void 0===e?void 0:e.sizeField):e.filter((e,t)=>t>0).map(e=>({xField:o,yField:e}))}},ng=class extends Xh{getAxes(e){const t=e?e.fields:[],i=new Map(t.map(e=>[e.colId,e])),{primaryYKeys:o,secondaryYKeys:n}=this.getYKeys(t,e.seriesChartTypes),s={x:{type:this.getXAxisType(e),position:"bottom"}};return o.length>0&&(s.y={type:"number",position:"left"}),n.length>0&&n.forEach(e=>{const t=i.get(e);if(!(t&&t.colId===e))return;s["y_".concat(e)]={type:"number",position:"right"}}),s}getSeries(e){const{fields:t,seriesChartTypes:i}=e,[o]=e.categories;return t.map(e=>{const t=i.find(t=>t.colId===e.colId);if(t){const i=t.chartType,s=["groupedColumn","groupedBar"].includes(i)?{grouped:!0}:{},r=t.secondaryAxis?"y_".concat(e.colId):"y";return(0,n.A)({type:Oh(i),xKey:o.id,yKey:e.colId,yName:e.displayName,yKeyAxis:r,stacked:["stackedArea","stackedColumn"].includes(i)},s)}})}getYKeys(e,t){const i=[],o=[];for(const n of e){const e=n.colId,s=t.find(t=>t.colId===e);s&&(s.secondaryAxis?o.push(e):i.push(e))}return{primaryYKeys:i,secondaryYKeys:o}}setSeriesChartThemeDefaults(e){const t=this.getSeriesChartThemeDefaults();if(!t)return;const i=new Set;for(const o of this.chartProxyParams.seriesChartTypes)i.add(o.chartType);for(const o of i)e[Oh(o)]=t}};var sg=class extends Qh{getUpdateOptions(e,t){return(0,n.A)((0,n.A)({},t),{},{data:this.crossFiltering?this.getCrossFilterData(e):e.data,series:this.getSeries(e)})}getSeries(e){const[t]=e.categories,i=e.fields.length,o={currentOffset:0,offsetAmount:i>1?20:40},s=this.getFields(e).map(e=>{const s={type:this.standaloneChartType,angleKey:e.colId,angleName:e.displayName,sectorLabelKey:e.colId,calloutLabelName:t.name,calloutLabelKey:t.id};if("donut"===this.chartType||"doughnut"===this.chartType){const{outerRadiusOffset:t,innerRadiusOffset:r}=function(e){const t=e.currentOffset;e.currentOffset-=e.offsetAmount;const i=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:i}}(o),a=e.displayName?{title:{text:e.displayName,showInLegend:i>1}}:void 0;return(0,n.A)((0,n.A)({},s),{},{type:"donut",outerRadiusOffset:t,innerRadiusOffset:r},a)}return s});return this.crossFiltering?this.extractCrossFilterSeries(s):s}getCrossFilterData(e){const t=e.fields[0].colId,i="".concat(t,"-filtered-out");return e.data.map(e=>{const o=e[t]+e[i];return e["".concat(t,"-total")]=o,e[i]=1,e[t]=e[t]/o,e})}extractCrossFilterSeries(e){const t=e[0],i=t.angleKey,o=(0,n.A)((0,n.A)({},t),{},{radiusMin:0,radiusMax:1,listeners:{seriesNodeClick:this.crossFilterCallback},legendItemKey:t.calloutLabelKey,angleKey:"".concat(i,"-total")}),s=(0,n.A)((0,n.A)({},o),{},{radiusKey:i,sectorLabelKey:"".concat(i,"-total")});return[(0,n.A)((0,n.A)({},o),{},{radiusKey:"".concat(i,"-filtered-out"),showInLegend:!1}),s]}getFields(e){return"pie"===this.chartType?e.fields.slice(0,1):e.fields}getSeriesChartThemeDefaults(){return{series:{highlight:qh(this.crossFiltering)}}}},rg=class extends s.uAl{constructor(){super('<div class="ag-chart-menu" data-ref="eMenu"></div>'),this.eMenu=s.dRA,this.buttonListenersDestroyFuncs=[]}wireBeans(e){this.chartTranslation=e.chartTranslation}updateParams(e){const{buttons:t}=e;this.createButtons(t)}createButtons(e){for(const i of this.buttonListenersDestroyFuncs)null===i||void 0===i||i();this.buttonListenersDestroyFuncs=[];const t=this.eMenu;(0,s.fDi)(t);for(const i of e){const{buttonName:e,iconName:o,callback:n}=i,s=this.createButton(o),r=this.chartTranslation.translate(e+"ToolbarTooltip");r&&s instanceof HTMLElement&&(s.title=r),this.buttonListenersDestroyFuncs.push(...this.addManagedElementListeners(s,{click:e=>n(e.currentTarget)})),t.appendChild(s)}}createButton(e){const t=(0,s.asF)(e,this.beans);t.classList.add("ag-chart-menu-icon");const i=(0,s.UCw)({tag:"button",attrs:{type:"button"},cls:"ag-chart-menu-toolbar-button"});return i.appendChild(t),i}destroy(){this.buttonListenersDestroyFuncs=[],super.destroy()}},ag=class extends s.uAl{constructor(e){super('<div class="ag-pill-select" role="presentation"></div>'),this.config=null!==e&&void 0!==e?e:{};const{selectedValueList:t,valueFormatter:i,valueList:o}=this.config;this.selectedValues=null!==t&&void 0!==t?t:[],this.valueList=null!==o&&void 0!==o?o:[],this.valueFormatter=null!==i&&void 0!==i?i:e=>(0,s.YR0)(e),this.registerCSS(".ag-pill-select{display:flex;flex-direction:column}.ag-pill-select .ag-column-drop-list{padding:0}:where(.ag-pill-select){.ag-select{padding-top:var(--ag-spacing)}.ag-picker-field-wrapper{background-color:transparent;border:0}.ag-picker-field-display{cursor:pointer;font-weight:500}.ag-picker-field-display,.ag-picker-field-icon{color:var(--ag-chart-menu-label-color)}}")}postConstruct(){const{ariaLabel:e,onValuesChange:t,dragSourceId:i}=this.config;this.dropZonePanel=this.createManagedBean(new dg({getValues:()=>this.selectedValues,setValues:e=>this.updateValues(e),isDraggable:()=>this.selectedValues.length>1},e=>this.valueFormatter(e),e,i));this.getGui().appendChild(this.dropZonePanel.getGui()),this.initSelect(),null!=t&&(this.onValuesChange=t)}setValues(e,t){const{added:i,removed:o,updated:n}=this.getChanges(this.valueList,e);let s=!1;return(i.length||o.length||n.length)&&(s=!0),this.valueList=e,this.updateValues(t,s,!0),this}setValueFormatter(e){return this.valueFormatter=e,this}initSelect(){const e=this.createSelectOptions();if(!e.length)return!1;const{selectPlaceholder:t}=this.config;return this.eSelect=this.createBean(new s.Ju4({options:e,placeholder:t,onValueChange:e=>this.addValue(e),pickerIcon:"chartsMenuAdd"})),this.getGui().appendChild(this.eSelect.getGui()),!0}createSelectOptions(){const e=[],{maxSelection:t}=this.config;if(t&&this.selectedValues.length>=t)return e;for(const i of this.valueList)this.selectedValues.includes(i)||e.push({value:i,text:this.valueFormatter(i)});return e}addValue(e){this.dropZonePanel.addItem(e)}updateValues(e,t,i){var o,n;const r=this.selectedValues;this.selectedValues=e;const a=this.getChanges(r,e),l=t||a.added.length||a.removed.length,d=(0,s.UlD)(this.beans),c=null===(o=this.eSelect)||void 0===o?void 0:o.getGui().contains(d),u=null===(n=this.dropZonePanel)||void 0===n?void 0:n.getGui().contains(d);var h;i||(null===(h=this.onValuesChange)||void 0===h||h.call(this,a));const p=!!l&&!this.refreshSelect();var g,v;(this.dropZonePanel.refreshGui(),l&&c)&&(p?this.dropZonePanel.focusList(!0):null===(g=this.eSelect)||void 0===g||g.getFocusableElement().focus());u&&!e.length&&(null===(v=this.eSelect)||void 0===v||v.getFocusableElement().focus())}getChanges(e,t){return{added:t.filter(t=>!e.includes(t)),removed:e.filter(e=>!t.includes(e)),updated:t.filter((t,i)=>e[i]!==t),selected:t}}refreshSelect(){if(!this.eSelect)return this.initSelect();const e=this.createSelectOptions();return e.length?(this.eSelect.clearOptions().addOptions(e).setValue(void 0,!0),!0):((0,s.MwW)(this.eSelect.getGui()),this.eSelect=this.destroyBean(this.eSelect),!1)}destroy(){this.destroyBean(this.eSelect),super.destroy()}},lg=class extends Hs{constructor(e,t,i,o,n,s){super(t,i,!1),this.value=e,this.valueFormatter=o,this.draggable=n,this.sourceId=s}getItem(){return this.value}getDisplayName(){return this.valueFormatter(this.value)}getAriaDisplayName(){return this.getDisplayName()}getTooltip(){}createGetDragItem(){return()=>({value:this.value})}getDragSourceType(){return s.qRA.ChartPanel}getDragSourceId(){return this.sourceId}isMovable(){return this.isDraggable()}isDraggable(){return this.draggable}},dg=class extends Bs{constructor(e,t,i,o){super(!1),this.model=e,this.valueFormatter=t,this.ariaLabel=i,this.sourceId=o}postConstruct(){super.init()}isItemDroppable(e,t){return this.isSourceEventFromTarget(t)||null!=this.sourceId&&this.sourceId===t.dragSource.sourceId}updateItems(e){this.model.setValues(e)}getExistingItems(){return this.model.getValues()}getIconName(){return this.isPotentialDndItems()?"move":"notAllowed"}getAriaLabel(){return this.ariaLabel}createPillComponent(e,t,i){return new lg(e,t,i,this.valueFormatter,this.model.isDraggable(),this.sourceId)}getItems(e){return[e.value]}isInterestedIn(e){return e===s.qRA.ChartPanel}},cg=class extends s.uAl{constructor(e,t,i,o){super(o),this.chartController=e,this.allowMultipleSelection=t,this.maxSelection=i}wireBeans(e){this.chartTranslation=e.chartTranslation}addItem(e){this.groupComp.addItem(e)}createGroup(e,t,i,o,n){if(this.allowMultipleSelection){const n=e.filter(e=>e.selected);this.valuePillSelect=this.groupComp.createManagedBean(new ag({valueList:e,selectedValueList:n,valueFormatter:t,selectPlaceholder:this.chartTranslation.translate(i),dragSourceId:o,onValuesChange:e=>this.onValueChange(e),maxSelection:this.maxSelection})),this.groupComp.addItem(this.valuePillSelect)}else{const t=this.createValueSelectParams(e);t.onValueChange=t=>{for(const i of e)i.selected=!1;t.selected=!0,t.colId===hp&&this.chartController.setAggFunc(void 0,!0),this.chartController.updateForPanelChange({updatedColState:t,skipAnimation:null===n||void 0===n?void 0:n()})},this.valueSelect=this.groupComp.createManagedBean(new s.Ju4(t)),this.groupComp.addItem(this.valueSelect)}}refreshValueSelect(e){if(!this.valueSelect)return;const{options:t,value:i}=this.createValueSelectParams(e);this.valueSelect.clearOptions().addOptions(t).setValue(i,!0)}createValueSelectParams(e){let t;return{options:e.map(e=>{var i;const o=null!==(i=e.displayName)&&void 0!==i?i:"";return e.selected&&(t=e),{value:e,text:o}}),value:t}}onValueChange(e){let t,i,{added:o,updated:n,removed:s,selected:r}=e;const a=()=>{r.forEach((e,t)=>{e.order=t}),i=!0};o.length?(t=o[0],t.selected=!0,a()):s.length?(t=s[0],t.selected=!1):n.length&&(a(),t=n[0]),t&&this.chartController.updateForPanelChange({updatedColState:t,resetOrder:i})}destroy(){this.valuePillSelect=void 0,this.valueSelect=void 0,super.destroy()}},ug=class extends cg{constructor(e,t,i,o,n){super(e,i,void 0,'<div id="categoriesGroup"></div>'),this.title=t,this.dimensionCols=o,this.isOpen=n}postConstruct(){this.groupComp=this.createBean(new Ei({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.createGroup(this.dimensionCols,e=>{var t;return null!==(t=e.displayName)&&void 0!==t?t:""},"categoryAdd","categorySelect",()=>!this.chartController.getAggFunc()),this.createAggFuncControls(this.dimensionCols),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t;null===(t=this.valuePillSelect)||void 0===t||t.setValues(e,e.filter(e=>e.selected)),this.refreshValueSelect(e),this.refreshAggFuncControls(e,this.chartController.getAggFunc())}createAggFuncControls(e){const t=this.chartController.getAggFunc();this.groupComp.addItem(this.aggFuncToggle=this.createBean(new s.bLJ({label:this.chartTranslation.translate("aggregate"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:void 0!=t,onValueChange:e=>{var t,i;const o=e?"sum":void 0;this.chartController.setAggFunc(o),null===(t=this.aggFuncSelect)||void 0===t||t.setValue(o,!0),null===(i=this.aggFuncSelect)||void 0===i||i.setDisplayed(void 0!=o)}}))),this.groupComp.addItem(this.aggFuncSelect=this.createBean(new s.Ju4({options:[{value:"sum",text:this.chartTranslation.translate("sum")},{value:"first",text:this.chartTranslation.translate("first")},{value:"last",text:this.chartTranslation.translate("last")},{value:"min",text:this.chartTranslation.translate("min")},{value:"max",text:this.chartTranslation.translate("max")},{value:"count",text:this.chartTranslation.translate("count")},{value:"avg",text:this.chartTranslation.translate("avg")}],value:"string"===typeof t?t:void 0,onValueChange:e=>{this.chartController.setAggFunc(e)}}))),this.refreshAggFuncControls(e,t)}refreshAggFuncControls(e,t){var i,o,n,s;const r=e.filter(e=>e.selected).some(e=>e.colId!==hp);null===(i=this.aggFuncToggle)||void 0===i||i.setValue(void 0!=t),null===(o=this.aggFuncSelect)||void 0===o||o.setValue("string"===typeof t?t:void 0,!0),null===(n=this.aggFuncToggle)||void 0===n||n.setDisplayed(r),null===(s=this.aggFuncSelect)||void 0===s||s.setDisplayed(r&&void 0!=t)}clearAggFuncControls(){this.aggFuncToggle=this.destroyBean(this.aggFuncToggle),this.aggFuncSelect=this.destroyBean(this.aggFuncSelect)}destroy(){this.clearAggFuncControls(),this.groupComp=this.destroyBean(this.groupComp),super.destroy()}},hg=class extends s.XQb{constructor(e){super(),this.chartOptionsProxy=e}wireBeans(e){this.chartTranslation=e.chartTranslation}getDefaultColorPickerParams(e,t,i){return this.addValueParams(e,{label:this.chartTranslation.translate(null!==t&&void 0!==t?t:"color"),labelWidth:"flex",inputWidth:"flex",labelAlignment:"top",pickerGap:6},i)}getDefaultNumberInputParams(e,t,i){return this.addValueParams(e,{label:this.chartTranslation.translate(t),labelAlignment:"top",labelWidth:"flex",inputWidth:"flex",precision:null===i||void 0===i?void 0:i.precision,step:null===i||void 0===i?void 0:i.step,min:null===i||void 0===i?void 0:i.min,max:null===i||void 0===i?void 0:i.max},{parseInputValue:e=>{const t=Number(e);return isNaN(t)?void 0:t},formatInputValue:e=>null==e?"":"".concat(e)})}getDefaultSliderParams(e,t,i,o){var n;let s=null!==(n=this.chartOptionsProxy.getValue(e))&&void 0!==n?n:0;o&&Array.isArray(s)&&(s=s[0]);const r=this.getDefaultSliderParamsWithoutValueParams(s,t,i);return r.onValueChange=t=>this.chartOptionsProxy.setValue(e,o?[t]:t),r}getDefaultSliderParamsWithoutValueParams(e,t,i){return{label:this.chartTranslation.translate(t),minValue:0,maxValue:Math.max(e,i),textFieldWidth:45,value:"".concat(e)}}getDefaultCheckboxParams(e,t,i){const o=this.chartOptionsProxy.getValue(e),n={label:this.chartTranslation.translate(t),value:o,readOnly:null===i||void 0===i?void 0:i.readOnly,passive:null===i||void 0===i?void 0:i.passive};return n.onValueChange=t=>{this.chartOptionsProxy.setValue(e,"boolean"===typeof t?t:void 0)},n}getDefaultToggleParams(e,t,i){const o=this.chartOptionsProxy.getValue(e),n={label:this.chartTranslation.translate(t),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:o,readOnly:null===i||void 0===i?void 0:i.readOnly,passive:null===i||void 0===i?void 0:i.passive};return n.onValueChange=t=>{this.chartOptionsProxy.setValue(e,"boolean"===typeof t?t:void 0)},n}getDefaultSelectParams(e,t,i){return this.getDefaultSelectParamsWithoutValueParams(t,i,this.chartOptionsProxy.getValue(e),t=>{this.chartOptionsProxy.setValue(e,t)})}getDefaultSelectParamsWithoutValueParams(e,t,i,o){return{label:this.chartTranslation.translate(e),labelAlignment:"top",options:t,pickerGap:6,value:i,onValueChange:o}}getDefaultFontPanelParams(e,t){const i=t=>"".concat(e,".").concat(t);return this.addEnableParams(i("enabled"),{name:this.chartTranslation.translate(t),suppressEnabledCheckbox:!1,chartMenuParamsFactory:this,keyMapper:i})}addValueParams(e,t,i){const o=this.chartOptionsProxy.getValue(e);return t.value=null!==i&&void 0!==i&&i.formatInputValue?i.formatInputValue(o):o,t.onValueChange=t=>{const o=null!==i&&void 0!==i&&i.parseInputValue?i.parseInputValue(t):t;this.chartOptionsProxy.setValue(e,o)},t}addEnableParams(e,t){var i;return t.enabled=null!==(i=this.chartOptionsProxy.getValue(e))&&void 0!==i&&i,t.onEnableChange=t=>this.chartOptionsProxy.setValue(e,t),t}getChartOptions(){return this.chartOptionsProxy}},pg=class extends s.uAl{constructor(e,t){super(),this.chartMenuContext=e,this.isOpen=t,this.chartSpecificGroup=s.dRA,this.hasContent=!1}wireBeans(e){this.chartTranslation=e.chartTranslation,this.chartSvc=e.chartSvc}postConstruct(){const e={title:this.getTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen,items:[...this.createDirectionSelect(),this.createReverseSelect(),this.createGroupTypeSelect()]};this.setTemplate('\n            <div id="chartSpecificGroup">\n                <ag-group-component data-ref="chartSpecificGroup"></ag-group-component>\n            </div>',[Ti],{chartSpecificGroup:e}),this.setDisplayed(this.hasContent)}refresh(){this.hasContent=!1,this.chartSpecificGroup.setTitle(this.getTitle()),this.updateDirectionSelect(),this.updateReverseSelect(),this.updateGroupTypeSelect(),this.setDisplayed(this.hasContent)}getTitle(){const e=this.chartMenuContext.chartController.getChartType();return this.chartTranslation.translate(zh(e))}createDirectionSelect(){if(!this.chartSvc.isEnterprise())return[];const{chartOptionsService:e,chartController:t}=this.chartMenuContext,i=e.getSeriesOptionsProxy(()=>Oh(t.getChartType())),o=this.createManagedBean(new hg(i)),n=["horizontal","vertical"].map(e=>({value:e,text:this.chartTranslation.translate(e)})),r=o.getDefaultSelectParams("direction","direction",n),a=r.onValueChange;return r.onValueChange=e=>{a(e),t.raiseChartModelUpdateEvent()},this.directionSelect=this.createManagedBean(new s.Ju4(r)),this.updateDirectionSelect(),[this.directionSelect]}createReverseSelect(){const{chartMenuParamsFactory:e}=this.chartMenuContext,t=e.getDefaultToggleParams("series.reverse","reverse");return this.reverseToggle=this.createManagedBean(new s.bLJ(t)),this.updateReverseSelect(),this.reverseToggle}updateReverseSelect(){const e="pyramid"===this.chartMenuContext.chartController.getChartType();this.updateDisplayed(this.reverseToggle,e)}updateDirectionSelect(){const e=Eh(Oh(this.chartMenuContext.chartController.getChartType()),"canSwitchDirection");this.updateDisplayed(this.directionSelect,e)}createGroupTypeSelect(){const{chartController:e,chartMenuParamsFactory:t}=this.chartMenuContext;return this.groupTypeSelect=this.createManagedBean(new s.Ju4(t.getDefaultSelectParamsWithoutValueParams("seriesGroupType",Rh.map(e=>({value:e,text:this.chartTranslation.translate("".concat(e,"SeriesGroupType"))})),e.getSeriesGroupType(),t=>e.setSeriesGroupType(t)))),this.updateGroupTypeSelect(),this.groupTypeSelect}updateGroupTypeSelect(){const e=["radialColumn","radialBar","nightingale"].includes(this.chartMenuContext.chartController.getChartType());this.updateDisplayed(this.groupTypeSelect,e)}updateDisplayed(e,t){null===e||void 0===e||e.setDisplayed(t),e&&(this.hasContent=this.hasContent||t)}},gg=class extends s.uAl{constructor(e,t,i){super('<div id="seriesChartTypeGroup"></div>'),this.chartController=e,this.columns=t,this.isOpen=i,this.selectedColIds=[],this.chartTypeComps=new Map,this.secondaryAxisComps=new Map}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.createSeriesChartTypeGroup(this.columns)}refresh(e){(0,s.MpY)(this.getValidColIds(e),this.selectedColIds)?this.refreshComps():this.recreate(e)}recreate(e){this.isOpen=this.seriesChartTypeGroupComp.isExpanded(),(0,s.fDi)(this.getGui()),this.destroyBean(this.seriesChartTypeGroupComp),this.columns=e,this.selectedColIds=[],this.clearComps(),this.postConstruct()}getValidColIds(e){const t=this.chartController.getSeriesChartTypes();return e.filter(e=>e.selected&&!!t.filter(t=>t.colId===e.colId)[0]).map(e=>{let{colId:t}=e;return t})}createSeriesChartTypeGroup(e){this.seriesChartTypeGroupComp=this.createBean(new Ei({title:this.chartTranslation.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen}));const t=this.chartController.getSeriesChartTypes();for(const i of e){if(!i.selected)continue;const e=t.filter(e=>e.colId===i.colId)[0];if(!e)continue;this.selectedColIds.push(i.colId);const o=this.seriesChartTypeGroupComp.createManagedBean(new Ei({title:i.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),n=e=>["groupedColumn","stackedColumn","stackedArea"].includes(e),r=this.seriesChartTypeGroupComp.createManagedBean(new s.Unm({label:this.chartTranslation.translate("secondaryAxis"),labelWidth:"flex",disabled:n(e.chartType),value:!!e.secondaryAxis,onValueChange:e=>this.chartController.updateSeriesChartType(i.colId,void 0,e)}));o.addItem(r);const a=["line","area","stackedArea","groupedColumn","stackedColumn"].map(e=>({value:e,text:this.chartTranslation.translate(zh(e))})),l=o.createManagedBean(new s.Ju4({options:a,value:e.chartType,onValueChange:e=>this.chartController.updateSeriesChartType(i.colId,e)}));o.addItem(l),this.seriesChartTypeGroupComp.addItem(o),this.chartTypeComps.set(i.colId,l),this.secondaryAxisComps.set(i.colId,r)}this.getGui().appendChild(this.seriesChartTypeGroupComp.getGui())}refreshComps(){const e=this.chartController.getSeriesChartTypes();for(const t of this.selectedColIds){const i=e.find(e=>e.colId===t);if(!i)continue;const o=this.chartTypeComps.get(t),n=this.secondaryAxisComps.get(t);null===o||void 0===o||o.setValue(i.chartType),null===n||void 0===n||n.setValue(!!i.secondaryAxis),null===n||void 0===n||n.setDisabled(this.isSecondaryAxisDisabled(i.chartType))}}clearComps(){this.chartTypeComps.clear(),this.secondaryAxisComps.clear()}isSecondaryAxisDisabled(e){return["groupedColumn","stackedColumn","stackedArea"].includes(e)}destroy(){this.clearComps(),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),super.destroy()}},vg=class extends cg{constructor(e,t,i,o,n,s,r){super(e,o,n,'<div id="seriesGroup"></div>'),this.chartOptionsService=t,this.title=i,this.valueCols=s,this.isOpen=r}postConstruct(){if(this.groupComp=this.createBean(new Ei({title:this.title,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data",expanded:this.isOpen})),this.chartController.isActiveXYChart()){const e=this.groupComp.createManagedBean(new s.bLJ({label:this.chartTranslation.translate("paired"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartOptionsService.getPairedMode(),onValueChange:e=>{this.chartOptionsService.setPairedMode(!!e),this.chartController.updateForGridChange({maintainColState:!0})}}));this.groupComp.addItem(e)}this.createGroup(this.valueCols,this.generateGetSeriesLabel(this.valueCols),"seriesAdd","seriesSelect"),this.getGui().appendChild(this.groupComp.getGui())}refresh(e){var t,i;null===(t=this.valuePillSelect)||void 0===t||t.setValueFormatter(this.generateGetSeriesLabel(e)),null===(i=this.valuePillSelect)||void 0===i||i.setValues(e,e.filter(e=>e.selected)),this.refreshValueSelect(e)}generateGetSeriesLabel(e){if(!this.chartController.isActiveXYChart())return e=>{var t;return null!==(t=e.displayName)&&void 0!==t?t:""};const t=e.filter(e=>e.selected),i="bubble"===this.chartController.getChartType(),o=this.chartOptionsService.getPairedMode(),n=new Map;return n.set(0,"X"),n.set(1,"Y"),n.set(2,"size"),e=>{var s;const r=null!==(s=e.displayName)&&void 0!==s?s:"";if(!e.selected)return r;const a=t.indexOf(e);if(-1===a)return r;let l;return l=o?n.get(a%(i?3:2)):0===a?"X":i&&a%2===0?"size":"Y","".concat(r," (").concat(l,")")}}destroy(){this.groupComp=this.destroyBean(this.groupComp),super.destroy()}},mg={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0},{type:"chartSpecific",isOpen:!0}]},fg=class extends s.uAl{constructor(e){super('<div class="ag-chart-data-wrapper ag-scrollable-container"></div>'),this.chartMenuContext=e,this.isSwitchCategorySeriesToggled=!1,this.restoreSwitchCategorySeriesToggleFocus=!1,this.panels=[],this.chartController=e.chartController}wireBeans(e){this.chartTranslation=e.chartTranslation,this.chartSvc=e.chartSvc}postConstruct(){this.createSwitchCategorySeriesToggle(),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched(),this.updatePanels();const e=this.updatePanels.bind(this);this.addManagedListeners(this.chartController,{chartModelUpdate:e,chartApiUpdate:e})}destroy(){this.clearPanelComponents(),super.destroy()}updatePanels(){const e=this.chartType,t=this.isSwitchCategorySeriesToggled,{dimensionCols:i,valueCols:o}=this.chartController.getColStateForMenu();this.chartType=this.chartController.getChartType(),this.isSwitchCategorySeriesToggled=this.chartController.isCategorySeriesSwitched();const n=this.isSwitchCategorySeriesToggled!==t;var r,a,l,d;this.canRefresh(e,this.chartType)&&!n?(null===(r=this.categoriesDataPanel)||void 0===r||r.refresh(i),null===(a=this.seriesDataPanel)||void 0===a||a.refresh(o),null===(l=this.seriesChartTypePanel)||void 0===l||l.refresh(o),null===(d=this.chartSpecificPanel)||void 0===d||d.refresh()):this.recreatePanels(i,o);const c=Hh(this.chartType)&&this.chartSvc.isEnterprise()&&!this.chartController.isGrouping();var u;((0,s.nl0)(this.switchCategorySeriesToggle.getGui(),c),n)&&(null===(u=this.switchCategorySeriesToggle)||void 0===u||u.setValue(this.chartController.isCategorySeriesSwitched()));this.restoreSwitchCategorySeriesToggleFocus&&(this.restoreSwitchCategorySeriesToggleFocus=!1,c&&this.switchCategorySeriesToggle.getFocusableElement().focus())}canRefresh(e,t){if(void 0===e)return!1;if(e===t)return!0;const i=e=>["columnLineCombo","areaColumnCombo","customCombo"].includes(e);return!(!i(e)||!i(t))}recreatePanels(e,t){var i,o;this.clearPanelComponents();const{chartType:n}=this;if(!n)return;const r=this.chartController.isCategorySeriesSwitched();null===(i=this.getDataPanelDef().groups)||void 0===i||i.forEach(i=>{let{type:o,isOpen:a}=i;o===(r?"series":"categories")?(this.categoriesDataPanel=this.createBean(new ug(this.chartController,this.getCategoryGroupTitle(r),this.getCategoryGroupMultipleSelect(n,r),e,a)),this.panels.push(this.categoriesDataPanel)):o===(r?"categories":"series")?(this.seriesDataPanel=this.createBean(new vg(this.chartController,this.chartMenuContext.chartOptionsService,this.getSeriesGroupTitle(r),this.getSeriesGroupMultipleSelect(n,r),this.getSeriesGroupMaxSelection(n,r),t,a)),this.panels.push(this.seriesDataPanel)):"seriesChartType"===o?this.chartController.isComboChart()&&(this.seriesChartTypePanel=this.createBean(new gg(this.chartController,t,a)),this.panels.push(this.seriesChartTypePanel)):"chartSpecific"===o?(this.chartSpecificPanel=this.createBean(new pg(this.chartMenuContext,a)),this.panels.push(this.chartSpecificPanel)):(0,s.ujB)(144,{type:o})}),null===(o=r?this.categoriesDataPanel:this.seriesDataPanel)||void 0===o||o.addItem(this.switchCategorySeriesToggle.getGui()),this.addPanelComponents()}addPanelComponents(){if(!this.panels.length)return;const e=(0,s.BxM)(this.beans).createDocumentFragment();for(const t of this.panels)t.addCss("ag-chart-data-section"),e.appendChild(t.getGui());this.getGui().appendChild(e)}clearPanelComponents(){for(const e of this.panels)e.getGui().remove(),this.destroyBean(e);this.panels=[]}getDataPanelDef(){var e,t;return null!==(e=null===(t=this.gos.get("chartToolPanelsDef"))||void 0===t?void 0:t.dataPanel)&&void 0!==e?e:mg}getCategoryGroupTitle(e){return e?this.chartTranslation.translate("seriesLabels"):this.chartTranslation.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getCategoryGroupMultipleSelect(e,t){return!t&&1!==Bh(e)}getSeriesGroupTitle(e){return e?this.chartTranslation.translate("categoryValues"):this.chartTranslation.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getSeriesGroupMultipleSelect(e,t){return 1!==this.getSeriesGroupMaxSelection(e,t)}getSeriesGroupMaxSelection(e,t){if(!t)return Vh(e)}createSwitchCategorySeriesToggle(){this.switchCategorySeriesToggle=this.createManagedBean(new s.bLJ({label:this.chartTranslation.translate("switchCategorySeries"),labelAlignment:"left",labelWidth:"flex",inputWidth:"flex",value:this.chartController.isCategorySeriesSwitched(),onValueChange:e=>{this.restoreSwitchCategorySeriesToggleFocus=!0,this.chartController.switchCategorySeries(e)}}))}},Cg=class extends s.DKR{constructor(e){super(e,'<div class="ag-angle-select">\n            <div data-ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div class="ag-angle-select-field">\n                    <div data-ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div data-ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field data-ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',[s.HUZ]),this.eLabel=s.dRA,this.eParentCircle=s.dRA,this.eChildCircle=s.dRA,this.eAngleValue=s.dRA,this.radius=0,this.offsetX=0,this.offsetY=0}wireBeans(e){this.dragSvc=e.dragSvc}postConstruct(){var e;super.postConstruct();const{value:t,onValueChange:i}=this.config;null!=t&&this.setValue(t,void 0,!0),null!=i&&this.onValueChange(i),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:()=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:e=>this.calculateAngleDrag(e),onDragStop:()=>{}},null===(e=this.dragSvc)||void 0===e||e.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue("".concat(this.degrees)).onValueChange(e=>{null!=e&&""!==e||(e="0"),e=this.eAngleValue.normalizeValue(e);let t=parseFloat(e);t>180&&(t-=360),this.setValue(t)}),this.updateNumberInput(),(0,s.Qmv)(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListeners(this,{fieldValueChanged:()=>{this.eAngleValue.getInputElement().contains((0,s.UlD)(this.beans))||this.updateNumberInput()}})}updateNumberInput(){const e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())}positionChildCircle(e){const t=this.parentCircleRect||{width:24,height:24},i=this.eChildCircle,o=t.width/2,n=t.height/2;i.style.left="".concat(o+8*Math.cos(e),"px"),i.style.top="".concat(n+8*Math.sin(e),"px")}calculatePolar(){const e=this.offsetX,t=this.offsetY,i=Math.atan2(t,e);this.degrees=this.toDegrees(i),this.radius=Math.sqrt(e*e+t*t),this.positionChildCircle(i)}calculateCartesian(){const e=this.toRadians(this.getValue()),t=this.getRadius();this.setOffsetX(Math.cos(e)*t).setOffsetY(Math.sin(e)*t)}setOffsetX(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this}setOffsetY(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this}calculateAngleDrag(e){const t=this.parentCircleRect,i=t.width/2,o=t.height/2,n=e.clientX-t.left-i,s=e.clientY-t.top-o,r=Math.atan2(s,n);this.setValue(r,!0)}toDegrees(e){return e/Math.PI*180}toRadians(e){return e/180*Math.PI}normalizeNegativeValue(e){return e<0?360+e:e}normalizeAngle180(e){return(e%=2*Math.PI)<-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),e}getRadius(){return this.radius}setRadius(e){return this.radius===e||(this.radius=e,this.calculateCartesian()),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>{e(this.degrees)}}),this}getValue(e){return e?this.toRadians(this.degrees):this.degrees}setValue(e,t,i){let o;return o=t?e:this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(o),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(o),i||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}setWidth(e){return(0,s.M9x)(this.getGui(),e),this}setDisabled(e){return super.setDisabled(e),this.eAngleValue.setDisabled(e),this}destroy(){var e;null===(e=this.dragSvc)||void 0===e||e.removeDragSource(this.dragListener),super.destroy()}};var wg=class extends s.uAl{constructor(e){super(),this.params=e,this.fontGroup=s.dRA,this.activeComps=[],this.chartOptions=e.chartMenuParamsFactory.getChartOptions()}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{cssIdentifier:e="charts-format-sub-level",name:t,enabled:i,onEnableChange:o,suppressEnabledCheckbox:n,chartMenuParamsFactory:r,keyMapper:a}=this.params,l={cssIdentifier:e,direction:"vertical",suppressOpenCloseIcons:!0,title:t,enabled:i,suppressEnabledCheckbox:!0,onEnableChange:e=>{o&&o(e)},useToggle:!n};this.setTemplate('<div class="ag-font-panel">\n        <ag-group-component data-ref="fontGroup">\n            <ag-select data-ref="familySelect"></ag-select>\n            <ag-select data-ref="weightStyleSelect"></ag-select>\n            <div class="ag-charts-font-size-color">\n                <ag-select data-ref="sizeSelect"></ag-select>\n                <ag-color-picker data-ref="colorPicker"></ag-color-picker>\n            </div>\n        </ag-group-component>\n    </div>',[Ti,s._gz,bp],{fontGroup:l,familySelect:this.getFamilySelectParams(),weightStyleSelect:this.getWeightStyleSelectParams(),sizeSelect:this.getSizeSelectParams(),colorPicker:r.getDefaultColorPickerParams(a("color"))}),this.toggleCss("ag-font-panel-no-header",!t)}addItem(e,t){t?this.fontGroup.prependItem(e):this.fontGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.fontGroup.setEnabled(e)}getFamilySelectParams(){const e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],t=this.getInitialFontValue("fontFamily");let i=e[0];if(t){const n=e.map(e=>e.toLowerCase()).indexOf(t.toLowerCase());if(n>=0)i=e[n];else{const n=(o=t)[0].toUpperCase()+o.substring(1).toLowerCase();e.push(n),i=n}}var o;const n=e.sort().map(e=>({value:e,text:e}));return this.params.chartMenuParamsFactory.getDefaultSelectParamsWithoutValueParams("font",n,"".concat(i),e=>this.setFont({fontFamily:e}))}getSizeSelectParams(){const e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],t=this.getInitialFontValue("fontSize");e.includes(t)||e.push(t);const i=e.sort((e,t)=>e-t).map(e=>({value:"".concat(e),text:"".concat(e)}));return this.params.chartMenuParamsFactory.getDefaultSelectParamsWithoutValueParams("size",i,"".concat(t),e=>this.setFont({fontSize:parseInt(e,10)}))}getWeightStyleSelectParams(){var e,t;const i=null!==(e=this.getInitialFontValue("fontWeight"))&&void 0!==e?e:"normal",o=null!==(t=this.getInitialFontValue("fontStyle"))&&void 0!==t?t:"normal",n=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];let s=n.find(e=>e.weight===i&&e.style===o);s||(s={name:"predefined",weight:i,style:o},n.unshift(s));const r=n.map(e=>({value:e.name,text:this.chartTranslation.translate(e.name)}));return this.params.chartMenuParamsFactory.getDefaultSelectParamsWithoutValueParams("weight",r,s.name,e=>{const t=n.find(t=>t.name===e);this.setFont({fontWeight:t.weight,fontStyle:t.style})})}destroyActiveComps(){for(const e of this.activeComps)(0,s.MwW)(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActiveComps(),super.destroy()}setFont(e){const{keyMapper:t}=this.params;for(const i of Object.keys(e)){const o=e[i];o&&this.chartOptions.setValue(t(i),o)}}getInitialFontValue(e){const{keyMapper:t}=this.params;return this.chartOptions.getValue(t(e))}},bg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e,this.axisTicksSizeSlider=s.dRA}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{chartMenuUtils:e}=this,t=e.addEnableParams("tick.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("ticks"),suppressEnabledCheckbox:!0,useToggle:!0}),i=e.getDefaultColorPickerParams("tick.stroke"),o=e.getDefaultSliderParams("tick.width","width",10),n=e.getDefaultSliderParams("tick.size","length",30);this.setTemplate('<div>\n            <ag-group-component data-ref="axisTicksGroup">\n                <ag-color-picker data-ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider data-ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider data-ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,bp,hi],{axisTicksGroup:t,axisTicksColorPicker:i,axisTicksWidthSlider:o,axisTicksSizeSlider:n})}setTickSizeSliderDisplayed(e){this.axisTicksSizeSlider.setDisplayed(e)}},yg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e,this.chartOptions=e.getChartOptions()}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuUtils.addEnableParams("gridLine.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("gridLines"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.getGridLineColorPickerParams("color"),i=this.getGridLineWidthSliderParams("thickness"),o=this.getGridLineDashSliderParams("lineDash");this.setTemplate('<div>\n            <ag-group-component data-ref="gridLineGroup">\n                <ag-color-picker data-ref="gridLineColorPicker"></ag-color-picker>\n                <ag-slider data-ref="gridLineWidthSlider"></ag-slider>\n                <ag-slider data-ref="gridLineLineDashSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,bp,hi],{gridLineGroup:e,gridLineColorPicker:t,gridLineWidthSlider:i,gridLineLineDashSlider:o})}getGridLineColorPickerParams(e){return this.chartMenuUtils.getDefaultColorPickerParams("gridLine.style",e,{formatInputValue:e=>{var t;return null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.stroke},parseInputValue:e=>{var t;const i=null!==(t=this.chartOptions.getValue("gridLine.style"))&&void 0!==t?t:[];return 0===i.length?[{stroke:e,lineDash:[]}]:[(0,n.A)((0,n.A)({},i[0]),{},{stroke:e})]}})}getGridLineWidthSliderParams(e){return this.chartMenuUtils.getDefaultSliderParams("gridLine.width",e,10)}getGridLineDashSliderParams(e){var t;const i=this.chartOptions.getValue("gridLine.style"),o=null===i||void 0===i||null===(t=i[0])||void 0===t||null===(t=t.lineDash)||void 0===t?void 0:t[0],n=this.chartMenuUtils.getDefaultSliderParamsWithoutValueParams(null!==o&&void 0!==o?o:0,e,30);return n.onValueChange=e=>{const t=this.chartOptions.getValue("gridLine.style.0.stroke");this.chartOptions.setValue("gridLine.style",[{lineDash:[e],stroke:t}])},n}},Sg=class extends s.uAl{constructor(e,t){super(),this.axisType=e,this.options=t,this.axisGroup=s.dRA,this.axisTypeSelect=s.dRA,this.axisPositionSelect=s.dRA,this.axisTimeFormatSelect=s.dRA,this.activePanels=[],this.updateFuncs=[];const{chartOptionsService:i,seriesType:o,chartController:n}=t;this.chartOptionsService=i,this.chartController=n,this.chartOptionsSeriesProxy=i.getSeriesOptionsProxy(()=>o)}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){var e;const{isExpandedOnInit:t,chartOptionsService:i,registerGroupComponent:o}=this.options,n=this.axisType,r={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate(n),expanded:t,suppressEnabledCheckbox:!0},a=i.getCartesianAxisOptionsProxy(this.axisType),l=this.createManagedBean(new hg(a)),d=this.createManagedBean(new hg(i.getCartesianAxisThemeOverridesProxy(this.axisType))),c=this.getAxisTypeSelectParams(l,i.getCartesianAxisAppliedThemeOverridesProxy(this.axisType)),u=this.getAxisPositionSelectParams(l),h=this.getAxisTimeFormatSelectParams(l),p=this.getAxisColorInputParams(d),g=this.getAxisLineWidthSliderParams(d);this.setTemplate('<div>\n            <ag-group-component data-ref="axisGroup">\n                <ag-select data-ref="axisTypeSelect"></ag-select>\n                <ag-select data-ref="axisTimeFormatSelect"></ag-select>\n                <ag-select data-ref="axisPositionSelect"></ag-select>\n                <ag-color-picker data-ref="axisColorInput"></ag-color-picker>\n                <ag-slider data-ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,s._gz,bp,hi],{axisGroup:r,axisTypeSelect:null!==c&&void 0!==c?c:void 0,axisPositionSelect:null!==u&&void 0!==u?u:void 0,axisTimeFormatSelect:null!==h&&void 0!==h?h:void 0,axisColorInput:p,axisLineWidthSlider:g}),o(this.axisGroup),this.axisTypeSelect.setDisplayed(!(null===(e=c.options)||void 0===e||!e.length)),u||this.removeTemplateComponent(this.axisPositionSelect);const v=()=>{const e="time"===a.getValue("type");(0,s.nl0)(this.axisTimeFormatSelect.getGui(),e)};h?(v(),this.addManagedEventListeners({chartOptionsChanged:()=>{v()}})):this.removeTemplateComponent(this.axisTimeFormatSelect),this.initGridLines(d),this.initAxisTicks(d),this.initAxisLabels(d);this.addManagedListeners(this.chartController,{chartUpdated:()=>{for(const e of this.updateFuncs)e()},chartModelUpdate:()=>setTimeout(()=>{this.isAlive()&&(this.refreshAxisTypeSelect(l),v())})})}getAxisTypeSelectParams(e,t){const i=e.getChartOptions(),o=this.getAxisTypeSelectOptions(),n=e.getDefaultSelectParams("type","axisType",o);return n.onValueChange=e=>{const o=i.getValue("type");if(e===o)return;const n=t.getValue("*"),s="time"===e,r="time"===o!==s?s?"%d %B %Y":void 0:null;var a;void 0===r&&(null===(a=i.clearValue)||void 0===a||a.call(i,"label","format"));this.chartOptionsService.setCartesianCategoryAxisType(this.axisType,e),null!=r&&i.setValue("label.format",r),t.setValue("*",n)},n}refreshAxisTypeSelect(e){const t=this.getAxisTypeSelectOptions(),i=!!t.length;this.axisTypeSelect.setDisplayed(i),i&&this.axisTypeSelect.clearOptions().addOptions(t).setValue(e.getChartOptions().getValue("type"))}getAxisTypeSelectOptions(){const e=this.chartController,t=e.getChartType();return["heatmap","histogram","boxPlot","rangeBar","scatter","bubble"].includes(t)||e.isGrouping()||!this.isCategoryAxis()||e.isCategorySeriesSwitched()||!(()=>{const t=e.getChartData()[0];return!!t&&e.getSelectedDimensions().every(e=>!isNaN(parseFloat(t[e.colId])))})()?[]:["category","number","time"].map(e=>({value:e,text:this.translate(e)}))}isCategoryAxis(){const e="horizontal"===this.chartOptionsSeriesProxy.getValue("direction");return e&&"yAxis"===this.axisType||!e&&"xAxis"===this.axisType}getAxisPositionSelectParams(e){const t=((e,t)=>"heatmap"===e?null:"xAxis"===t?[{value:"top",text:this.translate("top")},{value:"bottom",text:this.translate("bottom")}]:"yAxis"===t?[{value:"left",text:this.translate("left")},{value:"right",text:this.translate("right")}]:void 0)(this.chartController.getChartType(),this.axisType);return t?e.getDefaultSelectParams("position","position",t):null}getAxisTimeFormatSelectParams(e){if(!this.isCategoryAxis())return null;const t=[{value:"%d/%m/%Y",text:this.translate("timeFormatSlashesDDMMYYYY")},{value:"%m/%d/%Y",text:this.translate("timeFormatSlashesMMDDYYYY")},{value:"%d/%m/%y",text:this.translate("timeFormatSlashesDDMMYY")},{value:"%m/%d/%y",text:this.translate("timeFormatSlashesMMDDYY")},{value:"%d.%e.%y",text:this.translate("timeFormatDotsDDMYY")},{value:"%e.%d.%y",text:this.translate("timeFormatDotsMDDYY")},{value:"%Y-%m-%d",text:this.translate("timeFormatDashesYYYYMMDD")},{value:"%d %B %Y",text:this.translate("timeFormatSpacesDDMMMMYYYY")},{value:"%H:%M:%S",text:this.translate("timeFormatHHMMSS")},{value:"%I:%M:%S %p",text:this.translate("timeFormatHHMMSSAmPm")}];return e.getDefaultSelectParams("label.format","timeFormat",t)}getAxisColorInputParams(e){return e.getDefaultColorPickerParams("line.stroke")}getAxisLineWidthSliderParams(e){var t;const i=e.getChartOptions(),o=e.getDefaultSliderParamsWithoutValueParams(null!==(t=i.getValue("line.enabled")?i.getValue("line.width"):null)&&void 0!==t?t:0,"thickness",10);return o.onValueChange=e=>{var t;t=0===e?null:e,i.setValues([{expression:"line.enabled",value:null!=t},{expression:"line.width",value:null!==t&&void 0!==t?t:0}])},o}initGridLines(e){if("heatmap"===this.chartController.getChartType())return;const t=this.createBean(new yg(e));this.axisGroup.addItem(t),this.activePanels.push(t)}initAxisTicks(e){if(!this.hasConfigurableAxisTicks())return;const t=this.createBean(new bg(e));this.axisGroup.addItem(t),this.activePanels.push(t);const i=()=>t.setTickSizeSliderDisplayed(this.isGroupedCategoryAxis());this.updateFuncs.push(i),i()}hasConfigurableAxisTicks(){switch(this.chartController.getChartType()){case"radarLine":case"radarArea":case"rangeBar":case"boxPlot":case"waterfall":return!1;default:return!0}}initAxisLabels(e){const t={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuParamsFactory:e,keyMapper:e=>"label.".concat(e)},i=this.createBean(new wg(t));this.axisGroup.addItem(i),this.activePanels.push(i),this.addAdditionalLabelComps(i,e)}addAdditionalLabelComps(e,t){this.addLabelPadding(e,t);const i=this.createRotationWidget("labelRotation",t),o=this.initLabelRotation(i,t);e.addItem(o),e.addItem(i)}initLabelRotation(e,t){const i=t.getChartOptions(),o=()=>i.getValue("label.rotation"),n="number"!==typeof o()&&i.getValue("label.autoRotate"),r=this.createBean(new s.Unm({label:this.translate("autoRotate"),value:n,onValueChange:t=>{t&&(this.prevRotation=o()),i.setValues([{expression:"label.autoRotate",value:t},{expression:"label.rotation",value:t?void 0:this.prevRotation}]),e.setDisplayed(!t)}}));e.setDisplayed(!n);const a=()=>r.setDisplayed(this.isGroupedCategoryAxis());return this.updateFuncs.push(a),a(),r}createRotationWidget(e,t){var i;const o=t.getChartOptions(),n=()=>o.getValue("label.rotation"),s=String.fromCharCode(176),r="".concat(this.chartTranslation.translate(e)," ").concat(s),a=new Cg({label:r,labelWidth:"flex",value:null!==(i=n())&&void 0!==i?i:0,onValueChange:e=>o.setValue("label.rotation",e)});return this.updateFuncs.push(()=>{var e;a.setValue(null!==(e=n())&&void 0!==e?e:0)}),this.createBean(a)}isGroupedCategoryAxis(){return"grouped-category"!==this.chartOptionsService.getCartesianAxisOptionsProxy(this.axisType).getValue("type")||!this.isCategoryAxis()}addLabelPadding(e,t){const i=this.createBean(new ui(t.getDefaultSliderParams("label.spacing","padding",30)));e.addItem(i)}translate(e){return this.chartTranslation.translate(e)}removeTemplateComponent(e){(0,s.MwW)(e.getGui()),this.destroyBean(e)}destroyActivePanels(){for(const e of this.activePanels)(0,s.MwW)(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActivePanels(),super.destroy()}},xg=class extends s.uAl{constructor(e){super(),this.options=e,this.axisGroup=s.dRA}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{isExpandedOnInit:e,chartAxisMenuParamsFactory:t,registerGroupComponent:i}=this.options,o={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("polarAxis"),expanded:e,suppressEnabledCheckbox:!0},n=t.getDefaultColorPickerParams("line.stroke"),s=t.getDefaultSliderParams("line.width","thickness",10);this.setTemplate('<div>\n            <ag-group-component data-ref="axisGroup">\n                <ag-color-picker data-ref="axisColorInput"></ag-color-picker>\n                <ag-slider data-ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,bp,hi],{axisGroup:o,axisColorInput:n,axisLineWidthSlider:s}),i(this.axisGroup),this.initAxis(),this.initAxisLabels(),this.initRadiusAxis()}initAxis(){const e=this.options.chartController.getChartType();if(["radarLine","radarArea"].includes(e)){const e=[{value:"circle",text:this.translate("circle")},{value:"polygon",text:this.translate("polygon")}];this.axisGroup.addItem(this.createSelect({labelKey:"shape",options:e,property:"shape"}))}"pie"!==e&&this.axisGroup.addItem(this.createSlider({labelKey:"innerRadius",defaultMaxValue:1,property:"innerRadiusRatio"}))}initAxisLabels(){const e={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,chartMenuParamsFactory:this.options.chartAxisMenuParamsFactory,keyMapper:e=>"label.".concat(e)},t=this.createManagedBean(new wg(e)),i=this.createOrientationWidget();t.addItem(i),this.axisGroup.addItem(t)}createOrientationWidget(){const e=[{value:"fixed",text:this.translate("fixed")},{value:"parallel",text:this.translate("parallel")},{value:"perpendicular",text:this.translate("perpendicular")}];return this.createSelect({labelKey:"orientation",options:e,property:"label.orientation"})}initRadiusAxis(){const e=Oh(this.options.chartController.getChartType());if(!Eh(e,"isRadial"))return;const t=[this.createSlider({labelKey:"groupPadding",defaultMaxValue:1,property:"paddingInner"}),this.createSlider({labelKey:"seriesPadding",defaultMaxValue:1,property:"groupPaddingInner"})],i=this.createManagedBean(new Ei({cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,enabled:!0,suppressEnabledCheckbox:!0,title:this.translate("padding"),items:t})).hideEnabledCheckbox(!0).hideOpenCloseIcons(!0);this.axisGroup.addItem(i)}createSlider(e){const{labelKey:t,defaultMaxValue:i,step:o=.05,property:n}=e,s=this.options.chartAxisMenuParamsFactory.getDefaultSliderParams(n,t,i);return s.step=o,this.createManagedBean(new ui(s))}createSelect(e){const{labelKey:t,options:i,property:o}=e;return this.createManagedBean(new s.Ju4(this.options.chartAxisMenuParamsFactory.getDefaultSelectParams(o,t,i)))}translate(e){return this.chartTranslation.translate(e)}},Fg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuUtils.addEnableParams("background.visible",{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("background"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuUtils.getDefaultColorPickerParams("background.fill");this.setTemplate('<div>\n            <ag-group-component data-ref="chartBackgroundGroup">\n                <ag-color-picker data-ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',[Ti,bp],{chartBackgroundGroup:e,colorPicker:t})}},Rg=class extends s.uAl{constructor(e,t){super(),this.chartMenuUtils=e,this.chartController=t,this.paddingTopSlider=s.dRA}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("padding"),suppressEnabledCheckbox:!0},t=e=>this.chartMenuUtils.getDefaultSliderParams("padding."+e,e,200);this.setTemplate('<div>\n            <ag-group-component data-ref="chartPaddingGroup">\n                <ag-slider data-ref="paddingTopSlider"></ag-slider>\n                <ag-slider data-ref="paddingRightSlider"></ag-slider>\n                <ag-slider data-ref="paddingBottomSlider"></ag-slider>\n                <ag-slider data-ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',[Ti,hi],{chartPaddingGroup:e,paddingTopSlider:t("top"),paddingRightSlider:t("right"),paddingBottomSlider:t("bottom"),paddingLeftSlider:t("left")}),this.addManagedEventListeners({chartOptionsChanged:e=>{this.updateTopPadding(e.chartOptions)}})}updateTopPadding(e){const t=[...this.chartController.getChartSeriesTypes(),"common"].map(t=>{var i;return null===e||void 0===e||null===(i=e[t])||void 0===i||null===(i=i.padding)||void 0===i?void 0:i.top}).find(e=>null!=e);null!=t&&this.paddingTopSlider.setValue("".concat(t))}},Pg=class extends s.uAl{constructor(e){super(),this.options=e,this.chartGroup=s.dRA}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{chartController:e,chartMenuParamsFactory:t,isExpandedOnInit:i,registerGroupComponent:o}=this.options,n={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslation.translate("chartStyle"),expanded:i,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new Rg(t,e)),this.createManagedBean(new Fg(t))]};this.setTemplate('<div>\n            <ag-group-component data-ref="chartGroup"></ag-group-component>\n        </div>',[Ti],{chartGroup:n}),o(this.chartGroup)}},Dg=class extends s.XQb{constructor(e){super(),this.groupContainer=e,this.id=0,this.groupComponents=new Map}addGroupComponent(e){const t=this.id++;this.groupComponents.set(t,e),e.isExpanded()&&(this.expandedGroupComponent=t),e.onExpandedChange(i=>{if(i){const i=this.expandedGroupComponent;if(this.expandedGroupComponent=t,null!=i){var o;const t=e.getGui(),n=t.offsetTop-this.groupContainer.parentElement.scrollTop;null===(o=this.groupComponents.get(i))||void 0===o||o.toggleGroupExpand(!1,!0);let s=t.offsetTop-n;s<0&&(s=0),s!==this.groupContainer.parentElement.scrollTop&&(this.groupContainer.parentElement.scrollTop=s)}}else this.expandedGroupComponent=void 0})}destroy(){this.groupComponents.clear(),super.destroy()}},Eg=class extends s.uAl{constructor(e,t){super(),this.options=e,this.legendGroup=s.dRA,this.enabledGroup=s.dRA,this.isGradient=["treemap","sunburst","heatmap"].includes(e.seriesType),this.key=this.isGradient?"gradientLegend":"legend",this.chartController=t.chartController}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{chartMenuParamsFactory:e,isExpandedOnInit:t,registerGroupComponent:i}=this.options,o=this.createManagedBean(new s.Ju4(e.getDefaultSelectParams("".concat(this.key,".position"),"position",["top","right","bottom","left"].map(e=>({value:e,text:this.chartTranslation.translate(e)})))));this.enabledGroup=this.createManagedBean(new Ei(e.addEnableParams("".concat(this.key,".enabled"),{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("legendEnabled"),suppressEnabledCheckbox:!0,useToggle:!0,items:[this.createLabelPanel(e),o,...this.getItems(e)]})));const n={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslation.translate("legend"),suppressEnabledCheckbox:!0,expanded:t,items:[this.enabledGroup]};this.setTemplate('<div>\n            <ag-group-component data-ref="legendGroup">\n            </ag-group-component>\n        </div>',[Ti],{legendGroup:n}),i(this.legendGroup);const r=this.updateLegendEnabledState.bind(this);this.addManagedListeners(this.chartController,{chartModelUpdate:r,chartApiUpdate:r})}updateLegendEnabledState(){const{valueCols:e}=this.chartController.getColStateForMenu();this.enabledGroup.setEnabled(e.filter(e=>e.selected).length>1)}getItems(e){const t=(t,i,o)=>this.createManagedBean(new ui(e.getDefaultSliderParams("".concat(this.key,".").concat(t),i,o)));return this.isGradient?[this.createManagedBean(new s.Unm(e.addValueParams("gradientLegend.reverseOrder",{label:this.chartTranslation.translate("reverseDirection"),labelWidth:"flex"}))),t("gradient.thickness","thickness",40),t("gradient.preferredLength","preferredLength",300),t("spacing","spacing",200)]:[t("spacing","spacing",200),t("item.marker.size","markerSize",40),t("item.marker.strokeWidth","markerStroke",10),t("item.marker.padding","itemSpacing",20),t("item.paddingX","layoutHorizontalSpacing",50),t("item.paddingY","layoutVerticalSpacing",50)]}createLabelPanel(e){const t=this.isGradient?"gradientLegend.scale.label":"legend.item.label",i={enabled:!0,suppressEnabledCheckbox:!0,chartMenuParamsFactory:e,keyMapper:e=>"".concat(t,".").concat(e),cssIdentifier:"charts-format-sub-level-no-header"};return this.createManagedBean(new wg(i))}},Ag=class extends s.uAl{constructor(e){super(),this.params=e,this.toggleableGroup=s.dRA,this.activeComps=[],this.chartOptions=e.chartMenuParamsFactory.getChartOptions()}postConstruct(){const{tag:e,cssIdentifier:t="charts-format-sub-level",title:i,suppressEnabledCheckbox:o}=this.params,n=this.params.chartMenuParamsFactory.addEnableParams("".concat(e,".enabled"),{cssIdentifier:t,direction:"vertical",suppressOpenCloseIcons:!0,title:i,suppressEnabledCheckbox:!0,useToggle:!o});this.setTemplate('<div class="ag-toggleable-group-panel">\n                <ag-group-component data-ref="toggleableGroup">\n                </ag-group-component>\n            </div>',[Ti],{toggleableGroup:n}),this.toggleCss("ag-toggleable-group-panel-no-header",!i)}addItem(e,t){t?this.toggleableGroup.prependItem(e):this.toggleableGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.toggleableGroup.setEnabled(e)}destroyActiveComps(){for(const e of this.activeComps)(0,s.MwW)(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActiveComps(),super.destroy()}},Mg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("callout"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="calloutGroup">\n                <ag-slider data-ref="calloutLengthSlider"></ag-slider>\n                <ag-slider data-ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider data-ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,hi],{calloutGroup:e,calloutLengthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.length","length",40),calloutStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLine.strokeWidth","strokeWidth",10),labelOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("calloutLabel.offset","offset",30)})}},Tg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("cap"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0},t=this.chartMenuUtils.getDefaultSliderParams("cap.lengthRatio","capLengthRatio",1);t.step=.05,this.setTemplate('<div>\n            <ag-group-component data-ref="capsGroup">\n                <ag-slider data-ref="capLengthRatioSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,hi],{capsGroup:e,capLengthRatioSlider:t})}},kg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("connectorLine"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="lineGroup">\n                <ag-color-picker data-ref="lineColorPicker"></ag-color-picker>\n                <ag-slider data-ref="lineStrokeWidthSlider"></ag-slider>\n                <ag-slider data-ref="lineOpacitySlider"></ag-slider>\n                <ag-slider data-ref="lineDashSlider"></ag-slider>                \n            </ag-group-component>\n        </div>',[Ti,bp,hi],{lineGroup:e,lineColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("line.stroke"),lineStrokeWidthSlider:this.getSliderParams("strokeWidth",10,"line.strokeWidth"),lineDashSlider:this.getSliderParams("lineDash",30,"line.lineDash",1,!0),lineOpacitySlider:this.getSliderParams("strokeOpacity",1,"line.strokeOpacity",.05)})}getSliderParams(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=this.chartMenuUtils.getDefaultSliderParams(i,e,t,n);return s.step=o,s}};function Ig(e){return["square","circle","cross","diamond","plus","triangle","heart"].map(t=>({value:t,text:e.translate(t)}))}var Lg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.chartMenuUtils.addEnableParams("marker.enabled",{cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("markers"),suppressEnabledCheckbox:!0,useToggle:!0,suppressOpenCloseIcons:!0});this.setTemplate('<div>\n            <ag-group-component data-ref="seriesMarkersGroup">\n                <ag-select data-ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider data-ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider data-ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,s._gz,hi],{seriesMarkersGroup:e,seriesMarkerShapeSelect:this.chartMenuUtils.getDefaultSelectParams("marker.shape","shape",Ig(this.chartTranslation)),seriesMarkerSizeSlider:this.chartMenuUtils.getDefaultSliderParams("marker.size","size",60),seriesMarkerStrokeWidthSlider:this.chartMenuUtils.getDefaultSliderParams("marker.strokeWidth","strokeWidth",10)})}},Ng=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e,this.seriesItemsGroup=s.dRA,this.activePanels=[]}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("seriesItems"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="seriesItemsGroup">\n                <ag-select data-ref="seriesItemSelect"></ag-select>\n            </ag-group-component>\n        </div>',[Ti,s._gz],{seriesItemsGroup:e,seriesItemSelect:this.getSeriesItemsParams()}),this.initSeriesControls()}getSeriesItemsParams(){const e=[{value:"positive",text:this.chartTranslation.translate("seriesItemPositive")},{value:"negative",text:this.chartTranslation.translate("seriesItemNegative")}];return this.chartMenuUtils.getDefaultSelectParamsWithoutValueParams("seriesItemType",e,"positive",e=>{this.destroyActivePanels(),this.initSeriesControls(e)})}initSeriesControls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"positive";this.initSlider("strokeWidth",10,"item.".concat(e,".strokeWidth")),this.initSlider("lineDash",30,"item.".concat(e,".lineDash"),1,!0),this.initSlider("strokeOpacity",1,"item.".concat(e,".strokeOpacity"),.05,!1),this.initSlider("fillOpacity",1,"item.".concat(e,".fillOpacity"),.05,!1),this.initItemLabels(e)}initSlider(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=this.chartMenuUtils.getDefaultSliderParams(i,e,t,n);s.step=o;const r=this.seriesItemsGroup.createManagedBean(new ui(s));this.seriesItemsGroup.addItem(r),this.activePanels.push(r)}initItemLabels(e){const t=this.chartMenuUtils.getDefaultFontPanelParams("item.".concat(e,".label"),"seriesItemLabels"),i=this.createBean(new wg(t));this.seriesItemsGroup.addItem(i),this.activePanels.push(i)}destroyActivePanels(){for(const e of this.activePanels)(0,s.MwW)(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActivePanels(),super.destroy()}},Og=class extends s.uAl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"shadow";super(),this.chartMenuUtils=e,this.propertyKey=t}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e=this.propertyKey,t=this.chartMenuUtils.addEnableParams("".concat(e,".enabled"),{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslation.translate("shadow"),suppressEnabledCheckbox:!0,useToggle:!0}),i=this.chartMenuUtils.getDefaultColorPickerParams("".concat(e,".color"));this.setTemplate('<div>\n            <ag-group-component data-ref="shadowGroup">\n                <ag-color-picker data-ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider data-ref="shadowBlurSlider"></ag-slider>\n                <ag-slider data-ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider data-ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,bp,hi],{shadowGroup:t,shadowColorPicker:i,shadowBlurSlider:this.getSliderParams("blur",0,20),shadowXOffsetSlider:this.getSliderParams("xOffset",-10,10),shadowYOffsetSlider:this.getSliderParams("yOffset",-10,10)})}getSliderParams(e,t,i){const o="".concat(this.propertyKey,".").concat(e),n=this.chartMenuUtils.getDefaultSliderParams(o,e,i);return n.minValue=t,n}},Gg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="groupSpacing">\n                <ag-slider data-ref="groupPaddingSlider"></ag-slider>\n                <ag-slider data-ref="groupSpacingSlider"></ag-slider>\n            </ag-group-component>\n            <ag-group-component data-ref="tileSpacing">\n                <ag-slider data-ref="tilePaddingSlider"></ag-slider>\n                <ag-slider data-ref="tileSpacingSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,hi],{groupSpacing:(0,n.A)((0,n.A)({},e),{},{title:this.chartTranslation.translate("group")}),tileSpacing:(0,n.A)((0,n.A)({},e),{},{title:this.chartTranslation.translate("tile")}),groupPaddingSlider:this.getSliderParams("padding","group.padding"),groupSpacingSlider:this.getSliderParams("spacing","group.gap"),tilePaddingSlider:this.getSliderParams("padding","tile.padding"),tileSpacingSlider:this.getSliderParams("spacing","tile.gap")})}getSliderParams(e,t){return this.chartMenuUtils.getDefaultSliderParams(t,e,10)}};var Bg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e,this.tooltipMode=s.dRA}postConstruct(){const{chartMenuUtils:e,beans:t}=this,i="tooltip",o=t.chartTranslation,n=e.addEnableParams("".concat(i,".enabled"),{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,title:o.translate("tooltips"),suppressEnabledCheckbox:!0,useToggle:!0}),r="tooltipMode",a=["single","shared","compact"].map(e=>{return{value:e,text:o.translate("".concat(r).concat((t=e,t[0].toUpperCase()+t.substring(1))))};var t}),l="".concat(i,".mode"),d=e.getDefaultSelectParams(l,r,a);this.setTemplate('<div>\n            <ag-group-component data-ref="tooltipGroup">\n                <ag-select data-ref="tooltipMode"></ag-select>\n            </ag-group-component>\n        </div>',[Ti,s._gz],{tooltipGroup:n,tooltipMode:d}),this.addManagedEventListeners({chartOptionsChanged:()=>{const t=e.getChartOptions().getValue(l);this.tooltipMode.setValue(t,!0)}})}},Vg=class extends s.uAl{constructor(e){super(),this.chartMenuUtils=e}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslation.translate("whisker"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="whiskersGroup">\n                <ag-color-picker data-ref="whiskerColorPicker"></ag-color-picker>\n                <ag-slider data-ref="whiskerThicknessSlider"></ag-slider>\n                <ag-slider data-ref="whiskerOpacitySlider"></ag-slider>\n                <ag-slider data-ref="whiskerLineDashSlider"></ag-slider>\n                <ag-slider data-ref="whiskerLineDashOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',[Ti,bp,hi],{whiskersGroup:e,whiskerColorPicker:this.chartMenuUtils.getDefaultColorPickerParams("whisker.stroke"),whiskerThicknessSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeWidth","strokeWidth",10),whiskerOpacitySlider:this.chartMenuUtils.getDefaultSliderParams("whisker.strokeOpacity","strokeOpacity",1),whiskerLineDashSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDash","lineDash",30,!0),whiskerLineDashOffsetSlider:this.chartMenuUtils.getDefaultSliderParams("whisker.lineDashOffset","lineDashOffset",30)})}},Hg="tooltips",zg="strokeWidth",Wg="lineWidth",Ug="lineDash",jg="lineOpacity",_g="fillOpacity",Kg="labels",Yg="shadow",qg="stageLabels",Qg="markers",Xg=class extends s.uAl{constructor(e){super(),this.options=e,this.seriesGroup=s.dRA,this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initStrokeWidth(Wg),[zg]:()=>this.initStrokeWidth("strokeWidth"),lineColor:()=>this.initLineColor(),[Ug]:()=>this.initLineDash(),[jg]:()=>this.initOpacity("strokeOpacity"),[_g]:()=>this.initOpacity("fillOpacity"),markers:()=>new Lg(this.chartMenuUtils),[Kg]:()=>this.initLabels(),sectorLabels:()=>this.initSectorLabels(),[Yg]:()=>new Og(this.chartMenuUtils),[Hg]:()=>new Bg(this.options.chartMenuParamsFactory),bins:()=>this.initBins(),whiskers:()=>new Vg(this.chartMenuUtils),caps:()=>new Tg(this.chartMenuUtils),connectorLine:()=>new kg(this.chartMenuUtils),seriesItems:()=>new Ng(this.chartMenuUtils),tileSpacing:()=>new Gg(this.chartMenuUtils),shape:()=>this.initShape(),size:()=>this.initSize("size","size"),minSize:()=>this.initSize("size","minSize"),maxSize:()=>this.initSize("maxSize","maxSize"),dropoff:()=>this.initDropOff(),stageLabels:()=>this.initStageLabels()},this.seriesWidgetMappings={bar:[Hg,zg,Ug,jg,_g,Kg,Yg],pie:[Hg,zg,jg,_g,Kg,"sectorLabels",Yg],donut:[Hg,zg,jg,_g,Kg,"sectorLabels",Yg],line:[Hg,Wg,Ug,jg,Qg,Kg],scatter:[Hg,"shape","size",zg,Kg],bubble:[Hg,"shape","minSize","maxSize",zg,Kg],area:[Hg,Wg,Ug,jg,_g,Qg,Kg,Yg],histogram:[Hg,"bins",zg,Ug,jg,_g,Kg,Yg],"radial-column":[Hg,zg,Ug,jg,_g,Kg],"radial-bar":[Hg,zg,Ug,jg,_g,Kg],"radar-line":[Hg,zg,Ug,jg,Qg,Kg],"radar-area":[Hg,zg,Ug,jg,_g,Qg,Kg],nightingale:[Hg,zg,Ug,jg,_g,Kg],"box-plot":[Hg,zg,Ug,jg,_g,"whiskers","caps"],"range-bar":[Hg,zg,Ug,jg,_g,Kg],"range-area":[Hg,Wg,Ug,jg,_g,Qg,Kg,Yg],treemap:[Hg,"tileSpacing"],sunburst:[Hg],heatmap:[Hg,Kg,"lineColor",Wg,jg],waterfall:[Hg,"connectorLine","seriesItems"],funnel:[Hg,zg,Ug,jg,_g,Kg,"dropoff",qg,Yg],"cone-funnel":[Hg,zg,Ug,jg,_g,Kg,qg],pyramid:[Hg,zg,Ug,jg,_g,Kg,qg,Yg]},this.seriesType=e.seriesType}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{isExpandedOnInit:e,chartOptionsService:t,chartController:i,registerGroupComponent:o}=this.options,n={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.translate("series"),expanded:e,suppressEnabledCheckbox:!0};this.setTemplate('<div>\n            <ag-group-component data-ref="seriesGroup">\n            </ag-group-component>\n        </div>',[Ti],{seriesGroup:n}),o(this.seriesGroup),this.chartMenuUtils=this.createManagedBean(new hg(t.getSeriesOptionsProxy(()=>this.seriesType))),this.addManagedListeners(i,{chartSeriesChartTypeChanged:this.refreshWidgets.bind(this)}),this.refreshWidgets()}refreshWidgets(){const{chartController:e}=this.options;this.destroyActivePanels();e.getChartProxy().getChart().waitForUpdate().then(()=>{if(!!this.isAlive()){e.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect());for(const e of null!==(t=this.seriesWidgetMappings[this.seriesType])&&void 0!==t?t:[]){var t;const i=this.widgetFuncs[e]();let o;if(Array.isArray(i)){const e=this.createBean(i[0]);o=e,i[1](e)}else o=this.createBean(i);this.seriesGroup.addItem(o),this.activePanels.push(o)}}}).catch(e=>(0,s.CkN)(105,{e:e}))}initSeriesSelect(){const e=this.createBean(new s.Ju4(this.chartMenuUtils.getDefaultSelectParamsWithoutValueParams("seriesType",this.getSeriesSelectOptions(),"".concat(this.seriesType),e=>{this.seriesType=e,this.refreshWidgets()})));this.seriesGroup.addItem(e),this.activePanels.push(e)}initLineColor(){return new wp(this.chartMenuUtils.getDefaultColorPickerParams("stroke","strokeColor"))}initStrokeWidth(e,t){return new ui(this.chartMenuUtils.getDefaultSliderParams(t?"".concat(t,".").concat(e):"strokeWidth",e,10))}initLineDash(e){return new ui(this.chartMenuUtils.getDefaultSliderParams(e?"".concat(e,".lineDash"):"lineDash","lineDash",30,!0))}initOpacity(e,t){const i=this.chartMenuUtils.getDefaultSliderParams(t?"".concat(t,".").concat(e):e,e,1);return i.step=.05,new ui(i)}initDropOff(){return[new Ag({tag:"dropOff",cssIdentifier:"charts-format-sub-level",title:this.translate("dropOff"),suppressEnabledCheckbox:!1,chartMenuParamsFactory:this.chartMenuUtils}),e=>{for(const t of[this.initStrokeWidth("strokeWidth","dropOff"),this.initLineDash("dropOff"),this.initOpacity("strokeOpacity","dropOff"),this.initOpacity("fillOpacity","dropOff")]){const i=e.createManagedBean(t);e.addItem(i),this.activePanels.push(i)}}]}initLabels(){const e=Gh(this.seriesType),t=e?"calloutLabel":"label",i=e?"calloutLabels":"labels",o=this.chartMenuUtils.getDefaultFontPanelParams(t,i);return[new wg(o),t=>{if(e){const e=t.createManagedBean(new Mg(this.chartMenuUtils));t.addItem(e),this.activePanels.push(e)}if("range-bar"===this.seriesType){const e=[{value:"inside",text:this.translate("inside")},{value:"outside",text:this.translate("outside")}],i=t.createManagedBean(new s.Ju4(this.chartMenuUtils.getDefaultSelectParams("label.placement","labelPlacement",e)));t.addItem(i),this.activePanels.push(i);const o=t.createManagedBean(new ui(this.chartMenuUtils.getDefaultSliderParams("label.padding","padding",200)));t.addItem(o),this.activePanels.push(o)}}]}initSectorLabels(){const e=this.chartMenuUtils.getDefaultFontPanelParams("sectorLabel","sectorLabels");return[new wg(e),e=>{const t=this.chartMenuUtils.getDefaultSliderParams("sectorLabel.positionRatio","positionRatio",1);t.step=.05;const i=e.createManagedBean(new ui(t));e.addItem(i)}]}initStageLabels(){return new wg(this.chartMenuUtils.getDefaultFontPanelParams("stageLabel",qg))}initBins(){var e;const t=this.chartMenuUtils.getDefaultSliderParams("binCount","histogramBinCount",20),i=this.chartMenuUtils.getChartOptions(),o=(null!==(e=i.getValue("bins"))&&void 0!==e?e:i.getValue("calculatedBins",!0)).length;return t.value="".concat(o),t.maxValue=Math.max(o,20),new ui(t)}initShape(){return new s.Ju4(this.chartMenuUtils.getDefaultSelectParams("shape","shape",Ig(this.chartTranslation)))}initSize(e,t){return new ui(this.chartMenuUtils.getDefaultSliderParams(e,t,60))}getSeriesSelectOptions(){const e=this.getActiveSeriesTypes();return["area","bar","line"].filter(t=>e.includes(t)).map(e=>({value:e,text:this.translate(e)}))}updateSeriesType(){const e=this.getActiveSeriesTypes();!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])}getActiveSeriesTypes(){return this.options.chartController.getActiveSeriesChartTypes().map(e=>Oh(e.chartType))}translate(e){return this.chartTranslation.translate(e)}destroyActivePanels(){for(const e of this.activePanels)(0,s.MwW)(e.getGui()),this.destroyBean(e)}destroy(){this.destroyActivePanels(),super.destroy()}},$g=class extends s.uAl{constructor(e,t,i){super("<div></div>"),this.chartMenuUtils=e,this.name=t,this.key=i,this.chartOptions=e.getChartOptions()}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.initFontPanel()}hasTitle(){const e=this.chartOptions.getValue(this.key);return(null===e||void 0===e?void 0:e.enabled)&&e.text&&e.text.length>0}initFontPanel(){const e=this.hasTitle(),t={name:this.chartTranslation.translate(this.name),enabled:e,suppressEnabledCheckbox:!1,chartMenuParamsFactory:this.chartMenuUtils,keyMapper:e=>"".concat(this.key,".").concat(e),onEnableChange:e=>this.onEnableChange(e)};this.fontPanel=this.createManagedBean(new wg(t)),this.fontPanel.addItem(this.createBean(new s.stt(this.getTextInputParams())),!0),this.fontPanel.addItem(this.createBean(new ui(this.getSpacingSliderParams()))),this.getGui().appendChild(this.fontPanel.getGui())}getTextInputParams(){return this.chartMenuUtils.addValueParams("".concat(this.key,".text"),{label:this.chartTranslation.translate("title"),labelAlignment:"top"})}getSpacingSliderParams(){return this.chartMenuUtils.getDefaultSliderParams("".concat(this.key,".spacing"),"spacing",100)}onEnableChange(e){this.chartOptions.setValue("".concat(this.key,".enabled"),e)}},Zg=class extends $g{wireBeans(e){super.wireBeans(e),this.chartMenuSvc=e.chartMenuSvc}postConstruct(){this.titlePlaceholder=this.chartTranslation.translate("titlePlaceholder"),super.postConstruct(),this.addManagedEventListeners({chartTitleEdit:()=>{this.fontPanel.setEnabled(this.hasTitle())}})}getTextInputParams(){const e=super.getTextInputParams();return this.shouldOverrideTextWithPlaceholder(e.value)&&(e.value=this.titlePlaceholder),e}getSpacingSliderParams(){const e=super.getSpacingSliderParams();return e.value="10",e}onEnableChange(e){if(this.chartMenuSvc.doesChartToolbarExist()){const t=this.chartOptions.getValue("padding.top");this.chartOptions.setValue("padding.top",e?t-20:t+20)}this.chartOptions.setValue("".concat(this.key,".enabled"),e);const t=this.chartOptions.getValue("".concat(this.key,".text"));e&&this.shouldOverrideTextWithPlaceholder(t)&&this.chartOptions.setValue("".concat(this.key,".text"),this.titlePlaceholder)}shouldOverrideTextWithPlaceholder(e){return"Title"===e||0===(null===e||void 0===e?void 0:e.trim().length)}},Jg=class extends s.uAl{constructor(e){super(),this.options=e,this.titleGroup=s.dRA}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){const{chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t,chartOptionsService:i,seriesType:o,isExpandedOnInit:n=!1,registerGroupComponent:s}=this.options,r=[];if(Mh(o)&&"pyramid"!==o){const e=e=>this.createManagedBean(new hg(i.getCartesianAxisThemeOverridesProxy(e)));r.push(this.createManagedBean(new $g(e("xAxis"),"horizontalAxisTitle","title"))),r.push(this.createManagedBean(new $g(e("yAxis"),"verticalAxisTitle","title")))}else kh(o)&&r.push(this.createManagedBean(new $g(t,"polarAxisTitle","title")));const a={cssIdentifier:"charts-format-top-level",direction:"vertical",title:this.chartTranslation.translate("chartTitles"),expanded:n,suppressEnabledCheckbox:!0,items:[this.createManagedBean(new Zg(e,"chartTitle","title")),this.createManagedBean(new $g(e,"chartSubtitle","subtitle")),...r]};this.setTemplate('<div>\n            <ag-group-component data-ref="titleGroup"></ag-group-component>\n        </div>',[Ti],{titleGroup:a}),s(this.titleGroup)}},ev={groups:[{type:"chart"},{type:"titles"},{type:"legend"},{type:"series"},{type:"axis"}]},tv=["axis","horizontalAxis","verticalAxis"],iv=class extends s.uAl{constructor(e){super('<div class="ag-chart-format-wrapper"></div>'),this.chartMenuContext=e}postConstruct(){this.groupExpansionFeature=this.createManagedBean(new Dg(this.getGui())),this.chartPanelFeature=this.createManagedBean(new fp(this.chartMenuContext.chartController,this.getGui(),"ag-chart-format-section",(e,t)=>this.createPanels(t))),this.chartPanelFeature.refreshPanels()}createPanels(e){var t;let i=!1;null===(t=this.getFormatPanelDef().groups)||void 0===t||t.forEach(t=>{let{type:o,isOpen:r=!1}=t;if(!this.isGroupPanelShownInSeries(o,e))return;r&&(i&&(0,s.ujB)(145,{group:o}),i=!0);const a=(0,n.A)((0,n.A)({},this.chartMenuContext),{},{isExpandedOnInit:r,seriesType:e,registerGroupComponent:e=>this.groupExpansionFeature.addGroupComponent(e)});switch(o){case"chart":this.chartPanelFeature.addComponent(new Pg(a));break;case"titles":this.chartPanelFeature.addComponent(new Jg(a));break;case"legend":this.chartPanelFeature.addComponent(new Eg(a,this.chartMenuContext));break;case"axis":kh(e)?this.chartPanelFeature.addComponent(new xg(a)):Mh(e)&&(this.chartPanelFeature.addComponent(new Sg("xAxis",a)),this.chartPanelFeature.addComponent(new Sg("yAxis",a)));break;case"horizontalAxis":this.chartPanelFeature.addComponent(new Sg("xAxis",a));break;case"verticalAxis":this.chartPanelFeature.addComponent(new Sg("yAxis",a));break;case"series":this.chartPanelFeature.addComponent(new Xg(a));break;default:(0,s.ujB)(147,{group:o})}})}getFormatPanelDef(){var e;const t=null===(e=this.gos.get("chartToolPanelsDef"))||void 0===e?void 0:e.formatPanel;return t||ev}isGroupPanelShownInSeries(e,t){const i=["chart","titles","legend","series"].includes(e)||Mh(t)&&tv.includes(e)||kh(t)&&"axis"===e,o=Th(t)&&"legend"===e||Th(t)&&tv.includes(e);return i&&!o}},ov=class extends s.uAl{constructor(e,t,i){super(),this.agChartsExports=t,this.tooltipName=i,this.size=58,this.padding=5;const{_Scene:o}=t;this.root=new o.Group;const n=new o.Scene({width:this.size,height:this.size});n.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),n.setRoot(this.root),n.setContainer(e),this.scene=n}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){this.scene.canvas.element.title=this.chartTranslation.translate(this.tooltipName);try{this.scene.render()}catch(e){(0,s.CkN)(108,{e:e})}}};function nv(e){const{stacked:t,size:i,padding:o,xScalePadding:n,xScaleDomain:s,yScaleDomain:r,agChartsExports:{_Scene:a}}=e,l=new a.CategoryScale;l.domain=s,l.range=[o,i-o],l.paddingInner=n,l.paddingOuter=n;const d=new a.LinearScale;d.domain=r,d.range=[i-o,o];const c=(e,t,i)=>e.map((e,o)=>{const n=i.convert(e),s=new a.Rect;return s.x=t.convert(o),s.y=n,s.width=t.bandwidth,s.height=i.convert(0)-n,s.strokeWidth=0,s.crisp=!0,s});return t?e.data.map(e=>c(e,l,d)):c(e.data,l,d)}function sv(e,t,i,o){const n=[0,t[0].length-1],s=t.reduce((e,t)=>{for(const i of t)i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i);return e},[1/0,-1/0]);s[0]--,s[s.length-1]++;const r=new e.LinearScale;r.domain=n,r.range=[o,i-o];const a=new e.LinearScale;return a.domain=s,a.range=[i-o,o],{xScale:r,yScale:a}}function rv(e,t,i){return e.map(e=>e.map((e,o)=>[o>0?"lineTo":"moveTo",t.convert(o),i.convert(e)]))}function av(e,t){const i=new e.Path;return t.forEach(e=>{let[t,o,n]=e;return i.path[t](o,n)}),i}function lv(e,t,i){return e.map((e,o,n)=>{const r=i?function(e,t,i){if(0===t)return dv(e[t],i);return[...e[t-1]]}(n,o,t):dv(e,t),a=[...r].reverse().map(e=>{let[t,i,o]=e;return["lineTo",i,o]}),l=e[0],d=(0,s.GXs)(a);return l[1]===d[1]&&l[2]===d[2]||a.push(["lineTo",l[1],l[2]]),[...e,...a]})}function dv(e,t){return e.map(e=>{let[i,o]=e;return[i,o,t.convert(0)]})}function cv(e,t){const i=av(e,t);return i.fill=void 0,i.lineCap="round",i.strokeWidth=3,i}function uv(e,t,i,o,n){let{_Scene:r}=e;const{xScale:a,yScale:l}=function(e,t,i,o){const n=[],s=[];for(const l of t)for(const[e,t]of l)n.push(e),s.push(t);const r=new e.LinearScale;r.domain=[Math.min(...n),Math.max(...n)],r.range=[o,i-o];const a=new e.LinearScale;return a.domain=[Math.min(...s),Math.max(...s)],a.range=[i-o,o],{xScale:r,yScale:a}}(r,i,o,n),d=i.map(e=>function(e,t,i){return e.map((e,o)=>{let[n,s]=e;return[o>0?"lineTo":"moveTo",t.convert(n),i.convert(s)]})}(e,a,l)),c=d.map(e=>function(e){const t=e[0],i=e[1],o=(0,s.GXs)(e);return i[1]===o[1]&&i[2]===o[2]||e.push([t[0],i[1],i[2]]),e}(e)).map(e=>cv(r,e)).reduce((e,t)=>e.concat(t),[]),u=new r.Group;return u.setClipRect(new r.BBox(n,n,o-2*n,o-2*n)),u.append(c),t.append(u),c}function hv(e,t,i,o,n){let{_Scene:s}=e;const{xScale:r,yScale:a}=sv(s,i,o,n),l=rv(i,r,a).map(e=>cv(s,e)),d=new s.Group;return d.setClipRect(new s.BBox(n,n,o-2*n,o-2*n)),d.append(l),t.append(d),l}function pv(e){return e.map((e,t,i)=>e.map((e,o)=>i.slice(0,t+1).reduce((e,t)=>e+t[o],0)))}function gv(e){const t=e.map((t,i)=>e.reduce((e,t)=>Math.max(e,t[i]),0));return e.map(e=>e.map((e,i)=>e/t[i]*19))}function vv(e,t,i,o,n,s){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const{_Scene:a}=e,l=new a.LinearScale;l.domain=[0,7],l.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2);const d=new a.LinearScale;d.domain=[0,10],d.range=[n,s];const c=[],u=o/2,h=i.map(e=>{const t=new a.Path;return t.strokeWidth=1,t.strokeOpacity=.5,t.lineCap="round",t.fill=void 0,t.fillOpacity=.8,e.forEach((e,i)=>{const o=l.convert(i),h=n+s-d.convert(e),p=h*Math.cos(o)+u,g=h*Math.sin(o)+u;if(t.path[i>0?"lineTo":"moveTo"](p,g),r>0){const e=new a.Marker({shape:"circle"});e.x=p,e.y=g,e.size=r,c.push(e)}}),t.path.closePath(),t}),p=new a.Group;return p.append([...h,...c]),t.append(p),{paths:h,markers:c}}function mv(e){let[t,i]=[1/0,-1/0];return{processedData:e.reduce((e,o,n)=>{var s;const r=n>0?e[n-1]:void 0;null!==(s=e[n])&&void 0!==s||(e[n]=[]);const a=e[n];return o.forEach((e,o)=>{r&&(e+=r[o]),a[o]=e,a[o]<t&&(t=a[o]),a[o]>i&&(i=a[o])}),e},[]),min:t,max:i}}var fv=[[[13,16],[13,12],[3,12],[3,16]],[[12,11],[12,7],[4,7],[4,11]],[[10.125,6],[10.125,1.5],[5.875,1.5],[5.875,6]]],Cv=class extends ov{constructor(e,t,i,o,n){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fv;super(e,t,arguments.length>5&&void 0!==arguments[5]?arguments[5]:"funnelTooltip"),this.shapes=uv(t,this.root,s,this.size,this.padding),this.updateColors(i,o)}updateColors(e,t){for(const i of this.shapes)i.fill=e[0],i.stroke=t[0],i.strokeWidth=0}},wv={chartType:"funnel",miniChart:Cv},bv=[[[13,16],[10.75,11.5],[5.25,11.5],[3,16]],[[10.75,11.5],[8.875,6],[7.125,6],[5.25,11.5]],[[8.875,6],[8.875,1.5],[7.125,1.5],[7.125,6]]],yv={chartType:"coneFunnel",miniChart:class extends Cv{constructor(e,t,i,o,n){super(e,t,i,o,n,arguments.length>5&&void 0!==arguments[5]?arguments[5]:"coneFunnelTooltip",bv)}updateColors(e,t){this.shapes.forEach((i,o)=>{i.fill=e[0],i.fillOpacity=1-.2*o,i.stroke=t[0],i.strokeWidth=0})}}},Sv=[[[8,16],[10,12],[6,12]],[[10.5,11],[12.5,7],[3.5,7],[5.5,11]],[[13,6],[15.5,1.5],[.5,1.5],[3,6]]],xv={chartType:"pyramid",miniChart:class extends Cv{constructor(e,t,i,o,n){super(e,t,i,o,n,arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pyramidTooltip",Sv)}updateColors(e,t){this.shapes.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o],i.strokeWidth=0})}}},Fv=class extends ov{constructor(e,t,i){super(e,t,i),this.stroke="gray",this.axisOvershoot=3}postConstruct(){const{_Scene:e}=this.agChartsExports,t=this.size,i=this.padding,o=new e.Line;o.x1=i,o.y1=i,o.x2=i,o.y2=t-i+this.axisOvershoot,o.stroke=this.stroke;const n=new e.Line;n.x1=i-this.axisOvershoot+1,n.y1=t-i,n.x2=t-i+1,n.y2=t-i,n.stroke=this.stroke;const s=this.root;s.append(o),s.append(n),super.postConstruct()}},Rv={chartType:"groupedColumn",miniChart:class extends Fv{constructor(e,t,i,o){super(e,t,"groupedColumnTooltip"),this.columnData=[2,3,4];const{root:n,columnData:s,size:r,padding:a}=this;this.columns=nv({stacked:!1,root:n,data:s,size:r,padding:a,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3,agChartsExports:t}),n.append(this.columns),this.updateColors(i,o)}updateColors(e,t){this.columns.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o]})}}},Pv=[[8,12,16],[6,9,12],[2,3,4]],Dv=class extends Fv{constructor(e,t,i,o,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pv,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,16];super(e,t,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"stackedColumnTooltip");const{root:l,size:d,padding:c}=this;this.stackedColumns=nv({stacked:!0,root:l,data:r,size:d,padding:c,xScaleDomain:[0,1,2],yScaleDomain:a,xScalePadding:.3,agChartsExports:t}),l.append((0,s.Q1u)(this.stackedColumns)),this.updateColors(i,o)}updateColors(e,t){this.stackedColumns.forEach((i,o)=>{for(const n of i)n.fill=e[o],n.stroke=t[o]})}},Ev={chartType:"stackedColumn",miniChart:Dv},Av=[[10,10,10],[6,7,8],[2,4,6]],Mv={chartType:"normalizedColumn",miniChart:class extends Dv{constructor(e,t,i,o,n){super(e,t,i,o,n,Av,[0,10],"normalizedColumnTooltip")}}},Tv={chartType:"groupedBar",miniChart:class extends Fv{constructor(e,t,i,o){super(e,t,"groupedBarTooltip");const{_Scene:n}=t,s=this.padding,r=this.size,a=new n.CategoryScale;a.domain=[0,1,2],a.range=[s,r-s],a.paddingInner=.3,a.paddingOuter=.3;const l=new n.LinearScale;l.domain=[0,4],l.range=[r-s,s];const d=l.convert(0),c=a.bandwidth;this.bars=[2,3,4].map((e,t)=>{const i=new n.Rect;return i.x=s,i.y=a.convert(t),i.width=d-l.convert(e),i.height=c,i.strokeWidth=0,i.crisp=!0,i}),this.updateColors(i,o),this.root.append(this.bars)}updateColors(e,t){this.bars.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o]})}}},kv=[[8,12,16],[6,9,12],[2,3,4]],Iv=class extends Fv{constructor(e,t,i,o,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:kv,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,16];super(e,t,arguments.length>7&&void 0!==arguments[7]?arguments[7]:"stackedBarTooltip");const{_Scene:l}=t,d=this.size,c=this.padding,u=new l.CategoryScale;u.domain=[0,1,2],u.range=[c,d-c],u.paddingInner=.3,u.paddingOuter=.3;const h=new l.LinearScale;h.domain=a,h.range=[d-c,c];const p=h.convert(0),g=u.bandwidth;this.bars=r.map(e=>e.map((e,t)=>{const i=new l.Rect;return i.x=c,i.y=u.convert(t),i.width=p-h.convert(e),i.height=g,i.strokeWidth=0,i.crisp=!0,i})),this.updateColors(i,o),this.root.append((0,s.Q1u)(this.bars))}updateColors(e,t){this.bars.forEach((i,o)=>i.forEach(i=>{i.fill=e[o],i.stroke=t[o]}))}},Lv={chartType:"stackedBar",miniChart:Iv},Nv=[[10,10,10],[6,7,8],[2,4,6]],Ov={chartType:"normalizedBar",miniChart:class extends Iv{constructor(e,t,i,o,n){super(e,t,i,o,n,Nv,[0,10],"normalizedBarTooltip")}}},Gv=class extends ov{constructor(e,t,i,o,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.6;super(e,t,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"donutTooltip");const{size:r,padding:a,agChartsExports:{_Scene:l}}=this,d=(r-2*a)/2,c=d+a,u=l.toRadians,h=[[u(-90),u(30)],[u(30),u(120)],[u(120),u(180)],[u(180),u(210)],[u(210),u(240)],[u(240),u(270)]];this.sectors=h.map(e=>{let[t,i]=e;const o=new l.Sector;return o.centerX=c,o.centerY=c,o.innerRadius=d*s,o.outerRadius=d,o.startAngle=t,o.endAngle=i,o.stroke=void 0,o.strokeWidth=0,o.inset=.75,o}),this.updateColors(i,o),this.root.append(this.sectors)}updateColors(e,t){this.sectors.forEach((i,o)=>{i.fill=e[o%e.length],i.stroke=t[o%t.length]})}},Bv={chartType:"donut",miniChart:Gv},Vv={chartType:"pie",miniChart:class extends Gv{constructor(e,t,i,o,n){super(e,t,i,o,n,0,"pieTooltip")}}},Hv=[[1,3,5],[2,6,4],[5,3,1]],zv=class extends Fv{constructor(e,t,i,o,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hv;super(e,t,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"lineTooltip");const{size:r,padding:a,root:l}=this;this.lines=hv(t,l,s,r,a),this.updateColors(i,o)}updateColors(e,t){this.lines.forEach((t,i)=>{t.stroke=e[i]})}},Wv={chartType:"line",miniChart:zv},Uv=pv(Hv),jv={chartType:"stackedLine",miniChart:class extends zv{constructor(e,t,i,o,n){super(e,t,i,o,n,arguments.length>5&&void 0!==arguments[5]?arguments[5]:Uv,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"stackedLineTooltip")}}},_v=gv(Uv),Kv={chartType:"normalizedLine",miniChart:class extends zv{constructor(e,t,i,o,n){super(e,t,i,o,n,arguments.length>5&&void 0!==arguments[5]?arguments[5]:_v,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"normalizedLineTooltip")}}},Yv={chartType:"scatter",miniChart:class extends Fv{constructor(e,t,i,o){super(e,t,"scatterTooltip");const{size:n,padding:s,agChartsExports:{_Scene:r}}=this,a=new r.LinearScale;a.domain=[-.5,4],a.range=[2*s,n-s];const l=new r.LinearScale;l.domain=[-.5,3.5],l.range=[n-s,s];const d=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach(e=>{e.forEach(e=>{let[t,i]=e;const o=new r.Arc;o.strokeWidth=0,o.centerX=a.convert(t),o.centerY=l.convert(i),o.radius=2.5,d.push(o)})}),this.points=d,this.updateColors(i,o);const c=new r.Group;c.setClipRect(new r.BBox(s,s,n-2*s,n-2*s)),c.append(this.points),this.root.append(c)}updateColors(e,t){this.points.forEach((i,o)=>{i.stroke=t[o%t.length],i.fill=e[o%e.length]})}}},qv={chartType:"bubble",miniChart:class extends Fv{constructor(e,t,i,o){super(e,t,"bubbleTooltip");const{size:n,padding:s,agChartsExports:{_Scene:r}}=this,a=new r.LinearScale;a.domain=[0,1],a.range=[2*s,n-s];const l=new r.LinearScale;l.domain=[0,1],l.range=[n-s,s];const d=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach(e=>{e.forEach(e=>{let[t,i,o]=e;const n=new r.Arc;n.strokeWidth=0,n.centerX=a.convert(t),n.centerY=l.convert(i),n.radius=o,n.fillOpacity=.7,d.push(n)})}),this.points=d,this.updateColors(i,o);const c=new r.Group;c.setClipRect(new r.BBox(s,s,n-2*s,n-2*s)),c.append(this.points),this.root.append(c)}updateColors(e,t){this.points.forEach((i,o)=>{i.stroke=t[o%t.length],i.fill=e[o%e.length]})}}},Qv=Hv,Xv=class extends Fv{constructor(e,t,i,o,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Qv,r=arguments.length>7&&void 0!==arguments[7]&&arguments[7];super(e,t,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"groupedAreaTooltip"),this.areas=function(e,t,i,o,n){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{xScale:r,yScale:a}=sv(e,i,o,n),l=lv(rv(i,r,a),a,s),d=new e.Group;d.setClipRect(new e.BBox(n,n,o-2*n,o-2*n));const c=l.map(t=>av(e,t));return d.append(c),t.append(d),c}(t._Scene,this.root,s,this.size,this.padding,r),this.updateColors(i,o)}updateColors(e,t){this.areas.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o],i.strokeWidth=1,i.strokeOpacity=.75,i.fillOpacity=.7})}},$v={chartType:"area",miniChart:Xv},Zv=pv(Qv),Jv=class extends Xv{constructor(e,t,i,o,n){super(e,t,i,o,n,arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zv,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"stackedAreaTooltip",!0)}updateColors(e,t){this.areas.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o]})}},em={chartType:"stackedArea",miniChart:Jv},tm=gv(Zv),im={chartType:"normalizedArea",miniChart:class extends Jv{constructor(e,t,i,o,n){super(e,t,i,o,n,arguments.length>5&&void 0!==arguments[5]?arguments[5]:tm,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"normalizedAreaTooltip")}}},om={chartType:"histogram",miniChart:class extends Fv{constructor(e,t,i,o){super(e,t,"histogramTooltip");const{padding:n,size:s,agChartsExports:{_Scene:r}}=this,a=[2,5,11,13,10,6,1],l=new r.LinearScale;l.domain=[0,a.length],l.range=[n,s-n];const d=new r.LinearScale;d.domain=[0,a.reduce((e,t)=>Math.max(e,t),0)],d.range=[s-n,n];const c=d.convert(0);this.bars=a.map((e,t)=>{const i=d.convert(e),o=l.convert(t),n=l.convert(t+1),s=new r.Rect;return s.x=o,s.y=i,s.width=n-o,s.height=c-i,s.strokeWidth=1,s.strokeOpacity=.75,s.crisp=!0,s}),this.updateColors(i,o),this.root.append(this.bars)}updateColors(e,t){let[i]=e,[o]=t;for(const n of this.bars)n.fill=i,n.stroke=o}}},nm=class extends ov{constructor(e,t,i){super(e,t,i),this.stroke="gray",this.showRadiusAxisLine=!0,this.showAngleAxisLines=!0}postConstruct(){const{_Scene:e}=this.agChartsExports,t=this.size,i=this.padding,o=(t-2*i)/2,n=this.showAngleAxisLines?[o,.8*o,.6*o,.4*o]:[],s=new e.Line;s.x1=t/2,s.y1=i,s.x2=t/2,s.y2=t-i-o-n[n.length-1],s.stroke=this.stroke,s.strokeOpacity=.5,s.fill=void 0,s.visible=this.showRadiusAxisLine;const r=i+o;this.gridLines=n.map((t,i)=>{const o=new e.Path;return o.path.arc(r,r,t,0,2*Math.PI),o.strokeWidth=1,o.stroke=this.stroke,o.strokeOpacity=0===i?.5:.2,o.fill=void 0,o});const a=this.root;a.append(s),this.gridLines.length>0&&a.append(this.gridLines),super.postConstruct()}},sm={chartType:"radialColumn",miniChart:class extends nm{constructor(e,t,i,o){super(e,t,"radialColumnTooltip"),this.data=[[6,8,10,2,6,5],[4,4,3,6,4,4],[5,4,2,9,8,9]],this.showRadiusAxisLine=!1;const{padding:n,size:s,data:r,agChartsExports:{_Scene:a}}=this,l=(s-2*n)/2,d=.4*l,c=new a.CategoryScale;c.domain=r[0].map((e,t)=>t),c.range=[0,2*Math.PI],c.paddingInner=0,c.paddingOuter=0;const u=.7*c.bandwidth,{processedData:h,max:p}=mv(r),g=new a.LinearScale;g.domain=[0,p],g.range=[d,l];const v=this.size/2;this.series=h.map((e,t)=>{const i=0===t?void 0:h[t-1],o=new a.TranslatableGroup({zIndex:1e6}),n=e.map((e,t)=>{const o=null===i||void 0===i?void 0:i[t],n=g.convert(e),s=g.convert(null!==o&&void 0!==o?o:0),r=c.convert(t),h=r+u,p=a.getRadialColumnWidth(r,h,l,.5,.5),v=new a.RadialColumnShape;return v.columnWidth=p,v.innerRadius=s,v.outerRadius=n,v.startAngle=r,v.endAngle=h,v.isBeveled=!0,v.axisInnerRadius=d,v.axisOuterRadius=l,v.stroke=void 0,v.strokeWidth=0,v});return o.append(n),o.translationX=v,o.translationY=v,o}),this.root.append(this.series),this.updateColors(i,o)}updateColors(e,t){this.series.forEach((i,o)=>{for(const n of i.children())n.fill=e[o%e.length],n.stroke=t[o%t.length]})}}},rm={chartType:"radialBar",miniChart:class extends nm{constructor(e,t,i,o){super(e,t,"radialBarTooltip"),this.data=[[6,8,10],[4,4,3],[5,4,2]],this.showRadiusAxisLine=!1;const{size:n,padding:s,data:r,agChartsExports:{_Scene:a}}=this,l=(n-s)/2,d=.4*l,c=new a.CategoryScale;c.domain=r[0].map((e,t)=>t),c.range=[d,l],c.paddingInner=.5,c.paddingOuter=0;const u=c.bandwidth,{processedData:h,max:p}=mv(r),g=new a.LinearScale;g.domain=[0,Math.ceil(1.5*p)];const v=1.5*Math.PI,m=v+2*Math.PI;g.range=[v,m];const f=n/2;this.series=h.map((e,t)=>{const i=t<0?void 0:h[t-1],o=new a.Group({zIndex:1e6}),n=e.map((e,t)=>{var o;const n=null!==(o=null===i||void 0===i?void 0:i[t])&&void 0!==o?o:0,s=c.convert(t),r=s-u,l=g.convert(n),d=g.convert(e),h=new a.Sector;return h.centerX=f,h.centerY=f,h.innerRadius=r,h.outerRadius=s,h.startAngle=l,h.endAngle=d,h.stroke=void 0,h.strokeWidth=0,h});return o.append(n),o}),this.root.append(this.series),this.updateColors(i,o)}updateColors(e,t){this.series.forEach((i,o)=>{for(const n of i.children())n.fill=e[o%e.length],n.stroke=t[o%t.length]})}}},am={chartType:"radarLine",miniChart:class extends nm{constructor(e,t,i,o){super(e,t,"radarLineTooltip"),this.markerSize=4,this.data=[[8,7,8,7,8,8,7,8],[6,8,5,10,6,7,4,6],[0,3,3,5,4,4,2,0]],this.showRadiusAxisLine=!1;const{size:n,padding:s,root:r,data:a}=this,l=(n-2*s)/2,{paths:d,markers:c}=vv(t,r,a,n,l,0,this.markerSize);this.lines=d,this.markers=c,this.updateColors(i,o)}updateColors(e,t){this.lines.forEach((i,o)=>{const n=this.data[o].length;i.stroke=e[o];const s=o*n,r=s+n,a=this.markers.slice(s,r);for(const l of a)l.stroke=t[o],l.fill=e[o]})}}},lm={chartType:"radarArea",miniChart:class extends nm{constructor(e,t,i,o){super(e,t,"radarAreaTooltip"),this.data=[[8,10,5,7,4,1,5,8],[1,1,2,7,7,8,10,1],[4,5,9,9,4,2,3,4]];const{size:n,padding:s,root:r,data:a}=this;this.showRadiusAxisLine=!1;const l=(n-2*s)/2,d=l-.3*n;this.areas=vv(t,r,a,n,l,d).paths,this.updateColors(i,o)}updateColors(e,t){this.areas.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o]})}}},dm={chartType:"nightingale",miniChart:class extends nm{constructor(e,t,i,o){super(e,t,"nightingaleTooltip"),this.data=[[6,10,9,8,7,8],[4,6,5,4,5,5],[3,5,4,3,4,7]],this.showRadiusAxisLine=!1;const{size:n,padding:s,data:r,agChartsExports:{_Scene:a}}=this,l=(n-2*s)/2,d=new a.CategoryScale;d.domain=r[0].map((e,t)=>t),d.range=[-Math.PI,Math.PI],d.paddingInner=0,d.paddingOuter=0;const c=.7*d.bandwidth,{processedData:u,max:h}=mv(r),p=new a.LinearScale;p.domain=[0,h],p.range=[0,l];const g=n/2;this.series=u.map((e,t)=>{const i=t<0?void 0:u[t-1],o=new a.Group({zIndex:1e6}),n=e.map((e,t)=>{const o=null===i||void 0===i?void 0:i[t],n=p.convert(e),s=p.convert(null!==o&&void 0!==o?o:0),r=d.convert(t),l=r+c,u=new a.Sector;return u.centerX=g,u.centerY=g,u.innerRadius=s,u.outerRadius=n,u.startAngle=r,u.endAngle=l,u.stroke=void 0,u.strokeWidth=0,u});return o.append(n),o}),this.root.append(this.series),this.updateColors(i,o)}updateColors(e,t){this.series.forEach((i,o)=>{for(const n of i.children())n.fill=e[o%e.length],n.stroke=t[o%t.length]})}}},cm={chartType:"rangeBar",miniChart:class extends Fv{constructor(e,t,i,o){super(e,t,"rangeBarTooltip");this.bars=this.createRangeBar(this.root,[3,3.5,3],this.size,this.padding,"vertical"),this.updateColors(i,o)}updateColors(e,t){this.bars.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o]})}createRangeBar(e,t,i,o,n){const s="horizontal"===n,r=2*o,{_Scene:a}=this.agChartsExports,l=new a.CategoryScale;l.domain=t.map((e,t)=>t),l.range=[o,i-o],l.paddingInner=.3,l.paddingOuter=.3;const d=new a.LinearScale;d.domain=[.7*t.reduce((e,t)=>Math.min(e,t),1/0),1.3*t.reduce((e,t)=>Math.max(e,t),0)],d.range=[r,i-r];const c=l.bandwidth,u=t.map((e,t)=>{const[i,o]=[.7*e,1.3*e],n=l.convert(t),r=d.convert(i),u=d.convert(o)-r,h=new a.Rect;return h.x=s?r:n,h.y=s?n:r,h.width=s?u:c,h.height=s?c:u,h.strokeWidth=0,h.crisp=!0,h});return e.append(u),u}}};function um(e){const{offset:t,length:i,pattern:o}=e,n=function(e,t,i){const{period:o}=i,n=e/o,s=[0,.5].map(e=>e-n).map(hm).sort((e,t)=>e-t);return Array.from({length:Math.floor(s.length*(o/t))},(e,t)=>s[t%s.length]+Math.floor(t/s.length)).map(e=>e*o).map(t=>r(t,e,i))}(t,i,o),s=i;return 0!==n.length&&0===n[0][0]||n.unshift(r(0,t,o)),n[n.length-1][0]!==s&&n.push(r(s,t,o)),n;function r(e,t,i){return[e,a(t+e,i)]}function a(e,t){const{low:i,high:o,period:n}=t,s=hm(e/n);return i+(o-i)*(s>.5?1-2*(s-.5):2*s)}}function hm(e){const t=e%1;return t<0?t+1:t}function pm(e,t,i){const o=[...e],n=o[t];return o[t]=o[i],o[i]=n,o}var gm={chartType:"rangeArea",miniChart:class extends Fv{constructor(e,t,i,o){super(e,t,"rangeAreaTooltip");const n=[um({offset:1.5,length:4,pattern:{low:3,high:5,period:4}}),um({offset:1.5,length:4,pattern:{low:2.25,high:4.25,period:4}}),um({offset:3,length:4,pattern:{low:2.5,high:4.5,period:4}})],s=n.map(e=>e.map(e=>{let[t,i]=e;return{x:t,low:i-.875,high:i+.875}})),{lines:r,areas:a}=this.createRangeArea(this.root,s,this.size,this.padding);this.lines=r,this.areas=a,this.updateColors(i,o)}updateColors(e,t){e=pm(e,1,2),t=pm(t,1,2),this.lines.forEach((e,i)=>{let[o,n]=e;o.fill=void 0,o.stroke=t[i],n.fill=void 0,n.stroke=t[i]}),this.areas.forEach((t,i)=>{t.fill=e[i]})}createRangeArea(e,t,i,o){const n=t.reduce((e,t)=>t.reduce((e,t)=>{let{x:i}=t;return Math.min(e,i)},e),1/0),s=t.reduce((e,t)=>t.reduce((e,t)=>{let{x:i}=t;return Math.max(e,i)},e),-1/0),r=t.reduce((e,t)=>t.reduce((e,t)=>{let{low:i}=t;return Math.min(e,i)},e),1/0),a=t.reduce((e,t)=>t.reduce((e,t)=>{let{high:i}=t;return Math.max(e,i)},e),-1/0),{_Scene:l}=this.agChartsExports,d=new l.LinearScale;d.domain=[n,s],d.range=[o,i-o];const c=2*o,u=new l.LinearScale;u.domain=[r,a],u.range=[i-c,c];const h=[],p=[];return t.map(e=>{const t=new l.Path,i=new l.Path,o=new l.Path;return h.push([t,i]),p.push(o),t.strokeWidth=0,i.strokeWidth=0,o.strokeWidth=0,o.fillOpacity=.8,t.path.clear(),i.path.clear(),o.path.clear(),e.map((e,n)=>{const{x:s,low:r,high:a}=e,l=d.convert(s),c=u.convert(r),h=u.convert(a),p=n>0?"lineTo":"moveTo";return t.path[p](l,h),i.path[p](l,c),o.path[p](l,h),[l,c]})}).forEach((e,t)=>{const i=e.length-1,o=p[t];for(let n=i;n>=0;n--){const[t,i]=e[n];o.path.lineTo(t,i)}}),e.append(p.concat(...h)),{lines:h,areas:p}}}},vm={chartType:"boxPlot",miniChart:class extends Fv{constructor(e,t,i,o,n){super(e,t,"boxPlotTooltip");const{size:s,padding:r,agChartsExports:{_Scene:a}}=this,l=[11,11.5,10.5],d=new a.LinearScale;d.domain=[.8*l.reduce((e,t)=>Math.min(e,t),1/0),1.2*l.reduce((e,t)=>Math.max(e,t),0)],d.range=[s-1.5*r,r];const c=new a.CategoryScale;c.domain=l.map((e,t)=>t),c.range=[r,s-r],c.paddingInner=.4,c.paddingOuter=.2;const u=Math.round(c.bandwidth),h=Math.round(c.bandwidth/2);this.boxPlotGroups=l.map((e,t)=>{const[i,o,n,s]=[.8*e,.9*e,1.1*e,1.2*e],r=Math.round(d.convert(n)),l=Math.round(c.convert(t)),p=Math.round(l+u),g=Math.round(d.convert(o)),v=Math.round(d.convert(i)),m=Math.round(d.convert(e)),f=Math.round(d.convert(s)),C=l+h,w=new a.Group,b=new a.Rect,y=new a.Line,S=new a.Line,x=new a.Line,F=new a.Line,R=new a.Line;return b.x=l,b.y=r,b.width=u,b.height=g-r,b.strokeWidth=1,b.strokeOpacity=.75,b.crisp=!0,this.setLineProperties(y,l,p,m,m),this.setLineProperties(S,C,C,f,r),this.setLineProperties(x,C,C,v,g),this.setLineProperties(F,l,p,f,f),this.setLineProperties(R,l,p,v,v),w.append([b,y,S,x,F,R]),w}),this.updateColors(i,o,n),this.root.append(this.boxPlotGroups)}updateColors(e,t,i){const{_Theme:o}=this.agChartsExports;this.boxPlotGroups.forEach((n,s)=>{for(const r of n.children()){const n=e[s%e.length];r.fill=i?n:o.resolveOperation({$mix:[n,{$ref:"backgroundColor"},.7]}),r.stroke=t[s%t.length]}})}setLineProperties(e,t,i,o,n){e.x1=t,e.x2=i,e.y1=o,e.y2=n,e.strokeOpacity=.75}}},mm={chartType:"treemap",miniChart:class extends ov{constructor(e,t,i,o,n){super(e,t,"treemapTooltip");const{size:s,padding:r,agChartsExports:{_Scene:a}}=this,l=[[1,1],[3,2,1]],d=l.length%2===0?.3:.2,c=[r,s-r],u=l.length,h=u*(u+1)/2,p=d/(u-1),g=c[1]-c[0],v=g-d;let m=c[0];this.rects=l.reduce((e,t,i)=>{null!==e&&void 0!==e||(e=[]);const o=v*((u-i)/h),n=t.length,s=t.reduce((e,t)=>e+t,0),r=d/(n-1||1),l=n>1?g-d:g;let f=c[0];const C=t.map(e=>{const t=new a.Rect,i=l*e/s;return t.x=m,t.y=f,t.width=o,t.height=i,t.strokeWidth=.75,t.crisp=!0,f+=i+r,t});return m+=o+p,e.push(...C),e},[]),this.updateColors(i,o,n);const f=new a.Group;f.setClipRect(new a.BBox(r,r,s-r,s-r)),f.append(this.rects),this.root.append(f)}updateColors(e,t,i){const{_Theme:o}=this.agChartsExports;this.rects.forEach((n,s)=>{n.fill=e[s%t.length],n.stroke=i?t[s%t.length]:o.resolveOperation({$ref:"backgroundColor"})})}}},fm={chartType:"sunburst",miniChart:class extends nm{constructor(e,t,i,o){super(e,t,"sunburstTooltip"),this.data=[[[],[]],[[],[]],[[],[]]],this.angleOffset=-Math.PI/2,this.innerRadiusRatio=0,this.showRadiusAxisLine=!1,this.showAngleAxisLines=!1;const{data:n,size:s,padding:r,angleOffset:a,innerRadiusRatio:l,agChartsExports:{_Scene:d}}=this,c=(s-2*r)/2,u=[a+0,a+2*Math.PI],h=Math.abs(u[1]-u[0]),p=[c*l,c],g=Math.abs(p[1]-p[0]);let v=0;const m=(e,t)=>{for(const i of e){const e=t+1;v=Math.max(v,e),m(i,e)}};m(n,0);const f=g/v,C=this.size/2,w=u[0];this.series=[];const b=(e,t,i,o,n)=>{if(!Array.isArray(e))return;const s=t+1;let r=i;e.forEach((e,i,a)=>{let l=n;l||(l=new d.Group,this.series.push(l));const c=p[0]+t*f,u=p[0]+s*f,h=1/a.length,g=r,v=g+o*h,m=new d.Sector;m.centerX=C,m.centerY=C,m.innerRadius=c,m.outerRadius=u,m.startAngle=g,m.endAngle=v,m.stroke=void 0,m.strokeWidth=0,m.inset=.75,r=v,l.append(m),b(e,s,g,Math.abs(v-g),l)})};b(n,0,w,h),this.root.append(this.series),this.updateColors(i,o)}updateColors(e,t){this.series.forEach((i,o)=>{for(const n of i.children())n.fill=e[o%e.length],n.stroke=t[o%t.length]})}}},Cm={chartType:"heatmap",miniChart:class extends ov{constructor(e,t,i,o,n){var s,r;super(e,t,"heatmapTooltip");const{size:a,padding:l,agChartsExports:{_Scene:d}}=this,c=Array.from({length:3},(e,t)=>Array.from({length:3},(e,t)=>t)),u=c.map((e,t)=>t),h=new d.CategoryScale;h.domain=u,h.range=[l,a-l],h.paddingInner=.01,h.paddingOuter=.1;const p=new d.CategoryScale;p.domain=u,p.range=[l,a-l],p.paddingInner=.01,p.paddingOuter=.1;const g=null!==(s=h.bandwidth)&&void 0!==s?s:0,v=null!==(r=p.bandwidth)&&void 0!==r?r:0;this.rects=c.reduce((e,t,i)=>{null!==e&&void 0!==e||(e=[]);const o=t.map((e,t)=>{const o=new d.Rect;return o.x=h.convert(i),o.y=p.convert(t),o.width=g,o.height=v,o.strokeWidth=0,o.crisp=!0,o});return e.push(...o),e},[]),this.updateColors(i,o,n);const m=new d.Group;m.setClipRect(new d.BBox(l,l,a-l,a-l)),m.append(this.rects),this.root.append(m)}updateColors(e,t,i){const{_Theme:o,_Util:n}=this.agChartsExports,s=i?[e[0],e[1]]:o.resolveOperation({$palette:"divergingColors"}),r=i?t[0]:o.resolveOperation({$ref:"backgroundColor"}),a=n.interpolateColor(s[0],s[1]);this.rects.forEach((e,t)=>{e.fill=a(.2*t),e.stroke=r})}}},wm={chartType:"waterfall",miniChart:class extends Fv{constructor(e,t,i,o,n){super(e,t,"waterfallTooltip"),this.data=[4,3,-3,6,-3],this.bars=this.createWaterfall(this.root,this.data,this.size,this.padding,"vertical").bars,this.updateColors(i,o,n)}updateColors(e,t,i){const{data:o,agChartsExports:{_Theme:n}}=this,s={fill:i?e[0]:n.resolveOperation({$palette:"altUp.fill"}),stroke:i?t[0]:n.resolveOperation({$palette:"altUp.stroke"})},r={fill:i?e[1]:n.resolveOperation({$palette:"altDown.fill"}),stroke:i?t[1]:n.resolveOperation({$palette:"altDown.stroke"})};this.bars.forEach((e,t)=>{const i=o[t]>=0;e.fill=i?s.fill:r.fill,e.stroke=i?s.stroke:r.stroke})}createWaterfall(e,t,i,o,n){const s=2*o,{processedData:r,min:a,max:l}=mv(t.map(e=>[e])),d=r.reduce((e,t)=>e.concat(t),[]),{_Scene:c}=this.agChartsExports,u=new c.LinearScale;u.domain=[Math.min(a,0),l],u.range=[i-s,s];const h=new c.CategoryScale;h.domain=t.map((e,t)=>t),h.range=[o,i-o],h.paddingInner=.2,h.paddingOuter=.3;const p=h.bandwidth,g=new c.Path;g.stroke="#575757",g.strokeWidth=0;const v=Math.floor(g.strokeWidth)%2/2,m=g.path;m.clear();const f="horizontal"===n,C=d.map((e,i)=>{const o=i>0?d[i-1]:0,n=t[i]>0,s=Math.round(u.convert(e)),r=Math.round(u.convert(o)),a=(n?s:r)-v,l=(n?r:s)+v,g=Math.abs(l-a),C=h.convert(i),w=new c.Rect;w.x=f?a:C,w.y=f?C:a,w.width=f?g:p,w.height=f?p:g,w.strokeWidth=0,w.crisp=!0;const b=s+v,y=r+v;if(i>0){const e=f?y:w.x,t=f?w.y:y;m.lineTo(e,t)}const S=f?b:w.x,x=f?w.y:b;return m.moveTo(S,x),w});return e.append([g,...C]),{bars:C}}}},bm={chartType:"columnLineCombo",miniChart:class extends Fv{constructor(e,t,i,o){super(e,t,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:n,columnData:s,lineData:r,size:a,padding:l}=this;this.columns=nv({stacked:!1,root:n,data:s,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5,agChartsExports:t}),n.append(this.columns),this.lines=hv(t,n,r,a,l),this.updateColors(i,o)}updateColors(e,t){this.columns.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o]}),this.lines.forEach((t,i)=>{t.stroke=e[i+2]})}}},ym={chartType:"areaColumnCombo",miniChart:class extends Fv{constructor(e,t,i,o){super(e,t,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];const{root:n,columnData:s,areaData:r,size:a,padding:l,agChartsExports:{_Scene:d}}=this;this.columns=nv({stacked:!1,root:n,data:s,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5,agChartsExports:t});const c=new d.CategoryScale;c.range=[l,a-l],c.domain=[0,1,2,3,4],c.paddingInner=1,c.paddingOuter=0;const u=new d.LinearScale;u.range=[a-l,l],u.domain=[0,6];const h=[],p=u.convert(0),g=c.convert(0);r.forEach((e,t)=>{const i=h[t]||(h[t]=[]);e.forEach((e,t)=>{const o=e,n=t,s=c.convert(n),r=u.convert(o);i[t]={x:s,y:r}});const o=c.convert(e.length-1);h[t].push({x:o,y:p},{x:g,y:p})}),this.areas=h.map(e=>{const t=new d.Path;t.strokeWidth=0,t.fillOpacity=.8;const i=t.path;return e.forEach((e,t)=>i[t>0?"lineTo":"moveTo"](e.x,e.y)),t});const v=new d.Group;v.setClipRect(new d.BBox(l,l,a-2*l,a-2*l));const m=new d.Group;m.setClipRect(new d.BBox(l,l,a-2*l,a-2*l)),v.append(this.areas),m.append(this.columns),n.append(v),n.append(m),this.updateColors(i,o)}updateColors(e,t){this.areas.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o]}),this.columns.forEach((i,o)=>{i.fill=e[o+1],i.stroke=t[o+1]})}}},Sm={columnGroup:{column:{range:!0,pivot:!0,enterprise:!1,icon:Rv},stackedColumn:{range:!0,pivot:!0,enterprise:!1,icon:Ev},normalizedColumn:{range:!0,pivot:!0,enterprise:!1,icon:Mv}},barGroup:{bar:{range:!0,pivot:!0,enterprise:!1,icon:Tv},stackedBar:{range:!0,pivot:!0,enterprise:!1,icon:Lv},normalizedBar:{range:!0,pivot:!0,enterprise:!1,icon:Ov}},pieGroup:{pie:{range:!0,pivot:!0,enterprise:!1,icon:Vv},donut:{range:!0,pivot:!0,enterprise:!1,icon:Bv},doughnut:{range:!0,pivot:!0,enterprise:!1,icon:Bv}},lineGroup:{line:{range:!0,pivot:!0,enterprise:!1,icon:Wv},stackedLine:{range:!0,pivot:!0,enterprise:!1,icon:jv},normalizedLine:{range:!0,pivot:!0,enterprise:!1,icon:Kv}},scatterGroup:{scatter:{range:!0,pivot:!0,enterprise:!1,icon:Yv},bubble:{range:!0,pivot:!0,enterprise:!1,icon:qv}},areaGroup:{area:{range:!0,pivot:!0,enterprise:!1,icon:$v},stackedArea:{range:!0,pivot:!0,enterprise:!1,icon:em},normalizedArea:{range:!0,pivot:!0,enterprise:!1,icon:im}},polarGroup:{radarLine:{range:!0,pivot:!1,enterprise:!0,icon:am},radarArea:{range:!0,pivot:!1,enterprise:!0,icon:lm},nightingale:{range:!0,pivot:!1,enterprise:!0,icon:dm},radialColumn:{range:!0,pivot:!1,enterprise:!0,icon:sm},radialBar:{range:!0,pivot:!1,enterprise:!0,icon:rm}},statisticalGroup:{boxPlot:{range:!0,pivot:!1,enterprise:!0,icon:vm},histogram:{range:!0,pivot:!1,enterprise:!1,icon:om},rangeBar:{range:!0,pivot:!1,enterprise:!0,icon:cm},rangeArea:{range:!0,pivot:!1,enterprise:!0,icon:gm}},hierarchicalGroup:{treemap:{range:!0,pivot:!0,enterprise:!0,icon:mm},sunburst:{range:!0,pivot:!0,enterprise:!0,icon:fm}},specializedGroup:{heatmap:{range:!0,pivot:!1,enterprise:!0,icon:Cm},waterfall:{range:!0,pivot:!1,enterprise:!0,icon:wm}},combinationGroup:{columnLineCombo:{range:!0,pivot:!0,enterprise:!1,icon:bm},areaColumnCombo:{range:!0,pivot:!0,enterprise:!1,icon:ym},customCombo:{range:!0,pivot:!0,enterprise:!1,icon:{chartType:"customCombo",miniChart:class extends ov{constructor(e,t,i,o){super(e,t,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:n,columnData:s,lineData:r,size:a,padding:l,agChartsExports:{_Scene:d}}=this;this.columns=nv({stacked:!1,root:n,data:s,size:a,padding:l,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5,agChartsExports:t}),n.append(this.columns),this.lines=hv(this.agChartsExports,n,r,a,l);const c="grey",u=new d.Line;u.x1=l,u.y1=l,u.x2=l,u.y2=a-l+3,u.stroke=c;const h=new d.Line;h.x1=l-3+1,h.y1=a-l,h.x2=a-l+1,h.y2=a-l,h.stroke=c;const p=new d.Path;this.buildPenIconPath(p),p.fill="whitesmoke",p.stroke="darkslategrey",p.strokeWidth=1,n.append([h,u,p]),this.updateColors(i,o)}updateColors(e,t){this.columns.forEach((i,o)=>{i.fill=e[o],i.stroke=t[o]}),this.lines.forEach((t,i)=>{t.stroke=e[i+2]})}buildPenIconPath(e){const{path:t}=e;t.moveTo(25.76,43.46),t.lineTo(31.27,48.53),t.moveTo(49.86,22),t.lineTo(49.86,22),t.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),t.lineTo(46.86,21.41),t.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),t.lineTo(25.51,43.8),t.lineTo(25.43,43.89),t.lineTo(23.01,51.89),t.lineTo(22.83,52.46),t.lineTo(31.02,48.86),t.lineTo(49.02,28.52),t.lineTo(49.02,28.52),t.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),t.lineTo(50.75,24.93),t.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),t.closePath(),t.moveTo(41.76,25.5),t.lineTo(47.34,30.5),t.moveTo(40.74,26.65),t.lineTo(46.25,31.71)}}}}},funnelGroup:{funnel:{range:!0,pivot:!1,enterprise:!0,icon:wv},coneFunnel:{range:!0,pivot:!1,enterprise:!0,icon:yv},pyramid:{range:!0,pivot:!1,enterprise:!0,icon:xv}}},xm={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line","stackedLine","normalizedLine"],areaGroup:["area","stackedArea","normalizedArea"],scatterGroup:["scatter","bubble"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],funnelGroup:["funnel","coneFunnel","pyramid"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},Fm=class extends s.uAl{constructor(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xm;super('<div class="ag-chart-settings-mini-wrapper"></div>'),this.wrappers=new Map,this.chartController=e,this.fills=t,this.strokes=i,this.isCustomTheme=o,this.chartGroups=(0,n.A)({},s)}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(e=>"customCombo"!==e));const e=this.getGui(),t=this.chartController.isEnterprise(),i=this.chartController.isPivotChart(),o=!i,n=Object.keys(this.chartGroups).map(e=>{var n;const r=e in Sm?Sm[e]:void 0;if(!r)return(0,s.ujB)(148,{group:e}),null;const a=(null!==(n=this.chartGroups[e])&&void 0!==n?n:[]).map(n=>{const a=n in r?r[n]:void 0;return a?!t&&a.enterprise?null:o&&a.range||i&&a.pivot?a:null:((0,s.ujB)(149,{group:e,chartType:n}),null)}).filter(e=>null!=e);return 0===a.length?null:{label:this.chartTranslation.translate(e),items:a}}).filter(e=>null!=e);for(const{label:r,items:a}of n){const t=this.createBean(new Ei({title:r,suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal",suppressKeyboardNavigation:!0}));for(const e of a){const{miniChart:i,chartType:o}=e.icon,n=document.createElement("div");n.classList.add("ag-chart-mini-thumbnail"),n.setAttribute("tabindex","0"),n.setAttribute("role","button");const r=o,a=()=>{this.chartController.setChartType(r),this.updateSelectedMiniChart()};this.addManagedListeners(n,{click:a,keydown:e=>{e.key!=s.DDm.ENTER&&e.key!==s.DDm.SPACE||(e.preventDefault(),a())}}),this.wrappers.set(r,n),this.createBean(new i(n,this.beans.agChartsExports,this.fills,this.strokes,this.isCustomTheme)),t.addItem(n)}e.appendChild(t.getGui())}this.updateSelectedMiniChart()}updateSelectedMiniChart(){const e=this.chartController.getChartType();this.wrappers.forEach((t,i)=>{const o=i===e;t.classList.toggle("ag-selected",o);const n=this.chartTranslation.translate(zh(i)),r=o?"".concat(n,". ").concat(this.chartTranslation.translate("ariaChartSelected")):n;(0,s.PIC)(t,r)})}destroy(){this.wrappers.clear(),super.destroy()}},Rm=class extends s.uAl{constructor(e){super('<div class="ag-chart-settings-wrapper">\n            <div data-ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div data-ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div data-ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div data-ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div data-ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>'),this.chartController=e,this.eMiniChartsContainer=s.dRA,this.eNavBar=s.dRA,this.eCardSelector=s.dRA,this.ePrevBtn=s.dRA,this.eNextBtn=s.dRA,this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[]}postConstruct(){this.resetPalettes();const e=this.gos.get("enableRtl");this.ePrevBtn.insertAdjacentElement("afterbegin",(0,s.asF)(e?"chartsThemeNext":"chartsThemePrevious",this.beans)),this.eNextBtn.insertAdjacentElement("afterbegin",(0,s.asF)(e?"chartsThemePrevious":"chartsThemeNext",this.beans)),this.addManagedElementListeners(this.ePrevBtn,{click:()=>this.setActivePalette(this.getPrev(),"left")}),this.addManagedElementListeners(this.eNextBtn,{click:()=>this.setActivePalette(this.getNext(),"right")});const t=()=>this.resetPalettes(!0);this.addManagedListeners(this.chartController,{chartTypeChanged:t,chartApiUpdate:t}),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{const e=this.miniChartsContainers.find(e=>!e.getGui().classList.contains("ag-hidden")).getGui().querySelector(".ag-selected");if(e){const t=e.offsetParent;t&&this.eMiniChartsContainer.scrollTo(0,t.offsetTop)}},250)}resetPalettes(e){var t;const i=this.chartController.getPalettes(),o=null===(t=this.gos.get("chartToolPanelsDef"))||void 0===t||null===(t=t.settingsPanel)||void 0===t?void 0:t.chartGroupsDef;if((0,s.MpY)(i,this.palettes)&&!e||this.isAnimating)return;this.palettes=i,this.themes=this.chartController.getThemeNames(),this.activePaletteIndex=this.themes.findIndex(e=>e===this.chartController.getChartThemeName()),this.cardItems=[],(0,s.fDi)(this.eCardSelector),this.destroyMiniCharts();const{themes:n}=this;this.palettes.forEach((e,t)=>{const i=this.activePaletteIndex===t,{fills:s=[],strokes:r=[]}=e,a=!jh(n[t],this.beans.agChartsExports._Theme),l=this.createBean(new Fm(this.chartController,s,r,a,o));this.miniChartsContainers.push(l),this.eMiniChartsContainer.appendChild(l.getGui()),this.addCardLink(t),i?l.updateSelectedMiniChart():l.setDisplayed(!1)}),(0,s.nl0)(this.eNavBar,this.palettes.length>1),(0,s.eUX)(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")}addCardLink(e){const t=document.createElement("div");t.classList.add("ag-chart-settings-card-item"),this.addManagedElementListeners(t,{click:()=>{this.setActivePalette(e,e<this.activePaletteIndex?"left":"right")}}),this.eCardSelector.appendChild(t),this.cardItems.push(t)}getPrev(){let e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e}getNext(){let e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e}setActivePalette(e,t){if(this.isAnimating||this.activePaletteIndex===e)return;(0,s.eUX)(this.cardItems[e],"ag-selected","ag-not-selected");const i=this.miniChartsContainers[this.activePaletteIndex],o=i.getGui(),n=this.miniChartsContainers[e],r=n.getGui();i.updateSelectedMiniChart(),n.updateSelectedMiniChart();const a="left"===t?-1:1,l=r.style.left="".concat((0,s.jPA)(this.getGui())*a,"px");this.activePaletteIndex=e,this.isAnimating=!0;const d="ag-animating";n.setDisplayed(!0),i.addCss(d),n.addCss(d),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(()=>{o.style.left="".concat(-parseFloat(l),"px"),r.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,i.removeCss(d),n.removeCss(d),i.setDisplayed(!1)},300)}destroyMiniCharts(){(0,s.fDi)(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}},Pm=class extends s.uAl{constructor(e,t){super(),this.panels=e,this.chartMenuContext=t,this.tabs=[]}wireBeans(e){this.chartTranslation=e.chartTranslation}postConstruct(){for(const e of this.panels){const t=e.replace("chart","").toLowerCase(),i=this.createPanel(t),o=this.createTab(e,t,i);this.tabs.push(o),this.addDestroyFunc(()=>this.destroyBean(i))}this.tabbedLayout=new Di({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0,suppressFocusBodyOnOpen:!0,suppressTrapFocus:!0,enableCloseButton:!0,closeButtonAriaLabel:this.chartTranslation.translate("ariaChartMenuClose"),onCloseClicked:()=>{var e;null===(e=this.eventSource)||void 0===e||e.focus({preventScroll:!0}),this.dispatchLocalEvent({type:"closed"})}}),this.createBean(this.tabbedLayout)}createTab(e,t,i){const o=(0,s.UCw)({tag:"div",cls:"ag-chart-tab ag-chart-".concat(t)});this.createBean(i),o.appendChild(i.getGui());const n=this.chartTranslation.translate(t);return{title:(0,s.UCw)({tag:"div",children:n}),titleLabel:n,bodyPromise:s.oY$.resolve(o),getScrollableContainer:()=>o.querySelector(".ag-scrollable-container")||o,name:e}}showTab(e){const t=this.tabs[e];this.tabbedLayout.showItem(t)}getGui(){var e;return null===(e=this.tabbedLayout)||void 0===e?void 0:e.getGui()}showMenu(e,t){var i;(this.eventSource=e,t)||(null===(i=this.tabbedLayout)||void 0===i||i.focusHeader(!0))}destroy(){var e;null!==(e=this.parentComponent)&&void 0!==e&&e.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}createPanel(e){switch(e){case"data":return new fg(this.chartMenuContext);case"format":return new iv(this.chartMenuContext);default:return new Rm(this.chartMenuContext.chartController)}}},Dm=class extends s.uAl{constructor(e,t,i){super('<div class="ag-chart-menu-wrapper"></div>'),this.eChartContainer=e,this.eMenuPanelContainer=t,this.chartMenuContext=i,this.buttons={chartLink:{iconName:"linked",callback:()=>this.chartMenuSvc.toggleLinked(this.chartMenuContext)},chartUnlink:{iconName:"unlinked",callback:()=>this.chartMenuSvc.toggleLinked(this.chartMenuContext)},chartDownload:{iconName:"chartsDownload",callback:()=>this.chartMenuSvc.downloadChart(this.chartMenuContext)},chartMenu:{iconName:"chartsMenu",callback:e=>this.showMenuList(e)}},this.panels=[],this.menuVisible=!1,this.chartController=i.chartController}wireBeans(e){this.chartMenuSvc=e.chartMenuSvc,this.chartMenuListFactory=e.chartMenuListFactory}postConstruct(){this.chartToolbar=this.createManagedBean(new rg),this.getGui().appendChild(this.chartToolbar.getGui()),this.refreshToolbarAndPanels(),this.addManagedEventListeners({chartCreated:e=>{if(e.chartId===this.chartController.getChartId()){var t;Boolean(null===(t=this.gos.get("chartToolPanelsDef"))||void 0===t?void 0:t.defaultToolPanel)&&this.showMenu({panel:this.defaultPanel,suppressFocus:!0})}}}),this.addManagedListeners(this.chartController,{chartLinkedChanged:this.refreshToolbarAndPanels.bind(this)}),this.refreshMenuClasses(),this.addManagedListeners(this.chartController,{chartApiUpdate:this.refreshToolbarAndPanels.bind(this)})}isVisible(){return this.menuVisible}getExtraPaddingDirections(){return["chartMenu","chartLink","chartUnlink","chartDownload"].some(e=>this.chartToolbarOptions.includes(e))?["top"]:[]}refreshToolbarAndPanels(){this.initToolbarOptionsAndPanels(),this.updateToolbar()}initToolbarOptionsAndPanels(){const{panels:e,defaultPanel:t}=this.chartMenuSvc.getChartToolPanels(this.chartController);this.panels=e,this.defaultPanel=t,this.chartToolbarOptions=this.chartMenuSvc.getChartToolbarOptions()}updateToolbar(){const e=this.chartToolbarOptions.map(e=>{const{iconName:t,callback:i}=this.buttons[e];return{buttonName:e,iconName:t,callback:i}});this.chartToolbar.updateParams({buttons:e})}createMenuPanel(e){const t=this.menuPanel=this.createBean(new mi({height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return t.setParentComponent(this),this.eMenuPanelContainer.appendChild(t.getGui()),this.tabbedMenu=this.createBean(new Pm(this.panels,this.chartMenuContext)),this.addManagedListeners(this.tabbedMenu,{closed:()=>{this.hideMenu()}}),this.addManagedListeners(t,{destroyed:()=>this.destroyBean(this.tabbedMenu)}),new s.oY$(i=>{window.setTimeout(()=>{t.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),i(t)},100)})}showContainer(e,t){this.menuPanel&&(this.menuVisible=!0,this.refreshMenuClasses(),this.tabbedMenu.showMenu(e,t))}showMenu(e){const{panel:t,eventSource:i,suppressFocus:o}=null!==e&&void 0!==e?e:{};if(this.menuPanel&&!t)this.showContainer(i,o);else{const e=t||this.defaultPanel;let n=this.panels.indexOf(e);n<0&&((0,s.ujB)(143,{panel:t}),n=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(n),this.showContainer(i,o)):this.createMenuPanel(n).then(()=>this.showContainer(i,o))}}hideMenu(){this.menuVisible=!1,this.refreshMenuClasses()}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible)}showMenuList(e){this.chartMenuListFactory.showMenuList({eventSource:e,showMenu:()=>this.showMenu({eventSource:e}),chartMenuContext:this.chartMenuContext})}destroy(){var e,t;super.destroy(),null!==(e=this.menuPanel)&&void 0!==e&&e.isAlive()&&this.destroyBean(this.menuPanel),null!==(t=this.tabbedMenu)&&void 0!==t&&t.isAlive()&&this.destroyBean(this.tabbedMenu)}},Em=["number","category","time","grouped-category"],Am=[...Em,"angle-category","angle-number","radius-category","radius-number"],Mm=class extends s.XQb{constructor(e){super(),this.chartController=e}getChartThemeOverridesProxy(){return{getValue:e=>this.getChartOption(e),setValue:(e,t)=>this.setChartThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setChartThemeOverrides(e)}}getAxisThemeOverridesProxy(){return{getValue:e=>this.getAxisProperty(e),setValue:(e,t)=>this.setAxisThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setAxisThemeOverrides(e)}}getCartesianAxisOptionsProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,i)=>this.setCartesianAxisOptions(e,[{expression:t,value:i}]),setValues:t=>this.setCartesianAxisOptions(e,t),clearValue:(t,i)=>this.clearCartesianAxisOptions(e,t,i)}}getCartesianAxisThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,i)=>this.setCartesianAxisThemeOverrides(e,[{expression:t,value:i}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getCartesianAxisAppliedThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisThemeOverride(e,"*"===t?null:t),setValue:(t,i)=>this.setCartesianAxisThemeOverrides(e,[{expression:"*"===t?null:t,value:i}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getSeriesOptionsProxy(e){return{getValue:(t,i)=>this.getSeriesOption(e(),t,i),setValue:(t,i)=>this.setSeriesOptions(e(),[{expression:t,value:i}]),setValues:t=>this.setSeriesOptions(e(),t)}}getPersistedChartThemeOverrides(e,t,i,o){const n=this.getRetainedChartThemeOverrideKeys(i,o),s=this.getRetainedChartAxisThemeOverrideKeys(null,i,o),r=this.createChartOptions();for(const a of n){const t=this.retrieveChartOptionsThemeOverride(e,i,a);void 0!==t&&this.assignChartOptionsThemeOverride(r,o,a,t)}return t&&this.assignPersistedAxisOverrides({existingAxes:t,retainedChartAxisThemeOverrideKeys:s,existingChartOptions:e,targetChartOptions:r,existingChartType:i,targetChartType:o}),r.theme.overrides}assignPersistedAxisOverrides(e){const{existingAxes:t,retainedChartAxisThemeOverrideKeys:i,existingChartOptions:o,targetChartOptions:n,existingChartType:s,targetChartType:r}=e;for(const{expression:a,targetAxisTypes:l}of i)for(const e of t.map(e=>e.type)){const t=this.retrieveChartOptionsThemeOverride(o,s,["axes",e,a].join("."));if(void 0!==t)for(const e of l)this.assignChartOptionsThemeOverride(n,r,["axes",e,a].join("."),t)}}getRetainedChartThemeOverrideKeys(e,t){const i=["zoom","navigator"];return["animation",...((e,t)=>{const o=new Array;return Mh(Oh(e))&&Mh(Oh(t))&&o.push(...i),o})(e,t)]}getRetainedChartAxisThemeOverrideKeys(e,t,i){if(Mh(Oh(t))&&Mh(Oh(i))){return this.getRetainedCartesianAxisThemeOverrideKeys(e).map(e=>({expression:e,targetAxisTypes:Em}))}return[]}getRetainedCartesianAxisThemeOverrideKeys(e){const t="xAxis"===e?["",".top",".bottom"]:"yAxis"===e?["",".left",".right"]:["",".left",".right",".top",".bottom"],i=["crosshair"],o=new Array;for(const n of i)for(const e of t)o.push("".concat(n).concat(e));return o}getChartOption(e){return Sh(this.getChart(),e,void 0)}setChartThemeOverrides(e){const t=this.getChartType(),i=this.createChartOptions();for(const{expression:o,value:n}of e)this.assignChartOptionsThemeOverride(i,t,o,n);this.applyChartOptions(i)}applyChartOptions(e,t){if(0===Object.keys(e).length)return;this.updateChart(e);!(null!==t&&void 0!==t&&t.silent)&&this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(e=>(0,s.CkN)(108,{e:e}))}getAxisProperty(e){var t;return Sh(null===(t=this.getChart().axes)||void 0===t?void 0:t.x,e,void 0)}setAxisThemeOverrides(e){const t=this.getChart(),i=this.getChartType(),o=this.createChartOptions();for(const{expression:s,value:r}of e){var n;const e=Object.values(null!==(n=t.axes)&&void 0!==n?n:{}).filter(e=>{const t=s.split(".");let i=e;for(const o of t){if(!(o in i))return!1;i=i[o]}return!0});if(e)for(const t of e)this.isValidAxisType(t)&&this.assignChartAxisThemeOverride(o,i,t.type,null,s,r)}this.applyChartOptions(o)}getCartesianAxisProperty(e,t){const i=this.getChartAxes();return Sh(this.getCartesianAxis(i,e),t,void 0)}getCartesianAxisThemeOverride(e,t){const i=this.getChartAxes(),o=this.getCartesianAxis(i,e);if(!o||!this.isValidAxisType(o))return;const n=this.getChartType(),s=this.getChart().getOptions();return this.retrieveChartAxisThemeOverride(s,n,o.type,"yAxis"===e?["left","right"]:["bottom","top"],t)}setCartesianAxisThemeOverrides(e,t){const i=this.getChartAxes(),o=this.getCartesianAxis(i,e);if(!o||!this.isValidAxisType(o))return;const n=this.getChartType(),s=this.createChartOptions();for(const{expression:r,value:a}of t)this.assignChartAxisThemeOverride(s,n,o.type,"yAxis"===e?["left","right"]:["bottom","top"],r,a);this.applyChartOptions(s)}setCartesianAxisOptions(e,t){this.updateCartesianAxisOptions(e,i=>{const o="yAxis"===e?"y":"x";for(const{expression:e,value:n}of t)this.assignChartOption(i,"axes.".concat(o,".").concat(e),n)})}clearCartesianAxisOptions(e,t,i){this.updateCartesianAxisOptions(e,o=>{const n="yAxis"===e?"y":"x";this.clearChartOption(o,"axes.".concat(n,".").concat(t),i)})}updateCartesianAxisOptions(e,t){const i=this.getChart().getOptions(),o="axes"in i?i.axes:void 0;if(!i||!o)return;const n=this.getChartAxes(),s=this.getCartesianAxis(n,e);if(!s)return;const r=this.createChartOptions();r.axes=o,t(r,s,i),this.applyChartOptions(r)}setCartesianCategoryAxisType(e,t){this.updateCartesianAxisOptions(e,(i,o,n)=>{const s=this.getChartType();this.assignPersistedAxisOverrides({existingAxes:[o],retainedChartAxisThemeOverrideKeys:this.getRetainedChartAxisThemeOverrideKeys(e,s,s),existingChartOptions:n,targetChartOptions:i,existingChartType:s,targetChartType:s}),this.assignChartOption(i,"axes.x.type",t),this.chartController.setCategoryAxisType(t)})}getCartesianAxis(e,t){if(!(e.length<2))switch(t){case"xAxis":return"x"===e[0].direction?e[0]:e[1];case"yAxis":return"y"===e[1].direction?e[1]:e[0]}}getSeriesOption(e,t,i){const o=this.getChart().series.find(t=>function(e,t){return function(e){return!!Ph[e]}(e)&&t.type===e}(e,t));return Sh(i?o:null===o||void 0===o?void 0:o.properties.toJson(),t,void 0)}setSeriesOptions(e,t){const i=this.createChartOptions();for(const{expression:o,value:n}of t)this.assignChartOptionsSeriesThemeOverride(i,e,"series.".concat(o),n);this.applyChartOptions(i)}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getChartAxes(){var e;const t=this.getChart();return Object.values(null!==(e=t.axes)&&void 0!==e?e:{})}retrieveChartAxisThemeOverride(e,t,i,o,n){if(!o)return this.retrieveChartOptionsThemeOverride(e,t,["axes",i,...n?[n]:[]].join("."));for(const s of o){const o=this.retrieveChartOptionsThemeOverride(e,t,["axes",i,s,...n?[n]:[]].join("."));if(void 0!==o)return o}}assignChartAxisThemeOverride(e,t,i,o,n,s){if(o)for(const r of o)this.assignChartOptionsThemeOverride(e,t,["axes",i,r,...n?[n]:[]].join("."),s);else this.assignChartOptionsThemeOverride(e,t,["axes",i,...n?[n]:[]].join("."),s)}isValidAxisType(e){return Am.includes(e.type)}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){const t=this.chartController.getChartProxy().getChartRef();t.skipAnimations(),t.updateDelta(e)}createChartOptions(){return{theme:{overrides:{}}}}retrieveChartOptionsThemeOverride(e,t,i){const o=this.getChartThemeOverridesSeriesTypeKeys(t);for(const n of o){const t=this.retrieveChartOptionsSeriesThemeOverride(e,n,i);if(void 0!==t)return t}}assignChartOptionsThemeOverride(e,t,i,o){const n=this.getChartThemeOverridesSeriesTypeKeys(t);for(const s of n)this.assignChartOptionsSeriesThemeOverride(e,s,i,o)}retrieveChartOptionsSeriesThemeOverride(e,t,i){return this.retrieveChartOption(e,["theme","overrides",t,...i?[i]:[]].join("."))}assignChartOptionsSeriesThemeOverride(e,t,i,o){this.assignChartOption(e,["theme","overrides",t,...i?[i]:[]].join("."),o)}getChartThemeOverridesSeriesTypeKeys(e){const t=this.chartController.getChartSeriesTypes(e);return this.chartController.isComboChart()&&t.push("common"),t}retrieveChartOption(e,t){return Sh(e,t,void 0)}assignChartOption(e,t,i){!function(e,t,i){if(null==e)return;const o=t.split(".");let n=e;o.filter(e=>!yh.has(e)).forEach((e,t)=>{n[e]||(n[e]={}),t<o.length-1&&(n=n[e])}),n[o[o.length-1]]=i}(e,t,i)}clearChartOption(e,t,i){const o=Sh(e,t,void 0);o&&delete o[i]}raiseChartOptionsChangedEvent(){const e=this.chartController.getChartModel();this.eventSvc.dispatchEvent({type:"chartOptionsChanged",chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions})}};var Tm=class extends s.uAl{constructor(e){super('\n            <div style="height: 100%; width: 100%;">\n                <div class="ag-chart" data-ref="eWrapper">\n                    <div data-ref="eChartContainer" class="ag-chart-components-wrapper ag-chart-menu-hidden">\n                        <div data-ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                        <div data-ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n                    </div>\n                    <div data-ref="eMenuContainer" class="ag-chart-docked-container"></div>\n                </div>\n            </div>\n            '),this.eChart=s.dRA,this.eWrapper=s.dRA,this.eChartContainer=s.dRA,this.eMenuContainer=s.dRA,this.eEmpty=s.dRA,this.params=e}wireBeans(e){this.crossFilterService=e.chartCrossFilterSvc,this.chartTranslation=e.chartTranslation,this.chartMenuSvc=e.chartMenuSvc,this.focusSvc=e.focusSvc,this.popupSvc=e.popupSvc,this.enterpriseChartProxyFactory=e.enterpriseChartProxyFactory,this.environment=e.environment}postConstruct(){const e=(0,n.A)((0,n.A)({},this.params),{},{chartType:Lh(this.params.chartType),chartThemeName:this.getThemeName()}),t=this.gos.get("enableRtl");this.eWrapper.classList.add(t?"ag-rtl":"ag-ltr");const i=this.createBean(new pp(e));this.chartController=this.createManagedBean(new Zp(i)),this.chartOptionsService=this.createManagedBean(new Mm(this.chartController)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog?this.addDialog():(this.addManagedEventListeners({stylesChanged:this.updateTheme.bind(this)}),this.updateTheme()),this.addMenu(),this.addManagedElementListeners(this.getGui(),{focusin:this.setActiveChartCellRange.bind(this)}),this.addManagedListeners(this.chartController,{chartModelUpdate:this.update.bind(this)}),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.update(),this.raiseChartCreatedEvent()}updateTheme(){this.environment.applyThemeClasses(this.getGui())}createChart(){var e;let t;this.chartProxy&&(t=this.chartProxy.destroy({keepChartInstance:!0}));const i=this.chartController.getChartType(),o={agChartsExports:this.beans.agChartsExports,chartType:i,chartInstance:t,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gos.get("customChartThemes"),styleNonce:this.gos.get("styleNonce"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var e,t;return null!==(e=null===(t=this.chartMenu)||void 0===t?void 0:t.getExtraPaddingDirections())&&void 0!==e?e:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:null!==(e=this.params.crossFiltering)&&void 0!==e&&e,crossFilterCallback:(e,t)=>{this.params.crossFilteringContext.lastSelectedChartId=t?"":this.chartController.getChartId(),t&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(e,t)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:e=>this.chartTranslation.translate(e),context:(0,s.AuN)(this.gos,{})};this.params.chartOptionsToRestore=void 0,this.chartType=i,this.chartProxy=this.createChartProxy(o),this.chartProxy?(this.chartController.setChartProxy(this.chartProxy),this.createMenuContext()):(0,s.ujB)(138,{chartType:o.chartType})}createMenuContext(){if(this.chartMenuContext)return;const e=this.createManagedBean(new hg(this.chartOptionsService.getChartThemeOverridesProxy())),t=this.createManagedBean(new hg(this.chartOptionsService.getAxisThemeOverridesProxy()));this.chartMenuContext={chartController:this.chartController,chartOptionsService:this.chartOptionsService,chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t}}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gos.get("chartThemeOverrides")}createChartProxy(e){var t;const{chartType:i}=e;switch(i){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new tg(e);case"pie":case"donut":case"doughnut":return new sg(e);case"area":case"stackedArea":case"normalizedArea":return new Jp(e);case"line":case"stackedLine":case"normalizedLine":return new ig(e);case"scatter":case"bubble":return new og(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new ng(e)}const o=null===(t=this.enterpriseChartProxyFactory)||void 0===t?void 0:t.createChartProxy(e);if(!o)throw(0,s.Mk1)(251,{chartType:i});return o}addDialog(){const e=this.chartTranslation.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:t,height:i}=this.getBestDialogSize(),o=this.params.focusDialogOnOpen?()=>setTimeout(()=>(0,s.YtT)(this.getGui())):void 0;this.chartDialog=new Zi({resizable:!0,movable:!0,maximizable:!0,title:e,width:t,height:i,component:this,centered:!0,closable:!0,afterGuiAttached:o,postProcessPopupParams:{type:"chart"}}),this.createBean(this.chartDialog),this.chartDialog.addEventListener("destroyed",()=>{this.destroy(),this.chartMenuSvc.hideAdvancedSettings();const e=this.focusSvc.getFocusedCell();setTimeout(()=>{this.focusSvc.isAlive()&&(e?this.focusSvc.setFocusedCell((0,n.A)((0,n.A)({},e),{},{forceBrowserFocus:!0})):(0,s.a5s)(this.beans))})})}getBestDialogSize(){const e=this.popupSvc.getPopupParent(),t=.75*(0,s.jPA)(e),i=.75*(0,s.UrH)(e),o=this.chartProxy.getChart();let n=this.params.insideDialog?850:o.width,r=this.params.insideDialog?470:o.height;return(n>t||r>i)&&(n=Math.min(n,t),r=Math.round(.553*n),r>i&&(r=i,n=Math.min(n,Math.round(r/.553)))),{width:n,height:r}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new Dm(this.eChartContainer,this.eMenuContainer,this.chartMenuContext)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}update(e){if(null!==e&&void 0!==e&&e.chartId){if(!this.chartController.update(e))return}const t=this.chartTypeChanged(e),i=t||this.chartEmpty?((e,t)=>{const i=this.chartType,o=e,n=this.chartProxy.getChart(),s=null===n||void 0===n?void 0:n.getOptions(),r=Object.values(null!==(t=null===n||void 0===n?void 0:n.axes)&&void 0!==t?t:{});return this.chartOptionsService.getPersistedChartThemeOverrides(s,r,i,null!==o&&void 0!==o?o:i)})(t):void 0;t&&this.createChart(),i&&null!==e&&void 0!==e&&e.chartThemeOverrides&&(0,s.WY6)(i,e.chartThemeOverrides);const o=null!==i&&void 0!==i?i:null===e||void 0===e?void 0:e.chartThemeOverrides;this.updateChart(o),null!==e&&void 0!==e&&e.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(e){const{chartProxy:t}=this,i=this.chartController.getSelectedValueColState(),o=this.chartController.getChartData(),n=this.handleEmptyChart(o,i.length);if(this.chartEmpty=n,n)return void(e&&this.chartController.updateThemeOverrides(e));const s=this.chartController.getChartUpdateParams(e);t.update(s),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()})}chartTypeChanged(e){const[t,i]=[this.chartController.getChartType(),null===e||void 0===e?void 0:e.chartType],o=i?Lh(i):void 0;return this.chartType!==t?null!==o&&void 0!==o?o:t:o&&t!==o?o:null}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,t){const i=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),o=this.chartController.getChartType();let n=1;this.chartController.isActiveXYChart()?n="bubble"===o?3:2:Ih(Oh(o))&&(n=0);const r=t<n||0===e.length;if(this.eChart){const e=i||r;(0,s.nl0)(this.eChart,!e),(0,s.nl0)(this.eEmpty,e)}return i?(this.eEmpty.textContent=this.chartTranslation.translate("pivotChartRequiresPivotMode"),!0):!!r&&(this.eEmpty.textContent=this.chartTranslation.translate("noDataToChart"),!0)}downloadChart(e,t,i){this.chartProxy.downloadChart(e,t,i)}openChartToolPanel(e){const t=e?Tp[e]:e;this.chartMenu.showMenu({panel:t})}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setMaximized(e){var t;null===(t=this.chartDialog)||void 0===t||t.setMaximized(e)}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||this.chartController.setChartRange(!0)}getThemeName(){const e=this.gos.get("chartThemes")||$p;if(0===e.length)throw new Error((0,s.Mk1)(254));const{chartThemeName:t}=this.params;return e.includes(t)?t:e[0]}getAllKeysInObjects(e){const t={};for(const i of e.filter(e=>null!=e))for(const e of Object.keys(i))t[e]=null;return Object.keys(t)}validateCustomThemes(){const e=this.getChartThemes(),t=this.gos.get("customChartThemes");if(t)for(const i of this.getAllKeysInObjects([t]))e.includes(i)||(0,s.ujB)(139,{customThemeName:i})}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);const e=this.getChartId(),t=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,i=this.gos.get("chartThemeOverrides")||{};this.update({type:"".concat(t,"ChartUpdate"),chartId:e,chartThemeOverrides:i})}raiseChartCreatedEvent(){this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventSvc.dispatchEvent({type:"chartCreated",chartId:this.chartController.getChartId()})})}raiseChartDestroyedEvent(){this.eventSvc.dispatchEvent({type:"chartDestroyed",chartId:this.chartController.getChartId()})}destroy(){var e,t;super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),null!==(e=this.chartDialog)&&void 0!==e&&e.isAlive()&&this.destroyBean(this.chartDialog),null===(t=this.onDestroyColorSchemeChangeListener)||void 0===t||t.call(this);const i=this.getGui();(0,s.fDi)(i),(0,s.MwW)(i),this.raiseChartDestroyedEvent()}},km=!1;function Im(e){e.version;return null==e.version&&(e.version=function(e){var t;const i=e;if(null!=e.version)return e.version;const o=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return Object.keys(e||{}).some(e=>i.includes(e))},n=i.chartOptions,s=o(n,"seriesDefaults")?null===n||void 0===n?void 0:n.seriesDefaults:null===n||void 0===n?void 0:n[Object.keys(n)[0]],r={"27.0.0":o(i,"seriesChartTypes"),"26.2.0":!o(n,"seriesDefaults"),"26.1.0":o(null===s||void 0===s?void 0:s.highlightStyle,"item"),"26.0.0":o(null===s||void 0===s?void 0:s.highlightStyle,"series"),"25.1.0":o(null===s||void 0===s?void 0:s.label,"minAngle"),"25.0.0":o(i,"modelType","aggFunc","unlinkChart","suppressChartRanges")||o(s,"lineDash","lineDashOffset"),"24.0.0":o(i,"chartThemeName","chart")||o(n,"series"),"23.2.0":o(n,"navigator"),"23.0.0":o(null===n||void 0===n||null===(t=n.legend)||void 0===t||null===(t=t.item)||void 0===t?void 0:t.marker,"shape"),"22.1.0":o(i,"chartPalette","chartType")},a="27.1.0",l=Object.entries(r).filter(e=>{let[t,i]=e;return i});km;const[d=a]=l[0];km;return d}(e)),e=Xm("23.0.0",e,Lm),e=Xm("24.0.0",e,Nm),e=Xm("25.1.0",e,Om),e=Xm("26.0.0",e,Gm),e=Xm("26.1.0",e,Bm),e=Xm("26.2.0",e,Vm),e=Xm("28.0.0",e,Hm),e=Xm("28.2.0",e,zm),e=Xm("29.0.0",e,Wm),e=Xm("29.1.0",e,Um),e=Xm("29.2.0",e,jm),e=Xm("30.0.0",e,_m),e=Xm("31.0.0",e,Km),e=Xm("32.0.0",e,Ym),e=Xm("33.0.0",e,qm),e=function(e){return e=sf("chartOptions.*.width",e),e=sf("chartOptions.*.height",e),e=Jm("chartOptions.*.axes.category.label.autoRotate",!0,e),e}(e=Xm("34.0.0",e,Qm)),e=Xm(ki,e,e=>e)}function Lm(e){return e=nf("chartOptions.legend.item.marker.type","shape",e),e=nf("chartOptions.seriesDefaults.marker.type","shape",e),e=nf("chartOptions.legend.padding","spacing",e)}function Nm(e){var t;e=sf("chartOptions.seriesDefaults.marker.minSize",e);const{chartType:i,chartPalette:s,chartOptions:{xAxis:r,yAxis:d}}=e,c=(0,o.A)(e.chartOptions,a),u=(0,o.A)(e,l),h=function(e){switch(e){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"stackedLine":case"normalizedLine":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}(i),p=null===h||void 0===h?void 0:h.map((e,t)=>(0,n.A)({type:e},0===t?r:d));return(0,n.A)({chartType:i,chartThemeName:null!==(t={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[s])&&void 0!==t?t:"ag-default",chartOptions:(0,n.A)((0,n.A)({},c),{},{axes:p,xAxis:r,yAxis:d})},u)}function Om(e){return e=nf("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",e)}function Gm(e){return e=sf("chart",e=af("chartOptions.seriesDefaults.highlightStyle",e,e=>{let{dimOpacity:t}=e,i=(0,o.A)(e,d);return(0,n.A)((0,n.A)({},i),null!=t?{series:{dimOpacity:t}}:{})})),e=sf("chartOptions.seriesDefaults.tooltipClass",e),e=Zm("chartOptions.axes[].label.rotation",0,e=sf("chartOptions.seriesDefaults.tooltipTracking",e)),e=Zm("chartOptions.axes[].label.rotation",335,e)}function Bm(e){const t=e=>{let{item:t,series:i}=e,s=(0,o.A)(e,c);return(0,n.A)({item:(0,n.A)((0,n.A)({},s),t)},i?{series:i}:{})};return e=af("chartOptions.seriesDefaults.highlightStyle",e,t),e=af("chartOptions.series[].highlightStyle",e,t)}function Vm(e){e=tf("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",e),e=tf("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",e),e=sf("chartOptions.seriesDefaults.fill",e=tf("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",e)),e=sf("chartOptions.seriesDefaults.stroke",e),e=sf("chartOptions.seriesDefaults.callout.colors",e),e=sf("chartOptions.xAxis",e),e=sf("chartOptions.yAxis",e);const{chartType:t,chartOptions:{axes:i,series:s,seriesDefaults:r}}=e,a=(0,o.A)(e.chartOptions,u),l=(0,o.A)(e,h),d=Lh(t),c=Oh(d),g=[c],v={};if(!Gh(c)){const e={top:{},bottom:{},left:{},right:{}},t=i.map(t=>{let{type:i}=t,s=(0,o.A)(t,p);return{[i]:(0,n.A)((0,n.A)({},e),s)}}).reduce(df,{});for(const i of Wh.filter(e=>null==t[e]))t[i]=(0,n.A)({},e);v.axes=t}const m=g.map(e=>({[e]:(0,n.A)((0,n.A)({},v),{},{series:r},a)})).reduce(df,{});return e=(0,n.A)((0,n.A)({},l),{},{chartType:d,chartOptions:m})}function Hm(e){return e=sf("chartOptions.*.title.padding",e),e=sf("chartOptions.*.subtitle.padding",e),e=Jm("chartOptions.*.axes.*.title.enabled",!1,e=sf("chartOptions.*.axes.*.title.padding",e))}function zm(e){return e=nf("chartOptions.pie.series.callout","calloutLine",e),e=nf("chartOptions.pie.series.label","calloutLabel",e),e=nf("chartOptions.pie.series.labelKey","sectorLabelKey",e),e=nf("chartOptions.pie.series.labelName","sectorLabelName",e),e=nf("chartOptions.donut.series.callout","calloutLine",e),e=nf("chartOptions.donut.series.label","calloutLabel",e),e=nf("chartOptions.donut.series.labelKey","sectorLabelKey",e),e=nf("chartOptions.donut.series.labelName","sectorLabelName",e)}function Wm(e){return e=of("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",e),e=of("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",e),e=of("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",e),e=of("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",e),e=tf("chartOptions.scatter.series.paired","chartOptions.scatter.paired",e=of("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",e))}function Um(e){return e=sf("chartOptions.axes[].tick.count",e)}function jm(e){return e=af("chartOptions.*.tooltip",e,e=>{let{tracking:t}=e,i=(0,o.A)(e,g);const s=(0,n.A)({},i);var r,a;if(!1===t)null!==(r=s.position)&&void 0!==r||(s.position={type:"pointer"}),null!==(a=s.range)&&void 0!==a||(s.range="nearest");else if(!0===t){var l,d;null!==(l=s.position)&&void 0!==l||(s.position={type:"node"}),null!==(d=s.range)&&void 0!==d||(s.range="nearest")}return s})}function _m(e){return e=nf("chartOptions.pie.series.labelKey","sectorLabelKey",e),e=Jm("chartOptions.common.legend.position","right",e=ef("chartOptions.common.legend.enabled",!0,e=sf("chartOptions.*.series.flipXY",e=jm(e=Um(e=nf("chartOptions.pie.series.labelName","sectorLabelName",e))))))}function Km(e){const t=nf("chartOptions.column","bar",e),i={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"}[t.chartThemeName]||t.chartThemeName;return(0,n.A)((0,n.A)({},t),{},{chartThemeName:i})}function Ym(e){return e=rf("chartOptions.*.autoSize",!0,e,(e,t)=>{!0===e[t]||!1===e[t]&&(e.minHeight=600,e.minWidth=300),delete e[t]})}function qm(e){return e=sf("chartOptions.*.axes.category.label.format",e),e=sf("chartOptions.*.axes.category.crosshair.label.format",e),e=sf("chartOptions.*.axes.angle-category.label.format",e),e=nf("chartOptions.*.axes.*.label.padding","spacing",e=sf("chartOptions.*.axes.radius-category.label.format",e)),e=sf("chartOptions.*.axes.*.crossLines.label.className",e=nf("chartOptions.*.navigator.miniChart.label.padding","spacing",e)),e=lf("chartOptions.bar.series.label.placement",e=sf("chartOptions.bullet",e=rf("chartOptions.*.axes.*.crossLines.label.position",!0,e,(e,t)=>{"string"===typeof e[t]&&(e[t]=e[t].replace(/([A-Z])/,"-$1").toLowerCase())})),{inside:"inside-center",outside:"inside-end"}),e=sf("chartOptions.*.navigator.min",e=lf("chartOptions.waterfall.series.item.*.label.placement",e,{inside:"inside-center",start:"outside-start",end:"outside-end"})),e=sf("chartOptions.*.navigator.max",e),e=sf("chartOptions.*.zoom.ratioX",e),e=sf("chartOptions.*.zoom.ratioY",e),e=sf("chartOptions.*.zoom.rangeX",e),e=sf("chartOptions.*.zoom.rangeY",e)}function Qm(e){return rf("chartOptions.series[].highlightStyle",!0,e,(e,t)=>{const i=e[t];if(null==i)return;const n={};if(i.item&&(n.highlightedItem=i.item),i.series){const e=i.series,{dimOpacity:t}=e,s=(0,o.A)(e,v);null!=t&&(n.unhighlightedSeries={opacity:t}),Object.keys(s).length>0&&(n.highlightedSeries=s)}delete e[t],e.highlight=n}),e}function Xm(e,t,i){if($m(e)>$m(t.version)){km;const o=i(t);return o.version=e,o}return t}function $m(e){const{major:t,minor:i,patch:o}=function(e){const t=e.includes("-beta")?e.replace(/-beta.*/,""):e,i="string"===typeof t?t.split(".").map(e=>Number(e)):[];if(3!==i.length||i.some(e=>isNaN(e)))throw new Error((0,s.Mk1)(253,{version:t}));return{major:i[0],minor:i[1],patch:i[2]}}(e);return 1e4*t+100*i+o}function Zm(e,t,i){return rf(e,!0,i,(e,i)=>{e[i]===t&&delete e[i]})}function Jm(e,t,i){return rf(e,!1,i,(e,i)=>{null==e[i]&&(e[i]=t)})}function ef(e,t,i){"string"===typeof e&&(e=e.split("."));const o=e[0];var n;e.length>1&&(i[o]=ef(e.slice(1),t,null!==(n=i[o])&&void 0!==n?n:{}));return Object.keys(i).includes(o)||(i[o]=t),i}function tf(e,t,i){let o,n=!1;return i=rf(e,!0,i,(e,t)=>{n=!0,o=e[t],delete e[t]}),n?rf(t,!1,i,(e,t)=>{e[t]=o}):i}function of(e,t,i){let o,n=!1;return i=rf(e,!0,i,(e,t)=>{n=!0,o=e[t],delete e[t]}),n?rf(t,!1,i,(e,t)=>{void 0===e[t]&&(e[t]=o)}):i}function nf(e,t,i){return rf(e,!0,i,(e,i)=>{e[t]=e[i],delete e[i]})}function sf(e,t){return rf(e,!0,t,(e,t)=>delete e[t])}function rf(e,t,i,o){const s=e instanceof Array?e:e.split("."),r=s.slice(0,s.length-1),a=s[s.length-1];return af(r,i,e=>{const i=Object.keys(e).includes(a);if(t&&!i)return e;const s=(0,n.A)({},e);return o(s,a),s})}function af(e,t,i){const o=e instanceof Array?e:e.split(".");if(t=(0,n.A)({},t),0===o.length)return i(t);if(o[0].startsWith("{")){const e=o[0].substring(1,o[0].lastIndexOf("}")).split(",");for(const n of e)null!=t[n]&&(t[n]=af(o.slice(1),t[n],i))}else if(o[0].endsWith("[]")){const n=o[0].substring(0,e[0].indexOf("["));t[n]instanceof Array&&(t[n]=t[n].map(e=>af(o.slice(1),e,i)))}else if("*"===o[0])for(const n of Object.keys(t))t[n]=af(o.slice(1),t[n],i);else null!=t[o[0]]&&(t[o[0]]=af(o.slice(1),t[o[0]],i));return t}function lf(e,t,i){return rf(e,!0,t,(e,t)=>{var o;"string"===typeof e[t]&&(e[t]=null!==(o=i[t])&&void 0!==o?o:t)})}var df=(e,t)=>(0,n.A)((0,n.A)({},e),t);s.XQb;s.RPC,s.gFd,s.JKr},851(){},853(e,t,i){e.exports=i(896)},896(e,t){function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var o=i-1>>>1,n=e[o];if(!(0<s(n,t)))break e;e[o]=t,e[i]=n,i=o}}function o(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var o=0,n=e.length,r=n>>>1;o<r;){var a=2*(o+1)-1,l=e[a],d=a+1,c=e[d];if(0>s(l,i))d<n&&0>s(c,l)?(e[o]=c,e[d]=i,o=d):(e[o]=l,e[a]=i,o=a);else{if(!(d<n&&0>s(c,i)))break e;e[o]=c,e[d]=i,o=d}}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],c=[],u=1,h=null,p=3,g=!1,v=!1,m=!1,f=!1,C="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=o(c);null!==t;){if(null===t.callback)n(c);else{if(!(t.startTime<=e))break;n(c),t.sortIndex=t.expirationTime,i(d,t)}t=o(c)}}function S(e){if(m=!1,y(e),!v)if(null!==o(d))v=!0,F||(F=!0,x());else{var t=o(c);null!==t&&k(S,t.startTime-e)}}var x,F=!1,R=-1,P=5,D=-1;function E(){return!!f||!(t.unstable_now()-D<P)}function A(){if(f=!1,F){var e=t.unstable_now();D=e;var i=!0;try{e:{v=!1,m&&(m=!1,w(R),R=-1),g=!0;var s=p;try{t:{for(y(e),h=o(d);null!==h&&!(h.expirationTime>e&&E());){var r=h.callback;if("function"===typeof r){h.callback=null,p=h.priorityLevel;var a=r(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,y(e),i=!0;break t}h===o(d)&&n(d),y(e)}else n(d);h=o(d)}if(null!==h)i=!0;else{var l=o(c);null!==l&&k(S,l.startTime-e),i=!1}}break e}finally{h=null,p=s,g=!1}i=void 0}}finally{i?x():F=!1}}}if("function"===typeof b)x=function(){b(A)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,T=M.port2;M.port1.onmessage=A,x=function(){T.postMessage(null)}}else x=function(){C(A,0)};function k(e,i){R=C(function(){e(t.unstable_now())},i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_requestPaint=function(){f=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,n,s){var r=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?r+s:r:s=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>r?(e.sortIndex=s,i(c,e),null===o(d)&&e===o(c)&&(m?(w(R),R=-1):m=!0,k(S,s-r))):(e.sortIndex=a,i(d,e),v||g||(v=!0,F||(F=!0,x()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},936(e,t,i){function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function s(e,t,i){return(t=n(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}i.d(t,{A:()=>a})},950(e,t,i){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(672)},955(e,t,i){i.d(t,{$UK:()=>p,$f9:()=>dl,$ii:()=>Mo,$j0:()=>_d,AH5:()=>O,AOw:()=>nt,AR_:()=>Gd,Aag:()=>Z,Agl:()=>qe,Arb:()=>je,AuN:()=>oo,Axr:()=>bs,BEv:()=>Cd,BLm:()=>Xm,BNA:()=>Ai,BhY:()=>xp,Bl0:()=>jd,BlQ:()=>Zd,Brr:()=>po,BxM:()=>D,CFh:()=>Qd,CdH:()=>hv,Cf3:()=>Hv,CkN:()=>ni,Cq2:()=>ul,DDm:()=>us,DEP:()=>Ii,DKR:()=>rr,DXf:()=>gr,Dav:()=>Vl,Dii:()=>Ut,Dvw:()=>Tv,Dwf:()=>Ji,E2E:()=>Qo,Eet:()=>is,En5:()=>Ti,F4t:()=>B,FWU:()=>Vg,F_Q:()=>Yi,Fhk:()=>xi,Fzc:()=>no,G21:()=>Ol,GET:()=>cC,GXs:()=>Do,Ge7:()=>re,H18:()=>Wh,H1b:()=>dC,HBH:()=>M,HD3:()=>le,HHt:()=>Er,HJC:()=>$m,HUZ:()=>Sr,Hky:()=>md,IJX:()=>pc,I_I:()=>Os,Iws:()=>lw,J1Y:()=>Gs,JHD:()=>Le,JJT:()=>te,JKr:()=>vw,JPk:()=>Lo,JSz:()=>rs,JT7:()=>Mt,Jch:()=>zi,Ju4:()=>Ar,Jy1:()=>ts,K05:()=>Ee,KE4:()=>Je,KTf:()=>ki,KwK:()=>ge,LCl:()=>Ml,LoC:()=>Wo,Lt:()=>hw,M9x:()=>Be,MBb:()=>gi,MPk:()=>Di,MSA:()=>zs,MVO:()=>yu,MWY:()=>m,Mk1:()=>li,MpY:()=>Eo,Mvm:()=>pC,MwW:()=>Pe,NF5:()=>_v,NPD:()=>or,NUe:()=>Ce,NdC:()=>In,Njs:()=>Ei,O$T:()=>Go,O3D:()=>ll,O4V:()=>BC,O65:()=>ct,OAh:()=>fr,OCe:()=>en,OON:()=>Td,OP3:()=>Tr,OPU:()=>kc,OnL:()=>Su,PIC:()=>G,PIz:()=>$d,PLD:()=>gl,PQ9:()=>Ud,PZy:()=>F,PuA:()=>So,Pw7:()=>j,Q1u:()=>Io,Q5x:()=>Gl,QKt:()=>Nc,QSI:()=>Ue,QdF:()=>bl,QhZ:()=>rm,Qmv:()=>v,QyW:()=>oe,R39:()=>co,R7i:()=>Ic,RAh:()=>Cu,RPC:()=>ah,RTK:()=>Ll,RYS:()=>xr,Rlq:()=>Dd,SjP:()=>S,Sot:()=>ac,SpC:()=>yr,Ss0:()=>lf,SvK:()=>sl,Sxk:()=>Zm,Syv:()=>fi,T$n:()=>J,T2p:()=>ie,TGw:()=>U,TMe:()=>V,TUE:()=>$a,TiQ:()=>hi,TvF:()=>Fs,UCw:()=>cl,UVL:()=>za,UZN:()=>Mi,UcN:()=>Pi,Udn:()=>bu,Ug$:()=>Iv,UlD:()=>P,Unm:()=>pr,UrH:()=>be,Uun:()=>qd,V67:()=>C,VUV:()=>_s,VVe:()=>lu,Vc:()=>wh,WPS:()=>dh,WY6:()=>St,W_e:()=>Vd,Wd2:()=>we,WnW:()=>Y,X17:()=>ze,X7E:()=>g,X8R:()=>Eh,XQb:()=>ht,XWP:()=>ri,Xeg:()=>Jl,XfX:()=>bt,Xq0:()=>Hd,Y6t:()=>io,YE1:()=>Is,YFT:()=>au,YMc:()=>od,YR0:()=>x,YkS:()=>Yo,YtT:()=>Ls,YvH:()=>Ci,YzF:()=>jv,Z4t:()=>Zs,Zio:()=>Dn,_1W:()=>Hl,_gz:()=>Mr,_oP:()=>vd,_pu:()=>_,_wY:()=>Kd,a5s:()=>ic,a8A:()=>du,aC_:()=>sr,aJZ:()=>wu,asF:()=>Bc,awo:()=>q,b6I:()=>yo,bLJ:()=>mr,bT4:()=>vi,bUh:()=>fd,c7o:()=>Q,cAy:()=>hl,cBy:()=>X,cPC:()=>ne,ck3:()=>Zi,cmC:()=>an,cyu:()=>wo,dK4:()=>Wi,dQD:()=>Fn,dRA:()=>Pn,dYA:()=>zo,dbY:()=>ui,e3J:()=>ys,eUX:()=>ce,euU:()=>Ri,ey2:()=>Ns,fDi:()=>Re,fj_:()=>ru,fyk:()=>Gc,g3$:()=>ks,gFd:()=>am,gKP:()=>R,hHe:()=>sc,hMi:()=>Dl,h_e:()=>aC,hnU:()=>Fi,hv8:()=>En,hyn:()=>Qf,iE6:()=>Yd,iFJ:()=>Bi,idh:()=>hC,ifX:()=>Ld,j0N:()=>w,jER:()=>Li,jPA:()=>ye,jbm:()=>Wa,jfj:()=>Cl,jit:()=>Ki,jy1:()=>ml,k$d:()=>Zu,kA8:()=>To,kFn:()=>Ko,kRQ:()=>ut,keA:()=>gt,l8G:()=>mn,lK1:()=>es,lXX:()=>N,lju:()=>Ss,lm8:()=>Bo,lzn:()=>Oo,m$O:()=>Jo,m20:()=>Ad,n1z:()=>wr,n3Z:()=>Mn,n76:()=>TC,nNd:()=>rl,nl0:()=>pe,nnr:()=>ds,oAJ:()=>K,oJH:()=>Xo,oJj:()=>Oi,oND:()=>Md,oQi:()=>tc,oY$:()=>Ln,odY:()=>Xd,pA9:()=>Vs,pkA:()=>Ct,pow:()=>xu,pp6:()=>ee,prb:()=>Ui,qRA:()=>Ua,q_H:()=>Hi,qmn:()=>Wv,qpX:()=>ve,qph:()=>f,qyQ:()=>Tl,rYD:()=>Il,rzr:()=>uC,s1r:()=>Vu,s5B:()=>Po,s8J:()=>Vi,sHF:()=>qo,sK4:()=>ft,sNX:()=>E,sTg:()=>el,sZb:()=>Xs,stt:()=>Cr,syG:()=>_t,tAb:()=>Qs,uAR:()=>sh,uAl:()=>Tn,uQ3:()=>Uo,uV7:()=>tl,ujB:()=>oi,unA:()=>Sn,v8T:()=>W,vBt:()=>vc,vVf:()=>so,vcM:()=>Jd,vfN:()=>AC,vwK:()=>$,w$:()=>Kv,w3i:()=>Nl,wEz:()=>Xi,wT9:()=>fn,wW7:()=>ss,wds:()=>mi,wdz:()=>Uv,x56:()=>hr,xDz:()=>Gv,xbs:()=>eo,xmb:()=>ir,xo4:()=>se,xoZ:()=>di,xw4:()=>bo,yGc:()=>zv,ySq:()=>rc,ybP:()=>jo,yxN:()=>Ho,yy7:()=>pi,z61:()=>td,zCU:()=>Nv,zRK:()=>Za,zsR:()=>to});var o=i(986),n=i(936);const s=["editorState"],r=["editorState"],a=["rowSpan","spanRows"],l=["colId"],d=["key"],c=["colIds"];var u,h,p=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const o=t?this.allAsyncListeners:this.allSyncListeners;let n=o.get(e);return!n&&i&&(n=new Set,o.set(e,n)),n}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.getListeners(e,i,!0).add(t)}removeEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.getListeners(e,i,!1);o&&(o.delete(t),0===o.size&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getGlobalListeners(t).add(e)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var i;const o=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const{frameworkOverrides:n}=this,s=e=>{const i=n?()=>n.wrapIncoming(e):e;t?this.dispatchAsync(i):i()},r=this.getListeners(o,t,!1);if((null!==(i=null===r||void 0===r?void 0:r.size)&&void 0!==i?i:0)>0){const t=new Set(r);for(const i of t)null!==r&&void 0!==r&&r.has(i)&&s(()=>i(e))}const a=this.getGlobalListeners(t);if(a.size>0){const t=new Set(a);for(const i of t)s(()=>i(o,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}};function g(e){return null==e||""===e?null:e}function v(e){return null!=e&&""!==e}function m(e){return!v(e)}function f(e){return null!=e&&"function"===typeof e.toString?e.toString():null}function C(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}function w(e,t){var i,o;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.transform&&(e=n.transform(e),t=n.transform(t));const s=null==e,r=null==t;if(null!==(i=e)&&void 0!==i&&i.toNumber&&(e=e.toNumber()),null!==(o=t)&&void 0!==o&&o.toNumber&&(t=t.toNumber()),s&&r)return 0;if(s)return-1;if(r)return 1;function a(e,t){return e>t?1:e<t?-1:0}if("string"!==typeof e)return a(e,t);if(!n.accentedCompare)return a(e,t);try{return e.localeCompare(t)}catch(l){return a(e,t)}}var b=/[&<>"']/g,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function S(e){var t;return null!==(t=null===e||void 0===e?void 0:e.toString().toString())&&void 0!==t?t:null}function x(e){var t,i;return null!==(t=null===(i=S(e))||void 0===i?void 0:i.replace(b,e=>y[e]))&&void 0!==t?t:null}function F(e){return"string"===typeof e&&e.startsWith("=")&&e.length>1}function R(e){return e.eRootDiv.getRootNode()}function P(e){return R(e).activeElement}function D(e){const{gos:t,eRootDiv:i}=e;let o=null;const n=t.get("getDocument");return n&&v(n)?o=n():i&&(o=i.ownerDocument),o&&v(o)?o:document}function E(e){const t=P(e);return null===t||t===D(e).body}function A(e){return D(e).defaultView||window}function M(e){let t=null,i=null;try{t=D(e).fullscreenElement}catch(n){}finally{t||(t=R(e));const n=t.querySelector("body");if(n)i=n;else if(t instanceof ShadowRoot)i=t;else if(t instanceof Document){var o;i=null===(o=t)||void 0===o?void 0:o.documentElement}else i=t}return i}function T(e,t,i){null==i||"string"===typeof i&&""==i?I(e,t):k(e,t,i)}function k(e,t,i){e.setAttribute(L(t),i.toString())}function I(e,t){e.removeAttribute(L(t))}function L(e){return"aria-".concat(e)}function N(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function O(e){return Number.parseInt(e.getAttribute("aria-posinset"),10)}function G(e,t){T(e,"label",t)}function B(e,t){T(e,"labelledby",t)}function V(e,t){T(e,"describedby",t)}function H(e,t){T(e,"live",t)}function z(e,t){T(e,"invalid",t)}function W(e,t){T(e,"level",t)}function U(e,t){T(e,"disabled",t)}function j(e,t){T(e,"hidden",t)}function _(e,t){T(e,"activedescendant",t)}function K(e,t){k(e,"expanded",t)}function Y(e){I(e,"expanded")}function q(e,t){k(e,"setsize",t)}function Q(e,t){k(e,"posinset",t)}function X(e,t){k(e,"rowcount",t)}function $(e,t){k(e,"rowindex",t)}function Z(e,t){k(e,"colcount",t)}function J(e,t){k(e,"colindex",t)}function ee(e,t){k(e,"colspan",t)}function te(e,t){k(e,"sort",t)}function ie(e){I(e,"sort")}function oe(e,t){T(e,"selected",t)}function ne(e,t){k(e,"checked",void 0===t?"mixed":t)}function se(e,t){T(e,"controls",t)}function re(e,t){se(e,t.id),B(t,e.id)}function ae(e,t){T(e,"owns",t)}function le(e,t){T(e,"haspopup",!1===t?null:t)}function de(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}function ce(e,t,i){const o=e.parentElement;let n=o&&o.firstChild;for(;n;)t&&n.classList.toggle(t,n===e),i&&n.classList.toggle(i,n!==e),n=n.nextSibling}var ue="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function he(e){if(!e)return!1;if(!e.matches("input, select, button, textarea"))return!1;return!!e.matches(ue)&&Ee(e)}function pe(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:o}=i;e.classList.toggle("ag-hidden",!t),o||j(e,!t)}function ge(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:o}=i;e.classList.toggle("ag-invisible",!t),o||j(e,!t)}function ve(e,t){var i;const o="disabled",n=t?e=>e.setAttribute(o,""):e=>e.removeAttribute(o);n(e);const s=null!==(i=e.querySelectorAll("input"))&&void 0!==i?i:[];for(const r of s)n(r)}function me(e,t,i){let o=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++o>i)break}else if(e===i)break}return!1}function fe(e){const{height:t,width:i,borderTopWidth:o,borderRightWidth:n,borderBottomWidth:s,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:d,paddingLeft:c,marginTop:u,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:v}=window.getComputedStyle(e),m=Number.parseFloat;return{height:m(t||"0"),width:m(i||"0"),borderTopWidth:m(o||"0"),borderRightWidth:m(n||"0"),borderBottomWidth:m(s||"0"),borderLeftWidth:m(r||"0"),paddingTop:m(a||"0"),paddingRight:m(l||"0"),paddingBottom:m(d||"0"),paddingLeft:m(c||"0"),marginTop:m(u||"0"),marginRight:m(h||"0"),marginBottom:m(p||"0"),marginLeft:m(g||"0"),boxSizing:v}}function Ce(e){const t=fe(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function we(e){const t=fe(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function be(e){const{height:t,marginBottom:i,marginTop:o}=fe(e);return Math.floor(t+i+o)}function ye(e){const{width:t,marginLeft:i,marginRight:o}=fe(e);return Math.floor(t+i+o)}function Se(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:o,borderRightWidth:n,borderBottomWidth:s}=fe(e);return{top:t.top+(i||0),left:t.left+(o||0),right:t.right+(n||0),bottom:t.bottom+(s||0)}}function xe(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i)),i}function Fe(e,t,i){i&&(t*=-1),e.scrollLeft=t}function Re(e){for(;null!==e&&void 0!==e&&e.firstChild;)e.firstChild.remove()}function Pe(e){null!==e&&void 0!==e&&e.parentNode&&e.remove()}function De(e){return!!e.offsetParent}function Ee(e){if(e.checkVisibility)return e.checkVisibility({checkVisibilityCSS:!0});return!(!De(e)||"visible"!==window.getComputedStyle(e).visibility)}function Ae(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function Me(e,t,i){i&&i.nextSibling===t||(e.firstChild?i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))}function Te(e,t){for(let i=0;i<t.length;i++){const o=t[i],n=e.children[i];n!==o&&e.insertBefore(o,n)}}function ke(e){return e.replace(/[A-Z]/g,e=>"-".concat(e.toLocaleLowerCase()))}function Ie(e,t){if(t)for(const i of Object.keys(t)){const o=t[i];if(null===i||void 0===i||!i.length||null==o)continue;const n=ke(i),s=o.toString(),r=s.replace(/\s*!important/g,""),a=r.length!=s.length?"important":void 0;e.style.setProperty(n,r,a)}}function Le(e){return()=>{const t=e();return!t||(Ne(t)||Oe(t))}}function Ne(e){return e.clientWidth<e.scrollWidth}function Oe(e){return e.clientHeight<e.scrollHeight}function Ge(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Be(e,t)}function Be(e,t){t=He(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function Ve(e,t){t=He(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function He(e){return"number"===typeof e?"".concat(e,"px"):e}function ze(e){return e instanceof Node||e instanceof HTMLElement}function We(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())}function Ue(e,t,i){const o=A(e).ResizeObserver,n=o?new o(i):null;return null===n||void 0===n||n.observe(t),()=>null===n||void 0===n?void 0:n.disconnect()}function je(e,t){const i=A(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}var _e,Ke="data-ref";function Ye(){return null!==_e&&void 0!==_e||(_e=document.createTextNode(" ")),_e.cloneNode()}function qe(e){const{attrs:t,children:i,cls:o,ref:n,role:s,tag:r}=e,a=document.createElement(r);if(o&&(a.className=o),n&&a.setAttribute(Ke,n),s&&a.setAttribute("role",s),t)for(const l of Object.keys(t))a.setAttribute(l,t[l]);if(i)if("string"===typeof i)a.textContent=i;else{let e=!0;for(const t of i)t&&("string"===typeof t?(a.appendChild(document.createTextNode(t)),e=!1):"function"===typeof t?a.appendChild(t()):(e&&(a.appendChild(Ye()),e=!1),a.append(qe(t)),a.appendChild(Ye())))}return a}var Qe=["touchstart","touchend","touchmove","touchcancel","scroll"],Xe=["wheel"],$e={},Ze=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"===typeof $e[t])return $e[t];const i=document.createElement(e[t]||"div");return $e[t="on"+t]=t in i}})();function Je(e,t){return!(!t||!e)&&function(e){const t=e;if(t.path)return t.path;if(t.composedPath)return t.composedPath();return function(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}(t)}(t).indexOf(e)>=0}var et=e=>{const t=Qe.includes(e),i=Xe.includes(e);return!!t||!i&&void 0};function tt(e,t,i){if(0===i)return!1;const o=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(o,n)<=i}var it=(e,t)=>{const i=e.identifier;for(let o=0,n=t.length;o<n;++o){const e=t[o];if(e.identifier===i)return e}return null};function ot(e,t){return e.gos.isElementInThisInstance(t.target)}function nt(e,t,i){const o=e.getBoundingClientRect().height,n=function(e){var t;const i=M(e);return null!==(t=null===i||void 0===i?void 0:i.clientWidth)&&void 0!==t?t:window.innerWidth||-1}(i)-2,s=function(e){var t;const i=M(e);return null!==(t=null===i||void 0===i?void 0:i.clientHeight)&&void 0!==t?t:window.innerHeight||-1}(i)-2;if(!e.offsetParent)return;const r=Se(e.offsetParent),{clientY:a,clientX:l}=t;let d=a-r.top-o/2,c=l-r.left-10;const u=D(i),h=u.defaultView||window,p=h.pageYOffset||u.documentElement.scrollTop,g=h.pageXOffset||u.documentElement.scrollLeft;n>0&&c+e.clientWidth>n+g&&(c=n+g-e.clientWidth),c<0&&(c=0),s>0&&d+e.clientHeight>s+p&&(d=s+p-e.clientHeight),d<0&&(d=0),e.style.left="".concat(c,"px"),e.style.top="".concat(d,"px")}var st=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];for(const n of i){const[t,i,o,s]=n;t.addEventListener(i,o,s),e.push(n)}},rt=e=>{if(e){for(const[t,i,o,n]of e)t.removeEventListener(i,o,n);e.length=0}},at=e=>{e.cancelable&&e.preventDefault()};function lt(e,t){return t}function dt(e){var t;return null!==(t=null===e||void 0===e?void 0:e.getLocaleTextFunc())&&void 0!==t?t:lt}function ct(e,t,i,o){const n=t[i];return e.getLocaleTextFunc()(i,"function"===typeof n?n(o):n,o)}var ut=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new p),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){var o;null===(o=this.localEventService)||void 0===o||o.removeEventListener(e,t,i)}dispatchLocalEvent(e){var t;null===(t=this.localEventService)||void 0===t||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const o of Object.keys(t)){const n=t[o];n&&i.push(this._setupListener(e,o,n))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;let o;if(function(e){return void 0!==e.__addEventListener}(e))e.__addEventListener(t,i),o=()=>(e.__removeEventListener(t,i),null);else{const n=function(e){return"global"===e.eventServiceType}(e);e instanceof HTMLElement?function(e,t,i){const o=et(t);let n;null!=o&&(n={passive:o}),e.addEventListener(t,i,n)}(e,t,i):n?e.addListener(t,i):e.addEventListener(t,i),o=n?()=>(e.removeListener(t,i),null):()=>(e.removeEventListener(t,i),null)}return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==o),null)}setupPropertyListener(e,t){const{gos:i}=this;i.addPropertyEventListener(e,t);const o=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==o),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,o=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const o={type:"propertyChanged",changeSet:e.changeSet,source:e.source};t(o)};for(const n of e)this.setupPropertyListener(n,o)}getLocaleTextFunc(){return dt(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};var ht=class extends ut{},pt=new Set,gt=(e,t)=>{pt.has(t)||(pt.add(t),e())};gt._set=pt;var vt={pending:!1,funcs:[]},mt={pending:!1,funcs:[]};function ft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"setTimeout",i=arguments.length>2?arguments[2]:void 0;const o="raf"===t?mt:vt;if(o.funcs.push(e),o.pending)return;o.pending=!0;const n=()=>{const e=o.funcs.slice();o.funcs.length=0,o.pending=!1;for(const t of e)t()};"raf"===t?je(i,n):window.setTimeout(n,0)}function Ct(e,t,i){let o;return function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];const a=this;return window.clearTimeout(o),o=window.setTimeout(function(){e.isAlive()&&t.apply(a,s)},i),o}}function wt(e,t){let i=0;return function(){const o=Date.now();if(!(o-i<t)){i=o;for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];e.apply(this,s)}}}function bt(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;const n=Date.now();let s=null,r=!1;const a=()=>{null!=s&&(window.clearInterval(s),s=null)};e.addDestroyFunc(a);const l=()=>{const e=Date.now()-n>o;(t()||e)&&(i(),r=!0,a())};l(),r||(s=window.setInterval(l,10))}var yt=new Set(["__proto__","constructor","prototype"]);function St(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];v(t)&&function(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const i of Object.keys(e).filter(e=>!yt.has(e)))t(i,e[i])}(t,(t,n)=>{let s=e[t];if(s!==n){if(o){if(null==s&&null!=n){"object"===typeof n&&n.constructor===Object&&(s={},e[t]=s)}}xt(n)&&xt(s)&&!Array.isArray(s)?St(s,n,i,o):(i||void 0!==n)&&(e[t]=n)}})}function xt(e){return"object"===typeof e&&null!==e}var Ft=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return(0,n.A)({},t);let i={};return St(i,e.gridOptions,!0,!0),"deep"===e.mergeStrategy?St(i,t,!0,!0):i=(0,n.A)((0,n.A)({},i),t),e.gridOptions.context&&(i.context=e.gridOptions.context),t.context&&("deep"===e.mergeStrategy&&i.context&&St(t.context,i.context,!0,!0),i.context=t.context),i}static applyGlobalGridOption(t,i){if("deep"===e.mergeStrategy){const o=Pt(t);if(o&&"object"===typeof o&&"object"===typeof i)return e.applyGlobalGridOptions({[t]:i})[t]}return i}};Ft.gridOptions=void 0,Ft.mergeStrategy="shallow";var Rt=Ft;function Pt(e){var t;return null===(t=Rt.gridOptions)||void 0===t?void 0:t[e]}var Dt={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,refreshAfterGroupEdit:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,enableFilterHandlers:!1},Et="https://www.ag-grid.com";function At(e,t){if(e.get("debug")){for(var i=arguments.length,o=new Array(i>2?i-2:0),n=2;n<i;n++)o[n-2]=arguments[n];console.log("AG Grid: "+t,...o)}}function Mt(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];gt(()=>console.warn("AG Grid: "+e,...i),e+(null===i||void 0===i?void 0:i.join("")))}function Tt(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];gt(()=>console.error("AG Grid: "+e,...i),e+(null===i||void 0===i?void 0:i.join("")))}var kt,It=new Set,Lt={},Nt={},Ot=!1,Gt=!1,Bt=!1;function Vt(e){var t;kt||(kt=e.version);const i=e=>"You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ".concat(e," Please update all modules to the same version.");e.version?function(e){const[t,i]=e.version.split(".")||[],[o,n]=kt.split(".")||[];return t===o&&i===n}(e)||Tt(i("'".concat(e.moduleName,"' is version ").concat(e.version," but the other modules are version ").concat(kt,"."))):Tt(i("'".concat(e.moduleName,"' is incompatible.")));const o=null===(t=e.validate)||void 0===t?void 0:t.call(e);o&&!o.isValid&&Tt("".concat(o.message))}function Ht(e,t){var i;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o||(Ot=!0),Vt(e);const n=null!==(i=e.rowModels)&&void 0!==i?i:["all"];let s;It.add(e),void 0!==t?(Gt=!0,void 0===Nt[t]&&(Nt[t]={}),s=Nt[t]):s=Lt;for(const r of n)void 0===s[r]&&(s[r]={}),s[r][e.moduleName]=e;if(e.dependsOn)for(const r of e.dependsOn)Ht(r,t,o)}function zt(e,t,i){const o=i=>{var o,n;return!(null===(o=Lt[i])||void 0===o||!o[e])||!(null===(n=Nt[t])||void 0===n||null===(n=n[i])||void 0===n||!n[e])};return o(i)||o("all")}function Wt(){return Gt}function Ut(e,t){var i,o,n;const s=null!==(i=Nt[e])&&void 0!==i?i:{};return[...Object.values(null!==(o=s.all)&&void 0!==o?o:{}),...Object.values(null!==(n=s[t])&&void 0!==n?n:{})]}function jt(){return Bt}var _t=class{static register(e){Ht(e,void 0)}static registerModules(e){for(const t of e)Ht(t,void 0)}},Kt="35.0.0",Yt="_version_",qt=null,Qt="".concat(Et,"/javascript-data-grid");function Xt(e,t,i){var o,n;return null!==(o=null===(n=qt)||void 0===n?void 0:n(e,t))&&void 0!==o?o:[ii(e,t,i)]}function $t(e,t,i,o,n){e("".concat(o?"warning":"error"," #").concat(t),...Xt(t,i,n))}function Zt(e){let t=e;return e instanceof Error?t=e.toString():"object"===typeof e&&(t=function(e){if(!e)return String(e);const t={};for(const i of Object.keys(e))"object"!==typeof e[i]&&"function"!==typeof e[i]&&(t[i]=e[i]);return JSON.stringify(t)}(e)),t}function Jt(e){return void 0===e?"undefined":null===e?"null":e}function ei(e,t){return"".concat(e,"?").concat(t.toString())}function ti(e,t){const i=new URLSearchParams;if(i.append(Yt,Kt),t)for(const s of Object.keys(t))i.append(s,Zt(t[s]));const o="".concat(Qt,"/errors/").concat(e),n=ei(o,i);return n.length<=2e3?n:function(e,t,i){const o=Array.from(t.entries()).sort((e,t)=>t[1].length-e[1].length);let n=ei(e,t);for(const[s,r]of o){if(s===Yt)continue;const o=n.length-i;if(o<=0)break;const a="...",l=o+a.length,d=r.length-l>100?r.slice(0,r.length-l)+a:r.slice(0,100)+a;t.set(s,d),n=ei(e,t)}return n}(o,i,2e3)}var ii=(e,t,i)=>{const o=ti(e,t),n="".concat(i?i+" \n":"","Visit ").concat(o);return jt()?n:"".concat(n).concat(i?"":" \n  Alternatively register the ValidationModule to see the full message in the console.")};function oi(){$t(Mt,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],!0)}function ni(){$t(Tt,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],!1)}function si(e,t,i){$t(Tt,e,t,!1,i)}function ri(e,t,i){$t(Mt,e,t,!0,i)}function ai(e,t){const i=t[0];return"error #".concat(i," ")+Xt(i,t[1],e).join(" ")}function li(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return ai(void 0,t)}function di(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return ai("\n",t)}function ci(e,t){return e.get("rowModelType")===t}function ui(e,t){return ci(e,"clientSide")}function hi(e,t){return ci(e,"serverSide")}function pi(e,t){return e.get("domLayout")===t}function gi(e){return void 0!==Ki(e)}function vi(e){return"function"===typeof e.get("getRowHeight")}function mi(e){let{gos:t,formula:i}=e;const o=t.get("rowNumbers");return o||!(null===i||void 0===i||!i.active)&&!1!==o}function fi(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;const{gos:n,environment:s}=e;if(null==o&&(o=s.getDefaultRowHeight()),vi(n)){if(i)return{height:o,estimated:!0};const e={node:t,data:t.data},s=n.getCallback("getRowHeight")(e);if(wi(s))return 0===s&&oi(23),{height:Math.max(1,s),estimated:!1}}if(t.detail&&n.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");if(wi(t))return{height:t,estimated:!1};return{height:300,estimated:!1}}(n);const r=n.get("rowHeight");return{height:r&&wi(r)?r:o,estimated:!1}}function Ci(e){const{environment:t,gos:i}=e,o=i.get("rowHeight");if(!o||m(o))return t.getDefaultRowHeight();const n=t.refreshRowHeightVariable();return-1!==n?n:(oi(24),t.getDefaultRowHeight())}function wi(e){return!isNaN(e)&&"number"===typeof e&&isFinite(e)}function bi(e,t,i){const o=t[e.getDomDataKey()];return o?o[i]:void 0}function yi(e,t,i,o){const n=e.getDomDataKey();let s=t[n];m(s)&&(s={},t[n]=s),s[i]=o}function Si(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function xi(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||pi(e,"print"))}function Fi(e){const t=e.get("autoGroupColumnDef");return!(null!==t&&void 0!==t&&t.comparator)&&!e.get("treeData")}function Ri(e){const t=e.get("groupAggFiltering");return"function"===typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0}function Pi(e){return e.get("grandTotalRow")}function Di(e){const t=e.get("groupTotalRow");return"function"===typeof t?e.getCallback("groupTotalRow"):()=>null!==t&&void 0!==t?t:void 0}function Ei(e){return!!e.get("groupHideOpenParents")||"multipleColumns"===e.get("groupDisplayType")}function Ai(e,t){return!t&&"groupRows"===e.get("groupDisplayType")}function Mi(e,t,i){return!!t.group&&!t.footer&&Ai(e,i)}function Ti(e){const t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!==typeof i&&(gt(()=>oi(25,{id:i}),"getRowIdString"),i=String(i)),i}}function ki(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Ii(e,t){const i=e.get("suppressGroupChangesColumnVisibility");if(!0===i)return!1;if(t&&"suppressHideOnGroup"===i)return!1;if(!t&&"suppressShowOnUngroup"===i)return!1;const o=e.get("suppressRowGroupHidesColumns");if(t&&!0===o)return!1;const n=e.get("suppressMakeColumnVisibleAfterUnGroup");return!(!t&&!0===n)}function Li(e){var t;return null===(t=null===e||void 0===e?void 0:e.checkboxes)||void 0===t||t}function Ni(e){var t;return"multiRow"===(null===e||void 0===e?void 0:e.mode)&&(null===(t=e.headerCheckbox)||void 0===t||t)}function Oi(e){var t;if("object"===typeof e)return null!==(t=e.checkboxLocation)&&void 0!==t?t:"selectionColumn"}function Gi(e){var t;return null!==(t=null===e||void 0===e?void 0:e.hideDisabledCheckboxes)&&void 0!==t&&t}function Bi(e){return"string"!==typeof e.get("rowSelection")}function Vi(e){return void 0!==e.get("cellSelection")}function Hi(e){var t;const i=e.get("cellSelection");return void 0!==i?"boolean"!==typeof i&&(null!==(t=null===i||void 0===i?void 0:i.suppressMultiRanges)&&void 0!==t&&t):e.get("suppressMultiRangeSelection")}function zi(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")}function Wi(e){var t;const i=e.get("cellSelection");return void 0!==i?"boolean"!==typeof i&&"fill"===(null===(t=i.handle)||void 0===t?void 0:t.mode)?i.handle:void 0:{mode:"fill",setFillValue:e.get("fillOperation"),direction:e.get("fillHandleDirection"),suppressClearOnFillReduction:e.get("suppressClearOnFillReduction")}}function Ui(e){var t,i;const o=null!==(t=e.get("cellSelection"))&&void 0!==t&&t;return null!==(i="object"===typeof o&&o.enableColumnSelection)&&void 0!==i&&i}function ji(e){var t,i;const o=null!==(t=e.get("rowSelection"))&&void 0!==t?t:"single";if("string"===typeof o){const t=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return(!t||!i)&&(t?"enableDeselection":!i||"enableSelection")}return("singleRow"===o.mode||"multiRow"===o.mode)&&(null!==(i=o.enableClickSelection)&&void 0!==i&&i)}function _i(e){const t=e.get("rowSelection");return"string"===typeof t?e.get("isRowSelectable"):null===t||void 0===t?void 0:t.isRowSelectable}function Ki(e){const t="beanName"in e&&"gos"===e.beanName?e.get("rowSelection"):e.rowSelection;if("string"===typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(null===t||void 0===t?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function Yi(e){return"multiRow"===Ki(e)}function qi(e){const t=e.get("rowSelection");if("string"===typeof t){const t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return"multiRow"===(null===t||void 0===t?void 0:t.mode)?t.groupSelects:void 0}function Qi(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.get("rowSelection");return"object"!==typeof i?t?"all":void 0:"multiRow"===i.mode?i.selectAll:"all"}function Xi(e){const t=qi(e);return"descendants"===t||"filteredDescendants"===t}function $i(e){const t=e.get("rowSelection");return"object"===typeof t&&t.masterSelects||"self"}function Zi(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Ji(e){return"legacy"===e.get("columnMenu")}function eo(e){return!Ji(e)}function to(e,t,i){"object"!==typeof e&&(e={});const o=(0,n.A)({},e);for(const n of i){const e=t[n];"undefined"!==typeof e&&(o[n]=e)}return o}function io(e,t){if(!e)return;const i={};let o=!1;for(const n of Object.keys(e))i[n]=e[n],o=!0;if(!o)return;const s={type:"gridOptionsChanged",options:i};t.dispatchEvent(s);const r=(0,n.A)({type:"componentStateChanged"},i);t.dispatchEvent(r)}function oo(e,t){return e.addCommon(t)}function no(e,t){var i,o,n,s;return null!==(i=null!==(o=null!==(n=e[t])&&void 0!==n?n:null===(s=e.gridOptions)||void 0===s?void 0:s[t])&&void 0!==o?o:Pt(t))&&void 0!==i?i:Dt[t]}function so(e,t){let{gos:i}=e;return 2===t.button||t.ctrlKey&&i.get("allowContextMenuWithControlKey")}var ro={resizable:!0,sortable:!0},ao=0;function lo(){return ao++}function co(e){return e instanceof po}var uo=["asc","desc",null],ho=[{type:"absolute",direction:"asc"},{type:"absolute",direction:"desc"},null],po=class extends ht{constructor(e,t,i,o){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=o,this.isColumn=!0,this.instanceId=lo(),this.autoHeaderHeight=null,this.sortDef=go(),this._wasSortExplicitlyRemoved=!1,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.formulaRef=null,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new p,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=x(i)}destroy(){var e;super.destroy(),null===(e=this.beans.rowSpanSvc)||void 0===e||e.deregister(this)}getInstanceId(){return this.instanceId}initState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:o}}=this;null===t||void 0===t||t.initCol(this);const n=e.hide;this.visible=void 0!==n?!n:!e.initialHide,null===i||void 0===i||i.initCol(this),null===o||void 0===o||o.initCol(this)}setColDef(e,t,i){const o=e.spanRows!==this.colDef.spanRows;var n;(this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),o)&&(null===(n=this.beans.rowSpanSvc)||void 0===n||n.deregister(this),this.initRowSpan());this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.initState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:i}}=this,o=e.get("suppressFieldDotNotation");this.fieldContainsDots=v(t)&&t.includes(".")&&!o,this.tooltipFieldContainsDots=v(i)&&i.includes(".")&&!o}initMinAndMaxWidths(){var e,t;const i=this.colDef;this.minWidth=null!==(e=i.minWidth)&&void 0!==e?e:this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=null!==(t=i.maxWidth)&&void 0!==t?t:Number.MAX_SAFE_INTEGER}initTooltip(){var e;null===(e=this.beans.tooltipSvc)||void 0===e||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&(null===(e=this.beans.rowSpanSvc)||void 0===e||e.register(this))}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;e&&t&&this.addManagedListeners(t,{colDefChanged:t=>{const i=e.recreateColDef(this.colDef);this.setColDef(i,i,t.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=e.width,o=e.initialWidth;return t=null!=i?i:null!=o?o:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t,i;return null!==(t=null===(i=this.beans.showRowGroupCols)||void 0===i?void 0:i.isRowGroupDisplayed(this,e))&&void 0!==t&&t}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var i,o,n,s;this.frameworkEventListenerService=null===(i=(o=this.beans.frameworkOverrides).createLocalEventListenerWrapper)||void 0===i?void 0:i.call(o,this.frameworkEventListenerService,this.colEventSvc);const r=null!==(n=null===(s=this.frameworkEventListenerService)||void 0===s?void 0:s.wrap(e,t))&&void 0!==n?n:t;this.colEventSvc.addEventListener(e,r)}removeEventListener(e,t){var i,o;const n=null!==(i=null===(o=this.frameworkEventListenerService)||void 0===o?void 0:o.unwrap(e,t))&&void 0!==i?i:t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return oo(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t,i;return null!==(t=null===(i=this.beans.cellNavigation)||void 0===i?void 0:i.isSuppressNavigable(this,e))&&void 0!==t&&t}isCellEditable(e){var t,i;return null!==(t=null===(i=this.beans.editSvc)||void 0===i?void 0:i.isCellEditable({rowNode:e,column:this}))&&void 0!==t&&t}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t,i;return null!==(t=null===(i=this.beans.selectionSvc)||void 0===i?void 0:i.isCellCheckboxSelection(this,e))&&void 0!==t&&t}isSuppressPaste(e){var t,i;return this.isColumnFunc(e,null!==(t=null===(i=this.colDef)||void 0===i?void 0:i.suppressPaste)&&void 0!==t?t:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var t;return null!==(t=this.colDef[e])&&void 0!==t?t:ro[e]}isColumnFunc(e,t){if("boolean"===typeof t)return t;if("function"===typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}createColumnEvent(e,t){return oo(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sortDef.direction}getSortDef(){return this.sortDef.direction?this.sortDef:null}getColDefAllowedSortTypes(){const e=[],{sort:t,initialSort:i}=this.colDef,o=null===t?t:bo(null===t||void 0===t?void 0:t.type),n=null===i?i:bo(null===i||void 0===i?void 0:i.type);return o&&e.push(o),n&&e.push(n),e}getSortingOrder(){var e,t;const i=this.getColDefAllowedSortTypes().includes("absolute")?ho:uo;return(null!==(e=null!==(t=this.colDef.sortingOrder)&&void 0!==t?t:this.gos.get("sortingOrder"))&&void 0!==e?e:i).map(e=>go(e))}getAvailableSortTypes(){const e=this.getSortingOrder().reduce((e,t)=>(t.direction&&e.push(t.type),e),this.getColDefAllowedSortTypes());return new Set(e)}get wasSortExplicitlyRemoved(){return this._wasSortExplicitlyRemoved}setSortDef(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this._wasSortExplicitlyRemoved=!e.direction),this.sortDef=e}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.getSort()}isSortDescending(){return"desc"===this.getSort()}isSortNone(){return m(this.getSort())}isSorting(){return v(this.getSort())}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return oi(261),!(null===(e=this.beans.colHover)||void 0===e||!e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;null!==(t=e)&&void 0!==t&&t.isPadding();){var t;e=e.getOriginalParent()}return e}getColumnGroupPaddingInfo(){var e;let t=this.getParent();if(null===(e=t)||void 0===e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const i=t.getPaddingLevel()+1;let o=!0;for(;t;){if(!t.isPadding()){o=!1;break}t=t.getParent()}return{numberOfParents:i,isSpanningTotal:o}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return oo(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(m(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(m(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,null!=this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}isAllowFormula(){return!0===this.colDef.allowFormula}dispatchColEvent(e,t,i){const o=this.createColumnEvent(e,t);i&&St(o,i),this.colEventSvc.dispatchEvent(o)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function go(e){return fo(e)?{direction:e.direction,type:e.type}:{direction:wo(e),type:bo(e)}}function vo(e){return"asc"===e||"desc"===e||null===e}function mo(e){return"default"===e||"absolute"===e}function fo(e){if(!e||"object"!==typeof e)return!1;const t=e;return mo(t.type)&&vo(t.direction)}function Co(e,t){return e?t?e.type===t.type&&e.direction===t.direction:!e||null===e.direction:!t||null===t.direction}function wo(e){return vo(e)?e:null}function bo(e){return mo(e)?e:"default"}function yo(e){return e instanceof So}var So=class extends ht{constructor(e,t,i,o){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=o,this.isColumn=!1,this.expandable=!1,this.instanceId=lo(),this.expandableListenerRemoveCallback=null,this.expanded=!(null===e||void 0===e||!e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some(e=>e.isVisible())}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)co(t)?e(t):yo(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)co(t)?e.push(t):yo(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const o=this.findChildrenRemovingPadding();for(let s=0,r=o.length;s<r;s++){const n=o[s];if(!n.isVisible())continue;const r=n.getColumnGroupShow();"open"===r?(e=!0,i=!0):"closed"===r?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{for(const o of i){yo(o)&&o.isPadding()?t(o.children):e.push(o)}};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},xo={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function Fo(e,t,i){const o={},n=e.gos;return Object.assign(o,n.get("defaultColGroupDef")),Object.assign(o,t),n.validateColDef(o,i),o}var Ro=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=f(e);let i=0;for(;;){let o=null!==e&&void 0!==e?e:t;if(o?0!==i&&(o+="_"+i):o=i,!this.existingKeys[o]){const t=String(o);return e&&i>0&&oi(273,{providedId:e,usedId:t}),this.existingKeys[t]=!0,t}i++}}},Po=Object.freeze([]);function Do(e){if(null!==e&&void 0!==e&&e.length)return e[e.length-1]}function Eo(e,t,i){if(e===t)return!0;if(!e||!t)return null==e&&null==t;const o=e.length;if(o!==t.length)return!1;for(let n=0;n<o;n++)if(e[n]!==t[n]&&(null===i||void 0===i||!i(e[n],t[n])))return!1;return!0}function Ao(e,t){if(e)for(const i of e)if(t(i))return!0}function Mo(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function To(e,t){let i=0,o=0;for(;i<e.length;i++)t.includes(e[i])||(e[o]=e[i],o++);for(;o<e.length;)e.pop()}function ko(e,t,i){for(let o=0;o<t.length;o++)Mo(e,t[o]);for(let o=t.length-1;o>=0;o--)e.splice(i,0,t[o])}function Io(e){return[].concat.apply([],e)}var Lo="ag-Grid-AutoColumn",No="ag-Grid-SelectionColumn",Oo="ag-Grid-RowNumbersColumn",Go="ag-Grid-HierarchyColumn";function Bo(e){const t=[],i=e=>{for(let o=0;o<e.length;o++){const n=e[o];co(n)?t.push(n):yo(n)&&i(n.getChildren())}};return i(e),t}function Vo(e){return e.reduce((e,t)=>e+t.getActualWidth(),0)}function Ho(e,t,i){const o={};if(!t)return;dn(null,t,e=>{o[e.getInstanceId()]=e}),i&&dn(null,i,e=>{o[e.getInstanceId()]=null});const n=Object.values(o).filter(e=>null!=e);e.context.destroyBeans(n)}function zo(e){return e.getId().startsWith(Lo)}function Wo(e){var t;const i="string"===typeof e?e:"getColId"in e?e.getColId():e.colId;return null!==(t=null===i||void 0===i?void 0:i.startsWith(No))&&void 0!==t&&t}function Uo(e){var t;const i="string"===typeof e?e:"getColId"in e?e.getColId():e.colId;return null!==(t=null===i||void 0===i?void 0:i.startsWith(Oo))&&void 0!==t&&t}function jo(e){return Wo(e)||Uo(e)}function _o(e){let t=[];return e instanceof Array?t=e:"string"===typeof e&&(t=e.split(",")),t}function Ko(e,t){return Eo(e,t,(e,t)=>e.getColId()===t.getColId())}function Yo(e){e.map={};for(const t of e.list)e.map[t.getId()]=t}function qo(e){return"optionsUpdated"===e?"gridOptionsChanged":e}function Qo(e,t){const i=e===t,o=e.getColDef()===t,n=e.getColId()==t;return i||o||n}function Xo(e,t){const i=(0,n.A)((0,n.A)({},e),{},{sort:void 0,colId:t}),o=$o(e);return o&&(i.sort=o.direction,i.sortType=o.type),i}function $o(e){const{sort:t,initialSort:i}=e,o=fo(t)||vo(t),n=fo(i)||vo(i);return o?go(t):n?go(i):null}var Zo=(e,t)=>{yo(e)&&e.setupExpandable(),e.originalParent=t};function Jo(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const{existingCols:r,existingGroups:a}=tn(n),l=new Map(r.map(e=>[e.getId(),e])),d=new Map(a.map(e=>[e.getId(),e]));let c=0;const u=(t,i)=>{var n,r,a;if(c=Math.max(c,i),ln(t)){if(!e.colGroupSvc)return null;const o=t.groupId,n=d.get(o),s=Fo(e,t,o),r=new So(s,o,!1,i);return e.context.createBean(r),n&&r.setExpanded(n.isExpanded()),r.setChildren(t.children.map(e=>u(e,i+1))),r}const h=t.colId;let p=l.get(h);const g=an(e,t,null!==(n=null===(r=p)||void 0===r?void 0:r.getColId())&&void 0!==n?n:h);return p?(p.setColDef(g,t,s),rn(e,p,g,s)):(p=new po(g,t,h,o),e.context.createBean(p)),null===(a=e.dataTypeSvc)||void 0===a||a.addColumnListeners(p),p},h=null!==(t=null===i||void 0===i?void 0:i.map(e=>u(e,0)))&&void 0!==t?t:[];let p=0;const g={getUniqueKey:(e,t)=>String(++p)},v=e.colGroupSvc?e.colGroupSvc.balanceColumnTree(h,0,c,g):h;return dn(null,v,Zo),{columnTree:v,treeDepth:c}}function en(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const r=new Ro,{existingCols:a,existingGroups:l,existingColKeys:d}=tn(n);r.addExistingKeys(d);const c=on(e,i,0,o,a,r,l,s),{colGroupSvc:u}=e,h=null!==(t=null===u||void 0===u?void 0:u.findMaxDepth(c,0))&&void 0!==t?t:0,p=u?u.balanceColumnTree(c,0,h,r):c;return dn(null,p,Zo),{columnTree:p,treeDepth:h}}function tn(e){const t=[],i=[],o=[];return e&&dn(null,e,e=>{if(yo(e)){const t=e;i.push(t)}else{const i=e;o.push(i.getId()),t.push(i)}}),{existingCols:t,existingGroups:i,existingColKeys:o}}function on(e,t,i,o,n,s,r,a){if(!t)return[];const{colGroupSvc:l}=e,d=new Array(t.length);for(let c=0;c<d.length;c++){const u=t[c];l&&ln(u)?d[c]=l.createProvidedColumnGroup(o,u,i,n,s,r,a):d[c]=nn(e,o,u,n,s,a)}return d}function nn(e,t,i,o,n,s){var r;const a=function(e,t){if(!t)return;for(let i=0;i<t.length;i++){const o=t[i].getUserProvidedColDef();if(!o)continue;if(null!=e.colId){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(null!=e.field){if(o.field===e.field)return{idx:i,column:t[i]}}else if(o===e)return{idx:i,column:t[i]}}return}(i,o);a&&(null===o||void 0===o||o.splice(a.idx,1));let l=null===a||void 0===a?void 0:a.column;if(l){const t=an(e,i,l.getColId());l.setColDef(t,i,s),rn(e,l,t,s)}else{const o=n.getUniqueKey(i.colId,i.field),s=an(e,i,o);l=new po(s,i,o,t),e.context.createBean(l)}return null===(r=e.dataTypeSvc)||void 0===r||r.addColumnListeners(l),l}function sn(e,t,i,o,n,s,r,a){const{sortSvc:l,pinnedCols:d,colFlex:c}=e;void 0!==i&&t.setVisible(!i,a),l&&(l.updateColSort(t,o,a),void 0!==n&&l.setColSortIndex(t,n)),void 0!==s&&(null===d||void 0===d||d.setColPinned(t,s)),void 0!==r&&(null===c||void 0===c||c.setColFlex(t,r))}function rn(e,t,i,o){sn(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,o);const n=t.getFlex();if(!(null!=n&&n>0))if(null!=i.width)t.setActualWidth(i.width,o);else{const e=t.getActualWidth();t.setActualWidth(e,o)}}function an(e,t,i,o){const{gos:n,dataTypeSvc:s}=e,r={};St(r,n.get("defaultColDef"),!1,!0);const a=function(e,t,i,o){var n,s,r;const a=null===(n=e.dataTypeSvc)||void 0===n?void 0:n.updateColDefAndGetColumnType(t,i,o),l=null!==(s=null!==(r=i.type)&&void 0!==r?r:a)&&void 0!==s?s:t.type;return t.type=l,l?_o(l):void 0}(e,r,t,i);a&&function(e,t,i){if(!t.length)return;const o=Object.assign({},xo),n=e.gos.get("columnTypes")||{};for(const s of Object.keys(n)){const e=n[s];if(s in o)oi(34,{key:s});else{e.type&&oi(35),o[s]=e}}for(const s of t){const e=o[s.trim()];e?St(i,e,!1,!0):oi(36,{t:s})}}(e,a,r);const l=r.cellDataType;St(r,t,!1,!0),void 0!==l&&(r.cellDataType=l);const d=n.get("autoGroupColumnDef"),c=Fi(n);return t.rowGroup&&d&&c&&St(r,{sort:d.sort,initialSort:d.initialSort},!1,!0),null===s||void 0===s||s.postProcess(r),null===s||void 0===s||s.validateColDef(r),n.validateColDef(r,i,o),r}function ln(e){return void 0!==e.children}function dn(e,t,i){if(t)for(let o=0;o<t.length;o++){const n=t[o];yo(n)&&dn(n,n.getChildren(),i),i(n,e)}}function cn(e,t){const i=[],o=[],n=[];e.forEach(e=>{const t=e.getColDef().lockPosition;"right"===t?n.push(e):"left"===t||!0===t?i.push(e):o.push(e)});return t.get("enableRtl")?[...n,...o,...i]:[...i,...o,...n]}function un(e,t){let i=!0;return dn(null,t,t=>{if(!yo(t))return;const o=t,n=o.getColGroupDef();if(!(null===n||void 0===n?void 0:n.marryChildren))return;const s=[];for(const i of o.getLeafColumns()){const t=e.indexOf(i);s.push(t)}Math.max.apply(Math,s)-Math.min.apply(Math,s)>o.getLeafColumns().length-1&&(i=!1)}),i}function hn(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let o=1;o<e.length;o++)if(i!==t(e[o]))return;return i}function pn(e,t,i){if(!t.length)return;const o=1===t.length?t[0]:null,n=hn(t,e=>e.getPinned());e.dispatchEvent({type:"columnPinned",pinned:null!=n?n:null,columns:t,column:o,source:i})}function gn(e,t,i,o){e.dispatchEvent({type:t,columns:i,column:i&&1==i.length?i[0]:null,source:o})}function vn(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null!==t&&void 0!==t&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:1===t.length?t[0]:null,flexColumns:n,finished:i,source:o})}function mn(e,t,i){var o;const{colModel:n,rowGroupColsSvc:s,pivotColsSvc:r,autoColSvc:a,selectionColSvc:l,colAnimation:d,visibleCols:c,pivotResultCols:u,environment:h,valueColsSvc:p,eventSvc:g,gos:m}=e,f=null!==(o=n.getColDefCols())&&void 0!==o?o:[],C=null===l||void 0===l?void 0:l.getColumns();if(!f.length&&(null===C||void 0===C||!C.length))return!1;if(null!==t&&void 0!==t&&t.state&&!t.state.forEach)return oi(32),!1;const w=(o,n,a,l,d)=>{if(!o)return;const c=((e,t)=>(i,o)=>{const n={value1:void 0,value2:void 0};let s=!1;return e&&(void 0!==e[i]&&(n.value1=e[i],s=!0),v(o)&&void 0!==e[o]&&(n.value2=e[o],s=!0)),!s&&t&&(void 0!==t[i]&&(n.value1=t[i]),v(o)&&void 0!==t[o]&&(n.value2=t[o])),n})(n,t.defaultState),u=c("flex").value1,g=c("sort").value1,m=c("sortType").value1,f=vo(g)||mo(m),C=bo(m),w=wo(g),b=f?{type:C,direction:w}:void 0;if(sn(e,o,c("hide").value1,b,c("sortIndex").value1,c("pinned").value1,u,i),null==u){const e=c("width").value1;if(null!=e){var y;const t=null!==(y=o.getColDef().minWidth)&&void 0!==y?y:h.getDefaultColumnMinWidth();null!=t&&e>=t&&o.setActualWidth(e,i)}}!d&&o.isPrimary()&&(null===p||void 0===p||p.syncColumnWithState(o,i,c),null===s||void 0===s||s.syncColumnWithState(o,i,c,a),null===r||void 0===r||r.syncColumnWithState(o,i,c,l))},b=(o,d,u)=>{var h,p,v,f;const C=Cn(e,i),b=d.slice(),y={},S={},x=[],F=[],R=[];let P=0;const D=null!==(h=null===s||void 0===s?void 0:s.columns.slice())&&void 0!==h?h:[],E=null!==(p=null===r||void 0===r?void 0:r.columns.slice())&&void 0!==p?p:[];for(const e of o){const t=e.colId;if(t.startsWith(Lo)){x.push(e),R.push(e);continue}if(Wo(t)){F.push(e),R.push(e);continue}const i=u(t);i?(w(i,e,y,S,!1),Mo(b,i)):(R.push(e),P+=1)}const A=e=>w(e,null,y,S,!1);b.forEach(A),null===s||void 0===s||s.sortColumns(yn.bind(s,y,D)),null===r||void 0===r||r.sortColumns(yn.bind(r,S,E)),n.refreshCols(!1,i);const M=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(const o of t){const t=e(o.colId);Mo(i,t),w(t,o,null,null,!0)}i.forEach(A)};return M(e=>{var t;return null!==(t=null===a||void 0===a?void 0:a.getColumn(e))&&void 0!==t?t:null},x,null===a||void 0===a||null===(v=a.getColumns())||void 0===v?void 0:v.slice()),M(e=>{var t;return null!==(t=null===l||void 0===l?void 0:l.getColumn(e))&&void 0!==t?t:null},F,null===l||void 0===l||null===(f=l.getColumns())||void 0===f?void 0:f.slice()),function(e,t,i){if(!e.applyOrder||!e.state)return;const o=[];for(const n of e.state)null!=n.colId&&o.push(n.colId);!function(e,t,i,o){if(null==e)return;let n=[];const s={};for(const a of t){if(s[a])continue;const t=e.map[a];t&&(n.push(t),s[a]=!0)}let r=0;for(const a of e.list){const e=a.getColId();if(null!=s[e])continue;e.startsWith(Lo)?n.splice(r++,0,a):n.push(a)}if(n=cn(n,o),!un(n,i.getColTree()))return void oi(39);e.list=n}(t.cols,o,t,i)}(t,n,m),c.refresh(i),g.dispatchEvent({type:"columnEverythingChanged",source:i}),C(),{unmatchedAndAutoStates:R,unmatchedCount:P}};null===d||void 0===d||d.start();let{unmatchedAndAutoStates:y,unmatchedCount:S}=b(t.state||[],f,e=>n.getColDefCol(e));if(y.length>0||v(t.defaultState)){var x,F;S=b(y,null!==(x=null===u||void 0===u||null===(F=u.getPivotResultCols())||void 0===F?void 0:F.list)&&void 0!==x?x:[],e=>{var t;return null!==(t=null===u||void 0===u?void 0:u.getPivotResultCol(e))&&void 0!==t?t:null}).unmatchedCount}return null===d||void 0===d||d.finish(),0===S}function fn(e,t){var i,o,n,s;const{colModel:r,autoColSvc:a,selectionColSvc:l,eventSvc:d,gos:c}=e,u=r.getColDefCols();if(null===u||void 0===u||!u.length)return;const h=Bo(r.getColDefColTree()),p=[];let g=1e3,v=1e3;const f=e=>{const t=bn(e);m(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=g++),m(t.pivotIndex)&&t.pivot&&(t.pivotIndex=v++),p.push(t)};null===a||void 0===a||null===(i=a.getColumns())||void 0===i||i.forEach(f),null===l||void 0===l||null===(o=l.getColumns())||void 0===o||o.forEach(f),null===h||void 0===h||h.forEach(f),mn(e,{state:p},t);const C=null!==(n=null===a||void 0===a?void 0:a.getColumns())&&void 0!==n?n:[];mn(e,{state:[...null!==(s=null===l||void 0===l?void 0:l.getColumns())&&void 0!==s?s:[],...C,...u].map(e=>({colId:e.colId})),applyOrder:!0},t),d.dispatchEvent(oo(c,{type:"columnsReset",source:t}))}function Cn(e,t){var i,o,n;const{rowGroupColsSvc:s,pivotColsSvc:r,valueColsSvc:a,colModel:l,sortSvc:d,eventSvc:c}=e,u={rowGroupColumns:null!==(i=null===s||void 0===s?void 0:s.columns.slice())&&void 0!==i?i:[],pivotColumns:null!==(o=null===r||void 0===r?void 0:r.columns.slice())&&void 0!==o?o:[],valueColumns:null!==(n=null===a||void 0===a?void 0:a.columns.slice())&&void 0!==n?n:[]},h=wn(e),p={};for(const g of h)p[g.colId]=g;return()=>{var i,o;const n=(e,i,o,n)=>{if(Eo(i.map(n),o.map(n)))return;const s=new Set(i);for(const t of o)s.delete(t)||s.add(t);const r=[...s];c.dispatchEvent({type:e,columns:r,column:1===r.length?r[0]:null,source:t})},a=e=>{const t=[];return l.forAllCols(i=>{const o=p[i.getColId()];o&&e(o,i)&&t.push(i)}),t},g=e=>e.getColId();n("columnRowGroupChanged",u.rowGroupColumns,null!==(i=null===s||void 0===s?void 0:s.columns)&&void 0!==i?i:[],g),n("columnPivotChanged",u.pivotColumns,null!==(o=null===r||void 0===r?void 0:r.columns)&&void 0!==o?o:[],g);const v=a((e,t)=>{const i=null!=e.aggFunc,o=i!=t.isValueActive(),n=i&&e.aggFunc!=t.getAggFunc();return o||n});v.length>0&&gn(c,"columnValueChanged",v,t);vn(c,a((e,t)=>e.width!=t.getActualWidth()),!0,t);pn(c,a((e,t)=>e.pinned!=t.getPinned()),t);!function(e,t,i){if(!t.length)return;const o=1===t.length?t[0]:null,n=hn(t,e=>e.isVisible());e.dispatchEvent({type:"columnVisible",visible:n,columns:t,column:o,source:i})}(c,a((e,t)=>e.hide==t.isVisible()),t);const m=a((e,t)=>!Co(t.getSortDef(),{type:bo(e.sortType),direction:wo(e.sort)})||e.sortIndex!=t.getSortIndex());m.length>0&&(null===d||void 0===d||d.dispatchSortChangedEvents(t,m));const f=wn(e);!function(e,t,i,o,n){const s={};for(const c of t)s[c.colId]=c;const r={};for(const c of e)s[c.colId]&&(r[c.colId]=!0);const a=e.filter(e=>r[e.colId]),l=t.filter(e=>r[e.colId]),d=[];if(l.forEach((e,t)=>{const i=null===a||void 0===a?void 0:a[t];if(i&&i.colId!==e.colId){const e=o.getCol(i.colId);e&&d.push(e)}}),!d.length)return;n.dispatchEvent({type:"columnMoved",columns:d,column:1===d.length?d[0]:null,finished:!0,source:i})}(h,f,t,l,c)}}function wn(e){const{colModel:t,rowGroupColsSvc:i,pivotColsSvc:o}=e;if(m(t.getColDefCols())||!t.isAlive())return[];const n=null===i||void 0===i?void 0:i.columns,s=null===o||void 0===o?void 0:o.columns,r=[];t.forAllCols(e=>(e=>{var t,i;const o=e.isRowGroupActive()&&n?n.indexOf(e):null,a=e.isPivotActive()&&s?s.indexOf(e):null,l=e.isValueActive()?e.getAggFunc():null,d=null!=e.getSortIndex()?e.getSortIndex():null;r.push({colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:e.getSort(),sortType:null===(t=e.getSortDef())||void 0===t?void 0:t.type,sortIndex:d,aggFunc:l,rowGroup:e.isRowGroupActive(),rowGroupIndex:o,pivot:e.isPivotActive(),pivotIndex:a,flex:null!==(i=e.getFlex())&&void 0!==i?i:null})})(e));const a=new Map(t.getCols().map((e,t)=>[e.getColId(),t]));return r.sort((e,t)=>(a.has(e.colId)?a.get(e.colId):-1)-(a.has(t.colId)?a.get(t.colId):-1)),r}function bn(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),o=go(t(i.sort,i.initialSort)),n=o.direction,s=o.type,r=t(i.sortIndex,i.initialSortIndex),a=t(i.hide,i.initialHide),l=t(i.pinned,i.initialPinned),d=t(i.width,i.initialWidth),c=t(i.flex,i.initialFlex);let u=t(i.rowGroupIndex,i.initialRowGroupIndex),h=t(i.rowGroup,i.initialRowGroup);null!=u||h||(u=null,h=null);let p=t(i.pivotIndex,i.initialPivotIndex),g=t(i.pivot,i.initialPivot);null!=p||g||(p=null,g=null);const v=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortType:s,sortIndex:r,hide:a,pinned:l,width:d,flex:c,rowGroup:h,rowGroupIndex:u,pivot:g,pivotIndex:p,aggFunc:v}}var yn=(e,t,i,o)=>{const n=e[i.getId()],s=e[o.getId()],r=null!=n,a=null!=s;if(r&&a)return n-s;if(r)return-1;if(a)return 1;const l=t.indexOf(i),d=t.indexOf(o),c=l>=0;return c&&d>=0?l-d:c?-1:1},Sn=class extends ht{constructor(){super(...arguments),this.dispatchColumnChangedEvent=gn,this.columns=[],this.columnIndexMap={},this.updateIndexMap=()=>{this.columnIndexMap={},this.columns.forEach((e,t)=>this.columnIndexMap[e.getId()]=t)}}wireBeans(e){this.colModel=e.colModel,this.aggFuncSvc=e.aggFuncSvc,this.visibleCols=e.visibleCols,this.groupHierarchCols=e.groupHierarchyColSvc}sortColumns(e){const{groupHierarchCols:t}=this;this.columns.sort((i,o)=>{var n;return null!==(n=null===t||void 0===t?void 0:t.compareVirtualColumns(i,o))&&void 0!==n?n:e(i,o)}),this.updateIndexMap()}setColumns(e,t){this.setColList(e,this.columns,this.eventName,!0,!0,this.columnProcessors.set,t)}addColumns(e,t){this.updateColList(e,this.columns,!0,!0,this.columnProcessors.add,this.eventName,t)}removeColumns(e,t){this.updateColList(e,this.columns,!1,!0,this.columnProcessors.remove,this.eventName,t)}getColumnIndex(e){return this.columnIndexMap[e]}setColList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;const a=this.colModel.getCols();if(!a||0===a.length)return;const l=new Map;t.forEach((e,t)=>l.set(e,t)),t.length=0;for(const c of e){const e=this.colModel.getColDefCol(c);e&&t.push(e)}t.forEach((e,t)=>{const i=l.get(e);void 0!==i?o&&i!==t||l.delete(e):l.set(e,0)}),this.updateIndexMap();const d=this.colModel.getColDefCols();for(const c of null!==d&&void 0!==d?d:[]){s(c,t.indexOf(c)>=0,r)}n&&this.colModel.refreshCols(!1,r),this.visibleCols.refresh(r),this.dispatchColumnChangedEvent(this.eventSvc,i,[...l.keys()],r)}updateColList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;if(!e||0===e.length)return;let a=!1;const l=new Set;for(const c of e){if(!c)continue;const e=this.colModel.getColDefCol(c);if(e){if(l.add(e),i){if(t.indexOf(e)>=0)continue;t.push(e)}else{const i=t.indexOf(e);if(i<0)continue;for(let e=i+1;e<t.length;e++)l.add(t[e]);Mo(t,e)}n(e,i,r),a=!0}}if(!a)return;this.updateIndexMap(),o&&this.colModel.refreshCols(!1,r),this.visibleCols.refresh(r);const d=Array.from(l);this.eventSvc.dispatchEvent({type:s,columns:d,column:1===d.length?d[0]:null,source:r})}extractCols(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=this.columns,o=[],n=[],{setFlagFunc:s,getIndexFunc:r,getInitialIndexFunc:a,getValueFunc:l,getInitialValueFunc:d}=this.columnExtractors,c=this.colModel.getColDefCols();for(const v of null!==c&&void 0!==c?c:[]){const e=!t.includes(v),s=v.getColDef(),c=l(s),u=d(s),h=r(s),p=a(s);let g;if(g=void 0!==c?c:void 0!==h?null!==h&&h>=0:e?void 0!==u?u:!!(void 0!==p)&&(null!=p&&p>=0):i.indexOf(v)>=0,g){(e?null!=h||null!=p:null!=h)?o.push(v):n.push(v)}}const u=e=>{var t;const i=e.getColDef();return null!==(t=r(i))&&void 0!==t?t:a(i)};o.sort((e,t)=>u(e)-u(t));const h=[],p=this.groupHierarchCols,g=e=>{p?p.expandColumnInto(h,e):h.push(e)};o.forEach(g);for(const v of i)n.indexOf(v)>=0&&g(v);for(const v of n)h.indexOf(v)<0&&g(v);for(const v of i)h.indexOf(v)<0&&s(v,!1,e);for(const v of h)i.indexOf(v)<0&&s(v,!0,e);return this.columns=h,this.updateIndexMap(),this.columns}restoreColumnOrder(e,t){const i=this.columns,o=this.colModel.getColDefCols();if(!i.length||!o)return e;const n=Object.keys(t),s=new Set(n),r=new Set(n),a=new Set(i.map(e=>{const t=e.getColId();return r.delete(t),t}).concat(n)),l=[],d={};let c=0;for(let w=0;w<o.length;w++){const e=o[w].getColId();a.has(e)&&(l.push(e),d[e]=c++)}let u=1e3,h=!1,p=0;const g=this.columnOrdering.enableProp,v=this.columnOrdering.initialEnableProp,m=this.columnOrdering.indexProp,f=this.columnOrdering.initialIndexProp,C=e=>{const i=d[e];for(let o=p;o<i;o++){const e=l[o];r.has(e)&&(t[e][m]=u++,r.delete(e))}p=i};for(const w of i){const i=w.getColId();if(s.has(i))C(i),t[i][m]=u++;else{const o=w.getColDef();if(null===o[m]||void 0===o[m]&&null==o[f]){if(!h){if(o[g]||void 0===o[g]&&o[v])C(i);else{for(const e of r)t[e][m]=u+d[e];u+=l.length,h=!0}}e[i]||(e[i]={colId:i}),e[i][m]=u++}}}return e}},xn=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!==typeof t?0:t+1,this.existingIds[e]=i,i}},Fn=class extends ht{};function Rn(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),null!==i&&void 0!==i?i:e}var Pn=null;function Dn(e){return"function"===typeof(null===e||void 0===e?void 0:e.getGui)}var En=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.includes(" ")){const i=(e||"").split(" ");if(i.length>1){for(const e of i)this.toggleCss(e,t);return}}var i;this.cssClassStates[e]!==t&&e.length&&(null===(i=this.getGui())||void 0===i||i.classList.toggle(e,t),this.cssClassStates[e]=t)}},An=0,Mn=class extends ut{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=An++,this.cssManager=new En(()=>this.eGui),this.componentSelectors=new Map((null!==t&&void 0!==t?t:[]).map(e=>[e.selector,e])),e&&this.setTemplate(e)}preConstruct(){var e;this.wireTemplate(this.getGui());const t="component-"+(null===(e=Object.getPrototypeOf(this))||void 0===e||null===(e=e.constructor)||void 0===e?void 0:e.name);for(const o of null!==(i=this.css)&&void 0!==i?i:[]){var i;this.beans.environment.addGlobalCSS(o,t)}}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(Ke):null}applyElementsToComponent(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===t&&(t=this.getDataRefAttribute(e)),t){const n=this[t];if(n===Pn)this[t]=null!==o&&void 0!==o?o:e;else{const e=null===i||void 0===i?void 0:i[t];if(!this.suppressDataRefValidation&&!e)throw new Error("data-ref: ".concat(t," on ").concat(this.constructor.name," with ").concat(n))}}}createChildComponentsFromTags(e,t){const i=[];for(const n of null!==(o=e.childNodes)&&void 0!==o?o:[]){var o;i.push(n)}for(const n of i){if(!(n instanceof HTMLElement))continue;const i=this.createComponentFromElement(n,e=>{const t=e.getGui();if(t)for(const o of null!==(i=n.attributes)&&void 0!==i?i:[]){var i;t.setAttribute(o.name,o.value)}},t);if(i){if(i.addItems&&n.children.length){this.createChildComponentsFromTags(n,t);const e=Array.prototype.slice.call(n.children);i.addItems(e)}this.swapComponentForNode(i,e,n)}else n.childNodes&&this.createChildComponentsFromTags(n,t)}}createComponentFromElement(e,t,i){const o=e.nodeName,n=this.getDataRefAttribute(e),s=0===o.indexOf("AG-"),r=s?this.componentSelectors.get(o):null;let a=null;if(r){const e=i&&n?i[n]:void 0;a=new r.component(e),a.setParentComponent(this),this.createBean(a,null,t)}else if(s)throw new Error("selector: ".concat(o));return this.applyElementsToComponent(e,n,i,a),a}swapComponentForNode(e,t,i){const o=e.getGui();t.replaceChild(o,i),t.insertBefore(document.createComment(i.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e,t){const i=null!==t&&void 0!==t?t:this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const o of e)o.setAttribute("tabindex",i.toString())}setTemplate(e,t,i){let o;o="string"===typeof e||null==e?Ae(e):qe(e),this.setTemplateFromElement(o,t,i)}setTemplateFromElement(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.eGui=e,this.suppressDataRefValidation=o,t)for(let n=0;n<t.length;n++){const e=t[n];this.componentSelectors.set(e.selector,e)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),ze(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:o}=this.getContainerAndElement(e,t)||{};i&&o&&o.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:o}=this.getContainerAndElement(e,t)||{};i&&o&&o.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;ge(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;pe(this.eGui,e,{skipAriaHidden:i});const o={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(o)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},Tn=class extends Mn{};function kn(e){return"object"===typeof e&&!!e.component}function In(e){return"function"===typeof e.then}var Ln=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(e=>this.onDone(e),e=>this.onReject(e))}static all(t){return t.length?new e(e=>{let i=t.length;const o=new Array(i);t.forEach((t,n)=>{t.then(t=>{o[n]=t,i--,0===i&&e(o)})})}):e.resolve()}static resolve(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new e(e=>e(t))}then(t){return new e(e=>{1===this.status?e(t(this.resolution)):this.waiters.push(i=>e(t(i)))})}onDone(e){this.status=1,this.resolution=e;for(const t of this.waiters)t(e)}onReject(e){}};function Nn(e,t,i,o){const{name:n}=i;let s,r,a,l,d,c;if(t){const i=t,u=i[n+"Selector"],h=u?u(o):null,p=t=>{if("string"===typeof t)s=t;else if(null!=t&&!0!==t){e.isFrameworkComponent(t)?a=t:r=t}};h?(p(h.component),l=h.params,d=h.popup,c=h.popupPosition):p(i[n])}return{compName:s,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:d,popupPositionFromSelector:c}}var On={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},Gn={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},Bn={name:"headerComponent",optionalMethods:["refresh"]},Vn={name:"innerHeaderComponent"},Hn={name:"innerHeaderGroupComponent"},zn={name:"headerGroupComponent"},Wn={name:"innerRenderer",cellRenderer:!0,optionalMethods:["afterGuiAttached"]},Un={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},jn={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"]},_n={name:"loadingCellRenderer",cellRenderer:!0},Kn={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},Yn={name:"tooltipComponent"},qn={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},Qn={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},Xn={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},$n={name:"loadingCellRenderer",cellRenderer:!0},Zn={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},Jn={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function es(e,t,i){return e.getCompDetails(t,Wn,void 0,i)}function ts(e,t,i){return e.getCompDetails(t,Un,void 0,i)}function is(e,t,i){return e.getCompDetails(t,jn,void 0,i)}function os(e,t,i){return e.getCompDetails(t,_n,"agSkeletonCellRenderer",i,!0)}function ns(e,t,i){return e.getCompDetails(t,Kn,"agCellEditor",i,!0)}function ss(e,t,i,o){const n=t.filter;return kn(n)&&(t={filter:n.component,filterParams:t.filterParams}),e.getCompDetails(t,qn,o,i,!0)}function rs(e,t,i,o){return e.getCompDetails(t,Qn,o,i)}function as(e,t){return Nn(e,t,qn)}function ls(e,t,i){return e.mergeParams(t,qn,i)}function ds(e){const t=e;return null!=(null===t||void 0===t?void 0:t.getFrameworkComponentInstance)?t.getFrameworkComponentInstance():e}function cs(e){return"object"===typeof e&&!!e.getComp}var us={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"};function hs(e){const{keyCode:t}=e;let i;switch(t){case 65:i=us.A;break;case 67:i=us.C;break;case 86:i=us.V;break;case 68:i=us.D;break;case 90:i=us.Z;break;case 89:i=us.Y;break;default:i=e.code}return i}var ps,gs,vs,ms,fs,Cs,ws,bs=class extends Mn{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;(null===e||void 0===e?void 0:e.isAlive())&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}};function ys(){return void 0===ps&&(ps=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),ps}function Ss(){return void 0===gs&&(gs=/(firefox)/i.test(navigator.userAgent)),gs}function xs(){return void 0===vs&&(vs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),vs}function Fs(){return void 0===ms&&(ms=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),ms}function Rs(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||Ss())?t.toString():null}function Ps(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.remove(),null!=i&&(Cs=i,fs=0===i)}function Ds(){return null==fs&&Ps(),fs}var Es=!1,As=0;function Ms(e){const t=Es,i="keydown"===e.type;i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(Es=i)}function Ts(e){const t=D(e);var i;return i=t,As>0||(i.addEventListener("keydown",Ms),i.addEventListener("mousedown",Ms)),As++,()=>{As--,function(e){As>0||(e.removeEventListener("keydown",Ms),e.removeEventListener("mousedown",Ms))}(t)}}function ks(){return Es}function Is(e,t){let i=ue;t&&(i+=", "+t),arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(i+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter(e=>Ee(e)),n=Array.prototype.slice.apply(e.querySelectorAll(i));if(!n.length)return o;return s=n,o.filter(e=>-1===s.indexOf(e));var s}function Ls(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Is(e,arguments.length>3&&void 0!==arguments[3]&&arguments[3]?".ag-tab-guard":null,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),o=t?Do(i):i[0];return!!o&&(o.focus({preventScroll:!0}),!0)}function Ns(e,t,i,o){const n=Is(t,i?':not([tabindex="-1"])':null),s=P(e);let r;r=i?n.findIndex(e=>e.contains(s)):n.indexOf(s);const a=r+(o?-1:1);return a<0||a>=n.length?null:n[a]}function Os(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=0;for(;e&&null===Rs(e)&&++i<=t;)e=e.parentElement;return null===Rs(e)?null:e}var Gs="ag-focus-managed",Bs=class extends ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isStopPropagation:()=>!1,stopPropagation:()=>{}},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.eFocusable=e,this.stopPropagationCallbacks=t,this.callbacks=i,this.callbacks=(0,n.A)({shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=Ns(this.beans,this.eFocusable,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())}},i)}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:i}}=this;e.classList.add(Gs),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),i&&this.addManagedElementListeners(e,{focusout:i})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{if(e.defaultPrevented||this.stopPropagationCallbacks.isStopPropagation(e))return;const{callbacks:t}=this;t.shouldStopEventPropagation(e)?this.stopPropagationCallbacks.stopPropagation(e):e.key===us.TAB?t.onTabKeyDown(e):t.handleKeyDown&&t.handleKeyDown(e)}})}},Vs={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},Hs=class extends ut{constructor(e,t){super(),this.stopPropagationCallbacks=t,this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:i,eTopGuard:o,eBottomGuard:n,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:a,focusInnerElement:l,onFocusIn:d,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:h,handleKeyDown:p,isEmpty:g,eFocusableElement:v}=e;this.comp=i,this.eTopGuard=o,this.eBottomGuard=n,this.providedFocusInnerElement=l,this.eFocusableElement=v,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!a,this.providedFocusIn=d,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=p,this.providedIsEmpty=g}postConstruct(){this.createManagedBean(new Bs(this.eFocusableElement,this.stopPropagationCallbacks,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(this.providedIsEmpty?this.providedIsEmpty():0===Is(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var t;const i=Is(D(this.beans).body,null,!0),o=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===o)return;let n,s;e?(n=0,s=o):(n=o+1,s=i.length);const r=i.slice(n,s),a=this.gos.get("tabIndex");r.sort((e,t)=>{const i=Number.parseInt(e.getAttribute("tabindex")||"0"),o=Number.parseInt(t.getAttribute("tabindex")||"0");return o===a?1:i===a?-1:0===i?1:0===o?-1:i-o}),null===(t=r[e?r.length-1:0])||void 0===t||t.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Is(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(-1,1)),!!t.length&&(t[e?t.length-1:0].focus({preventScroll:!0}),!0)}getNextFocusableElement(e){return Ns(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(null===t||void 0===t||t)}setAllowFocus(e){this.allowFocus=e}},zs=class{constructor(e){var t;this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=null!==(t=e.scrollByTick)&&void 0!==t?t:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return null!==this.tickingInterval}check(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.shouldSkipVerticalScroll();if(t&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=e.clientX<i.left+o,this.tickRight=e.clientX>i.right-o,this.tickUp=e.clientY<i.top+o&&!t,this.tickDown=e.clientY>i.bottom-o&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Ws="ag-resizer-wrapper",Us=(e,t)=>({tag:"div",ref:"".concat(e,"Resizer"),cls:"ag-resizer ag-resizer-".concat(t)}),js={tag:"div",cls:Ws,children:[Us("eTopLeft","topLeft"),Us("eTop","top"),Us("eTopRight","topRight"),Us("eRight","right"),Us("eBottomRight","bottomRight"),Us("eBottom","bottom"),Us("eBottomLeft","bottomLeft"),Us("eLeft","left")]},_s=class extends ut{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=(0,n.A)({popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:i}=this.offsetParent,o=i/2-this.getWidth()/2,n=t/2-this.getHeight()/2;this.offsetElement(o,n,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:i,minWidth:o,width:n,minHeight:s,height:r,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let d=0,c=0;const u=Ee(this.element);if(u){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;c=Number.parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;d=Number.parseInt(t.minHeight,10)-i}}if(this.minHeight=s||d,this.minWidth=o||c,n&&this.setWidth(n),r&&this.setHeight(r),n&&r||this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(u&&i){let t=this.boundaryEl,i=!0;if(t||(t=this.findBoundaryElement(),i=!1),t){const o=Number.parseFloat(t.style.top),n=Number.parseFloat(t.style.left);i?this.offsetElement(Number.isNaN(n)?0:n,Number.isNaN(o)?0:o,e):this.setPosition(n,o)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};var o,n;e?(null===(o=this.dragSvc)||void 0===o||o.addDragSource(i),this.moveElementDragListener=i):(null===(n=this.dragSvc)||void 0===n||n.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"===typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}for(const i of Object.keys(e)){const o=!!e[i],n=this.getResizerElement(i),s={dragStartPixels:0,eElement:n,onDragStart:e=>this.onResizeStart(e,i),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,i)};if(o||!this.isAlive()&&!o){var t;if(o)null===(t=this.dragSvc)||void 0===t||t.addDragSource(s),this.resizeListeners.push(s),n.style.pointerEvents="all";else n.style.pointerEvents="none";this.resizable[i]=o}}}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width="".concat(t,"px")),-1!==e&&(this.element.style.height="".concat(e,"px"))}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let o=!1;if("string"===typeof e&&e.includes("%"))Ve(i,e),e=be(i),o=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(o?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Ve(i,e):(i.style.height="".concat(e,"px"),i.style.flex="0 0 auto",this.lastSize.height="number"===typeof e?e:Number.parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const o=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:o.top,r=e?0:n.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-o.bottom}}return i+r-s-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let o=!1;if("string"===typeof e&&e.includes("%"))Be(t,e),e=ye(t),o=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+o>t&&(e=t-o)}this.getWidth()!==e&&(o?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Be(t,e):(t.style.width="".concat(e,"px"),t.style.flex=" unset",this.lastSize.width="number"===typeof e?e:Number.parseFloat(e)))}offsetElement(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;const{forcePopupParentAsOffsetParent:n}=this.config,s=n?this.boundaryEl:this.element;s&&(null===(e=this.popupSvc)||void 0===e||e.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:i}),postProcessCallback:o}),this.setPosition(Number.parseFloat(s.style.left),Number.parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height","".concat(e,"px"))};var i,o;e&&this.popupSvc?(null===(i=this.resizeObserverSubscriber)||void 0===i||i.call(this),this.resizeObserverSubscriber=Ue(this.beans,null===(o=this.popupSvc)||void 0===o?void 0:o.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:o,anywhereWithin:n,topBuffer:s}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!n,r)?0:r,movementY:this.shouldSkipY(t,!!o,s,a)?0:a}}shouldSkipX(e,t,i,o){const n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left;let l=a<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=r.right;return!!l||(l=t?o<0&&e.clientX>a+s.left||o>0&&e.clientX<a+s.left:i?o<0&&e.clientX>r.right||o>0&&e.clientX<a+s.left:o<0&&e.clientX>r.right||o>0&&e.clientX<r.right,l)}shouldSkipY(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0;const n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top;let l=a<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=r.bottom;return!!l||(l=t?o<0&&e.clientY>a+s.top+i||o>0&&e.clientY<a+s.top:o<0&&e.clientY>r.bottom||o>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=e=>({element:this.element.querySelector("[data-ref=".concat(e,"Resizer]"))});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(qe(js)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(".".concat(Ws));null===e||void 0===e||e.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:o}=this.config;i||o||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(e=>!e.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(const o of e){const e=!!o.style.flex&&"0 0 auto"!==o.style.flex;if(o===this.element)continue;let n=this.minHeight||0,s=this.minWidth||0;if(e){const e=window.getComputedStyle(o);e.minHeight&&(n=Number.parseInt(e.minHeight,10)),e.minWidth&&(s=Number.parseInt(e.minWidth,10))}else n=o.offsetHeight,s=o.offsetWidth;t+=n,i+=s}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let o=0;o<i.length;o++){const n=i[o];n!==t&&(e?n.style.height="".concat(n.offsetHeight,"px"):n.style.width="".concat(n.offsetWidth,"px"),n.style.flex="0 0 auto",n===this.element&&(t=i[o+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:o,isRight:n,isBottom:s,isLeft:r}=this.currentResizer,a=n||r,l=s||o,{movementX:d,movementY:c}=this.calculateMouseMovement({e:e,isLeft:r,isTop:o}),u=this.position.x,h=this.position.y;let p=0,g=0;if(a&&d){const e=r?-1:1,t=this.getWidth(),i=t+d*e;let o=!1;r&&(p=t-i,(u+p<=0||i<=this.minWidth)&&(o=!0,p=0)),o||this.setWidth(i)}if(l&&c){const e=o?-1:1,t=this.getHeight(),i=t+c*e;let n=!1;o?(g=t-i,(h+g<=0||i<=this.minHeight)&&(n=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(n=!0),n||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(u+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let o;this.config.calculateTopBuffer&&(o=this.config.calculateTopBuffer());const{movementX:n,movementY:s}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:o});this.offsetElement(t+n,i+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){var e;const t=this.resizeListeners.pop();null===(e=this.dragSvc)||void 0===e||e.removeDragSource(t)}}destroy(){var e;(super.destroy(),this.moveElementDragListener)&&(null===(e=this.dragSvc)||void 0===e||e.removeDragSource(this.moveElementDragListener));this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Ks=new RegExp("[".concat("T"," ]")),Ys=new RegExp("^\\d{4}-\\d{2}-\\d{2}(".concat("T","\\d{2}:\\d{2}:\\d{2}\\D?)?"));function qs(e,t){return e.toString().padStart(t,"0")}function Qs(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"T";if(!e)return null;let o=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(e=>qs(e,2)).join("-");return t&&(o+=i+[e.getHours(),e.getMinutes(),e.getSeconds()].map(e=>qs(e,2)).join(":")),o}function Xs(e){return e?!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?[String(e.getFullYear()),String(e.getMonth()+1),qs(e.getDate(),2),qs(e.getHours(),2),":".concat(qs(e.getMinutes(),2)),":".concat(qs(e.getSeconds(),2))]:[e.getFullYear(),e.getMonth()+1,qs(e.getDate(),2)].map(String):null}var $s=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},Zs=["January","February","March","April","May","June","July","August","September","October","November","December"],Js=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function er(e,t){if(null==t)return Qs(e,!1);const i=qs(e.getFullYear(),4),o={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>"".concat(e.getFullYear()),MMMM:()=>Zs[e.getMonth()],MMM:()=>Zs[e.getMonth()].slice(0,3),MM:()=>qs(e.getMonth()+1,2),Mo:()=>"".concat(e.getMonth()+1).concat($s(e.getMonth()+1)),M:()=>"".concat(e.getMonth()+1),Do:()=>"".concat(e.getDate()).concat($s(e.getDate())),DD:()=>qs(e.getDate(),2),D:()=>"".concat(e.getDate()),dddd:()=>Js[e.getDay()],ddd:()=>Js[e.getDay()].slice(0,3),dd:()=>Js[e.getDay()].slice(0,2),do:()=>"".concat(e.getDay()).concat($s(e.getDay())),d:()=>"".concat(e.getDay())},n=new RegExp(Object.keys(o).join("|"),"g");return t.replace(n,e=>e in o?o[e]():e)}function tr(e){return!!ir(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function ir(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;if(!(arguments.length>2?arguments[2]:void 0)&&!Ys.test(e))return null;const[i,o]=e.split(Ks);if(!i)return null;const n=i.split("-").map(e=>Number.parseInt(e,10));if(3!==n.filter(e=>!isNaN(e)).length)return null;const[s,r,a]=n,l=new Date(s,r-1,a);if(l.getFullYear()!==s||l.getMonth()!==r-1||l.getDate()!==a)return null;if(!o&&t)return null;if(!o||"00:00:00"===o)return l;const[d,c,u]=o.split(":").map(e=>Number.parseInt(e,10));if(d>=0&&d<24)l.setHours(d);else if(t)return null;if(c>=0&&c<60)l.setMinutes(c);else if(t)return null;if(u>=0&&u<60)l.setSeconds(u);else if(t)return null;return l}function or(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:o,filterByPercentageOfBestMatch:n}=e;let s=(null!==i&&void 0!==i?i:[]).map((e,i)=>({value:e,relevance:nr(t,e),idx:i}));if(s.sort((e,t)=>e.relevance-t.relevance),o&&(s=s.filter(e=>e.relevance<Math.max(e.value.length,t.length))),s.length>0&&n&&n>0){const e=s[0].relevance*n;s=s.filter(t=>e-t.relevance<0)}const r=[],a=[];for(const l of s)r.push(l.value),a.push(l.idx);return{values:r,indices:a}}function nr(e,t){const i=e.length,o=t.length;if(0===o)return i||0;let n,s=e.toLocaleLowerCase(),r=t.toLocaleLowerCase();e.length<t.length&&(n=r,r=s,s=n,n=t,t=e,e=n);let a=new Uint16Array(o+1),l=new Uint16Array(o+1);for(let u=0;u<=o;u++)a[u]=u;let d=0;const c=i/2-10;for(let u=1;u<=i;u++){const i=e[u-1],h=s[u-1];l[0]=u;for(let n=1;n<=o;n++){const o=t[n-1];if(h!==r[n-1]){const e=l[n-1],t=a[n],i=a[n-1];let o=e<t?e:t;i<o&&(o=i),l[n]=o+1|0;continue}if(d++,i===o&&d++,u>1&&n>1){const i=e[u-2],o=s[u-2],a=t[n-2];o===r[n-2]&&(d++,i===a&&d++)}u<c&&d++,l[n]=a[n-1]}n=a,a=l,l=n}return a[o]/(d+1)}function sr(e){var t;if(e.altKey||e.ctrlKey||e.metaKey)return!1;return 1===(null===(t=e.key)||void 0===t?void 0:t.length)}var rr=class extends Mn{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}")}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:o,disabled:n,labelEllipsis:s}=this.config;null!=n&&this.setDisabled(n),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),null!=s&&this.setLabelEllipsis(s),this.setLabelAlignment(o||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;Re(t),"string"===typeof e?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),""===e?(pe(t,!1),N(t,"presentation")):(pe(t,!0),N(t,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){const e=this.eLabel;return e.id=e.id||"ag-".concat(this.getCompId(),"-label"),e.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||Ge(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return ve(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},ar=class extends rr{constructor(e,t,i,o){super(e,t,i),this.className=o}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i,ariaLabel:o}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),null!=o&&this.setAriaLabel(o),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==e.getAttribute("aria-label")?B(e,""):B(e,null!==t&&void 0!==t?t:"")}setAriaLabel(e){return G(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Be(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}};var lr,dr,cr,ur,hr=class extends ar{constructor(e,t){var i;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";super(e,null!==(i=null===e||void 0===e?void 0:e.template)&&void 0!==i?i:function(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}(n),[],t),this.inputType=o,this.displayFieldTag=n,this.eLabel=Pn,this.eWrapper=Pn,this.eInput=Pn}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:i,className:o}=this;e.classList.add("".concat(o,"-label")),t.classList.add("".concat(o,"-input-wrapper")),i.classList.add("".concat(o,"-input")),this.addCss("ag-input-field"),i.id=i.id||"ag-".concat(this.getCompId(),"-input");const{inputName:n,inputWidth:s,inputPlaceholder:r,autoComplete:a,tabIndex:l}=this.config;null!=n&&this.setInputName(n),null!=s&&this.setInputWidth(s),null!=r&&this.setInputPlaceholder(r),null!=a&&this.setAutoComplete(a),this.addInputListeners(),this.activateTabIndex([i],l)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){"input"===this.displayFieldTag&&(this.inputType=e,We(this.eInput,"type",e))}getInputElement(){return this.eInput}getWrapperElement(){return this.eWrapper}setInputWidth(e){return Ge(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return We(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return G(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return ve(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)We(this.eInput,"autocomplete",null);else{const t="string"===typeof e?e:"off";We(this.eInput,"autocomplete",t)}return this}},pr=class extends hr{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-checkbox",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkbox"),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t,name:i}=this.config;"boolean"===typeof e&&this.setReadOnly(e),"boolean"===typeof t&&this.setPassive(t),null!=i&&this.setName(i)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected="boolean"===typeof e?e:void 0;const i=this.eInput;i.checked=e,i.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const o=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:o.id,name:o.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",!0===e),t.toggle("ag-indeterminate",null==e)}},gr={selector:"AG-CHECKBOX",component:pr},vr=class extends pr{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},mr=class extends pr{constructor(e){super(e,"ag-toggle-button"),this.registerCSS('.ag-toggle-button{flex:none;min-width:unset;width:unset}.ag-toggle-button-input-wrapper{background-color:var(--ag-toggle-button-off-background-color);border-radius:calc(var(--ag-toggle-button-height)*.5);flex:none;height:var(--ag-toggle-button-height);max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);position:relative;transition:background-color .1s;:where(.ag-toggle-button-input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-toggle-button-height);margin:0;max-width:var(--ag-toggle-button-width);min-width:var(--ag-toggle-button-width);opacity:0}&:before{background-color:var(--ag-toggle-button-switch-background-color);border-radius:100%;content:"";display:block;height:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2);left:var(--ag-toggle-button-switch-inset);pointer-events:none;position:absolute;top:var(--ag-toggle-button-switch-inset);transition:left .1s;width:calc(var(--ag-toggle-button-height) - var(--ag-toggle-button-switch-inset)*2)}&.ag-checked{background-color:var(--ag-toggle-button-on-background-color);&:before{left:calc(100% - var(--ag-toggle-button-height) + var(--ag-toggle-button-switch-inset))}}&:focus-within{box-shadow:var(--ag-focus-shadow)}&.ag-disabled{opacity:.5}}')}setValue(e,t){return super.setValue(e,t),this.toggleCss("ag-selected",this.getValue()),this}},fr={selector:"AG-TOGGLE-BUTTON",component:mr},Cr=class extends hr{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-text-field",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text")}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const i=this.eInput;return i.value!==e&&(i.value=v(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}setCustomValidity(e){const t=this.eInput,i=e.length>0;t.setCustomValidity(e),i&&t.reportValidity(),z(t,i)}preventDisallowedCharacters(){const e=new RegExp("[".concat(this.config.allowedCharPattern,"]"));this.addManagedListeners(this.eInput,{keydown:t=>{sr(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{var i;const o=null===(i=t.clipboardData)||void 0===i?void 0:i.getData("text");null!==o&&void 0!==o&&o.split("").some(t=>!e.test(t))&&t.preventDefault()}})}},wr={selector:"AG-INPUT-TEXT-FIELD",component:Cr},br={selector:"AG-INPUT-TEXT-AREA",component:class extends hr{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},yr=class extends Cr{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const t=Number.parseFloat(e.value),i=isNaN(t)?"":this.normalizeValue(t.toString());this.value!==i&&this.setValue(i)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:i,max:o,step:n}=this.config;"number"===typeof t&&this.setPrecision(t),"number"===typeof i&&this.setMin(i),"number"===typeof o&&this.setMax(o),"number"===typeof n&&this.setStep(n)}onWheel(e){P(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return""===e?"":(null!=this.precision&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const i=this.precision;if(null==i)return e;if(t){const t=Number.parseFloat(e).toFixed(i);return Number.parseFloat(t).toString()}const o=String(e).split(".");if(o.length>1){if(o[1].length<=i)return e;if(i>0)return"".concat(o[0],".").concat(o[1].slice(0,i))}return o[0]}setMin(e){return this.min===e||(this.min=e,We(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,We(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,We(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue(e=>super.setValue(e,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},e)}setValueOrInputValue(e,t,i){if(v(i)){let o=this.isScientificNotation(i);if(o&&this.eInput.validity.valid)return e(i);if(!o){o=(i=this.adjustPrecision(i))!=this.normalizeValue(i)}if(o)return t(i)}return e(i)}getValue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.eInput;if(!t.validity.valid&&!e)return;const i=t.value;return this.isScientificNotation(i)?this.adjustPrecision(i,!0):super.getValue()}isScientificNotation(e){return"string"===typeof e&&e.includes("e")}},Sr={selector:"AG-INPUT-NUMBER-FIELD",component:yr},xr=class extends Cr{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=ys();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){P(this.beans)===this.eInput&&e.preventDefault()}setMin(e){var t;const i=e instanceof Date?null!==(t=Qs(null!==e&&void 0!==e?e:null,!!this.includeTime))&&void 0!==t?t:void 0:e;return this.min===i||(this.min=i,We(this.eInput,"min",i)),this}setMax(e){var t;const i=e instanceof Date?null!==(t=Qs(null!==e&&void 0!==e?e:null,!!this.includeTime))&&void 0!==t?t:void 0:e;return this.max===i||(this.max=i,We(this.eInput,"max",i)),this}setStep(e){return this.step===e||(this.step=e,We(this.eInput,"step",e)),this}setIncludeTime(e){return this.includeTime===e||(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1)),this}getDate(){var e;if(this.eInput.validity.valid)return null!==(e=ir(this.getValue()))&&void 0!==e?e:void 0}setDate(e,t){this.setValue(Qs(null!==e&&void 0!==e?e:null,this.includeTime),t)}},Fr={selector:"AG-INPUT-DATE-FIELD",component:xr},Rr=class extends Mn{constructor(e,t,i){super(((e,t)=>({tag:"div",cls:"ag-list-item ag-".concat(e,"-list-item"),attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}))(e,t)),this.label=t,this.value=i,this.eText=Pn}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){const t=this.getGui();t.classList.toggle("ag-active-item",e),oe(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){const i=this.getGui();Q(i,e),q(i,t)}createTooltip(){const e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>Ne(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){const e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},Pr=class extends Mn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";super({tag:"div",cls:"ag-list ag-".concat(e,"-list")}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}")}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){const t=e.key;switch(t){case us.ENTER:if(this.highlightedItem){const e=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case us.DOWN:case us.UP:e.preventDefault(),this.navigate(t);break;case us.PAGE_DOWN:case us.PAGE_UP:case us.PAGE_HOME:case us.PAGE_END:e.preventDefault(),this.navigateToPage(t)}}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){const{value:t,text:i}=e,o=null!==i&&void 0!==i?i:t;return this.options.push({value:t,text:o}),this.renderOption(t,o),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0);for(const e of this.listItems)e.destroy();Re(this.getGui()),this.listItems=[],this.refreshAriaRole()}updateOptions(e){const t=this.options!==e;return t&&(this.clearOptions(),this.addOptions(e)),t}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const i=this.options.findIndex(t=>t.value===e);if(-1!==i){const e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.listItems[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(e=>e.value===this.value);-1!==e&&this.highlightItem(this.listItems[e])}highlightItem(e){const t=e.getGui();if(!Ee(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;const i=this.getGui(),{scrollTop:o,clientHeight:n}=i,{offsetTop:s,offsetHeight:r}=t;(s+r>o+n||s<o)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){var e;null===(e=this.highlightedItem)||void 0===e||null===(e=e.tooltipFeature)||void 0===e||e.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){var e;null===(e=this.highlightedItem)||void 0===e||e.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){const i=new Rr(this.cssIdentifier,t,e);i.setParentComponent(this);const o=this.createManagedBean(i);this.listItems.push(o),this.getGui().appendChild(o.getGui())}navigate(e){const t=e===us.DOWN;let i;const{listItems:o,highlightedItem:n}=this;if(n){let e=o.indexOf(n)+(t?1:-1);e=Math.min(Math.max(e,0),o.length-1),i=o[e]}else i=t?o[0]:Do(o);this.highlightItem(i)}navigateToPage(e){const{listItems:t,highlightedItem:i}=this;if(!i||0===t.length)return;const o=t.indexOf(i),n=this.options.length-1,s=t[0].getHeight(),r=Math.floor(this.getGui().clientHeight/s);let a=-1;e===us.PAGE_HOME?a=0:e===us.PAGE_END?a=n:e===us.PAGE_DOWN?a=Math.min(o+r,n):e===us.PAGE_UP&&(a=Math.max(o-r,0)),-1!==a&&this.highlightItem(t[a])}refreshAriaRole(){N(this.getGui(),0===this.options.length?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();const e=this.listItems,t=e.length;e.forEach((e,i)=>{e.setIndex(i+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Dr={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},Er=class extends ar{constructor(e){if(super(e,(null===e||void 0===e?void 0:e.template)||Dr,(null===e||void 0===e?void 0:e.agComponents)||[],null===e||void 0===e?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Pn,this.eWrapper=Pn,this.eDisplayField=Pn,this.eIcon=Pn,this.registerCSS(".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}"),this.ariaRole=null===e||void 0===e?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:o,minPickerWidth:n,maxPickerWidth:s}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!o,null!=i&&this.setPickerMaxHeight(i),null!=n&&this.setPickerMinWidth(n),null!=s&&this.setPickerMaxWidth(s)}postConstruct(){super.postConstruct(),this.setupAria();const e="ag-".concat(this.getCompId(),"-display");this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:o}=this.config;if(i){const e=this.beans.iconSvc.createIconNoSpan(i);e&&this.eIcon.appendChild(e)}null!=o&&this.setInputWidth(o)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),K(e,!1),this.ariaRole&&N(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(null===e||void 0===e?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case us.UP:case us.DOWN:case us.ENTER:case us.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case us.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:o,modalPicker:n=!0},maxPickerHeight:s,minPickerWidth:r,maxPickerWidth:a,variableWidth:l,beans:d,eWrapper:c}=this,u={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const e=E(d);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,o),anchorToElement:c};e.style.position="absolute";const h=d.popupSvc,p=h.addPopup(u);l?(r&&(e.style.minWidth=r),e.style.width=He(ye(c)),a&&(e.style.maxWidth=a)):Ge(e,null!==a&&void 0!==a?a:ye(c));const g=null!==s&&void 0!==s?s:"".concat(Ce(h.getPopupParent()),"px");return e.style.setProperty("max-height",g),this.alignPickerToComponent(),p.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:i,gos:o},eWrapper:n,pickerComponent:s}=this,r=o.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:t,eventSource:n,ePopup:s.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;K(this.getAriaElement(),e);const t=this.eWrapper.classList;t.toggle("ag-picker-expanded",e),t.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;null!==(t=this.pickerComponent)&&void 0!==t&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return Ge(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}},Ar=class extends Er{constructor(e){super((0,n.A)({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox"},e)),this.registerCSS(".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}")}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:Le(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new Pr("select"));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),i="ag-select-list-".concat(e.getCompId());t.setAttribute("id",i),re(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:e=>{null===e||void 0===e||e.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){var e;null===(e=this.listComponent)||void 0===e||e.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){const{key:t}=e;switch(t===us.TAB&&this.hidePicker(),t){case us.ENTER:case us.UP:case us.DOWN:case us.PAGE_UP:case us.PAGE_DOWN:case us.PAGE_HOME:case us.PAGE_END:var i;if(e.preventDefault(),this.isPickerDisplayed)null===(i=this.listComponent)||void 0===i||i.handleKeyDown(e);else super.onKeyDown(e);break;case us.ESCAPE:super.onKeyDown(e);break;case us.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return null===(e=this.listComponent)||void 0===e||e.clearOptions(),this.setValue(void 0,!0),this}updateOptions(e){var t;return null!==(t=this.listComponent)&&void 0!==t&&t.updateOptions(e)&&this.setValue(void 0,!0),this}setValue(e,t,i){const{listComponent:o,config:{placeholder:n},eDisplayField:s,tooltipFeature:r}=this;if(this.value===e||!o)return this;i||o.setValue(e,!0);if(o.getValue()===this.getValue())return this;let a=o.getDisplayValue();return null==a&&n&&(a=n),s.textContent=a,null===r||void 0===r||r.setTooltipAndRefresh(null!==a&&void 0!==a?a:null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},Mr={selector:"AG-SELECT",component:Ar},Tr=(e=>(e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e))(Tr||{}),kr="object"!==typeof window||!(null!==(u=window)&&void 0!==u&&null!==(u=u.document)&&void 0!==u&&null!==(u=u.fonts)&&void 0!==u&&u.forEach),Ir=(e,t,i,o,n,s)=>{if(kr)return;o&&(e="@layer ".concat(CSS.escape(o).replaceAll("\\.",".")," { ").concat(e," }"));let r=Nr.map.get(t);if(r||(r=[],Nr.map.set(t,r)),r.some(t=>t.css===e))return;const a=document.createElement("style");s&&a.setAttribute("nonce",s),a.dataset.agGlobalCss=i,a.textContent=e;const l={css:e,el:a,priority:n};let d;for(const c of r){if(c.priority>n)break;d=c}if(d){d.el.insertAdjacentElement("afterend",a);const e=r.indexOf(d);r.splice(e+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),r.push(l)},Lr=(e,t,i,o)=>{Ir(':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-tab-guard{display:block;height:0;position:absolute;width:0}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',e,"shared",t,0,i),null===o||void 0===o||o.forEach((o,n)=>o.forEach(o=>Ir(o,e,n,t,0,i)))},Nr=null!==(h=(lr="object"===typeof window?window:{}).agStyleInjectionState)&&void 0!==h?h:lr.agStyleInjectionState={map:new WeakMap,grids:new Set},Or=e=>new Vr(e),Gr="$default",Br=0,Vr=class{constructor(e){var t;let{feature:i,params:o,modeParams:s={},css:r,cssImports:a}=e;this.feature=i,this.css=r,this.cssImports=a,this.modeParams=(0,n.A)({[Gr]:(0,n.A)((0,n.A)({},null!==(t=s[Gr])&&void 0!==t?t:{}),null!==o&&void 0!==o?o:{})},s)}use(e,t,i){let o=this._inject;if(null==o){let{css:e}=this;if(e){var n;const t="ag-theme-".concat(null!==(n=this.feature)&&void 0!==n?n:"part","-").concat(++Br);"function"===typeof e&&(e=e()),e=":where(.".concat(t,") {\n").concat(e,"\n}\n");for(const i of null!==(s=this.cssImports)&&void 0!==s?s:[]){var s;e="@import url(".concat(JSON.stringify(i),");\n").concat(e)}o={css:e,class:t}}else o=!1;this._inject=o}return o&&e&&Ir(o.css,e,o.class,t,1,i),!!o&&o.class}},Hr=e=>"--ag-".concat(e.replace(/[A-Z]/g,e=>"-".concat(e)).toLowerCase()),zr=e=>"var(".concat(Hr(e),")"),Wr=e=>({ref:"accentColor",mix:e}),Ur=e=>({ref:"foregroundColor",mix:e}),jr=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),_r={ref:"backgroundColor"},Kr={ref:"foregroundColor"},Yr={ref:"accentColor"},qr={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:Ur(.15),chromeBackgroundColor:jr(.02),browserColorScheme:"light"},Qr=(0,n.A)((0,n.A)({},qr),{},{textColor:Kr,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:Wr(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:_r,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Yr,toggleButtonOffBackgroundColor:jr(.3),toggleButtonSwitchBackgroundColor:_r,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}}),Xr=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],$r=(e=>{const t=new Map;return i=>{const o=i;return t.has(o)||t.set(o,e(i)),t.get(o)}})(e=>{var t;return e=e.toLowerCase(),null!==(t=Xr.find(t=>e.endsWith(t.toLowerCase())))&&void 0!==t?t:"length"}),Zr=e=>"object"===typeof e&&null!==e&&void 0!==e&&e.ref?zr(e.ref):"string"===typeof e?e:"number"===typeof e&&String(e),Jr=e=>{if("string"===typeof e)return e;if(e&&"ref"in e){const t=zr(e.ref);if(null==e.mix)return t;const i=e.onto?zr(e.onto):"transparent";return"color-mix(in srgb, ".concat(i,", ").concat(t," ").concat(((e,t,i)=>Math.max(t,Math.min(i,e)))(100*e.mix,0,100),"%)")}return!1},ea=e=>{if("string"===typeof e)return e;if("number"===typeof e)return"".concat(e,"px");if(e&&"calc"in e){const t=e.calc.replace(/ ?[*/+] ?/g," $& ");return"calc(".concat(t.replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,e=>"-"===e[0]?e:" "+zr(e)+" "),")")}return!(!e||!("ref"in e))&&zr(e.ref)},ta=(e,t)=>{var i,o,n;return"string"===typeof e?e:!0===e?ta({},t):!1===e?"columnBorder"===t?ta({color:"transparent"},t):"none":e&&"ref"in e?zr(e.ref):ia(null!==(i=e.style)&&void 0!==i?i:"solid")+" "+ea(null!==(o=e.width)&&void 0!==o?o:{ref:"borderWidth"})+" "+Jr(null!==(n=e.color)&&void 0!==n?n:{ref:"borderColor"})},ia=Zr,oa=e=>"string"===typeof e?e.includes(",")?e:na(e):e&&"googleFont"in e?oa(e.googleFont):e&&"ref"in e?zr(e.ref):!!Array.isArray(e)&&e.map(e=>("object"===typeof e&&"googleFont"in e&&(e=e.googleFont),na(e))).join(", "),na=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),sa=Zr,ra=e=>"string"===typeof e?e:e&&"url"in e?"url(".concat(JSON.stringify(e.url),")"):e&&"svg"in e?ra({url:"data:image/svg+xml,".concat(encodeURIComponent(e.svg))}):!(!e||!("ref"in e))&&zr(e.ref),aa={color:Jr,colorScheme:Zr,length:ea,scale:Zr,border:ta,borderStyle:ia,shadow:e=>{var t,i,o,n,s;return"string"===typeof e?e:!1===e?"none":e&&"ref"in e?zr(e.ref):[ea(null!==(t=e.offsetX)&&void 0!==t?t:0),ea(null!==(i=e.offsetY)&&void 0!==i?i:0),ea(null!==(o=e.radius)&&void 0!==o?o:0),ea(null!==(n=e.spread)&&void 0!==n?n:0),Jr(null!==(s=e.color)&&void 0!==s?s:{ref:"foregroundColor"})].join(" ")},image:ra,fontFamily:oa,fontWeight:sa,duration:(e,t,i)=>"string"===typeof e?e:"number"===typeof e?(e>=10&&i.warn(104,{value:e,param:t}),"".concat(e,"s")):!(!e||!("ref"in e))&&zr(e.ref)},la=(e,t,i)=>{const o=$r(e);return aa[o](t,e,i)},da=class e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.themeLogger=e,this.parts=t}withPart(t){return"function"===typeof t&&(t=t()),t instanceof Vr?new e(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(e){return this.withPart(Or({feature:e}))}withParams(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return this.withPart(Or({modeParams:{[t]:e}}))}_startUse(e){let{styleContainer:t,cssLayer:i,nonce:o,loadThemeGoogleFonts:n,moduleCss:s}=e;if(kr)return;pa(),Lr(t,i,o,s);const r=ua(this);if(r.length>0)for(const a of r)n&&ga(a,o);for(const a of this.parts)a.use(t,i,o)}_getCssClass(){var e;return null!==(e=this._cssClassCache)&&void 0!==e?e:this._cssClassCache=ca(this.parts).map(e=>e.use(void 0,void 0,void 0)).filter(Boolean).join(" ")}_getModeParams(){let e=this._paramsCache;if(!e){const i={[Gr]:(0,n.A)({},Qr)};for(const e of ca(this.parts))for(const o of Object.keys(e.modeParams)){const n=e.modeParams[o];if(n){var t;const e=null!==(t=i[o])&&void 0!==t?t:i[o]={},s=new Set;for(const t of Object.keys(n)){const i=n[t];void 0!==i&&(e[t]=i,s.add(t))}if(o===Gr)for(const t of Object.keys(i)){const e=i[t];if(t!==Gr)for(const t of s)delete e[t]}}}this._paramsCache=e=i}return e}_getPerInstanceCss(e){const t="##SELECTOR##";let i=this._paramsCssCache;if(!i){let e="",o="";const n=this._getModeParams();for(const t of Object.keys(n)){const i=n[t];if(t!==Gr){const i="object"===typeof CSS?CSS.escape(t):t,n=':where([data-ag-theme-mode="'.concat(i,'"]) & {\n');e+=n,o+=n}for(const t of Object.keys(i).sort()){const n=i[t],s=la(t,n,this.themeLogger);if(!1===s)this.themeLogger.error(107,{key:t,value:n});else{const i=Hr(t),n=i.replace("--ag-","--ag-inherited-");e+="\t".concat(i,": var(").concat(n,", ").concat(s,");\n"),o+="\t".concat(n,": var(").concat(i,");\n")}}t!==Gr&&(e+="}\n",o+="}\n")}let s="".concat(t," {\n").concat(e,"}\n");s+=":has(> ".concat(t,"):not(").concat(t,") {\n").concat(o,"}\n"),this._paramsCssCache=i=s}return i.replaceAll(t,":where(.".concat(e,")"))}},ca=e=>{const t=new Map;for(const o of e)t.set(o.feature,o);const i=[];for(const o of e)o.feature&&t.get(o.feature)!==o||i.push(o);return i},ua=e=>{const t=new Set,i=e=>{if(Array.isArray(e))e.forEach(i);else{const i=null===e||void 0===e?void 0:e.googleFont;"string"===typeof i&&t.add(i)}};return Object.values(e._getModeParams()).flatMap(e=>Object.values(e)).forEach(i),Array.from(t).sort()},ha=!1,pa=()=>{if(!ha){ha=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},ga=async(e,t)=>{const i="@import url('https://".concat(va,"/css2?family=").concat(encodeURIComponent(e),":wght@100;200;300;400;500;600;700;800;900&display=swap');\n");Ir(i,document.head,"googleFont:".concat(e),void 0,0,t)},va="fonts.googleapis.com",ma=1,fa=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=ma++,null!==e&&void 0!==e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const i of Object.keys(e.providedBeanInstances))this.beans[i]=e.providedBeanInstances[i];for(const i of e.beanClasses){const e=new i;e.beanName?this.beans[e.beanName]=e:console.error("Bean ".concat(i.name," is missing beanName")),this.createdBeans.push(e)}for(const i of null!==(t=e.derivedBeans)&&void 0!==t?t:[]){var t;const{beanName:e,bean:o}=i(this);this.beans[e]=o,this.createdBeans.push(o)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){const i=this.beans;for(const a of e){var o,n;null===(o=a.preWireBeans)||void 0===o||o.call(a,i),null===(n=a.wireBeans)||void 0===n||n.call(a,i)}for(const a of e){var s;null===(s=a.preConstruct)||void 0===s||s.call(a)}t&&e.forEach(t);for(const a of e){var r;null===(r=a.postConstruct)||void 0===r||r.call(a)}}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){var e;if(this.destroyed)return;this.destroyed=!0;const t=this.getBeanInstances();this.beanDestroyComparator&&t.sort(this.beanDestroyComparator),this.destroyBeans(t),this.beans={},this.createdBeans=[],null===(e=this.destroyCallback)||void 0===e||e.call(this)}destroyBean(e){var t;null===e||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},Ca=0,wa={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},ba=class extends ut{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass="ag-theme-params-".concat(++Ca),this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){var e;const{gos:t,eRootDiv:i}=this;t.setInstanceDomData(i);const o=t.get("themeStyleContainer"),n="undefined"!==typeof ShadowRoot,s=n&&i.getRootNode()instanceof ShadowRoot;this.eStyleContainer=null!==(e="function"===typeof o?o():o)&&void 0!==e?e:s?i:document.head,o||s||!n||Sa(i,this.shadowRootError.bind(this),this.addDestroyFunc.bind(this)),this.cssLayer=t.get("themeCssLayer"),this.styleNonce=t.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.getSizeEl(wa),this.initVariables(),this.addDestroyFunc(()=>(e=>{if(Nr.grids.delete(e),0===Nr.grids.size){Nr.map=new WeakMap;for(const e of document.head.querySelectorAll("style[data-ag-global-css]"))e.remove()}})(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{theme:i}=this;let o;o=i?"".concat(this.paramsClass," ").concat(i._getCssClass()):this.applyLegacyThemeClasses();for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&e.classList.remove(n);if(o){const i=e.className;e.className="".concat(i).concat(i?" ":"").concat(o).concat(null!==t&&void 0!==t&&t.length?" "+t.join(" "):"")}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let i=!1;for(const o of Array.from(t.classList))o.startsWith("ag-theme-")&&(i=!0,e=e?"".concat(e," ").concat(o):o);i&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?Ir(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(wa)}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===ya?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=qe({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const i=this.getMeasurementContainer();t=qe({tag:"div"});const{border:o,noWarn:n}=e;o?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border","var(".concat(e.cssName,", solid ").concat(ya,"px)"))):t.style.width="var(".concat(e.cssName,", ").concat(ya,"px)"),i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);"no-styles"!==s||n||this.varError(e);const r=Ue(this.beans,t,()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==s&&(s=t,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}handleThemeChange(){const{gos:e,theme:t}=this,i=e.get("theme");let o;if("legacy"===i)o=void 0;else{const e=null!==i&&void 0!==i?i:this.getDefaultTheme();e instanceof da?o=e:this.themeError(e)}o!==t&&this.handleNewTheme(o),this.postProcessThemeChange(o,i)}handleNewTheme(e){const{gos:t,eRootDiv:i,globalCSS:o}=this,n=this.getAdditionalCss();if(e){s=this,Nr.grids.add(s),Lr(this.eStyleContainer,this.cssLayer,this.styleNonce,n);for(const[e,t]of o)Ir(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce);o.length=0}var s;this.theme=e,null===e||void 0===e||e._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:n});let r=this.eParamsStyle;if(!r){r=this.eParamsStyle=qe({tag:"style"});const e=t.get("styleNonce");e&&r.setAttribute("nonce",e),i.appendChild(r)}kr||(r.textContent=(null===e||void 0===e?void 0:e._getPerInstanceCss(this.paramsClass))||""),this.applyThemeClasses(i),this.fireStylesChangedEvent("themeChanged")}fireStylesChangedEvent(e){this.eventSvc.dispatchEvent({type:"stylesChanged",[e]:!0})}},ya=15538,Sa=(e,t,i)=>{let o=60;const n=setInterval(()=>{"undefined"!==typeof ShadowRoot&&e.getRootNode()instanceof ShadowRoot&&(t(),clearInterval(n)),(De(e)||--o<0)&&clearInterval(n)},1e3);i(()=>clearInterval(n))},xa=class extends ut{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){var t;null!==(t=this.dynamicBeans)&&void 0!==t||(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const i=this.dynamicBeans[e];if(null!=i){for(var o=arguments.length,n=new Array(o>2?o-2:0),s=2;s<o;s++)n[s-2]=arguments[s];return new i(...n)}if(t)throw new Error(this.getDynamicError(e,!1))}},Fa=class extends ut{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new p}addListener(e,t,i){this.globalSvc.addEventListener(e,t,i)}removeListener(e,t,i){this.globalSvc.removeEventListener(e,t,i)}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},Ra=class extends ut{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const i="title",o=this.ctrl.getGui();o&&(null==e||""==e&&!t?o.removeAttribute(i):o.setAttribute(i,e))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(null==this.tooltipManager){const e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){var e;null===(e=this.tooltipManager)||void 0===e||e.prepareToShowTooltip()}attemptToHideTooltip(){var e;null===(e=this.tooltipManager)||void 0===e||e.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},Pa=!1,Da=class extends ut{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();0===this.tooltipTrigger&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){var t,i,o,n,s,r;return"show"===e?null!==(n=null===(s=(r=this.tooltipCtrl).getTooltipShowDelayOverride)||void 0===s?void 0:s.call(r))&&void 0!==n?n:this.getGridOptionsTooltipDelay("tooltipShowDelay"):null!==(t=null===(i=(o=this.tooltipCtrl).getTooltipHideDelayOverride)||void 0===i?void 0:i.call(o))&&void 0!==t?t:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),Fs()||(Pa?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},100):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;const i=e.relatedTarget,o=this.tooltipCtrl.getGui(),n=null===(t=this.tooltipComp)||void 0===t?void 0:t.getGui();this.isInteractingWithTooltip||o.contains(i)||this.interactionEnabled&&null!==n&&void 0!==n&&n.contains(i)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(0!=this.state||Pa)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-dr<1e3}setToDoNothing(e){e||2!==this.state||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var e,t,i;const o=this.getTooltipValue(),s=this.tooltipCtrl;if(!v(o)||s.shouldDisplayTooltip&&!s.shouldDisplayTooltip())return void this.setToDoNothing();const r=this.gos.addCommon((0,n.A)({location:null!==(e=null===(t=s.getLocation)||void 0===t?void 0:t.call(s))&&void 0!==e?e:"UNKNOWN",value:o,hideTooltipCallback:()=>this.hideTooltip(!0)},null===(i=s.getAdditionalParams)||void 0===i?void 0:i.call(s)));this.state=2,this.tooltipInstanceCount++;const a=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(r,a)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),dr=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){var i;if(2!==this.state||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const o=t.getGui();this.tooltipComp=t,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&o.classList.add("ag-tooltip-animate"),this.interactionEnabled&&o.classList.add("ag-tooltip-interactive");const n=this.getLocaleTextFunc(),s=null===(i=this.popupSvc)||void 0===i?void 0:i.addPopup({eChild:o,ariaLabel:n("ariaLabelTooltip","Tooltip")});if(s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){const e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:e}),this.setEventHandlers(e)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(o,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(D(this.beans),{keydown:e=>{o.contains(null===e||void 0===e?void 0:e.target)||this.onKeyDown()}}),1===this.tooltipTrigger&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(o,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:o,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var e;const t=null===(e=this.tooltipComp)||void 0===e?void 0:e.getGui(),i=P(this.beans);return!!t&&t.contains(i)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};var t,i;this.lastMouseEvent?null===(t=this.popupSvc)||void 0===t||t.positionPopupUnderMouseEvent((0,n.A)((0,n.A)({},e),{},{mouseEvent:this.lastMouseEvent})):null===(i=this.popupSvc)||void 0===i||i.positionPopupByComponent((0,n.A)((0,n.A)({},e),{},{eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=0===this.tooltipTrigger?1e3:0;window.setTimeout(()=>{e(),this.destroyBean(t)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(const e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Pa=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},100)}unlockService(){Pa=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},Ea=0,Aa=class extends ut{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.addManagedEventListeners({stylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:o,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:o,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:o,keepWithinBounds:n,eventSource:s,alignSide:r="left",position:a="over",type:l}=e,d=s.getBoundingClientRect(),c=this.getParentRect();this.setAlignedTo(s,t);this.positionPopup({ePopup:t,nudgeX:i,nudgeY:o,keepWithinBounds:n,updatePosition:()=>{let i,n=d.left-c.left;if("right"===r&&(n-=t.offsetWidth-d.width),"over"===a)i=d.top-c.top,this.setAlignedStyles(t,"over");else{this.setAlignedStyles(t,"under");i="under"===this.shouldRenderUnderOrAbove(t,d,c,e.nudgeY||0)?d.top-c.top+d.height:d.top-t.offsetHeight-2*(o||0)-c.top}return{x:n,y:i}},postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,l,t,s,null)})}positionPopupForMenu(e){const{eventSource:t,ePopup:i,event:o}=e,n=t.getBoundingClientRect(),s=this.getParentRect();this.setAlignedTo(t,i);let r=!1;this.positionPopup({ePopup:i,keepWithinBounds:!0,updatePosition:()=>{const e=this.keepXYWithinBounds(i,n.top-s.top,0),t=i.clientWidth>0?i.clientWidth:200;r||(i.style.minWidth="".concat(t,"px"),r=!0);const o=s.right-s.left-t;let a;return this.gos.get("enableRtl")?(a=d(),a<0&&(a=l(),this.setAlignedStyles(i,"left")),a>o&&(a=0,this.setAlignedStyles(i,"right"))):(a=l(),a>o&&(a=d(),this.setAlignedStyles(i,"right")),a<0&&(a=0,this.setAlignedStyles(i,"left"))),{x:a,y:e};function l(){return n.right-s.left-2}function d(){return n.left-s.left-t}},postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,"subMenu",i,t,o instanceof MouseEvent?o:void 0)})}shouldRenderUnderOrAbove(e,t,i,o){const n=i.bottom-t.bottom,s=t.top-i.top,r=e.offsetHeight+o;return n>r?"under":s>r||s>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const o=this.popupList[i],{alignedToElement:n}=o;if(!n)return;const s=["right","left","over","above","under"];for(const r of s)n.classList.remove("ag-has-popup-positioned-".concat(r)),e.classList.remove("ag-popup-positioned-".concat(r));t&&(n.classList.add("ag-has-popup-positioned-".concat(t)),e.classList.add("ag-popup-positioned-".concat(t)))}setAlignedTo(e,t){const i=this.getPopupIndex(t);if(-1!==i){this.popupList[i].alignedToElement=e}}positionPopup(e){var t=this;const{ePopup:i,keepWithinBounds:o,nudgeX:n,nudgeY:s,skipObserver:r,updatePosition:a}=e,l={width:0,height:0},d=function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{x:d,y:c}=a();r&&i.clientWidth===l.width&&i.clientHeight===l.height||(l.width=i.clientWidth,l.height=i.clientHeight,n&&(d+=n),s&&(c+=s),o&&(d=t.keepXYWithinBounds(i,d,1),c=t.keepXYWithinBounds(i,c,0)),i.style.left="".concat(d,"px"),i.style.top="".concat(c,"px"),e.postProcessCallback&&e.postProcessCallback())};if(d(),!r){const e=Ue(this.beans,i,()=>d(!0));setTimeout(()=>e(),200)}}getParentRect(){const e=D(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),Se(t)}keepXYWithinBounds(e,t,i){const o=0===i,n=o?"clientHeight":"clientWidth",s=o?"top":"left",r=o?"height":"width",a=o?"scrollTop":"scrollLeft",l=D(this.beans),d=l.documentElement,c=this.getPopupParent(),u=e.getBoundingClientRect(),h=c.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=c===l.body,v=Math.ceil(u[r]);let m=g?(o?be:ye)(d)+d[a]:c[n];g&&(m-=Math.abs(p[s]-h[s]));const f=m-v;return Math.min(Math.max(t,0),Math.max(f,0))}addPopup(e){const{eChild:t,ariaLabel:i,ariaOwns:o,alwaysOnTop:s,positionCallback:r,anchorToElement:a}=e,l=this.getPopupIndex(t);if(-1!==l){return{hideFunc:this.popupList[l].hideFunc}}this.initialisePopupPosition(t);const d=this.createPopupWrapper(t,!!s,i,o),c=this.addEventListenersToPopup((0,n.A)((0,n.A)({},e),{},{wrapperEl:d}));return r&&r(),this.addPopupToPopupList(t,d,c,a),{hideFunc:c}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();v(e.style.top)||(e.style.top="".concat(-1*t.top,"px")),v(e.style.left)||(e.style.left="".concat(-1*t.left,"px"))}createPopupWrapper(e,t,i,o){const n=this.getPopupParent(),{environment:s,gos:r}=this.beans,a=qe({tag:"div"});return s.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||N(e,"dialog"),i?G(e,i):o&&(e.id||(e.id="popup-component-".concat(Ea)),ae(o,e.id)),a.appendChild(e),n.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){var t=this;const i=this.beans,o=D(i),{wrapperEl:n,eChild:s,closedCallback:r,afterGuiAttached:a,closeOnEsc:l,modal:d,ariaOwns:c}=e;let u=!1;const h=e=>{if(!n.contains(P(i)))return;e.key!==us.ESCAPE||this.isStopPropagation(e)||v({keyboardEvent:e})},p=e=>v({mouseEvent:e}),g=e=>v({touchEvent:e}),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mouseEvent:i,touchEvent:a,keyboardEvent:l,forceHide:d}=e;(d||!t.isEventFromCurrentPopup({mouseEvent:i,touchEvent:a},s)&&!u)&&(u=!0,n.remove(),o.removeEventListener("keydown",h),o.removeEventListener("mousedown",p),o.removeEventListener("touchstart",g),o.removeEventListener("contextmenu",p),t.eventSvc.removeListener("dragStarted",p),r&&r(i||a||l),t.removePopupFromPopupList(s,c))};return a&&a({hidePopup:v}),window.setTimeout(()=>{l&&o.addEventListener("keydown",h),d&&(o.addEventListener("mousedown",p),this.eventSvc.addListener("dragStarted",p),o.addEventListener("touchstart",g),o.addEventListener("contextmenu",p))},0),v}addPopupToPopupList(e,t,i,o){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:Ea,isAnchored:!!o}),o&&this.setPopupPositionRelatedToElement(e,o),Ea+=1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const o=this.popupList[i];if(o.stopAnchoringPromise&&o.stopAnchoringPromise.then(e=>e&&e()),o.stopAnchoringPromise=void 0,o.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:o.hideFunc});return o.stopAnchoringPromise=n,o.isAnchored=!0,n}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&ae(t,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:o,ePopup:n}=e,s=o.getBoundingClientRect(),r=e=>Number.parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{const o=i[e]-s[e],a=r(n.style[e]);return{initialDiff:o,lastDiff:o,initial:a,last:a,direction:t}},l=a("top",0),d=a("left",1),c=this.beans.frameworkOverrides;return new Ln(i=>{c.wrapIncoming(()=>{var s,a;(s=()=>{const i=t.getBoundingClientRect(),s=o.getBoundingClientRect();if(0==s.top&&0==s.left&&0==s.height&&0==s.width)return void e.hidePopup();const a=(e,t)=>{const o=r(n.style[t]);e.last!==o&&(e.initial=o,e.last=o);const a=i[t]-s[t];if(a!=e.lastDiff){const i=this.keepXYWithinBounds(n,e.initial+e.initialDiff-a,e.direction);n.style[t]="".concat(i,"px"),e.last=i}e.lastDiff=a};a(l,"top"),a(d,"left")},a=200,new Ln(e=>{e(window.setInterval(s,a))})).then(e=>{i(()=>{null!=e&&window.clearInterval(e)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:o}=e,n=i||o;if(!n)return!1;const s=this.getPopupIndex(t);if(-1===s)return!1;for(let r=s;r<this.popupList.length;r++){if(Je(this.popupList[r].element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=D(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),o=i.length,n=this.getWrapper(e);if(!n||o<=1||!t.contains(e))return;const s=[],r=[];for(const c of i)c!==n&&(c.classList.contains("ag-always-on-top")?r.push(c):s.push(c));const a=[],l=r.length,d=n.classList.contains("ag-always-on-top")||!l?[...s,...r,n]:[...s,n,...r];for(let c=0;c<=o;c++){const e=d[c];if(i[c]===d[c]||e===n)continue;const o=e.querySelectorAll("div");for(const t of o)0!==t.scrollTop&&a.push([t,t.scrollTop]);0===c?t.insertAdjacentElement("afterbegin",e):d[c-1].insertAdjacentElement("afterend",e)}for(;a.length;){const e=a.pop();e[0].scrollTop=e[1]}}handleThemeChange(e){if(e.themeChanged){const e=this.beans.environment;for(const t of this.popupList)e.applyThemeClasses(t.wrapper)}}},Ma=(e,t)=>{if(null!=t&&null!==e&&void 0!==e&&e.setPointerCapture)try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch(i){}return!1},Ta=e=>{const{eElement:t,onLost:i}=e;t&&i&&(t.removeEventListener("lostpointercapture",i),e.onLost=null)},ka=(e,t)=>{Ta(e);const{eElement:i,pointerId:o}=e;i&&t.pointerId===o&&Ma(i,o)},Ia={passive:!0},La={passive:!1},Na=e=>{if(ur){if(ur.has(e))return!1}else ur=new WeakSet;return ur.add(e),!0},Oa=class extends ut{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){var e,t;return null!==(e=null===(t=this.drag)||void 0===t?void 0:t.start.target)&&void 0!==e?e:null}isPointer(){var e;return!(null===(e=cr)||void 0===e||!e.has(R(this.beans)))}hasPointerCapture(){var e,t,i;const o=null===(e=this.drag)||void 0===e?void 0:e.pointerCapture;return!(!o||null===(t=(i=this.beans.eRootDiv).hasPointerCapture)||void 0===t||!t.call(i,o.pointerId))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)Ga(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let i=0,o=t.length;i<o;++i){const o=t[i];if(o.params===e){t.splice(i,1),Ga(o);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:i}=e,o=[];let n;if(i){const e=t.style;e&&(n=e.touchAction,e.touchAction="none")}const s={handlers:o,params:e,oldTouchAction:n};this.dragSources.push(s);st(o,[t,"pointerdown",t=>this.onPointerDown(e,t),La],[t,"mousedown",t=>this.onMouseDown(e,t)]);const r=this.gos.get("suppressTouch");if(i&&!r){st(o,[t,"touchstart",t=>this.onTouchStart(e,t),La])}}cancelDrag(e){var t,i;const o=this.drag;null!==e&&void 0!==e||(e=null===o||void 0===o?void 0:o.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),null===o||void 0===o||null===(t=(i=o.params).onDragCancel)||void 0===t||t.call(i),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return("mousemove"===t||"pointermove"===t)&&e.cancelable&&ot(this.beans,e)&&!he(Va(e))}initDrag(e){this.drag=e;const t=this.beans,i=e=>this.onScroll(e),o=R(t),n=D(t);for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];st(e.handlers,[o,"contextmenu",at],[o,"keydown",e=>this.onKeyDown(e)],[n,"scroll",i,{capture:!0}],[n.defaultView||window,"scroll",i],...r)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){var t;const i=e.rootEl;(null===(t=cr)||void 0===t?void 0:t.get(i))===e&&cr.delete(i),this.drag=null,(e=>{if(!e)return;Ta(e);const{eElement:t,pointerId:i}=e;if(t){try{t.releasePointerCapture(i)}catch(o){}e.eElement=null}})(e.pointerCapture),rt(e.handlers)}}onPointerDown(e,t){var i;if(this.isPointer())return;const o=this.beans;if(null!==(i=ur)&&void 0!==i&&i.has(t))return;const n=t.pointerType;if("touch"===n){if(o.gos.get("suppressTouch")||!e.includeTouch)return;if(e.stopPropagationForTouch&&t.stopPropagation(),he(Va(t)))return}if(!t.isPrimary)return;if("mouse"===n&&0!==t.button)return;this.destroyDrag();const s=R(o),r=e.eElement,a=t.pointerId,l=new Ba(s,e,t,a);null!==cr&&void 0!==cr||(cr=new WeakMap),cr.set(s,l);const d=e=>this.draggingPreventDefault(e);this.initDrag(l,[s,"pointerup",e=>{e.pointerId===a&&this.onMouseOrPointerUp(e)}],[s,"pointercancel",e=>{e.pointerId===a&&Na(e)&&this.cancelDrag()}],[s,"pointermove",e=>{e.pointerId===a&&this.onMouseOrPointerMove(e)},La],[s,"touchmove",d,La],[r,"mousemove",d,La]),0===e.dragStartPixels?this.onMouseOrPointerMove(t):Na(t)}onTouchStart(e,t){var i;if(this.gos.get("suppressTouch")||!e.includeTouch)return;if(!Na(t))return;if(he(Va(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer())return void(this.dragging&&at(t));this.destroyDrag();const o=this.beans,n=R(o),s=new Ba(n,e,t.touches[0]),r=e=>this.onTouchUp(e),a=e=>this.onTouchCancel(e),l=R(o),d=null!==(i=t.target)&&void 0!==i?i:e.eElement;this.initDrag(s,[d,"touchmove",e=>this.onTouchMove(e),Ia],[d,"touchend",r,Ia],[d,"touchcancel",a,Ia],[l,"touchmove",e=>this.draggingPreventDefault(e),La],[l,"touchend",r,La],[l,"touchcancel",a,La]),0===e.dragStartPixels&&this.onMove(s.start)}draggingPreventDefault(e){this.dragging&&at(e)}onMouseDown(e,t){var i;if(0!==t.button)return;if(null!==(i=ur)&&void 0!==i&&i.has(t))return;if(this.isPointer())return;const o=this.beans;this.destroyDrag();const n=new Ba(R(o),e,t),s=R(o);this.initDrag(n,[s,"mousemove",e=>this.onMouseOrPointerMove(e)],[s,"mouseup",e=>this.onMouseOrPointerUp(e)]),0===e.dragStartPixels?this.onMouseOrPointerMove(t):Na(t)}onScroll(e){if(!Na(e))return;const t=this.drag,i=null===t||void 0===t?void 0:t.lastDrag;var o,n;i&&this.dragging&&(null===(o=t.params)||void 0===o||null===(n=o.onDragging)||void 0===n||n.call(o,i))}onMouseOrPointerMove(e){if(Na(e)){var t;if(ys())null===(t=D(this.beans).getSelection())||void 0===t||t.removeAllRanges();this.shouldPreventMouseEvent(e)&&at(e),this.onMove(e)}}onTouchCancel(e){const t=this.drag;t&&Na(e)&&it(t.start,e.changedTouches)&&this.cancelDrag()}onTouchMove(e){const t=this.drag;if(!t||!Na(e))return;const i=it(t.start,e.touches);i&&(this.onMove(i),this.draggingPreventDefault(e))}onMove(e){var t;const i=this.drag;if(!i)return;i.lastDrag=e;const o=i.params;if(!this.dragging){var n,s;const t=i.start,r=o.dragStartPixels;if(tt(e,t,null!==r&&void 0!==r?r:4))return;if(this.dragging=!0,o.capturePointer&&(i.pointerCapture=((e,t)=>{if("undefined"===typeof PointerEvent||!(t instanceof PointerEvent))return null;const i=t.pointerId;if(!Ma(e,i))return null;const o={eElement:e,pointerId:i,onLost(e){ka(o,e)}};return e.addEventListener("lostpointercapture",o.onLost),o})(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:o.eElement}),null===(n=o.onDragStart)||void 0===n||n.call(o,t),this.drag!==i)return;if(null===(s=o.onDragging)||void 0===s||s.call(o,t),this.drag!==i)return}null===(t=o.onDragging)||void 0===t||t.call(o,e)}onTouchUp(e){const t=this.drag;t&&Na(e)&&this.onUp(it(t.start,e.changedTouches))}onMouseOrPointerUp(e){Na(e)&&this.onUp(e)}onUp(e){const t=this.drag;if(t){var i,o;if(e||(e=t.lastDrag),e&&this.dragging)this.dragging=!1,null===(i=(o=t.params).onDragStop)||void 0===i||i.call(o,e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement});this.destroyDrag()}}onKeyDown(e){e.key===us.ESCAPE&&this.cancelDrag()}},Ga=e=>{rt(e.handlers);const t=e.oldTouchAction;if(null!=t){const i=e.params.eElement.style;i&&(i.touchAction=t)}},Ba=class{constructor(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.rootEl=e,this.params=t,this.start=i,this.pointerId=o,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},Va=e=>{const t=e.target;return t instanceof Element?t:null},Ha=class extends ut{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.externalDropZoneCount=0,this.lastDropTarget=null}addDragSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:t=>this.onDragStart(e,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(i),this.beans.dragSvc.addDragSource(i)}setDragImageCompIcon(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.dragImageComp;i&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,i.setIcon(e,t))}removeDragSource(e){const{dragSourceAndParamsList:t,beans:i}=this;for(let n=0,s=t.length;n<s;n++)if(t[n].dragSource===e){var o;const e=t[n];null===(o=i.dragSvc)||void 0===o||o.removeDragSource(e),t.splice(n,1);break}}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:i}=this,o=i.dragSvc;for(const n of e)null===o||void 0===o||o.removeDragSource(n);e.length=0,t.length=0,this.externalDropZoneCount=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){var i;this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const o=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-o.left,this.dragInitialSourcePointerOffsetY=t.clientY-o.top,null===(i=e.onDragStarted)||void 0===i||i.call(e),this.createAndUpdateDragImageComp(e)}onDragStop(e){var t;const{dragSource:i,lastDropTarget:o}=this;if(null===i||void 0===i||null===(t=i.onDragStopped)||void 0===t||t.call(i),o){var n;const t=this.dropTargetEvent(o,e,!1);null===(n=o.onDragStop)||void 0===n||n.call(o,t)}this.clearDragAndDropProperties()}onDragCancel(){var e;const{dragSource:t,lastDropTarget:i,lastMouseEvent:o}=this;if(null===t||void 0===t||null===(e=t.onDragCancelled)||void 0===e||e.call(t),i&&o){var n;const e=this.dropTargetEvent(i,o,!1);null===(n=i.onDragCancel)||void 0===n||n.call(i,e)}this.clearDragAndDropProperties()}onDragging(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.positionDragImageComp(e);const i=this.findCurrentDropTarget(e),{lastDropTarget:o,dragSource:n,dragItem:s}=this;let r=!1;if(i!==o){if(r=!0,o){var a;const i=this.dropTargetEvent(o,e,t);null===(a=o.onDragLeave)||void 0===a||a.call(o,i)}if(null===o||i?null===o&&i&&this.handleEnter(n,s):this.handleExit(n,s),i){var l;const o=this.dropTargetEvent(i,e,t);null===(l=i.onDragEnter)||void 0===l||l.call(i,o)}this.lastDropTarget=i}else if(i){var d;const o=this.dropTargetEvent(i,e,t);null===(d=i.onDragging)||void 0===d||d.call(i,o),null!==o&&void 0!==o&&o.changed&&(r=!0)}this.lastMouseEvent=e,r&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){var t;const i=e.getContainer(),o=null===(t=e.getSecondaryContainers)||void 0===t?void 0:t.call(e),n=null===o||void 0===o?void 0:o.length;if(!n)return[[i]];const s=new Array(n+1);s[0]=[i];for(let r=0;r<n;++r)s[r+1]=o[r];return s}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let o=!1;const n=(e,t)=>{for(const i of t){const{width:t,height:o,left:n,right:s,top:r,bottom:a}=i.getBoundingClientRect();if(0===t||0===o)return!1;const l=e.clientX>=n&&e.clientX<s,d=e.clientY>=r&&e.clientY<a;if(!l||!d)return!1}return!0};for(const a of i)if(n(e,a)){o=!0;break}const{eElement:s,type:r}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(s))&&(o&&t.isInterestedIn(r,s))}findCurrentDropTarget(e){const t=[],i=this.dropTargets;for(let s=0,r=i.length;s<r;++s){const o=i[s];this.isMouseOnDropTarget(e,o)&&t.push(o)}const o=t.length;if(0===o)return null;if(1===o)return t[0];const n=R(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let s=0,r=n.length;s<r;++s){const e=n[s];for(let i=0,o=t.length;i<o;i++){const o=t[i],n=this.getAllContainersFromDropTarget(o);let s=!1;for(let t=0,i=n.length;t<i&&!s;t++){const i=n[t];for(let t=0,o=i.length;t<o;t++)if(i[t]===e){s=!0;break}}if(s)return o}}return null}addDropTarget(e){this.dropTargets.push(e),e.external&&this.externalDropZoneCount++}removeDropTarget(e){const t=e.getContainer(),i=this.dropTargets;let o=0;for(let n=0,s=i.length;n<s;++n){const e=i[n];e.getContainer()!==t?(o!==n&&(i[o]=e),++o):e.external&&--this.externalDropZoneCount}i.length=o}hasExternalDropZones(){return this.externalDropZoneCount>0}findExternalZone(e){const t=this.dropTargets;for(let i=0,o=t.length;i<o;++i){const o=t[i];if(o.external&&o.getContainer()===e)return o}return null}dropTargetEvent(e,t,i){var o;const{dragSource:n,dragItem:s,lastDraggingEvent:r,lastMouseEvent:a,dragInitialSourcePointerOffsetX:l,dragInitialSourcePointerOffsetY:d}=this,c=e.getContainer(),u=c.getBoundingClientRect(),{clientX:h,clientY:p}=t,g=h-((null===a||void 0===a?void 0:a.clientX)||0),v=p-((null===a||void 0===a?void 0:a.clientY)||0),m=this.createEvent({event:t,x:h-u.left,y:p-u.top,vDirection:v>0?"down":v<0?"up":null,hDirection:g<0?"left":g>0?"right":null,initialSourcePointerOffsetX:l,initialSourcePointerOffsetY:d,dragSource:n,fromNudge:i,dragItem:s,dropZoneTarget:c,dropTarget:null!==(o=null===r||void 0===r?void 0:r.dropTarget)&&void 0!==o?o:null,changed:!(null===r||void 0===r||!r.changed)});return this.lastDraggingEvent=m,m}positionDragImageComp(e){var t;const i=null===(t=this.dragImageComp)||void 0===t?void 0:t.getGui();i&&nt(i,e,this.beans)}removeDragImageComp(e){var t;(this.dragImageComp===e&&(this.dragImageComp=null),e)&&(null===(t=e.getGui())||void 0===t||t.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){var t;const i=null!==(t=this.createDragImageComp(e))&&void 0!==t?t:null;this.dragImageCompPromise=i,null===i||void 0===i||i.then(e=>{if(i!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive())return void this.destroyBean(e);this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const t=this.dragImageComp;t!==e&&(this.dragImageComp=e,this.removeDragImageComp(t)),e&&(this.appendDragImageComp(e),this.updateDragImageComp())})}appendDragImageComp(e){var t;const i=e.getGui(),o=i.style;o.position="absolute",o.zIndex="9999",null!==(t=this.beans.dragSvc)&&void 0!==t&&t.hasPointerCapture()&&(o.pointerEvents="none"),this.gos.setInstanceDomData(i),this.beans.environment.applyThemeClasses(i),o.top="20px",o.left="20px";const n=M(this.beans);n?n.appendChild(i):this.warnNoBody()}updateDragImageComp(){var e,t;const{dragImageComp:i,dragSource:o,lastDropTarget:n,lastDraggingEvent:s,dragImageLastLabel:r}=this;if(!i)return;this.setDragImageCompIcon(null!==(e=null===n||void 0===n||null===(t=n.getIconName)||void 0===t?void 0:t.call(n,s))&&void 0!==e?e:null);let a=null===o||void 0===o?void 0:o.dragItemName;"function"===typeof a&&(a=a(s)),a||(a=""),r!==a&&(this.dragImageLastLabel=a,i.setLabel(a))}},za=class extends ut{constructor(e,t){super(),this.comp=e,this.stopPropagationCallbacks=t}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:o,stopPropagationCallbacks:n}=this,s=[t,i],r={setTabIndex:e=>{for(const t of s)null==e?t.removeAttribute("tabindex"):t.setAttribute("tabindex",e)}};this.addTabGuards(t,i);const{focusTrapActive:a=!1,onFocusIn:l,onFocusOut:d,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:g,forceFocusOutWhenTabGuardsAreEmpty:v,isFocusableContainer:m}=e;this.tabGuardCtrl=this.createManagedBean(new Hs({comp:r,focusTrapActive:a,eTopGuard:t,eBottomGuard:i,eFocusableElement:o,onFocusIn:l,onFocusOut:d,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:p,isEmpty:g,forceFocusOutWhenTabGuardsAreEmpty:v,isFocusableContainer:m},n))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=D(this.beans).createElement("div"),i="top"===e?Vs.TAB_GUARD_TOP:Vs.TAB_GUARD_BOTTOM;return t.classList.add(Vs.TAB_GUARD,i),N(t,"presentation"),t}addTabGuards(e,t){const i=this.eFocusableElement;i.prepend(e),i.append(t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Re(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){ze(t)||(t=t.getGui());const{eBottomGuard:o}=this;o?o.before(t):e(t,i)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;Pe(e),Pe(t),super.destroy()}},Wa=class extends Mn{initialiseTabGuard(e,t){this.tabGuardFeature=this.createManagedBean(new za(this,t)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},Ua=(e=>(e[e.ToolPanel=0]="ToolPanel",e[e.HeaderCell=1]="HeaderCell",e[e.RowDrag=2]="RowDrag",e[e.ChartPanel=3]="ChartPanel",e[e.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",e))(Ua||{});function ja(e,t){return e+"_"+t}function _a(e){return e instanceof Ka}var Ka=class extends ht{constructor(e,t,i,o){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=o,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=x(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return ja(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every(e=>e.isMoving())}checkLeft(){for(const e of this.displayedChildren)_a(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=Do(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const i of null!==(t=this.displayedChildren)&&void 0!==t?t:[]){var t;e+=i.getActualWidth()}return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!(null===(e=this.getColGroupDef())||void 0===e||!e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const i of null!==(t=this.displayedChildren)&&void 0!==t?t:[]){var t;co(i)?e.push(i):_a(i)&&i.addDisplayedLeafColumns(e)}}addLeafColumns(e){for(const i of null!==(t=this.children)&&void 0!==t?t:[]){var t;co(i)?e.push(i):_a(i)&&i.addLeafColumns(e)}}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&null!==e&&void 0!==e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!==(t=e)&&void 0!==t&&t.isPadding();){var t;e=e.getParent()}if(!(!!e&&e.getProvidedColumnGroup().isExpandable()))return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});for(const n of null!==(i=this.children)&&void 0!==i?i:[]){var i,o;if(_a(n)&&!(null!==(o=n.displayedChildren)&&void 0!==o&&o.length))continue;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n)}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},Ya="row-group-",qa="t-",Qa="b-",Xa=0,$a=class{constructor(e){this.id=void 0,this.destroyed=!1,this._groupData=void 0,this.master=!1,this.detail=void 0,this.rowIndex=null,this.field=null,this.rowGroupColumn=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Xa++,this.alreadyRendered=!1,this.formulaRowIndex=null,this.hovered=!1,this.__selected=!1,this.beans=e}get groupData(){var e,t;const i=this._groupData;return void 0!==i?i:this.footer?null===(o=this.sibling)||void 0===o?void 0:o.groupData:null!==(e=null===(t=this.beans.groupStage)||void 0===t?void 0:t.loadGroupData(this))&&void 0!==e?e:null;var o}set groupData(e){this._groupData=e}get allLeafChildren(){var e,t,i;const o=this._leafs;return void 0===o?null!==(e=null===(t=this.beans.groupStage)||void 0===t||null===(i=t.loadLeafs)||void 0===i?void 0:i.call(t,this))&&void 0!==e?e:null:o}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var i;const{valueCache:o,eventSvc:n}=this.beans,s=this.data;this.data=e,null===o||void 0===o||o.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(e,s,t);if(null===(i=this.__localEventService)||void 0===i||i.dispatchEvent(r),this.sibling){var a;this.sibling.data=e;const i=this.sibling.createDataChangedEvent(e,s,t);null===(a=this.sibling.__localEventService)||void 0===a||a.dispatchEvent(i)}n.dispatchEvent({type:"rowNodeDataChanged",node:this});const l=this.pinnedSibling;var d;l&&(l.data=e,null===(d=l.__localEventService)||void 0===d||d.dispatchEvent(l.createDataChangedEvent(e,s,t)),n.dispatchEvent({type:"rowNodeDataChanged",node:l}))}updateDataOnDetailNode(){const e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?(ni(13),null):"top"===this.rowPinned?qa+this.rowIndex:"bottom"===this.rowPinned?Qa+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var i,o;const{selectionSvc:n}=this.beans,s=null===n||void 0===n||null===(i=n.createDaemonNode)||void 0===i?void 0:i.call(n,this),r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,s));const a=this.createDataChangedEvent(e,r,!1);null===(o=this.__localEventService)||void 0===o||o.dispatchEvent(a)}setId(e){const t=Ti(this.beans.gos);if(t)if(this.data){var i,o;const e=null!==(i=null===(o=this.parent)||void 0===o?void 0:o.getRoute())&&void 0!==i?i:[];this.id=t({data:this.data,parentKeys:e.length>0?e:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Ya)&&ni(14,{groupPrefix:Ya})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");const t=null!==e;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){var o;null===(o=this.beans.expansionSvc)||void 0===o||o.setExpanded(this,e,t,i)}setDataValue(e,t,i){var o;const{colModel:n,valueSvc:s,gos:r,editSvc:a}=this.beans,l="string"!==typeof e?e:null!==(o=n.getCol(e))&&void 0!==o?o:n.getColDefCol(e);if(!l)return!1;const d=s.getValueForDisplay({column:l,node:this,source:"api"}).value;if(r.get("readOnlyEdit")){const{beans:{eventSvc:e},data:o,rowIndex:n,rowPinned:s}=this;return e.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:n,rowPinned:s,column:l,colDef:l.colDef,data:o,node:this,oldValue:d,newValue:t,value:t,source:i}),!1}if(a&&!a.committing){const e=a.setDataValue({rowNode:this,column:l},t,i);if(null!=e)return e}const c=s.setValue(this,l,t,i);var u;(this.dispatchCellChangedEvent(l,t,d),c)&&(null===(u=this.pinnedSibling)||void 0===u||u.dispatchCellChangedEvent(l,t,d));return c}updateHasChildren(){var e;let t=this.group&&!this.footer||!(null===(e=this.childrenAfterGroup)||void 0===e||!e.length);const{rowChildrenSvc:i}=this.beans;i&&(t=i.getHasChildrenValue(this)),t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){var o;const n={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};null===(o=this.__localEventService)||void 0===o||o.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e,t;return null!==(e=null===(t=this.beans.expansionSvc)||void 0===t?void 0:t.isExpandable(this))&&void 0!==e&&e}isSelected(){if(this.footer)return this.sibling.isSelected();const e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){const t=this.childrenAfterGroup;if(t)for(let i=0,o=t.length;i<o;++i)t[i].depthFirstSearch(e);e(this)}dispatchRowEvent(e){var t;null===(t=this.__localEventService)||void 0===t||t.dispatchEvent({type:e,node:this})}setSelected(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";null===(t=this.beans.selectionSvc)||void 0===t||t.setNodesSelected({nodes:[this],newValue:e,clearSelection:i,source:o})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){var i;(null!==(i=this.__localEventService)&&void 0!==i?i:this.__localEventService=new p).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){var i,o,n,s,r,a;null===(i=this.beans.validation)||void 0===i||i.checkRowEvents(e);const l=null!==(o=this.__localEventService)&&void 0!==o?o:this.__localEventService=new p;this.frameworkEventListenerService=null===(n=(s=this.beans.frameworkOverrides).createLocalEventListenerWrapper)||void 0===n?void 0:n.call(s,this.frameworkEventListenerService,l);const d=null!==(r=null===(a=this.frameworkEventListenerService)||void 0===a?void 0:a.wrap(e,t))&&void 0!==r?r:t;l.addEventListener(e,d)}removeEventListener(e,t){var i,o;const n=null!==(i=null===(o=this.frameworkEventListenerService)||void 0===o?void 0:o.unwrap(e,t))&&void 0!==i?i:t;this.removeLocalListener(e,n)}removeLocalListener(e,t){const i=this.__localEventService;i&&(i.removeEventListener(e,t),i.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(oi(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const e=[];let t=this;for(;null!=(null===(i=t)||void 0===i?void 0:i.key);){var i;e.push(t.key),t=t.parent}return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){var e,t;const i=this.childStore;return i?i.getFirstNode():null!==(e=null===(t=this.childrenAfterSort)||void 0===t?void 0:t[0])&&void 0!==e?e:null}_destroy(e){if(this.destroyed)return!1;if(this.destroyed=!0,e?this.clearRowTopAndRowIndex():(this.setRowTop(null),this.setRowIndex(null)),!this.footer){const t=this.detailNode;t&&t._destroy(e);const i=this.sibling;i&&i._destroy(e)}return!0}};function Za(e,t,i){return oo(t,{type:i,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var Ja=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_groupData","_leafs","childStore","groupValue","oldRowTop","sticky","treeNodeFlags","treeParent"]),el=(e,t)=>{const i=new $a(t);for(const o of Object.keys(e))Ja.has(o)||(i[o]=e[o]);return i.oldRowTop=null,i},tl=(e,t,i)=>{if(!i)return;let o=i.rowIndex;if(null==o)return;o+=t;const n=e.getRowCount();for(;o>=0&&o<n;){const i=e.getRow(o);if(!i||!i.footer&&!i.detail)return i;o+=t}},il={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},ol=new Set(Object.values(il));function nl(e,t){const i=e.filterUi;if(!i)return null;if(i.created)return i.promise;if(t)return null;const o=i.create(i.refreshed),n=i;return n.created=!0,n.promise=o,o}function sl(e,t,i,o,s,r,a){var l;return null===(l=t.refresh)||void 0===l||l.call(t,(0,n.A)((0,n.A)({},i),{},{model:o,source:r,additionalEventAttributes:a})),e().then(e=>{if(e){const{filter:t,filterParams:i}=e;rl(t,i,o,s,r,a)}})}function rl(e,t,i,o,s,r){var a;null===e||void 0===e||null===(a=e.refresh)||void 0===a||a.call(e,(0,n.A)((0,n.A)({},t),{},{model:i,state:o,source:s,additionalEventAttributes:r}))}function al(e,t,i,o){const n=e();null!==n&&void 0!==n&&n.created&&n.promise.then(e=>{var s;const r=t();rl(e,n.filterParams,r,null!==(s=i())&&void 0!==s?s:{model:r},"ui",o)})}function ll(e){let t,i,o=!1;const{action:n,filterParams:s,getFilterUi:r,getModel:a,getState:l,updateState:d,updateModel:c,processModelToApply:u}=e;switch(n){case"apply":{var h;const e=l();i=null!==(h=null===e||void 0===e?void 0:e.model)&&void 0!==h?h:null,u&&(i=u(i)),t={state:null===e||void 0===e?void 0:e.state,model:i},o=!0;break}case"clear":var p;t={model:null},null!==s&&void 0!==s&&null!==(p=s.buttons)&&void 0!==p&&p.includes("apply")||(o=!0,i=null);break;case"reset":t={model:null},o=!0,i=null;break;case"cancel":t={model:a()}}d(t),o?c(i):al(r,a,l,{fromAction:n})}function dl(e,t){var i;return null!==(i=e[t])&&void 0!==i?i:null}function cl(e){return qe(e)}var ul=class extends Tn{constructor(e){const{className:t="ag-filter-apply-panel"}=null!==e&&void 0!==e?e:{};super(function(e){return{tag:"div",cls:e}}(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const i=this.buttons;if(this.buttons=e,i===e)return;const o=this.getGui();let n;Re(o),this.destroyListeners();const s=document.createDocumentFragment(),r=this.className,a=e=>{let{type:i,label:o}=e;const a=e=>{this.dispatchLocalEvent({type:i,event:e})};["apply","clear","reset","cancel"].includes(i)||oi(75);const l="apply"===i,d=cl({tag:"button",attrs:{type:l&&t?"submit":"button"},ref:"".concat(i,"FilterButton"),cls:"ag-button ag-standard-button ".concat(r,"-button").concat(l?" "+r+"-apply-button":""),children:o});this.activateTabIndex([d]),l&&(n=d);const c=e=>{e.key===us.ENTER&&(e.preventDefault(),a(e))},u=this.listeners;d.addEventListener("click",a),u.push(()=>d.removeEventListener("click",a)),d.addEventListener("keydown",c),u.push(()=>d.removeEventListener("keydown",c)),s.append(d)};for(const d of e)a(d);this.eApply=n;const l=this.validationTooltipFeature;n&&!l?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!n&&l&&(this.validationTooltipFeature=this.destroyBean(l)),o.append(s)}getApplyButton(){return this.eApply}updateValidity(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const o=this.eApply;o&&(ve(o,!e),this.validationMessage=i,null===(t=this.validationTooltipFeature)||void 0===t||t.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(const e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},hl={selector:"AG-FILTER-BUTTON",component:ul},pl={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>"(".concat(e[0],", ").concat(e[1],")"),filterSummaryTextQuote:e=>'"'.concat(e[0],'"'),minDateValidation:e=>"Date must be after ".concat(e[0]),maxDateValidation:e=>"Date must be before ".concat(e[0]),strictMinValueValidation:e=>"Must be greater than ".concat(e[0]),strictMaxValueValidation:e=>"Must be less than ".concat(e[0])};function gl(e,t,i){return ct(e,pl,t,i)}function vl(e,t){const{debounceMs:i}=e;return ml(e)?(null!=i&&oi(71),0):null!==i&&void 0!==i?i:t}function ml(e){var t,i;return(null!==(t=null===(i=e.buttons)||void 0===i?void 0:i.indexOf("apply"))&&void 0!==t?t:-1)>=0}function fl(e,t,i,o){let n=gl(e,i);if("function"===typeof t){n=t({filterOptionKey:o,filterOption:gl(e,o),placeholder:n})}else"string"===typeof t&&(n=t);return n}var Cl=class extends Tn{constructor(e,t,i,o,n,s){super(),this.column=e,this.wrapper=t,this.eventParent=i,this.updateModel=o,this.isGlobalButtons=n,this.enableGlobalButtonCheck=s,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,i=t,o=i.useForm,s=o?"form":"div";this.setTemplate({tag:s,cls:"ag-filter-wrapper"}),o&&this.addManagedElementListeners(this.getGui(),{submit:e=>{null===e||void 0===e||e.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=i,this.resetButtonsPanel(i),this.addManagedListeners(this.eventParent,(0,n.A)({filterParamsChanged:e=>{let{column:t,params:i}=e;t===this.column&&this.resetButtonsPanel(i,this.params)},filterStateChanged:e=>{let{column:t,state:i}=e;var o;t===this.column&&(null===(o=this.eButtons)||void 0===o||o.updateValidity(!1!==i.valid))},filterAction:e=>{let{column:t,action:i,event:o}=e;t===this.column&&this.afterAction(i,o)}},this.enableGlobalButtonCheck?{filterGlobalButtons:e=>{let{isGlobal:t}=e;if(t!==this.isGlobalButtons){this.isGlobalButtons=t;const e=this.params;this.resetButtonsPanel(e,e,!0)}}}:void 0))}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,i){const{buttons:o,readOnly:n}=null!==t&&void 0!==t?t:{},{buttons:s,readOnly:r,useForm:a}=e;if(!i&&n===r&&C(o,s))return;const l=s&&s.length>0&&!e.readOnly&&!this.isGlobalButtons;let d=this.eButtons;if(l){const e=s.map(e=>({type:e,label:gl(this,"".concat(e,"Filter"))}));if(this.applyActive=ml(this.params),!d){var c;d=this.createBean(new ul),this.appendChild(d.getGui());const e=this.column,t=t=>i=>{let{event:o}=i;this.updateModel(e,t,{fromButtons:!0}),this.afterAction(t,o)};null===(c=d)||void 0===c||c.addManagedListeners(d,{apply:t("apply"),clear:t("clear"),reset:t("reset"),cancel:t("cancel")}),this.eButtons=d}d.updateButtons(e,a)}else this.applyActive=!1,d&&(Pe(d.getGui()),this.eButtons=this.destroyBean(d))}close(e){const t=this.hidePopup;if(!t)return;const i=e,o=null===i||void 0===i?void 0:i.key;let n;o!==us.ENTER&&o!==us.SPACE||(n={keyboardEvent:i}),t(n),this.hidePopup=null}afterAction(e,t){const{params:i,applyActive:o}=this,n=null===i||void 0===i?void 0:i.closeOnApply;switch(e){case"apply":null===t||void 0===t||t.preventDefault(),n&&o&&this.close(t);break;case"reset":n&&o&&this.close();break;case"cancel":n&&this.close(t)}}handleKeyDown(e){!e.defaultPrevented&&e.key===us.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},wl={tag:"div",cls:"ag-filter"},bl=class extends Tn{constructor(e,t,i){super(wl),this.column=e,this.source=t,this.enableGlobalButtonCheck=i,this.wrapper=null}postConstruct(){var e;null===(e=this.beans.colFilter)||void 0===e||e.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return null!=this.wrapper}getFilter(){var e,t;return null!==(e=null===(t=this.wrapper)||void 0===t?void 0:t.then(e=>e.comp))&&void 0!==e?e:null}afterInit(){var e,t;return null!==(e=null===(t=this.wrapper)||void 0===t?void 0:t.then(()=>{}))&&void 0!==e?e:Ln.resolve()}afterGuiAttached(e){var t;this.afterGuiAttachedParams=e,null===(t=this.wrapper)||void 0===t||t.then(t=>{var i,o,n;null===(i=this.comp)||void 0===i||i.afterGuiAttached(e),null===t||void 0===t||null===(o=t.comp)||void 0===o||null===(n=o.afterGuiAttached)||void 0===n||n.call(o,e)})}afterGuiDetached(){var e;null===(e=this.wrapper)||void 0===e||e.then(e=>{var t,i;null===e||void 0===e||null===(t=e.comp)||void 0===t||null===(i=t.afterGuiDetached)||void 0===i||i.call(t)})}createFilter(e){var t;const{column:i,source:o,beans:{colFilter:n}}=this,s=null!==(t=n.getFilterUiForDisplay(i))&&void 0!==t?t:null;this.wrapper=s,null===s||void 0===s||s.then(t=>{if(!t)return;const{isHandler:s,comp:r}=t;let a;if(s){const e=!!this.enableGlobalButtonCheck,o=this.createBean(new Cl(i,t,n,n.updateModel.bind(n),e&&n.isGlobalButtons,e));this.comp=o,a=o.getGui()}else a=r.getGui(),v(a)||oi(69,{guiFromFilter:a});var l;(this.appendChild(a),e)?this.eventSvc.dispatchEvent({type:"filterOpened",column:i,source:o,eGui:this.getGui()}):null===(l=r.afterGuiAttached)||void 0===l||l.call(r,this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:i}=e;"api"!==t&&"paramsUpdated"!==t||i.getId()!==this.column.getId()||!this.beans.colModel.getColDefCol(this.column)||(Re(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){var e;null===(e=this.beans.colFilter)||void 0===e||e.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},yl={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Sl=["january","february","march","april","may","june","july","august","september","october","november","december"];function xl(e,t){return null==e?-1:null==t?1:Number.parseFloat(e)-Number.parseFloat(t)}function Fl(e){return e instanceof Date&&!isNaN(e.getTime())}var Rl={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]}),date:()=>({isValidDate:Fl}),dateString:e=>{let{dataTypeDefinition:t}=e;return{comparator:(e,i)=>{const o=t.dateParser(i);return null==i||o<e?-1:o>e?1:0},isValidDate:e=>"string"===typeof e&&Fl(t.dateParser(e))}},dateTime:e=>Rl.date(e),dateTimeString:e=>Rl.dateString(e),object:()=>{},text:()=>{}},Pl={number:()=>({comparator:xl}),boolean:e=>{let{t:t}=e;return{valueFormatter:e=>v(e.value)?t(String(e.value),e.value?"True":"False"):t("blanks","(Blanks)")}},date:e=>{let{formatValue:t,t:i}=e;return{valueFormatter:e=>{const o=t(e);return v(o)?o:i("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if("NaN"===e)return i("invalidDate","Invalid Date");if(1===t&&null!=e){const t=Sl[Number(e)-1];return i(t,yl[t])}return null!==e&&void 0!==e?e:i("blanks","(Blanks)")},treeListPathGetter:e=>Xs(e,!1)}},dateString:e=>{let{formatValue:t,dataTypeDefinition:i,t:o}=e;return{valueFormatter:e=>{const i=t(e);return v(i)?i:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:e=>Xs(i.dateParser(null!==e&&void 0!==e?e:void 0),!1),treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=Sl[Number(e)-1];return o(t,yl[t])}return null!==e&&void 0!==e?e:o("blanks","(Blanks)")}}},dateTime:e=>{const t=Pl.date(e);return t.treeListPathGetter=Xs,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,i=Pl.dateString(e);return i.treeListPathGetter=e=>Xs(t(null!==e&&void 0!==e?e:void 0)),i},object:e=>{let{formatValue:t,t:i}=e;return{valueFormatter:e=>{const o=t(e);return v(o)?o:i("blanks","(Blanks)")}}},text:()=>{}};function Dl(e,t,i,o,s,r,a){let l=t,d=i;const c="agSetColumnFilter"===e;d||"object"!==o.baseDataType||c||(d=e=>{let{column:t,node:i}=e;return s({column:t,node:i,value:r.valueSvc.getValue(t,i)})});const u=(0,(c?Pl:Rl)[o.baseDataType])({dataTypeDefinition:o,formatValue:s,t:a});return l="object"===typeof t?(0,n.A)((0,n.A)({},u),t):u,{filterParams:l,filterValueGetter:d}}var El={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},Al={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function Ml(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Al:El)[null!==e&&void 0!==e?e:"text"]}var Tl=class extends _s{},kl="__ag_Grid_Stop_Propagation";function Il(e){e[kl]=!0}function Ll(e){return!0===e[kl]}var Nl={isStopPropagation:Ll,stopPropagation:Il},Ol=class extends Bs{constructor(e,t){super(e,Nl,t)}},Gl=class extends Tn{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:"ag-filter-body-wrapper ag-".concat(this.cssIdentifier,"-body-wrapper"),children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new Ol(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new Tl(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}areStatesEqual(e,t){return e===t}refresh(e){const t=e,i=this.params;this.params=t;const{source:o,state:n,additionalEventAttributes:s}=t;"colDef"===o&&this.updateParams(t,i);const r=this.state;this.state=n;const a=null===s||void 0===s?void 0:s.fromAction;return(a&&"apply"!==a||n.model!==r.model||!this.areStatesEqual(n.state,r.state))&&this.setModelIntoUi(n.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=ml(e),this.setupApplyDebounced()}doesFilterPass(e){oi(283);const{getHandler:t,model:i,column:o}=this.params;return t().doesFilterPass((0,n.A)((0,n.A)({},e),{},{model:i,handlerParams:this.beans.colFilter.getHandlerParams(o)}))}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return oi(284),null!=this.params.model}setupApplyDebounced(){const e=vl(this.params,this.defaultDebounceMs),t=Ct(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return oi(285),this.params.model}setModel(e){oi(286);const{beans:t,params:i}=this;return t.colFilter.setModelForColumnLegacy(i.column,e)}applyModel(){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:{valid:i=!0,model:o}}=this;if(!i)return!1;const n=!this.areModelsEqual(t.model,o);return n&&t.onAction("apply",e),n}onNewRowsLoaded(){}onUiChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.updateUiVisibility();const i=this.getModelFromUi(),o={model:i,state:this.getState(),valid:this.canApply(i)};this.state=o;const{params:n,gos:s,eventSvc:r,applyActive:a}=this;n.onStateChange(o),n.onUiChange(this.getUiChangeEventParams()),s.get("enableFilterHandlers")||r.dispatchEvent({type:"filterModified",column:n.column,filterInstance:this}),o.valid&&(null!==e&&void 0!==e||(e=a?void 0:"debounce"),"immediately"===e?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):"debounce"===e&&this.applyDebounced())}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=null===e||void 0===e?void 0:e.container,this.refreshFilterResizer(null===e||void 0===e?void 0:e.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:i}=this;if(!t)return;const o="floatingFilter"===e||"columnFilter"===e;o?(t.restoreLastSize(),t.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(o)}afterGuiDetached(){var e;this.checkApplyDebounce(),null===(e=this.positionableFeature)||void 0===e||e.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e,t){return gl(this,e,t)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&this.areNonNullModelsEqual(e,t)}};function Bl(e){return!!e.operator}function Vl(e,t,i){if(null==t)return null;let o=null;const{compName:n,jsComp:s,fwComp:r}=as(e,t);if(n){o={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]}else{null==s&&null==r&&!0===t.filter&&(o=i())}return o}var Hl=["aggregation","filter","sort","pivot","columnVisibility","columnSizing","rowGroup"],zl={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},Wl=class extends ht{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},i=t.autoHeight?zl.AUTO_HEIGHT:t.print?zl.PRINT:zl.NORMAL;this.view.updateLayoutClasses(i,t)}},Ul="Viewport",jl="fakeVScrollComp",_l=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],Kl=class extends ht{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=Ct(this,()=>this.lastScrollSource[1]=null,150),this.resetLastVScrollDebounced=Ct(this,()=>this.lastScrollSource[0]=null,150)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,Ul)});for(const e of _l){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Ct(this,this.onVScroll.bind(this,Ul),100):this.onVScroll.bind(this,Ul),o=t?Ct(this,this.onVScroll.bind(this,jl),100):this.onVScroll.bind(this,jl);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,o)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[..._l,Ul]){if(this.lastScrollSource[1]===t)continue;Fe(this.getViewportForSource(t),e,this.enableRtl)}}getViewportForSource(e){return e===Ul?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(0===t?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const o=xe(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(o),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(t=e===Ul?this.eBodyViewport.scrollTop:this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:i}=this;null===i||void 0===i||i.setScrollTop(t),this.nextScrollTop=t,e===Ul?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,null!==i&&void 0!==i&&i.active?i.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent((0,n.A)((0,n.A)({},t),{},{type:"bodyScrollEnd"}))},150)}shouldBlockScrollUpdate(e,t){return!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!Fs())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=Ce(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return!!(e<0||e+t>i)}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const i of _l){if(this.getViewportForSource(i).scrollLeft!==e){t=!0;break}}t&&this.onHScroll(Ul)}scrollGridIfNeeded(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl?e>0?0:i:Math.min(Math.max(e,0),i)),Fe(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:e,lastScrollTop:t}=this;return{top:t,bottom:t+e}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{rowModel:i}=this.beans,o=i.getRowCount();let n=-1;for(let s=0;s<o;s++){const t=i.getRow(s);if("function"===typeof e){if(t&&e(t)){n=s;break}}else if(e===t||e===t.data){n=s;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(pi(this.gos,"print"))return;const{rowModel:o}=this.beans,n=o.getRowCount();if("number"!==typeof e||e<0||e>=n)return void oi(88,{index:e});this.clearRetryListeners();const{frameworkOverrides:s,pageBounds:r,rowContainerHeight:a,rowRenderer:l}=this.beans;s.wrapIncoming(()=>{var n,s;const d=this.ctrlsSvc.getGridBodyCtrl(),c=o.getRow(e);let u,h,p=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:e,stickyBottomHeight:i}=d,o=c.rowTop,n=c.rowHeight,s=r.getPixelOffset(),g=c.rowTop-s,v=g+c.rowHeight,m=this.getVScrollPosition(),f=a.divStretchOffset,C=m.top+f,w=m.bottom+f,b=w-C,y=a.getScrollPositionForPixel(g),S=a.getScrollPositionForPixel(v-b),x=Math.min((y+S)/2,g);let F=null;"top"===t?F=y-e:"bottom"===t?F=S+i:"middle"===t?F=x:C+e>g?F=y-e:w-i<v&&(F=S-y>b?y-e:S+i),null!==F&&(this.setVerticalScrollPosition(F),l.redraw({afterScroll:!0})),u=o!==c.rowTop||n!==c.rowHeight,h=e!==d.stickyTopHeight||i!==d.stickyBottomHeight,p++}while((u||h)&&p<10);if(null===(n=this.animationFrameSvc)||void 0===n||n.flushAllFrames(),i<10&&(null!==c&&void 0!==c&&c.stub||null===(s=this.beans.rowAutoHeight)||void 0===s||!s.areRowsMeasured())){const n=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const e=this.getVScrollPosition().top;n!==e&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),e>=o.getRowCount()||this.ensureIndexVisible(e,t,i+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";const{colModel:i,frameworkOverrides:o}=this.beans,n=i.getCol(e);if(!n)return;if(n.isPinned())return;if(!this.visibleCols.isColDisplayed(n))return;const s=this.getPositionedHorizontalScroll(n,t);o.wrapIncoming(()=>{var e;null!==s&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),null===(e=this.animationFrameSvc)||void 0===e||e.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:o}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:o)||n,l=r?o:i;"auto"!==t&&(a="start"===t,l="end"===t);const d="middle"===t;if(a||l||d){const{colLeft:t,colMiddle:i,colRight:o}=this.getColumnBounds(e);return d?i-s/2:a?r?o:t:r?t-s:o-s}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:o,colRight:n}=this.getColumnBounds(e),s=this.enableRtl;return{columnBeforeStart:s?t>n:i<n,columnAfterEnd:s?i<o:t>o}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleCols.bodyWidth,o=e.getActualWidth(),n=e.getLeft(),s=t?-1:1,r=t?i-n:n;return{colLeft:r,colMiddle:r+o/2*s,colRight:r+o*s}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},Yl=class extends ht{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=pi(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:i}=this.beans,o=t.bodyWidth,n=t.getColsLeftWidth(),s=t.getDisplayedColumnsRightWidth();let r;if(e)r=o+n+s;else if(r=o,this.addSpacer){0===(this.gos.get("enableRtl")?n:s)&&i.verticalScrollShowing&&(r+=i.getScrollbarWidth())}this.callback(r)}},ql=class extends ht{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,o=()=>{je(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(o),i.registerBodyViewportResizeListener(o)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;null===e||void 0===e||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,null===t||void 0===t||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=Ce(this.gridBodyCtrl.eBodyViewport);this.bodyHeight!==e&&(this.bodyHeight=e,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function Ql(e,t,i,o){var n;const s=null===(n=t.getColDef().cellRendererParams)||void 0===n?void 0:n.suppressMouseEventHandling;return Xl(e,t,i,o,s)}function Xl(e,t,i,o,n){return!!n&&n(oo(e,{column:t,node:i,event:o}))}function $l(e,t,i){let o=t;for(;o;){const t=bi(e,o,i);if(t)return t;o=o.parentElement}return null}var Zl="cellCtrl";function Jl(e,t){return $l(e,t,Zl)}var ed="renderedRow";function td(e,t){return $l(e,t,ed)}function id(e,t,i,o,n){const s=o?o.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const r=oo(e,{event:t,editing:n,column:o,node:i,data:i.data,colDef:o.getColDef()});if(s){if(s(r))return!0}return!1}function od(e){var t,i;const{pinnedRowModel:o,rowModel:n,rangeSvc:s,visibleCols:r}=e;if(!s||0===r.allCols.length)return;const a=null===(t=null===o||void 0===o?void 0:o.isEmpty("top"))||void 0===t||t?null:"top";let l,d;var c;null===(i=null===o||void 0===o?void 0:o.isEmpty("bottom"))||void 0===i||i?(l=null,d=n.getRowCount()-1):(l="bottom",d=null!==(c=null===o||void 0===o?void 0:o.getPinnedBottomRowCount())&&void 0!==c?c:-1);s.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:d,rowEndPinned:l})}var nd=class extends ht{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),null===(e=this.beans.touchSvc)||void 0===e||e.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){const e=["dblclick","contextmenu","mouseover","mouseout","click",Ze("touchstart")?"touchstart":"mousedown"];for(const t of e){const e=this.processMouseEvent.bind(this,t);this.addManagedElementListeners(this.element,{[t]:e})}}processMouseEvent(e,t){if(!ot(this.beans,t)||Ll(t))return;const{cellCtrl:i,rowCtrl:o}=this.getControlsForEventTarget(t.target);var n;"contextmenu"===e?(null!==i&&void 0!==i&&i.column&&i.dispatchCellContextMenuEvent(t),null===(n=this.beans.contextMenuSvc)||void 0===n||n.handleContextMenuMouseEvent(t,void 0,o,i)):(i&&i.onMouseEvent(e,t),o&&o.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:Jl(t,e),rowCtrl:td(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:o}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):null!==o&&void 0!==o&&o.isFullWidth()&&this.processFullWidthRowKeyboardEvent(o,e,t))}processCellKeyboardEvent(e,t,i){var o,n;const s=null!==(o=null===(n=this.editSvc)||void 0===n?void 0:n.isEditing(e,{withOpenEditor:!0}))&&void 0!==o&&o;if(!id(this.gos,i,e.rowNode,e.column,s)&&"keydown"===t){var r;!s&&(null===(r=this.beans.navigation)||void 0===r?void 0:r.handlePageScrollingKey(i))||e.onKeyDown(i),this.doGridOperations(i,s),sr(i)&&e.processCharacter(i)}"keydown"===t&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const{rowNode:o}=e,{focusSvc:n,navigation:s}=this.beans,r=n.getFocusedCell(),a=null===r||void 0===r?void 0:r.column;if(!id(this.gos,i,o,a,!1)){const o=i.key;if("keydown"===t)switch(o){case us.PAGE_HOME:case us.PAGE_END:case us.PAGE_UP:case us.PAGE_DOWN:null===s||void 0===s||s.handlePageScrollingKey(i,!0);break;case us.LEFT:case us.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case us.UP:case us.DOWN:e.onKeyboardNavigate(i);break;case us.TAB:e.onTabKeyDown(i)}}"keydown"===t&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!ot(this.beans,e))return;const i=hs(e),{clipboardSvc:o,undoRedo:n}=this.beans;return i===us.A?this.onCtrlAndA(e):i===us.C?this.onCtrlAndC(o,e):i===us.D?this.onCtrlAndD(o,e):i===us.V?this.onCtrlAndV(o,e):i===us.X?this.onCtrlAndX(o,e):i===us.Y?this.onCtrlAndY(n):i===us.Z?this.onCtrlAndZ(n,e):void 0}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:i,selectionSvc:o},gos:n}=this;i&&zi(n)&&!function(e){var t;const i=e.get("rowSelection");return"string"!==typeof i&&"multiRow"===(null===i||void 0===i?void 0:i.mode)&&null!==(t=i.ctrlASelectsRows)&&void 0!==t&&t}(n)&&t.isRowsToRender()?od(this.beans):o&&o.selectAllRowNodes({source:"keyboardSelectAll",selectAll:Qi(n)}),e.preventDefault()}onCtrlAndC(e,t){var i;if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:o}=this.getControlsForEventTarget(t.target);null!==(i=this.editSvc)&&void 0!==i&&i.isEditing(o,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){var i;if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:o}=this.getControlsForEventTarget(t.target);null!==(i=this.editSvc)&&void 0!==i&&i.isEditing(o,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){var i;const{cellCtrl:o}=this.getControlsForEventTarget(t.target);null!==(i=this.editSvc)&&void 0!==i&&i.isEditing(o,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){this.gos.get("undoRedoCellEditing")&&e&&(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){null===e||void 0===e||e.redo("ui")}},sd=class extends ht{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,i=null!=t?"".concat(t,"px"):"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}},rd=e=>e.topRowCtrls,ad=e=>e.getStickyTopRowCtrls(),ld=e=>e.getStickyBottomRowCtrls(),dd=e=>e.bottomRowCtrls,cd=e=>e.allRowCtrls,ud=e=>e.getCtrls("top"),hd=e=>e.getCtrls("center"),pd=e=>e.getCtrls("bottom"),gd={center:{type:"center",name:"center-cols",getRowCtrls:cd,getSpannedRowCtrls:hd},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:cd,getSpannedRowCtrls:hd},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:cd,getSpannedRowCtrls:hd},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:cd},topCenter:{type:"center",name:"floating-top",getRowCtrls:rd,getSpannedRowCtrls:ud},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:rd,getSpannedRowCtrls:ud},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:rd,getSpannedRowCtrls:ud},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:rd},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:ad},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:ad},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:ad},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:ad},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:ld},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:ld},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:ld},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:ld},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:dd,getSpannedRowCtrls:pd},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:dd,getSpannedRowCtrls:pd},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:dd,getSpannedRowCtrls:pd},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:dd}};function vd(e){const t=Cd(e);return"ag-".concat(t.name,"-viewport")}function md(e){var t;const i=Cd(e);return null!==(t=i.container)&&void 0!==t?t:"ag-".concat(i.name,"-container")}function fd(e){const t=Cd(e);return"ag-".concat(t.name,"-spanned-cells-container")}function Cd(e){return gd[e]}var wd=["center","left","right","fullWidth"],bd=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],yd=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Sd=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],xd=["stickyTopCenter","stickyTopLeft","stickyTopRight"],Fd=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Rd=[...xd,"stickyTopFullWidth",...Fd,"stickyBottomFullWidth"],Pd=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...xd,...Fd],Dd=class extends ht{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=Cd(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new ql(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop("".concat(e.offset,"px"))}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i,o){var n;this.comp=e,this.eContainer=t,this.eSpannedContainer=i,this.eViewport=o,this.createManagedBean(new nd(null!==(n=this.eViewport)&&void 0!==n?n:this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:s,rangeSvc:r}=this.beans,a=()=>this.onPinnedWidthChanged();this.forContainers(yd,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null===s||void 0===s?void 0:s.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:a})}),this.forContainers(Sd,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(null===s||void 0===s?void 0:s.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:a})}),this.forContainers(wd,()=>this.createManagedBean(new sd(this.eContainer,"center"===this.name?o:void 0))),r&&this.forContainers(Pd,()=>this.createManagedBean(r.createDragListenerFeature(this.eContainer))),this.forContainers(bd,()=>this.createManagedBean(new Yl(e=>this.comp.setContainerWidth("".concat(e,"px"))))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i,displayedColumnsWidthChanged:i,displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),i(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const t=this.options.getSpannedRowCtrls(e);t&&this.comp.setSpannedRowCtrls(t,!1)}})}listenOnDomOrder(){if(Rd.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=pi(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=t=>{e.dragging&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return we(this.eViewport)}getCenterViewportScrollLeft(){return xe(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Ue(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return De(this.eViewport)}getViewportScrollLeft(){return xe(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||Ne(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Fe(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=pi(this.gos,"print"),o=this.gos.get("embedFullWidthRows")||i,n=t.filter(e=>{const t=e.isFullWidth();return this.options.fullWidth?!o&&t:o||!t});this.comp.setRowCtrls({rowCtrls:n,useFlushSync:e})}},Ed="ag-force-vertical-scroll",Ad=class extends ht{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,o,n,s,r){var a,l;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=o,this.eBottom=n,this.eStickyTop=s,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(".".concat(vd("center"))),this.eFullWidthContainer=i.querySelector(".".concat(md("fullWidth"))),this.eStickyTopFullWidthContainer=s.querySelector(".".concat(md("stickyTopFullWidth"))),this.eStickyBottomFullWidthContainer=r.querySelector(".".concat(md("stickyBottomFullWidth"))),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",e=>this.setCellTextSelection(e.currentValue)),this.createManagedBean(new Wl(this.comp)),this.scrollFeature=this.createManagedBean(new Kl(i)),null===(a=this.beans.rowDragSvc)||void 0===a||a.setupRowDrag(i,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,i,n,s,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),null===(l=this.filterManager)||void 0===l||l.setupAdvFilterHeaderComp(o),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),i=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:i,rowResizeEnded:i}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t="rowResizeStarted"===e.type;this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const i=t&&e.getScrollbarWidth()||0,o=Ds()?16:0,n="calc(100% + ".concat(i+o,"px)");je(this.beans,()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t,gos:i}=this;let o=i.get("treeData");if(!o){const i=t.isPivotMode();o=(e?e.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(o?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:e=>{const{target:i}=e,o=me(i,"ag-root",t);t.classList.toggle("ag-has-focus",!o)},focusout:e=>{const{target:i,relatedTarget:o}=e,n=t.contains(o),s=me(o,"ag-root",t);me(i,"ag-root",t)||n&&!s||t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comp.setCellSelectableCss("ag-selectable",e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;null===(e=this.beans.editSvc)||void 0===e||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var e,t,i,o;const n=(null!==(e=null===(t=this.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===t?void 0:t.getRowCount())&&void 0!==e?e:0)+(null!==(i=null===(o=this.filterManager)||void 0===o?void 0:o.getHeaderRowCount())&&void 0!==i?i:0),{rowModel:s}=this.beans,r=s.isLastRowIndexKnown()?s.getRowCount():-1,a=-1===r?-1:n+r;this.comp.setRowCount(a)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?Ed:null,i=pi(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&Oe(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let i=t.sizesMeasured;const o=()=>{const t=i&&Si(this.gos)&&!e.stretching,o=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,t)};o(),this.addManagedEventListeners({heightScaleChanged:o}),this.addManagedPropertyListener("animateRows",o),this.addManagedEventListeners({stylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,o())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:i,eTop:o,eBottom:n,beans:{popupSvc:s,touchSvc:r}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),null===r||void 0===r||r.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,s)});const l=this.onStickyWheel.bind(this);for(const c of[t,i,o,n])this.addManagedElementListeners(c,{wheel:l});const d=this.onHorizontalWheel.bind(this);for(const c of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(c).eContainer,{wheel:d});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:o}=e;(o||Math.abs(t)>Math.abs(i))&&ot(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:i,shiftKey:o}=e;(o||Math.abs(t)>Math.abs(i))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||i).preventDefault()}const{target:o}=e||t;var n;o!==this.eBodyViewport&&o!==this.ctrlsSvc.get("center").eViewport||(null===(n=this.beans.contextMenuSvc)||void 0===n||n.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&null!==e&&void 0!==e&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,i=null===e||void 0===e?void 0:e.getPinnedTopTotalHeight(),o=null===e||void 0===e?void 0:e.getPinnedBottomTotalHeight(),n=t.getPinnedRowBorderWidth()-t.getRowBorderWidth(),s=i?n+i:0,r=o?n+o:0;this.comp.setTopHeight(s),this.comp.setBottomHeight(r),this.comp.setTopInvisible(s<=0),this.comp.setBottomInvisible(r<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyTopHeight("".concat(e,"px")),this.stickyTopHeight=e}setStickyBottomHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyBottomHeight("".concat(e,"px")),this.stickyBottomHeight=e}setStickyWidth(e){if(e){const e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - ".concat(e,"px)")),this.comp.setStickyBottomWidth("calc(100% - ".concat(e,"px)"))}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}setStickyTopOffsetTop(){var e,t,i,o;const n=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(null!==(e=null===(t=this.filterManager)||void 0===t?void 0:t.getHeaderHeight())&&void 0!==e?e:0),s=null!==(i=null===(o=this.pinnedRowModel)||void 0===o?void 0:o.getPinnedTopTotalHeight())&&void 0!==i?i:0;let r=0;n>0&&(r+=n),s>0&&(r+=s),r>0&&(r+=1),this.comp.setStickyTopTop("".concat(r,"px"))}setStickyBottomOffsetBottom(){var e;const{pinnedRowModel:t,scrollVisibleSvc:i,comp:o}=this,n=(null!==(e=null===t||void 0===t?void 0:t.getPinnedBottomTotalHeight())&&void 0!==e?e:0)+(i.horizontalScrollShowing&&i.getScrollbarWidth()||0);o.setStickyBottomBottom("".concat(n,"px"))}};function Md(e,t){var i,o;return null!==(i=null===(o=Jl(e,t.target))||void 0===o?void 0:o.getFocusedCellPosition())&&void 0!==i?i:null}function Td(e,t){const i=pi(e.gos,"normal"),o=t;let n,s;null!=o.clientX||null!=o.clientY?(n=o.clientX,s=o.clientY):(n=o.x,s=o.y);const{pageFirstPixel:r}=e.pageBounds.getCurrentPagePixelRange();if(s+=r,i){const t=e.ctrlsSvc.getScrollFeature(),i=t.getVScrollPosition();n+=t.getHScrollPosition().left,s+=i.top}return{x:n,y:s}}var kd=class extends Tn{constructor(e,t){super(),this.direction=t,this.eViewport=Pn,this.eContainer=Pn,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",xs()||Fs())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=Ds(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),i=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),je(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;bt(this,()=>Ee(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},Id={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},Ld=class extends kd{constructor(){super(Id,"horizontal"),this.eLeftSpacer=Pn,this.eRightSpacer=Pn,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new Yl(e=>this.eContainer.style.width="".concat(e,"px"))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var e,t;if(!this.invisibleScrollbar)return;const i=null!==(e=null===(t=this.beans.pinnedRowModel)||void 0===t?void 0:t.getPinnedBottomTotalHeight())&&void 0!==e?e:0;this.getGui().style.bottom="".concat(i,"px")}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,o=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=o),Be(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=o);let n=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(n+=o),Be(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=o)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),o=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,n=i?0:0===o&&t?16:o,s=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),Ve(this.getGui(),n),Ve(this.eViewport,n),Ve(this.eContainer,n),n||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return xe(this.eViewport,this.enableRtl)}setScrollPosition(e){Ee(this.eViewport)||this.attemptSettingScrollPosition(e),Fe(this.eViewport,e,this.enableRtl)}},Nd={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:Ld},Od={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},Gd=class extends kd{constructor(){super(Od,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new sd(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,o=t&&e.getScrollbarWidth()||0,n=0===o&&i?16:o;this.toggleCss("ag-scrollbar-invisible",i),Be(this.getGui(),n),Be(this.eViewport,n),Be(this.eContainer,n),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const t=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),o=t.scrollTop;i!=o&&this.setScrollPosition(o,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){t||Ee(this.eViewport)||this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},Bd={selector:"AG-FAKE-VERTICAL-SCROLL",component:Gd};function Vd(e,t,i,o){return m(e)?[]:Wd(e.headerClass,e,t,i,o)}function Hd(e,t,i,o){return m(e)?[]:Wd(e.toolPanelClass,e,t,i,o)}function zd(e,t,i){e.toggleCss("ag-column-first",i.isColAtEdge(t,"first")),e.toggleCss("ag-column-last",i.isColAtEdge(t,"last"))}function Wd(e,t,i,o,n){if(m(e))return[];let s;if("function"===typeof e){const r=function(e,t,i,o){return oo(t,{colDef:e,column:i,columnGroup:o})}(t,i,o,n);s=e(r)}else s=e;return"string"===typeof s?[s]:Array.isArray(s)?[...s]:[]}function Ud(e){const{rowIndex:t,rowPinned:i,column:o}=e;return"".concat(t,".").concat(null==i?"null":i,".").concat(o.getId())}function jd(e,t){const i=e.column===t.column,o=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&o&&n}function _d(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(v(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}function Kd(e,t){return!e&&!t||!(!e||!t)&&(e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned)}function Yd(e){let t,i=0;const{pinnedRowModel:o,rowModel:n,pageBounds:s}=e;return null!==o&&void 0!==o&&o.getPinnedTopRowCount()?t="top":n.getRowCount()?(t=null,i=s.getFirstRow()):null!==o&&void 0!==o&&o.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:i,rowPinned:t}}function qd(e){let t,i=null;const{pinnedRowModel:o,pageBounds:n}=e,s=null===o||void 0===o?void 0:o.getPinnedBottomRowCount(),r=null===o||void 0===o?void 0:o.getPinnedTopRowCount();return s?(i="bottom",t=s-1):e.rowModel.getRowCount()?t=n.getLastRow():r&&(i="top",t=r-1),void 0===t?null:{rowIndex:t,rowPinned:i}}function Qd(e,t){var i,o;switch(t.rowPinned){case"top":return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRow(t.rowIndex);case"bottom":return null===(o=e.pinnedRowModel)||void 0===o?void 0:o.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function Xd(e,t){var i;const o=null===(i=e.spannedRowRenderer)||void 0===i?void 0:i.getCellByPosition(t);if(o)return o;const n=e.rowRenderer.getRowByPosition(t);return n?n.getCellCtrl(t.column):null}function $d(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{rowIndex:o,rowPinned:n}=t,{pageBounds:s,pinnedRowModel:r,rowModel:a}=e;if(0===o)return"top"===n?null:"bottom"===n&&a.isRowsToRender()?{rowIndex:s.getLastRow(),rowPinned:null}:null!==r&&void 0!==r&&r.isRowsToRender("top")?{rowIndex:r.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(i){var l;return null!==(l=ec(e,n?void 0:a.getRow(o),!0))&&void 0!==l?l:{rowIndex:o-1,rowPinned:n}}return{rowIndex:o-1,rowPinned:n}}function Zd(e,t){var i;const{pinnedRowModel:o,rowModel:n}=e,s=null!==(i=null===o||void 0===o?void 0:o.getPinnedTopRowCount())&&void 0!==i?i:0,r=n.getRowCount(),{rowPinned:a,rowIndex:l}=t;return"top"===a?l:"bottom"===a?s+r+l:s+l}function Jd(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{rowIndex:o,rowPinned:n}=t,{pageBounds:s,pinnedRowModel:r,rowModel:a}=e;if(function(e,t){const{rowPinned:i,rowIndex:o}=t,{pinnedRowModel:n,pageBounds:s}=e;if("top"===i){var r;return(null!==(r=null===n||void 0===n?void 0:n.getPinnedTopRowCount())&&void 0!==r?r:0)-1<=o}if("bottom"===i){var a;return(null!==(a=null===n||void 0===n?void 0:n.getPinnedBottomRowCount())&&void 0!==a?a:0)-1<=o}const l=s.getLastRow();return l<=o}(e,t))return"bottom"===n?null:"top"===n&&a.isRowsToRender()?{rowIndex:s.getFirstRow(),rowPinned:null}:null!==r&&void 0!==r&&r.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(i){var l;return null!==(l=ec(e,n?void 0:a.getRow(o)))&&void 0!==l?l:{rowIndex:o+1,rowPinned:n}}return{rowIndex:o+1,rowPinned:n}}function ec(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{gos:o,rowRenderer:n}=e;if(null===t||void 0===t||!t.sticky||!xi(o))return;const s=n.getStickyTopRowCtrls(),r=n.getStickyBottomRowCtrls(),a=!r.some(e=>e.rowNode.rowIndex===t.rowIndex),l=a?s:r,d=(i?-1:1)*(a?-1:1);let c;for(let u=0;u<l.length;u++)if(l[u].rowNode.rowIndex===t.rowIndex){c=l[u+d];break}return c?{rowIndex:c.rowNode.rowIndex,rowPinned:null}:void 0}function tc(e,t,i){t.addManagedElementListeners(i,{keydown:t=>{if(!t.defaultPrevented&&t.key===us.TAB){const o=t.shiftKey;Ns(e,i,!1,o)||sc(e,o)&&t.preventDefault()}}})}function ic(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function oc(e){var t;return e.gos.get("suppressHeaderFocus")||!(null===(t=e.overlays)||void 0===t||!t.exclusive)}function nc(e){var t;return e.gos.get("suppressCellFocus")||!(null===(t=e.overlays)||void 0===t||!t.exclusive)}function sc(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=e.ctrlsSvc.get("gridCtrl");return!(i||!o.focusNextInnerContainer(t))||((i||!t&&!o.isDetailGrid())&&o.forceFocusOutOfContainer(t),!1)}function rc(e,t){const i=e.focusSvc,o=i.getFocusedCell();if(o&&t&&jd(o,t)){const{rowIndex:o,rowPinned:n,column:s}=t;E(e)&&i.setFocusedCell({rowIndex:o,column:s,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!ks()})}}function ac(e){return e.cols?e.cols.treeDepth+1:-1}function lc(e){var t,i;return null!==(t=null===(i=e.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===i?void 0:i.getRowCount())&&void 0!==t?t:0}function dc(e){const t=[],i=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const o of i){if(!o)continue;const i=o.getGroupRowCount()||0;for(let n=0;n<i;n++){const i=o.getGroupRowCtrlAtIndex(n),s=t[n];if(i){const o=cc(e,i);(null==s||o>s)&&(t[n]=o)}}}return t}function cc(e,t){let i=e.colModel.isPivotMode()?function(e){var t;return null!==(t=e.gos.get("pivotGroupHeaderHeight"))&&void 0!==t?t:gc(e)}(e):gc(e);const o=t.getHeaderCellCtrls();for(const n of o){const{column:e}=n,t=e.getAutoHeaderHeight();null!=t&&t>i&&e.isAutoHeaderHeight()&&(i=t)}return i}function uc(e){let t=e.colModel.isPivotMode()?function(e){var t;return null!==(t=e.gos.get("pivotHeaderHeight"))&&void 0!==t?t:hc(e)}(e):hc(e);return e.colModel.forAllCols(e=>{const i=e.getAutoHeaderHeight();null!=i&&i>t&&e.isAutoHeaderHeight()&&(t=i)}),t}function hc(e){var t;return null!==(t=e.gos.get("headerHeight"))&&void 0!==t?t:e.environment.getDefaultHeaderHeight()}function pc(e){var t;return null!==(t=e.gos.get("floatingFiltersHeight"))&&void 0!==t?t:hc(e)}function gc(e){var t;return null!==(t=e.gos.get("groupHeaderHeight"))&&void 0!==t?t:hc(e)}var vc=class extends ht{setComp(e,t,i){this.comp=e,this.eGui=t;const{beans:o}=this,{headerNavigation:n,touchSvc:s,ctrlsSvc:r}=o;n&&this.createManagedBean(new Ol(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,o),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,o)}),this.onPivotModeChanged(o),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),null===s||void 0===s||s.mockHeaderContextMenu(this,a),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>je(this.beans,()=>e()),stylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var e;const{beans:t}=this;let i=0;const o=dc(t).reduce((e,t)=>e+t,0),n=uc(t);if(null!==(e=t.filterManager)&&void 0!==e&&e.hasFloatingFilters()&&(i+=pc(t)),i+=o,i+=n,this.headerHeight===i)return;this.headerHeight=i;const s="".concat(i+1,"px");this.comp.setHeightAndMinHeight(s),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const t=e.visibleCols.allCols.some(e=>e.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,o=i!==t?"LEFT":"RIGHT",{beans:n}=this,{headerNavigation:s,focusSvc:r}=n;(s.navigateHorizontally(o,!0,e)||!i&&r.focusOverlay(!1)||sc(n,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:i}=this.beans;switch(e.key){case us.LEFT:t="LEFT";case us.RIGHT:v(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case us.UP:t="UP";case us.DOWN:v(t)||(t="DOWN"),i.navigateVertically(t,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:i,beans:o}=this;!t&&i.contains(P(o))||i.contains(t)||(o.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,i){var o;const{menuSvc:n,ctrlsSvc:s}=this.beans;if(!e&&!i||null===n||void 0===n||!n.isHeaderContextMenuEnabled())return;const{target:r}=null!==e&&void 0!==e?e:t;r!==this.eGui&&r!==(null===(o=s.getHeaderRowContainerCtrl())||void 0===o?void 0:o.eViewport)||n.showHeaderContextMenu(void 0,e,i)}},mc=class extends Tn{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},fc={tag:"div",cls:"ag-header-cell",role:"columnheader",children:[{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"},{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"}]},Cc=class extends mc{constructor(e){super(fc,e),this.eResize=Pn,this.eHeaderCompWrapper=Pn,this.headerCompVersion=0}postConstruct(){const e=this.getGui(),t=()=>{const e=this.ctrl.getSelectAllGui();e&&(this.eResize.insertAdjacentElement("afterend",e),this.addDestroyFunc(()=>e.remove()))},i={setWidth:t=>e.style.width=t,toggleCss:(e,t)=>this.toggleCss(e,t),setUserStyles:t=>Ie(e,t),setAriaSort:t=>t?te(e,t):ie(e),setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerComp,refreshSelectAllGui:t,removeSelectAllGui:()=>{var e;return null===(e=this.ctrl.getSelectAllGui())||void 0===e?void 0:e.remove()}};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0),t()}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){var e;this.headerComp&&(null===(e=this.headerCompGui)||void 0===e||e.remove(),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(e=>this.afterCompCreated(t,e))}afterCompCreated(e,t){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(t)}},wc={tag:"div",cls:"ag-header-group-cell",role:"columnheader",children:[{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"},{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"}]},bc=class extends mc{constructor(e){super(wc,e),this.eResize=Pn,this.eHeaderCompWrapper=Pn}postConstruct(){const e=this.getGui(),t={toggleCss:(e,t)=>this.toggleCss(e,t),setUserStyles:t=>Ie(e,t),setHeaderWrapperHidden:e=>{e?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:e=>{null!=e?this.eHeaderCompWrapper.style.setProperty("max-height","".concat(e,"px")):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e)},setResizableDisplayed:e=>pe(this.eResize,e),setWidth:t=>e.style.width=t,setAriaExpanded:t=>{return i="aria-expanded",void 0!=(o=t)?e.setAttribute(i,o):e.removeAttribute(i);var i,o},setUserCompDetails:e=>this.setUserCompDetails(e),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(t,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(e=>this.afterHeaderCompCreated(e))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive())return void t();const i=this.getGui(),o=e.getGui();this.eHeaderCompWrapper.appendChild(o),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(i)}},yc={tag:"div",cls:"ag-header-cell ag-floating-filter",role:"gridcell",children:[{tag:"div",ref:"eFloatingFilterBody",role:"presentation"},{tag:"div",ref:"eButtonWrapper",cls:"ag-floating-filter-button ag-hidden",role:"presentation",children:[{tag:"button",ref:"eButtonShowMainFilter",cls:"ag-button ag-floating-filter-button-button",attrs:{type:"button",tabindex:"-1"}}]}]},Sc=class extends mc{constructor(e){super(yc,e),this.eFloatingFilterBody=Pn,this.eButtonWrapper=Pn,this.eButtonShowMainFilter=Pn}postConstruct(){const e=this.getGui(),t={toggleCss:(e,t)=>this.toggleCss(e,t),setUserStyles:t=>Ie(e,t),addOrRemoveBodyCssClass:(e,t)=>this.eFloatingFilterBody.classList.toggle(e,t),setButtonWrapperDisplayed:e=>pe(this.eButtonWrapper,e),setCompDetails:e=>this.setCompDetails(e),getFloatingFilterComp:()=>this.compPromise,setWidth:t=>e.style.width=t,setMenuIcon:e=>this.eButtonShowMainFilter.appendChild(e)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=e.newAgStackInstance(),this.compPromise.then(e=>this.afterCompCreated(e))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){var e;null===(e=this.floatingFilterComp)||void 0===e||e.getGui().remove(),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp)}afterCompCreated(e){var t;e&&(this.isAlive()?(this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),null===(t=e.afterGuiAttached)||void 0===t||t.call(e)):this.destroyBean(e))}},xc=class extends Tn{constructor(e){super({tag:"div",cls:e.headerRowClass,role:"row"}),this.ctrl=e,this.headerComps={}}postConstruct(){this.getGui().setAttribute("tabindex",String(this.gos.get("tabIndex"))),$(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,t)=>this.setHeaderCtrls(e,t),setWidth:e=>this.getGui().style.width=e,setRowIndex:e=>$(this.getGui(),e)};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;const i=this.headerComps;this.headerComps={};for(const o of e){const e=o.instanceId;let t=i[e];delete i[e],null==t&&(t=this.createHeaderComp(o),this.getGui().appendChild(t.getGui())),this.headerComps[e]=t}if(Object.values(i).forEach(e=>{e.getGui().remove(),this.destroyBean(e)}),t){const e=Object.values(this.headerComps);e.sort((e,t)=>e.getCtrl().column.getLeft()-t.getCtrl().column.getLeft());const t=e.map(e=>e.getGui());Te(this.getGui(),t)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new bc(e);break;case"filter":t=new Sc(e);break;default:t=new Cc(e)}return this.createBean(t),t.setParentComponent(this),t}},Fc=class extends ht{constructor(e,t,i,o){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=o,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Do(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),o=v(this.columnOrGroup.getOldLeft());(null===t||void 0===t?void 0:t.isActive())&&o&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===i&&this.setLeft(i)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:i,visibleCols:o}=this.beans;if(!pi(i,"print"))return t;if("left"===e.getPinned())return t;const n=o.getColsLeftWidth();if("right"===e.getPinned()){return n+o.bodyWidth+t}return n+t}setLeft(e){if(v(e)&&(this.eCell.style.left="".concat(e,"px")),_a(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&ee(this.ariaEl,e.length)}}},Rc=0,Pc="headerCtrl",Dc=class extends ht{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+Rc++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,i,o,n){var s;(t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,i,o,n),this.reAttemptToFocus)&&(this.reAttemptToFocus=!1,this.focus(null!==(s=this.lastFocusEvent)&&void 0!==s?s:void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,o=i.getDefinition(),n=null===o||void 0===o?void 0:o.suppressHeaderKeyboardEvent;if(!v(n))return!1;return!!n(oo(this.gos,{colDef:o,column:i,headerRowIndex:t,event:e}))}getWrapperHasFocus(){return P(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let i;if("function"===typeof t){i=t(this.getHeaderClassParams())}else i=t;i&&this.comp.setUserStyles(i)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:o}=e,{beans:n}=this,s=e=>{if(!this.isAlive()||!o.isAlive())return;const{paddingTop:i,paddingBottom:r,borderBottomWidth:a,borderTopWidth:l}=fe(this.eGui),d=i+r+a+l,c=t.offsetHeight+d;if(e<5){const i=D(n);if(!(null!==i&&void 0!==i&&i.contains(t))||0==c)return void ft(()=>s(e+1),"raf",n)}this.setColHeaderHeight(this.column,c)};let r,a=!1;const l=()=>{const e=this.column.isAutoHeaderHeight();e&&!a&&d(),!e&&a&&c()},d=()=>{a=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),s(0),r=Ue(this.beans,t,()=>s(0))},c=()=>{a=!1,r&&r(),this.comp.toggleCss("ag-header-cell-auto-height",!1),r=void 0};l(),o.addDestroyFunc(()=>c()),o.addManagedListeners(this.column,{widthChanged:()=>a&&s(0)}),o.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout(()=>s(0))}}),i&&i(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:o}=this;e&&t&&o&&(zd(e,t,i.visibleCols),J(o,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=oc(this.beans);this.eGui&&We(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=P(this.beans),i=e.key===us.LEFT||e.key===us.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey)return;(this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation());var o;if((e.ctrlKey||e.metaKey)&&hs(e)===us.C)return null===(o=this.beans.clipboardSvc)||void 0===o?void 0:o.copyToClipboard();if(!i)return;const n=e.key===us.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){var s;this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),null===(s=this.resizeFeature)||void 0===s||s.toggleColumnResizing(!0)}else this.moveHeader(n)}moveHeader(e){var t;null===(t=this.beans.colMoves)||void 0===t||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:i}=this;let o=e.key===us.LEFT!==t.get("enableRtl");const n=i.getPinned(),s=t.get("enableRtl");return n&&s!==("right"===n)&&(o=!o),(o?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var e;null===(e=this.resizeFeature)||void 0===e||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case us.PAGE_DOWN:case us.PAGE_UP:case us.PAGE_HOME:case us.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=Pc,{eGui:i,gos:o}=this;yi(o,i,t,this),e.addDestroyFunc(()=>yi(o,i,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus()):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&(null===(e=this.beans.dragAndDrop)||void 0===e||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const o=null!==e&&void 0!==e?e:t,{menuSvc:n,gos:s}=this.beans;s.get("preventDefaultOnContextMenu")&&o.preventDefault(),null!==n&&void 0!==n&&n.isHeaderContextMenuEnabled(i)&&n.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Ec=class extends Dc{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,i,o,n){this.comp=e;const{rowCtrl:s,column:r,beans:a}=this,{colResize:l,context:d,colHover:c,rangeSvc:u}=a,h=Rn(this,d,n);this.setGui(t,h),this.updateState(),this.setupWidth(h),this.setupMovingCss(h),this.setupMenuClass(h),this.setupSortableClass(h),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:o,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:h}),this.addColumnHoverListener(h),this.setupFilterClass(h),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(h),this.setupSelectAll(h),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=h.createManagedBean(l.createResizeFeature(s.pinned,r,i,e,this)):pe(i,!1),null===c||void 0===c||c.createHoverFeature(h,[r],t),null===u||void 0===u||u.createRangeHighlightFeature(h,r,e),h.createManagedBean(new Fc(r,t,a)),h.createManagedBean(new Ol(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(h),h.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),h.addManagedListeners(r,{colDefChanged:()=>this.refresh(),formulaRefChanged:()=>this.refresh(),headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const p=()=>this.checkDisplayName();h.addManagedEventListeners({columnValueChanged:p,columnRowGroupChanged:p,columnPivotChanged:p,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),h.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){var i;null===(i=this.beans.colResize)||void 0===i||i.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return oo(t.gos,{colDef:i,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return function(e,t,i){return e.getCompDetails(t,Bn,"agColumnHeader",i)}(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:i,gos:o}=this.beans;return oo(o,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!(null===e||void 0===e||!e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!i&&(!this.openFilterEnabled||Ji(this.gos)),showColumnMenu:(t,i)=>{null===e||void 0===e||e.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button",onClosedCallback:i})},showColumnMenuAfterMouseClick:(t,i)=>{null===e||void 0===e||e.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse",onClosedCallback:i})},showFilter:t=>{null===e||void 0===e||e.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{null===t||void 0===t||t.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{null===t||void 0===t||t.setSortForColumn(this.column,go(e),!!i,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(e,t)=>{o.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}})}setupSelectAll(e){var t;const{selectionSvc:i}=this.beans;i&&(this.selectAllFeature=e.createOptionalManagedBean(i.createSelectAllFeature(this.column)),null===(t=this.selectAllFeature)||void 0===t||t.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{const t=i.createSelectAllFeature(this.column);var o;t&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(t),null===(o=this.selectAllFeature)||void 0===o||o.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!t&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){var e;return null===(e=this.selectAllFeature)||void 0===e?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;(super.handleKeyDown(e),e.key===us.SPACE)?null===(t=this.selectAllFeature)||void 0===t||t.onSpaceKeyDown(e):e.key===us.ENTER?this.onEnterKeyDown(e):e.key===us.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){const{column:t,gos:i,sortable:o,beans:n}=this;let s=!1;var r;if((e.ctrlKey||e.metaKey)&&(s=this.showMenuOnKeyPress(e,!0)),!s)if(!e.altKey&&Ui(i))null===(r=n.rangeSvc)||void 0===r||r.handleColumnSelection(t,e);else if(o){var a;null===(a=n.sortSvc)||void 0===a||a.progressSort(t,e.shiftKey,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();return!!Ac(i)&&(!!i.onMenuKeyboardShortcut(t)&&(e.preventDefault(),!0))}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),ks()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const e=Vd(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e);for(const i of e)t.has(i)?t.delete(i):this.comp.toggleCss(i,!0);for(const i of t)this.comp.toggleCss(i,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t,i;this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable&&(this.dragSource=null!==(t=null===(i=this.beans.colMoves)||void 0===i?void 0:i.setDragSourceForHeader(e,this.column,this.displayName))&&void 0!==t?t:null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!(null===e||void 0===e||!e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!(null===e||void 0===e||!e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass)&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth("".concat(e,"px"))};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var e;null===(e=this.comp)||void 0===e||e.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=0===e,i=1===e;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){var e,t;const{eGui:i,column:o,comp:n,beans:s}=this,r=dc(this.beans),a=0===r.reduce((e,t)=>e+t,0);if(n.toggleCss("ag-header-parent-hidden",a),!o.isSpanHeaderHeight())return i.style.removeProperty("top"),i.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),void n.toggleCss("ag-header-span-total",!1);const{numberOfParents:l,isSpanningTotal:d}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",l>0);const c=uc(s);if(0===l)return n.toggleCss("ag-header-span-total",!1),i.style.setProperty("top","0px"),void i.style.setProperty("height","".concat(c,"px"));n.toggleCss("ag-header-span-total",d);const u=(null!==(e=null===(t=this.column.getFirstRealParent())||void 0===t?void 0:t.getLevel())&&void 0!==e?e:-1)+1,h=r.length-u;let p=0;for(let g=0;g<h;g++)p+=r[r.length-1-g];i.style.setProperty("top","".concat(-p,"px")),i.style.setProperty("height","".concat(c+p,"px"))}refreshAriaSort(){let e=null;const{beans:t,column:i,comp:o,sortable:n}=this;if(n){var s,r;const n=this.getLocaleTextFunc(),a=null!==(s=null===(r=t.sortSvc)||void 0===r?void 0:r.getDisplaySortForColumn(i))&&void 0!==s?s:null;o.setAriaSort(function(e){const t=null===e||void 0===e?void 0:e.direction;return"asc"===t?"ascending":"desc"===t?"descending":"mixed"===t?"other":"none"}(a)),e=n("ariaSortableColumn","Press ENTER to sort")}else o.setAriaSort();this.setAriaDescriptionProperty("sort",e)}refreshAriaMenu(){let e=null;if(this.menuEnabled){e=this.getLocaleTextFunc()("ariaMenuColumn","Press ALT DOWN to open column menu")}this.setAriaDescriptionProperty("menu",e)}refreshAriaFilterButton(){let e=null;const{openFilterEnabled:t,gos:i}=this;if(t&&!Ji(i)){e=this.getLocaleTextFunc()("ariaFilterColumn","Press CTRL ENTER to open filter")}this.setAriaDescriptionProperty("filterButton",e)}refreshAriaFiltered(){let e=null;if(this.column.isFilterActive()){e=this.getLocaleTextFunc()("ariaColumnFiltered","Column Filtered")}this.setAriaDescriptionProperty("filter",e)}refreshAriaCellSelection(){let e=null;const{gos:t,column:i,beans:o}=this;if(Ui(t)){var n;const t=this.getLocaleTextFunc(),s=null===(n=o.rangeSvc)||void 0===n?void 0:n.isColumnInAnyRange(i);e=t("ariaColumnCellSelection","Press CTRL+SPACE to ".concat(s?"de":"","select all visible cells in this column"))}this.setAriaDescriptionProperty("cellSelection",e)}setAriaDescriptionProperty(e,t){const i=this.ariaDescriptionProperties;null!=t?i.set(e,t):i.delete(e)}announceAriaDescription(){var e;const{beans:t,eGui:i,ariaDescriptionProperties:o}=this;if(!i.contains(P(t)))return;const n=Array.from(o.keys()).sort((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0)).map(e=>o.get(e)).join(". ");null===(e=t.ariaAnnounce)||void 0===e||e.announceValue(n,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered(),this.refreshAriaCellSelection()}addColumnHoverListener(e){var t;null===(t=this.beans.colHover)||void 0===t||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return Ac(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function Ac(e){return"function"===typeof(null===e||void 0===e?void 0:e.getAnchorElementForMenu)&&"function"===typeof e.onMenuKeyboardShortcut}var Mc=0,Tc=class extends ht{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=Mc++,this.comp=null,this.allCtrls=[];let o="ag-header-row-column";"group"===i?o="ag-header-row-group":"filter"===i&&(o="ag-header-row-filter"),this.headerRowClass="ag-header-row ".concat(o)}setRowIndex(e){var t;this.rowIndex=e,null===(t=this.comp)||void 0===t||t.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=pi(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.allCtrls.every(e=>null!=e.eGui)}setComp(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.comp=e,t=Rn(this,this.beans.context,t),i&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),i=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,stylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",i),e.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=pi(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth("".concat(e,"px"))}getWidthForRow(){const{visibleCols:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=dc(this.beans);for(let o=0;o<t.length;o++){if(o===this.rowIndex&&"group"===this.type)return{topOffset:e,rowHeight:t[o]};e+=t[o]}const i=uc(this.beans);if("column"===this.type)return{topOffset:e,rowHeight:i};e+=i;return{topOffset:e,rowHeight:pc(this.beans)}}onVirtualColumnsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const o of t)this.recycleAndCreateHeaderCtrls(o,this.ctrlsById,e);const i=e=>{const{focusSvc:t,visibleCols:i}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return i.isVisible(e.column)};if(e)for(const[o,n]of e){i(n)?this.ctrlsById.set(o,n):this.destroyBean(n)}return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,i){if(e.isEmptyGroup())return;const o=e.getUniqueId();let n;i&&(n=i.get(o),i.delete(o));if(n&&n.column!=e&&(this.destroyBean(n),n=void 0),null==n)switch(this.type){case"filter":n=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break;case"group":n=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:n=this.createBean(new Ec(e,this))}t.set(o,n)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pinned;return"group"===this.type?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const i=this.allCtrls.find(t=>t.column==e);if(!i)return!1;return i.focus(t)}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},kc=class extends ht{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:i,ctrlsSvc:o,colModel:n,colMoves:s}=this.beans;this.setupCenterWidth(),null===i||void 0===i||i.setupHeaderPinnedWidth(this),this.setupDragAndDrop(s,this.eViewport);const r=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const a="".concat("string"===typeof this.pinned?this.pinned:"center","Header");o.register(a,this),n.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{focusSvc:t,filterManager:i,visibleCols:o}=this.beans;let n=0;const s=t.getFocusHeaderToUseAfterRefresh(),r=this.getAllCtrls();(()=>{const t=o.headerGroupRowCount;n=t,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const i=this.groupsRowCtrls.length;if(i!==t)if(i>t){for(let e=t;e<i;e++)this.destroyBean(this.groupsRowCtrls[e]);this.groupsRowCtrls.length=t}else for(let e=i;e<t;e++){const t=this.createBean(new Tc(e,this.pinned,"group"));this.groupsRowCtrls.push(t)}})(),(()=>{const t=n++;this.hidden?this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl):null!=this.columnsRowCtrl&&e?this.columnsRowCtrl.rowIndex!==t&&this.columnsRowCtrl.setRowIndex(t):(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new Tc(t,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!(null===i||void 0===i||!i.hasFloatingFilters())&&!this.hidden;const t=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void t();e||t();const o=n++;if(this.filtersRowCtrl){this.filtersRowCtrl.rowIndex!==o&&this.filtersRowCtrl.setRowIndex(o)}else this.filtersRowCtrl=this.createBean(new Tc(o,this.pinned,"filter"))})();const a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(t,s),r.length!==a.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=t=>null===t||void 0===t?void 0:t.getHeaderCellCtrls().find(t=>t.column===e);if(co(e))return t(this.columnsRowCtrl);if(0!==this.groupsRowCtrls.length)for(let i=0;i<this.groupsRowCtrls.length;i++){const e=t(this.groupsRowCtrls[i]);if(e)return e}}getHtmlElementForColumnHeader(e){var t,i;return null!==(t=null===(i=this.getHeaderCtrlForColumn(e))||void 0===i?void 0:i.eGui)&&void 0!==t?t:null}getRowType(e){var t;return null===(t=this.getAllCtrls()[e])||void 0===t?void 0:t.type}focusHeader(e,t,i){const o=this.getAllCtrls()[e];return!!o&&o.focusHeader(t,i)}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const i=null===e||void 0===e?void 0:e.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;const{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new Yl(e=>this.comp.setCenterWidth("".concat(e,"px")),!0))}};function Ic(e,t,i){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",i))}function Lc(e){const{enterpriseMenuFactory:t,filterMenuFactory:i,gos:o}=e;return t&&Ji(o)?t:i}var Nc=class extends bs{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},Oc=class extends Tn{constructor(){super()}};function Gc(e,t,i){const o=Bc(e,t,i);if(o){const{className:e}=o;if("string"===typeof e&&e.includes("ag-icon")||"object"===typeof e&&e["ag-icon"])return o}const n=cl({tag:"span"});return n.appendChild(o),n}function Bc(e,t,i){let o=null;"smallDown"===e?oi(262):"smallLeft"===e?oi(263):"smallRight"===e&&oi(264);const n=null===i||void 0===i?void 0:i.getColDef().icons;if(n&&(o=n[e]),t.gos&&!o){const i=t.gos.get("icons");i&&(o=i[e])}if(o){let t;if("function"===typeof o)t=o();else{if("string"!==typeof o)return void oi(38,{iconName:e});t=o}return"string"===typeof t?Ae(t):ze(t)?t:void oi(133,{iconName:e})}{const i=t.registry.getIcon(e);var s;if(!i)null===(s=t.validation)||void 0===s||s.validateIcon(e);return cl({tag:"span",cls:"ag-icon ag-icon-".concat(null!==i&&void 0!==i?i:e),role:"presentation",attrs:{unselectable:"on"}})}}var Vc={tag:"div",cls:"ag-overlay-loading-center",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},Hc={tag:"div",cls:"ag-overlay-exporting-center",children:[{tag:"span",ref:"eExportingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eExportingText",cls:"ag-exporting-text"}]},zc={tag:"span",cls:"ag-overlay-no-rows-center"},Wc={tag:"span",cls:"ag-overlay-no-matching-rows-center"},Uc={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},jc={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},_c=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:i,order:o}=this;t.has(e)||(t.add(e),i.add(e),o.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),Mo(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:i,queued:o}=this;e.clear(),o.clear(),t.clear(),i.length=0}sort(){var e,t;const{sortSvc:i,rowNodeSorter:o,gos:n}=this.beans,s=null!==(e=null===i||void 0===i?void 0:i.getSortOptions())&&void 0!==e?e:[],r=function(e){const t=e.findIndex(qc);var i;if(t>-1)return null===(i=e.splice(t,1))||void 0===i?void 0:i[0]}(this.order);if(this.order.sort((e,t)=>{var i,o,n,s;return(null!==(i=null===(o=e.pinnedSibling)||void 0===o?void 0:o.rowIndex)&&void 0!==i?i:0)-(null!==(n=null===(s=t.pinnedSibling)||void 0===s?void 0:s.rowIndex)&&void 0!==n?n:0)}),this.order=null!==(t=null===o||void 0===o?void 0:o.doFullSort(this.order,s))&&void 0!==t?t:this.order,!r)return;const a=Pi(n);"bottom"===a||"pinnedBottom"===a?this.order.push(r):this.order.unshift(r)}hide(e){const{all:t,visible:i}=this,o=i.size;return t.forEach(t=>e(t)?i.delete(t):i.add(t)),this.order=Array.from(i),this.sort(),o!=i.size}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function Kc(e){var t;if(-1===e.level)return!0;const i=e.parent;return!(null===i||void 0===i||null===(t=i.childrenAfterSort)||void 0===t||!t.some(t=>t==e))&&Kc(i)}function Yc(e,t){const{gos:i,rowModel:o,filterManager:n}=e;return hi(i)?!o.getRowNode(t.id):null!==n&&void 0!==n&&n.isAnyFilterPresent()?!Kc(t):!!i.get("pivotMode")&&!t.group}function qc(e){return!!e.pinnedSibling&&function(e){return!!e.footer&&-1===e.level}(e.pinnedSibling)}var Qc=class extends ht{postConstruct(){const{gos:e,beans:t}=this;this.top=new _c(t,"top"),this.bottom=new _c(t,"bottom");const i=e=>Yc(t,e.pinnedSibling),o=()=>{const i=e.get("isRowPinned");i&&e.get("enableRowPinning")&&t.rowModel.forEachNode(e=>this.pinRow(e,i(e)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:e=>{let{keepRenderedRows:t}=e;this.tryToEmptyQueues(),this.pinGrandTotalRow();let o=!1;this.forContainers(e=>{o||(o=e.hide(i))});const n=this.refreshRowPositions();(!t||n||o)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(Zc),this.refreshRowPositions()},rowNodeDataChanged:t=>{var i;let{node:o}=t;const n=e.get("isRowPinnable");null===(i=null===n||void 0===n?void 0:n(o))||void 0===i||i||this.pinRow(o,null)},firstDataRendered:o}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(e=>e.hide(i)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",e=>{let{currentValue:t}=e;this._grandTotalPinned="pinnedBottom"===t?"bottom":"pinnedTop"===t?"top":null}),this.addManagedPropertyListener("isRowPinned",o)}destroy(){this.reset(!1),super.destroy()}reset(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.forContainers(e=>{const t=[];e.forEach(e=>t.push(e)),t.forEach(e=>this.pinRow(e,null)),e.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,i){var o,n;if(e.footer&&e.level>-1)return;if(e.footer&&-1===e.level)return this._grandTotalPinned=t,void function(e){let{gos:t,rowModel:i}=e;ui(t)&&i.refreshModel({step:"map"})}(this.beans);const s=null!==(o=e.rowPinned)&&void 0!==o?o:null===(n=e.pinnedSibling)||void 0===n?void 0:n.rowPinned;if(null!=s&&null!=t&&t!=s){const o=e.rowPinned?e:e.pinnedSibling,n=e.rowPinned?e.pinnedSibling:e;return this.pinRow(o,null,i),void this.pinRow(n,t,i)}const r=i&&function(e,t,i){var o;const{rowSpanSvc:n}=e,s=null!==(o=i&&(null===n||void 0===n?void 0:n.isCellSpanning(i,t)))&&void 0!==o&&o;var r;if(i&&s)return null===n||void 0===n||null===(r=n.getCellSpan(i,t))||void 0===r?void 0:r.spannedNodes}(this.beans,e,i);if(r)r.forEach(e=>this.pinRow(e,t));else if(null==t){const i=e.rowPinned?e:e.pinnedSibling,o=this.findPinnedRowNode(i);if(!o)return;o.delete(i);const n=i.pinnedSibling;$c(i),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(n)}else{const i=Xc(this.beans,e,t),o=this.getContainer(t);o.add(i),Yc(this.beans,e)&&o.hide(e=>Yc(this.beans,e.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return 0===this.getContainer(e).size()}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const o=fi(this.beans,i);i.setRowTop(t),i.setRowHeight(o.height),t+=o.height,e=!0}};return this.bottom.forEach(i),t=0,this.top.forEach(i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return Jc(this.top)}getPinnedBottomTotalHeight(){return Jc(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=e=>{const t=[];return this.forEachPinnedRow(e,e=>t.push(e.pinnedSibling.id)),t};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,i)=>{for(const o of e[i]){const e=this.beans.rowModel.getRowNode(o);e?this.pinRow(e,i):t.queue(o)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const i=new Set;e.forEachQueued(e=>{const t=this.beans.rowModel.getRowNode(e);t&&i.add(t)});for(const o of i)e.unqueue(o.id),this.pinRow(o,t)})}pinGrandTotalRow(){var e;const{gos:t,beans:i,_grandTotalPinned:o}=this,n=i.rowModel;if(!ui(t))return;const s=null===(e=n.rootNode)||void 0===e?void 0:e.sibling;if(!s)return;const r=s.pinnedSibling,a=r&&this.findPinnedRowNode(r);if(o){if(a&&a.floating!==o&&(a.delete(r),$c(r)),!a||a.floating!==o){const e=Xc(i,s,o);this.getContainer(o).add(e)}}else{if(!a)return;a.delete(r),$c(r)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(e=>e.forEach(e=>e.setRowHeight(e.rowHeight,!0)))}getContainer(e){return"top"===e?this.top:this.bottom}findPinnedRowNode(e){return this.top.has(e)?this.top:this.bottom.has(e)?this.bottom:void 0}refreshRowPositions(e){const t=e=>function(e,t){let i=0,o=!1;return t.forEach((t,n)=>{if(o||(o=t.rowTop!==i),t.setRowTop(i),t.rowHeightEstimated||null==t.rowHeight){const i=fi(e,t).height;o||(o=t.rowHeight!==i),t.setRowHeight(i)}t.setRowIndex(n),i+=t.rowHeight}),o}(this.beans,e);if(e)return t(this.getContainer(e));let i=!1;return this.forContainers(e=>{const o=t(e);i||(i=o)}),i}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),null===e||void 0===e||e.dispatchRowEvent("rowPinned")}};function Xc(e,t,i){if(t.pinnedSibling)return t.pinnedSibling;const o=el(t,e);o.setRowTop(null),o.setRowIndex(null),o.rowPinned=i;const n="top"===i?qa:Qa;return o.id="".concat(n).concat(i,"-").concat(t.id),o.pinnedSibling=t,t.pinnedSibling=o,o}function $c(e){if(!e.pinnedSibling)return;e.rowPinned=null,e._destroy(!1);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function Zc(e){const t=new Set;e.forEach(e=>{e.group&&t.add(e)}),t.forEach(t=>e.delete(t))}function Jc(e){const t=e.size();if(0===t)return 0;const i=e.getByIndex(t-1);return void 0===i?0:i.rowTop+i.rowHeight}var eu=class extends ht{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return 0===this.getCache(e).order.length}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const e=e=>{e.setRowHeight(e.rowHeight,!0)};nu(this.pinnedBottomRows,e),nu(this.pinnedTopRows,e)}}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const o=fi(this.beans,i);i.setRowTop(t),i.setRowHeight(o.height),t+=o.height,e=!0}};return nu(this.pinnedBottomRows,i),t=0,nu(this.pinnedTopRows,i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=this.getCache(t);if(void 0===e)return i.order.length=0,void(i.cache={});const o=Ti(this.gos),n="top"===t?qa:Qa,s=new Set(i.order),r=[],a=new Set;let l=0,d=-1;for(const h of e){var c;const e=null!==(c=null===o||void 0===o?void 0:o({data:h,level:0,rowPinned:t}))&&void 0!==c?c:n+this.nextId++;if(a.has(e)){oi(96,{id:e,data:h});continue}d++,a.add(e),r.push(e);const u=iu(i,e);if(void 0!==u)u.data!==h&&u.updateData(h),l+=this.setRowTopAndRowIndex(u,l,d),s.delete(e);else{const o=new $a(this.beans);o.id=e,o.data=h,o.rowPinned=t,l+=this.setRowTopAndRowIndex(o,l,d),i.cache[e]=o,i.order.push(e)}}for(const h of s){var u;null===(u=iu(i,h))||void 0===u||u.clearRowTopAndRowIndex(),delete i.cache[h]}i.order=r}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(fi(this.beans,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return tu(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return tu(this.pinnedBottomRows)}getPinnedTopRowCount(){return su(this.pinnedTopRows)}getPinnedBottomRowCount(){return su(this.pinnedBottomRows)}getPinnedTopRow(e){return ou(this.pinnedTopRows,e)}getPinnedBottomRow(e){return ou(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return iu(this.getCache(t),e)}forEachPinnedRow(e,t){return nu(this.getCache(e),t)}getCache(e){return"top"===e?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function tu(e){const t=su(e);if(0===t)return 0;const i=ou(e,t-1);return void 0===i?0:i.rowTop+i.rowHeight}function iu(e,t){return e.cache[t]}function ou(e,t){return iu(e,e.order[t])}function nu(e,t){e.order.forEach((i,o)=>{const n=iu(e,i);n&&t(n,o)})}function su(e){return e.order.length}var ru=e=>{let t=e.childrenAfterGroup;for(;null!==(i=t)&&void 0!==i&&i.length;){var i;const e=t[0];if(e.sourceRowIndex>=0)return e;t=e.childrenAfterGroup}},au=(e,t,i,o)=>{var n;if(!t.size||!e)return!1;let s=!1;const r=null!==(n=e.length)&&void 0!==n?n:0;let a=-1;i&&(a=i.sourceRowIndex,(i=a<0?ru(i):null)&&(a=i.sourceRowIndex)),a<0||a>=r?a=r:o||++a;let l=a,d=Math.min(a,r-1);for(const h of t){const e=h.sourceRowIndex;e<l&&(l=e),e>d&&(d=e)}let c=l;for(let h=l;h<a;++h){const i=e[h];t.has(i)||(i.sourceRowIndex!==c&&(i.sourceRowIndex=c,e[c]=i,s=!0),++c)}let u=d;for(let h=d;h>=a;--h){const i=e[h];t.has(i)||(i.sourceRowIndex!==u&&(i.sourceRowIndex=u,e[u]=i,s=!0),--u)}for(const h of t)h.sourceRowIndex!==c&&(h.sourceRowIndex=c,e[c]=h,s=!0),++c;return s},lu=class{constructor(){this.reordered=!1,this.removals=[],this.updates=new Set,this.adds=new Set}},du=(e=>(e.Applied="Applied",e.StoreNotFound="StoreNotFound",e.StoreLoading="StoreLoading",e.StoreWaitingToLoad="StoreWaitingToLoad",e.StoreLoadingFailed="StoreLoadingFailed",e.StoreWrongType="StoreWrongType",e.Cancelled="Cancelled",e.StoreNotStarted="StoreNotStarted",e))(du||{});function cu(e){return!(!e.rowPinned||!e.pinnedSibling)}function uu(e,t,i,o){const n="top"===t;if(!i)return uu(e,t,n?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),o);if(!o){const o=n?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return uu(e,t,i,n?e.getPinnedTopRow(o-1):e.getPinnedBottomRow(o-1))}let s=!1,r=!1;const a=[];return e.forEachPinnedRow(t,e=>e!==i||s?s&&e===o?(r=!0,void a.push(e)):void(s&&!r&&a.push(e)):(s=!0,void a.push(e))),a}var hu={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},pu=class extends Tn{constructor(){super(hu,[gr]),this.eCheckbox=Pn}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:i}=this,o=t.isSelected(),n=de(e,o),[s,r]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(s,r);i.setValue(o,!0),i.setInputAriaLabel("".concat(a," (").concat(n,")"))}init(e){this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getWrapperElement(),{dblclick:Il,click:e=>{var t;Il(e),this.eCheckbox.isDisabled()||null===(t=this.beans.selectionSvc)||void 0===t||t.handleSelectionEvent(e,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",e=>{let{currentValue:t,previousValue:i}=e;("object"===typeof t?Gi(t):void 0)!==("object"===typeof i?Gi(i):void 0)&&this.onSelectableChanged()});if(_i(this.gos)||"function"===typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:i,gos:o}=this,s=t.selectable,r=this.getIsVisible();let a;if("function"===typeof r){const o=null===i||void 0===i?void 0:i.callbackParams;if(e){const i=e.createColumnFunctionCallbackParams(t);a=r((0,n.A)((0,n.A)({},o),i))}else a=r((0,n.A)((0,n.A)({},o),{},{node:t,data:t.data}))}else a=null!==r&&void 0!==r&&r;const l=s&&!a||!s&&a,d=s||a,c=o.get("rowSelection"),u=c&&"string"!==typeof c?!Gi(c):!(null===e||void 0===e||!e.getColDef().showDisabledCheckboxes);this.setVisible(d&&(!l||u)),this.setDisplayed(d&&(!l||u)),d&&this.eCheckbox.setDisabled(l),null!==i&&void 0!==i&&i.removeHidden&&this.setDisplayed(d)}getIsVisible(){var e;const t=this.overrides;if(t)return t.isVisible;const i=this.gos.get("rowSelection");return i&&"string"!==typeof i?Li(i):null===(e=this.column)||void 0===e||null===(e=e.getColDef())||void 0===e?void 0:e.checkboxSelection}},gu=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){var e;const t=this.getRoot(),i=this.getEnd();if(null==t||null==i)return this.cachedRange;this.cachedRange=null!==(e=this.getNodesInRange(t,i))&&void 0!==e?e:[]}return this.cachedRange}isInRange(e){return null!==this.rootId&&this.getRange().some(t=>t.id===e.id)}getRoot(e){return this.rootId?this.getRowNode(this.rootId):e?(this.setRoot(e),e):void 0}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:i,pinnedRowModel:o}=this;return null!==t&&void 0!==t||(t=i.getRowNode(e)),null!==o&&void 0!==o&&o.isManual()&&(null!==t&&void 0!==t||(t=o.getPinnedRowById(e,"top")),null!==t&&void 0!==t||(t=o.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.rootId,o=t.findIndex(t=>t.id===e.id);if(o>-1){const n=t.slice(0,o),s=t.slice(o+1);return this.setEndRange(e),i?{keep:n,discard:s}:{keep:s,discard:n}}return{keep:t,discard:[]}}extend(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getRoot();if(null==i){const i=this.getRange().slice();return t&&e.depthFirstSearch(e=>!e.group&&i.push(e)),i.push(e),this.setRoot(e),{keep:i,discard:[]}}const o=this.getNodesInRange(i,e);if(!o)return this.setRoot(e),{keep:[e],discard:[]};if(o.find(e=>e.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}getNodesInRange(e,t){const{pinnedRowModel:i,rowModel:o}=this;if(null===i||void 0===i||!i.isManual())return o.getNodesInRangeForSelection(e,t);if("top"===e.rowPinned&&!t.rowPinned){var n;return uu(i,"top",e,void 0).concat(null!==(n=o.getNodesInRangeForSelection(o.getRow(0),t))&&void 0!==n?n:[])}if("bottom"===e.rowPinned&&!t.rowPinned){var s;const n=uu(i,"bottom",void 0,e),r=o.getRowCount(),a=o.getRow(r-1);return(null!==(s=o.getNodesInRangeForSelection(t,a))&&void 0!==s?s:[]).concat(n)}if(!e.rowPinned&&!t.rowPinned)return o.getNodesInRangeForSelection(e,t);if("top"===e.rowPinned&&"top"===t.rowPinned)return uu(i,"top",e,t);if("bottom"===e.rowPinned&&"top"===t.rowPinned){var r;const n=uu(i,"top",t,void 0),s=uu(i,"bottom",void 0,e),a=o.getRow(0),l=o.getRow(o.getRowCount()-1);return n.concat(null!==(r=o.getNodesInRangeForSelection(a,l))&&void 0!==r?r:[]).concat(s)}if(!e.rowPinned&&"top"===t.rowPinned){var a;return uu(i,"top",t,void 0).concat(null!==(a=o.getNodesInRangeForSelection(o.getRow(0),e))&&void 0!==a?a:[])}if("top"===e.rowPinned&&"bottom"===t.rowPinned){var l;const n=uu(i,"top",e,void 0),s=uu(i,"bottom",void 0,t),r=o.getRow(0),a=o.getRow(o.getRowCount()-1);return n.concat(null!==(l=o.getNodesInRangeForSelection(r,a))&&void 0!==l?l:[]).concat(s)}if("bottom"===e.rowPinned&&"bottom"===t.rowPinned)return uu(i,"bottom",e,t);if(!e.rowPinned&&"bottom"===t.rowPinned){var d;const n=uu(i,"bottom",void 0,t),s=o.getRow(o.getRowCount());return(null!==(d=o.getNodesInRangeForSelection(e,s))&&void 0!==d?d:[]).concat(n)}return null}},vu=class extends ht{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(P(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new pr);this.cbSelectAll=t,t.addCss("ag-header-select-all"),N(t.getGui(),"presentation"),this.showOrHideSelectAll();const i=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:i,paginationChanged:i,modelUpdated:i}),this.addManagedPropertyListener("rowSelection",e=>{let{currentValue:t,previousValue:i}=e;const o=e=>"string"!==typeof e&&e&&"singleRow"!==e.mode?e.selectAll:void 0;o(t)!==o(i)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll("uiColumnMoved"===e.source)}showOrHideSelectAll(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,i=this.cbSelectAll,o=t.getSelectAllState(e);i.setValue(o);const n=t.hasNodesToSelect(e);i.setDisabled(!n),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getLocaleTextFunc(),{headerCellCtrl:i,cbSelectAll:o,cbSelectAllVisible:n}=this,s=de(t,o.getValue()),r=t("ariaRowSelectAll","Press Space to toggle all rows selection");i.setAriaDescriptionProperty("selectAll",n?"".concat(r," (").concat(s,")"):null),o.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||i.announceAriaDescription()}checkSelectionType(e){return!!Yi(this.gos)||(oi(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:i}=this.beans;return!(!ui(t)&&!hi(t))||(oi(129,{feature:e,rowModel:i.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let i="uiSelectAll";"currentPage"===t?i="uiSelectAllCurrentPage":"filtered"===t&&(i="uiSelectAllFiltered");const o={source:i,selectAll:t},n=this.beans.selectionSvc;e?n.selectAllRowNodes(o):n.deselectAllRowNodes(o)}isCheckboxSelection(){const{column:e,gos:t,beans:i}=this,o="object"===typeof t.get("rowSelection")?"headerCheckbox":"headerCheckboxSelection";return mu(i,e)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){const e=Qi(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();return t?"currentPage":i?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function mu(e,t){let{gos:i,selectionColSvc:o}=e;const n=i.get("rowSelection"),s=t.getColDef(),{headerCheckboxSelection:r}=s;let a=!1;if("object"===typeof n){const e=Wo(t),i=zo(t);("autoGroupColumn"===Oi(n)&&i||e&&null!==o&&void 0!==o&&o.isSelectionColumnEnabled())&&(a=Ni(n))}else a="function"===typeof r?r(oo(i,{column:t,colDef:s})):!!r;return a}var fu,Cu=class extends ht{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new gu(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const t=_i(e);t!==this.isRowSelectable&&(this.isRowSelectable=t,this.updateSelectable())}),this.isRowSelectable=_i(e),this.addManagedEventListeners({cellValueChanged:e=>this.updateRowSelectable(e.node),rowNodeDataChanged:e=>this.updateRowSelectable(e.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new pu}createSelectAllFeature(e){if(mu(this.beans,e))return new vu(e)}isMultiSelect(){return Yi(this.gos)}onRowCtrlSelected(e,t,i){const o=!!e.rowNode.isSelected();e.forEachGui(i,e=>{e.rowComp.toggleCss("ag-row-selected",o);const i=e.element;oe(i,o);i.contains(P(this.beans))&&t(e)})}announceAriaRowSelection(e){var t,i;if(this.isRowSelectionBlocked(e))return;const o=e.isSelected(),n=null===(t=this.beans.editSvc)||void 0===t?void 0:t.isEditing({rowNode:e});if(!e.selectable||n)return;const s=this.getLocaleTextFunc()(o?"ariaRowDeselect":"ariaRowSelect","Press SPACE to ".concat(o?"deselect":"select"," this row"));null===(i=this.beans.ariaAnnounce)||void 0===i||i.announceValue(s,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!cu(e)||!gi(this.gos)}updateRowSelectable(e,t){var i,o;const n=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:null===(i=null===(o=this.isRowSelectable)||void 0===o?void 0:o.call(this,e))||void 0===i||i;return this.setRowSelectable(e,n,t),n}setRowSelectable(e,t,i){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),i)return;if(Xi(this.gos)){const t=this.calculateSelectedFromChildren(e);return void this.setNodesSelected({nodes:[e],newValue:null!==t&&void 0!==t&&t,source:"selectableChanged"})}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){var t;let i=!1,o=!1;if(null===(t=e.childrenAfterGroup)||void 0===t||!t.length)return e.selectable?e.__selected:null;for(let n=0;n<e.childrenAfterGroup.length;n++){const t=e.childrenAfterGroup[n];let s=t.isSelected();if(!t.selectable){const e=this.calculateSelectedFromChildren(t);if(null===e)continue;s=e}switch(s){case!0:i=!0;break;case!1:o=!0;break;default:return}}return i&&o?void 0:!!i||!o&&(e.selectable?e.__selected:null)}selectRowNode(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";if(t&&e.destroyed)return!1;const s=!e.selectable&&t,r=e.__selected===t;if(s||r)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const a=e.sibling;a&&a.footer&&a.__localEventService&&a.dispatchRowEvent("rowSelected");const l=e.pinnedSibling;return null!==l&&void 0!==l&&l.rowPinned&&l.__localEventService&&l.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent((0,n.A)((0,n.A)({},Za(e,this.gos,"rowSelected")),{},{event:i||null,source:o})),!0}isCellCheckboxSelection(e,t){const i=this.gos.get("rowSelection");if(i&&"string"!==typeof i){const o=Wo(e)&&Li(i);return e.isColumnFunc(t,o)}return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,i,o){const{gos:n,selectionCtx:s}=this,r=e.isSelected(),a=Xi(n),l=function(e){const t=ji(e);return!0===t||"enableSelection"===t}(n),d=function(e){const t=ji(e);return!0===t||"enableDeselection"===t}(n),c=this.isMultiSelect(),u="rowClicked"===o;if(u&&!l&&!d)return null;if(t&&i&&c){const t=s.getRoot();if(t){if(t.isSelected()){const t=s.isInRange(e)?s.truncate(e):s.extend(e,a);return{deselect:t.discard,select:t.keep,reset:!1}}return{select:[],deselect:s.extend(e,a).keep,reset:!1}}return null}if(t&&c){const t=s.selectAll?this.beans.rowModel.getRow(0):void 0,i=s.getRoot(t),o=s.isInRange(e)?s.truncate(e):s.extend(e,a);return{select:o.keep,deselect:o.discard,reset:s.selectAll||!(!i||i.isSelected())}}if(i){if(u){const t=!r;return t&&!l||!t&&!d?null:(s.setRoot(e),{node:e,newValue:t,clearSelection:!1})}return s.setRoot(e),{node:e,newValue:!r,clearSelection:!c}}{s.setRoot(e);const t=function(e){var t;const i=e.get("rowSelection");return"string"===typeof i?e.get("rowMultiSelectWithClick"):null!==(t=null===i||void 0===i?void 0:i.enableSelectionWithoutKeys)&&void 0!==t&&t}(n),i=u&&(!t||!l);if("filteredDescendants"===qi(n)&&void 0===r&&ui(n))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!c||i};if(u){const o=r?!t:l;return o===r&&!i||o&&!l||!o&&!d?null:{node:e,newValue:o,clearSelection:!c||i,keepDescendants:e.group&&a}}return{node:e,newValue:!r,clearSelection:!c||i}}}},wu=class extends Wa{initialiseTabGuard(e){super.initialiseTabGuard(e,Nl)}},bu=class extends Hs{constructor(e){super(e,Nl)}},yu=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let i=this.eventSvc;if(!i){if(null===i)return;this.eventSvc=i=new p;const e=this.onTouchStart.bind(this);this.startListener=e,this.eElement.addEventListener("touchstart",e,{passive:!0})}i.addEventListener(e,t)}removeEventListener(e,t){var i;null===(i=this.eventSvc)||void 0===i||i.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!(e=>{if(fu){if(fu.has(e))return!1}else fu=new WeakSet;return fu.add(e),!0})(e))return;const t=e.touches[0];this.touchStart=t;const i=this.handlers;if(!i.length){const e=this.eElement,t=e.ownerDocument,o=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this),s=this.onTouchCancel.bind(this),r={passive:!0},a={passive:!1};st(i,[e,"touchmove",o,r],[t,"touchcancel",s,r],[t,"touchend",n,a],[t,"contextmenu",at,a])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{var i;(this.longPressTimer=0,this.touchStart!==t||this.moved)||(this.moved=!0,null===(i=this.eventSvc)||void 0===i||i.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},550)}onTouchMove(e){const{moved:t,touchStart:i}=this;if(!t&&i){const t=it(i,e.touches);t&&!tt(t,i,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){const t=this.touchStart;if(t&&it(t,e.changedTouches)){var i;if(!this.moved)null===(i=this.eventSvc)||void 0===i||i.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t);this.preventClick&&at(e),this.cancel()}}onTouchCancel(e){const t=this.touchStart;t&&it(t,e.changedTouches)&&(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){let t=Date.now();const i=this.lastTapTime;if(i){var o;if(t-i>500)null===(o=this.eventSvc)||void 0===o||o.dispatchEvent({type:"doubleTap",touchStart:e}),t=null}this.lastTapTime=t}cancel(){this.clearLongPress(),rt(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},Su=(e=>(e[e.VALUE=0]="VALUE",e[e.DIMENSION=1]="DIMENSION",e))(Su||{}),xu=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";var t;this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink="".concat(Et,"/").concat(this.frameworkName,"-data-grid"),t=this.baseDocLink,Qt=t}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function Fu(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var Ru=Object.fromEntries(["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"].map((e,t)=>[e,t]));function Pu(e,t){var i,o;return(null!==(i=e.beanName?Ru[e.beanName]:void 0)&&void 0!==i?i:Number.MAX_SAFE_INTEGER)-(null!==(o=t.beanName?Ru[t.beanName]:void 0)&&void 0!==o?o:Number.MAX_SAFE_INTEGER)}function Du(e,t){return"gridDestroySvc"===(null===e||void 0===e?void 0:e.beanName)?-1:"gridDestroySvc"===(null===t||void 0===t?void 0:t.beanName)?1:0}var Eu={tag:"div",cls:"ag-pinned-left-header",role:"rowgroup"},Au={tag:"div",cls:"ag-pinned-right-header",role:"rowgroup"},Mu={tag:"div",cls:"ag-header-viewport",role:"rowgroup",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eCenterContainer",cls:"ag-header-container",role:"presentation"}]},Tu=class extends Tn{constructor(e){super(),this.eCenterContainer=Pn,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:e=>this.setDisplayed(e),setCtrls:e=>this.setCtrls(e),setCenterWidth:e=>this.eCenterContainer.style.width=e,setViewportScrollLeft:e=>this.getGui().scrollLeft=e,setPinnedContainerWidth:e=>{const t=this.getGui();t.style.width=e,t.style.maxWidth=e,t.style.minWidth=e}};this.createManagedBean(new kc(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e="left"==this.pinned,t="right"==this.pinned,i=e?Eu:t?Au:Mu;this.setTemplate(i),this.eRowContainer=this.eCenterContainer!==Pn?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),e.getGui().remove()}setCtrls(e){const t=this.headerRowComps;let i;this.headerRowComps={},this.rowCompsList=[];const o=e=>{const t=e.getGui();t.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(t),i&&Me(this.eRowContainer,t,i),i=t};for(const n of e){const e=n.instanceId,i=t[e];delete t[e];const s=i||this.createBean(new xc(n));this.headerRowComps[e]=s,this.rowCompsList.push(s),o(s)}for(const n of Object.values(t))this.destroyRowComp(n)}},ku={tag:"div",cls:"ag-header",role:"presentation"},Iu={selector:"AG-HEADER-ROOT",component:class extends Tn{constructor(){super(ku)}postConstruct(){const e={toggleCss:(e,t)=>this.toggleCss(e,t),setHeightAndMinHeight:e=>{this.getGui().style.height=e,this.getGui().style.minHeight=e}};this.createManagedBean(new vc).setComp(e,this.getGui(),this.getFocusableElement());const t=e=>{this.createManagedBean(e),this.appendChild(e)};t(new Tu("left")),t(new Tu(null)),t(new Tu("right"))}}},Lu=class extends Tn{constructor(e,t,i,o,n){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.gos=e.gos,this.column=t.column,this.rowNode=t.rowNode,this.eRow=o;const s=cl({tag:"div",role:t.getCellAriaRole(),attrs:{"comp-id":"".concat(this.getCompId()),"col-id":t.column.colIdSanitised}});let r;this.eCell=s,t.isCellSpanning()?(r=cl({tag:"div",cls:"ag-spanned-cell-wrapper",role:"presentation"}),r.appendChild(s),this.setTemplateFromElement(r)):this.setTemplateFromElement(s),this.cellCssManager=new En(()=>s),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);const a={toggleCss:(e,t)=>this.cellCssManager.toggleCss(e,t),setUserStyles:e=>Ie(s,e),getFocusableElement:()=>s,setIncludeSelection:e=>this.includeSelection=e,setIncludeRowDrag:e=>this.includeRowDrag=e,setIncludeDndSource:e=>this.includeDndSource=e,setRenderDetails:(e,t,i)=>this.setRenderDetails(e,t,i),setEditDetails:(e,t,i)=>this.setEditDetails(e,t,i),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue(),refreshEditStyles:(e,t)=>this.refreshEditStyles(e,t)};t.setComp(a,s,r,this.eCellWrapper,i,n,void 0)}getParentOfValue(){var e,t;return null!==(e=null!==(t=this.eCellValue)&&void 0!==t?t:this.eCellWrapper)&&void 0!==e?e:this.eCell}setRenderDetails(e,t,i){var o;if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=null==this.firstRender;const n=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),e){!(i||n)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e))}else this.destroyRenderer(),this.insertValueWithoutCellRenderer(t);null===(o=this.rowDraggingComp)||void 0===o||o.refreshVisibility()}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){const e=this.beans.context;this.checkboxSelectionComp=e.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=e.destroyBean(this.dndSourceComp),this.rowDraggingComp=e.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,o=i&&null==this.eCellWrapper;o&&(this.eCellWrapper=cl({tag:"div",cls:"ag-cell-wrapper",role:"presentation"}),this.eCell.appendChild(this.eCellWrapper));const n=!i&&null!=this.eCellWrapper;n&&(Pe(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssManager.toggleCss("ag-cell-value",!i);const s=!e&&i,r=s&&null==this.eCellValue;if(r){const e=this.cellCtrl.getCellValueClass();this.eCellValue=cl({tag:"span",cls:e,role:"presentation"}),this.eCellWrapper.appendChild(this.eCellValue)}const a=!s&&null!=this.eCellValue;a&&(Pe(this.eCellValue),this.eCellValue=void 0);const l=o||n||r||a;return l&&this.removeControls(),!e&&t&&this.addControls(),l}addControls(){const{cellCtrl:e,eCellWrapper:t,eCellValue:i,includeRowDrag:o,includeDndSource:n,includeSelection:s}=this,r=e=>{e&&t.insertBefore(e.getGui(),i)};o&&null==this.rowDraggingComp&&(this.rowDraggingComp=e.createRowDragComp(),r(this.rowDraggingComp)),n&&null==this.dndSourceComp&&(this.dndSourceComp=e.createDndSource(),r(this.dndSourceComp)),s&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=e.createSelectionCheckbox(),r(this.checkboxSelectionComp))}createCellEditorInstance(e,t,i){const o=this.editorVersion,n=e.newAgStackInstance(),{params:s}=e;n.then(e=>this.afterCellEditorCreated(o,e,s,t,i));m(this.cellEditor)&&s.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();Re(t);const i=S(e);null!=i&&(t.textContent=i)}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),Pe(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){var e,t;const{context:i}=this.beans;((null===(e=this.cellEditorPopupWrapper)||void 0===e?void 0:e.getGui().contains(P(this.beans)))||this.cellCtrl.hasBrowserFocus())&&this.eCell.focus({preventScroll:!0}),null===(t=this.hideEditorPopup)||void 0===t||t.call(this),this.hideEditorPopup=void 0,this.cellEditor=i.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=i.destroyBean(this.cellEditorPopupWrapper),Pe(this.cellEditorGui),this.cellCtrl.disableEditorTooltipFeature(),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){var t;if(null==(null===(t=this.cellRenderer)||void 0===t?void 0:t.refresh))return!1;if(this.cellRendererClass!==e.componentClass)return!1;const i=this.cellRenderer.refresh(e.params);return!0===i||void 0===i}createCellRendererInstance(e){var t,i=this;const o=this.rendererVersion,n=e=>t=>{if(this.rendererVersion!==o||!this.isAlive())return;const i=e.newAgStackInstance(),n=this.afterCellRendererCreated.bind(this,o,e.componentClass);null===i||void 0===i||i.then(n)},{animationFrameSvc:s}=this.beans;let r;if(r=null!==s&&void 0!==s&&s.active&&this.firstRender?function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s.createTask(n(e),i.rowNode.rowIndex,"p2",e.componentFromFramework,t)}:e=>n(e)(),null!==(t=e.params)&&void 0!==t&&t.deferRender&&!this.cellCtrl.rowNode.group){const{loadingComp:t,onReady:i}=this.cellCtrl.getDeferLoadingCellRenderer();t&&(r(t),i.then(()=>r(e,!0)))}else r(e)}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion)return void this.beans.context.destroyBean(i);this.cellRenderer=i,this.cellRendererClass=t;const o=i.getGui();if(this.cellRendererGui=o,null!=o){const e=this.getParentOfValue();Re(e),e.appendChild(o)}}afterCellEditorCreated(e,t,i,o,n){var s,r,a;const l=e!==this.editorVersion,{context:d}=this.beans;if(l)return void d.destroyBean(t);if(null===(s=t.isCancelBeforeStart)||void 0===s?void 0:s.call(t))return d.destroyBean(t),void this.cellCtrl.stopEditing(!0);if(!t.getGui)return oi(97,{colId:this.column.getId()}),void d.destroyBean(t);this.cellEditor=t,this.cellEditorGui=t.getGui();const c=o||(null===(r=t.isPopup)||void 0===r?void 0:r.call(t));c?this.addPopupCellEditor(i,n):this.addInCellEditor(),this.refreshEditStyles(!0,c),null===(a=t.afterGuiAttached)||void 0===a||a.call(t),this.cellCtrl.enableEditorTooltipFeature(t),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){const{cellCssManager:i}=this;i.toggleCss("ag-cell-inline-editing",e&&!t),i.toggleCss("ag-cell-popup-editing",e&&!!t),i.toggleCss("ag-cell-not-inline-editing",!e||!!t)}addInCellEditor(){const{eCell:e}=this;if(e.contains(P(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),Re(this.getParentOfValue()),this.cellEditorGui){this.getParentOfValue().appendChild(this.cellEditorGui)}}addPopupCellEditor(e,t){var i,o;const{gos:n,context:s,popupSvc:r,editSvc:a}=this.beans;"fullRow"===n.get("editType")&&oi(98);const l=this.cellEditorPopupWrapper=s.createBean(a.createPopupEditorWrapper(e)),{cellEditor:d,cellEditorGui:c,eCell:u,rowNode:h,column:p,cellCtrl:g}=this,v=l.getGui();c&&v.appendChild(c);const m=n.get("stopEditingWhenCellsLoseFocus"),f={ePopup:v,additionalParams:{column:p,rowNode:h},type:"popupCellEditor",eventSource:u,position:null!=t?t:null!==(i=null===(o=d.getPopupPosition)||void 0===o?void 0:o.call(d))&&void 0!==i?i:"over",alignSide:n.get("enableRtl")?"right":"left",keepWithinBounds:!0},C=r.positionPopupByComponent.bind(r,f),w=r.addPopup({modal:m,eChild:v,closeOnEsc:!0,closedCallback:()=>{g.onPopupEditorClosed()},anchorToElement:u,positionCallback:C,ariaOwns:u});w&&(this.hideEditorPopup=w.hideFunc)}detach(){this.getGui().remove()}destroy(){this.destroyRenderer(),this.destroyEditor(),this.removeControls(),super.destroy()}},Nu=class extends Tn{constructor(e,t,i){super(),this.cellComps=new Map,this.beans=t,this.rowCtrl=e;const o=cl({tag:"div",role:"row",attrs:{"comp-id":"".concat(this.getCompId())}});this.setInitialStyle(o,i),this.setTemplateFromElement(o);const n=o.style;this.domOrder=this.rowCtrl.getDomOrder();const s={setDomOrder:e=>this.domOrder=e,setCellCtrls:e=>this.setCellCtrls(e),showFullWidth:e=>this.showFullWidth(e),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,getFullWidthCellRendererParams:()=>this.fullWidthCellRendererParams,toggleCss:(e,t)=>this.toggleCss(e,t),setUserStyles:e=>Ie(o,e),setTop:e=>n.top=e,setTransform:e=>n.transform=e,setRowIndex:e=>o.setAttribute("row-index",e),setRowId:e=>o.setAttribute("row-id",e),setRowBusinessKey:e=>o.setAttribute("row-business-key",e),refreshFullWidth:e=>{var t,i,o;const n=e();return this.fullWidthCellRendererParams=n,null!==(t=null===(i=this.fullWidthCellRenderer)||void 0===i||null===(o=i.refresh)||void 0===o?void 0:o.call(i,n))&&void 0!==t&&t}};e.setComp(s,this.getGui(),i,void 0),this.addDestroyFunc(()=>{e.unsetComp(i)})}setInitialStyle(e,t){const i=this.rowCtrl.getInitialTransform(t);if(i)e.style.setProperty("transform",i);else{const i=this.rowCtrl.getInitialRowTop(t);i&&e.style.setProperty("top",i)}}showFullWidth(e){e.newAgStackInstance().then(t=>{if(this.isAlive()){const i=t.getGui();this.getGui().appendChild(i),this.rowCtrl.setupDetailRowAutoHeight(i),this.setFullWidthRowComp(t,e.params)}else this.beans.context.destroyBean(t)})}setCellCtrls(e){const t=new Map(this.cellComps);for(const i of e){const e=i.instanceId;this.cellComps.has(e)?t.delete(e):this.newCellComp(i)}this.destroyCells(t),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];for(const i of e){const e=this.cellComps.get(i.instanceId);e&&t.push(e.getGui())}Te(this.getGui(),t)}newCellComp(e){var t,i;const o=null!==(t=null===(i=this.beans.editSvc)||void 0===i?void 0:i.isEditing(e,{withOpenEditor:!0}))&&void 0!==t&&t,n=new Lu(this.beans,e,this.rowCtrl.printLayout,this.getGui(),o);this.cellComps.set(e.instanceId,n),this.getGui().appendChild(n.getGui())}destroy(){super.destroy(),this.destroyCells(this.cellComps)}setFullWidthRowComp(e,t){this.fullWidthCellRenderer=e,this.fullWidthCellRendererParams=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer),this.fullWidthCellRendererParams=void 0})}destroyCells(e){for(const t of e.values()){if(!t)return;const e=t.cellCtrl.instanceId;if(this.cellComps.get(e)!==t)return;t.detach(),t.destroy(),this.cellComps.delete(e)}}};var Ou={selector:"AG-ROW-CONTAINER",component:class extends Tn{constructor(e){super(),this.eViewport=Pn,this.eContainer=Pn,this.eSpannedContainer=Pn,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=null===e||void 0===e?void 0:e.name,this.options=Cd(this.name)}postConstruct(){this.setTemplate(function(e,t,i){const o=!!i.gos.get("enableCellSpan")&&!!t.getSpannedRowCtrls,n={tag:"div",ref:"eContainer",cls:md(e),role:"rowgroup"};if("center"===t.type||o){const t={tag:"div",ref:"eSpannedContainer",cls:"ag-spanning-container ".concat(fd(e)),role:"presentation"};return n.role="presentation",{tag:"div",ref:"eViewport",cls:"ag-viewport ".concat(vd(e)),role:"rowgroup",children:[n,o?t:null]}}return n}(this.name,this.options,this.beans));const e={setHorizontalScroll:e=>this.eViewport.scrollLeft=e,setViewportHeight:e=>this.eViewport.style.height=e,setRowCtrls:e=>{let{rowCtrls:t}=e;return this.setRowCtrls(t)},setSpannedRowCtrls:e=>this.setRowCtrls(e,!0),setDomOrder:e=>{this.domOrder=e},setContainerWidth:e=>{this.eContainer.style.width=e,this.eSpannedContainer&&(this.eSpannedContainer.style.width=e)},setOffsetTop:e=>{const t="translateY(".concat(e,")");this.eContainer.style.transform=t,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=t)}};this.createManagedBean(new Dd(this.name)).setComp(e,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){const{beans:i,options:o}=this,s=t?this.eSpannedContainer:this.eContainer,r=t?(0,n.A)({},this.rowCompsWithSpan):(0,n.A)({},this.rowCompsNoSpan),a={};t?this.rowCompsWithSpan=a:this.rowCompsNoSpan=a,this.lastPlacedElement=null;const l=[];for(const n of e){const e=n.instanceId,t=r[e];let s;if(t)s=t,delete r[e];else{if(!n.rowNode.displayed)continue;s=new Nu(n,i,o.type)}a[e]=s,l.push([s,!t])}this.removeOldRows(Object.values(r)),this.addRowNodes(l,s)}addRowNodes(e,t){const{domOrder:i}=this;for(const[o,n]of e){const e=o.getGui();i?this.ensureDomOrder(e,t):n&&t.appendChild(e)}}removeOldRows(e){for(const t of e)t.getGui().remove(),t.destroy()}ensureDomOrder(e,t){Me(t,e,this.lastPlacedElement),this.lastPlacedElement=e}}};function Gu(e,t){return t.map(t=>{const i="e".concat(t[0].toUpperCase()+t.substring(1),"RowContainer");return e[i]={name:t},{tag:"ag-row-container",ref:i,attrs:{name:t}}})}var Bu={selector:"AG-GRID-BODY",component:class extends Tn{constructor(){super(...arguments),this.eGridRoot=Pn,this.eBodyViewport=Pn,this.eStickyTop=Pn,this.eStickyBottom=Pn,this.eTop=Pn,this.eBottom=Pn,this.eBody=Pn}postConstruct(){const{overlays:e,rangeSvc:t}=this.beans,i=null===e||void 0===e?void 0:e.getOverlayWrapperSelector(),{paramsMap:o,elementParams:n}=function(e){const t={};return{paramsMap:t,elementParams:{tag:"div",ref:"eGridRoot",cls:"ag-root ag-unselectable",children:[{tag:"ag-header-root"},{tag:"div",ref:"eTop",cls:"ag-floating-top",role:"presentation",children:Gu(t,["topLeft","topCenter","topRight","topFullWidth"])},{tag:"div",ref:"eBody",cls:"ag-body",role:"presentation",children:[{tag:"div",ref:"eBodyViewport",cls:"ag-body-viewport",role:"presentation",children:Gu(t,["left","center","right","fullWidth"])},{tag:"ag-fake-vertical-scroll"}]},{tag:"div",ref:"eStickyTop",cls:"ag-sticky-top",role:"presentation",children:Gu(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])},{tag:"div",ref:"eStickyBottom",cls:"ag-sticky-bottom",role:"presentation",children:Gu(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])},{tag:"div",ref:"eBottom",cls:"ag-floating-bottom",role:"presentation",children:Gu(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])},{tag:"ag-fake-horizontal-scroll"},e?{tag:"ag-overlay-wrapper"}:null]}}}(!!i);this.setTemplate(n,[...i?[i]:[],Nd,Bd,Iu,Ou],o);const s=(e,t)=>{const i="".concat(e,"px");t.style.minHeight=i,t.style.height=i},r={setRowAnimationCssOnBodyViewport:(e,t)=>this.setRowAnimationCssOnBodyViewport(e,t),setColumnCount:e=>Z(this.getGui(),e),setRowCount:e=>X(this.getGui(),e),setTopHeight:e=>s(e,this.eTop),setBottomHeight:e=>s(e,this.eBottom),setTopInvisible:e=>this.eTop.classList.toggle("ag-invisible",e),setBottomInvisible:e=>this.eBottom.classList.toggle("ag-invisible",e),setStickyTopHeight:e=>this.eStickyTop.style.height=e,setStickyTopTop:e=>this.eStickyTop.style.top=e,setStickyTopWidth:e=>this.eStickyTop.style.width=e,setStickyBottomHeight:e=>{this.eStickyBottom.style.height=e,this.eStickyBottom.classList.toggle("ag-invisible","0px"===e)},setStickyBottomBottom:e=>this.eStickyBottom.style.bottom=e,setStickyBottomWidth:e=>this.eStickyBottom.style.width=e,setColumnMovingCss:(e,t)=>this.toggleCss(e,t),updateLayoutClasses:(e,t)=>{const i=[this.eBodyViewport.classList,this.eBody.classList];for(const o of i)o.toggle(zl.AUTO_HEIGHT,t.autoHeight),o.toggle(zl.NORMAL,t.normal),o.toggle(zl.PRINT,t.print);this.toggleCss(zl.AUTO_HEIGHT,t.autoHeight),this.toggleCss(zl.NORMAL,t.normal),this.toggleCss(zl.PRINT,t.print)},setAlwaysVerticalScrollClass:(e,t)=>this.eBodyViewport.classList.toggle(Ed,t),registerBodyViewportResizeListener:e=>{const t=Ue(this.beans,this.eBodyViewport,e);this.addDestroyFunc(()=>t())},setPinnedTopBottomOverflowY:e=>this.eTop.style.overflowY=this.eBottom.style.overflowY=e,setCellSelectableCss:(e,t)=>{for(const i of[this.eTop,this.eBodyViewport,this.eBottom])i.classList.toggle(e,t)},setBodyViewportWidth:e=>this.eBodyViewport.style.width=e,setGridRootRole:e=>N(this.eGridRoot,e)};this.ctrl=this.createManagedBean(new Ad),this.ctrl.setComp(r,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&zi(this.gos)||Yi(this.gos))&&k(this.getGui(),"multiselectable",!0)}setRowAnimationCssOnBodyViewport(e,t){const i=this.eBodyViewport.classList;i.toggle("ag-row-animation",t),i.toggle("ag-row-no-animation",!t)}}},Vu=class extends ht{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:o,ctrlsSvc:n}=this.beans;null===o||void 0===o||o.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new Wl(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const s=Ue(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),n.register("gridCtrl",this)}isDetailGrid(){var e;const t=Os(this.getGui());return(null===t||void 0===t||null===(e=t.getAttribute("row-id"))||void 0===e?void 0:e.startsWith("detail"))||!1}getOptionalSelectors(){var e,t,i,o,n;const s=this.beans;return{paginationSelector:null===(e=s.pagination)||void 0===e?void 0:e.getPaginationSelector(),gridHeaderDropZonesSelector:null===(t=s.registry)||void 0===t?void 0:t.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:null===(i=s.sideBar)||void 0===i?void 0:i.getSelector(),statusBarSelector:null===(o=s.registry)||void 0===o?void 0:o.getSelector("AG-STATUS-BAR"),watermarkSelector:null===(n=s.licenseManager)||void 0===n?void 0:n.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(!1===e)t.setCursor(null);else{const i=1===e?"ew-resize":"ns-resize";t.setCursor(i)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:o}=this.getNextFocusableIndex(t,e);if(o<0||o>=t.length)return!1;if(0===o){if(i>0){const{visibleCols:e,focusSvc:t}=this.beans,i=Do(e.allCols);if(t.focusGridView({column:i,backwards:!0}))return!0}return!1}return this.focusContainer(t[o],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(null!==t&&void 0!==t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),{focusSvc:o,visibleCols:n}=this.beans,s=n.allCols;if(e){if(i.length>1)return this.focusContainer(Do(i),e);const t=Do(s);if(o.focusGridView({column:t,backwards:e}))return!0}if(0===this.gos.get("headerHeight")||oc(this.beans)){if(o.focusGridView({column:s[0],backwards:e}))return!0;for(let t=1;t<i.length;t++)if(Ls(i[t].getGui(),e))return!0;return!1}return o.focusFirstHeader()}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:i}=this.getNextFocusableIndex(t,e),o=t[i];o?this.focusContainer(o):this.forceFocusOutOfContainer(e)}isFocusable(){var e;const t=this.beans;return!nc(t)||!oc(t)||!(null===(e=t.sideBar)||void 0===e||null===(e=e.comp)||void 0===e||!e.isDisplayed())}getNextFocusableIndex(e,t){const i=P(this.beans),o=e.findIndex(e=>e.getGui().contains(i));return{indexWithFocus:o,nextIndex:o+(t?-1:1)}}focusContainer(e,t){var i,o;null===(i=e.setAllowFocus)||void 0===i||i.call(e,!0);const n=Ls(e.getGui(),t,!1,!0);return null===(o=e.setAllowFocus)||void 0===o||o.call(e,!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},Hu=class extends wu{constructor(e){super(),this.gridBody=Pn,this.sideBar=Pn,this.pagination=Pn,this.rootWrapperBody=Pn,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:e=>this.addCss(e),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:e=>{this.getGui().style.userSelect=null!=e?e:"",this.getGui().style.webkitUserSelect=null!=e?e:""},setCursor:e=>{this.getGui().style.cursor=null!=e?e:""}},t=this.createManagedBean(new Vu),i=t.getOptionalSelectors(),o=this.createTemplate(i),n=[Bu,...Object.values(i).filter(e=>!!e)];this.setTemplate(o,n),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>t.focusInnerElement(e),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{e.remove(),At(this.gos,"Grid removed from DOM")})}updateLayoutClasses(e,t){const i=this.rootWrapperBody.classList,{AUTO_HEIGHT:o,NORMAL:n,PRINT:s}=zl,{autoHeight:r,normal:a,print:l}=t;i.toggle(o,r),i.toggle(n,a),i.toggle(s,l),this.toggleCss(o,r),this.toggleCss(n,a),this.toggleCss(s,l)}createTemplate(e){const t=e.gridHeaderDropZonesSelector?{tag:"ag-grid-header-drop-zones"}:null,i=e.sideBarSelector?{tag:"ag-side-bar",ref:"sideBar"}:null,o=e.statusBarSelector?{tag:"ag-status-bar"}:null,n=e.watermarkSelector?{tag:"ag-watermark"}:null;return{tag:"div",cls:"ag-root-wrapper",role:"presentation",children:[t,{tag:"div",ref:"rootWrapperBody",cls:"ag-root-wrapper-body",role:"presentation",children:[{tag:"ag-grid-body",ref:"gridBody"},i]},o,e.paginationSelector?{tag:"ag-pagination",ref:"pagination"}:null,n]}}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||null===(e=this.pagination)||void 0===e||!e.isDisplayed()?super.forceFocusOutOfContainer(t):this.pagination.forceFocusOutOfContainer(t)}getFocusableContainers(){const e=[this.gridBody];for(const t of[this.sideBar,this.pagination])t&&e.push(t);return e.filter(e=>Ee(e.getGui()))}},zu=(e,t)=>{for(const i of Object.keys(t))t[i]=e;return t},Wu=(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({dispatchEvent:"CommunityCore"},zu("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0})),zu("GridState",{getState:0,setState:0})),zu("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0})),zu("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0})),zu("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0})),zu("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0})),zu("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0})),zu("ValueCache",{expireValueCache:0})),zu("CellApi",{getCellValue:0})),zu("SharedMenu",{showColumnMenu:0,hidePopupMenu:0})),zu("Sort",{onSortChanged:0})),zu("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0})),zu("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0})),zu("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0})),zu("HighlightChanges",{flashCells:0})),zu("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0})),zu("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0})),zu("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0})),zu("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0})),zu("ColumnMove",{moveColumnByIndex:0,moveColumns:0})),zu("ColumnResize",{setColumnWidths:0})),zu("ColumnHover",{isColumnHovered:0})),zu("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0})),zu("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0})),zu("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0})),zu("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0})),zu("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0})),zu("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0})),zu("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0})),zu("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0})),zu("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0})),zu("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),zu("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0})),zu("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0})),zu("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),zu("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),zu("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),zu("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),zu("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),zu("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),zu("ContextMenu",{showContextMenu:0})),zu("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0})),zu("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),zu("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0})),zu("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0})),zu("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),zu("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0})),zu("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),zu("StatusBar",{getStatusPanel:0})),zu("AiToolkit",{getStructuredSchema:0})),Uu={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},ju=(e,t)=>e.eventSvc.dispatchEvent(t),_u=class{};Reflect.defineProperty(_u,"name",{value:"GridApi"});function Ku(e){return e.context.getId()}function Yu(e,t){e.gos.updateGridOptions({options:t})}var qu={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}};var Qu={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},Xu={skipAriaHidden:!0},$u=class extends Tn{constructor(e,t,i,o,n){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=o,this.dragStartPixels=n,this.alwaysVisible=s,this.dragSource=null,this.disabled=!1}isCustomGui(){return null!=this.customGui}postConstruct(){const{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(Qu),this.getGui().appendChild(Bc("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){const{beans:e,rowNode:t}=this,i=this.refreshVisibility.bind(this);this.addManagedListeners(e.eventSvc,{rowDragVisibilityChanged:i}),this.addManagedListeners(t,{dataChanged:i,cellChanged:i}),this.refreshVisibility()}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;const{beans:e,column:t,rowNode:i}=this,{gos:o,dragAndDrop:n,rowDragSvc:s}=e,r=null===s||void 0===s?void 0:s.visibility;let a=!("suppress"===r||"hidden"===r&&!(null!==n&&void 0!==n&&n.hasExternalDropZones())),l=a;if(a&&!this.isCustomGui()&&t){const e=t.getColDef().rowDrag;if(!1===e)a=!1;else{const o="function"===typeof e;l=t.isRowDrag(i),a=o||l}}a&&l&&i.footer&&o.get("rowDragManaged")&&(l=!1,a=!0),l&&(l=a),a||this.setDisplayed(a,Xu),l||this.setVisible(l,Xu),this.setDisabled(!l||"disabled"===r&&!(null!==n&&void 0!==n&&n.hasExternalDropZones())),a&&this.setDisplayed(a,Xu),l&&this.setVisible(l,Xu)}setDisabled(e){var t;e!==this.disabled&&(this.disabled=e,null===(t=this.getGui())||void 0===t||null===(t=t.classList)||void 0===t||t.toggle("ag-drag-handle-disabled",e))}getSelectedNodes(){var e,t;const i=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[i];const o=null!==(e=null===(t=this.beans.selectionSvc)||void 0===t?void 0:t.getSelectedNodes())&&void 0!==e?e:[];return-1!==o.indexOf(i)?o:[i]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}addDragSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{null===e||void 0===e||e.preventDefault()}})[0]);const i=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:e=>this.getDragItemName(e,i),getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}getDragItemName(e,t){var i,o,n,s,r;const a=(null===e||void 0===e?void 0:e.dragItem)||this.getDragItem(),l=(null!==(i=null===e||void 0===e||null===(o=e.dropTarget)||void 0===o?void 0:o.rows.length)&&void 0!==i?i:null===(n=a.rowNodes)||void 0===n?void 0:n.length)||1,d=null!==(s=null===(r=this.column)||void 0===r||null===(r=r.getColDef())||void 0===r?void 0:r.rowDragText)&&void 0!==s?s:this.gos.get("rowDragText");if(d)return d(a,l);if(1!==l)return"".concat(l," ").concat(t("rowDragRows","rows"));const c=this.cellValueFn();return c||"1 ".concat(t("rowDragRow","rows"))}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},Zu=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:i,children:o}=e;if(o)for(let n=0;n<o.length;++n)this.depthFirstSearchChangedPath(o[n],t);t(i)}depthFirstSearchEverything(e,t,i){const o=e.childrenAfterGroup;if(o)for(let n=0,s=o.length;n<s;++n){const e=o[n];e.childrenAfterGroup?this.depthFirstSearchEverything(e,t,i):i&&t(e)}t(e)}forEachChangedNodeDepthFirst(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;){this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={});for(const e of t)this.nodeIdsToColumns[i.id][e.getId()]=!0;i=i.parent}}linkPathItems(e,t){let i=e;for(let o=0;o<t;o++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(e=>i[e.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(e=>!i[e.getId()])}},Ju=class extends ht{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.autoScroll=null,this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,t=>{const i=()=>t.gridBodyCtrl.scrollFeature.getVScrollPosition().top,o=new zs({scrollContainer:t.gridBodyCtrl.eBodyViewport,scrollAxis:"y",getVerticalPosition:i,setVerticalPosition:e=>t.gridBodyCtrl.scrollFeature.setVerticalScrollPosition(e),onScrollCallback:()=>{const t=i();if(this.autoScrollOldV!==t)return this.autoScrollOldV=t,void(this.autoScrollChanging=!0);const o=this.autoScrollChanging;var n;(this.autoScrollChanged=o,this.autoScrollChanging=!1,o)&&(null===(n=e.dragAndDrop)||void 0===n||n.nudge(),this.autoScrollChanged=!1)}});this.autoScroll=o,this.clearAutoScroll()})}destroy(){super.destroy(),this.clearAutoScroll(),this.autoScroll=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(e){var t;return!1===(null===e||void 0===e||null===(t=e.dropTarget)||void 0===t?void 0:t.allowed)||"visible"!==this.beans.rowDragSvc.visibility?"notAllowed":"move"}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){var i;const e=null===(i=this.beans.selectionSvc)||void 0===i?void 0:i.getSelectedNodes();if(e&&e.indexOf(t)>=0)return e.slice().sort(th)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){var i;const{lastDraggingEvent:o,beans:n}=this;if(t){const t=this.getRowNodes(e);e.dragItem.rowNodes=t,ih(t,!0)}this.lastDraggingEvent=e;const s=e.fromNudge,r=this.makeRowsDrop(o,e,s,!1);null===(i=n.rowDropHighlightSvc)||void 0===i||i.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e);const a=this.autoScroll;!(null!==r&&void 0!==r&&r.rowDragManaged&&r.moved&&r.allowed&&r.sameGrid)||r.suppressMoveWhenRowDragging||(s||null!==a&&void 0!==a&&a.scrolling)&&!this.autoScrollChanged||this.dropRows(r),null===a||void 0===a||a.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,i,o){var n,s,r;const{beans:a,gos:l}=this,d=this.newRowsDrop(t,o),c=a.rowModel;if(t.dropTarget=d,t.changed=!1,!d)return null;let{sameGrid:u,rootNode:h,source:p,target:g}=d;null!==g&&void 0!==g||(g=null!==(n=c.getRow(c.getRowCount()-1))&&void 0!==n?n:null);const v=this.beans.groupEditSvc,m=!(null===v||void 0===v||!v.canSetParent(d));let f=null;if(null!==(s=g)&&void 0!==s&&s.footer){var C;const e=null!==(C=tl(c,-1,g))&&void 0!==C?C:tl(c,1,g);var w;if(m)f=null!==(w=g.sibling)&&void 0!==w?w:h;g=null!==e&&void 0!==e?e:null}null!==(r=g)&&void 0!==r&&r.detail&&(g=g.parent),d.moved&&(d.moved=p!==g);let b=.5;if(g&&(b=u&&d.moved&&(f||!m)?p.rowIndex>g.rowIndex?-.5:.5:(d.y-g.rowTop-g.rowHeight/2)/g.rowHeight||0),!m&&u&&g&&d.moved&&ui(l)){const e=oh(c,d);e&&(b=p.rowIndex>e.rowIndex?-.5:.5,g=e,d.moved&&(d.moved=p!==g))}return d.target=g,d.newParent=f,d.pointerPos=nh(g,d.y),d.yDelta=b,null===v||void 0===v||v.fixRowsDrop(d,m,i,b),this.validateRowsDrop(d,m,o),t.changed||(t.changed=eh(null===e||void 0===e?void 0:e.dropTarget,d)),d}newRowsDrop(e,t){var i;const{beans:o,gos:n}=this,s=o.rowModel.rootNode,r=!!ui(n)&&n.get("rowDragManaged"),a=n.get("suppressMoveWhenRowDragging"),l=this.isFromThisGrid(e);let{rowNode:d,rowNodes:c}=e.dragItem;if(c||(c=d?[d]:[]),d||(d=c[0]),!d||!s)return null;const u=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e);let h=!0;!r||c.length&&"visible"===o.rowDragSvc.visibility&&(!a&&l||u)||(h=!1);const p=Td(o,e).y,g=this.getOverNode(p);return{api:o.gridApi,context:o.gridOptions.context,draggingEvent:e,rowDragManaged:r,suppressMoveWhenRowDragging:a,sameGrid:l,withinGrid:u,treeData:!1,rootNode:s,moved:d!==g,y:p,overNode:g,overIndex:null!==(i=null===g||void 0===g?void 0:g.rowIndex)&&void 0!==i?i:-1,pointerPos:"none",position:"none",source:d,target:null!==g&&void 0!==g?g:null,newParent:null,rows:c,allowed:h,highlight:!t&&r&&a&&(u||!l),yDelta:0,inside:!1,droppedManaged:!1}}validateRowsDrop(e,t,i){var o;const{source:n,target:s,yDelta:r,inside:a,moved:l,rowDragManaged:d,suppressMoveWhenRowDragging:c}=e;e.moved&&(e.moved=n!==s);const{position:u,fallbackPosition:h}=this.computeDropPosition(l,a,r);e.position=u,t||(e.newParent=null),this.enforceSuppressMoveWhenRowDragging(e,c,"initial");const p=(!d||e.allowed)&&this.gos.get("isRowValidDropPosition");p&&this.applyDropValidator(e,t,i,d,p),d&&(e.rows=this.filterRows(e)),null===(o=this.beans.groupEditSvc)||void 0===o||o.clearNewSameParent(e,t),this.enforceSuppressMoveWhenRowDragging(e,c,"final"),"inside"!==e.position||e.allowed&&e.newParent||(e.position=h)}computeDropPosition(e,t,i){const o=i<0?"above":"below";return e?{position:t?"inside":o,fallbackPosition:o}:{position:"none",fallbackPosition:o}}enforceSuppressMoveWhenRowDragging(e,t,i){t&&("initial"!==i?e.rows.length&&"none"!==e.position||(e.allowed=!1):e.moved||(e.allowed=!1))}applyDropValidator(e,t,i,o,n){var s;null===(s=this.beans.groupEditSvc)||void 0===s||s.clearNewSameParent(e,t);const r=n(e);if(!r)return void(e.allowed=!1);if("object"!==typeof r)return;var a;void 0!==r.rows&&(e.rows=null!==(a=r.rows)&&void 0!==a?a:[]);t&&void 0!==r.newParent&&(e.newParent=r.newParent),void 0!==r.target&&(e.target=r.target),r.position&&(e.position=r.position),void 0!==r.allowed?e.allowed=r.allowed:o||(e.allowed=!0);const l=e.draggingEvent;r.changed&&l&&(l.changed=!0),i||void 0===r.highlight||(e.highlight=r.highlight)}addRowDropZone(e){if(!e.getContainer())return void oi(55);const t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer()))return void oi(56);const i=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(t=>e.onDragEnter(this.rowDragEvent("rowDragEnter",t))),onDragLeave:e.onDragLeave&&(t=>e.onDragLeave(this.rowDragEvent("rowDragLeave",t))),onDragging:e.onDragging&&(t=>e.onDragging(this.rowDragEvent("rowDragMove",t))),onDragStop:e.onDragStop&&(t=>e.onDragStop(this.rowDragEvent("rowDragEnd",t))),onDragCancel:e.onDragCancel&&(t=>e.onDragCancel(this.rowDragEvent("rowDragCancel",t)))},o=(0,n.A)({isInterestedIn:e=>2===e,getIconName:()=>"move",external:!0},i);t.addDropTarget(o),this.addDestroyFunc(()=>t.removeDropTarget(o))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:t=>{var i;this.onDragEnter(t),null===e||void 0===e||null===(i=e.onDragEnter)||void 0===i||i.call(e,this.rowDragEvent("rowDragEnter",t))},onDragLeave:t=>{var i;this.onDragLeave(t),null===e||void 0===e||null===(i=e.onDragLeave)||void 0===i||i.call(e,this.rowDragEvent("rowDragLeave",t))},onDragging:t=>{var i;this.onDragging(t),null===e||void 0===e||null===(i=e.onDragging)||void 0===i||i.call(e,this.rowDragEvent("rowDragMove",t))},onDragStop:t=>{var i;this.onDragStop(t),null===e||void 0===e||null===(i=e.onDragStop)||void 0===i||i.call(e,this.rowDragEvent("rowDragEnd",t))},onDragCancel:t=>{var i;this.onDragCancel(t),null===e||void 0===e||null===(i=e.onDragCancel)||void 0===i||i.call(e,this.rowDragEvent("rowDragCancel",t))},fromGrid:!0}}getOverNode(e){const{pageBounds:t,rowModel:i}=this.beans,o=e>t.getCurrentPagePixelRange().pageLastPixel?-1:i.getRowIndexAtPixel(e);return o>=0?i.getRow(o):void 0}rowDragEvent(e,t){var i;const o=this.beans,{dragItem:n,dropTarget:s,event:r,vDirection:a}=t,l=(null===s||void 0===s?void 0:s.rootNode)===o.rowModel.rootNode,d=l?s.y:Td(o,t).y,c=l?s.overNode:this.getOverNode(d),u=l?s.overIndex:null!==(i=null===c||void 0===c?void 0:c.rowIndex)&&void 0!==i?i:-1;return{api:o.gridApi,context:o.gridOptions.context,type:e,event:r,node:n.rowNode,nodes:n.rowNodes,overIndex:u,overNode:c,y:d,vDirection:a,rowsDrop:s}}dispatchGridEvent(e,t){const i=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e,!1)}onDragStop(e){var t,i;const o=null!==(t=null===(i=this.lastDraggingEvent)||void 0===i?void 0:i.dropTarget)&&void 0!==t?t:null,n=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),null!==n&&void 0!==n&&n.allowed&&n.rowDragManaged&&(null===o||void 0===o||!o.droppedManaged||eh(o,n))&&this.dropRows(n),this.stopDragging(e,!0)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e,!0)}stopDragging(e,t){var i,o;this.clearAutoScroll(),null===(i=this.beans.groupEditSvc)||void 0===i||i.stopDragging(t),null===(o=this.beans.rowDropHighlightSvc)||void 0===o||o.fromDrag(null),ih(e.dragItem.rowNodes,!1),this.lastDraggingEvent=null}clearAutoScroll(){var e;null===(e=this.autoScroll)||void 0===e||e.ensureCleared(),this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}dropRows(e){return e.droppedManaged=!0,e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows(e){let{position:t,target:i,rows:o}=e;const n=Ti(this.gos),s=this.beans.rowModel,r=o.filter(e=>{var t;let{data:i,rowPinned:o}=e;return!s.getRowNode(null!==(t=null===n||void 0===n?void 0:n({data:i,level:0,rowPinned:o}))&&void 0!==t?t:i.id)}).map(e=>{let{data:t}=e;return t});if(0===r.length)return!1;let a;if(i){const e=i.sourceRowIndex>=0?i:ru(i);e&&(a=e.sourceRowIndex+("above"===t?0:1))}return s.updateRowData({add:r,addIndex:a}),!0}filterRows(e){const{groupEditSvc:t}=this.beans,{rows:i,sameGrid:o}=e;let n;for(let r=0,a=i.length;r<a;++r){let a=!0;const l=i[r];var s;if((!l||l.footer||o&&l.destroyed&&!l.group||!this.csrmGetLeaf(l))&&(a=!1),a&&t&&!t.canDropRow(l,e)&&(a=!1),a)null===(s=n)||void 0===s||s.push(l);else null!==n&&void 0!==n||(n=i.slice(0,r))}return null!==n&&void 0!==n?n:i}csrmMoveRows(e){const t=this.beans.groupEditSvc;return null!==t&&void 0!==t&&t.isGroupingDrop(e)?t.dropGroupEdit(e):this.csrmMoveRowsReorder(e)}csrmMoveRowsReorder(e){let{position:t,target:i,rows:o,newParent:n,rootNode:s}=e,r=!1;const a=new Set;for(const p of o){n&&p.parent!==n&&(p.treeParent=n,r=!0);const e=this.csrmGetLeaf(p);e&&a.add(e)}if(!r&&0===a.size)return!1;const l=this.beans.focusSvc,d=l.getFocusedCell(),c=d&&Xd(this.beans,d);if(a.size&&au(s._leafs,a,i,"above"===t)&&(r=!0),!r)return!1;const u=this.beans.rowModel,h=new lu;return h.reordered=!0,u.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new Zu(!1,s),changedRowNodes:h}),c?c.focusCell():l.clearFocusedCell(),!0}csrmGetLeaf(e){if(e.sourceRowIndex>=0)return e.destroyed?void 0:e;const t=this.beans.groupEditSvc;return t?t.csrmFirstLeaf(e):ru(e)}},eh=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!Eo(e.rows,t.rows)),th=(e,t)=>{let{rowIndex:i}=e,{rowIndex:o}=t;return null!==i&&null!==o?i-o:0},ih=(e,t)=>{for(let i=0,o=(null===e||void 0===e?void 0:e.length)||0;i<o;++i){const o=e[i];o.dragging!==t&&(o.dragging=t,o.dispatchRowEvent("draggingChanged"))}},oh=(e,t)=>{let i=null,o=t.target;if(o&&t.rows.indexOf(o)<0)return null;const n=t.source;if(!o||!n)return null;let s=o.rowIndex-n.rowIndex;const r=s<0?-1:1;s=t.suppressMoveWhenRowDragging?Math.abs(s):1;const a=new Set(t.rows);do{const t=tl(e,r,o);if(!t)break;a.has(t)||(i=t,--s),o=t}while(s>0);return i},nh=(e,t)=>{var i;const o=null===e||void 0===e?void 0:e.rowTop,n=null!==(i=null===e||void 0===e?void 0:e.rowHeight)&&void 0!==i?i:0;if(null==o||!n||n<=0)return"none";const s=t-o,r=.25*n;return s<=r?"above":s>=n-r?"below":"inside"},sh={moduleName:"Drag",version:Kt,beans:[class extends Oa{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}}]},rh={moduleName:"DragAndDrop",version:Kt,dynamicBeans:{dndSourceComp:class extends Tn{constructor(e,t,i){super(qu),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Bc("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:i,eCell:o,gos:n}=this,s=i.getColDef().dndSourceOnRowDrag,r=e.dataTransfer;if(r.setDragImage(o,0,0),s){s(oo(n,{rowNode:t,dragEvent:e}))}else try{const e=JSON.stringify(t.data);r.setData("application/json",e),r.setData("text/plain",e)}catch(a){}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}}},icons:{rowDrag:"grip"}},ah={moduleName:"SharedDragAndDrop",version:Kt,beans:[class extends Ha{createEvent(e){return oo(this.gos,e)}createDragImageComp(e){const{gos:t,beans:i}=this,o=(n=i.userCompFactory,s=oo(t,{dragSource:e}),n.getCompDetailsFromGridOptions(Gn,"agDragAndDropImage",s,!0));var n,s;return null===o||void 0===o?void 0:o.newAgStackInstance()}handleEnter(e,t){var i;null===e||void 0===e||null===(i=e.onGridEnter)||void 0===i||i.call(e,t)}handleExit(e,t){var i;null===e||void 0===e||null===(i=e.onGridExit)||void 0===i||i.call(e,t)}warnNoBody(){oi(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const i={getContainer:e,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc(()=>this.removeDropTarget(i))}}],dependsOn:[sh],userComponents:{agDragAndDropImage:class extends Tn{constructor(){super(),this.dragSource=null,this.eIcon=Pn,this.eLabel=Pn,this.eGhost=Pn,this.registerCSS(".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}")}postConstruct(){const e=e=>Gc(e,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(Uc),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:i,eIcon:o,dragSource:n,dropIconMap:s,gos:r}=this;Re(o);let a=null;e||(e=null!==n&&void 0!==n&&n.getDefaultIconName?n.getDefaultIconName():"notAllowed"),a=s[e],i.classList.toggle("ag-dnd-ghost-not-allowed","notAllowed"===e),o.classList.toggle("ag-shake-left-to-right",t),a===s.hide&&r.get("suppressDragLeaveHidesColumns")||a&&o.appendChild(a)}setLabel(e){this.eLabel.textContent=e}}},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},lh={moduleName:"RowDrag",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row,t=this.dragging;e&&null!==(null===e||void 0===e?void 0:e.rowIndex)&&"none"!==this.position?this.set(e,this.position):this.clear(),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const i=e!==this.row,o=e.uiLevel,n=t!==this.position,s=o!==this.uiLevel;this.dragging=!1,(i||n||s)&&(i&&this.clear(),this.uiLevel=o,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){const t=null===e||void 0===e?void 0:e.dropTarget;if(t){const{highlight:e,target:i,position:o}=t;if(e&&i&&"none"!==o)return this.set(i,o),void(this.dragging=!0)}this.dragging&&this.clear()}},class extends ht{constructor(){super(...arguments),this.beanName="rowDragSvc",this.rowDragFeature=null,this.visibility="suppress"}setupRowDrag(e,t){const i=t.createManagedBean(new Ju(e)),o=this.beans.dragAndDrop;o.addDropTarget(i),t.addDestroyFunc(()=>o.removeDropTarget(i)),this.rowDragFeature=i;const n=()=>this.refreshVisibility();this.addManagedPropertyListeners(["rowDragManaged","suppressRowDrag","refreshAfterGroupEdit"],n),this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:n,columnPivotModeChanged:n,sortChanged:n,filterChanged:n}),this.visibility=this.computeVisibility()}createRowDragComp(e,t,i,o,n,s){return new $u(e,t,i,o,n,s)}createRowDragCompForRow(e,t){if(zi(this.gos))return;const i=this.getLocaleTextFunc();return this.createRowDragComp(()=>"1 ".concat(i("rowDragRow","row")),e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,i,o,n,s){const r=this.gos;if(r.get("rowDragManaged")&&(!ui(r)||r.get("pagination")))return;return this.createRowDragComp(i,e,t,o,n,s)}cancelRowDrag(){var e,t;null!==(e=this.rowDragFeature)&&void 0!==e&&e.lastDraggingEvent&&(null===(t=this.beans.dragSvc)||void 0===t||t.cancelDrag())}computeVisibility(){var e,t,i;const o=this.beans,n=o.gos;if(n.get("suppressRowDrag"))return"suppress";if(!n.get("rowDragManaged"))return"visible";const s=o.colModel.isPivotMode();return(s||null!==(e=o.rowGroupColsSvc)&&void 0!==e&&null!==(e=e.columns)&&void 0!==e&&e.length)&&!n.get("refreshAfterGroupEdit")?"hidden":s||null!==(t=o.filterManager)&&void 0!==t&&t.isAnyFilterPresent()||null!==(i=o.sortSvc)&&void 0!==i&&i.isSortActive()?"disabled":"visible"}refreshVisibility(){const e=this.visibility,t=this.computeVisibility();var i;e!==t&&(this.visibility=t,null===(i=this.eventSvc)||void 0===i||i.dispatchEvent({type:"rowDragVisibilityChanged"}))}}],apiFunctions:{addRowDropZone:function(e,t){var i;null===(i=e.rowDragSvc)||void 0===i||null===(i=i.rowDragFeature)||void 0===i||i.addRowDropZone(t)},removeRowDropZone:function(e,t){var i;const o=null===(i=e.dragAndDrop)||void 0===i?void 0:i.findExternalZone(t.getContainer());var n;o&&(null===(n=e.dragAndDrop)||void 0===n||n.removeDropTarget(o))},getRowDropZoneParams:function(e,t){var i;return null===(i=e.rowDragSvc)||void 0===i||null===(i=i.rowDragFeature)||void 0===i?void 0:i.getRowDropZone(t)},getRowDropPositionIndicator:function(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}},setRowDropPositionIndicator:function(e,t){const i=e.rowDropHighlightSvc;if(!i)return;const o=null===t||void 0===t?void 0:t.row;let n=null===t||void 0===t?void 0:t.dropIndicatorPosition;"above"!==n&&"below"!==n&&"inside"!==n&&(n="none");const s=null===o||void 0===o?void 0:o.rowIndex;null===s||void 0===s||"none"===n?i.clear():i.set(o,n)}},dependsOn:[ah]},dh={moduleName:"HorizontalResize",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;i.addDragSource(t);return()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}}],dependsOn:[sh]};var ch=class extends ht{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const i of t)i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:o}=this.beans;this.columnsToAggregate.length>0&&(null===t||void 0===t||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(null===i||void 0===i||i.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(null===o||void 0===o||o.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function uh(e){const{isFromHeader:t,fromLeft:i,xPosition:o,fromEnter:n,fakeEvent:s,pinned:r,gos:a,colModel:l,colMoves:d,visibleCols:c}=e;let{allMovingColumns:u}=e;t&&(u=function(e){const t=[...e];for(const o of e){let e=null,n=o.getParent();for(;null!=n&&1===n.getDisplayedLeafColumns().length;)e=n,n=n.getParent();if(null!=e){var i;const o=null!==(i=e.getColGroupDef())&&void 0!==i&&i.marryChildren?e.getProvidedColumnGroup().getLeafColumns():e.getLeafColumns();for(const e of o)t.includes(e)||t.push(e)}}return t}(u));const h=u.slice();!function(e,t){if(!t||t.length<=1)return;t.filter(t=>e.indexOf(t)<0).length>0||t.sort((t,i)=>e.indexOf(t)-e.indexOf(i))}(l.getCols(),h);const p=function(e){const{movingCols:t,draggingRight:i,xPosition:o,pinned:n,gos:s,colModel:r,visibleCols:a}=e,l=s.get("suppressMovableColumns")||t.some(e=>e.getColDef().suppressMovable);if(l)return[];const d=function(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}(a,n),c=r.getCols(),u=d.filter(e=>t.includes(e)),h=d.filter(e=>!t.includes(e)),p=c.filter(e=>!t.includes(e));let g,v=0,m=o;if(i){let e=0;for(const t of u)e+=t.getActualWidth();m-=e}if(m>0){for(let e=0;e<h.length;e++){if(m-=h[e].getActualWidth(),m<0)break;v++}i&&v++}if(v>0){const e=h[v-1];g=p.indexOf(e)+1}else g=p.indexOf(h[0]),-1===g&&(g=0);const f=[g],C=(e,t)=>e-t;if(i){let e=g+1;const t=c.length-1;for(;e<=t;)f.push(e),e++;f.sort(C)}else{let e=g;const t=c.length-1;let i=c[e];for(;e<=t&&d.indexOf(i)<0;)e++,f.push(e),i=c[e];e=g-1;const o=0;for(;e>=o;)f.push(e),e--;f.sort(C).reverse()}return f}({movingCols:h,draggingRight:i,xPosition:o,pinned:r,gos:a,colModel:l,visibleCols:c}),g=function(e,t){const i=t.getCols(),o=e.map(e=>i.indexOf(e)).sort((e,t)=>e-t),n=o[0],s=Do(o);return s-n!==o.length-1?null:n}(h,l);if(0===p.length)return;const v=p[0];if(null!==g&&(t||!n)&&!s){if(!i&&v>=g)return;if(i&&v<=g)return}const m=function(e,t,i,o){const n=o.allCols;let s=null,r=null;for(let a=0;a<e.length;a++){const o=e[a],l=i.getProposedColumnOrder(t,o);if(!i.doesOrderPassRules(l))continue;const d=l.filter(e=>n.includes(e));if(null===r)r=d;else if(!Eo(d,r))break;const c=ph(l);(null===s||c<s.fragCount)&&(s={move:o,fragCount:c})}return s}(p,h,d,c);if(!m)return;const f=m.move;return f>l.getCols().length-h.length?void 0:{columns:h,toIndex:f}}function hh(e){const{columns:t,toIndex:i}=uh(e)||{},{finished:o,colMoves:n}=e;return t&&null!=i?(n.moveColumns(t,i,"uiColumnMoved",o),o?null:{columns:t,toIndex:i}):null}function ph(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let o=0;o<e.length-1;o++){let n=t(e[o]),s=t(e[o+1]);[n,s]=n.length>s.length?[n,s]:[s,n];for(const e of n)-1===s.indexOf(e)&&i++}return i}function gh(e){var t;const{pinned:i,fromKeyboard:o,gos:n,ctrlsSvc:s,useHeaderRow:r,skipScrollPadding:a}=e;let l=null===(t=s.getHeaderRowContainerCtrl(i))||void 0===t?void 0:t.eViewport,{x:d}=e;return l?(o&&(d-=l.getBoundingClientRect().left),n.get("enableRtl")&&(r&&(l=l.querySelector(".ag-header-row")),d=l.clientWidth-d),null!=i||a||(d+=s.get("center").getCenterViewportScrollLeft()),d):0}function vh(e,t){for(const i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}var mh=class extends ht{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!v(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){var e;const{pinned:t,lastDraggingEvent:i}=this,{dragItem:o}=i||{},n=null!==(e=null===o||void 0===o?void 0:o.columns)&&void 0!==e?e:[];for(const s of n){const e=s.getPinned();if(s.getColDef().lockPinned){if(e==t)return"move";continue}const i=null===o||void 0===o?void 0:o.containerType;if(i===t||!t)return"move";if(t&&(!e||i!==t))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,i=t.columns;if(0===e.dragSource.type)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const e=t.visibleState,o=(i||[]).filter(t=>e[t.getId()]&&!t.isVisible());this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastDraggingEvent,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{gos:n,ctrlsSvc:s}=this.beans,r=n.get("suppressMoveWhenColumnDragging");if(o&&!r)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!o&&m(e.hDirection))return;const a=gh({x:e.x,pinned:this.pinned,gos:n,ctrlsSvc:s});t||this.checkCenterForScrolling(a),r?this.handleColumnDragWhileSuppressingMovement(e,t,i,a,o):this.handleColumnDragWhileAllowingMovement(e,t,i,a,o)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(null===e||void 0===e||!e.length)return;const o=e.filter(e=>!e.getColDef().lockVisible);o.length&&this.beans.colModel.setColsVisible(o,t,i)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,i,o,n){const s=this.getAllMovingColumns(e,!0);if(n){const e=this.isAttemptingToPin(s);e&&this.attemptToPinColumns(s,void 0,!0);const{fromLeft:o,xPosition:n}=this.getNormalisedXPositionInfo(s,e)||{};if(null==o||null==n)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:s,xPosition:n,fromEnter:t,fakeEvent:i,fromLeft:o})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(s,o)}}handleColumnDragWhileAllowingMovement(e,t,i,o,s){const r=this.getAllMovingColumns(e),a="right"===this.normaliseDirection(e.hDirection),l=1===e.dragSource.type,d=this.getMoveColumnParams({allMovingColumns:r,isFromHeader:l,xPosition:o,fromLeft:a,fromEnter:t,fakeEvent:i}),c=hh((0,n.A)((0,n.A)({},d),{},{finished:s}));c&&(this.lastMovedInfo=c)}getAllMovingColumns(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.dragSource.getDragItem();let o=null;t?(o=i.columnsInSplit,o||(o=i.columns)):o=i.columns;return o?o.filter(e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:o,fromLeft:n,fromEnter:s,fakeEvent:r}=e,{gos:a,colModel:l,colMoves:d,visibleCols:c}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:n,xPosition:o,pinned:this.pinned,fromEnter:s,fakeEvent:r,gos:a,colModel:l,colMoves:d,visibleCols:c}}highlightHoveredColumn(e,t){var i;const{gos:o,colModel:n}=this.beans,s=o.get("enableRtl"),r=n.getCols().filter(e=>e.isVisible()&&e.getPinned()===this.pinned);let a,l=null,d=null,c=null;for(const u of r){if(d=u.getActualWidth(),l=this.getNormalisedColumnLeft(u,0,s),null!=l){if(l<=t&&l+d>=t){c=u;break}}l=null,d=null}if(c)-1!==e.indexOf(c)&&(c=null);else{for(let e=r.length-1;e>=0;e--){const t=r[e],i=r[e].getParent();if(!i){c=t;break}const o=null===i||void 0===i?void 0:i.getDisplayedLeafColumns();if(o.length){c=Do(o);break}}if(!c)return;l=this.getNormalisedColumnLeft(c,0,s),d=c.getActualWidth()}(null===(i=this.lastHighlightedColumn)||void 0===i?void 0:i.column)!==c&&this.clearHighlighted(),null!=c&&null!=l&&null!=d&&(a=t-l<d/2?0:1,fh(c,a),this.lastHighlightedColumn={column:c,position:a})}getNormalisedXPositionInfo(e,t){const{gos:i,visibleCols:o}=this.beans,n=i.get("enableRtl"),{firstMovingCol:s,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!s||!r||null==a)return;const l=o.allCols,d=l.indexOf(s),c=l.indexOf(r),u=0===a,h=d<c||d===c&&!u;let p=0;if(u?h&&(p-=1):h||(p+=1),c+p===d)return;const g=l[c+p];if(!g)return;return{fromLeft:h,xPosition:this.getNormalisedColumnLeft(g,20,n)}}getColumnMoveAndTargetInfo(e,t,i){const o=this.lastHighlightedColumn||{},{firstMovingCol:s,lastMovingCol:r}=function(e){const t=e.length;let i,o;for(let n=0;n<t;n++){if(!i){const t=e[n];null!=t.getLeft()&&(i=t)}if(!o){const i=e[t-1-n];null!=i.getLeft()&&(o=i)}if(i&&o)break}return{firstMovingCol:i,lastMovingCol:o}}(e);if(!s||!r||o.column||!t)return(0,n.A)({firstMovingCol:s},o);const a="left"===this.getPinDirection();return{firstMovingCol:s,position:a?1:0,column:a!==i?s:r}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){const{gos:o,ctrlsSvc:n}=this.beans,s=e.getLeft();if(null==s)return null;const r=e.getActualWidth();return gh({x:i?s+r-t:s+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:o,ctrlsSvc:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some(e=>e.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:o,fakeEvent:n,fromLeft:s}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:s,fromEnter:o,fakeEvent:n}),{columns:a,toIndex:l}=uh(r)||{};a&&null!=l&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(fh(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),i=t.getCenterViewportScrollLeft(),o=i+t.getCenterWidth();let n,s;this.gos.get("enableRtl")?(n=e<i+50,s=e>o-50):(s=e<i+50,n=e>o-50),this.needToMoveRight=n,this.needToMoveLeft=s,s||n?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:e,dragAndDrop:t,gos:i}=this.beans;if(this.failedMoveAttempts<=8||!e)return;if(t.setDragImageCompIcon("pinned"),!i.get("suppressMoveWhenColumnDragging")){var o;const e=null===(o=this.lastDraggingEvent)||void 0===o?void 0:o.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=(e||[]).filter(e=>!e.getColDef().lockPinned);if(!o.length)return 0;i&&(t=this.getPinDirection());const{pinnedCols:n,dragAndDrop:s}=this.beans;return null===n||void 0===n||n.setColsPinned(o,t,"uiColumnDragged"),i&&s.nudge(),o.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function fh(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}var Ch=class extends ht{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,e=>{let t;const o=e.gridBodyCtrl.eBodyViewport;switch(i){case"left":t=[[o,e.left.eContainer],[e.bottomLeft.eContainer],[e.topLeft.eContainer]];break;case"right":t=[[o,e.right.eContainer],[e.bottomRight.eContainer],[e.topRight.eContainer]];break;default:t=[[o,e.center.eViewport],[e.bottomCenter.eViewport],[e.topCenter.eViewport]]}this.eSecondaryContainers=t}),this.moveColumnFeature=this.createManagedBean(new mh(i)),this.bodyDropPivotTarget=this.createManagedBean(new ch(i)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}};var wh={moduleName:"ColumnMove",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){const o=this.beans.colModel.getCols();if(!o)return;const n=o[e];this.moveColumns([n],t,i)}moveColumns(e,t,i){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{colModel:n,colAnimation:s,visibleCols:r,eventSvc:a}=this.beans,l=n.getCols();if(!l)return;if(t>l.length-e.length)return void oi(30,{toIndex:t});null===s||void 0===s||s.start();const d=n.getColsForKeys(e);this.doesMovePassRules(d,t)&&(ko(n.getCols(),d,t),r.refresh(i),a.dispatchEvent({type:"columnMoved",columns:d,column:1===d.length?d[0]:null,toIndex:t,finished:o,source:i})),null===s||void 0===s||s.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){const{colModel:t,gos:i}=this.beans;if(!un(e,t.getColTree()))return!1;return!!(e=>{const t=e=>e?"left"===e||!0===e?-1:1:0,o=i.get("enableRtl");let n=o?1:-1,s=!0;for(const i of e){const e=t(i.getColDef().lockPosition);o?e>n&&(s=!1):e<n&&(s=!1),n=e}return s})(e)}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return ko(i,e,t),i}createBodyDropTarget(e,t){return new Ch(e,t)}moveHeader(e,t,i,o,s){const{ctrlsSvc:r,gos:a,colModel:l,visibleCols:d,focusSvc:c}=this.beans,u=t.getBoundingClientRect(),h=u.left,p=_a(i),g=p?u.width:i.getActualWidth(),v="left"===e!==a.get("enableRtl"),m=gh({x:v?h-20:h+g+20,pinned:o,fromKeyboard:!0,gos:a,ctrlsSvc:r}),f=c.focusedHeader;let C;if(hh({allMovingColumns:p?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:"right"===e,xPosition:m,pinned:o,fromEnter:!1,fakeEvent:!1,gos:a,colModel:l,colMoves:this,visibleCols:d,finished:!0}),p){const e=i.getDisplayedLeafColumns();C=v?e[0]:Do(e)}else C=i;if(r.getScrollFeature().ensureColumnVisible(C,"auto"),(!s.isAlive()||a.get("ensureDomOrder"))&&f){let e;if(p){const t=i.getGroupId(),o=i.getLeafColumns();if(!o.length)return;const n=o[0].getParent();if(!n)return;e=function(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return}(n,t)}else e=i;e&&c.focusHeaderPosition({headerPosition:(0,n.A)((0,n.A)({},f),{},{column:e})})}}setDragSourceForHeader(e,t,i){const{gos:o,colModel:n,dragAndDrop:s,visibleCols:r}=this.beans;let a=!o.get("suppressDragLeaveHidesColumns");const l=_a(t),d=l?t.getProvidedColumnGroup().getLeafColumns():[t],c=l?()=>function(e,t){var i;const o=e.getProvidedColumnGroup().getLeafColumns(),n={};for(const l of o)n[l.getId()]=l.isVisible();const s=[];for(const l of t)o.indexOf(l)>=0&&(s.push(l),Mo(o,l));for(const l of o)s.push(l);const r=[],a=e.getLeafColumns();for(const l of s)-1!==a.indexOf(l)&&r.push(l);return{columns:s,columnsInSplit:r,visibleState:n,containerType:null===(i=r[0])||void 0===i?void 0:i.pinned}}(t,r.allCols):()=>function(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}(t),u={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:c,dragItemName:i,onDragStarted:()=>{a=!o.get("suppressDragLeaveHidesColumns"),vh(d,!0)},onDragStopped:()=>vh(d,!1),onDragCancelled:()=>vh(d,!1),onGridEnter:e=>{if(a){const{columns:t=[],visibleState:i}=null!==e&&void 0!==e?e:{},o=l?e=>!i||i[e.getColId()]:()=>!0,s=t.filter(e=>!e.getColDef().lockVisible&&o(e));n.setColsVisible(s,!0,"uiColumnMoved")}},onGridExit:e=>{if(a){var t;const i=(null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.filter(e=>!e.getColDef().lockVisible))||[];n.setColsVisible(i,!1,"uiColumnMoved")}}};return s.addDragSource(u,!0),u}},class extends ht{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:i,executeLaterFuncs:o}=this;if(0===i.length&&0===o.length)return e(),void t();const n=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),n(i)},0),window.setTimeout(()=>{t(),n(o)},200)})}}],apiFunctions:{moveColumnByIndex:function(e,t,i){var o;null===(o=e.colMoves)||void 0===o||o.moveColumnByIndex(t,i,"api")},moveColumns:function(e,t,i){var o;null===(o=e.colMoves)||void 0===o||o.moveColumns(t,i,"api")}},dependsOn:[ah],css:[":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}"]},bh={moduleName:"AutoWidth",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const o=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||o.push(i),this.getPreferredWidthForElements(o)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const i=document.createElement("form");i.style.position="fixed";const o=this.centerRowContainerCtrl.eContainer;for(const s of e)this.cloneItemIntoDummy(s,i);o.appendChild(i);const n=i.offsetWidth;return i.remove(),n+(t=null!==t&&void 0!==t?t:this.gos.get("autoSizePadding"))}getHeaderCellForColumn(e){let t=null;for(const i of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const o=i.getHtmlElementForColumnHeader(e);null!=o&&(t=o)}return t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const o=document.createElement("div"),n=o.classList;["ag-header-cell","ag-header-group-cell"].some(e=>i.classList.contains(e))?(n.add("ag-header","ag-header-row"),o.style.position="static"):n.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(e=>s.classList.contains(e))){for(let e=0;e<s.classList.length;e++){const t=s.classList[e];"ag-row-position-absolute"!=t&&n.add(t)}break}s=s.parentElement}o.appendChild(i),t.appendChild(o)}}]};var yh=class extends ht{constructor(e,t,i,o){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=o}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,o=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(o),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:o,groupAfterColumns:n,groupAfterStartWidth:s,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=o,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uiColumnResized";const o=this.normaliseDragChange(t),n=this.resizeStartWidth+o;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){const t=e=>e.reduce((e,t)=>e+t.getActualWidth(),0),i=(e,t)=>e.map(e=>e.getActualWidth()/t),o=this.getColumnsToResize(),n=t(o),s={columnsToResize:o,resizeStartWidth:n,resizeRatios:i(o,n)};let r=null;var a,l;e&&(r=null!==(a=null===(l=this.beans.colGroupSvc)||void 0===l?void 0:l.getGroupAtDirection(this.columnGroup,"After"))&&void 0!==a?a:null);if(r){const e=r.getDisplayedLeafColumns(),o=s.groupAfterColumns=e.filter(e=>e.isResizable()),n=s.groupAfterStartWidth=t(o);s.groupAfterRatios=i(o,n)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.resizeCols||!this.resizeRatios)return;const o={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(o,e,t,i)}resizeColumns(e,t,i){var o;let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{columnsToResize:s,resizeStartWidth:r,resizeRatios:a,groupAfterColumns:l,groupAfterStartWidth:d,groupAfterRatios:c}=e,u=[];if(u.push({columns:s,ratios:a,width:t}),l){const e=t-r;u.push({columns:l,ratios:c,width:d-e})}null===(o=this.beans.colResize)||void 0===o||o.resizeColumnSets({resizeSets:u,finished:n,source:i}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},Sh=class extends ht{constructor(e,t,i,o,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=o,this.ctrl=n}postConstruct(){const e=[];let t,i;const o=()=>{if(pe(this.eResize,t),!t)return;const{horizontalResizeSvc:o,colAutosize:n}=this.beans,s=o.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(s),i&&n&&e.push(n.addColumnAutosizeListeners(this.eResize,this.column))},n=()=>{for(const t of e)t();e.length=0},s=()=>{const e=this.column.isResizable(),s=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||s!==i)&&(t=e,i=s,n(),o())};s(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,t){const{column:i,lastResizeAmount:o,resizeStartWidth:n,beans:s}=this,r=this.normaliseResizeAmount(t),a=[{key:i,newWidth:n+r}],{pinnedCols:l,ctrlsSvc:d,colResize:c}=s;if(this.column.getPinned()){var u,h;if((null!==(u=null===l||void 0===l?void 0:l.leftWidth)&&void 0!==u?u:0)+(null!==(h=null===l||void 0===l?void 0:l.rightWidth)&&void 0!==h?h:0)+(r-o)>we(d.getGridBodyCtrl().eBodyViewport)-50)return}this.lastResizeAmount=r,null===c||void 0===c||c.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,o="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):o&&(t*=-1),t}};var xh={moduleName:"ColumnResize",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,o){const n=[],{colModel:s,gos:r,visibleCols:a}=this.beans;for(const l of e){const e=s.getColDefCol(l.key)||s.getCol(l.key);if(!e)continue;n.push({width:l.newWidth,ratios:[1],columns:[e]});if("shift"===r.get("colResizeDefault")&&(t=!t),t){const t=a.getColAfter(e);if(!t)continue;const i=e.getActualWidth()-l.newWidth,o=t.getActualWidth()+i;n.push({width:o,ratios:[1],columns:[t]})}}0!==n.length&&this.resizeColumnSets({resizeSets:n,finished:i,source:o})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:o}=e;if(!(!t||t.every(e=>function(e){const{columns:t,width:i}=e;let o=0,n=0,s=!0;for(const a of t){o+=a.getMinWidth()||0;const e=a.getMaxWidth();e>0?n+=e:s=!1}const r=!s||i<=n;return i>=o&&r}(e)))){if(i){const e=t&&t.length>0?t[0].columns:null;vn(this.eventSvc,e,i,o)}return}const n=[],s=[];for(const c of t){const{width:e,columns:t,ratios:i}=c,r={},a={};for(const o of t)s.push(o);let l=!0,d=0;for(;l;){if(d++,d>1e3){ni(31);break}l=!1;const o=[];let n=0,s=e;t.forEach((e,t)=>{if(a[e.getId()])s-=r[e.getId()];else{o.push(e);const s=i[t];n+=s}});const c=1/n;o.forEach((t,n)=>{let d;n===o.length-1?d=s:(d=Math.round(i[n]*e*c),s-=d);const u=t.getMinWidth(),h=t.getMaxWidth();d<u?(d=u,a[t.getId()]=!0,l=!0):h>0&&d>h&&(d=h,a[t.getId()]=!0,l=!0),r[t.getId()]=d})}for(const s of t){const e=r[s.getId()];s.getActualWidth()!==e&&(s.setActualWidth(e,o),n.push(s))}}const r=n.length>0;let a=[];if(r){var l;const{colFlex:e,visibleCols:t,colViewport:i}=this.beans;a=null!==(l=null===e||void 0===e?void 0:e.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0}))&&void 0!==l?l:[],t.setLeftValues(o),t.updateBodyWidths(),i.checkViewportColumns()}const d=s.concat(a);(r||i)&&vn(this.eventSvc,d,i,o,a)}resizeHeader(e,t,i){if(!e.isResizable())return;const o=e.getActualWidth(),n=e.getMinWidth(),s=e.getMaxWidth(),r=Math.min(Math.max(o+t,n),s);this.setColumnWidths([{key:e,newWidth:r}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,o,n){return new Sh(e,t,i,o,n)}createGroupResizeFeature(e,t,i,o){return new yh(e,t,i,o)}}],apiFunctions:{setColumnWidths:function(e,t){var i;let o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";null===(i=e.colResize)||void 0===i||i.setColumnWidths(t,!1,o,n)}},dependsOn:[dh,bh]},Fh=class extends ht{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth("".concat(e,"px")),this.comp.toggleCss("ag-hidden",0===e)}};function Rh(e,t){for(let i=0;i<t.length;i++){const o=e.indexOf(t[i]);o>=0&&(e[o]=e[e.length-1],e.pop())}}function Ph(e,t,i){if(e)for(let o=0;o<e.length;o++){const n=e[o];if(_a(n)){Ph(t?n.getDisplayedChildren():n.getChildren(),t,i)}i(n)}}function Dh(e){const t=[];return Ph(e,!0,e=>{co(e)&&t.push(e)}),t}var Eh={moduleName:"ColumnGroup",version:Kt,dynamicBeans:{headerGroupCellCtrl:class extends Dc{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,i,o,n){const{column:s,beans:r}=this,{context:a,colNames:l,colHover:d,rangeSvc:c,colResize:u}=r;this.comp=e,n=Rn(this,a,n),this.setGui(t,n),this.displayName=l.getDisplayNameForColumnGroup(s,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(),this.refreshAnnouncement(),this.setupAutoHeight({wrapperElement:o,compBean:n}),this.setupUserComp(),this.addHeaderMouseListeners(n,o),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const h=this.rowCtrl.pinned,p=s.getProvidedColumnGroup().getLeafColumns();null===d||void 0===d||d.createHoverFeature(n,p,t),null===c||void 0===c||c.createRangeHighlightFeature(n,s,e),n.createManagedBean(new Fc(s,t,r)),n.createManagedBean(new Fh(e,s)),u?this.resizeFeature=n.createManagedBean(u.createGroupResizeFeature(e,i,h,s)):e.setResizableDisplayed(!1),n.createManagedBean(new Ol(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,p),this.addManagedEventListeners({cellSelectionChanged:()=>this.refreshAnnouncement()}),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.getDefinition();return oo(t.gos,{colDef:i,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");null!=i?0===i?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,o=Do(t)===e;if(!i&&!o)return;const n=e.getHighlighted();let s=!1,r=!1;if(!!this.rowCtrl.getHeaderCellCtrls().find(e=>e.column.isMoving())){const e=this.beans.gos.get("enableRtl"),t=1===n,a=0===n;i&&(e?r=t:s=a),o&&(e?s=a:r=t)}this.comp.toggleCss("ag-header-highlight-before",s),this.comp.toggleCss("ag-header-highlight-after",r)}resizeHeader(e,t){const{resizeFeature:i}=this;if(!i)return;const o=i.getInitialValues(t);i.resizeColumns(o,o.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;null===(t=this.resizeFeature)||void 0===t||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:i,enterpriseMenuFactory:o}=this.beans,n=this.column,s=n.getProvidedColumnGroup(),r=function(e,t){const i=t.columnGroup.getColGroupDef();return e.getCompDetails(i,zn,"agColumnGroupHeader",t)}(t,oo(i,{displayName:this.displayName,columnGroup:n,setExpanded:t=>{e.setColumnGroupOpened(s,t,"gridInitializing")},setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)},showColumnMenu:(e,t)=>null===o||void 0===o?void 0:o.showMenuAfterButtonClick(s,e,"columnMenu",t),showColumnMenuAfterMouseClick:(e,t)=>null===o||void 0===o?void 0:o.showMenuAfterMouseEvent(s,e,"columnMenu",t),eGridHeader:this.eGui}));r&&this.comp.setUserCompDetails(r)}addHeaderMouseListeners(e,t){const{column:i,comp:o,beans:{rangeSvc:n},gos:s}=this,r=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.eGui,{mouseenter:r,mouseleave:r,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",i.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,i.getProvidedColumnGroup())}),o.toggleCss("ag-header-group-cell-selectable",Ui(s));const a=null===n||void 0===n?void 0:n.createHeaderGroupCellMouseListenerFeature(this.column,t);a&&this.createManagedBean(a)}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),i=Vd(t,this.gos,null,e);if(e.isPadding()){i.push("ag-header-group-cell-no-group");e.getLeafColumns().every(e=>e.isSpanHeaderHeight())&&i.push("ag-header-span-height")}else i.push("ag-header-group-cell-with-group"),null!==t&&void 0!==t&&t.wrapHeaderText&&i.push("ag-header-cell-wrap-text");for(const o of i)this.comp.toggleCss(o,!0)}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),o=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const n of i)e.addManagedListeners(n,{movingChanged:o});o()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription())}handleKeyDown(e){super.handleKeyDown(e);if(!this.getWrapperHasFocus())return;const{column:t,expandable:i,gos:o,beans:n}=this,s=Ui(o);var r;if(e.key==us.ENTER)if(s&&!e.altKey)null===(r=n.rangeSvc)||void 0===r||r.handleColumnSelection(t,e);else if(i){const e=!t.isExpanded();n.colGroupSvc.setColumnGroupOpened(t.getProvidedColumnGroup(),e,"uiColumnExpanded")}}refreshAnnouncement(){let e;const{gos:t,column:i,beans:o}=this;if(Ui(t)){var n;const t=this.getLocaleTextFunc(),s=null===(n=o.rangeSvc)||void 0===n?void 0:n.isColumnInAnyRange(i);e=t("ariaColumnCellSelection","Press CTRL+SPACE to ".concat(s?"de":"","select all visible cells in this column group"))}this.ariaAnnouncement=e}announceAriaDescription(){var e;const{beans:t,eGui:i,ariaAnnouncement:o}=this;o&&i.contains(P(t))&&(null===(e=t.ariaAnnounce)||void 0===e||e.announceValue(o,"columnHeader"))}setDragSource(e){var t,i;this.isAlive()&&!this.isSuppressMoving()&&(this.removeDragSource(),e&&(this.dragSource=null!==(t=null===(i=this.beans.colMoves)||void 0===i?void 0:i.setDragSourceForHeader(e,this.column,this.displayName))&&void 0!==t?t:null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}}},beans:[class extends ht{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[];return dn(null,this.beans.colModel.getColTree(),t=>{yo(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const i=[];dn(null,t,e=>{if(yo(e)){const t=e.getColGroupDef(),o={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(o)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){const{colModel:i,colAnimation:o,visibleCols:n,eventSvc:s}=this.beans;if(!i.getColTree().length)return;null===o||void 0===o||o.start();const r=[];for(const a of e){const e=a.groupId,t=a.open,i=this.getProvidedColGroup(e);i&&(i.isExpanded()!==t&&(i.setExpanded(t),r.push(i)))}n.refresh(t,!0),r.length&&s.dispatchEvent({type:"columnGroupOpened",columnGroup:1===r.length?r[0]:void 0,columnGroups:r}),null===o||void 0===o||o.finish()}setColumnGroupOpened(e,t,i){let o;o=yo(e)?e.getId():e||"",this.setColumnGroupState([{groupId:o,open:t}],i)}getProvidedColGroup(e){let t=null;return dn(null,this.beans.colModel.getColTree(),i=>{yo(i)&&i.getId()===e&&(t=i)}),t}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),o=e.getDisplayedLeafColumns(),n="After"===t?Do(o):o[0],s="getCol".concat(t);for(;;){const t=this.beans.visibleCols[s](n);if(!t)return null;const o=this.getColGroupAtLevel(t,i);if(o!==e)return o}}getColGroupAtLevel(e,t){let i,o,n=e.getParent();for(;;){if(i=n.getProvidedColumnGroup().getLevel(),o=n.getPaddingLevel(),i+o<=t)break;n=n.getParent()}return n}updateOpenClosedVisibility(){Ph(this.beans.visibleCols.getAllTrees(),!1,e=>{_a(e)&&e.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(_a(e))return e;const i=this.beans.visibleCols.getAllTrees(),o="number"===typeof t;let n=null;return Ph(i,!1,i=>{if(_a(i)){const s=i;let r;r=o?e===s.getGroupId()&&t===s.getPartId():e===s.getGroupId(),r&&(n=s)}}),n}createColumnGroups(e){const{columns:t,idCreator:i,pinned:o,oldDisplayedGroups:n,isStandaloneStructure:s}=e,r=this.mapOldGroupsById(n),a=[];let l=t;for(;l.length;){const e=l;l=[];let t=0;const n=n=>{const d=t;t=n;const c=e[d],u=(_a(c)?c.getProvidedColumnGroup():c).getOriginalParent();if(null==u){for(let t=d;t<n;t++)a.push(e[t]);return}const h=this.createColumnGroup(u,i,r,o,s);for(let t=d;t<n;t++)h.addChild(e[t]);l.push(h)};for(let i=1;i<e.length;i++){const o=e[i],s=(_a(o)?o.getProvidedColumnGroup():o).getOriginalParent(),r=e[t];s!==(_a(r)?r.getProvidedColumnGroup():r).getOriginalParent()&&n(i)}t<e.length&&n(e.length)}return s||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,i,o,n,s,r){const a=n.getUniqueKey(t.groupId||null,null),l=Fo(this.beans,t,a),d=new So(l,a,!1,i);this.createBean(d);const c=this.findExistingGroup(t,s);c&&s.splice(c.idx,1);const u=null===c||void 0===c?void 0:c.group;u&&d.setExpanded(u.isExpanded());const h=on(this.beans,l.children,i+1,e,o,n,s,r);return d.setChildren(h),d}balanceColumnTree(e,t,i,o){const n=[];for(let s=0;s<e.length;s++){const r=e[s];if(yo(r)){const e=r,s=this.balanceColumnTree(e.getChildren(),t+1,i,o);e.setChildren(s),n.push(e)}else{let s,a;for(let e=t;e<i;e++){const t=o.getUniqueKey(null,null),i=Fo(this.beans,null,t),n=new So(i,t,!0,e);this.createBean(n),a&&a.setChildren([n]),a=n,s||(s=a)}if(s&&a){n.push(s);if(e.some(e=>yo(e))){a.setChildren([r]);continue}a.setChildren(e);break}n.push(r)}}return n}findDepth(e){let t=0,i=e;for(;null!==(o=i)&&void 0!==o&&o[0]&&yo(i[0]);){var o;t++,i=i[0].getChildren()}return t}findMaxDepth(e,t){let i=t;for(let o=0;o<e.length;o++){const n=e[o];if(yo(n)){const e=n,o=this.findMaxDepth(e.getChildren(),t+1);i<o&&(i=o)}}return i}balanceTreeForAutoCols(e,t){const i=[];for(const o of e){let e=o;for(let i=t-1;i>=0;i--){const t=new So(null,"FAKE_PATH_".concat(o.getId(),"}_").concat(i),!0,i);this.createBean(t),t.setChildren([e]),e.originalParent=t,e=t}0===t&&(o.originalParent=null),i.push(e)}return i}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const o=t[i];if(o.getColGroupDef()&&o.getId()===e.groupId)return{idx:i,group:o}}}createColumnGroup(e,t,i,o,n){const s=e.getGroupId(),r=t.getInstanceIdForKey(s);let a=i[ja(s,r)];return a&&a.getProvidedColumnGroup()!==e&&(a=null),v(a)?a.reset():(a=new Ka(e,s,r,o),n||this.createBean(a)),a}mapOldGroupsById(e){const t={},i=e=>{for(const o of e)if(_a(o)){const e=o;t[o.getUniqueId()]=e,i(e.getChildren())}};return e&&i(e),t}setupParentsIntoCols(e,t){for(const i of null!==e&&void 0!==e?e:[])if(i.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),i.parent=t,_a(i)){const e=i;this.setupParentsIntoCols(e.getChildren(),e)}}}],apiFunctions:{getAllDisplayedColumnGroups:function(e){return e.visibleCols.getAllTrees()},getCenterDisplayedColumnGroups:function(e){return e.visibleCols.treeCenter},getColumnGroup:function(e,t,i){var o,n;return null!==(o=null===(n=e.colGroupSvc)||void 0===n?void 0:n.getColumnGroup(t,i))&&void 0!==o?o:null},getColumnGroupState:function(e){var t,i;return null!==(t=null===(i=e.colGroupSvc)||void 0===i?void 0:i.getColumnGroupState())&&void 0!==t?t:[]},getDisplayNameForColumnGroup:function(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""},getLeftDisplayedColumnGroups:function(e){return e.visibleCols.treeLeft},getProvidedColumnGroup:function(e,t){var i,o;return null!==(i=null===(o=e.colGroupSvc)||void 0===o?void 0:o.getProvidedColGroup(t))&&void 0!==i?i:null},getRightDisplayedColumnGroups:function(e){return e.visibleCols.treeRight},resetColumnGroupState:function(e){var t;null===(t=e.colGroupSvc)||void 0===t||t.resetColumnGroupState("api")},setColumnGroupOpened:function(e,t,i){var o;null===(o=e.colGroupSvc)||void 0===o||o.setColumnGroupOpened(t,i,"api")},setColumnGroupState:function(e,t){var i;null===(i=e.colGroupSvc)||void 0===i||i.setColumnGroupState(t,"api")}}},Ah={tag:"div",cls:"ag-skeleton-container"},Mh={moduleName:"CheckboxCellRenderer",version:Kt,userComponents:{agCheckboxCellRenderer:class extends Tn{constructor(){super(jc,[gr]),this.eCheckbox=Pn,this.registerCSS(".ag-checkbox-cell{height:100%}")}init(e){this.refresh(e);const{eCheckbox:t,beans:i}=this,o=t.getInputElement();o.setAttribute("tabindex","-1"),H(o,"polite"),this.addManagedListeners(o,{click:e=>{if(Il(e),t.isDisabled())return;const i=t.getValue();this.onCheckboxChanged(i)},dblclick:e=>{Il(e)}}),this.addManagedElementListeners(e.eGridCell,{keydown:o=>{if(o.key===us.SPACE&&!t.isDisabled()){e.eGridCell===P(i)&&t.toggle();const n=t.getValue();this.onCheckboxChanged(n),o.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t;let i,o=!0;const{value:n,column:s,node:r}=e;if(r.group&&s)if("boolean"===typeof n)i=n;else{const e=s.getColId();e.startsWith(Lo)?i=null==n||""===n?void 0:"true"===n:r.aggData&&void 0!==r.aggData[e]||r.sourceRowIndex>=0?i=null!==n&&void 0!==n?n:void 0:o=!1}else i=null!==n&&void 0!==n?n:void 0;const{eCheckbox:a}=this;if(!o)return void a.setDisplayed(!1);a.setValue(i);const l=null!==(t=e.disabled)&&void 0!==t?t:!(null!==s&&void 0!==s&&s.isCellEditable(r));a.setDisabled(l);const d=this.getLocaleTextFunc(),c=de(d,i),u=l?c:"".concat(d("ariaToggleCellValue","Press SPACE to toggle cell value")," (").concat(c,")");a.setInputAriaLabel(u)}onCheckboxChanged(e){const{params:t}=this,{column:i,node:o,value:n}=t,{editSvc:s}=this.beans;if(!i)return;const r={rowNode:o,column:i};null===s||void 0===s||s.dispatchCellEvent(r,null,"cellEditingStarted",{value:n});const a=o.setDataValue(i,e,"ui");null===s||void 0===s||s.dispatchCellEvent(r,null,"cellEditingStopped",{oldValue:n,newValue:e,valueChanged:a}),a||this.updateCheckbox(t)}}}},Th={moduleName:"SkeletonCellRenderer",version:Kt,userComponents:{agSkeletonCellRenderer:class extends Tn{constructor(){super(Ah)}init(e){const t="ag-cell-skeleton-renderer-".concat(this.getCompId());this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>B(e.eParentOfValue)),B(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");G(this.getGui(),t)}setupLoading(e){const t=cl({tag:"div",cls:"ag-skeleton-effect"}),i=e.node.rowIndex;if(null!=i){const e=75+25*(i%2===0?Math.sin(i):Math.cos(i));t.style.width="".concat(e,"%")}this.getGui().appendChild(t);const o=this.getLocaleTextFunc(),n=e.deferRender?o("ariaDeferSkeletonCellLoading","Cell is loading"):o("ariaSkeletonCellLoading","Row data is loading");G(this.getGui(),n)}refresh(e){return!1}}}};function kh(e,t){if(!e)return;const i=e,o={};for(const n of Object.keys(i)){if(t&&t.indexOf(n)>=0||yt.has(n))continue;const e=i[n],s="object"===typeof e&&null!==e&&e.constructor===Object;o[n]=s?kh(e):e}return o}function Ih(e,t,i){if(!t||!e)return;if(!i)return e[t];const o=t.split(".");let n=e;for(let s=0;s<o.length;s++){if(null==n)return;n=n[o[s]]}return n}var Lh=["dateTimeString","dateString","text","number","boolean","date"];function Nh(e,t){const i=(0,n.A)((0,n.A)({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[..._o(e.columnTypes),..._o(t.columnTypes)]),i}function Oh(e,t,i){return t?t.baseDataType===e.baseDataType||(oi(46),!1):(oi(45,{parentCellDataType:i}),!1)}function Gh(e,t){if(e.valueFormatter)return i=>{var o;if(null!==(o=i.node)&&void 0!==o&&o.group){var s;const t=(null!==(s=i.colDef.pivotValueColumn)&&void 0!==s?s:i.column).getAggFunc();if(t){if("first"===t||"last"===t)return e.valueFormatter(i);if("number"===e.baseDataType&&"count"!==t){if("number"===typeof i.value)return e.valueFormatter(i);if("object"===typeof i.value){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter((0,n.A)((0,n.A)({},i),{},{value:i.value.toNumber()}));if("value"in i.value)return e.valueFormatter((0,n.A)((0,n.A)({},i),{},{value:i.value.value}))}}return}}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()){var r;if("string"===typeof i.value&&(null===(r=e.dataTypeMatcher)||void 0===r||!r.call(e,i.value)))return}return e.valueFormatter(i)}}function Bh(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(i=>{let[o,n]=i;return function(e,t,i,o){if(!t[i])return!1;const n=e[i];return null===n?(t[i]=!1,!1):void 0===o?!!n:n===o}(e,t,o,n)})}function Vh(e,t){const i=bn(e);for(const o of t)delete i[o],"rowGroup"===o?delete i.rowGroupIndex:"pivot"===o&&delete i.pivotIndex;return i}var Hh={moduleName:"DataType",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number:()=>({cellEditor:"agNumberCellEditor"}),boolean:()=>({cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===us.SPACE}),date(e){let{formatValue:t}=e;return{cellEditor:"agDateCellEditor",keyCreator:t}},dateString(e){let{formatValue:t}=e;return{cellEditor:"agDateStringCellEditor",keyCreator:t}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object(e){let{formatValue:t,colModel:i,colId:o}=e;return{cellEditorParams:{useFormatter:!0},comparator:(e,n)=>{const s=i.getColDefCol(o),r=null===s||void 0===s?void 0:s.getColDef();if(!s||!r)return 0;const a=null==e?"":t({column:s,node:null,value:e}),l=null==n?"":t({column:s,node:null,value:n});return a===l?0:a>l?1:-1},keyCreator:t}},text:()=>({})}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes(),i={},o={},s=e=>t=>{const{column:i,node:o,value:n}=t;let s=i.getColDef().valueFormatter;return s===e.groupSafeValueFormatter&&(s=e.valueFormatter),this.beans.valueSvc.formatValue(i,o,n,s)};for(const h of Object.keys(t)){const e=t[h],r=(0,n.A)((0,n.A)({},e),{},{groupSafeValueFormatter:Gh(e,this.gos)});i[h]=r,o[h]=s(r)}const r=null!==(e=this.gos.get("dataTypeDefinitions"))&&void 0!==e?e:{},a={};for(const n of Object.keys(r)){const e=r[n],l=this.processDataTypeDefinition(e,r,[n],t);l&&(i[n]=l,e.dataTypeMatcher&&(a[n]=e.dataTypeMatcher),o[n]=s(l))}const{valueParser:l,valueFormatter:d}=t.object,{valueParser:c,valueFormatter:u}=i.object;this.hasObjectValueParser=c!==l,this.hasObjectValueFormatter=u!==d,this.formatValueFuncs=o,this.dataTypeDefinitions=i,this.dataTypeMatchers=this.sortKeysInMatchers(a,t)}sortKeysInMatchers(e,t){const i=(0,n.A)({},e);for(const n of Lh){var o;delete i[n],i[n]=null!==(o=e[n])&&void 0!==o?o:t[n].dataTypeMatcher}return i}processDataTypeDefinition(e,t,i,o){let s;const r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=o[r];const n=t[r];if(i&&n&&(i=n),!Oh(e,i,r))return;s=Nh(i,e)}else{if(i.includes(r))return void oi(44);const n=t[r];if(!Oh(e,n,r))return;const a=this.processDataTypeDefinition(n,t,[...i,r],o);if(!a)return;s=Nh(a,e)}return(0,n.A)((0,n.A)({},s),{},{groupSafeValueFormatter:Gh(s,this.gos)})}updateColDefAndGetColumnType(e,t,i){let{cellDataType:o}=t;const{field:n}=t;if(void 0===o&&(o=e.cellDataType),null!=o&&!0!==o||(o=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(n,i)),!o)return void(e.cellDataType=!1);const s=this.dataTypeDefinitions[o];if(s)return e.cellDataType=o,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,o,s,i),s.columnTypes;oi(47,{cellDataType:o})}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.__addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){const{gos:i}=this;if(!ui(i))return!1;const o={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(Bh(t,o))return!1;const n=null===t.type?e.type:t.type;if(n){var s;const e=null!==(s=i.get("columnTypes"))&&void 0!==s?s:{};if(_o(n).some(t=>{const i=e[t.trim()];return i&&Bh(i,o)}))return!1}return!Bh(e,o)}inferCellDataType(e,t){if(!e)return;let i;const o=this.getInitialData();if(o){const t=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");i=Ih(o,e,t)}else this.initWaitForRowData(t);if(null==i)return;const n=Object.keys(this.dataTypeMatchers).find(e=>this.dataTypeMatchers[e](i));return null!==n&&void 0!==n?n:"object"}getInitialData(){const e=this.gos.get("rowData");if(null!==e&&void 0!==e&&e.length)return e[0];if(this.initialData)return this.initialData;{var t;const e=null===(t=this.beans.rowModel.rootNode)||void 0===t?void 0:t._leafs;if(null!==e&&void 0!==e&&e.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:o}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);const[n]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:s}=e;s&&(null===n||void 0===n||n(),this.isPendingInference=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&(null===i||void 0===i||i.processResizeOperations()),o.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const o={},n={};for(const s of Object.keys(this.columnStateUpdatesPendingInference)){const e=this.columnStateUpdatesPendingInference[s],r=this.colModel.getCol(s);if(!r)return;const a=r.getColDef();if(!this.resetColDefIntoCol(r,"cellDataTypeInferred"))return;const l=r.getColDef();if(t&&l.type&&l.type!==a.type){const t=Vh(r,e);t.rowGroup&&null==t.rowGroupIndex&&(o[s]=t),t.pivot&&null==t.pivotIndex&&(n[s]=t),i.push(t)}}t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(o,n)),i.length&&mn(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},{rowGroupColsSvc:o,pivotColsSvc:n}=this.beans;return null===o||void 0===o||o.restoreColumnOrder(i,e),null===n||void 0===n||n.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const o=an(this.beans,i,e.getColId());return e.setColDef(o,i,t),!0}getDateStringTypeDefinition(e){var t;const{dateString:i}=this.dataTypeDefinitions;return e&&null!==(t=this.getDataTypeDefinition(e))&&void 0!==t?t:i}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return"dateTime"===e||"dateTimeString"===e}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return null===(t=this.getDataTypeDefinition(e))||void 0===t?void 0:t.baseDataType}checkType(e,t){var i,o;if(null==t)return!0;const n=null===(i=this.getDataTypeDefinition(e))||void 0===i?void 0:i.dataTypeMatcher;return!n||(!(!e.getColDef().allowFormula||null===(o=this.beans.formula)||void 0===o||!o.isFormula(t))||n(t))}validateColDef(e){const t=e=>oi(48,{property:e});if("object"===e.cellDataType){const{object:i}=this.dataTypeDefinitions;e.valueFormatter!==i.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){var t;const i=e.cellDataType;if(!i||"string"!==typeof i)return;const{dataTypeDefinitions:o,beans:n,formatValueFuncs:s}=this,r=o[i];r&&(null===(t=n.colFilter)||void 0===t||t.setColDefPropsForDataType(e,r,s[i]))}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,o){const n=this.formatValueFuncs[t],s=this.columnDefinitionPropsPerDataType[i.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:i,colId:o,formatValue:n});Object.assign(e,s)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),i=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:e=>ir(e.newValue&&String(e.newValue)),valueFormatter:e=>{var o;return null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?null!==(o=Qs(e.value,i))&&void 0!==o?o:"":t("invalidDate","Invalid Date")},dataTypeMatcher:e=>e instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:e=>{var t;return null!==(t=ir(e))&&void 0!==t?t:void 0},dateFormatter:e=>{var i;return null!==(i=Qs(null!==e&&void 0!==e?e:null,t))&&void 0!==i?i:void 0},valueParser:e=>tr(String(e.newValue))?e.newValue:null,valueFormatter:e=>tr(String(e.value))?String(e.value):"",dataTypeMatcher:e=>"string"===typeof e&&tr(e)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>{var t,i;return""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:Number(e.newValue)},valueFormatter:t=>null==t.value?"":"number"!==typeof t.value||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:e=>"number"===typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:f(e.newValue),dataTypeMatcher:e=>"string"===typeof e},boolean:{baseDataType:"boolean",valueParser:e=>{var t,i;return null==e.newValue?e.newValue:""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:"true"===String(e.newValue).toLowerCase()},valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"===typeof e},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:(0,n.A)((0,n.A)({},this.getDateStringTypeDef("dateTimeString")),{},{dataTypeMatcher:e=>"string"===typeof e&&function(e){return tr(e,!0)}(e)}),object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>{var t;return null!==(t=f(e.value))&&void 0!==t?t:""}}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}],dependsOn:[Mh]},zh={moduleName:"ColumnFlex",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=null!==(e=t.source)&&void 0!==e?e:"flex";null!=t.viewportWidth&&(this.flexViewportWidth=t.viewportWidth);const o=this.flexViewportWidth,{visibleCols:n,colDelayRenderSvc:s}=this.beans,r=n.centerCols;let a=-1;if(t.resizingCols){const e=new Set(t.resizingCols);for(let t=r.length-1;t>=0;t--)if(e.has(r[t])){a=t;break}}let l=!1;const d=r.map((e,t)=>{const i=e.getFlex(),o=null!=i&&i>0&&t>a;return l||(l=o),{col:e,isFlex:o,flex:Math.max(0,null!==i&&void 0!==i?i:0),initialSize:e.getActualWidth(),min:e.getMinWidth(),max:e.getMaxWidth(),targetSize:0}});if(l?(null===s||void 0===s||s.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(s),!o||!l)return[];let c=d.length,u=d.reduce((e,t)=>e+t.flex,0),h=o;const p=(e,t)=>{e.frozenSize=t,e.col.setActualWidth(t,i),h-=t,u-=e.flex,c-=1},g=e=>null!=e.frozenSize;for(const m of d)m.isFlex||p(m,m.initialSize);for(;c>0;){const e=Math.round(u<1?h*u:h);let t,i=0,o=0;for(const r of d){if(g(r))continue;t=r,o+=e*(r.flex/u);const n=o-i,s=Math.round(n);r.targetSize=s,i+=s}t&&(t.targetSize+=e-i);let n=0;for(const r of d){if(g(r))continue;const e=r.targetSize,t=Math.min(Math.max(e,r.min),r.max);n+=t-e,r.violationType=t===e?void 0:t<e?"max":"min",r.targetSize=t}const s=0===n?"all":n>0?"min":"max";for(const r of d)g(r)||"all"!==s&&r.violationType!==s||p(r,r.targetSize)}t.skipSetLeft||n.setLeftValues(i),t.updateBodyWidths&&n.updateBodyWidths();const v=d.filter(e=>e.isFlex&&!e.violationType).map(e=>e.col);if(t.fireResizedEvent){const e=d.filter(e=>e.initialSize!==e.frozenSize).map(e=>e.col),t=d.filter(e=>e.flex).map(e=>e.col);vn(this.eventSvc,e,!0,i,t)}return this.revealColumns(s),v}revealColumns(e){this.columnsHidden&&(null===e||void 0===e||e.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:i}=e.colDef;void 0!==t?e.flex=t:void 0!==i&&(e.flex=i)}setColFlex(e,t){e.flex=null!==t&&void 0!==t?t:null,e.dispatchStateUpdatedEvent("flex")}}]},Wh={moduleName:"ColumnApi",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,i,o){var n,s;let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=e.slice();t?a.sort((e,t)=>i.indexOf(e)-i.indexOf(t)):(i||r)&&a.sort((e,t)=>o.indexOf(e)-o.indexOf(t));const l=null===(n=this.rowGroupColsSvc)||void 0===n?void 0:n.columns,d=null===(s=this.pivotColsSvc)||void 0===s?void 0:s.columns;return this.buildColumnDefs(a,l,d)}buildColumnDefs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const o=[],n={};for(const s of e){let e=!0,r=this.createDefFromColumn(s,t,i),a=s.getOriginalParent(),l=null;for(;a;){let t=null;if(a.isPadding()){a=a.getOriginalParent();continue}const i=n[a.getGroupId()];if(i){i.children.push(r),e=!1;break}if(t=this.createDefFromGroup(a),t&&(t.children=[r],n[t.groupId]=t,r=t,a=a.getOriginalParent()),null!=a&&l===a){e=!1;break}l=a}e&&o.push(r)}return o}createDefFromGroup(e){const t=kh(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const o=kh(e.getColDef());return o.colId=e.getColId(),o.width=e.getActualWidth(),o.rowGroup=e.isRowGroupActive(),o.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,o.pivot=e.isPivotActive(),o.pivotIndex=e.isPivotActive()?i.indexOf(e):null,o.aggFunc=e.isValueActive()?e.getAggFunc():null,o.hide=!e.isVisible()||void 0,o.pinned=e.isPinned()?e.getPinned():null,o.sort=e.getSortDef(),o.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,o}}],apiFunctions:{getColumnDef:function(e,t){const i=e.colModel.getColDefCol(t);return i?i.getColDef():null},getDisplayNameForColumn:function(e,t,i){return e.colNames.getDisplayNameForColumn(t,i)||""},getColumn:function(e,t){return e.colModel.getColDefCol(t)},getColumns:function(e){return e.colModel.getColDefCols()},applyColumnState:function(e,t){return mn(e,t,"api")},getColumnState:function(e){return wn(e)},resetColumnState:function(e){fn(e,"api")},isPinning:function(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()},isPinningLeft:function(e){return e.visibleCols.isPinningLeft()},isPinningRight:function(e){return e.visibleCols.isPinningRight()},getDisplayedColAfter:function(e,t){return e.visibleCols.getColAfter(t)},getDisplayedColBefore:function(e,t){return e.visibleCols.getColBefore(t)},setColumnsVisible:function(e,t,i){e.colModel.setColsVisible(t,i,"api")},setColumnsPinned:function(e,t,i){var o;null===(o=e.pinnedCols)||void 0===o||o.setColsPinned(t,i,"api")},getAllGridColumns:function(e){return e.colModel.getCols()},getDisplayedLeftColumns:function(e){return e.visibleCols.leftCols},getDisplayedCenterColumns:function(e){return e.visibleCols.centerCols},getDisplayedRightColumns:function(e){return e.visibleCols.rightCols},getAllDisplayedColumns:function(e){return e.visibleCols.allCols},getAllDisplayedVirtualColumns:function(e){return e.colViewport.getViewportColumns()},getColumnDefs:function(e){return e.colModel.getColumnDefs(!0)}}};var Uh,jh={moduleName:"CellRendererFunction",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;return class{refresh(){return!1}getGui(){return this.eGui}init(e){const i=t(e),o=typeof i;this.eGui="string"!==o&&"number"!==o&&"boolean"!==o?null!=i?i:cl({tag:"span"}):Ae("<span>"+i+"</span>")}}}}]},_h={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:_r,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Yr,rangeSelectionBackgroundColor:Wr(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Wr(.5),rangeHeaderHighlightColor:(Uh=.08,{ref:"foregroundColor",mix:Uh,onto:"headerBackgroundColor"}),rowNumbersSelectedColor:Wr(.5),rowHoverColor:Wr(.08),columnHoverColor:Wr(.05),selectedRowBackgroundColor:Wr(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:_r,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:Ur(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:Ur(.1),iconButtonActiveColor:Yr,iconButtonActiveBackgroundColor:Wr(.28),iconButtonActiveIndicatorColor:Yr,menuBorder:{color:Ur(.2)},menuBackgroundColor:jr(.03),menuTextColor:jr(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:Ur(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Yr},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:Ur(.2)},panelBackgroundColor:_r,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:Ur(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:Ur(.13)},selectCellBackgroundColor:Ur(.07),selectCellBorder:{color:Ur(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:_r,filterPanelApplyButtonBackgroundColor:Yr,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Kr,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Kr,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:Ur(.15),statusBarLabelColor:Kr,statusBarLabelFontWeight:500,statusBarValueColor:Kr,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"},rowDragIndicatorColor:{ref:"rangeSelectionBorderColor"},rowDragIndicatorWidth:2,columnDragIndicatorColor:{ref:"accentColor"},columnDragIndicatorWidth:2},Kh={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},Yh=(0,n.A)((0,n.A)({},Kh),{},{cellBatchEditTextColor:"#f3d0b3"}),qh=(()=>Or({feature:"batchEditStyle",params:Kh,css:".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}"}))(),Qh=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",Xh={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},$h=(()=>Or({feature:"buttonStyle",params:Xh,css:Qh}))(),Zh=(()=>Or({feature:"buttonStyle",params:(0,n.A)((0,n.A)({},Xh),{},{buttonBackgroundColor:_r,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Yr}}),css:Qh}))(),Jh=(()=>Or({feature:"columnDropStyle",css:".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}"}))(),ep=(()=>Or({feature:"columnDropStyle",css:".ag-column-drop-vertical-empty-message{color:var(--ag-subtle-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600;padding-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-empty-message{padding-left:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing));padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-empty-message{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing))}"}))(),tp={warn:function(){oi(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])},error:function(){ni(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])},preInitErr:function(){si(arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=1?void 0:arguments[1])}},ip=()=>{return(e=tp,new da(e)).withParams(_h).withPart(Zh).withPart(Jh).withPart(qh);var e},op=(()=>Or({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:_r,checkboxUncheckedBorderColor:jr(.3),checkboxCheckedBackgroundColor:Yr,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:_r,checkboxIndeterminateBackgroundColor:jr(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:_r,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:'.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}'}))(),np=()=>(0,n.A)((0,n.A)((0,n.A)({},qr),Yh),{},{backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:jr(.05),rowHoverColor:Wr(.15),selectedRowBackgroundColor:Wr(.2),menuBackgroundColor:jr(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Kr,findMatchColor:_r,findActiveMatchColor:_r,checkboxUncheckedBorderColor:jr(.4),toggleButtonOffBackgroundColor:jr(.4),rowBatchEditBackgroundColor:jr(.1)}),sp=()=>(0,n.A)((0,n.A)({},np()),{},{backgroundColor:"#1f2836"}),rp=(()=>Or({feature:"colorScheme",params:qr,modeParams:{light:qr,dark:np(),"dark-blue":sp()}}))(),ap=Or({feature:"iconSet",css:".ag-icon-aggregation:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eaggregation%3C/title%3E%3Cpath d='M24 5.333H8V8l8.667 8L8 24v2.667h16v-4h-9.333L21.334 16l-6.667-6.667H24z'/%3E%3C/svg%3E\")}.ag-icon-arrows:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Earrows%3C/title%3E%3Cpath d='M13.333 11.556h5.333V8h3.556L16 1.778 9.778 8h3.556zm-1.777 1.777H8V9.777l-6.222 6.222L8 22.221v-3.556h3.556zM30.222 16 24 9.778v3.556h-3.556v5.333H24v3.556l6.222-6.222zm-11.555 4.444h-5.333V24H9.778L16 30.222 22.222 24h-3.556z'/%3E%3C/svg%3E\")}.ag-icon-asc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E\")}.ag-icon-aasc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='%23000' d='M13.201 8.08q.65 0 1.135.222.487.222.759.618.27.396.279.919H14.19a.72.72 0 0 0-.293-.536q-.26-.191-.705-.192-.302.001-.51.086a.7.7 0 0 0-.32.23.56.56 0 0 0-.108.338.5.5 0 0 0 .065.273.7.7 0 0 0 .204.203q.127.083.295.146.168.06.36.102l.525.125q.382.086.701.229.32.143.554.35.234.21.362.49.131.284.134.648a1.6 1.6 0 0 1-.273.93q-.27.391-.777.608-.504.214-1.217.214-.708 0-1.232-.217a1.8 1.8 0 0 1-.816-.642q-.29-.428-.305-1.058h1.194q.02.294.17.49.15.195.402.294.253.097.573.097.313 0 .544-.09a.84.84 0 0 0 .362-.255.6.6 0 0 0 .129-.374q0-.195-.117-.33a.9.9 0 0 0-.337-.228 3.4 3.4 0 0 0-.54-.171l-.635-.16q-.738-.18-1.166-.562t-.426-1.03a1.53 1.53 0 0 1 .284-.927q.287-.396.79-.618a2.8 2.8 0 0 1 1.14-.223'/%3E%3Cpath fill='%23000' fill-rule='evenodd' d='M5.813 14H4.489l-.432-1.332H1.948L1.515 14H.19l2.017-5.84h1.592zm-3.551-2.296h1.481l-.718-2.21H2.98zM8.452 8.16q.645 0 1.075.19.43.191.648.531a1.4 1.4 0 0 1 .217.775q0 .343-.137.602-.137.256-.376.422a1.6 1.6 0 0 1-.542.231v.057q.333.015.624.188.294.175.476.489.183.31.183.74 0 .466-.231.831a1.56 1.56 0 0 1-.676.573Q9.265 14 8.609 14H6.114V8.16zM7.35 12.99h1.006q.517 0 .753-.196a.66.66 0 0 0 .237-.531.8.8 0 0 0-.116-.428.8.8 0 0 0-.334-.29 1.15 1.15 0 0 0-.511-.106H7.349zm0-2.386h.916q.254 0 .45-.09a.75.75 0 0 0 .313-.256.67.67 0 0 0 .118-.396.64.64 0 0 0-.226-.511q-.223-.195-.633-.194H7.35z' clip-rule='evenodd'/%3E%3Cpath fill='%23000' d='M7.166.377a.75.75 0 0 1 .919.066l3.333 3a.75.75 0 0 1-1.003 1.115L7.609 2.033 5.113 4.53a.75.75 0 0 1-1.06-1.06l3-3z'/%3E%3C/svg%3E\")}.ag-icon-cancel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecancel%3C/title%3E%3Cpath d='M16 2.667C8.627 2.667 2.667 8.627 2.667 16S8.627 29.333 16 29.333 29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z'/%3E%3C/svg%3E\")}.ag-icon-chart:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cpath d='M6.667 12.267h4v13.067h-4zm7.466-5.6h3.733v18.667h-3.733zM21.6 17.333h3.733v8H21.6z'/%3E%3C/svg%3E\")}.ag-icon-color-picker:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolor-picker%3C/title%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387H7.361zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667'/%3E%3C/svg%3E\")}.ag-icon-columns:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolumns%3C/title%3E%3Cpath d='M5.333 10.667h5.333V5.334H5.333zm8 16h5.333v-5.333h-5.333zm-8 0h5.333v-5.333H5.333zm0-8h5.333v-5.333H5.333zm8 0h5.333v-5.333h-5.333zm8-13.334v5.333h5.333V5.333zm-8 5.334h5.333V5.334h-5.333zm8 8h5.333v-5.333h-5.333zm0 8h5.333v-5.333h-5.333z'/%3E%3C/svg%3E\")}.ag-icon-contracted:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Econtracted%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-copy:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z'/%3E%3C/svg%3E\")}.ag-icon-cross:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecross%3C/title%3E%3Cpath d='m25.333 8.547-1.88-1.88L16 14.12 8.547 6.667l-1.88 1.88L14.12 16l-7.453 7.453 1.88 1.88L16 17.88l7.453 7.453 1.88-1.88L17.88 16z'/%3E%3C/svg%3E\")}.ag-icon-csv:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='translate(3.934 -.054)scale(.06285)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E\")}.ag-icon-cut:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m19 3-6 6 2 2 7-7V3m-10 9.5a.503.503 0 0 1-.5-.5c0-.274.226-.5.5-.5s.5.226.5.5-.226.5-.5.5M6 20c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2M6 8c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2m3.64-.36c.23-.5.36-1.05.36-1.64 0-2.194-1.806-4-4-4S2 3.806 2 6s1.806 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.194 0-4 1.806-4 4s1.806 4 4 4 4-1.806 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1z' style='fill-rule:nonzero' transform='translate(4 4)'/%3E%3C/svg%3E\")}.ag-icon-desc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667L26.668 16z'/%3E%3C/svg%3E\")}.ag-icon-adesc:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='%23000' d='M10.387 11.47a.75.75 0 0 1 1.06 1.06l-3 3-.113.093a.75.75 0 0 1-.919-.065l-3.333-3a.75.75 0 0 1 1.003-1.116l2.806 2.525zM13.201 3.08q.65 0 1.135.222.487.223.759.619.27.396.279.918H14.19a.72.72 0 0 0-.293-.536q-.26-.192-.705-.192-.302.001-.51.086a.7.7 0 0 0-.32.23.56.56 0 0 0-.108.338.5.5 0 0 0 .065.273.7.7 0 0 0 .204.203q.127.083.295.146.168.06.36.102l.525.125a3.7 3.7 0 0 1 .701.229q.32.143.554.35.234.21.362.492.131.282.134.647a1.6 1.6 0 0 1-.273.93 1.74 1.74 0 0 1-.777.607q-.504.214-1.217.214-.708 0-1.232-.217a1.8 1.8 0 0 1-.816-.641q-.29-.429-.305-1.059h1.194q.02.294.17.49.15.195.402.294.253.098.573.098.313 0 .544-.092a.84.84 0 0 0 .362-.254.6.6 0 0 0 .129-.373.5.5 0 0 0-.117-.33.9.9 0 0 0-.337-.23 3.4 3.4 0 0 0-.54-.17l-.635-.16q-.738-.18-1.166-.562t-.426-1.03a1.53 1.53 0 0 1 .284-.926q.287-.396.79-.62a2.8 2.8 0 0 1 1.14-.222'/%3E%3Cpath fill='%23000' fill-rule='evenodd' d='M5.813 9H4.489l-.432-1.332H1.948L1.515 9H.19l2.017-5.84h1.592zM2.262 6.704h1.481l-.718-2.21H2.98zM8.452 3.16q.645 0 1.075.19.43.192.648.53a1.4 1.4 0 0 1 .217.776q0 .342-.137.602a1.2 1.2 0 0 1-.376.423 1.6 1.6 0 0 1-.542.23v.058q.333.014.624.187.294.175.476.489.183.31.183.74 0 .465-.231.83a1.56 1.56 0 0 1-.676.574Q9.265 9 8.609 9H6.114V3.16zM7.35 7.99h1.006q.517 0 .753-.196a.66.66 0 0 0 .237-.531.8.8 0 0 0-.116-.428.8.8 0 0 0-.334-.291 1.15 1.15 0 0 0-.511-.106H7.349zm0-2.386h.916q.254 0 .45-.09a.75.75 0 0 0 .313-.256.67.67 0 0 0 .118-.397.64.64 0 0 0-.226-.51q-.223-.194-.633-.194H7.35z' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667L26.668 16z'/%3E%3C/svg%3E\")}.ag-icon-excel:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='translate(3.934 -.054)scale(.06285)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E\")}.ag-icon-expanded:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eexpanded%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E\")}.ag-icon-eye-slash:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath d='M21.106 15.088A5.19 5.19 0 0 0 16 10.814a5.17 5.17 0 0 0-3.668 1.522L9.866 9.868a12.2 12.2 0 0 1 6.133-1.646c5.186 0 9.614 3.225 11.408 7.778a12.34 12.34 0 0 1-5.276 6.133l-2.468-2.466a5.17 5.17 0 0 0 1.449-2.802h-2.123c-.148.508-.42.964-.782 1.33l-1.33-1.33h-2.514l2.196 2.196q-.272.049-.56.05a3.11 3.11 0 0 1-2.99-2.245h-2.123a5.19 5.19 0 0 0 7.3 3.836l2.247 2.247a12.2 12.2 0 0 1-4.434.828c-5.186 0-9.614-3.225-11.408-7.778a12.3 12.3 0 0 1 3.781-5.111l2.924 2.924a5.1 5.1 0 0 0-.404 1.275h4.206l-1.296-1.296a3.1 3.1 0 0 1 2.196-.903c1.404 0 2.587.924 2.976 2.199h2.13z'/%3E%3C/svg%3E\")}.ag-icon-eye:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath d='M16 8.222c-5.186 0-9.614 3.225-11.408 7.778 1.794 4.553 6.222 7.778 11.408 7.778S25.614 20.553 27.408 16C25.614 11.447 21.186 8.222 16 8.222m0 12.964c-2.862 0-5.186-2.324-5.186-5.186s2.324-5.186 5.186-5.186 5.186 2.324 5.186 5.186-2.324 5.186-5.186 5.186m0-8.297c-1.721 0-3.111 1.39-3.111 3.111s1.39 3.111 3.111 3.111 3.111-1.39 3.111-3.111-1.39-3.111-3.111-3.111'/%3E%3C/svg%3E\")}.ag-icon-filter:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efilter%3C/title%3E%3Cpath d='M13.333 24h5.333v-2.667h-5.333zM4 8v2.667h24V8zm4 9.333h16v-2.667H8z'/%3E%3C/svg%3E\")}.ag-icon-first:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efirst%3C/title%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z'/%3E%3C/svg%3E\")}.ag-icon-group:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egroup%3C/title%3E%3Cpath d='M18.667 21.333h8.889A3.555 3.555 0 0 1 24 24.889h-5.333zm8.888-7.111v3.556h-8.889v-3.556zM24 7.111a3.555 3.555 0 0 1 3.556 3.556h-16V7.111zm-8.889 17.778h-3.556v-3.556h3.556zm0-7.111h-3.556v-3.556h3.556zM8 10.667H4.444A3.555 3.555 0 0 1 8 7.111z'/%3E%3C/svg%3E\")}.ag-icon-last:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elast%3C/title%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z'/%3E%3C/svg%3E\")}.ag-icon-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eleft%3C/title%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227v-2.667z'/%3E%3C/svg%3E\")}.ag-icon-linked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elinked%3C/title%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333c-3.68 0-6.667 2.987-6.667 6.667s2.987 6.667 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333c2.28 0 4.133 1.853 4.133 4.133s-1.853 4.133-4.133 4.133h-5.333v2.533h5.333c3.68 0 6.667-2.987 6.667-6.667s-2.987-6.667-6.667-6.667z'/%3E%3C/svg%3E\")}.ag-icon-loading:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eloading%3C/title%3E%3Cpath d='m17.778 11.708 3.25-3.251 2.516 2.516-3.251 3.25h4.597v3.556h-4.597l3.251 3.25-2.516 2.516-3.25-3.251v4.597h-3.556v-4.597l-3.25 3.251-2.516-2.516 3.251-3.25H7.11v-3.556h4.597l-3.251-3.25 2.516-2.516 3.25 3.251V7.111h3.556zm-3.251 7.847h2.944l2.084-2.084v-2.944l-2.084-2.084h-2.944l-2.084 2.084v2.944z'/%3E%3C/svg%3E\")}.ag-icon-maximize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emaximize%3C/title%3E%3Cpath d='M4 4h24v2.667H4z'/%3E%3C/svg%3E\")}.ag-icon-menu:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emenu%3C/title%3E%3Cpath d='M4 24h24v-2.667H4zm0-6.667h24v-2.667H4zM4 8v2.667h24V8z'/%3E%3C/svg%3E\")}.ag-icon-menu-alt:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 26.667a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 24q0-1.1.784-1.883A2.57 2.57 0 0 1 16 21.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 16q0-1.1.784-1.883A2.57 2.57 0 0 1 16 13.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 8q0-1.1.784-1.883A2.57 2.57 0 0 1 16 5.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784'/%3E%3C/svg%3E\")}.ag-icon-minimize:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eminimize%3C/title%3E%3Cpath d='M8 25.333h16V28H8z'/%3E%3C/svg%3E\")}.ag-icon-minus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-next:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enext%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-none:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cpath d='M4 24h16v-2.667H4zM4 8v2.667h24V8zm0 9.333h24v-2.667H4z'/%3E%3C/svg%3E\")}.ag-icon-not-allowed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enot-allowed%3C/title%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667'/%3E%3C/svg%3E\")}.ag-icon-paste:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epaste%3C/title%3E%3Cpath d='M25.333 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4zM16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z'/%3E%3C/svg%3E\")}.ag-icon-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epin%3C/title%3E%3Cpath d='m11.106 22.093-4.444 4.444-1.259-1.259 4.444-4.444zm5.872-16.63 9.618 9.62-.962.962-.962-.962-7.694 3.847 1.924 1.924-2.74 2.74-7.696-7.696 2.741-2.74 1.924 1.925 3.847-7.696-.962-.962z'/%3E%3C/svg%3E\")}.ag-icon-pivot:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epivot%3C/title%3E%3Cpath d='M26.667 30.223H5.334a3.556 3.556 0 0 1-3.556-3.556V5.334a3.556 3.556 0 0 1 3.556-3.556h21.333a3.556 3.556 0 0 1 3.556 3.556v21.333a3.556 3.556 0 0 1-3.556 3.556m-16-8.89H5.334v5.333h5.333zm16-7.11H12.444v12.444h14.223zm-9.15 6.85-2.039 2.037 2.039 2.039-1.257 1.257-3.295-3.296 3.295-3.295q.63.628 1.257 1.257zm-6.85-6.85H5.334v5.333h5.333zm15.74 3.816-1.257 1.256-2.039-2.037-2.037 2.037-1.257-1.256 3.295-3.296zM10.667 5.333H5.334v5.333h5.333zm8.889 0h-7.112v5.333h7.112zm7.111 0h-5.333v5.333h5.333z'/%3E%3C/svg%3E\")}.ag-icon-plus:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E\")}.ag-icon-previous:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eprevious%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E\")}.ag-icon-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eright%3C/title%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z'/%3E%3C/svg%3E\")}.ag-icon-save:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esave%3C/title%3E%3Cpath d='M25.333 16v9.333H6.666V16H3.999v9.333C3.999 26.8 5.199 28 6.666 28h18.667C26.8 28 28 26.8 28 25.333V16zm-8 .893 3.453-3.44 1.88 1.88L15.999 22l-6.667-6.667 1.88-1.88 3.453 3.44V4h2.667v12.893z'/%3E%3C/svg%3E\")}.ag-icon-small-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-down%3C/title%3E%3Cpath d='M9.333 12.667 16 19.334l6.667-6.667H9.334z'/%3E%3C/svg%3E\")}.ag-icon-small-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-left%3C/title%3E%3Cpath d='M19.333 9.333 12.666 16l6.667 6.667V9.334z'/%3E%3C/svg%3E\")}.ag-icon-small-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-right%3C/title%3E%3Cpath d='M12.667 22.667 19.334 16l-6.667-6.667v13.333z'/%3E%3C/svg%3E\")}.ag-icon-small-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-up%3C/title%3E%3Cpath d='M9.333 19.333 16 12.666l6.667 6.667H9.334z'/%3E%3C/svg%3E\")}.ag-icon-tick:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etick%3C/title%3E%3Cpath d='m11.727 21.167-5.56-5.56-1.893 1.88 7.453 7.453 16-16-1.88-1.88z'/%3E%3C/svg%3E\")}.ag-icon-tree-closed:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-closed%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E\")}.ag-icon-tree-indeterminate:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-indeterminate%3C/title%3E%3Cpath d='M6.667 14.667h18.667v2.667H6.667z'/%3E%3C/svg%3E\")}.ag-icon-tree-open:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-open%3C/title%3E%3Cpath d='M22.12 11.06 16 17.167 9.88 11.06 8 12.94l8 8 8-8z'/%3E%3C/svg%3E\")}.ag-icon-unlinked:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eunlinked%3C/title%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z'/%3E%3C/svg%3E\")}.ag-icon-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E\")}.ag-icon-grip:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egrip%3C/title%3E%3Cpath d='M26.667 12H5.334v2.667h21.333zM5.333 20h21.333v-2.667H5.333z'/%3E%3C/svg%3E\")}.ag-icon-settings:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E\")}.ag-icon-column-arrow:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M11 4a1 1 0 0 1 1 1v22a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1' clip-rule='evenodd'/%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M2 13a1 1 0 0 1 1-1h23.5a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1' clip-rule='evenodd'/%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M2 4h18v24H2zm2 2v20h14V6zM26.793 13 23 9.207l1.414-1.414L29.621 13l-5.207 5.207L23 16.793z' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-un-pin:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' d='M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11'/%3E%3Cpath fill='currentColor' d='M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28zM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972z'/%3E%3C/svg%3E\")}.ag-icon-pinned-top:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' d='M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22M3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536'/%3E%3C/svg%3E\")}.ag-icon-pinned-bottom:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' d='M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22M12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536'/%3E%3C/svg%3E\")}.ag-icon-chevron-up:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M3.479 10.521a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1-1.06 1.06l-3.47-3.47-3.47 3.47a.75.75 0 0 1-1.06 0' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-chevron-down:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M12.521 5.461a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06l3.47 3.47 3.47-3.47a.75.75 0 0 1 1.06 0' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-chevron-left:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M10.53 12.512a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-3.47 3.47 3.47 3.47a.75.75 0 0 1 0 1.06' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-chevron-right:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M5.47 3.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06L8.94 8 5.47 4.53a.75.75 0 0 1 0-1.06' clip-rule='evenodd'/%3E%3C/svg%3E\")}.ag-icon-filter-add:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M18.666 24h-5.333v-2.667h5.333zM24 17.333H8v-2.667h16zm3.59-9.344h3.221v2.657h-3.22v3.22h-2.656v-3.22h-3.221V7.989h3.22V4.77h2.657zm-8.582 2.678H4V8h15.008z'/%3E%3C/svg%3E\")}.ag-icon-edit:before{mask-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M6.222 25.778h1.611l14.834-14.811-1.611-1.611-14.834 14.81zM4 28v-4.733L22.644 4.656a2.26 2.26 0 0 1 1.567-.634q.423 0 .833.167.412.166.734.478l1.589 1.6q.333.322.483.733t.15.822q0 .423-.161.839-.162.416-.472.728L8.733 28zm17.856-17.833-.8-.811 1.61 1.61z'/%3E%3C/svg%3E\")}"}),lp={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>'},dp={aasc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2012 8.07928C13.6346 8.0793 14.0128 8.15365 14.3359 8.30193C14.6609 8.45018 14.9141 8.65595 15.0947 8.9201C15.2754 9.18439 15.3683 9.49109 15.374 9.83904H14.1904C14.1676 9.60898 14.0695 9.4303 13.8965 9.30291C13.7235 9.1756 13.4889 9.1115 13.1924 9.1115C12.9909 9.1115 12.8204 9.1404 12.6816 9.19744C12.543 9.25255 12.4364 9.32917 12.3623 9.42791C12.2901 9.52678 12.2539 9.63933 12.2539 9.76482C12.2501 9.8692 12.272 9.9604 12.3193 10.0383C12.3688 10.1162 12.4369 10.1843 12.5225 10.2414C12.6079 10.2964 12.7064 10.3451 12.8184 10.3869C12.9304 10.4268 13.0505 10.4609 13.1777 10.4894L13.7031 10.6144C13.9578 10.6715 14.1914 10.7479 14.4043 10.8429C14.6173 10.938 14.8021 11.0547 14.958 11.1935C15.1138 11.3323 15.2348 11.4957 15.3203 11.6838C15.4077 11.8719 15.4522 12.088 15.4541 12.3312C15.4522 12.6885 15.3611 12.9986 15.1807 13.2609C15.0019 13.5214 14.7427 13.7248 14.4043 13.8693C14.0678 14.0118 13.6617 14.0832 13.1865 14.0832C12.7153 14.0832 12.3048 14.0107 11.9551 13.8664C11.6071 13.7219 11.3345 13.5071 11.1387 13.2238C10.9449 12.9387 10.8435 12.5862 10.834 12.1662H12.0283C12.0416 12.362 12.0984 12.5252 12.1973 12.6564C12.298 12.7857 12.4323 12.8838 12.5996 12.9504C12.7688 13.0149 12.96 13.047 13.1729 13.047C13.3817 13.047 13.563 13.0169 13.7168 12.9562C13.8727 12.8954 13.9935 12.8106 14.0791 12.7023C14.1647 12.5939 14.208 12.469 14.208 12.3283C14.2079 12.1974 14.1686 12.0875 14.0908 11.9982C14.0148 11.9089 13.9022 11.8324 13.7539 11.7697C13.6076 11.707 13.4276 11.6501 13.2148 11.5988L12.5791 11.4387C12.0869 11.3189 11.6982 11.1318 11.4131 10.8771C11.128 10.6224 10.9855 10.2793 10.9873 9.84783C10.9854 9.49418 11.0804 9.18439 11.2705 8.9201C11.4625 8.65603 11.7261 8.45015 12.0605 8.30193C12.3951 8.15369 12.7754 8.07928 13.2012 8.07928Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 14.0002H4.48926L4.05664 12.6681H1.94824L1.51465 14.0002H0.19043L2.20703 8.15935H3.79883L5.8125 14.0002ZM2.26172 11.7043H3.74316L3.02539 9.49334H2.98047L2.26172 11.7043Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 8.15935C8.88165 8.15935 9.24031 8.22251 9.52734 8.34978C9.81445 8.47717 10.0303 8.65477 10.1748 8.88103C10.3192 9.10536 10.3916 9.36368 10.3916 9.65642C10.3916 9.88452 10.3461 10.085 10.2549 10.258C10.1637 10.4289 10.0384 10.5696 9.87891 10.6799C9.72117 10.7882 9.54024 10.8657 9.33691 10.9113V10.9679C9.55917 10.9775 9.76716 11.0406 9.96094 11.1564C10.1568 11.2724 10.3158 11.4356 10.4375 11.6447C10.5591 11.8519 10.6201 12.099 10.6201 12.3859C10.6201 12.6958 10.5427 12.9727 10.3887 13.216C10.2366 13.4573 10.0113 13.6486 9.71289 13.7892C9.41443 13.9299 9.04655 14.0002 8.60938 14.0002H6.11426V8.15935H8.45215ZM7.34863 12.9904H8.35547C8.69943 12.9904 8.95057 12.9252 9.1084 12.7941C9.26621 12.661 9.34473 12.4834 9.34473 12.2629C9.34468 12.1014 9.30643 11.9587 9.22852 11.8351C9.15056 11.7116 9.03903 11.6145 8.89453 11.5441C8.75195 11.4738 8.58148 11.4387 8.38379 11.4387H7.34863V12.9904ZM7.34863 10.6037H8.26465C8.43369 10.6036 8.58376 10.5737 8.71484 10.5148C8.84793 10.454 8.95227 10.3683 9.02832 10.258C9.10628 10.1477 9.14551 10.0155 9.14551 9.8615C9.14546 9.65055 9.07008 9.48001 8.91992 9.35076C8.77165 9.22169 8.56064 9.15741 8.28711 9.1574H7.34863V10.6037Z" fill="black"/><path d="M7.16602 0.377127C7.44584 0.189493 7.82551 0.20905 8.08496 0.442557L11.418 3.44256C11.7257 3.71966 11.7507 4.19428 11.4736 4.50213C11.1966 4.80961 10.7228 4.83441 10.415 4.55779L7.60938 2.03338L5.11328 4.53045C4.82042 4.82326 4.34562 4.82322 4.05273 4.53045C3.75986 4.23757 3.75989 3.7628 4.05273 3.4699L7.05273 0.4699L7.16602 0.377127Z" fill="black"/></svg>',adesc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.3867 11.4697C10.6796 11.1771 11.1544 11.1769 11.4473 11.4697C11.7399 11.7626 11.7399 12.2374 11.4473 12.5303L8.44727 15.5303L8.33398 15.623C8.05425 15.8106 7.67449 15.7909 7.41504 15.5576L4.08203 12.5576C3.77415 12.2805 3.74927 11.8059 4.02637 11.498C4.30342 11.1907 4.77722 11.1657 5.08496 11.4424L7.89062 13.9668L10.3867 11.4697Z" fill="black"/><path d="M13.2012 3.0791C13.6346 3.07912 14.0128 3.1535 14.3359 3.30176C14.6611 3.45006 14.9141 3.65661 15.0947 3.9209C15.2752 4.18513 15.3683 4.49104 15.374 4.83887H14.1904C14.1676 4.60882 14.0695 4.43012 13.8965 4.30273C13.7235 4.17546 13.4889 4.11133 13.1924 4.11133C12.9909 4.11133 12.8204 4.14023 12.6816 4.19727C12.5431 4.25236 12.4364 4.32902 12.3623 4.42773C12.2901 4.52659 12.2539 4.63919 12.2539 4.76465C12.2501 4.86901 12.272 4.96023 12.3193 5.03809C12.3688 5.11604 12.4369 5.18417 12.5225 5.24121C12.6079 5.29623 12.7064 5.34496 12.8184 5.38672C12.9304 5.42661 13.0505 5.46075 13.1777 5.48926L13.7031 5.61426C13.9578 5.67128 14.1914 5.74776 14.4043 5.84277C14.6172 5.93784 14.8021 6.05457 14.958 6.19336C15.1139 6.33216 15.2348 6.49633 15.3203 6.68457C15.4076 6.8727 15.4522 7.08885 15.4541 7.33203C15.4521 7.68929 15.3612 7.99944 15.1807 8.26172C15.0019 8.52216 14.7427 8.72465 14.4043 8.86914C14.0678 9.01165 13.6617 9.08301 13.1865 9.08301C12.7153 9.08299 12.3048 9.01057 11.9551 8.86621C11.6072 8.72173 11.3345 8.50786 11.1387 8.22461C10.9447 7.9394 10.8435 7.58622 10.834 7.16602H12.0283C12.0416 7.36176 12.0985 7.52509 12.1973 7.65625C12.298 7.78554 12.4323 7.88365 12.5996 7.9502C12.7688 8.01477 12.96 8.04785 13.1729 8.04785C13.3817 8.04781 13.5629 8.01678 13.7168 7.95605C13.8727 7.89522 13.9935 7.81051 14.0791 7.70215C14.1646 7.59387 14.2079 7.46965 14.208 7.3291C14.208 7.19796 14.1687 7.08739 14.0908 6.99805C14.0148 6.90868 13.9022 6.83228 13.7539 6.76953C13.6076 6.70685 13.4276 6.64993 13.2148 6.59863L12.5791 6.43848C12.0868 6.31871 11.6982 6.13163 11.4131 5.87695C11.1279 5.62221 10.9855 5.27916 10.9873 4.84766C10.9854 4.49404 11.0804 4.18517 11.2705 3.9209C11.4625 3.65661 11.7259 3.45006 12.0605 3.30176C12.3951 3.15353 12.7754 3.0791 13.2012 3.0791Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 9H4.48926L4.05664 7.66797H1.94824L1.51465 9H0.19043L2.20703 3.15918H3.79883L5.8125 9ZM2.26172 6.7041H3.74316L3.02539 4.49414H2.98047L2.26172 6.7041Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 3.15918C8.88181 3.15918 9.24025 3.22322 9.52734 3.35059C9.81445 3.47798 10.0303 3.6546 10.1748 3.88086C10.3193 4.10518 10.3916 4.36351 10.3916 4.65625C10.3916 4.88432 10.3461 5.08484 10.2549 5.25781C10.1636 5.4289 10.0386 5.57039 9.87891 5.68066C9.72118 5.78898 9.54022 5.86549 9.33691 5.91113V5.96875C9.55913 5.9783 9.76719 6.04044 9.96094 6.15625C10.1568 6.27223 10.3158 6.43538 10.4375 6.64453C10.5591 6.85173 10.6201 7.09875 10.6201 7.38574C10.6201 7.69567 10.5427 7.97245 10.3887 8.21582C10.2366 8.45719 10.0113 8.64841 9.71289 8.78906C9.41442 8.9297 9.04658 8.99999 8.60938 9H6.11426V3.15918H8.45215ZM7.34863 7.99023H8.35547C8.69948 7.99023 8.95057 7.92504 9.1084 7.79395C9.26621 7.66085 9.34473 7.48325 9.34473 7.2627C9.34466 7.10125 9.3064 6.95844 9.22852 6.83496C9.15056 6.71143 9.03899 6.61427 8.89453 6.54395C8.75196 6.47365 8.58145 6.43848 8.38379 6.43848H7.34863V7.99023ZM7.34863 5.60352H8.26465C8.43369 5.60347 8.58376 5.57354 8.71484 5.51465C8.84791 5.45381 8.95228 5.36807 9.02832 5.25781C9.10623 5.14755 9.14551 5.01529 9.14551 4.86133C9.14542 4.65046 9.07002 4.48078 8.91992 4.35156C8.77163 4.22228 8.56087 4.15724 8.28711 4.15723H7.34863V5.60352Z" fill="black"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>'},cp=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;const i=dp[e];if(i)return i;const o=lp[e];if(!o)throw new Error("Missing icon data for ".concat(e));return'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="'.concat(t,'" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>')+o+"</svg>"},up=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Or({feature:"iconSet",css:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(const i of[...Object.keys(lp),...Object.keys(dp)]){const o=cp(i,e.strokeWidth);t+=".ag-icon-".concat(i,"::before { mask-image: url('data:image/svg+xml,").concat(encodeURIComponent(o),"'); }\n")}return t}(e)})},hp=up(),pp=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',gp={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},vp=(()=>Or({feature:"inputStyle",params:(0,n.A)((0,n.A)({},gp),{},{inputBackgroundColor:_r,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Yr},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:jr(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0}),css:()=>pp+".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}"}))(),mp=(()=>Or({feature:"inputStyle",params:(0,n.A)((0,n.A)({},gp),{},{inputBackgroundColor:"transparent",inputBorder:{width:2,color:Ur(.3)},inputPaddingStart:{ref:"spacing"},inputFocusBorder:"solid 2px var(--ag-accent-color)",inputDisabledTextColor:{ref:"textColor",mix:.5},inputDisabledBorder:"solid 1px var(--ag-border-color)",inputInvalidBorder:{width:2,color:{ref:"invalidColor",mix:.3}}}),css:()=>pp+".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){border-left:none;border-right:none;border-top:none}"}))(),fp='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',Cp={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},wp=(()=>Or({feature:"tabStyle",params:(0,n.A)((0,n.A)({},Cp),{},{tabBarBorder:!0,tabBarBackgroundColor:Ur(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:_r}),css:fp}))(),bp=(()=>Or({feature:"tabStyle",params:(0,n.A)((0,n.A)({},Cp),{},{tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabSelectedUnderlineColor:{ref:"primaryColor"},tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:0}),css:fp}))(),yp=(()=>ip().withPart(op).withPart(rp).withPart(hp).withPart(wp).withPart(vp).withPart(Jh).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}))(),Sp=(()=>{const e={tabSelectedUnderlineColor:{ref:"primaryColor"},sideButtonSelectedUnderlineColor:{ref:"primaryColor"},buttonTextColor:{ref:"primaryColor"},rangeSelectionBackgroundColor:{ref:"primaryColor",mix:.2},rangeSelectionBorderColor:{ref:"primaryColor"},rangeSelectionHighlightColor:{ref:"primaryColor",mix:.5},rangeHeaderHighlightColor:{ref:"foregroundColor",mix:.08},rowNumbersSelectedColor:{ref:"primaryColor",mix:.5},inputFocusBorder:{width:2,color:{ref:"primaryColor"}},pickerButtonFocusBorder:{width:1,color:{ref:"primaryColor"}},cellEditingBorder:{color:{ref:"primaryColor"}},menuBackgroundColor:{ref:"backgroundColor"},sideButtonBarBackgroundColor:_r,sideButtonSelectedBackgroundColor:"transparent",sideButtonBarTopPadding:{calc:"spacing * 4"},headerColumnResizeHandleColor:"none",headerBackgroundColor:{ref:"backgroundColor"},rowHoverColor:Ur(.08),columnHoverColor:Ur(.08),headerCellHoverBackgroundColor:Ur(.05),statusBarLabelColor:Ur(.63),statusBarLabelFontWeight:600,statusBarValueFontWeight:600,valueChangeValueHighlightBackgroundColor:"#00acc1",panelTitleBarIconColor:Kr,advancedFilterBuilderButtonBarBorder:!1,filterPanelApplyButtonColor:{ref:"buttonTextColor"},filterPanelApplyButtonBackgroundColor:{ref:"buttonBackgroundColor"},colorPickerThumbSize:13,colorPickerTrackSize:11,colorPickerThumbBorderWidth:2,colorPickerTrackBorderRadius:2,colorPickerColorBorderRadius:2,rowDragIndicatorColor:{ref:"primaryColor"},columnDragIndicatorColor:{ref:"primaryColor"}},t=(0,n.A)((0,n.A)({},e),{},{primaryColor:"#3f51b5",foregroundColor:"#000D",headerTextColor:"#0008",accentColor:"#ff4081",checkboxUncheckedBorderColor:Kr,checkboxIndeterminateBackgroundColor:Kr,toggleButtonOffBackgroundColor:Kr,selectedRowBackgroundColor:"rgba(33, 150, 243, 0.3)"}),i=(0,n.A)((0,n.A)({},e),{},{primaryColor:"#3f51b5",foregroundColor:"#fffD",headerTextColor:"#fff8",accentColor:"#bb86fc",checkboxUncheckedBorderColor:jr(.5),checkboxIndeterminateBackgroundColor:jr(.5),toggleButtonOffBackgroundColor:jr(.5),selectedRowBackgroundColor:"#bb86fc33"});return Or({feature:"styleMaterial",css:".ag-dnd-ghost,.ag-filter-toolpanel-header,.ag-filter-toolpanel-search,.ag-multi-filter-group-title-bar,.ag-panel-title-bar-title,.ag-status-bar{color:var(--ag-header-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600}.ag-column-drop-horizontal{background-color:color-mix(in srgb,var(--ag-background-color),var(--ag-foreground-color) 8%)}.ag-cell.ag-cell-inline-editing{background-color:var(--ag-background-color);background-image:linear-gradient(0deg,var(--ag-input-background-color),var(--ag-input-background-color));border:var(--ag-input-border)!important;border-width:1px!important;height:calc(var(--ag-row-height) + var(--ag-spacing)*3);padding:var(--ag-spacing);:where(.ag-row-last:not(.ag-row-first)) &{bottom:0}:where(.ag-has-focus) &{border:var(--ag-input-focus-border)!important;border-width:1px!important}}.ag-advanced-filter-builder-button,.ag-standard-button{text-transform:uppercase}.ag-status-bar{border:solid var(--ag-border-width) var(--ag-border-color)}.ag-list-item-hovered:after{background-color:var(--ag-primary-color)}.ag-pill-button:hover{color:var(--ag-primary-color)}.ag-filter-add-button,.ag-filter-add-button:hover{border-bottom:2px solid var(--ag-primary-color)}",params:t,modeParams:{light:t,dark:i,"dark-blue":i}})})(),xp=(()=>ip().withPart($h).withPart(op).withPart(rp).withPart(ap).withPart(bp).withPart(mp).withPart(ep).withPart(Sp).withParams({rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.75 * rowVerticalPaddingScale"},headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4.75 * headerVerticalPaddingScale"},widgetVerticalSpacing:{calc:"spacing * 1.75"},cellHorizontalPadding:{calc:"spacing * 3"},buttonHorizontalPadding:{ref:"spacing"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 2"},fontSize:13,iconSize:18,borderRadius:0,wrapperBorderRadius:0,wrapperBorder:!1,menuBorder:!1,dialogBorder:!1,panelTitleBarBorder:!1,tabSelectedBorderWidth:0,tabSelectedUnderlineTransitionDuration:.3,sidePanelBorder:!1,sideButtonSelectedBorder:!1,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineTransitionDuration:.3,sideButtonBorder:!1,buttonBorder:!1,buttonDisabledBorder:!1,focusShadow:{spread:4,color:Ur(.16)},fontFamily:[{googleFont:"Roboto"},"-apple-system","BlinkMacSystemFont","Segoe UI","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],inputHeight:{calc:"max(iconSize, fontSize) + spacing * 3"},pickerButtonBorder:{width:1,color:"transparent"},headerFontWeight:600,headerFontSize:{calc:"fontSize - 1px"},checkboxBorderWidth:2,checkboxBorderRadius:2,toggleButtonWidth:34,toggleButtonSwitchInset:1,cardShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",popupShadow:"5px 5px 10px rgba(0, 0, 0, 0.3)"}))(),Fp={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},Rp={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},Pp={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},Dp={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},Ep={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},Ap={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},Mp={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function Tp(e,t,i){const o=e.visibleCols.headerGroupRowCount;if(i>=o)return{column:t,headerRowIndex:i};let n=t.getParent();for(;n&&n.getProvidedColumnGroup().getLevel()>i;)n=n.getParent();const s=t.isSpanHeaderHeight();return!n||s&&n.isPadding()?{column:t,headerRowIndex:o}:{column:n,headerRowIndex:n.getProvidedColumnGroup().getLevel()}}var kp=new Set(["gridPreDestroyed","fillStart","pasteStart"]),Ip=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],Lp=Ip.reduce((e,t)=>{var i;return e[t]=!(i=t)||i.length<2?i:"on"+i[0].toUpperCase()+i.substring(1),e},{}),Np={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agExportingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agNoMatchingRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function Op(e){return'"'.concat(e,'"')}var Gp={allowFormula:"Formula",aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:e=>{let{cellEditor:t,editable:i}=e;return i?"string"===typeof t&&null!==(o=Np[t])&&void 0!==o?o:"CustomEditor":null;var o},cellRenderer:e=>{let{cellRenderer:t}=e;return"string"!==typeof t?null:Np[t]},cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:e=>{let{editable:t,cellEditor:i}=e;return t&&!i?"TextEditor":null},enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:e=>{let{filter:t}=e;return t&&"string"!==typeof t&&"boolean"!==typeof t?"CustomFilter":"string"===typeof t&&null!==(i=Np[t])&&void 0!==i?i:"ColumnFilter";var i},floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{var t;const i=["columnsMenuTab","generalMenuTab"];return null!==(t=e.menuTabs)&&void 0!==t&&t.some(e=>i.includes(e))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},Bp={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0,allowFormula:void 0},Vp=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],Hp=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","activeOverlayParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","formulaDataSource","formulaFuncs","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],zp=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector","suppressOverlays"],Wp=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],Up=["theme","rowSelection"],jp=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],_p=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","refreshAfterGroupEdit","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows","animateColumnResizing"],Kp=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","overlayComponent","loadingOverlayComponent","noRowsOverlayComponent","overlayComponentSelector","activeOverlay","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"];function Yp(e,t,i){return"number"===typeof t||null==t?null==t||t>=i?null:"".concat(e,": value should be greater than or equal to ").concat(i):"".concat(e,": value should be a number")}var qp={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",refreshAfterGroupEdit:["RowGrouping","TreeData"],rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},Qp=()=>{const e={autoSizePadding:{validate(e){let{autoSizePadding:t}=e;return Yp("autoSizePadding",t,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate(e){let{cacheBlockSize:t}=e;return Yp("cacheBlockSize",t,1)}},cacheOverflowSize:{validate(e){let{cacheOverflowSize:t}=e;return Yp("cacheOverflowSize",t,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:e=>{const t=e.domLayout,i=["autoHeight","normal","print"];return t&&!i.includes(t)?"domLayout must be one of [".concat(i.join(),"], currently it's ").concat(t):null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate(e){let{enableRowPinning:t,pinnedTopRowData:i,pinnedBottomRowData:o}=e;return t&&(i||o)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate(e){let{enableRowPinning:t,isRowPinnable:i,pinnedTopRowData:o,pinnedBottomRowData:n}=e;return i&&(o||n)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!t&&i?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate(e){let{enableRowPinning:t,isRowPinned:i,pinnedTopRowData:o,pinnedBottomRowData:n}=e;return i&&(o||n)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!t&&i?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate(e,t,i){let{groupHierarchyConfig:o={}}=e;for(const s of Object.keys(o)){var n;null===(n=i.validation)||void 0===n||n.validateColDef(o[s])}return null}},icons:{validate:e=>{let{icons:t}=e;if(t){if(t.smallDown)return li(262);if(t.smallLeft)return li(263);if(t.smallRight)return li(264)}return null}},infiniteInitialRowCount:{validate(e){let{infiniteInitialRowCount:t}=e;return Yp("infiniteInitialRowCount",t,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:e=>{if("boolean"===typeof e.ssrmExpandAllAffectsAllRows){if("serverSide"!==e.rowModelType)return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(e.ssrmExpandAllAffectsAllRows&&"function"!==typeof e.getRowId)return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate(e){let{keepDetailRowsCount:t}=e;return Yp("keepDetailRowsCount",t,1)}},paginationPageSize:{validate(e){let{paginationPageSize:t}=e;return Yp("paginationPageSize",t,1)}},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return"boolean"===typeof t||null==t||t.length?null:"'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false."}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate(e){let{rowBuffer:t}=e;return Yp("rowBuffer",t,0)}},rowClass:{validate:e=>"function"===typeof e.rowClass?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate(e){let{rowSelection:t}=e;return t&&"string"===typeof t?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':t&&"object"!==typeof t?"Expected `RowSelectionOptions` object for the `rowSelection` property.":t&&"multiRow"!==t.mode&&"singleRow"!==t.mode?'Selection mode "'.concat(t.mode,"\" is invalid. Use one of 'singleRow' or 'multiRow'."):null}},rowStyle:{validate:e=>{const t=e.rowStyle;return t&&"function"===typeof t?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate(e){let{serverSideInitialRowCount:t}=e;return Yp("serverSideInitialRowCount",t,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter(e=>!go(e));if(e.length>0)return"sortingOrder must be an array of type (SortDirection | SortDef)[], incorrect items are: ".concat(e.map(e=>"string"===typeof e||null==e?Jt(e):JSON.stringify(e)),"]")}else if(!Array.isArray(t)||!t.length)return"sortingOrder must be an array with at least one element, currently it's ".concat(t);return null}},tooltipHideDelay:{validate:e=>e.tooltipHideDelay&&e.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:e=>e.tooltipShowDelay&&e.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:e=>{var t;const i=null!==(t=e.rowModelType)&&void 0!==t?t:"clientSide";switch(i){case"clientSide":{const{treeDataChildrenField:t,treeDataParentIdField:i,getDataPath:o,getRowId:n}=e;if(!t&&!i&&!o)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(t){if(o)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(i)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(i){if(!n)return"getRowId callback not provided, tree data with parent id cannot be built.";if(o)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const t="treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ".concat(i," row model.");return e.isServerSideGroup&&e.getServerSideGroupKey?null:t}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate(e){let{viewportRowModelBufferSize:t}=e;return Yp("viewportRowModelBufferSize",t,0)}},viewportRowModelPageSize:{validate(e){let{viewportRowModelPageSize:t}=e;return Yp("viewportRowModelPageSize",t,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate(e){let{autoGroupColumnDef:t,showOpenedGroup:i}=e;return null!==t&&void 0!==t&&t.field&&i?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":null!==t&&void 0!==t&&t.valueGetter&&i?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:e=>{const t=e.renderingMode,i=["default","legacy"];return t&&!i.includes(t)?"renderingMode must be one of [".concat(i.join(),"], currently it's ").concat(t):null}},autoSizeStrategy:{validate:e=>{let{autoSizeStrategy:t}=e;if(!t)return null;const i=["fitCellContents","fitGridWidth","fitProvidedWidth"],o=t.type;return"fitCellContents"!==o&&"fitGridWidth"!==o&&"fitProvidedWidth"!==o?"Invalid Auto-size strategy. `autoSizeStrategy` must be one of ".concat(i.map(e=>'"'+e+'"').join(", "),", currently it's ").concat(o):"fitProvidedWidth"===o&&"number"!=typeof t.width?"When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric `width`. You provided ".concat(t.width):null}}},t={};for(const i of _p)t[i]={expectedType:"boolean"};for(const i of Wp)t[i]={expectedType:"number"};return St(t,e),t},Xp=0,$p=0,Zp="__ag_grid_instance";var Jp=class extends ht{constructor(e,t){super(),this.column=e,this.eGui=t,this.lastMovingChanged=0}postConstruct(){this.addManagedElementListeners(this.eGui,{click:e=>e&&this.onClick(e)}),this.addManagedListeners(this.column,{movingChanged:()=>{this.lastMovingChanged=Date.now()}})}onClick(e){const{sortSvc:t,rangeSvc:i,gos:o}=this.beans;if(!Ui(o)||e.altKey){if(this.column.isSortable()){const i=this.column.isMoving(),o=Date.now()-this.lastMovingChanged<50;i||o||null===t||void 0===t||t.progressSortFromEvent(this.column,e)}}else null===i||void 0===i||i.handleColumnSelection(this.column,e)}};var eg={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},tg={moduleName:"ColumnHeaderComp",version:Kt,userComponents:{agColumnHeader:class extends Tn{constructor(){super(...arguments),this.eFilter=Pn,this.eFilterButton=Pn,this.eSortIndicator=Pn,this.eMenu=Pn,this.eLabel=Pn,this.eText=Pn,this.eColRef=Pn,this.eSortOrder=Pn,this.eSortAsc=Pn,this.eSortDesc=Pn,this.eSortMixed=Pn,this.eSortNone=Pn,this.eSortAbsoluteAsc=Pn,this.eSortAbsoluteDesc=Pn,this.isLoadingInnerComponent=!1}refresh(e){var t;const i=this.params;if(this.params=e,this.workOutTemplate(e,!(null===(t=this.beans)||void 0===t||!t.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||e.column.formulaRef!=this.currentRef||null!=this.currentSuppressMenuHide&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||i.enableFilterButton!=e.enableFilterButton||i.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){var o,s;const t=(0,n.A)({},e);St(t,e.innerHeaderComponentParams),null===(o=(s=this.innerHeaderComponent).refresh)||void 0===o||o.call(s,t)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const{formula:i}=this.beans,o=e.template;return o?null!==o&&void 0!==o&&o.trim?o.trim():o:function(e,t){const i={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:i},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:i},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[e?{tag:"span",ref:"eColRef",cls:"ag-header-col-ref"}:null,{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:i},t?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}(!(null===i||void 0===i||!i.active),t)}init(e){this.params=e;const{sortSvc:t,touchSvc:i,rowNumbersSvc:o,userCompFactory:n}=this.beans,s=null===t||void 0===t?void 0:t.getSortIndicatorSelector();var r;(this.currentTemplate=this.workOutTemplate(e,!!s),this.setTemplate(this.currentTemplate,s?[s]:void 0),this.eLabel)&&(null!==(r=this.mouseListener)&&void 0!==r||(this.mouseListener=this.createManagedBean(new Jp(e.column,this.eLabel))));null===i||void 0===i||i.setupForHeader(this),this.setMenu(),this.setupSort(),this.setupColumnRefIndicator(),null===o||void 0===o||o.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(n,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const i=function(e,t,i){return e.getCompDetails(t,Vn,void 0,i)}(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderComponent=e,this.eText&&this.eText.appendChild(e.getGui())):this.destroyBean(e))}))}setDisplayName(e){const{displayName:t}=e,i=this.currentDisplayName;this.currentDisplayName=t,!this.eText||i===t||this.innerHeaderComponent||this.isLoadingInnerComponent||(this.eText.textContent=S(t))}addInIcon(e,t,i){const o=Bc(e,this.beans,i);o&&t.appendChild(o)}workOutShowMenu(){var e;return this.params.enableMenu&&!(null===(e=this.beans.menuSvc)||void 0===e||!e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!(null===(e=this.beans.menuSvc)||void 0===e||!e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return Pe(this.eMenu),void(this.eMenu=void 0);const{gos:e,eMenu:t,params:i}=this,o=Ji(e);this.addInIcon(o?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!o);const n=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=n,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(n)}toggleMenuAlwaysShow(e){var t;null===(t=this.eMenu)||void 0===t||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:i}=this;t||this.toggleMenuAlwaysShow(!0),i.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){const{params:t,gos:i,beans:o,eMenu:n,eFilterButton:s}=this,r=t.column,a=Ji(i);var l,d;if(e&&!a){if(null!==(l=o.menuSvc)&&void 0!==l&&l.isFilterMenuInHeaderEnabled(r))return t.showFilter(null!==(d=null!==s&&void 0!==s?s:n)&&void 0!==d?d:this.getGui()),!0}else if(t.enableMenu){var c;return this.showColumnMenu(null!==(c=null!==n&&void 0!==n?n:s)&&void 0!==c?c:this.getGui()),!0}return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:t,eSortOrder:i,eSortAsc:o,eSortDesc:n,eSortMixed:s,eSortNone:r,eSortAbsoluteAsc:a,eSortAbsoluteDesc:l}=this;t.attachCustomElements(i,o,n,s,r,a,l)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i)}setupColumnRefIndicator(){const{eColRef:e,beans:{editModelSvc:t},params:i}=this;e&&(this.currentRef=i.column.formulaRef,e.textContent=this.currentRef,pe(e,!1),this.addManagedEventListeners({cellEditingStarted:()=>{const i=null===t||void 0===t?void 0:t.getEditPositions(),o=!!this.currentRef&&!(null===i||void 0===i||!i.some(e=>e.column.isAllowFormula()));pe(e,o)},cellEditingStopped:()=>{pe(e,!1)}}))}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterIcon,e,()=>{const i=t.column.isFilterActive();pe(e,i,{skipAriaHidden:!0})},"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,i,o){if(!e)return Pe(t),!1;const n=this.params.column;return this.addInIcon(o,t,n),this.addManagedListeners(n,{filterChanged:i}),i(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var t;const{eFilterButton:i,eMenu:o}=this;var n;return e?null!==(n=null!==i&&void 0!==i?i:o)&&void 0!==n?n:this.getGui():null!==(t=null!==o&&void 0!==o?o:i)&&void 0!==t?t:this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent=this.destroyBean(this.innerHeaderComponent),this.mouseListener=this.destroyBean(this.mouseListener)}}},icons:{menu:"menu",menuAlt:"menu-alt"}},ig={moduleName:"ColumnGroupHeaderComp",version:Kt,userComponents:{agColumnGroupHeader:class extends Tn{constructor(){super(eg),this.agOpened=Pn,this.agClosed=Pn,this.agLabel=Pn,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:i}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),null===i||void 0===i||i.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&oi(89)}workOutInnerHeaderGroupComponent(e,t){const i=function(e,t,i){return e.getCompDetails(t,Hn,void 0,i)}(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderGroupComponent=e,this.agLabel.appendChild(e.getGui())):this.destroyBean(e))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:i},beans:{colGroupSvc:o}}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const n=e=>{if(Ll(e))return;const t=!i.isExpanded();o.setColumnGroupOpened(i.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(t,n),this.addTouchAndClickListeners(e,n);const s=e=>{Il(e)};this.addManagedElementListeners(t,{dblclick:s}),this.addManagedElementListeners(e,{dblclick:s}),this.addManagedElementListeners(this.getGui(),{dblclick:n}),this.updateIconVisibility();const r=i.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t){var i;null===(i=this.beans.touchSvc)||void 0===i||i.setupForHeaderGroupElement(this,e,t),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){const o=i.isExpanded();pe(e,o),pe(t,!o)}else pe(e,!1),pe(t,!1)}addInIcon(e,t){const i=Bc(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:e,agClosed:t}=this;pe(e,!1),pe(t,!1)}}setupLabel(e){var t;const{displayName:i,columnGroup:o}=e,{innerHeaderGroupComponent:n,isLoadingInnerComponent:s}=this,r=n||s;v(i)&&!r&&(this.agLabel.textContent=S(i)),this.toggleCss("ag-sticky-label",!(null!==(t=o.getColGroupDef())&&void 0!==t&&t.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}}},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},og={moduleName:"AnimationFrame",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,0===e&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){!1===this.active&&oi(92)}createTask(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.verify();let s=i;o&&this.batchFrameworkComps&&(s="f1");const r={task:e,index:t,createOrder:++this.taskCount,deferred:n};this.addTaskToList(this[s],r),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((e,i)=>e.deferred!==i.deferred?e.deferred?-1:1:e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:i,f1:o,destroyTasks:n,beans:s}=this,{ctrlsSvc:r,frameworkOverrides:a}=s,l=t.list,d=i.list,c=o.list,u=Date.now();let h=0;const p=e<=0,g=r.getScrollFeature();for(;p||h<e;){if(!g.scrollGridIfNeeded()){let s;if(l.length)this.sortTaskList(t),s=l.pop().task;else if(d.length)this.sortTaskList(i),s=d.pop().task;else if(c.length)a.wrapOutgoing(()=>{for(;p||h<e;){if(g.scrollGridIfNeeded())break;if(!c.length)break;this.sortTaskList(o),s=c.pop().task,s(),h=Date.now()-u}}),s=()=>{};else{if(!n.length)break;s=n.pop()}s()}h=Date.now()-u}l.length||d.length||c.length||n.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);je(this.beans,e)}isQueueEmpty(){return!this.ticking}}]},ng={moduleName:"Touch",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Fs())return;this.mockContextMenu(e,e.element,(t,i,o)=>{var n,s;const{rowCtrl:r,cellCtrl:a}=e.getControlsForEventTarget(null!==(n=null===o||void 0===o?void 0:o.target)&&void 0!==n?n:null);null!==a&&void 0!==a&&a.column&&a.dispatchCellContextMenuEvent(null!==o&&void 0!==o?o:null),null===(s=this.beans.contextMenuSvc)||void 0===s||s.handleContextMenuMouseEvent(void 0,o,r,a)})}handleCellDoubleClick(e,t){return!!(()=>{if(!Fs()||Ze("dblclick"))return!1;const t=Date.now(),i=t-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=t,i})()&&(e.onCellDoubleClicked(t),t.preventDefault(),!0)}setupForHeader(e){const{gos:t,sortSvc:i,menuSvc:o}=this.beans;if(t.get("suppressTouch"))return;const{params:n,eMenu:s,eFilterButton:r}=e,a=new yu(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());const l=e.shouldSuppressMenuHide(),d=l&&v(s)&&n.enableMenu;let c=a;if(d&&(c=new yu(s,!0),e.addDestroyFunc(()=>c.destroy())),n.enableMenu||null!==o&&void 0!==o&&o.isHeaderContextMenuEnabled(n.column)){const t=d?"tap":"longTap",i=e=>n.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(c,{[t]:i}),e.addManagedListeners(a,{longTap:i})}if(n.enableSorting){const t=e=>{const t=e.touchStart.target;l&&(null!==s&&void 0!==s&&s.contains(t)||null!==r&&void 0!==r&&r.contains(t))||null===i||void 0===i||i.progressSort(n.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:t})}if(n.enableFilterButton&&r){const t=new yu(r,!0);e.addManagedListeners(t,{tap:()=>n.showFilter(r)}),e.addDestroyFunc(()=>t.destroy())}}setupForHeaderGroup(e){var t;const i=e.params;if(null!==(t=this.beans.menuSvc)&&void 0!==t&&t.isHeaderContextMenuEnabled(i.columnGroup.getProvidedColumnGroup())){const t=new yu(i.eGridHeader,!0),o=e=>i.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(t,{longTap:o}),e.addDestroyFunc(()=>t.destroy())}}setupForHeaderGroupElement(e,t,i){const o=new yu(t,!0);e.addManagedListeners(o,{tap:i}),e.addDestroyFunc(()=>o.destroy())}mockContextMenu(e,t,i){if(!Fs())return;const o=new yu(t);e.addManagedListeners(o,{longTap:e=>{ot(this.beans,e.touchEvent)&&i(void 0,e.touchStart,e.touchEvent)}}),e.addDestroyFunc(()=>o.destroy())}}]};var sg=class{constructor(){this.cellValidations=new Map}getCellValidation(e){var t;const{rowNode:i,column:o}=e||{};return null===(t=this.cellValidations)||void 0===t||null===(t=t.get(i))||void 0===t?void 0:t.get(o)}hasCellValidation(e){return null!==e&&void 0!==e&&e.rowNode&&e.column?!!this.getCellValidation(e):this.cellValidations.size>0}setCellValidation(e,t){const{rowNode:i,column:o}=e;this.cellValidations.has(i)||this.cellValidations.set(i,new Map),this.cellValidations.get(i).set(o,t)}clearCellValidation(e){var t;const{rowNode:i,column:o}=e;null===(t=this.cellValidations.get(i))||void 0===t||t.delete(o)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},rg=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return null!==e&&void 0!==e&&e.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation(e,t){let{rowNode:i}=e;this.rowValidations.set(i,t)}clearRowValidation(e){let{rowNode:t}=e;this.rowValidations.delete(t)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function ag(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{rowIndex:o,rowId:n,rowCtrl:s,rowPinned:r}=i;if(s)return s;const{rowModel:a,rowRenderer:l}=e;let{rowNode:d}=i;return d||(n?d=function(e,t,i){const{rowModel:o,pinnedRowModel:n}=e;let s;return null!==s&&void 0!==s||(s=null===o||void 0===o?void 0:o.getRowNode(t)),i?null!==s&&void 0!==s||(s=null===n||void 0===n?void 0:n.getPinnedRowById(t,i)):(null!==s&&void 0!==s||(s=null===n||void 0===n?void 0:n.getPinnedRowById(t,"top")),null!==s&&void 0!==s||(s=null===n||void 0===n?void 0:n.getPinnedRowById(t,"bottom"))),s}(e,n,r):null!=o&&(d=a.getRow(o))),null===(t=l.getRowCtrls(d?[d]:[]))||void 0===t?void 0:t[0]}function lg(e){var t,i,o,n;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{cellCtrl:r,colId:a,columnId:l,column:d}=s;if(r)return r;const c=e.colModel.getCol(null!==(t=null!==a&&void 0!==a?a:l)&&void 0!==t?t:cg(d)),u=null!==(i=s.rowCtrl)&&void 0!==i?i:ag(e,s),h=null!==(o=null===u||void 0===u?void 0:u.getCellCtrl(c))&&void 0!==o?o:void 0;if(h)return h;const p=null!==(n=s.rowNode)&&void 0!==n?n:null===u||void 0===u?void 0:u.rowNode;var g;return p?null===(g=e.rowRenderer.getCellCtrls([p],[c]))||void 0===g?void 0:g[0]:void 0}function dg(e){const{editSvc:t}=e;null!==t&&void 0!==t&&t.isBatchEditing()?(wg(e,{persist:!0}),Sg(e)):null===t||void 0===t||t.stopEditing(void 0,{source:"api"})}function cg(e){if(e)return"string"===typeof e?e:e.getColId()}var ug=Symbol("unedited");function hg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[],o=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const s of o){var n;const e=null===(n=s.comp)||void 0===n?void 0:n.getCellEditor();e&&i.push({ctrl:s,editor:ds(e)})}return i}function pg(e){let{pendingValue:t,sourceValue:i}=e;return t===ug&&(t=i),t!==i}function gg(e,t,i){var o,s,r;const{key:a,event:l,cellStartedEdit:d,silent:c}=null!==i&&void 0!==i?i:{},{editModelSvc:u,editSvc:h,gos:p,userCompFactory:g}=e,v=lg(e,t),m=null===v||void 0===v||null===(o=v.comp)||void 0===o?void 0:o.getCellEditor(),f=mg(e,t,a,d&&!c),C=t.column.isAllowFormula(),w=null===u||void 0===u?void 0:u.getEdit(t),b=null!==(s=f.value)&&void 0!==s?s:null===w||void 0===w?void 0:w.sourceValue;var y;if(m)return null===u||void 0===u||u.setEdit(t,{editorValue:yg(e,b,!0,t.column),state:"editing"}),void(null===(y=m.refresh)||void 0===y||y.call(m,f));const S=t.column.getColDef(),x=ns(g,C?(0,n.A)((0,n.A)({},S),{},{cellEditor:"agTextCellEditor"}):S,f);if(!x)return;const{popupFromSelector:F,popupPositionFromSelector:R}=x,P=null!==F&&void 0!==F?F:!!S.cellEditorPopup,D=null!==R&&void 0!==R?R:S.cellEditorPopupPosition;if(Cg(x.params,l),!v)return;const{rangeFeature:E,rowCtrl:A,comp:M,onEditorAttachedFuncs:T}=v;null===u||void 0===u||u.setEdit(t,{editorValue:yg(e,b,!0,t.column),state:"editing"}),v.editCompDetails=x,T.push(()=>null===E||void 0===E?void 0:E.unsetComp()),null===M||void 0===M||M.setEditDetails(x,P,D,p.get("reactiveCustomComponents")),null===A||void 0===A||A.refreshRow({suppressFlash:!0});const k=null===u||void 0===u?void 0:u.getEdit(t,!0);c||null!==k&&void 0!==k&&null!==(r=k.editorState)&&void 0!==r&&r.cellStartedEditing||(null===h||void 0===h||h.dispatchCellEvent(t,l,"cellEditingStarted",{value:b}),null===u||void 0===u||u.setEdit(t,{editorState:{cellStartedEditing:!0}}))}function vg(e,t,i){const o={editorValueExists:!1};if(Pg(e)){var s,r;const e=null===(s=t.getValidationErrors)||void 0===s?void 0:s.call(t);if((null!==(r=null===e||void 0===e?void 0:e.length)&&void 0!==r?r:0)>0)return o}if(null!==i&&void 0!==i&&i.isCancelling)return o;if(null!==i&&void 0!==i&&i.isStopping){var a;const e=null===t||void 0===t||null===(a=t.isCancelAfterEnd)||void 0===a?void 0:a.call(t);if(e)return(0,n.A)((0,n.A)({},o),{},{isCancelAfterEnd:e})}return{editorValue:t.getValue(),editorValueExists:!0}}function mg(e,t,i,o){var n,s,r,a,l,d;const{valueSvc:c,gos:u,editSvc:h}=e,p=e.gos.get("enableGroupEdit"),g=lg(e,t),v=null!==(n=null===(s=t.rowNode)||void 0===s?void 0:s.rowIndex)&&void 0!==n?n:void 0,m=null===h||void 0===h?void 0:h.isBatchEditing(),f=e.colModel.getCol(t.column.getId()),{rowNode:C,column:w}=t,b=null===(r=g.comp)||void 0===r?void 0:r.getCellEditor(),y=null===h||void 0===h?void 0:h.getCellDataValue(t,!1),S=void 0===y?b?null===(a=vg(e,b))||void 0===a?void 0:a.editorValue:void 0:y,x=S===ug?null===(l=c.getValueForDisplay({column:f,node:C}))||void 0===l?void 0:l.value:S;let F=p?S:x;var R,P;w.isAllowFormula()&&null!==(d=e.formula)&&void 0!==d&&d.isFormula(F)&&(F=null!==(R=null===(P=e.formula)||void 0===P?void 0:P.normaliseFormula(F,!0))&&void 0!==R?R:F);return oo(u,{value:F,eventKey:null!==i&&void 0!==i?i:null,column:w,colDef:w.getColDef(),rowIndex:v,node:C,data:C.data,cellStartedEdit:null!==o&&void 0!==o&&o,onKeyDown:null===g||void 0===g?void 0:g.onKeyDown.bind(g),stopEditing:i=>{h.stopEditing(t,{source:m?"ui":"api",suppressNavigateAfterEdit:i}),xg(e,t)},eGridCell:null===g||void 0===g?void 0:g.eGui,parseValue:e=>c.parseValue(f,C,e,null===g||void 0===g?void 0:g.value),formatValue:null===g||void 0===g?void 0:g.formatValue.bind(g),validate:()=>{null===h||void 0===h||h.validateEdit()}})}function fg(e,t){const{editModelSvc:i}=e;null===i||void 0===i||i.getEditMap().forEach((e,o)=>{e.forEach((e,n)=>{(t||"editing"!==e.state&&e.pendingValue!==ug)&&(pg(e)||"editing"===e.state&&!t||null===i||void 0===i||i.removeEdits({rowNode:o,column:n}))})})}function Cg(e,t){var i,o;t instanceof KeyboardEvent&&"agNumberCellEditor"===e.column.getColDef().cellEditor?e.suppressPreventDefault=["-","+",".","e"].includes(null!==(i=null===t||void 0===t?void 0:t.key)&&void 0!==i?i:"")||e.suppressPreventDefault:null===t||void 0===t||null===(o=t.preventDefault)||void 0===o||o.call(t);return e}function wg(e,t){for(const r of null!==(i=null===(o=e.editModelSvc)||void 0===o?void 0:o.getEditPositions())&&void 0!==i?i:[]){var i,o,n;const a=lg(e,r);if(!a)continue;const l=null===(n=a.comp)||void 0===n?void 0:n.getCellEditor();if(!l)continue;const{editorValue:d,editorValueExists:c,isCancelAfterEnd:u}=vg(e,l,t);var s;if(u)null===(s=e.editModelSvc)||void 0===s||s.setEdit(r,{editorState:{isCancelAfterEnd:u}});bg(e,r,d,void 0,!c,t)}}function bg(e,t,i,o,n,s){var r;const{editModelSvc:a,valueSvc:l}=e;if(!a)return;const{rowNode:d,column:c}=t;if(!d||!c)return;let u=a.getEdit(t,!0);if(null===(r=u)||void 0===r||!r.sourceValue){const i={sourceValue:l.getValue(c,d,void 0,"api"),pendingValue:u?yg(e,u.editorValue,!1,c):ug};null!==s&&void 0!==s&&s.persist&&(i.state="changed"),u=a.setEdit(t,i)}a.setEdit(t,{editorValue:n?yg(e,u.sourceValue,!0,c):i}),null!==s&&void 0!==s&&s.persist&&function(e,t){const{editModelSvc:i}=e,o=null===i||void 0===i?void 0:i.getEdit(t,!0);null===i||void 0===i||i.setEdit(t,{pendingValue:yg(e,null===o||void 0===o?void 0:o.editorValue,!1,t.column)})}(e,t)}function yg(e,t,i,o){const{formula:n}=e;var s;return o.isAllowFormula()&&null!==n&&void 0!==n&&n.isFormula(t)&&null!==(s=null===n||void 0===n?void 0:n.normaliseFormula(t,i))&&void 0!==s?s:t}function Sg(e,t,i){var o;t||(t=null===(o=e.editModelSvc)||void 0===o?void 0:o.getEditPositions());for(const n of null!==t&&void 0!==t?t:[])xg(e,n,i)}function xg(e,t,i){const o=e.gos.get("enableGroupEdit"),{editModelSvc:n}=e,s=lg(e,t),r=null===n||void 0===n?void 0:n.getEdit(t,!0);if(!s)return void(r&&(null===n||void 0===n||n.setEdit(t,{state:"changed"})));const{comp:a}=s;if(a&&!a.getCellEditor()){if(null===s||void 0===s||s.refreshCell(),r){null===n||void 0===n||n.setEdit(t,{state:"changed"});Rg(e,t,o?Fg(i,r):{valueChanged:!1,newValue:void 0,oldValue:r.sourceValue},i)}return}if(Pg(e)){var l,d;const e=null===a||void 0===a||null===(l=a.getCellEditor())||void 0===l||null===(d=l.getValidationErrors)||void 0===d?void 0:d.call(l),i=null===n||void 0===n?void 0:n.getCellValidationModel();null!==e&&void 0!==e&&e.length?null===i||void 0===i||i.setCellValidation(t,{errorMessages:e}):null===i||void 0===i||i.clearCellValidation(t)}null===n||void 0===n||n.setEdit(t,{state:"changed"}),null===a||void 0===a||a.setEditDetails(),null===a||void 0===a||a.refreshEditStyles(!1,!1),null===s||void 0===s||s.refreshCell({force:!0,suppressFlash:!0});const c=null===n||void 0===n?void 0:n.getEdit(t);if(c&&"changed"===c.state){var u;Rg(e,t,o?Fg(i,c):{valueChanged:pg(c)&&!(null!==i&&void 0!==i&&i.cancel),newValue:null!==i&&void 0!==i&&i.cancel||c.editorState.isCancelAfterEnd?void 0:null!==(u=null===c||void 0===c?void 0:c.editorValue)&&void 0!==u?u:null===r||void 0===r?void 0:r.pendingValue,oldValue:null===c||void 0===c?void 0:c.sourceValue},i)}}function Fg(e,t){return null!==e&&void 0!==e&&e.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:pg(t),oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function Rg(e,t,i){let{silent:o,event:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{editSvc:s,editModelSvc:r}=e,a=null===r||void 0===r?void 0:r.getEdit(t),{editorState:l}=a||{},{isCancelBeforeStart:d}=l||{};o||d||(null===s||void 0===s||s.dispatchCellEvent(t,n,"cellEditingStopped",i),null===r||void 0===r||r.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function Pg(e){var t;const{gos:i,colModel:o}=e,n=!!i.get("getFullRowEditValidationErrors"),s=null===(t=o.getColumnDefs())||void 0===t?void 0:t.filter(e=>e.editable).some(e=>{let{cellEditorParams:t}=e;const{minLength:i,maxLength:o,getValidationErrors:n,min:s,max:r}=t||{};return void 0!==i||void 0!==o||void 0!==n||void 0!==s||void 0!==r}),r=e.gridApi.getCellEditorInstances().some(e=>e.getValidationElement||e.getValidationErrors);return s||n||r}function Dg(e,t){if(!t&&!Pg(e))return;const i=hg(e),o=new sg,{ariaAnnounce:n,localeSvc:s,editModelSvc:r,gos:a}=e,l="fullRow"===a.get("editType"),d=dt(s)("ariaValidationErrorPrefix","Cell Editor Validation");for(const b of i){var c,u,h,p;const{ctrl:e,editor:t}=b,{rowNode:i,column:s}=e,r=null!==(c=null===(u=t.getValidationErrors)||void 0===u?void 0:u.call(t))&&void 0!==c?c:[],a=(null===(h=t.getValidationElement)||void 0===h?void 0:h.call(t,!1))||!(null!==(p=t.isPopup)&&void 0!==p&&p.call(t))&&e.eGui;if(a){const e=null!=r&&r.length>0,t=e?r.join(". "):"";z(a,e),e&&n.announceValue("".concat(d," ").concat(r),"editorValidation"),a instanceof HTMLInputElement?a.setCustomValidity(t):a.classList.toggle("invalid",e)}(null===r||void 0===r?void 0:r.length)>0&&o.setCellValidation({rowNode:i,column:s},{errorMessages:r})}wg(e,{persist:!1}),null===r||void 0===r||r.setCellValidationModel(o);const g=new Set;for(const{ctrl:b}of i)g.add(b.rowCtrl);if(l){const t=Eg(e);null===r||void 0===r||r.setRowValidationModel(t)}for(const b of g.values()){var v;null===(v=b.rowEditStyleFeature)||void 0===v||v.applyRowStyles();for(const e of b.getAllCellCtrls()){var m,f,C,w;null===(m=e.tooltipFeature)||void 0===m||m.refreshTooltip(!0),null===(f=e.editorTooltipFeature)||void 0===f||f.refreshTooltip(!0),null===(C=e.editStyleFeature)||void 0===C||null===(w=C.applyCellStyles)||void 0===w||w.call(C)}}}var Eg=e=>{var t;const i=new rg,o=e.gos.get("getFullRowEditValidationErrors"),n=null===(t=e.editModelSvc)||void 0===t?void 0:t.getEditMap();if(!n)return i;for(const a of n.keys()){var s;const e=n.get(a);if(!e)continue;const t=[],{rowIndex:l,rowPinned:d}=a;for(const i of e.keys()){var r;const o=e.get(i);if(!o)continue;const{editorValue:n,pendingValue:s,sourceValue:a}=o,c=null!==(r=null!==n&&void 0!==n?n:s===ug?void 0:s)&&void 0!==r?r:a;t.push({column:i,colId:i.getColId(),rowIndex:l,rowPinned:d,oldValue:a,newValue:c})}const c=null!==(s=null===o||void 0===o?void 0:o({editorsState:t}))&&void 0!==s?s:[];c.length>0&&i.setRowValidation({rowNode:a},{errorMessages:c})}return i};var Ag=class extends ht{constructor(e,t,i,o){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=o,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case us.ENTER:this.onEnterKeyDown(e);break;case us.F2:this.onF2KeyDown(e);break;case us.ESCAPE:this.onEscapeKeyDown(e);break;case us.TAB:this.onTabKeyDown(e);break;case us.BACKSPACE:case us.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case us.DOWN:case us.UP:case us.RIGHT:case us.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){var i;const{cellCtrl:o,beans:n}=this;if(null===(i=n.editSvc)||void 0===i||!i.isEditing(o,{withOpenEditor:!0})){if(e.shiftKey&&o.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{var s;const i=o.getFocusedCellPosition();null===(s=n.navigation)||void 0===s||s.navigateToNextCell(e,t,i,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:i}=this.beans;if(!t)return;const o=t.extendLatestRangeInDirection(e);o&&(e.key===us.LEFT||e.key===us.RIGHT?null===i||void 0===i||i.ensureColumnVisible(o.column):null===i||void 0===i||i.ensureRowVisible(o.rowIndex))}onTabKeyDown(e){var t;null===(t=this.beans.navigation)||void 0===t||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:o,rowNode:n}=this,{gos:s,rangeSvc:r,eventSvc:a,editSvc:l}=o;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),!function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===us.DELETE||!t&&e===us.BACKSPACE&&xs()}(e,s.get("enableCellEditingOnBackspace"))||null!==l&&void 0!==l&&l.isEditing(i,{withOpenEditor:!0})){if(null===l||void 0===l||!l.isEditing(i,{withOpenEditor:!0})){var d;null===(d=o.editSvc)||void 0===d||d.startEditing(i,{startedEdit:!0,event:t})}}else if(r&&zi(s))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const{column:e}=i,t=this.beans.valueSvc.getDeleteValue(e,n);n.setDataValue(e,t,"cellClear")}a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){const{cellCtrl:t,beans:i}=this,{editSvc:o,navigation:n}=i,s=null===o||void 0===o?void 0:o.isEditing(t,{withOpenEditor:!0}),r=t.rowNode,a=null===o||void 0===o?void 0:o.isRowEditing(r,{withOpenEditor:!0}),l=t=>{(null===o||void 0===o?void 0:o.startEditing(t,{startedEdit:!0,event:e,source:"edit"}))&&e.preventDefault()};if(s||a){var d;if(this.isCtrlEnter(e))return void(null===o||void 0===o||o.applyBulkEdit(t,(null===i||void 0===i||null===(d=i.rangeSvc)||void 0===d?void 0:d.getCellRanges())||[]));if(Dg(i),"block-stop"===(null===o||void 0===o?void 0:o.checkNavWithValidation(void 0,e)))return;null!==o&&void 0!==o&&o.isEditing(t,{withOpenEditor:!0})?null===o||void 0===o||o.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?null===o||void 0===o||o.stopEditing({rowNode:r},{event:e,source:"edit"}):l(t)}else if(i.gos.get("enterNavigatesVertically")){const i=e.shiftKey?us.UP:us.DOWN;null===n||void 0===n||n.navigateToNextCell(null,i,t.cellPosition,!1)}else{if(null!==o&&void 0!==o&&o.hasValidationErrors())return;null!==o&&void 0!==o&&o.hasValidationErrors(t)&&o.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===us.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;(null===i||void 0===i?void 0:i.isEditing())&&(Dg(this.beans),"block-stop"===(null===i||void 0===i?void 0:i.checkNavWithValidation(void 0,e)))||null===i||void 0===i||i.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;"block-stop"===(null===i||void 0===i?void 0:i.checkNavWithValidation(t,e))&&i.revertSingleCellEdit(t),setTimeout(()=>{null===i||void 0===i||i.stopEditing(t,{event:e,cancel:!0})})}processCharacter(e){const t=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:o}=this;if(t)return;if(null!==i&&void 0!==i&&i.isEditing(o,{withOpenEditor:!0}))return;if(e.key===us.SPACE)this.onSpaceKeyDown(e);else if(null!==i&&void 0!==i&&i.isCellEditable(o,"ui")){var n;if(null!==i&&void 0!==i&&i.hasValidationErrors()&&(null===i||void 0===i||!i.hasValidationErrors(o)))return;null===i||void 0===i||i.startEditing(o,{startedEdit:!0,event:e,source:"api"});const t=o.editCompDetails;!(null!==t&&void 0!==t&&null!==(n=t.params)&&void 0!==n&&n.suppressPreventDefault)&&e.preventDefault()}}onSpaceKeyDown(e){const{gos:t,editSvc:i}=this.beans,{rowNode:o}=this.cellCtrl;var n;null!==i&&void 0!==i&&i.isEditing(this.cellCtrl,{withOpenEditor:!0})||!gi(t)||(null===(n=this.beans.selectionSvc)||void 0===n||n.handleSelectionEvent(e,o,"spaceKey"));e.preventDefault()}},Mg=class extends ht{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!Ll(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){var t;if(null!==(t=this.beans.touchSvc)&&void 0!==t&&t.handleCellDoubleClick(this,e))return;const{eventSvc:i,rangeSvc:o,editSvc:n,editModelSvc:s,frameworkOverrides:r,gos:a}=this.beans,l=e.ctrlKey||e.metaKey,{cellCtrl:d}=this,{column:c,cellPosition:u,rowNode:h}=d,p=Ql(a,c,h,e);o&&l&&!p&&o.getCellRangeCount(u)>1&&o.intersectLastRange(!0);const g=d.createEvent(e,"cellClicked");g.isEventHandlingSuppressed=p,i.dispatchEvent(g);const v=c.getColDef();if(v.onCellClicked&&window.setTimeout(()=>{r.wrapOutgoing(()=>{v.onCellClicked(g)})},0),!p&&"editing"!==(null===s||void 0===s?void 0:s.getState(d))){var m,f;const t=null===n||void 0===n?void 0:n.isEditing(),i=null!==(m=null===s||void 0===s?void 0:s.getCellValidationModel().getCellValidationMap().size)&&void 0!==m?m:0,o=null!==(f=null===s||void 0===s?void 0:s.getRowValidationModel().getRowValidationMap().size)&&void 0!==f?f:0;if(t&&(i>0||o>0))return;null!==n&&void 0!==n&&n.shouldStartEditing(d,e)?null===n||void 0===n||n.startEditing(d,{event:e}):null!==n&&void 0!==n&&n.shouldStopEditing(d,e)&&("fullRow"===this.beans.gos.get("editType")?null===n||void 0===n||n.stopEditing(d,{event:e,source:"edit"}):null===n||void 0===n||n.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:o}=this,{eventSvc:n,frameworkOverrides:s,editSvc:r,editModelSvc:a,gos:l}=i,d=Ql(l,o.column,o.rowNode,e),c=t.getColDef(),u=o.createEvent(e,"cellDoubleClicked");if(u.isEventHandlingSuppressed=d,n.dispatchEvent(u),"function"===typeof c.onCellDoubleClicked&&window.setTimeout(()=>{s.wrapOutgoing(()=>{c.onCellDoubleClicked(u)})},0),!d&&null!==r&&void 0!==r&&r.shouldStartEditing(o,e)&&"editing"!==(null===a||void 0===a?void 0:a.getState(o))){var h,p;const t=null===r||void 0===r?void 0:r.isEditing(),i=null!==(h=null===a||void 0===a?void 0:a.getCellValidationModel().getCellValidationMap().size)&&void 0!==h?h:0,n=null!==(p=null===a||void 0===a?void 0:a.getRowValidationModel().getRowValidationMap().size)&&void 0!==p?p:0;if(t&&(i>0||n>0))return;null===r||void 0===r||r.startEditing(o,{event:e})}}onMouseDown(e){const{shiftKey:t}=e,i=e.target,{cellCtrl:o,beans:n}=this,{eventSvc:s,rangeSvc:r,rowNumbersSvc:a,focusSvc:l,gos:d,editSvc:c}=n,{column:u,rowNode:h,cellPosition:p}=o,g=Ql(d,u,h,e),v=()=>{const t=o.createEvent(e,"cellMouseDown");t.isEventHandlingSuppressed=g,s.dispatchEvent(t)};if(g)return void v();if(this.isRightClickInExistingRange(e))return;const m=r&&!r.isEmpty(),f=this.containsWidget(i),C=Uo(u);if(!a||!C||a.handleMouseDownOnCell(p,e)){if(!t||!m){const t=null===c||void 0===c?void 0:c.isEditing(o),n=d.get("enableCellTextSelection")&&e.defaultPrevented,s=(ys()||n)&&!t&&!he(i)&&!f;o.focusCell(s,e)}if(t&&m&&!l.isCellFocused(p)){e.preventDefault();const t=l.getFocusedCell();if(t){const{column:i,rowIndex:o,rowPinned:n}=t;null!==c&&void 0!==c&&c.isEditing(t)&&(null===c||void 0===c||c.stopEditing(t)),l.setFocusedCell({column:i,rowIndex:o,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}f||(null===r||void 0===r||r.handleCellMouseDown(e,p),v())}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.cellPosition),o=so(this.beans,e);if(i&&o)return!0}return!1}containsWidget(e){return me(e,"ag-selection-checkbox",3)||me(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),null===i||void 0===i||i.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),null===i||void 0===i||i.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,i=t.contains(e.target),o=t.contains(e.relatedTarget);return i&&o}},Tg=class extends ht{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();null!=t&&(this.eContent.style.height="".concat(t,"px"))}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();Eo(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width="".concat(e,"px")}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,i=e.getColSpan(t),o=[];if(1===i)o.push(e);else{let t=e;const n=e.getPinned();for(let e=0;t&&e<i&&(o.push(t),t=this.beans.visibleCols.getColAfter(t),t&&!m(t))&&n===t.getPinned();e++);}return o}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?Do(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||"left"===this.column.getPinned())return e;const{visibleCols:t}=this.beans,i=t.getColsLeftWidth();if("right"===this.column.getPinned()){return i+t.bodyWidth+(e||0)}return i+(e||0)}_legacyApplyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=Ci(this.beans)*this.rowSpan;this.eContent.style.height="".concat(t,"px"),this.eContent.style.zIndex="1"}destroy(){super.destroy()}},kg=0,Ig=class extends ht{constructor(e,t,i,o){super(),this.column=e,this.rowNode=t,this.rowCtrl=o,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.formulaTooltipFeature=void 0,this.beans=i,this.gos=i.gos,this.editSvc=i.editSvc,this.hasEdit=!!i.editSvc;const{colId:n}=e;this.instanceId=n+"-"+kg++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var e,t;const{beans:i}=this;this.positionFeature=new Tg(this,i),this.customStyleFeature=null===(e=i.cellStyles)||void 0===e?void 0:e.createCellCustomStyleFeature(this),this.editStyleFeature=null===(t=i.editSvc)||void 0===t?void 0:t.createCellStyleFeature(this),this.mouseListener=new Mg(this,i,this.column),this.keyboardListener=new Ag(this,i,this.rowNode,this.rowCtrl),this.enableTooltipFeature(),this.enableFormulaTooltipFeature();const{rangeSvc:o}=i;o&&zi(i.gos)&&(this.rangeFeature=o.createCellRangeFeature(this)),Uo(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature(),this.disableFormulaTooltipFeature()}enableTooltipFeature(e,t){var i;this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.enableCellTooltipFeature(this,e,t)}enableFormulaTooltipFeature(){var e;this.formulaTooltipFeature=null===(e=this.beans.tooltipSvc)||void 0===e?void 0:e.setupFormulaTooltip(this)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}disableFormulaTooltipFeature(){this.formulaTooltipFeature=this.beans.context.destroyBean(this.formulaTooltipFeature)}enableEditorTooltipFeature(e){var t;this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=null===(t=this.beans.tooltipSvc)||void 0===t?void 0:t.setupCellEditorTooltip(this,e),Dg(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,i,o,n,s,r){var a,l,d,c,u,h,p,g,v;(this.comp=e,this.eGui=t,this.printLayout=n,null!==r&&void 0!==r||(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(o,r),this.refreshFirstAndLastStyles(),this.checkFormulaError(),this.refreshAriaColIndex(),null===(a=this.positionFeature)||void 0===a||a.init(),null===(l=this.customStyleFeature)||void 0===l||l.setComp(e),null===(d=this.editStyleFeature)||void 0===d||d.setComp(e),null===(c=this.tooltipFeature)||void 0===c||c.refreshTooltip(),null===(u=this.keyboardListener)||void 0===u||u.init(),null===(h=this.rangeFeature)||void 0===h||h.setComp(e),null===(p=this.rowResizeFeature)||void 0===p||p.refreshRowResizer(),s&&this.isCellEditable()||this.hasEdit&&null!==(g=this.editSvc)&&void 0!==g&&g.isEditing(this,{withOpenEditor:!0}))?null===(v=this.editSvc)||void 0===v||v.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0);if(this.onCompAttachedFuncs.length){for(const e of this.onCompAttachedFuncs)e();this.onCompAttachedFuncs=[]}}checkFormulaError(){var e,t;const i=!(null===(e=this.beans.formula)||void 0===e||!e.getFormulaError(this.column,this.rowNode));this.eGui.classList.toggle("formula-error",i),null===(t=this.formulaTooltipFeature)||void 0===t||t.refreshTooltip(),i?this.disableTooltipFeature():this.enableTooltipFeature()}setupAutoHeight(e,t){var i,o;this.isAutoHeight=null!==(i=null===(o=this.beans.rowAutoHeight)||void 0===o?void 0:o.setupCellAutoHeight(this,e,t))&&void 0!==i&&i}getCellAriaRole(){var e;return null!==(e=this.column.getColDef().cellAriaRole)&&void 0!==e?e:"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){var e;return null!==(e=this.valueFormatted)&&void 0!==e?e:this.value}getDeferLoadingCellRenderer(){var e;const{beans:t,column:i}=this,{userCompFactory:o,ctrlsSvc:n,eventSvc:s}=t,r=i.getColDef(),a=this.createCellRendererParams();a.deferRender=!0;const l=os(o,r,a);if(null!==(e=n.getGridBodyCtrl())&&void 0!==e&&null!==(e=e.scrollFeature)&&void 0!==e&&e.isScrolling()){let e;const t=new Ln(t=>{e=t}),[i]=this.addManagedListeners(s,{bodyScrollEnd:()=>{e(),i()}});return{loadingComp:l,onReady:t}}return{loadingComp:l,onReady:Ln.resolve()}}showValue(e,t){var i,o,s,r;const{beans:a,column:l,rowNode:d,rangeFeature:c}=this,{userCompFactory:u}=a;let h,p=this.getValueToDisplay();const g=d.stub&&null==(null===(i=d.groupData)||void 0===i?void 0:i[l.getId()]),v=l.getColDef();if(g||this.isCellRenderer()){const e=this.createCellRendererParams();h=!g||Uo(l)?ts(u,v,e):os(u,v,e)}if(!h&&!g&&null!==(o=a.findSvc)&&void 0!==o&&o.isMatch(d,l)){const e=this.createCellRendererParams();h=ts(u,(0,n.A)((0,n.A)({},l.getColDef()),{},{cellRenderer:"agFindCellRenderer"}),e)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(d,{checkSiblings:!0})){const e=this.editSvc.prepDetailsDuringBatch(this,{compDetails:h,valueToDisplay:p});e&&(e.compDetails?h=e.compDetails:e.valueToDisplay&&(p=e.valueToDisplay))}this.comp.setRenderDetails(h,p,e),null===(s=this.customRowDragComp)||void 0===s||s.refreshVisibility(),!t&&c&&je(a,()=>null===c||void 0===c?void 0:c.refreshHandle()),null===(r=this.rowResizeFeature)||void 0===r||r.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){let e="";return"agCheckboxCellRenderer"===this.column.getColDef().cellRenderer&&(e=" ag-allow-overflow"),"".concat("ag-cell-value").concat(e)}isIncludeControl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null==this.rowNode.rowPinned||t&&cu(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:i}=this.beans.gridOptions,o=Oi(t),n=Wo(this.column);return("custom"!==i||"selectionColumn"===o||!n)&&(e.checkboxSelection||n&&"object"===typeof t&&Li(t))}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),o=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return t||i||o||n}onPopupEditorClosed(){const{editSvc:e}=this.beans;null!==e&&void 0!==e&&e.isEditing(this,{withOpenEditor:!0})&&(null===e||void 0===e||e.stopEditing(this,{source:null!==e&&void 0!==e&&e.isBatchEditing()?"ui":"api"}))}stopEditing(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{editSvc:i}=this.beans;return null!==(e=null===i||void 0===i?void 0:i.stopEditing(this,{cancel:t,source:null!==i&&void 0!==i&&i.isBatchEditing()?"ui":"api"}))&&void 0!==e&&e}createCellRendererParams(){const{value:e,valueFormatted:t,column:i,rowNode:o,comp:n,eGui:s,beans:{valueSvc:r,gos:a,editSvc:l}}=this;return oo(a,{value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay({column:i,node:o}).value,setValue:e=>(null===l||void 0===l?void 0:l.setDataValue({rowNode:o,column:i},e))||o.setDataValue(i,e),formatValue:this.formatValue.bind(this),data:o.data,node:o,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:s,eParentOfValue:n.getParentOfValue(),registerRowDragger:(e,t,i,o)=>this.registerRowDragger(e,t,o),setTooltip:(e,t)=>{var i;a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),null===(i=this.tooltipFeature)||void 0===i||i.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?null===(t=this.rowCtrl)||void 0===t||t.recreateCell(this):this.refreshCell(e);if(this.hasEdit&&this.editCompDetails){const{editSvc:e,comp:t}=this;null!==t&&void 0!==t&&t.getCellEditor()||!e.isEditing(this,{withOpenEditor:!0})||e.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell(){let{force:e,suppressFlash:t,newData:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{editStyleFeature:o,customStyleFeature:n,rowCtrl:{rowEditStyleFeature:s},beans:{cellFlashSvc:r,filterManager:a},column:l,comp:d,suppressRefreshCell:c,tooltipFeature:u}=this;if(c)return;const{field:h,valueGetter:p,showRowGroup:g,enableCellChangeFlash:v}=l.getColDef(),m=e||null==h&&null==p&&null==g||i,f=!!d,C=this.updateAndFormatValue(f);if(f){if(m||C){var w;this.showValue(!!i,!1);const e=null===a||void 0===a?void 0:a.isSuppressFlashingCellsBecauseFiltering();!t&&!e&&v&&(null===r||void 0===r||r.flashCell(this)),null===o||void 0===o||null===(w=o.applyCellStyles)||void 0===w||w.call(o),null===n||void 0===n||n.applyUserStyles(),null===n||void 0===n||n.applyClassesFromColDef(),null===s||void 0===s||s.applyRowStyles(),this.checkFormulaError()}null===u||void 0===u||u.refreshTooltip(),null===n||void 0===n||n.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){var t;return null!==(t=this.callValueFormatter(e))&&void 0!==t?t:e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted,{value:o,valueFormatted:n}=this.beans.valueSvc.getValueForDisplay({column:this.column,node:this.rowNode,includeValueFormatted:!0});return this.value=o,this.valueFormatted=n,!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i)}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){const t=this.eGui;yi(this.beans.gos,t,Zl,this),e.addDestroyFunc(()=>yi(this.beans.gos,t,Zl,null))}createEvent(e,t){const{rowNode:i,column:o,value:n,beans:s}=this;return function(e,t,i,o,n){let{rowNode:s,column:r}=o;return oo(e.gos,{type:i,node:s,data:s.data,value:n,column:r,colDef:r.getColDef(),rowPinned:s.rowPinned,event:t,rowIndex:s.rowIndex})}(s,e,t,{rowNode:i,column:o},n)}processCharacter(e){var t;null===(t=this.keyboardListener)||void 0===t||t.processCharacter(e)}onKeyDown(e){var t;null===(t=this.keyboardListener)||void 0===t||t.onKeyDown(e)}onMouseEvent(e,t){var i;null===(i=this.mouseListener)||void 0===i||i.onMouseEvent(e,t)}getColSpanningList(){var e,t;return null!==(e=null===(t=this.positionFeature)||void 0===t?void 0:t.getColSpanningList())&&void 0!==e?e:[]}onLeftChanged(){var e;this.comp&&(null===(e=this.positionFeature)||void 0===e||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;zd(e,t,i.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);J(this.eGui,e)}onWidthChanged(){var e;return null===(e=this.positionFeature)||void 0===e?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&(null===(e=this.rangeFeature)||void 0===e||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&(null===(e=this.rangeFeature)||void 0===e||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return null!=this.rangeFeature}focusCell(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0;const o=null===(e=this.editSvc)||void 0===e?void 0:e.allowedFocusTargetOnValidation(this);o&&o!==this||this.beans.focusSvc.setFocusedCell((0,n.A)((0,n.A)({},this.getFocusedCellPosition()),{},{forceBrowserFocus:t,sourceEvent:i}))}restoreFocus(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{beans:{editSvc:t,focusSvc:i},comp:o}=this;if(!o||null!==t&&void 0!==t&&t.isEditing(this)||!this.isCellFocused()||!i.shouldTakeFocus())return;const n=()=>{if(!this.isAlive())return;const e=o.getFocusableElement();this.isCellFocused()&&e.focus({preventScroll:!0})};e?setTimeout(n,0):n()}onRowIndexChanged(){var e,t;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),null===(e=this.rangeFeature)||void 0===e||e.onCellSelectionChanged(),null===(t=this.rowResizeFeature)||void 0===t||t.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(Uo(this.column)&&(e=!0),We(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss("ag-cell-last-left-pinned",e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){var e;this.restoreFocus(!0),this.onCellFocused(null!==(e=this.focusEventWhileNotReady)&&void 0!==e?e:void 0)}onCellFocused(e){var t,i;const{beans:o}=this;if(nc(o))return;if(!this.comp)return void(e&&(this.focusEventWhileNotReady=e));const n=this.isCellFocused(),s=null!==(t=null===(i=o.editSvc)||void 0===i?void 0:i.isEditing(this))&&void 0!==t&&t;if(this.comp.toggleCss("ag-cell-focus",n),n&&null!==e&&void 0!==e&&e.forceBrowserFocus){let t=this.comp.getFocusableElement();if(s){const e=Is(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}n&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:g(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss("ag-cell",!0),e.toggleCss("ag-cell-not-inline-editing",!0);const t=1==this.column.isAutoHeight();e.toggleCss("ag-cell-auto-height",t),e.toggleCss("ag-cell-normal-height",!t)}onColumnHover(){var e;null===(e=this.beans.colHover)||void 0===e||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e,t;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),null!==(e=this.editSvc)&&void 0!==e&&e.isEditing(this)?null===(t=this.editSvc)||void 0===t||t.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=1==this.column.getColDef().wrapText;this.comp.toggleCss("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:o}=this;o.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout(()=>{o.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(i)})},0)}getCellRenderer(){var e,t;return null!==(e=null===(t=this.comp)||void 0===t?void 0:t.getCellRenderer())&&void 0!==e?e:null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var e,t;return null!==(e=null===(t=this.eGui)||void 0===t?void 0:t.contains(P(this.beans)))&&void 0!==e&&e}createSelectionCheckbox(){var e;const t=null===(e=this.beans.selectionSvc)||void 0===e?void 0:e.createCheckboxSelectionComponent();if(t)return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const o=this.createRowDragComp(e,t,i);o&&(this.customRowDragComp=o,this.addDestroyFunc(()=>{this.beans.context.destroyBean(o),this.customRowDragComp=null}),o.refreshVisibility())}createRowDragComp(e,t,i){var o;const n=null===(o=this.beans.rowDragSvc)||void 0===o?void 0:o.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,i);if(n)return this.beans.context.createBean(n),n}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function Lg(e,t,i,o,n,s){if(null==i&&null==t)return;const r={},a={},l=(e,t)=>{for(const i of e.split(" "))""!=i.trim()&&t(i)};if(i){const t=Object.keys(i);for(let n=0;n<t.length;n++){const s=t[n],d=i[s];let c;"string"===typeof d?c=!e||e.evaluate(d,o):"function"===typeof d&&(c=d(o)),l(s,e=>{c?r[e]=!0:a[e]=!0})}}if(t&&s)for(const d of Object.keys(t))l(d,e=>{r[e]||(a[e]=!0)});s&&Object.keys(a).forEach(s),Object.keys(r).forEach(n)}function Ng(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var Og=0,Gg=class extends ht{constructor(e,t,i,o,n){var s,r,a;super(),this.rowNode=e,this.useAnimationFrameForCreate=o,this.printLayout=n,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=null!==(s=null===(r=t.pagination)||void 0===r?void 0:r.getCurrentPage())&&void 0!==s?s:0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+Og++,this.rowId=x(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=Ng(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=null===(a=t.editSvc)||void 0===a?void 0:a.createRowStyleFeature(this),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!==typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=x(e)}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,o){var n;const{context:s,focusSvc:r}=this.beans,a={rowComp:e,element:t,containerType:i,compBean:o=Rn(this,s,o)};this.allRowGuis.push(a),this.updateGui(i,a),this.initialiseRowComp(a);const l=this.rowNode,d="FullWidthLoading"===this.rowType||l.stub,c=!l.data&&"infinite"===this.beans.rowModel.getType();d||c||l.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const u=null===(n=this.fullWidthGui)||void 0===n?void 0:n.element;if(u){var h;!(null===(h=this.beans.editSvc)||void 0===h?void 0:h.isEditing(this))&&r.isRowFocused(l.rowIndex,l.rowPinned)&&r.shouldTakeFocus()&&setTimeout(()=>u.focus({preventScroll:!0}),0)}}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const i of this.allRowGuis)i.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),gi(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=e.rowComp,o=this.getInitialRowClasses(e.containerType);for(const n of o)i.toggleCss(n,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&K(e.element,1==this.rowNode.expanded),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),yi(t,e.element,ed,this),e.compBean.addDestroyFunc(()=>yi(t,e.element,ed,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKey&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=x(this.rowNode.id);this.rowId=t,null!=t&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(ft(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&(ft(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var t;const i=null===(t=this.beans.rowDragSvc)||void 0===t?void 0:t.createRowDragCompForRow(this.rowNode,e.element);if(!i)return;const o=this.createBean(i,this.beans.context);this.rowDragComps.push(o),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(e=>e!==o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(o,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){var e;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>{var t;return null===e||void 0===e||null===(t=e.rowComp)||void 0===t?void 0:t.getFullWidthCellRenderer()}):[null===(e=this.fullWidthGui)||void 0===e||null===(e=e.rowComp)||void 0===e?void 0:e.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:o}}=this,n=!!e||!o.isPinningLeft(),s=!!t,r=!!i||!o.isPinningRight();return n&&s&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const{rowNode:e,gos:t,beans:{colModel:i}}=this,o=e.stub&&!t.get("suppressServerSideFullWidthLoadingRow")&&!t.get("groupHideOpenParents"),n=this.isNodeFullWidthCell(),s=t.get("masterDetail")&&e.detail,r=Mi(t,e,i.isPivotMode());this.rowType=o?"FullWidthLoading":s?"FullWidthDetail":n?"FullWidth":r?"FullWidthGroup":"Normal"}updateColumnLists(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isFullWidth())return;const{animationFrameSvc:i}=this.beans;null!==i&&void 0!==i&&i.active&&!e&&!this.printLayout?this.updateColumnListsPending||(i.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0):this.updateColumnListsImpl(t)}getNewCellCtrl(e){var t;if(!(null===(t=this.beans.rowSpanSvc)||void 0===t?void 0:t.isCellSpanning(e,this.rowNode)))return new Ig(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){var t;return!(null!==(t=this.beans.rowSpanSvc)&&void 0!==t&&t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o={list:[],map:{}},n=(e,t,i)=>{null!=i?o.list.splice(i,0,t):o.list.push(t),o.map[e]=t},s=[];for(const d of t){const t=d.getInstanceId();let i=e.map[t];i&&!this.isCorrectCtrlForSpan(i)&&(i.destroy(),i=void 0),i||(i=this.getNewCellCtrl(d)),i&&n(t,i)}for(const d of e.list){const e=d.column.getInstanceId();if(null!=o.map[e])continue;!this.isCellEligibleToBeRemoved(d,i)?s.push([e,d]):d.destroy()}if(s.length)for(const[d,c]of s){const e=o.list.findIndex(e=>e.column.getLeft()>c.column.getLeft()),t=-1===e?void 0:Math.max(e-1,0);n(d,c,t)}const{focusSvc:r,visibleCols:a}=this.beans,l=r.getFocusedCell();if(l&&l.column.getPinned()==i){const e=l.column.getInstanceId();if(!o.map[e]&&a.allCols.includes(l.column)){const t=this.createFocusedCellCtrl();if(t){const i=o.list.findIndex(e=>e.column.getLeft()>t.column.getLeft()),s=-1===i?void 0:Math.max(i-1,0);n(e,t,s)}}}return o}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,i=e.getFocusedCell();if(!i)return;const o=null===t||void 0===t?void 0:t.getCellSpan(i.column,this.rowNode);if(o){if(o.firstNode!==this.rowNode||!o.doesSpanContain(i))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(i.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const o=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,o,"left");const n=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0,{column:o}=e;if(o.getPinned()!=t)return i;if(!this.isCorrectCtrlForSpan(e))return i;const{visibleCols:n,editSvc:s}=this.beans,r=null===s||void 0===s?void 0:s.isEditing(e),a=e.isCellFocused();if(r||a){return!(n.allCols.indexOf(o)>=0)&&i}return i}getDomOrder(){return this.gos.get("ensureDomOrder")||pi(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],()=>{e.rowComp.setDomOrder(this.getDomOrder())})}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=v(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,o=i.isPinningLeft(),n=i.isPinningRight();if(t){const{slideInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=o,e.right=n}else{const{fadeInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(e.fullWidth=!0);e.center=!0,e.left=o,e.right=n}}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(e.element,t).params),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),o=e(this.leftGui,"left"),n=e(this.rightGui,"right");return t&&i&&o&&n}addListeners(){var e;const{beans:t,gos:i,rowNode:o}=this,{expansionSvc:s,eventSvc:r,context:a,rowSpanSvc:l}=t;this.addManagedListeners(this.rowNode,(0,n.A)({heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this)},null!==(e=null===s||void 0===s?void 0:s.getRowExpandedListeners(this))&&void 0!==e?e:{})),o.detail&&this.addManagedListeners(o.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(o,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(r,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),l&&this.addManagedListeners(l,{spannedCellsUpdated:e=>{let{pinned:t}=e;t&&!o.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,a),this.tooltipFeature=this.destroyBean(this.tooltipFeature,a),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,a)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(i.get("rowDragEntireRow"))for(const e of this.allRowGuis)this.addRowDraggerToRow(e);else this.rowDragComps=this.destroyBeans(this.rowDragComps,a)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else{if(this.isFullWidth()){return void(this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode))}for(const t of this.getAllCellCtrls())t.refreshCell(e);for(const e of this.allRowGuis)this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp);this.onRowSelected(),this.postProcessCss()}}postProcessCss(){var e;this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),null===(e=this.rowEditStyleFeature)||void 0===e||e.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=(null===e||void 0===e?void 0:e.row)===this.rowNode?e.position:"none",i="above"===t,o="inside"===t,n="below"===t,s="none"!==t,r=i||n,a=this.rowNode.uiLevel,l=r&&a>0,d=l?a.toString():"0";for(const c of this.allRowGuis){const e=c.rowComp;e.toggleCss("ag-row-highlight-above",i),e.toggleCss("ag-row-highlight-inside",o),e.toggleCss("ag-row-highlight-below",n),e.toggleCss("ag-row-highlight-indent",l),s?c.element.style.setProperty("--ag-row-highlight-level",d):c.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),null===(e=this.beans.rowAutoHeight)||void 0===e||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:g(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){var t;const i=this.findFullWidthInfoForEvent(e);if(!i)return;const{rowGui:o,column:n}=i;if(!(o.element===e.target))return;const s=this.rowNode,{focusSvc:r,navigation:a}=this.beans,l=r.getFocusedCell(),d={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:null!==(t=null===l||void 0===l?void 0:l.column)&&void 0!==t?t:n};null===a||void 0===a||a.navigateToNextCell(e,e.key,d,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||Ll(e))return;const t=this.allRowGuis.find(t=>t.element.contains(e.target)),i=t?t.element:null,o=i===e.target,n=P(this.beans);let s=!1;i&&n&&(s=i.contains(n)&&n.classList.contains("ag-cell"));let r=null;var a;(o||s||(r=Ns(this.beans,i,!1,e.shiftKey)),this.isFullWidth()&&o||!r)&&(null===(a=this.beans.navigation)||void 0===a||a.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;const t=null===(e=this.allRowGuis.find(e=>Ee(e.element)))||void 0===e?void 0:e.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const i of this.allRowGuis)We(i.element,"tabindex",t)}onFullWidthRowFocused(e){const t=this.rowNode,i=!!e&&(this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned);let o;if(this.fullWidthGui)o=this.fullWidthGui.element;else{const t=this.beans.colModel.getCol(null===e||void 0===e?void 0:e.column),i=null===t||void 0===t?void 0:t.pinned;var n,s,r;if(i)o="right"===i?null===(n=this.rightGui)||void 0===n?void 0:n.element:null===(s=this.leftGui)||void 0===s?void 0:s.element;else o=null===(r=this.centerGui)||void 0===r?void 0:r.element}o&&(o.classList.toggle("ag-full-width-focus",i),i&&null!==e&&void 0!==e&&e.forceBrowserFocus&&o.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};for(const o of e.list)o!==t&&(i.list.push(o),i.map[o.column.getInstanceId()]=o);return i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){const{rowNode:i}=this;return oo(this.gos,{type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){if(Ll(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),i=this.getColumnForFullWidth(t);return t&&i?{rowGui:t,column:i}:void 0}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(null===e||void 0===e?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=me(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:i}=this.beans;null===t||void 0===t||t.removeAllCellRanges();const o=this.findFullWidthInfoForEvent(e);if(!o)return;const{rowGui:n,column:s}=o,r=n.element,a=e.target,l=this.rowNode;let d=e.defaultPrevented||ys();r&&r.contains(a)&&he(a)&&(d=!1),i.setFocusedCell({rowIndex:l.rowIndex,column:s,rowPinned:l.rowPinned,forceBrowserFocus:d})}isSuppressMouseEvent(e){const{gos:t,rowNode:i}=this;if(this.isFullWidth()){const o=this.findFullWidthRowGui(e.target);return function(e,t,i,o){return Xl(e,void 0,i,o,null===t||void 0===t?void 0:t.suppressMouseEventHandling)}(t,null===o||void 0===o?void 0:o.rowComp.getFullWidthCellRendererParams(),i,e)}const o=Jl(t,e.target);return null!=o&&Ql(t,o.column,i,e)}onRowClick(e){if(Ll(e)||this.lastMouseDownOnDragger)return;const t=this.isSuppressMouseEvent(e),{eventSvc:i,selectionSvc:o}=this.beans,n=this.createRowEventWithSource("rowClicked",e);n.isEventHandlingSuppressed=t,i.dispatchEvent(n),t||null===o||void 0===o||o.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){var t;"FullWidthDetail"===this.rowType&&(null===(t=this.beans.masterDetailSvc)||void 0===t||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:i,rowNode:o}=this,n=oo(i,{fullWidth:!0,data:o.data,node:o,value:o.key,valueFormatted:o.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,o)=>this.addFullWidthRowDragging(e,t,i,o),setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(e,t)}}),s=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return function(e,t){return e.getCompDetailsFromGridOptions(Jn,"agDetailCellRenderer",t,!0)}(s,n);case"FullWidthGroup":{const{value:e,valueFormatted:t}=this.beans.valueSvc.getValueForDisplay({node:this.rowNode,includeValueFormatted:!0});return n.value=e,n.valueFormatted=t,function(e,t){return e.getCompDetailsFromGridOptions(Zn,"agGroupRowRenderer",t,!0)}(s,n)}case"FullWidthLoading":return function(e,t){return e.getCompDetailsFromGridOptions($n,"agLoadingCellRenderer",t,!0)}(s,n);default:return function(e,t){return e.getCompDetailsFromGridOptions(Xn,void 0,t,!0)}(s,n)}}setupFullWidthRowTooltip(e,t){var i;this.fullWidthGui&&(this.tooltipFeature=null===(i=this.beans.tooltipSvc)||void 0===i?void 0:i.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0;const{rowDragSvc:n,context:s}=this.beans;if(!n||!this.isFullWidth())return;const r=n.createRowDragComp(()=>i,this.rowNode,void 0,e,t,o);this.createBean(r,s),this.addDestroyFunc(()=>{this.destroyBean(r,s)})}onUiLevelChanged(){const e=Ng(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;for(const e of this.allRowGuis)e.rowComp.toggleCss(t,!0),e.rowComp.toggleCss(i,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var e;const t=[];if(null===(e=this.beans.rowStyleSvc)||void 0===e||e.processClassesFromGridOptions(t,this.rowNode),t.length)for(const i of t)for(const e of this.allRowGuis)e.rowComp.toggleCss(i,!0)}postProcessRowClassRules(){var e;null===(e=this.beans.rowStyleSvc)||void 0===e||e.processRowClassRules(this.rowNode,e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,e=>e.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){var t;const i=this.getPinnedForContainer(e),o=this.isFullWidth(),{rowNode:n,beans:s}=this,r=[];var a;(r.push("ag-row"),r.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&r.push("ag-opacity-zero"),r.push(n.rowIndex%2===0?"ag-row-even":"ag-row-odd"),n.isRowPinned())&&(r.push("ag-row-pinned"),null!==(a=s.pinnedRowModel)&&void 0!==a&&a.isManual()&&r.push("ag-row-pinned-manual"));!n.isRowPinned()&&n.pinnedSibling&&r.push("ag-row-pinned-source"),n.isSelected()&&r.push("ag-row-selected"),n.footer&&r.push("ag-row-footer"),r.push("ag-row-level-"+this.rowLevel),n.stub&&r.push("ag-row-loading"),o&&r.push("ag-full-width-row"),null===(t=s.expansionSvc)||void 0===t||t.addExpandedCss(r,n),n.dragging&&r.push("ag-row-dragging");const{rowStyleSvc:l}=s;return l&&(l.processClassesFromGridOptions(r,n),l.preProcessRowClassRules(r,n)),r.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&r.push("ag-row-first"),this.isLastRowOnPage()&&r.push("ag-row-last"),o&&("left"===i&&r.push("ag-cell-last-left-pinned"),"right"===i&&r.push("ag-cell-first-right-pinned")),r}processStylesFromGridOptions(){var e,t;return null!==(e=null===(t=this.beans.rowStyleSvc)||void 0===t?void 0:t.processStylesFromGridOptions(this.rowNode))&&void 0!==e?e:this.emptyStyle}onRowSelected(e){var t;null===(t=this.beans.selectionSvc)||void 0===t||t.onRowCtrlSelected(this,e=>{e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()},e)}announceDescription(){var e;null===(e=this.beans.selectionSvc)||void 0===e||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:o,beans:n,gos:s}=this;i.addManagedListeners(t,{pointerenter:e=>{"mouse"===e.pointerType&&o.dispatchRowEvent("mouseEnter")},pointerleave:e=>{"mouse"===e.pointerType&&o.dispatchRowEvent("mouseLeave")}}),i.addManagedListeners(o,{mouseEnter:()=>{var e;null!==(e=n.dragSvc)&&void 0!==e&&e.dragging||s.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),o.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(e=>e.element);for(const i of t)i.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,o=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),o)}forEachGui(e,t){if(e)t(e);else for(const i of this.allRowGuis)t(i)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),o=vi(this.gos)?fi(this.beans,this.rowNode).height:void 0,n=o?"".concat(Math.min(i,o)-2,"px"):void 0;this.forEachGui(e,e=>{e.element.style.height="".concat(t,"px"),n&&e.element.style.setProperty("--ag-line-height",n)})}destroyFirstPass(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.active=!1;const{rowNode:i}=this;if(!t&&Si(this.gos)&&!i.sticky){if(null!=i.rowTop){const e=this.roundRowTopToBounds(i.rowTop);this.setRowTop(e)}else for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-opacity-zero",!0)}null!==(e=this.fullWidthGui)&&void 0!==e&&e.element.contains(P(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),i.setHovered(!1);const o=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(o),this.beans.eventSvc.dispatchEvent(o),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=e=>{for(const t of e.list)t.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,e=>{e.rowComp.toggleCss("ag-row-focus",this.rowFocused),e.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){var e,t;const i=null!==(e=null===(t=this.beans.pagination)||void 0===t?void 0:t.getCurrentPage())&&void 0!==e?e:0;this.paginationPage!==i&&(this.paginationPage=i,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.pageBounds.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&v(e)){const t=this.applyPaginationOffset(e),i=this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t),o="".concat(i,"px");this.setRowTopStyle(o)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:"translateY(".concat(this.getInitialRowTopShared(e),")")}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(t.sticky)i=t.stickyRowTop;else{const o=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,n=this.applyPaginationOffset(o);i=t.isRowPinned()?n:this.beans.rowContainerHeight.getRealPixelPosition(n)}return i+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform("translateY(".concat(e,")"))}getCellCtrl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;for(const o of this.getAllCellCtrls())o.column==e&&(i=o);if(null!=i||t)return i;for(const o of this.getAllCellCtrls())(null===o||void 0===o?void 0:o.getColSpanningList().indexOf(e))>=0&&(i=o);return i}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var t,i,o,n;const s=this.rowNode.getRowIndexString();if(null===s)return;const r=(null!==(t=null===(i=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())||void 0===i?void 0:i.getRowCount())&&void 0!==t?t:0)+(null!==(o=null===(n=this.beans.filterManager)||void 0===n?void 0:n.getHeaderRowCount())&&void 0!==o?o:0),a=this.rowNode.rowIndex%2===0,l=r+this.rowNode.rowIndex+1;this.forEachGui(e,e=>{e.rowComp.setRowIndex(s),e.rowComp.toggleCss("ag-row-even",a),e.rowComp.toggleCss("ag-row-odd",!a),$(e.element,l)})}};function Bg(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var Vg={moduleName:"KeyboardNavigation",version:Kt,beans:[class extends ht{constructor(){super(),this.beanName="navigation",this.onPageDown=wt(this.onPageDown,100),this.onPageUp=wt(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,o=e.altKey,n=e.ctrlKey||e.metaKey,s=!!this.beans.rangeSvc&&e.shiftKey,r=Md(this.gos,e);let a=!1;switch(i){case us.PAGE_HOME:case us.PAGE_END:n||o||(this.onHomeOrEndKey(i),a=!0);break;case us.LEFT:case us.RIGHT:case us.UP:case us.DOWN:if(!r)return!1;!n||o||s||(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case us.PAGE_DOWN:case us.PAGE_UP:n||o||(a=this.handlePageUpDown(i,r,t))}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),!!t&&(e===us.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){let{scrollIndex:t,scrollType:i,scrollColumn:o,focusIndex:n,focusColumn:s,isAsync:r,rowPinned:a}=e;const{scrollFeature:l}=this.gridBodyCon;v(o)&&!o.isPinned()&&l.ensureColumnVisible(o),v(t)&&l.ensureIndexVisible(t,i),r||l.ensureIndexVisible(n);const{focusSvc:d,rangeSvc:c}=this.beans;d.setFocusedCell({rowIndex:n,column:s,rowPinned:a,forceBrowserFocus:!0}),null===c||void 0===c||c.setRangeToCell({rowIndex:n,rowPinned:a,column:s})}onPageDown(e){const t=this.beans,i=Bg(t),o=this.getViewportHeight(),{pageBounds:n,rowModel:s,rowAutoHeight:r}=t,a=n.getPixelOffset(),l=i.top+o,d=s.getRowIndexAtPixel(l+a);null!==r&&void 0!==r&&r.active?this.navigateToNextPageWithAutoHeight(e,d):this.navigateToNextPage(e,d)}onPageUp(e){const t=this.beans,i=Bg(t),{pageBounds:o,rowModel:n,rowAutoHeight:s}=t,r=o.getPixelOffset(),a=i.top,l=n.getRowIndexAtPixel(a+r);null!==s&&void 0!==s&&s.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{pageBounds:o,rowModel:n}=this.beans,s=this.getViewportHeight(),r=o.getFirstRow(),a=o.getLastRow(),l=o.getPixelOffset(),d=n.getRow(e.rowIndex),c=i?(null===d||void 0===d?void 0:d.rowHeight)-s-l:s-l,u=(null===d||void 0===d?void 0:d.rowTop)+c;let h,p=n.getRowIndexAtPixel(u+l);if(p===e.rowIndex){const o=i?-1:1;t=p=e.rowIndex+o}i?(h="bottom",p<r&&(p=r),t<r&&(t=r)):(h="top",p>a&&(p=a),t>a&&(t=a)),this.isRowTallerThanView(n.getRow(p))&&(t=p,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const o=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:o,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1,i=this.getViewportHeight(),{pageBounds:o,rowModel:n}=this.beans,s=o.getLastRow();let r=0,a=e.rowIndex;for(;a>=0&&a<=s;){const e=n.getRow(a);if(e){var l;const t=null!==(l=e.rowHeight)&&void 0!==l?l:0;if(r+t>i)break;r+=t}a+=t}return Math.max(0,Math.min(a,s))}getViewportHeight(){const e=this.beans,t=Bg(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth();let o=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(o-=i),o}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return"number"===typeof t&&t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),o=this.getNormalisedPosition(i),{rowIndex:n,rowPinned:s,column:r}=null!==o&&void 0!==o?o:i,a=r;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:a,focusIndex:n,focusColumn:a,rowPinned:s})}onHomeOrEndKey(e){const t=e===us.PAGE_HOME,{visibleCols:i,pageBounds:o,rowModel:n}=this.beans,s=i.allCols,r=t?o.getFirstRow():o.getLastRow(),a=n.getRow(r);if(!a)return;const l=(t?s:[...s].reverse()).find(e=>!e.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:l,focusIndex:r,focusColumn:l})}onTabKeyDown(e,t){const i=t.shiftKey,o=this.tabToNextCellCommon(e,i,t),n=this.beans,{ctrlsSvc:s,pageBounds:r,focusSvc:a,gos:l}=n;if(!1===o)if(i){const{rowIndex:i,rowPinned:o}=e.getRowPosition();(o?0===i:i===r.getFirstRow())&&(0===l.get("headerHeight")||oc(n)?sc(n,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof Ig&&e.focusCell(!0),(a.focusOverlay(!1)||sc(n,i))&&t.preventDefault();else o?t.preventDefault():null===o&&s.get("gridCtrl").allowFocusForNextCoreContainer(i)}tabToNextCell(e,t){const i=this.beans,{focusSvc:o,rowRenderer:n}=i,s=o.getFocusedCell();if(!s)return!1;let r=Xd(i,s);var a;if(!r&&(r=n.getRowByPosition(s),null===(a=r)||void 0===a||!a.isFullWidth()))return!1;return!!this.tabToNextCellCommon(r,e,t,"api")}tabToNextCellCommon(e,t,i){var o;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";const{editSvc:s,focusSvc:r}=this.beans;let a;const l=e instanceof Ig?e:null===(o=e.getAllCellCtrls())||void 0===o?void 0:o[0];return a=null!==s&&void 0!==s&&s.isEditing()?null===s||void 0===s?void 0:s.moveToNextCell(l,t,i,n):this.moveToNextCellNotEditing(e,t,i),null===a?a:a||!!r.focusedHeader}moveToNextCellNotEditing(e,t,i){const o=this.beans.visibleCols.allCols;let s;if(e instanceof Gg){if(s=(0,n.A)((0,n.A)({},e.getRowPosition()),{},{column:t?o[0]:Do(o)}),this.gos.get("embedFullWidthRows")&&i){const t=e.findFullWidthInfoForEvent(i);t&&(s.column=t.column)}}else s=e.getFocusedCellPosition();const r=this.findNextCellToFocusOn(s,{backwards:t,startEditing:!1});if(!1===r)return null;if(r instanceof Ig)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r,t);return v(r)}findNextCellToFocusOn(e,t){let{backwards:i,startEditing:o,skipToNextEditableCell:s}=t,r=e;const a=this.beans,{cellNavigation:l,gos:d,focusSvc:c,rowRenderer:u,rangeSvc:h}=a;for(;;){e!==r&&(e=r),i||(r=this.getLastCellOfColSpan(r)),r=l.getNextTabbedCell(r,i);const t=d.getCallback("tabToNextCell");if(v(t)){const n=t({backwards:i,editing:o,previousCellPosition:e,nextCellPosition:r||null});if(!0===n)r=e;else{if(!1===n)return!1;r={rowIndex:n.rowIndex,column:n.column,rowPinned:n.rowPinned}}}if(!r)return null;if(r.rowIndex<0){const e=lc(a);return c.focusHeaderPosition({headerPosition:{headerRowIndex:e+r.rowIndex,column:r.column},fromCell:!0}),null}const g="fullRow"===d.get("editType");if(o&&(!g||s)){if(!this.isCellEditable(r))continue}this.ensureCellVisible(r);const m=Xd(a,r);if(!m){var p;const e=u.getRowByPosition(r);if(!e||!e.isFullWidth()||o)continue;return(0,n.A)((0,n.A)({},e.getRowPosition()),{},{column:null===(p=r)||void 0===p?void 0:p.column})}if(!l.isSuppressNavigable(m.column,m.rowNode))return m.setFocusedCellPosition(r),null===h||void 0===h||h.setRangeToCell(r),m}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}lookupRowNodeForCell(e){let{rowIndex:t,rowPinned:i}=e;const{pinnedRowModel:o,rowModel:n}=this.beans;return"top"===i?null===o||void 0===o?void 0:o.getPinnedTopRow(t):"bottom"===i?null===o||void 0===o?void 0:o.getPinnedBottomRow(t):n.getRow(t)}navigateToNextCell(e,t,i,o){let n=i,s=!1;const r=this.beans,{cellNavigation:a,focusSvc:l,gos:d}=r;for(;n&&(n===i||!this.isValidNavigateCell(n));)d.get("enableRtl")?t===us.LEFT&&(n=this.getLastCellOfColSpan(n)):t===us.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=a.getNextCellToFocus(t,n),s=m(n);if(s&&e&&e.key===us.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),o){const o=d.getCallback("navigateToNextCell");if(v(o)){const s=o({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});n=v(s)?{rowPinned:s.rowPinned,rowIndex:s.rowIndex,column:s.column}:null}}if(!n)return;if(n.rowIndex<0){const t=lc(r);return void l.focusHeaderPosition({headerPosition:{headerRowIndex:t+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const c=this.getNormalisedPosition(n);c?this.focusPosition(c):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){var t;if(!(null===(t=this.beans.spannedRowRenderer)||void 0===t||!t.getCellByPosition(e)))return e;this.ensureCellVisible(e);const i=Xd(this.beans,e);return i?(e=i.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:i,rowRenderer:o,focusSvc:n,eventSvc:s}=this.beans,r=i.allCols,a=o.getRowByPosition(e);if(null===a||void 0===a||!a.isFullWidth())return!1;const l=n.getFocusedCell(),d={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Do(r):r[0])};this.focusPosition(d);const c=null==t?null!=l&&_d(d,l):t;return s.dispatchEvent({type:"fullWidthRowFocused",rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:d.column,isFullWidthCell:!0,fromBelow:c}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),null===i||void 0===i||i.setRangeToCell(e)}isValidNavigateCell(e){return!!Qd(this.beans,e)}getLastCellOfColSpan(e){const t=Xd(this.beans,e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:Do(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=xi(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),o=t&&(null===i||void 0===i?void 0:i.sticky),{scrollFeature:n}=this.gridBodyCon;!o&&m(e.rowPinned)&&n.ensureIndexVisible(e.rowIndex),e.column.isPinned()||n.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}},class extends ht{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===us.UP,o=e===us.DOWN,n=e===us.LEFT;let s,r;const{pageBounds:a,gos:l,visibleCols:d,pinnedRowModel:c}=this.beans,{rowPinned:u}=t;if(i||o)r=u&&c?i?0:"top"===u?c.getPinnedTopRowCount()-1:c.getPinnedBottomRowCount()-1:i?a.getFirstRow():a.getLastRow(),s=t.column;else{const e=l.get("enableRtl");r=t.rowIndex;s=(n!==e?d.allCols:[...d.allCols].reverse()).find(e=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:e}))}return s?{rowIndex:r,rowPinned:u,column:s}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,o=!1;for(;!o;){switch(e){case us.UP:i=this.getCellAbove(i);break;case us.DOWN:i=this.getCellBelow(i);break;case us.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case us.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,oi(8,{key:e})}o=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;const{pinnedRowModel:o,rowModel:n}=this.beans;switch(e.rowPinned){case"top":i=null===o||void 0===o?void 0:o.getPinnedTopRow(e.rowIndex);break;case"bottom":i=null===o||void 0===o?void 0:o.getPinnedBottomRow(e.rowIndex);break;default:i=n.getRow(e.rowIndex)}if(!i)return!1;return!this.isSuppressNavigable(t,i)}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){var t,i;if(!e)return null;const o=null!==(t=null===(i=this.rowSpanSvc)||void 0===i?void 0:i.getCellEnd(e))&&void 0!==t?t:e,n=Jd(this.beans,o,!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getCellAbove(e){var t,i;if(!e)return null;const o=null!==(t=null===(i=this.rowSpanSvc)||void 0===i?void 0:i.getCellStart(e))&&void 0!==t?t:e,n=$d(this.beans,{rowIndex:o.rowIndex,rowPinned:o.rowPinned},!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:i}=this.beans,o=t.allCols;let n=e.rowIndex,s=e.rowPinned,r=t.getColAfter(e.column);if(!r){var a;r=o[0];const t=Jd(this.beans,e,!0);if(m(t))return null;if(!t.rowPinned&&null!==(a=null===i||void 0===i?void 0:i.isRowInPage(t.rowIndex))&&void 0!==a&&!a)return null;n=t?t.rowIndex:null,s=t?t.rowPinned:null}return{rowIndex:n,column:r,rowPinned:s}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:i,pagination:o}=t,n=i.allCols;let s=e.rowIndex,r=e.rowPinned,a=i.getColBefore(e.column);if(!a){var l;a=Do(n);const i=$d(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(m(i))return null;if(!i.rowPinned&&null!==(l=null===o||void 0===o?void 0:o.isRowInPage(i.rowIndex))&&void 0!==l&&!l)return null;s=i?i.rowIndex:null,r=i?i.rowPinned:null}return{rowIndex:s,column:a,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:i}=e.colDef;if("boolean"===typeof i)return i;if("function"===typeof i){return i(e.createColumnFunctionCallbackParams(t))}return!1}},class extends ht{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl});const t=D(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i;const{colModel:o,colGroupSvc:n,ctrlsSvc:s}=this.beans;var r;"string"===typeof e?(i=o.getCol(e),i||(i=null!==(r=null===n||void 0===n?void 0:n.getColumnGroup(e))&&void 0!==r?r:null)):i=e;if(!i)return null;const a=s.getHeaderRowContainerCtrl(),l="filter"===Do((null===a||void 0===a?void 0:a.getAllCtrls())||[]).type,d=lc(this.beans)-1;let c=-1,u=i;for(;u;)c++,u=u.getParent();let h=c;return t&&l&&h===d-1&&h++,-1===h?null:{headerRowIndex:h,column:i}}navigateVertically(e,t){const{focusSvc:i,visibleCols:o}=this.beans,{focusedHeader:n}=i;if(!n)return!1;const{headerRowIndex:s}=n,r=n.column,a=lc(this.beans),l=this.getHeaderRowType(s),d=o.headerGroupRowCount;let{headerRowIndex:c,column:u,headerRowIndexWithoutSpan:h}="UP"===e?function(e,t,i){const o=i-1;if("filter"!==e){const e=t instanceof po&&t.isSpanHeaderHeight();let i=t.getParent();for(;i&&(i.getProvidedColumnGroup().getLevel()>o||e&&i.isPadding());)i=i.getParent();if(i)return e?{column:i,headerRowIndex:i.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:o}:{column:i,headerRowIndex:o,headerRowIndexWithoutSpan:o}}return{column:t,headerRowIndex:o,headerRowIndexWithoutSpan:o}}(l,r,s):function(e,t,i){const o=t+1,n={column:e,headerRowIndex:o,headerRowIndexWithoutSpan:o};if(e instanceof Ka){if(o>=i)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:i,headerRowIndexWithoutSpan:o};let t=e.getDisplayedChildren()[0];if(t instanceof Ka&&t.isPadding()){const e=t.getDisplayedLeafColumns()[0];e.isSpanHeaderHeight()&&(t=e)}n.column=t;t instanceof po&&t.isSpanHeaderHeight()&&(n.headerRowIndex=i,n.headerRowIndexWithoutSpan=o)}return n}(r,s,d),p=!1;return c<0&&(c=0,u=r,p=!0),c>=a?(c=-1,this.currentHeaderRowWithoutSpan=-1):void 0!==h&&(this.currentHeaderRowWithoutSpan=h),!(!p&&!u)&&i.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:u},allowUserOverride:!0,event:t})}navigateHorizontally(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const{focusSvc:o,gos:s}=this.beans,r=(0,n.A)({},o.focusedHeader);let a,l;-1!==this.currentHeaderRowWithoutSpan?r.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=r.headerRowIndex,"LEFT"===e!==s.get("enableRtl")?(l="Before",a=this.findHeader(r,l)):(l="After",a=this.findHeader(r,l));const d=s.getCallback("tabToNextHeader");if(t&&d){const e=o.focusHeaderPositionFromUserFunc({userFunc:d,headerPosition:a,direction:l});if(e){const{headerRowIndex:e}=o.focusedHeader||{};null!=e&&e!=r.headerRowIndex&&(this.currentHeaderRowWithoutSpan=e)}return e}return a||!t?o.focusHeaderPosition({headerPosition:a,direction:l,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(r,l,i)}focusNextHeaderRow(e,t,i){const o=this.beans,n=e.headerRowIndex;let s,r=null;const a=lc(o),l=this.beans.visibleCols.allCols;if("Before"===t){if(n<=0)return!1;r=Do(l),s=n-1,this.currentHeaderRowWithoutSpan-=1}else r=l[0],s=n+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:d,headerRowIndex:c}=Tp(this.beans,r,s);return c>=a&&(c=-1),o.focusSvc.focusHeaderPosition({headerPosition:{column:d,headerRowIndex:c},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"After";if(!e.getPinned()){if(_a(e)){const o=e.getDisplayedLeafColumns();t="Before"===i?Do(o):o[0]}else t=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(t)}}findHeader(e,t){const{colGroupSvc:i,visibleCols:o}=this.beans;let n=e.column;if(n instanceof Ka){const e=n.getDisplayedLeafColumns();n="Before"===t?e[0]:e[e.length-1]}const s="Before"===t?o.getColBefore(n):o.getColAfter(n);if(!s)return;const r=o.headerGroupRowCount;if(e.headerRowIndex>=r)return{headerRowIndex:e.headerRowIndex,column:s};const a=null===i||void 0===i?void 0:i.getColGroupAtLevel(s,e.headerRowIndex);if(!a){return{headerRowIndex:s instanceof po&&s.isSpanHeaderHeight()?o.headerGroupRowCount:e.headerRowIndex,column:s}}return a.isPadding()&&s.isSpanHeaderHeight()?{headerRowIndex:o.headerGroupRowCount,column:s}:{headerRowIndex:e.headerRowIndex,column:null!==a&&void 0!==a?a:s}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}}],apiFunctions:{getFocusedCell:function(e){return e.focusSvc.getFocusedCell()},clearFocusedCell:function(e){return e.focusSvc.clearFocusedCell()},setFocusedCell:function(e,t,i,o){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:o,forceBrowserFocus:!0})},setFocusedHeader:function(e,t){var i;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=null===(i=e.headerNavigation)||void 0===i?void 0:i.getHeaderPositionForColumn(t,o);n&&e.focusSvc.focusHeaderPosition({headerPosition:n})},tabToNextCell:function(e,t){var i,o;return null!==(i=null===(o=e.navigation)||void 0===o?void 0:o.tabToNextCell(!1,t))&&void 0!==i&&i},tabToPreviousCell:function(e,t){var i,o;return null!==(i=null===(o=e.navigation)||void 0===o?void 0:o.tabToNextCell(!0,t))&&void 0!==i&&i}}},Hg=class extends ht{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({["".concat(this.isLeft?"left":"right","PinnedWidthChanged")]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const i of this.elements)i&&(pe(i,t),Be(i,e))}},zg={moduleName:"PinnedColumn",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:i}=this.beans,o=pi(e,"print"),n=o?0:t.getColsLeftWidth(),s=o?0:t.getDisplayedColumnsRightWidth();n!=this.leftWidth&&(this.leftWidth=n,i.dispatchEvent({type:"leftPinnedWidthChanged"})),s!=this.rightWidth&&(this.rightWidth=s,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){var e;const t=we(this.gridBodyCtrl.eBodyViewport);if(t<=50)return;const i=this.getPinnedColumnsOverflowingViewport(t-50),o=this.gos.getCallback("processUnpinnedColumns"),{columns:n,hasLockedPinned:s}=i;let r=n;if(r.length||s){if(o){r=o({columns:r,viewportWidth:t})}null!==(e=r)&&void 0!==e&&e.length&&(r=r.filter(e=>!Uo(e)),this.setColsPinned(r,null,"viewportSizeFeature"))}}createPinnedWidthFeature(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return new Hg(e,i)}setColsPinned(e,t,i){const{colModel:o,colAnimation:n,visibleCols:s,gos:r}=this.beans;if(!o.cols)return;if(null===e||void 0===e||!e.length)return;if(pi(r,"print"))return void oi(37);let a;null===n||void 0===n||n.start(),a=!0===t||"left"===t?"left":"right"===t?"right":null;const l=[];for(const d of e){if(!d)continue;const e=o.getCol(d);e&&(e.getPinned()!==a&&(this.setColPinned(e,a),l.push(e)))}l.length&&(s.refresh(i),pn(this.eventSvc,l,i)),null===n||void 0===n||n.finish()}initCol(e){const{pinned:t,initialPinned:i}=e.colDef;void 0!==t?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){e.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(null==e.pinned)return;const i="left"===e.pinned,o="right"===e.pinned;e.hidden=!0;const n=()=>{const n=i?this.leftWidth:this.rightWidth;if(null==n)return;const s=0==n,r=e.hidden!==s,a=this.gos.get("enableRtl"),l=t.getScrollbarWidth(),d=t.verticalScrollShowing&&(a&&i||!a&&o)?n+l:n;e.comp.setPinnedContainerWidth("".concat(d,"px")),e.comp.setDisplayed(!s),r&&(e.hidden=s,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:t,rightWidth:i}=this,o=we(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(t+i+e>o){if(!(o>t+i))return 0;e=o-t-i}}return e}getPinnedColumnsOverflowingViewport(e){var t,i;const o=(null!==(t=this.rightWidth)&&void 0!==t?t:0)+(null!==(i=this.leftWidth)&&void 0!==i?i:0);let n=!1;if(o<e)return{columns:[],hasLockedPinned:n};const{visibleCols:s}=this.beans,r=[...s.leftCols],a=[...s.rightCols];let l=0,d=0;const c=[];let u=o-0-e;for(;(d<r.length||l<a.length)&&u>0;){if(l<a.length){const e=a[l++];if(e.colDef.lockPinned){n=!0;continue}u-=e.getActualWidth(),c.push(e)}if(d<r.length&&u>0){const e=r[d++];if(e.colDef.lockPinned){n=!0;continue}u-=e.getActualWidth(),c.push(e)}}return{columns:c,hasLockedPinned:n}}}],css:[".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}"]},Wg=class extends ut{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Ct(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=D(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),H(i,"polite"),T(i,"relevant","additions text"),function(e,t){T(e,"atomic",t)}(i,!0),e.eRootDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;null!=t&&""!=t.replace(/[ .]/g,"")?(this.lastAnnouncement===t&&(t="".concat(t,"\u200b")),this.lastAnnouncement=t,this.descriptionContainer.textContent=t):this.lastAnnouncement=""}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(Re(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},Ug={moduleName:"Aria",version:Kt,beans:[class extends Wg{}]},jg="ag-delay-render",_g={moduleName:"ColumnDelayRender",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,e=>{e.gridBodyCtrl.eGridBody.classList.add(jg)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive())return;if(this.requesters.delete(e),this.requesters.size>0)return;const{renderStatus:t,ctrlsSvc:i}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5)return this.timesRetried++,void setTimeout(()=>this.revealColumns(e));this.timesRetried=0}i.getGridBodyCtrl().eGridBody.classList.remove(jg),this.alreadyRevealed=!0}}],css:[":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}"]};var Kg={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},Yg=class extends Tn{constructor(){super(Kg),this.eOverlayWrapper=Pn,this.activeOverlay=null,this.activePromise=null,this.activeCssClass=null,this.elToFocusAfter=null,this.overlayExclusive=!1,this.oldWrapperPadding=null,this.registerCSS(".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{pointer-events:all}.ag-overlay-exporting-center,.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);display:flex;padding:var(--ag-spacing)}")}handleKeyDown(e){if(e.key!==us.TAB||e.defaultPrevented||Ll(e))return;const{beans:t,eOverlayWrapper:i}=this;if(i&&Ns(t,i,!1,e.shiftKey))return;let o=!1;o=e.shiftKey?t.focusSvc.focusGridView({column:Do(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):sc(t,!1),o&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper;if(!i)return;const o=i.classList,{AUTO_HEIGHT:n,NORMAL:s,PRINT:r}=zl;o.toggle(n,t.autoHeight),o.toggle(s,t.normal),o.toggle(r,t.print)}postConstruct(){this.createManagedBean(new Wl(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setWrapperComp(this,!1),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)}),this.addManagedEventListeners({gridSizeChanged:this.refreshWrapperPadding.bind(this)})}setWrapperTypeClass(e){var t;const i=null===(t=this.eOverlayWrapper)||void 0===t?void 0:t.classList;i?(this.activeCssClass&&i.toggle(this.activeCssClass,!1),this.activeCssClass=e,i.toggle(e,!0)):this.activeCssClass=null}showOverlay(e,t,i){if(this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,this.overlayExclusive=i,!e)return this.refreshWrapperPadding(),Ln.resolve();if(this.setWrapperTypeClass(t),this.setDisplayed(!0,{skipAriaHidden:!0}),this.refreshWrapperPadding(),i&&this.isGridFocused()){const e=P(this.beans);e&&!E(this.beans)&&(this.elToFocusAfter=e)}return e.then(t=>{const o=this.eOverlayWrapper;o?this.activePromise===e?(this.activePromise=null,t&&(this.activeOverlay!==t&&(o.appendChild(t.getGui()),this.activeOverlay=t),i&&this.isGridFocused()&&Ls(o))):this.activeOverlay!==t&&(this.destroyBean(t),t=null):this.destroyBean(t)}),e}refreshWrapperPadding(){if(!this.eOverlayWrapper)return void(this.oldWrapperPadding=null);let e=0;var t;!this.activeOverlay&&!this.activePromise||this.overlayExclusive||(e=(null===(t=this.beans.ctrlsSvc.get("gridHeaderCtrl"))||void 0===t?void 0:t.headerHeight)||0);e!==this.oldWrapperPadding&&(this.oldWrapperPadding=e,this.eOverlayWrapper.style.setProperty("padding-top","".concat(e,"px")))}destroyActiveOverlay(){var e,t;this.activePromise=null;const i=this.activeOverlay;if(!i)return this.overlayExclusive=!1,this.elToFocusAfter=null,void this.refreshWrapperPadding();let o=this.elToFocusAfter;this.elToFocusAfter=null,this.activeOverlay=null,this.overlayExclusive=!1,o&&!this.isGridFocused()&&(o=null),this.destroyBean(i);const n=this.eOverlayWrapper;n&&Re(n),null===(e=o)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e,{preventScroll:!0}),this.refreshWrapperPadding()}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=P(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setWrapperComp(this,!0),super.destroy(),this.eOverlayWrapper=null}},qg={selector:"AG-OVERLAY-WRAPPER",component:Yg},Qg=["refresh"],Xg=e=>({name:e,optionalMethods:Qg}),$g={id:"agLoadingOverlay",overlayType:"loading",comp:Xg("loadingOverlayComponent"),wrapperCls:"ag-overlay-loading-wrapper",exclusive:!0,compKey:"loadingOverlayComponent",paramsKey:"loadingOverlayComponentParams",isSuppressed:e=>{const t=e.get("loading");return!1===t||!0===e.get("suppressLoadingOverlay")&&!0!==t}},Zg={id:"agNoRowsOverlay",overlayType:"noRows",comp:Xg("noRowsOverlayComponent"),wrapperCls:"ag-overlay-no-rows-wrapper",compKey:"noRowsOverlayComponent",paramsKey:"noRowsOverlayComponentParams",isSuppressed:e=>e.get("suppressNoRowsOverlay")},Jg={id:"agNoMatchingRowsOverlay",overlayType:"noMatchingRows",comp:Xg("noMatchingRowsOverlayComponent"),wrapperCls:"ag-overlay-no-matching-rows-wrapper"},ev={id:"agExportingOverlay",overlayType:"exporting",comp:Xg("exportingOverlayComponent"),wrapperCls:"ag-overlay-exporting-wrapper",exclusive:!0},tv={id:"activeOverlay",comp:Xg("activeOverlay"),wrapperCls:"ag-overlay-modal-wrapper",exclusive:!0},iv={moduleName:"Overlay",version:Kt,userComponents:{agLoadingOverlay:class extends Oc{constructor(){super(...arguments),this.eLoadingIcon=Pn,this.eLoadingText=Pn}init(e){var t;const{beans:i,gos:o}=this,n=g(null===(t=o.get("overlayLoadingTemplate"))||void 0===t?void 0:t.trim());if(this.setTemplate(null!==n&&void 0!==n?n:Vc),!n){var s,r;const t=Bc("overlayLoading",i,null);t&&this.eLoadingIcon.appendChild(t);const o=null!==(s=null===(r=e.loading)||void 0===r?void 0:r.overlayText)&&void 0!==s?s:this.getLocaleTextFunc()("loadingOoo","Loading...");this.eLoadingText.textContent=o,i.ariaAnnounce.announceValue(o,"overlay")}}},agNoRowsOverlay:class extends Oc{init(e){var t;const{beans:i,gos:o}=this,n=g(null===(t=o.get("overlayNoRowsTemplate"))||void 0===t?void 0:t.trim());if(this.setTemplate(null!==n&&void 0!==n?n:zc),!n){var s,r;const t=null!==(s=null===(r=e.noRows)||void 0===r?void 0:r.overlayText)&&void 0!==s?s:this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=t,i.ariaAnnounce.announceValue(t,"overlay")}}},agNoMatchingRowsOverlay:class extends Oc{init(e){var t,i;const{beans:o}=this;this.setTemplate(Wc);const n=null!==(t=null===(i=e.noMatchingRows)||void 0===i?void 0:i.overlayText)&&void 0!==t?t:this.getLocaleTextFunc()("noMatchingRows","No Matching Rows");this.getGui().textContent=n,o.ariaAnnounce.announceValue(n,"overlay")}},agExportingOverlay:class extends Oc{constructor(){super(...arguments),this.eExportingIcon=Pn,this.eExportingText=Pn}init(e){var t,i;const{beans:o}=this;this.setTemplate(Hc);const n=Bc("overlayExporting",o,null);n&&this.eExportingIcon.appendChild(n);const s=null!==(t=null===(i=e.exporting)||void 0===i?void 0:i.overlayText)&&void 0!==t?t:this.getLocaleTextFunc()("exportingOoo","Exporting...");this.eExportingText.textContent=s,o.ariaAnnounce.announceValue(s,"overlay")}}},apiFunctions:{showLoadingOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.showLoadingOverlay()},showNoRowsOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.showNoRowsOverlay()},hideOverlay:function(e){var t;null===(t=e.overlays)||void 0===t||t.hideOverlay()}},icons:{overlayLoading:"loading",overlayExporting:"loading"},beans:[class extends ht{constructor(){super(...arguments),this.beanName="overlays",this.eWrapper=void 0,this.exclusive=!1,this.oldExclusive=!1,this.currentDef=null,this.showInitialOverlay=!0,this.userForcedNoRows=!1,this.exportsInProgress=0,this.newColumnsLoadedCleanup=null}postConstruct(){const e=this.gos;this.showInitialOverlay=ui(e);const t=()=>{this.userForcedNoRows||this.updateOverlay(!1)},[i,o,n,s]=this.addManagedEventListeners({newColumnsLoaded:t,rowCountReady:()=>{this.disableInitialOverlay(),t(),o()},rowDataUpdated:t,modelUpdated:t});this.newColumnsLoadedCleanup=i,this.addManagedPropertyListeners(["loading","activeOverlay","activeOverlayParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams"],e=>{var t;return this.onPropChange(new Set(null===(t=e.changeSet)||void 0===t?void 0:t.properties))})}destroy(){this.doHideOverlay(),super.destroy(),this.eWrapper=void 0}setWrapperComp(e,t){this.isAlive()&&(t?this.eWrapper===e&&(this.eWrapper=void 0):this.eWrapper=e,this.updateOverlay(!1))}isVisible(){return!!this.currentDef}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos;if(!this.eWrapper||e.get("activeOverlay"))return;if(this.isDisabled($g))return;const t=e.get("loading");(t||void 0===t)&&this.doShowOverlay($g)}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;!this.eWrapper||e.get("activeOverlay")||e.get("loading")||this.isDisabled(Zg)||(this.userForcedNoRows=!0,this.doShowOverlay(Zg))}async showExportOverlay(e){const{gos:t,beans:i}=this;if(!this.eWrapper||t.get("activeOverlay")||t.get("loading")||this.isDisabled(ev)||this.userForcedNoRows&&this.currentDef===Zg)return void e();const o=this.getDesiredDefWithOverride(ev);if(!o)return void e();this.exportsInProgress++,this.focusedCell=i.focusSvc.getFocusedCell(),await this.doShowOverlay(o),await new Promise(e=>setTimeout(()=>e()));const n=Date.now();try{e()}finally{const e=Date.now()-n,t=Math.max(0,300-e),o=()=>{this.exportsInProgress--,0===this.exportsInProgress&&(this.updateOverlay(!1),rc(i,this.focusedCell),this.focusedCell=null)};t>0?setTimeout(()=>o(),t):o()}}hideOverlay(){const e=this.gos;this.showInitialOverlay=!1;const t=this.userForcedNoRows;this.userForcedNoRows=!1,e.get("loading")?oi(99):e.get("activeOverlay")?oi(296):this.currentDef!==Jg?(this.doHideOverlay(),t&&this.getOverlayDef()!==Zg&&this.updateOverlay(!1)):oi(297)}getOverlayWrapperSelector(){return qg}getOverlayWrapperCompClass(){return Yg}onPropChange(e){var t;const i=e.has("activeOverlay");if((i||e.has("loading"))&&this.updateOverlay(i))return;const o=this.currentDef,n=null===(t=this.eWrapper)||void 0===t?void 0:t.activeOverlay;if(n&&o){const t=e.has("activeOverlayParams");if(o===tv){var s;if(t)null===(s=n.refresh)||void 0===s||s.call(n,this.makeCompParams(!0))}else{const t=o.paramsKey;var r;if(e.has("overlayComponentParams")||t&&e.has(t))null===(r=n.refresh)||void 0===r||r.call(n,this.makeCompParams(!1,t,o.overlayType))}}}updateOverlay(e){const t=this.eWrapper;if(!t)return this.currentDef=null,!1;const i=this.getDesiredDefWithOverride(),o=this.currentDef,n=i===tv&&e;return i!==o?i?(this.doShowOverlay(i),!0):(this.disableInitialOverlay(),this.doHideOverlay()):n&&i?(t.hideOverlay(),this.doShowOverlay(i),!0):(i||this.disableInitialOverlay(),!1)}getDesiredDefWithOverride(e){const{gos:t}=this;let i=(e=>{var t;return e?null!==(t={agLoadingOverlay:$g,agNoRowsOverlay:Zg,agNoMatchingRowsOverlay:Jg,agExportingOverlay:ev}[e])&&void 0!==t?t:tv:null})(t.get("activeOverlay"));return i||(i=null!==e&&void 0!==e?e:this.getOverlayDef(),i&&this.isDisabled(i)&&(i=null)),i}getOverlayDef(){const{gos:e,beans:t}=this,{colModel:i,rowModel:o}=t,n=e.get("loading");if(void 0!==n){if(this.disableInitialOverlay(),n)return $g}else if(this.showInitialOverlay){if(!this.isDisabled($g)&&(!e.get("columnDefs")||!i.ready||!e.get("rowData")))return $g;this.disableInitialOverlay()}else this.disableInitialOverlay();return(e=>e?{loading:$g,noRows:Zg,noMatchingRows:Jg,exporting:ev}[e]:null)(o.getOverlayType())}disableInitialOverlay(){var e;this.showInitialOverlay=!1,null===(e=this.newColumnsLoadedCleanup)||void 0===e||e.call(this),this.newColumnsLoadedCleanup=null}doShowOverlay(e){var t,i,o;const{gos:n,beans:s}=this,{userCompFactory:r}=s;this.currentDef=e;const a=e!==tv,l=!!e.exclusive;let d,c;this.exclusive=l,(e.paramsKey&&n.get(e.paramsKey)||e.compKey&&n.get(e.compKey))&&(d=e.paramsKey),a&&(n.get("overlayComponent")||n.get("overlayComponentSelector"))&&(c=r.getCompDetailsFromGridOptions({name:"overlayComponent",optionalMethods:["refresh"]},void 0,this.makeCompParams(!1,e.paramsKey,e.overlayType))),null!==c&&void 0!==c||(c=r.getCompDetailsFromGridOptions(e.comp,a?e.id:void 0,this.makeCompParams(!a,d,e.overlayType),!1));const u=null!==(t=null===(i=c)||void 0===i?void 0:i.newAgStackInstance())&&void 0!==t?t:null,h=this.eWrapper?this.eWrapper.showOverlay(u,e.wrapperCls,l):Ln.resolve();return null===(o=this.eWrapper)||void 0===o||o.refreshWrapperPadding(),this.setExclusive(l),h}makeCompParams(e,t,i){const{gos:o}=this,s=e?o.get("activeOverlayParams"):(0,n.A)((0,n.A)((0,n.A)({},o.get("overlayComponentParams")),t&&o.get(t)||null),{},{overlayType:i});return oo(o,null!==s&&void 0!==s?s:{})}doHideOverlay(){let e=!1;this.currentDef&&(this.currentDef=null,e=!0),this.exclusive=!1;const t=this.eWrapper;return t&&(t.hideOverlay(),t.refreshWrapperPadding(),this.setExclusive(!1)),e}setExclusive(e){this.oldExclusive!==e&&(this.oldExclusive=e,this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"}))}isDisabled(e){var t,i;const{gos:o}=this;return e.overlayType&&(null===(t=o.get("suppressOverlays"))||void 0===t?void 0:t.includes(e.overlayType))||!0===(null===(i=e.isSuppressed)||void 0===i?void 0:i.call(e,o))}}]},ov=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==(null===e||void 0===e?void 0:e.id))return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.rowNode!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Mo(this.entriesList,i)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],Mo(this.entriesList,e)}getEntries(){return this.entriesList}};function nv(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const i of e){const e=i.id;switch(i.rowPinned){case"top":t.top[e]=i;break;case"bottom":t.bottom[e]=i;break;default:t.normal[e]=i}}return t}function sv(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}var rv=e=>{if(e.data)return e;let t=e.childrenAfterGroup;for(;null!==(i=t)&&void 0!==i&&i.length;){var i;const e=t[0];if(e.data)return e;t=e.childrenAfterGroup}};function av(e){if(!e)return e;const t=Number(e);return isNaN(t)?e:Math.abs(t)}var lv=(e,t)=>({tag:"span",ref:"eSort".concat(e),cls:"ag-sort-indicator-icon ag-sort-".concat(t," ag-hidden"),attrs:{"aria-hidden":"true"}}),dv={tag:"span",cls:"ag-sort-indicator-container",children:[lv("Order","order"),lv("Asc","ascending-icon"),lv("Desc","descending-icon"),lv("Mixed","mixed-icon"),lv("AbsoluteAsc","absolute-ascending-icon"),lv("AbsoluteDesc","absolute-descending-icon"),lv("None","none-icon")]},cv=class extends Tn{constructor(e){super(),this.eSortOrder=Pn,this.eSortAsc=Pn,this.eSortDesc=Pn,this.eSortMixed=Pn,this.eSortNone=Pn,this.eSortAbsoluteAsc=Pn,this.eSortAbsoluteDesc=Pn,e||this.setTemplate(dv)}attachCustomElements(e,t,i,o,n,s,r){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=o,this.eSortNone=n,this.eSortAbsoluteAsc=s,this.eSortAbsoluteDesc=r}setupSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("sortAbsoluteAscending",this.eSortAbsoluteAsc,e),this.addInIcon("sortAbsoluteDescending",this.eSortAbsoluteDesc,e);const i=this.updateIcons.bind(this),o=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:o,columnRowGroupChanged:o}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;const o=Bc(e,this.beans,i);o&&t.appendChild(o)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortAbsoluteAsc:i,eSortAbsoluteDesc:o,eSortNone:n,column:s,gos:r,beans:a}=this,l=a.sortSvc.getDisplaySortForColumn(s),d=bo(null===l||void 0===l?void 0:l.type),c=wo(null===l||void 0===l?void 0:l.direction),u=s.getAvailableSortTypes(),h=u.has("default"),p=u.has("absolute"),g="absolute"===d,v="default"===d,m="asc"===c,f="desc"===c;if(e&&pe(e,m&&v&&h,{skipAriaHidden:!0}),t&&pe(t,f&&v&&h,{skipAriaHidden:!0}),n){pe(n,!(!s.getColDef().unSortIcon&&!r.get("unSortIcon"))&&!c,{skipAriaHidden:!0})}i&&pe(i,m&&g&&p,{skipAriaHidden:!0}),o&&pe(o,f&&g&&p,{skipAriaHidden:!0})}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);const o=t.getColDef().showRowGroup;Fi(i)&&o&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:i}=this;if(e){var o;pe(e,"mixed"===(null===(o=t.sortSvc.getDisplaySortForColumn(i))||void 0===o?void 0:o.direction),{skipAriaHidden:!0})}}updateSortOrder(){var e;const{eSortOrder:t,column:i,beans:{sortSvc:o}}=this;if(!t)return;const n=o.getColumnsWithSortingOrdered(),s=null!==(e=o.getDisplaySortIndexForColumn(i))&&void 0!==e?e:-1,r=n.some(e=>{var t;return null!==(t=o.getDisplaySortIndexForColumn(e))&&void 0!==t&&t});pe(t,s>=0&&r,{skipAriaHidden:!0}),s>=0?t.textContent=(s+1).toString():Re(t)}},uv={selector:"AG-SORT-INDICATOR",component:cv},hv={moduleName:"Sort",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){const o=this.getNextSortDirection(e);this.setSortForColumn(e,o,t,i)}progressSortFromEvent(e,t){const i="ctrl"===this.gos.get("multiSortKey")?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,i,o){const{gos:n,showRowGroupCols:s}=this.beans;let r=[e];if(Fi(n)&&e.getColDef().showRowGroup){var a;const t=null===s||void 0===s||null===(a=s.getSourceColumnsForGroupColumn)||void 0===a?void 0:a.call(s,e),i=null===t||void 0===t?void 0:t.filter(e=>e.isSortable());i&&(r=[e,...i])}for(const d of r)this.setColSort(d,t,o);const l=[];if(!((i||n.get("alwaysMultiSort"))&&!n.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(r,o);l.push(...e)}this.updateSortIndex(e),l.push(...r),this.dispatchSortChangedEvents(o,l)}updateSortIndex(e){const{gos:t,colModel:i,showRowGroupCols:o}=this.beans,n=Fi(t),s=null===o||void 0===o?void 0:o.getShowRowGroupCol(e.getId()),r=n&&s||e,a=this.getColumnsWithSortingOrdered();i.forAllCols(e=>this.setColSortIndex(e,null));const l=a.filter(e=>(!n||!e.getColDef().showRowGroup)&&e!==r);(r.getSortDef()?[...l,r]:l).forEach((e,t)=>this.setColSortIndex(e,t))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{if(t.getSortDef())return e=!0,!0}),e}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.beans.colModel.forAllCols(o=>{e.includes(o)||(o.getSortDef()&&i.push(o),this.setColSort(o,void 0,t))}),i}getNextSortDirection(e){const t=e.getSortingOrder(),i=e.getSortDef();let o=t.findIndex(e=>Co(e,i))+1;return o>=t.length&&(o=0),go(t[o])}getIndexedSortMap(){var e;const{gos:t,colModel:i,showRowGroupCols:o,rowGroupColsSvc:n}=this.beans;let s=[];if(i.forAllCols(e=>{e.getSortDef()&&s.push(e)}),i.isPivotMode()){const e=Fi(t);s=s.filter(t=>{const i=!!t.getAggFunc(),n=!t.isPrimary(),s=e?null===o||void 0===o?void 0:o.getShowRowGroupCol(t.getId()):t.getColDef().showRowGroup;return i||n||s})}const r=null!==(e=null===n||void 0===n?void 0:n.columns.filter(e=>!!e.getSortDef()))&&void 0!==e?e:[],a={};s.forEach((e,t)=>a[e.getId()]=t),s.sort((e,t)=>{const i=e.getSortIndex(),o=t.getSortIndex();if(null!=i&&null!=o)return i-o;if(null==i&&null==o){return a[e.getId()]>a[t.getId()]?1:-1}return null==o?-1:1});const l=Fi(t)&&!!r.length;l&&(s=[...new Set(s.map(e=>{var t;return null!==(t=null===o||void 0===o?void 0:o.getShowRowGroupCol(e.getId()))&&void 0!==t?t:e}))]);const d=new Map;if(s.forEach((e,t)=>d.set(e,t)),l)for(const c of r){const e=o.getShowRowGroupCol(c.getId());d.set(c,d.get(e))}return d}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort((e,t)=>{let[,i]=e,[,o]=t;return i-o}).map(e=>{let[t]=e;return t})}collectSortItems(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[],i=this.getColumnsWithSortingOrdered();for(const s of i){var o,n;const i=null===(o=s.getSortDef())||void 0===o?void 0:o.direction;if(!i)continue;const r={sort:i,type:bo(null===(n=s.getSortDef())||void 0===n?void 0:n.type)};e?r.colId=s.getId():r.column=s,t.push(r)}return t}getSortModel(){return this.collectSortItems(!0)}getSortOptions(){return this.collectSortItems()}canColumnDisplayMixedSort(e){const t=Fi(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){var t;const i=null===(t=this.beans.showRowGroupCols)||void 0===t?void 0:t.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||null===i||void 0===i||!i.length)return e.getSortDef();const o=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...i]:i,n=o[0].getSortDef();var s;return o.every(e=>Co(e.getSortDef(),n))?n:{type:bo(null===(s=e.getSortDef())||void 0===s?void 0:s.type),direction:"mixed"}}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t){const i=()=>{const{type:i,direction:o}=go(t.getSortDef());if(e.toggleCss("ag-header-cell-sorted-asc","asc"===o),e.toggleCss("ag-header-cell-sorted-desc","desc"===o),e.toggleCss("ag-header-cell-sorted-abs-asc","absolute"===i&&"asc"===o),e.toggleCss("ag-header-cell-sorted-abs-desc","absolute"===i&&"desc"===o),e.toggleCss("ag-header-cell-sorted-none",!o),t.getColDef().showRowGroup){var n;const i=null===(n=this.beans.showRowGroupCols)||void 0===n?void 0:n.getSourceColumnsForGroupColumn(t),s=!(null===i||void 0===i?void 0:i.every(e=>{var t;return o==(null===(t=e.getSortDef())||void 0===t?void 0:t.direction)}));e.toggleCss("ag-header-cell-sorted-mixed",s)}};e.addManagedEventListeners({sortChanged:i,columnRowGroupChanged:i})}initCol(e){const{sortIndex:t,initialSortIndex:i}=e.colDef,o=$o(e.colDef);o&&e.setSortDef(o,!0),void 0!==t?null!==t&&(e.sortIndex=t):null!==i&&(e.sortIndex=i)}updateColSort(e,t,i){void 0!==t&&this.setColSort(e,go(t),i)}setColSort(e,t,i){Co(e.getSortDef(),t)||(e.setSortDef(go(t),void 0===t),e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new cv(e)}getSortIndicatorSelector(){return uv}},class extends ht{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Fi(e),this.firstLeaf=ui(e)?ru:rv,this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Fi(e))}doFullSort(e,t){const i=e.map((e,t)=>({currentPos:t,rowNode:e}));return i.sort(this.compareRowNodes.bind(this,t)),i.map(e=>e.rowNode)}compareRowNodes(e,t,i){const o=t.rowNode,n=i.rowNode;for(let s=0,r=e.length;s<r;s++){const t=e[s],i="desc"===t.sort,r=this.getValue(o,t.column),a=this.getValue(n,t.column);let l;const d=this.getComparator(t,o);if(d)l=d(r,a,o,n,i);else{const e={accentedCompare:this.isAccentedSort};"absolute"===t.type&&(e.transform=av),l=w(r,a,e)}if(!isNaN(l)&&0!==l)return"asc"===t.sort?l:-1*l}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column.getColDef(),o=this.getComparatorFromColDef(i,e);if(o)return o;if(!i.showRowGroup)return;const n=!t.group&&i.field;if(!n)return;const s=this.beans.colModel.getColDefCol(n);return s?this.getComparatorFromColDef(s.getColDef(),e):void 0}getComparatorFromColDef(e,t){const i=e.comparator;if(null!=i)return"object"===typeof i?i[bo(t.type)]:i}getValue(e,t){if(this.primaryColumnsSortGroups&&e.rowGroupColumn===t)return this.getGroupDataValue(e,t);if(e.group&&t.getColDef().showRowGroup)return;const{valueSvc:i,formula:o}=this.beans,n=i.getValue(t,e,!1);return t.isAllowFormula()&&null!==o&&void 0!==o&&o.isFormula(n)?o.resolveValue(t,e):n}getGroupDataValue(e,t){var i;const{gos:o,valueSvc:n,colModel:s,showRowGroupCols:r}=this.beans;if(Ai(o,s.isPivotActive())){const i=this.firstLeaf(e);return i&&n.getValue(t,i,!1)}const a=null===r||void 0===r?void 0:r.getShowRowGroupCol(t.getId());if(a)return null===(i=e.groupData)||void 0===i?void 0:i[a.getId()]}}],apiFunctions:{onSortChanged:function(e){var t;null===(t=e.sortSvc)||void 0===t||t.onSortChanged("api")}},userComponents:{agSortIndicator:cv},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc"}};var pv={moduleName:"ValueCache",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){if(this.active){const o=this.cacheVersion;e.__cacheVersion!==o&&(e.__cacheVersion=o,e.__cacheData={}),e.__cacheData[t]=i}}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}}],apiFunctions:{expireValueCache:function(e){var t;null===(t=e.valueCache)||void 0===t||t.expire()}}},gv={moduleName:"Expression",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if("string"===typeof e)return this.evaluateExpression(e,t);ni(15,{expression:e})}evaluateExpression(e,t){try{const i=this.createExpressionFunction(e);return i(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return ni(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const i=this.createFunctionBody(e),o=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return t[e]=o,o}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}}]},vv={moduleName:"ChangeDetection",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;ui(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:i}=this.beans;if("paste"===e.source||t.get("suppressChangeDetection"))return;const o=e.node,n=[o],s=this.clientSideRowModel,r=null===s||void 0===s?void 0:s.rootNode;if(r&&!o.isRowPinned()){const i=t.get("aggregateOnlyChangedColumns"),a=new Zu(i,r);a.addParentNode(o.parent,[e.column]),s.doAggregate(a),a.forEachChangedNodeDepthFirst(e=>{n.push(e),e.sibling&&n.push(e.sibling)})}i.refreshCells({rowNodes:n})}}]},mv={moduleName:"CellApi",version:Kt,apiFunctions:{getCellValue:function(e,t){var i;const{colKey:o,rowNode:n,useFormatter:s}=t,r=null!==(i=e.colModel.getColDefCol(o))&&void 0!==i?i:e.colModel.getCol(o);if(m(r))return null;const a=e.valueSvc.getValueForDisplay({column:r,node:n,includeValueFormatted:s});var l;return s?null!==(l=a.valueFormatted)&&void 0!==l?l:S(a.value):a.value}}},fv={moduleName:"CommunityCore",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var e,t;if(this.destroyCalled)return;const{stateSvc:i,ctrlsSvc:o,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:null!==(e=null===i||void 0===i?void 0:i.getState())&&void 0!==e?e:{}}),this.destroyCalled=!0,null===(t=o.get("gridCtrl"))||void 0===t||t.destroyGridUi(),n.destroy(),super.destroy()}},class extends ht{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new _u,this.fns=(0,n.A)((0,n.A)({},Uu),{},{dispatchEvent:ju}),this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(Wu))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:o}=this;var n,s;i!==Uu&&(i[e]=null!==(n=null===o||void 0===o||null===(s=o.validation)||void 0===s?void 0:s.validateApiFunction(e,t))&&void 0!==n?n:t)}makeApi(e){var t=this;return{[e]:function(){const{beans:i,fns:{[e]:o}}=t;for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return o?o(i,...s):t.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:o}=this;if(t){const t=Wu[e];i.assertModuleRegistered(t,"api.".concat(e))&&oi(27,{fnName:e,module:t})}else oi(26,{fnName:e,preDestroyLink:o})}destroy(){super.destroy(),this.fns=Uu,this.beans=null}},class extends xa{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(null!=e)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:i,dynamicBeans:o,selectors:n}=e;if(i){const e=(e,t,i,o)=>{this.agGridDefaults[e]=t,(i||o)&&(this.agGridDefaultOverrides[e]={params:i,processParams:o})};for(const t of Object.keys(i)){let o=i[t];if(cs(o)&&(o=o.getComp(this.beans)),"object"===typeof o){const{classImp:i,params:n,processParams:s}=o;e(t,i,n,s)}else e(t,o)}}this.registerDynamicBeans(o);for(const s of null!==n&&void 0!==n?n:[])this.selectors[s.selector]=s;if(t)for(const s of Object.keys(t))this.icons[s]=t[s]}getUserComponent(e,t){var i;const o=(e,t,i,o)=>({componentFromFramework:t,component:e,params:i,processParams:o}),{frameworkOverrides:n}=this.beans,s=n.frameworkComponent(t,this.gos.get("components"));if(null!=s)return o(s,!0);const r=this.jsComps[t];if(r){return o(r,n.isFrameworkComponent(r))}const a=this.agGridDefaults[t];if(a){const e=this.agGridDefaultOverrides[t];return o(a,!1,null===e||void 0===e?void 0:e.params,null===e||void 0===e?void 0:e.processParams)}return null===(i=this.beans.validation)||void 0===i||i.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){var i,o;return t?li(279,{name:e}):null!==(i=null===(o=this.beans.validation)||void 0===o?void 0:o.missingDynamicBean(e))&&void 0!==i?i:li(256)}},class extends ht{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.getCompDetails(this.gridOptions,e,t,i,o)}getCompDetails(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{name:r,cellRenderer:a}=t;let l,d,{compName:c,jsComp:u,fwComp:h,paramsFromSelector:p,popupFromSelector:g,popupPositionFromSelector:v}=Nn(this.beans.frameworkOverrides,e,t,o);const m=e=>{const t=this.registry.getUserComponent(r,e);t&&(u=t.componentFromFramework?void 0:t.component,h=t.componentFromFramework?t.component:void 0,l=t.params,d=t.processParams)};var f,C;(null!=c&&m(c),null==u&&null==h&&null!=i&&m(i),!u||!a||(C=u)&&C.prototype&&"getGui"in C.prototype)||(u=null===(f=this.agCompUtils)||void 0===f?void 0:f.adaptFunction(t,u));if(!u&&!h){const{validation:e}=this.beans;return void(!s||c===i&&i?i&&!e&&ni(146,{comp:i}):c?null!==e&&void 0!==e&&e.isProvidedUserComp(c)||ni(50,{compName:c}):i?e||ni(260,(0,n.A)((0,n.A)({},this.gos.getModuleErrorParams()),{},{propName:r,compName:i})):ni(216,{name:r}))}const w=this.mergeParams(e,t,o,p,l,d),b=null==u,y=null!==u&&void 0!==u?u:h;return{componentFromFramework:b,componentClass:y,params:w,type:t,popupFromSelector:g,popupPositionFromSelector:v,newAgStackInstance:()=>this.newAgStackInstance(y,b,w,t)}}newAgStackInstance(e,t,i,o){var n,s;let r;r=!t?new e:this.frameworkCompWrapper.wrap(e,o.mandatoryMethods,o.optionalMethods,o),this.createBean(r);const a=null===(n=(s=r).init)||void 0===n?void 0:n.call(s,i);return null==a?Ln.resolve(r):a.then(()=>r)}mergeParams(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;const a=(0,n.A)((0,n.A)({},i),s),l=null===e||void 0===e?void 0:e[t.name+"Params"];if("function"===typeof l){St(a,l(i))}else"object"===typeof l&&St(a,l);return St(a,o),r?r(a):a}},class extends ht{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(void 0!==ws)return ws;if(!document.body)return-1;let e=1e6;const t=Ss()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const o=2*e;if(i.style.height=o+"px",o>t||i.clientHeight!==o)break;e=o}return i.remove(),ws=e,e}(),At(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;At(this.gos,"RowContainerHeightService - Div Stretch Offset = ".concat(t," (").concat(this.pixelsToShave," * ").concat(e,")")),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"===typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},class extends ht{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{colFlex:i,colModel:o,colGroupSvc:n,colViewport:s,selectionColSvc:r}=this.beans;t||this.buildTrees(o,n),null===n||void 0===n||n.updateOpenClosedVisibility(),this.leftCols=Dh(this.treeLeft),this.centerCols=Dh(this.treeCenter),this.rightCols=Dh(this.treeRight),null===r||void 0===r||r.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(o),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(e=>e.isAutoHeight()),null===i||void 0===i||i.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(o,this.leftCols,this.rightCols,e),s.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let i=t.getParent();for(;i;){if(!i.isPadding()){const t=i.getProvidedColumnGroup().getLevel()+1;t>e&&(e=t);break}i=i.getParent()}}return e}updateBodyWidths(){const e=Vo(this.centerCols),t=Vo(this.leftCols),i=Vo(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e;(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,o){let n,s;this.gos.get("enableRtl")?(n=t?t[0]:null,s=i?Do(i):null):(n=t?Do(t):null,s=i?i[0]:null);for(const r of e.getCols())r.setLastLeftPinned(r===n,o),r.setFirstRightPinned(r===s,o)}buildTrees(e,t){const i=e.getColsToShow(),o=i.filter(e=>"left"==e.getPinned()),n=i.filter(e=>"right"==e.getPinned()),s=i.filter(e=>"left"!=e.getPinned()&&"right"!=e.getPinned()),r=new xn,a=e=>t?t.createColumnGroups(e):e.columns;this.treeLeft=a({columns:o,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:n,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:s,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),i=[],o=[],n=[];for(const s of t){const e=s.getPinned();e?!0===e||"left"===e?i.push(s):n.push(s):o.push(s)}this.ariaOrderColumns=i.concat(o).concat(n)}getAriaColIndex(e){let t;return t=_a(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)if(_a(t)){t.checkLeft()}}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),o=this.gos.get("enableRtl");for(const n of[this.leftCols,this.rightCols,this.centerCols]){if(o){let t=Vo(n);for(const i of n)t-=i.getActualWidth(),i.setLeft(t,e)}else{let t=0;for(const i of n)i.setLeft(t,e),t+=i.getActualWidth()}Rh(i,n)}for(const n of i)n.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,o){const n=[];let s=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,d=Math.min(a.getColSpan(e),l),c=[a];if(d>1){const e=d-1;for(let i=1;i<=e;i++)c.push(t[r+i]);r+=e}let u;if(i){u=!1;for(const e of c)i(e)&&(u=!0)}else u=!0;if(u){if(0===n.length&&s){!!o&&o(a)&&n.push(s)}n.push(a)}s=a}return n}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};Ph(this.treeCenter,!1,e),Ph(this.treeLeft,!1,e),Ph(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const o=this[t[i]];if(o.length)return e?Do(o):o[0]}return null}getColAfter(e){const t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return Vo(this.leftCols)}getDisplayedColumnsRightWidth(){return Vo(this.rightCols)}isColAtEdge(e,t){const i=this.allCols;if(!i.length)return!1;const o="first"===t;let n;if(_a(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;n=o?t[0]:Do(t)}else n=e;return(o?i[0]:Do(i))===n}},class extends Fa{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}},class extends ht{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=$p++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new p,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const o=kp.has(t);if(o&&!e||!o&&e)return;if(!function(e){return!!Lp[e]}(t))return;const n=(e,t)=>{const i=Lp[e],o=this.gridOptions[i];"function"===typeof o&&this.beans.frameworkOverrides.wrapOutgoing(()=>o(t))};if(this.gridReadyFired)n(t,i);else if("gridReady"===t){n(t,i),this.gridReadyFired=!0;for(const e of this.queueEvents)n(e.eventName,e.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:i})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:e=>{let{options:t}=e;this.updateGridOptions({options:t,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){var t;return null!==(t=this.gridOptions[e])&&void 0!==t?t:Dt[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return v(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>e(this.addCommon(t))}return e}updateGridOptions(e){let{options:t,force:i,source:o="api"}=e;const n={id:Xp++,properties:[]},s=[],{gridOptions:r,validation:a}=this;for(const l of Object.keys(t)){const e=Rt.applyGlobalGridOption(l,t[l]);null===a||void 0===a||a.warnOnInitialPropertyUpdate(o,l);const d=i||"object"===typeof e&&"api"===o,c=r[l];if(d||c!==e){r[l]=e;const t={type:l,currentValue:e,previousValue:c,changeSet:n,source:o};s.push(t)}}this.validateGridOptions(this.gridOptions),n.properties=s.map(e=>e.type);for(const l of s)At(this,"Updated property ".concat(l.type," from"),l.previousValue," to ",l.currentValue),this.propEventSvc.dispatchEvent(l)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const i of Object.keys(e)){const o=e[i];if(null==o||!1===o)continue;let n=t[i];"function"===typeof n&&(n=n(e,this.gridOptions,this.beans)),n&&this.assertModuleRegistered(n,i)}}validateGridOptions(e){var t;this.validateOptions(e,qp),null===(t=this.validation)||void 0===t||t.processGridOptions(e)}validateColDef(e,t,i){var o,n;!i&&null!==(o=this.beans.dataTypeSvc)&&void 0!==o&&o.isColPendingInference(t)||(this.validateOptions(e,Gp),null===(n=this.validation)||void 0===n||n.validateColDef(e))}assertModuleRegistered(e,t){const i=Array.isArray(e)?e.some(e=>this.isModuleRegistered(e)):this.isModuleRegistered(e);return i||ni(200,(0,n.A)((0,n.A)({},this.getModuleErrorParams()),{},{moduleName:e,reasonOrId:t})),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:Wt(),rowModelType:this.get("rowModelType"),isUmd:jt()}}isModuleRegistered(e){return zt(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[Zp]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const e=t[Zp];if(v(e)){return e===this.instanceId}t=t.parentElement}return!1}},class extends ht{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(qo(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),qo(e.source)))}createColsFromColDefs(e){var t,i,o;const{beans:n}=this,{valueCache:s,colAutosize:r,rowGroupColsSvc:a,pivotColsSvc:l,valueColsSvc:d,visibleCols:c,eventSvc:u,groupHierarchyColSvc:h}=n,p=this.colDefs?Cn(n,e):void 0;null===s||void 0===s||s.expire();const g=null===(t=this.colDefCols)||void 0===t?void 0:t.list,v=null===(i=this.colDefCols)||void 0===i?void 0:i.tree,m=en(n,this.colDefs,!0,v,e);Ho(n,null===(o=this.colDefCols)||void 0===o?void 0:o.tree,m.columnTree);const f=m.columnTree,C=m.treeDepth,w=Bo(f),b={};for(const y of w)b[y.getId()]=y;this.colDefCols={tree:f,treeDepth:C,list:w,map:b},this.createColumnsForService([h],this.colDefCols,e),null===a||void 0===a||a.extractCols(e,g),null===l||void 0===l||l.extractCols(e,g),null===d||void 0===d||d.extractCols(e,g),this.ready=!0,this.changeEventsDispatching=!0,this.refreshCols(!0,e),this.changeEventsDispatching=!1,c.refresh(e),u.dispatchEvent({type:"columnEverythingChanged",source:e}),p&&(this.changeEventsDispatching=!0,p(),this.changeEventsDispatching=!1),u.dispatchEvent({type:"newColumnsLoaded",source:e}),"gridInitializing"===e&&(null===r||void 0===r||r.applyAutosizeStrategy())}refreshCols(e,t){var i;if(!this.colDefCols)return;const o=null===(i=this.cols)||void 0===i?void 0:i.tree;this.saveColOrder();const{autoColSvc:n,selectionColSvc:s,rowNumbersSvc:r,quickFilter:a,pivotResultCols:l,showRowGroupCols:d,rowAutoHeight:c,visibleCols:u,colViewport:h,eventSvc:p,formula:g}=this.beans,v=this.selectCols(l,this.colDefCols);null===g||void 0===g||g.setFormulasActive(v),this.createColumnsForService([n,s,r],v,t);const m=(f=this.gos,this.showingPivotResult?!f.get("enableStrictPivotColumnOrder"):f.get("maintainColumnOrder"));var f;e&&!m||this.restoreColOrder(v),this.positionLockedCols(v),null===d||void 0===d||d.refresh(),null===a||void 0===a||a.refreshCols(),this.setColSpanActive(),null===c||void 0===c||c.setAutoHeightActive(v),u.clear(),h.clear(),Eo(o,this.cols.tree)||p.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,i){for(const o of e)o&&(o.createColumns(t,e=>{this.lastOrder=e(this.lastOrder),this.lastPivotOrder=e(this.lastPivotOrder)},i),o.addColumns(t))}selectCols(e,t){var i;const o=null!==(i=null===e||void 0===e?void 0:e.getPivotResultCols())&&void 0!==i?i:null;this.showingPivotResult=null!=o;const{map:s,list:r,tree:a,treeDepth:l}=null!==o&&void 0!==o?o:t;if(this.cols={list:r.slice(),map:(0,n.A)({},s),tree:a.slice(),treeDepth:l},o){o.list.some(e=>{var t;return void 0!==(null===(t=this.cols)||void 0===t?void 0:t.map[e.getColId()])})||(this.lastPivotOrder=null)}return this.cols}getColsToShow(){if(!this.cols)return[];const{beans:e,showingPivotResult:t,cols:i}=this,{valueColsSvc:o,selectionColSvc:n}=e,s=this.isPivotMode()&&!t,r=null===n||void 0===n?void 0:n.isSelectionColumnEnabled(),a=mi(e),l=null===o||void 0===o?void 0:o.columns;return i.list.filter(e=>{const t=zo(e);if(s){const i=null===l||void 0===l?void 0:l.includes(e);return t||i||r&&Wo(e)||a&&Uo(e)}return t||e.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;mn(this.beans,{state:e.map(e=>({colId:"string"===typeof e?e:e.getColId(),hide:!t}))},i)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const i=t.filter(t=>null!=e.map[t.getId()]);if(0===i.length)return;if(i.length===e.list.length)return void(e.list=i);const o=e=>{const t=e.getOriginalParent();if(!t)return!1;return t.getChildren().length>1||o(t)};if(!i.some(e=>o(e))){const t=new Set(i);for(const o of e.list)t.has(o)||i.push(o);return void(e.list=i)}const n=new Map;for(let u=0;u<i.length;u++){const e=i[u];n.set(e,u)}const s=e.list.filter(e=>!n.has(e));if(0===s.length)return void(e.list=i);const r=(e,t)=>{const i=t?t.getOriginalParent():e.getOriginalParent();if(!i)return null;let o=null,s=null;for(const r of i.getChildren())if(r!==t&&r!==e){if(r instanceof po){const e=n.get(r);if(null==e)continue;(null==o||o<e)&&(o=e,s=r);continue}r.forEachLeafColumn(e=>{const t=n.get(e);null!=t&&(null==o||o<t)&&(o=t,s=e)})}return null==s?r(e,i):s},a=[],l=new Map;for(const u of s){const e=r(u,null);if(null==e){a.push(u);continue}const t=l.get(e);void 0===t?l.set(e,u):Array.isArray(t)?t.push(u):l.set(e,[t,u])}const d=new Array(e.list.length);let c=d.length-1;for(let u=a.length-1;u>=0;u--)d[c--]=a[u];for(let u=i.length-1;u>=0;u--){const e=i[u],t=l.get(e);if(t)if(Array.isArray(t))for(let i=t.length-1;i>=0;i--){const e=t[i];d[c--]=e}else d[c--]=t;d[c--]=e}e.list=d}positionLockedCols(e){e.list=cn(e.list,this.gos)}saveColOrder(){var e,t,i,o;this.showingPivotResult?this.lastPivotOrder=null!==(e=null===(t=this.cols)||void 0===t?void 0:t.list)&&void 0!==e?e:null:this.lastOrder=null!==(i=null===(o=this.cols)||void 0===o?void 0:o.list)&&void 0!==i?i:null}getColumnDefs(e){var t,i,o;return this.colDefCols&&(null===(t=this.beans.colDefFactory)||void 0===t?void 0:t.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,null!==(i=null===(o=this.cols)||void 0===o?void 0:o.list)&&void 0!==i?i:[],e))}setColSpanActive(){var e;this.colSpanActive=!(null===(e=this.cols)||void 0===e||!e.list.some(e=>null!=e.getColDef().colSpan))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode)return;if(this.pivotMode=e,!this.ready)return;this.refreshCols(!1,t);const{visibleCols:i,eventSvc:o}=this.beans;i.refresh(t),o.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var e;const t=null===(e=this.beans.pivotColsSvc)||void 0===e?void 0:e.columns;return this.pivotMode&&!(null===t||void 0===t||!t.length)}recreateColumnDefs(e){var t;if(!this.cols)return;null===(t=this.beans.autoColSvc)||void 0===t||t.updateColumns(e);const i=qo(e.source);this.createColsFromColDefs(i)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;Ho(this.beans,null===(e=this.colDefCols)||void 0===e?void 0:e.tree),super.destroy()}getColTree(){var e,t;return null!==(e=null===(t=this.cols)||void 0===t?void 0:t.tree)&&void 0!==e?e:[]}getColDefColTree(){var e,t;return null!==(e=null===(t=this.colDefCols)||void 0===t?void 0:t.tree)&&void 0!==e?e:[]}getColDefCols(){var e,t;return null!==(e=null===(t=this.colDefCols)||void 0===t?void 0:t.list)&&void 0!==e?e:null}getCols(){var e,t;return null!==(e=null===(t=this.cols)||void 0===t?void 0:t.list)&&void 0!==e?e:[]}forAllCols(e){var t,i,o,n,s;const{pivotResultCols:r,autoColSvc:a,selectionColSvc:l,groupHierarchyColSvc:d}=this.beans;Ao(null===(t=this.colDefCols)||void 0===t?void 0:t.list,e)||Ao(null===a||void 0===a||null===(i=a.columns)||void 0===i?void 0:i.list,e)||Ao(null===l||void 0===l||null===(o=l.columns)||void 0===o?void 0:o.list,e)||Ao(null===d||void 0===d||null===(n=d.columns)||void 0===n?void 0:n.list,e)||Ao(null===r||void 0===r||null===(s=r.getPivotResultCols())||void 0===s?void 0:s.list,e)}getColsForKeys(e){return e?e.map(e=>this.getCol(e)).filter(e=>null!=e):[]}getColDefCol(e){var t;return null!==(t=this.colDefCols)&&void 0!==t&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColById(e){var t,i;return null!==(t=null===(i=this.cols)||void 0===i?void 0:i.map[e])&&void 0!==t?t:null}getColFromCollection(e,t){var i,o,n;if(null==t)return null;const{map:s,list:r}=t;if("string"==typeof e&&s[e])return s[e];for(let c=0;c<r.length;c++)if(Qo(r[c],e))return r[c];const{autoColSvc:a,selectionColSvc:l,groupHierarchyColSvc:d}=this.beans;return null!==(i=null!==(o=null!==(n=null===a||void 0===a?void 0:a.getColumn(e))&&void 0!==n?n:null===l||void 0===l?void 0:l.getColumn(e))&&void 0!==o?o:null===d||void 0===d?void 0:d.getColumn(e))&&void 0!==i?i:null}},class extends ht{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e,t;return null!==(e=null===(t=this.topRowBounds)||void 0===t?void 0:t.rowIndex)&&void 0!==e?e:-1}getLastRow(){var e,t;return null!==(e=null===(t=this.bottomRowBounds)||void 0===t?void 0:t.rowIndex)&&void 0!==e?e:-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return e&&t?Math.max(t.rowTop+t.rowHeight-e.rowTop,0):0}getCurrentPagePixelRange(){var e;const{topRowBounds:t,bottomRowBounds:i}=this;return{pageFirstPixel:null!==(e=null===t||void 0===t?void 0:t.rowTop)&&void 0!==e?e:0,pageLastPixel:i?i.rowTop+i.rowHeight:0}}calculateBounds(e,t){const{rowModel:i}=this.beans,o=i.getRowBounds(e);o&&(o.rowIndex=e),this.topRowBounds=o;const n=i.getRowBounds(t);n&&(n.rowIndex=t),this.bottomRowBounds=n,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var e,t;const i=null!==(e=null===(t=this.topRowBounds)||void 0===t?void 0:t.rowTop)&&void 0!==e?e:0;this.pixelOffset!==i&&(this.pixelOffset=i,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},class extends ht{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){var t,i,o,n,s;this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:null!==(t=null===e||void 0===e?void 0:e.animate)&&void 0!==t&&t,newData:null!==(i=null===e||void 0===e?void 0:e.newData)&&void 0!==i&&i,newPage:null!==(o=null===e||void 0===e?void 0:e.newPage)&&void 0!==o&&o,newPageSize:null!==(n=null===e||void 0===e?void 0:e.newPageSize)&&void 0!==n&&n,keepRenderedRows:null!==(s=null===e||void 0===e?void 0:e.keepRenderedRows)&&void 0!==s&&s})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}},class extends ht{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const e of this.getAllCellCtrls())e.onCellSelectionChanged()},t=()=>{for(const e of this.getAllCellCtrls())e.updateRangeBordersIfRangeCount()},i=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},o=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>o()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{zi(this.gos)?i():o()});zi(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",e=>{let{currentValue:t,previousValue:i}=e;(!i&&t||i&&!t)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:i}=this.beans;if(i&&this.addManagedPropertyListener("showOpenedGroup",()=>{const e=i.columns;e.length&&this.refreshCells({columns:e,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const e=this.gridBodyCtrl;e.setStickyTopHeight(0),e.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=pi(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new ov(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e,t;return null!==(e=null===(t=this.stickyRowFeature)||void 0===t?void 0:t.stickyTopRowCtrls)&&void 0!==e?e:[]}getStickyBottomRowCtrls(){var e,t;return null!==(e=null===(t=this.stickyRowFeature)||void 0===t?void 0:t.stickyBottomRowCtrls)&&void 0!==e?e:[]}updateAllRowCtrls(){var e,t;const i=Object.values(this.rowCtrlsByRowIndex),o=Object.values(this.zombieRowCtrls),n=null!==(e=null===(t=this.cachedRowCtrls)||void 0===t?void 0:t.getEntries())&&void 0!==e?e:[];o.length>0||n.length>0?this.allRowCtrls=[...i,...o,...n]:this.allRowCtrls=i}isCellBeingRendered(e,t){var i;const o=this.rowCtrlsByRowIndex[e];if(!t||!o)return!!o;if(o.isFullWidth())return!0;return!!(null===(i=this.beans.spannedRowRenderer)||void 0===i?void 0:i.getCellByPosition({rowIndex:e,column:t,rowPinned:null}))||!!o.getCellCtrl(t)||!o.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(null!=(null===e||void 0===e?void 0:e.rowIndex)&&!e.rowPinned){var t;const i=null!==(t=this.beans.colModel.getCol(e.column))&&void 0!==t?t:void 0;this.isCellBeingRendered(e.rowIndex,i)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const i of this.getAllCellCtrls())t.onFlashCells(i,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const e=e=>{for(const i of this.getAllCellCtrls())i.column===t&&e(i)},i=()=>{e(e=>e.onLeftChanged())},o=()=>{e(e=>e.onWidthChanged())},n=()=>{e(e=>e.onFirstRightPinnedChanged())},s=()=>{e(e=>e.onLastLeftPinnedChanged())},r=()=>{e(e=>e.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",o),t.__addEventListener("firstRightPinnedChanged",n),t.__addEventListener("lastLeftPinnedChanged",s),t.__addEventListener("colDefChanged",r),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",o),t.__removeEventListener("firstRightPinnedChanged",n),t.__removeEventListener("lastLeftPinnedChanged",s),t.__removeEventListener("colDefChanged",r)})}}onDomLayoutChanged(){const e=pi(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];for(const o of this.getAllRowCtrls()){var i;const n=null===(i=o.getCellCtrl(e,!0))||void 0===i?void 0:i.eGui;n&&t.push(n)}return t}refreshFloatingRowComps(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,i){var o;const{pinnedRowModel:n,beans:s,printLayout:r}=this,a=Object.fromEntries(e.map(e=>[e.rowNode.id,e]));null===n||void 0===n||n.forEachPinnedRow(t,(o,l)=>{const d=e[l];d&&void 0===n.getPinnedRowById(d.rowNode.id,t)&&(d.destroyFirstPass(),d.destroySecondPass()),o.id in a&&i?(e[l]=a[o.id],delete a[o.id]):e[l]=new Gg(o,s,!1,!1,r)});const l=null!==(o="top"===t?null===n||void 0===n?void 0:n.getPinnedTopRowCount():null===n||void 0===n?void 0:n.getPinnedBottomRowCount())&&void 0!==o?o:0;e.length=l}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.sticky){var o;null===(o=this.stickyRowFeature)||void 0===o||o.refreshStickyNode(e)}else{if(null!==(t=this.cachedRowCtrls)&&void 0!==t&&t.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.rowNode===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}i||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;null!==t&&void 0!==t&&t.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"}));if(null!=e){for(const t of null!==e&&void 0!==e?e:[])this.redrawRow(t,!0);this.dispatchDisplayedRowsChanged(!1)}else this.redrawAfterModelUpdate()}redrawAfterModelUpdate(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getLockOnRefresh();const i=null===(e=this.beans.focusSvc)||void 0===e?void 0:e.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(t);const o=!t.domLayoutChanged&&!!t.recycleRows,n=t.animate&&Si(this.gos),s=o?this.getRowsToRecycle():null;o||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:r,gos:a}=this;if(r){r.checkStickyRows();const e=r.extraTopHeight+r.extraBottomHeight;e&&this.updateContainerHeights(e)}this.recycleRows(s,n),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(a.get("enableRowPinning")?o:void 0),this.dispatchDisplayedRowsChanged(),null!=i&&this.restoreFocusedCell(i),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");var o;t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),null===(o=this.stickyRowFeature)||void 0===o||o.resetOffsets())}updateContainerHeights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{rowContainerHeight:t}=this;if(this.printLayout)return void t.setModelHeight(null);let i=this.pageBounds.getCurrentPageHeight();0===i&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(li(252));this.refreshInProgress=!0,null===(e=(t=this.beans.frameworkOverrides).getLockOnRefresh)||void 0===e||e.call(t)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,null===(e=(t=this.beans.frameworkOverrides).releaseLockOnRefresh)||void 0===e||e.call(t)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,i=this.findPositionToFocus(e);i?e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned?t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(oo(this.gos,(0,n.A)((0,n.A)({},i),{},{forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))):t.setFocusedCell((0,n.A)((0,n.A)({},i),{},{preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0})):t.focusHeaderPosition({headerPosition:{headerRowIndex:lc(this.beans)-1,column:e.column}})}findPositionToFocus(e){const{pagination:t,pageBounds:i}=this.beans;let o=e;for(null==o.rowPinned&&t&&i&&!t.isRowInPage(o.rowIndex)&&(o={rowPinned:null,rowIndex:i.getFirstRow()});o;){if(null==o.rowPinned&&i)if(o.rowIndex<i.getFirstRow()){if(o=$d(this.beans,{rowPinned:null,rowIndex:0}),!o)return null}else o.rowIndex>i.getLastRow()&&(o={rowPinned:null,rowIndex:i.getLastRow()});const t=this.getRowByPosition(o);if(null!==t&&void 0!==t&&t.isAlive())return(0,n.A)((0,n.A)({},t.getRowPosition()),{},{column:e.column});o=$d(this.beans,o)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let o=0;o<i;o++){const i=t[o].getAllCellCtrls(),n=i.length;for(let t=0;t<n;t++)e.push(i[t])}return e}getAllRowCtrls(){var e,t,i;const{spannedRowRenderer:o}=this.beans,n=this.getStickyTopRowCtrls(),s=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...n,...s,...null!==(e=null===o||void 0===o?void 0:o.getCtrls("top"))&&void 0!==e?e:[],...null!==(t=null===o||void 0===o?void 0:o.getCtrls("bottom"))&&void 0!==t?t:[],...null!==(i=null===o||void 0===o?void 0:o.getCtrls("center"))&&void 0!==i?i:[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){const o=this.rowCtrlsByRowIndex[t];o&&o.addEventListener(e,i)}refreshCells(){let{rowNodes:e,columns:t,force:i,suppressFlash:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={force:i,newData:!1,suppressFlash:o};for(const s of this.getCellCtrls(e,t))s.refreshOrDestroyCell(n);this.refreshFullWidth(e)}refreshRows(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||(t=!0,this.redrawRow(i.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=nv(e),i=this.getAllRowCtrls();return e&&t?i.filter(e=>sv(e.rowNode,t)):i}getCellCtrls(e,t){let i;v(t)&&(i={},t.forEach(e=>{const t=this.colModel.getCol(e);v(t)&&(i[t.getId()]=!0)}));const o=[];for(const n of this.getRowCtrls(e))for(const e of n.getAllCellCtrls()){const t=e.column.getId();i&&!i[t]||o.push(e)}return o}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(i,t),null===(e=this.stickyRowFeature)||void 0===e||e.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const i of Object.keys(this.rowCtrlsByRowIndex)){null==this.rowCtrlsByRowIndex[i].rowNode.id&&e.push(i)}this.removeRowCtrls(e);const t={};for(const i of Object.values(this.rowCtrlsByRowIndex)){t[i.rowNode.id]=i}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const i of e){const e=this.rowCtrlsByRowIndex[i];e&&(e.destroyFirstPass(t),e.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]}}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{focusSvc:t,animationFrameSvc:i}=this.beans,{afterScroll:o}=e;let n;const s=this.stickyRowFeature;s&&(n=(null===t||void 0===t?void 0:t.getFocusCellToUseAfterRefresh())||void 0);const r=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(s){l=s.checkStickyRows();const e=s.extraTopHeight+s.extraBottomHeight;e&&this.updateContainerHeights(e)}const d=this.firstRenderedRow!==r||this.lastRenderedRow!==a;if((!o||l||d)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,o),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(o&&!l),null!=n)){const e=null===t||void 0===t?void 0:t.getFocusCellToUseAfterRefresh();null!=n&&null==e&&(null===i||void 0===i||i.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){const i={};for(const n of e)i[n]=!0;const o=Object.keys(this.rowCtrlsByRowIndex).filter(e=>!i[e]);this.removeRowCtrls(o,t)}calculateIndexesToDraw(e){var t;const i=[];for(let a=this.firstRenderedRow;a<=this.lastRenderedRow;a++)i.push(a);const o=this.beans.pagination,n=null===(t=this.beans.focusSvc)||void 0===t||null===(t=t.getFocusedCell())||void 0===t?void 0:t.rowIndex;null!=n&&(n<this.firstRenderedRow||n>this.lastRenderedRow)&&(!o||o.isRowInPage(n))&&n<this.rowModel.getRowCount()&&i.push(n);const s=e=>{const t=e.rowNode.rowIndex;null!=t&&t!==n&&(t<this.firstRenderedRow||t>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(e)&&i.push(t)};for(const a of Object.values(this.rowCtrlsByRowIndex))s(a);if(e)for(const a of Object.values(e))s(a);i.sort((e,t)=>e-t);const r=[];for(let a=0;a<i.length;a++){const e=i[a],t=this.rowModel.getRow(e);t&&!t.sticky&&r.push(e)}return r}recycleRows(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(o,!t);for(const n of o)this.createOrUpdateRowCtrl(n,e,t,i);if(e){const{animationFrameSvc:o}=this.beans;(null===o||void 0===o?void 0:o.active)&&i&&!this.printLayout?o.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const i=t.rowNode.rowIndex;e.push(i.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=nv(e);return this.getAllRowCtrls().filter(e=>{if(!e.isFullWidth())return!1;const i=e.rowNode;return!(null!=t&&!sv(i,t))})}createOrUpdateRowCtrl(e,t,i,o){let n,s=this.rowCtrlsByRowIndex[e];s||(n=this.rowModel.getRow(e),v(n)&&v(t)&&t[n.id]&&n.alreadyRendered&&(s=t[n.id],t[n.id]=null));if(!s){if(n||(n=this.rowModel.getRow(e)),!v(n))return;s=this.createRowCon(n,i,o)}n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s}destroyRowCtrls(e,t){const i=[];if(e)for(const o of Object.values(e))if(o)if(this.cachedRowCtrls&&o.isCacheable())this.cachedRowCtrls.addRow(o);else if(o.destroyFirstPass(!t),t){const e=o.instanceId;this.zombieRowCtrls[e]=o,i.push(()=>{o.destroySecondPass(),delete this.zombieRowCtrls[e]})}else o.destroySecondPass();t&&(i.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const e of i)e()},400))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*Ci(this.beans)}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:i}=this;let o,n;if(e.updateOffset(),i.isRowsToRender())if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),o=t.getFirstRow(),n=t.getLastRow();else{const s=this.getRowBufferInPixels(),r=this.ctrlsSvc.getScrollFeature(),a=this.gos.get("suppressRowVirtualisation");let l,d,c=!1;do{const i=t.getPixelOffset(),{pageFirstPixel:o,pageLastPixel:n}=t.getCurrentPagePixelRange(),u=e.divStretchOffset,h=r.getVScrollPosition(),p=h.top,g=h.bottom;a?(l=o+u,d=n+u):(l=Math.max(p+i-s,o)+u,d=Math.min(g+i+s,n)+u),this.firstVisibleVPixel=Math.max(p+i,o)+u,this.lastVisibleVPixel=Math.min(g+i,n)+u,c=this.ensureAllRowsInRangeHaveHeightsCalculated(l,d)}while(c);let u=i.getRowIndexAtPixel(l),h=i.getRowIndexAtPixel(d);const p=t.getFirstRow(),g=t.getLastRow();u<p&&(u=p),h>g&&(h=g),o=u,n=h}else o=0,n=-1;const s=pi(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);s&&!r&&n-o>a&&(n=o+a);const l=o!==this.firstRenderedRow,d=n!==this.lastRenderedRow;(l||d)&&(this.firstRenderedRow=o,this.lastRenderedRow=n,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:o,lastRow:n}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,je(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var i,o;const n=null===(i=this.pinnedRowModel)||void 0===i?void 0:i.ensureRowHeightsValid(),s=null===(o=this.stickyRowFeature)||void 0===o?void 0:o.ensureRowHeightsValid(),{pageBounds:r,rowModel:a}=this,l=a.ensureRowHeightsValid(e,t,r.getFirstRow(),r.getLastRow());return(l||s)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),!!(s||l||n)&&(this.updateContainerHeights(),!0)}doNotUnVirtualiseRow(e){var t;const i=!1,o=e.rowNode,n=this.focusSvc.isRowFocused(o.rowIndex,o.rowPinned),s=null===(t=this.editSvc)||void 0===t?void 0:t.isEditing(e),r=o.detail;if(!(n||s||r))return i;return!!this.isRowPresent(o)||i}isRowPresent(e){var t,i;return!!this.rowModel.isRowPresent(e)&&(null===(t=null===(i=this.beans.pagination)||void 0===i?void 0:i.isRowInPage(e.rowIndex))||void 0===t||t)}createRowCon(e,t,i){var o,n,s;const r=null!==(o=null===(n=this.cachedRowCtrls)||void 0===n?void 0:n.getRow(e))&&void 0!==o?o:null;if(r)return r;const a=i&&!this.printLayout&&!(null===(s=this.beans.animationFrameSvc)||void 0===s||!s.active);return new Gg(e,this.beans,t,a,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(e=>e.rowNode);return[...this.getStickyTopRowCtrls().map(e=>e.rowNode),...e,...this.getStickyBottomRowCtrls().map(e=>e.rowNode)]}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(e=>e.rowNode.rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(e=>e.rowNode.rowIndex===i)||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},class extends ht{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc,this.formulaDataSvc=e.formulaDataSvc}postConstruct(){this.initialised||this.init()}init(){const{gos:e,valueCache:t}=this;this.executeValueGetter=t?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=hi(e),this.cellExpressions=e.get("enableCellExpressions"),this.isTreeData=e.get("treeData"),this.initialised=!0;const i=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addListener("cellValueChanged",i,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",i,!0)),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValueForDisplay(e){const{column:t,node:i,includeValueFormatted:o,useRawFormula:n,exporting:s,source:r="ui"}=e,{showRowGroupColValueSvc:a}=this.beans,l=!t&&i.group,d=null===t||void 0===t?void 0:t.colDef.showRowGroup,c=!this.isTreeData||i.footer;if(a&&c&&(l||d)){const e=a.getGroupValue(i,t);if(null==e)return{value:null,valueFormatted:null};if(!o)return{value:e.value,valueFormatted:null};const n=a.formatAndPrefixGroupColValue(e,t,s);return{value:e.value,valueFormatted:n}}if(!t)return{value:i.key,valueFormatted:null};const u=i.leafGroup&&this.colModel.isPivotMode(),h=i.group&&i.expanded&&!i.footer&&!u,p=this.gos.get("groupSuppressBlankHeader")||!i.sibling,g=h&&!p;let v=this.getValue(t,i,g,r),m=v;const{formula:f}=this.beans,C=o&&!(s&&!1===t.colDef.useValueFormatterForExport);return t.isAllowFormula()&&null!==f&&void 0!==f&&f.isFormula(v)&&(n?(v=f.normaliseFormula(v,!0),m=f.resolveValue(t,i)):(v=f.resolveValue(t,i),m=v)),{value:v,valueFormatted:C?this.formatValue(t,i,m):null}}getValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";if(this.initialised||this.init(),!t)return;if(this.hasEditSvc&&"ui"===o){const i=this.editSvc;if(i.isEditing()){const o=i.getCellDataValue({rowNode:t,column:e},!0);if(void 0!==o)return o}}const n=e.getColDef().showRowGroup;if("string"===typeof n){var s,r;if((null!==(s=null===(r=this.beans.rowGroupColsSvc)||void 0===r?void 0:r.getColumnIndex(n))&&void 0!==s?s:-1)>t.level)return null}let a=this.resolveValue(e,t,i);if(this.cellExpressions&&F(a)){const i=a.substring(1);a=this.executeValueGetter(i,t.data,e,t)}return a}getFormulaFromDataSource(e,t){const i=this.formulaDataSvc;if(null===i||void 0===i||!i.hasDataSource()||!e.isAllowFormula())return;const o=i.getFormula({column:e,rowNode:t});return F(o)?o:void 0}resolveValue(e,t,i){const o=e.getColDef(),n=e.getColId(),s=this.isTreeData,r=this.getFormulaFromDataSource(e,t);if(void 0!==r)return r;const a=!i&&t.aggData&&void 0!==t.aggData[n];if(s&&a)return t.aggData[n];const l=t.data,d=o.field;if(s&&o.valueGetter)return this.executeValueGetter(o.valueGetter,l,e,t);if(s&&d&&l)return Ih(l,d,e.isFieldContainsDots());const c=t.groupData;if(c&&n in c)return t.groupData[n];if(a)return t.aggData[n];const u=o.showRowGroup,h="string"!==typeof u||!t.group,p=this.isSsrm&&i&&!!o.aggFunc,g=this.isSsrm&&t.footer&&t.field&&(!0===u||u===t.field);if(o.valueGetter&&!p){if(!h)return;return this.executeValueGetter(o.valueGetter,l,e,t)}if(g)return Ih(l,t.field,e.isFieldContainsDots());if(d&&l&&!p){if(!h)return;return Ih(l,d,e.isFieldContainsDots())}}parseValue(e,t,i,o){var n;const s=e.getColDef();if(s.allowFormula&&null!==(n=this.beans.formula)&&void 0!==n&&n.isFormula(i))return i;const r=s.valueParser;if(v(r)){var a;const n=oo(this.gos,{node:t,data:null===t||void 0===t?void 0:t.data,oldValue:o,newValue:i,colDef:s,column:e});return"function"===typeof r?r(n):null===(a=this.expressionSvc)||void 0===a?void 0:a.evaluate(r,n)}return i}getDeleteValue(e,t){var i;return v(e.getColDef().valueParser)&&null!==(i=this.parseValue(e,t,"",this.getValueForDisplay({column:e,node:t}).value))&&void 0!==i?i:null}formatValue(e,t,i,o){let n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const{expressionSvc:s}=this.beans;let r,a=null;const l=e.getColDef();if(o?r=o:n&&(r=l.valueFormatter),r){const o=t?t.data:null,n=oo(this.gos,{value:i,node:t,data:o,colDef:l,column:e});a="function"===typeof r?r(n):s?s.evaluate(r,n):null}else if(l.refData)return l.refData[i]||"";return null==a&&Array.isArray(i)&&(a=i.join(", ")),a}setValue(e,t,i,o){const n=this.colModel.getColDefCol(t);if(!e||!n)return!1;this.ensureRowData(e);const s=n.getColDef();if(!this.isSetValueSupported({column:n,newValue:i,colDef:s}))return!1;const r=oo(this.gos,{node:e,data:e.data,oldValue:this.getValue(n,e,void 0,o),newValue:i,colDef:s,column:n});r.newValue=i;const a=this.handleExternalFormulaChange({column:n,eventSource:o,newValue:i,setterParams:r,rowNode:e});if(null!==a)return a;let l=this.computeValueChange({column:n,newValue:i,params:r,rowData:e.data,valueSetter:s.valueSetter,field:s.field});return void 0===l&&(l=!0),!!l&&this.finishValueChange(e,n,r,o)}finishValueChange(e,t,i,o){var n;e.resetQuickFilterAggregateText(),null===(n=this.valueCache)||void 0===n||n.onDataChanged();const s=this.getValue(t,e);return this.dispatchCellValueChangedEvent(e,i,s,o),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,i,s,o),!0}ensureRowData(e){m(e.data)&&(e.data={})}isSetValueSupported(e){var t;const{column:i,newValue:o,colDef:n}=e,{field:s,valueSetter:r}=n,a=this.beans.formula,l=i.isAllowFormula()&&(null===a||void 0===a?void 0:a.isFormula(o)),d=!(null===(t=this.formulaDataSvc)||void 0===t||!t.hasDataSource());return!m(s)||!m(r)||d&&l?!(this.dataTypeSvc&&!this.dataTypeSvc.checkType(i,o))||(oi(135),!1):(oi(17),!1)}handleExternalFormulaChange(e){const{column:t,rowNode:i,newValue:o,eventSource:s,setterParams:r}=e,a=this.beans.formula,l=this.formulaDataSvc;if(null===l||void 0===l||!l.hasDataSource()||!t.isAllowFormula())return null;const d=null===a||void 0===a?void 0:a.isFormula(o),c=l.getFormula({column:t,rowNode:i});if(d){if(!(c!==o))return!1;l.setFormula({column:t,rowNode:i,formula:o});const e=null===a||void 0===a?void 0:a.resolveValue(t,i),d=t.getColDef();if(v(d.valueSetter)||!m(d.field)){const o=(0,n.A)((0,n.A)({},r),{},{newValue:e});this.computeValueChange({column:t,newValue:e,params:o,rowData:i.data,valueSetter:d.valueSetter,field:d.field})}return this.finishValueChange(i,t,r,s)}return void 0!==c&&l.setFormula({column:t,rowNode:i,formula:void 0}),null}computeValueChange(e){const{valueSetter:t,params:i,rowData:o,field:n,column:s,newValue:r}=e;var a;return v(t)?"function"===typeof t?t(i):null===(a=this.expressionSvc)||void 0===a?void 0:a.evaluate(t,i):this.setValueUsingField(o,n,r,s.isFieldContainsDots())}dispatchCellValueChangedEvent(e,t,i,o){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:i,value:i,source:o})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"===typeof t&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,o){if(!t)return!1;let n=!1;if(o){const o=t.split(".");let s=e;for(;o.length>0&&s;){const e=o.shift();0===o.length?(n=s[e]===i,n||(s[e]=i)):s=s[e]}}else n=e[t]===i,n||(e[t]=i);return!n}executeValueGetterWithValueCache(e,t,i,o){const n=i.getColId(),s=this.valueCache.getValue(o,n);if(void 0!==s)return s;const r=this.executeValueGetterWithoutValueCache(e,t,i,o);return this.valueCache.setValue(o,n,r),r}executeValueGetterWithoutValueCache(e,t,i,o){const n=oo(this.gos,{data:t,node:o,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,o)});let s;var r;"function"===typeof e?s=e(n):s=null===(r=this.expressionSvc)||void 0===r?void 0:r.evaluate(e,n);return s}getValueCallback(e,t){const i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),o=e.getColDef().keyCreator;let n=i;if(o){n=o(oo(this.gos,{value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"===typeof n||null==n||(n=String(n),"[object Object]"===n&&oi(121)),n}},class extends ht{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(Ts(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,null!=this.focusFallbackTimeout&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,null!=this.focusFallbackTimeout&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t?null:this.doesRowOrCellHaveBrowserFocus()?t:null}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader?null:this.isDomDataPresentInHierarchy(P(this.beans),Pc)?this.focusedHeader:null}doesRowOrCellHaveBrowserFocus(){const e=P(this.beans);return!!this.isDomDataPresentInHierarchy(e,Zl)||this.isDomDataPresentInHierarchy(e,ed)}isDomDataPresentInHierarchy(e,t){let i=e;for(;i;){if(bi(this.gos,i,t))return!0;i=i.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:o}=e,n={rowIndex:t,rowPinned:i,column:o,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return s&&(n.isFullWidthCell=s.isFullWidth()),n}clearFocusedCell(){if(null==this.focusedCell)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent((0,n.A)({type:"cellFocusCleared"},e))}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:i,rowPinned:o,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:r=!1,sourceEvent:a}=e,l=this.colModel.getCol(t);if(!l)return void(this.focusedCell=null);this.focusedCell={rowIndex:i,rowPinned:g(o),column:l};const d=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent((0,n.A)((0,n.A)((0,n.A)({type:"cellFocused"},d),this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams}),{},{forceBrowserFocus:s,preventScrollOnBrowserFocus:r,sourceEvent:a})),this.previousCellFocusParams=d}isCellFocused(e){return null!=this.focusedCell&&jd(e,this.focusedCell)}isHeaderWrapperFocused(e){if(null==this.focusedHeader)return!1;const{column:t,rowCtrl:{rowIndex:i,pinned:o}}=e,{column:n,headerRowIndex:s}=this.focusedHeader;return t===n&&i===s&&o==n.getPinned()}focusHeaderPosition(e){var t;if(this.setFocusRecovered(),oc(this.beans))return!1;const{direction:i,fromTab:o,allowUserOverride:n,event:s,fromCell:r,rowWithoutSpanValue:a,scroll:l=!0}=e;let{headerPosition:d}=e;if(r&&null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterHeaderActive())return this.focusAdvancedFilter(d);if(n){const e=this.focusedHeader,t=lc(this.beans);if(o){const o=this.gos.getCallback("tabToNextHeader");o&&(d=this.getHeaderPositionFromUserFunc({userFunc:o,direction:i,currentPosition:e,headerPosition:d,headerRowCount:t}))}else{const i=this.gos.getCallback("navigateToNextHeader");if(i&&s){d=i({key:s.key,previousHeaderPosition:e,nextHeaderPosition:d,headerRowCount:t,event:s})}}}return!!d&&this.focusProvidedHeaderPosition({headerPosition:d,direction:i,event:s,fromCell:r,rowWithoutSpanValue:a,scroll:l})}focusHeaderPositionFromUserFunc(e){if(oc(this.beans))return!1;const{userFunc:t,headerPosition:i,direction:o,event:n}=e,s=this.focusedHeader,r=lc(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:o,currentPosition:s,headerPosition:i,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:o,event:n})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:o,headerPosition:n,headerRowCount:s}=e,r=t({backwards:"Before"===i,previousHeaderPosition:o,nextHeaderPosition:n,headerRowCount:s});return!0===r?o:!1===r?null:r}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:o,rowWithoutSpanValue:n,event:s,scroll:r=!0}=e,{column:a,headerRowIndex:l}=t,{filterManager:d,ctrlsSvc:c,headerNavigation:u}=this.beans;if(this.focusedHeader&&(h=e.headerPosition,p=this.focusedHeader,h.headerRowIndex===p.headerRowIndex&&h.column===p.column))return!1;var h,p;if(-1===l)return null!==d&&void 0!==d&&d.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:s});r&&(null===u||void 0===u||u.scrollToColumn(a,i));const g=c.getHeaderRowContainerCtrl(a.getPinned()),v=(null===g||void 0===g?void 0:g.focusHeader(t.headerRowIndex,a,s))||!1;return u&&v&&(null!=n||o)&&(u.currentHeaderRowWithoutSpan=null!==n&&void 0!==n?n:-1),v}focusFirstHeader(){var e;if(null!==(e=this.overlays)&&void 0!==e&&e.exclusive&&this.focusOverlay())return!0;const t=this.visibleCols.allCols[0];if(!t)return!1;const i=Tp(this.beans,t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(e){var t;if(null!==(t=this.overlays)&&void 0!==t&&t.exclusive&&this.focusOverlay(!0))return!0;const i=lc(this.beans)-1,o=Do(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:o},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return null!==(t=this.filterManager)&&void 0!==t&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return null!=this.focusedCell&&(this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===g(t))}focusOverlay(e){var t,i;const o=(null===(t=this.overlays)||void 0===t?void 0:t.isVisible())&&(null===(i=this.overlays.eWrapper)||void 0===i?void 0:i.getGui());return!!o&&Ls(o,e)}focusGridView(e){var t;const{backwards:i=!1,canFocusOverlay:o=!0,event:n}=e;if(null!==(t=this.overlays)&&void 0!==t&&t.exclusive)return o&&this.focusOverlay(i);if(nc(this.beans))return i&&!oc(this.beans)?this.focusLastHeader():!(!o||!this.focusOverlay(i))||!i&&sc(this.beans,i);const s=i?qd(this.beans):Yd(this.beans);if(s){var r,a,l,d;const t=null!==(r=e.column)&&void 0!==r?r:null===(a=this.focusedHeader)||void 0===a?void 0:a.column,{rowIndex:o,rowPinned:h}=s,p=Qd(this.beans,s);if(!t||!p||null==o)return!1;if(t.isSuppressNavigable(p)){var c;const e=this.gos.get("enableRtl");let i;return i=n&&n.key!==us.TAB?n.key:e?us.LEFT:us.RIGHT,null===(c=this.beans.navigation)||void 0===c||c.navigateToNextCell(null,i,{rowIndex:o,column:t,rowPinned:h||null},!0),!0}if(null===(l=this.navigation)||void 0===l||l.ensureCellVisible({rowIndex:o,column:t,rowPinned:h}),i){var u;const e=this.rowRenderer.getRowByPosition(s);if(null!==e&&void 0!==e&&e.isFullWidth()&&null!==(u=this.navigation)&&void 0!==u&&u.tryToFocusFullWidthRow(s,i))return!0}return this.setFocusedCell({rowIndex:o,column:t,rowPinned:g(h),forceBrowserFocus:!0}),null===(d=this.beans.rangeSvc)||void 0===d||d.setRangeToCell({rowIndex:o,rowPinned:h,column:t}),!0}return!(!o||!this.focusOverlay(i))||!(!i||!this.focusLastHeader())}focusAdvancedFilter(e){var t,i;return this.advFilterFocusColumn=null===e||void 0===e?void 0:e.column,null!==(t=null===(i=this.beans.advancedFilter)||void 0===i?void 0:i.getCtrl().focusHeaderComp())&&void 0!==t&&t}focusNextFromAdvancedFilter(e,t){var i,o;const n=null!==(i=t?void 0:this.advFilterFocusColumn)&&void 0!==i?i:null===(o=this.visibleCols.allCols)||void 0===o?void 0:o[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:lc(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},class extends ba{initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(Dp),this.getSizeEl(Ep),this.getSizeEl(Ap),this.getSizeEl(Mp),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(Mp)}getRowBorderWidth(){return this.getCSSVariablePixelValue(Ap)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(Dp)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(Ep)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(Fp)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(Rp);return e-1+this.getCSSVariablePixelValue(Pp)*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(null==i||isNaN(i)||!isFinite(i))return null!==t&&e.style.setProperty("--ag-line-height",null),-1;const o="".concat(i,"px");return t!=o?(e.style.setProperty("--ag-line-height",o),i):""!=t?Number.parseFloat(t):-1}fireStylesChangedEvent(e){"rowBorderWidthChanged"===e&&this.refreshRowBorderWidthVariable(),super.fireStylesChangedEvent(e)}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(Ap);this.eRootDiv.style.setProperty("--ag-internal-row-border-width","".concat(e,"px"))}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&ni(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",['.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}.ag-drag-handle-disabled{opacity:.35;pointer-events:none}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-row-drag-indicator-color);border-radius:calc(var(--ag-row-drag-indicator-width)/2);content:"";height:var(--ag-row-drag-indicator-width);pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label,:where(.ag-header-group-cell-selectable) .ag-header-cell-comp-wrapper{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-column-drag-indicator-color);border-radius:calc(var(--ag-column-drag-indicator-width)/2);content:"";height:100%;position:absolute;top:0;width:var(--ag-column-drag-indicator-width)}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}:where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}}:where(.ag-ltr) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{right:-1px}}:where(.ag-rtl) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{left:-1px}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}']),function(e,t){for(const i of t.sort((e,t)=>e.moduleName.localeCompare(t.moduleName))){const t=i.css;t&&e.set("module-".concat(i.moduleName),t)}}(e,Array.from(new Set(It))),e}getDefaultTheme(){return yp}varError(e){oi(9,{variable:e})}themeError(e){ni(240,{theme:e})}shadowRootError(){ni(293)}},class extends ht{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=!0===this.gos.get("alwaysShowHorizontalScroll"),this.verticalScrollShowing=!0===this.gos.get("alwaysShowVerticalScroll"),this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;null!==e&&void 0!==e&&e.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var e;const t=this.ctrlsSvc.get("center");if(!t||null!==(e=this.colAnimation)&&void 0!==e&&e.isActive())return;const i={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(i),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"===typeof e&&e>=0?e:(null==Cs&&Ps(),Cs);null!=t&&(this.scrollbarWidth=t,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},class extends ht{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t,i;this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},null!==(e=null===(t=(i=this.beans.frameworkOverrides).runWhenReadyAsync)||void 0===t?void 0:t.call(i))&&void 0!==e&&e)}updateReady(){const e=Object.values(this.params);this.ready=23===e.length&&e.every(e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.isAlive())&&void 0!==t&&t})}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},class extends ht{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(null!==e&&void 0!==e?e:[],"gridInitializing"),i.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),At(t,"initialised successfully, enterprise = ".concat(t.isModuleRegistered("EnterpriseCore")))}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.beans.colModel.setColumnDefs(t,qo(e.source))}},class extends ht{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;const o=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:n}=this.beans;return i&&n?n.getHeaderName(e,o):o}getDisplayNameForProvidedColumnGroup(e,t,i){const o=null===t||void 0===t?void 0:t.getColGroupDef();return o?this.getHeaderName(o,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,o,n){const s=e.headerValueGetter;if(s){const l=oo(this.gos,{colDef:e,column:t,columnGroup:i,providedColumnGroup:o,location:n});return"function"===typeof s?s(l):"string"===typeof s?null!==(r=null===(a=this.beans.expressionSvc)||void 0===a?void 0:a.evaluate(s,l))&&void 0!==r?r:null:"";var r,a}return null!=e.headerName?e.headerName:e.field?(l=e.field)&&null!=l?l.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):"")).join(" "):null:"";var l}},class extends ht{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{visibleCols:o}=this,n=o.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!n)){if(this.scrollWidth=e,this.scrollPosition=t,o.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const i=o.bodyWidth;this.viewportLeft=i-t-e,this.viewportRight=i-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return null!==i&&void 0!==i?i:[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!function(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}(e))||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),o=this.viewportLeft-200,n=this.viewportRight+200;return!(t<o&&i<o)&&!(t>n&&i>n)}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,o=i.centerCols;return i.getColsForRow(e,o,t,e=>{const t=e.getLeft();return v(t)&&t>this.viewportLeft})}checkViewportColumns(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const i=e=>{const t=new Set,i={};for(const n of e){let e=n.getParent();const s=n.isSpanHeaderHeight();for(;e;){var o;if(t.has(e))break;if(s&&e.isPadding()){e=e.getParent();continue}const n=e.getProvidedColumnGroup().getLevel();null!==(o=i[n])&&void 0!==o||(i[n]=[]),i[n].push(e),t.add(e),e=e.getParent()}}return i};this.rowsOfHeadersToRenderLeft=i(e),this.rowsOfHeadersToRenderRight=i(t),this.rowsOfHeadersToRenderCenter=i(this.headerColsWithinViewport)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map(e=>"".concat(e.getId(),"-").concat(e.getPinned()||"normal")).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}},class extends ht{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return Bc(e,this.beans,null===t||void 0===t?void 0:t.column)}}],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:Ku,destroy:function(e){e.gridDestroySvc.destroy()},isDestroyed:function(e){return e.gridDestroySvc.destroyCalled},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,i){Yu(e,{[t]:i})},updateGridOptions:Yu,isModuleRegistered:function(e,t){const i=t.replace(/Module$/,"");return e.gos.isModuleRegistered(i)}},dependsOn:[Hh,wh,xh,hv,tg,Eh,ig,iv,vv,og,Vg,zg,Ug,ng,jh,zh,gv,Th,_g]},Cv={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1,Formula:1},wv=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],bv={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:wv,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...wv,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...wv,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},yv={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function Sv(e){return"".concat(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&("IntegratedCharts"===e||"Sparklines"===e)?"Module.with(AgChartsEnterpriseModule)":"Module")}function xv(e){let{moduleName:t,rowModelType:i}=e;return"To use the ".concat(t,"Module you must set the gridOption \"rowModelType='").concat(i,"'\"")}var Fv=e=>{let{reasonOrId:t,moduleName:i,gridScoped:o,gridId:n,rowModelType:s,additionalText:r,isUmd:a}=e;const l=function(e,t){const i=[];for(const o of Array.isArray(e)?e:[e]){const e=bv[o];if(e)for(const o of e){const e=yv[o];e&&e!==t||i.push(o)}else i.push(o)}return i}(i,s),d="string"===typeof t?t:Ev[t];if(a)return function(e,t){const i=t.filter(e=>"IntegratedCharts"===e||"Sparklines"===e);let o="";return!(null===globalThis||void 0===globalThis?void 0:globalThis.agCharts)&&i.length>0?o="Unable to use ".concat(e," as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.\n"):t.some(e=>Cv[e])&&(o+="Unable to use ".concat(e," as that requires the ag-grid-enterprise script to be included.\n")),o}(d,l);const c=l.filter(e=>"IntegratedCharts"===e||"Sparklines"===e),u=c.length>0?"".concat(c.map(e=>Sv(e)).join()," must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'."):"",h="Unable to use ".concat(d," as ").concat(l.length>1?"one of "+l.map(e=>Sv(e)).join(", "):Sv(l[0])," is not registered").concat(o?" for gridId: "+n:"",". ").concat(u," Check if you have registered the module:\n");return"".concat(h,"\n").concat((e=>{const t=e.map(e=>"import { ".concat(Sv(e)," } from '").concat(Cv[e]?"ag-grid-enterprise":"ag-grid-community","';"));if(e.some(e=>"IntegratedCharts"===e||"Sparklines"===e)){const e="import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';";t.push(e)}return"import { ModuleRegistry } from 'ag-grid-community'; \n".concat(t.join(" \n")," \n\nModuleRegistry.registerModules([ ").concat(e.map(e=>Sv(e,!0)).join(", ")," ]); \n\nFor more info see: ").concat(Qt,"/modules/")})(l))+(r?" \n\n".concat(r):"")},Rv=e=>"".concat(e," must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.\n\nimport { AgChartsEnterpriseModule } from 'ag-charts-enterprise';\nimport { ModuleRegistry } from 'ag-grid-community';\nimport { ").concat(e," } from 'ag-grid-enterprise';\n    \nModuleRegistry.registerModules([").concat(e,".with(AgChartsEnterpriseModule)]);\n    "),Pv={1:()=>"`rowData` must be an array",2:e=>{let{nodeId:t}=e;return"Duplicate node id '".concat(t,"' detected from getRowId callback, this could cause issues in your grid.")},3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:e=>{let{id:t}=e;return"Could not find row id=".concat(t,", data item was not found for this id")},5:e=>{let{data:t}=e;return["Could not find data item as object was not found.",t," Consider using getRowId to help the Grid find matching row data"]},6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:e=>{let{key:t}=e;return"Unknown key for navigation ".concat(t)},9:e=>{let{variable:t}=e;return"No value for ".concat(null===t||void 0===t?void 0:t.cssName,". This usually means that the grid has been initialised before styles have been loaded. The default value of ").concat(null===t||void 0===t?void 0:t.defaultValue," will be used and updated when styles load.")},10:e=>{let{eventType:t}=e;return"As of v33, the '".concat(t,"' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.")},11:()=>"No gridOptions provided to createGrid",12:e=>{let{colKey:t}=e;return["column ",t," not found"]},13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:e=>{let{groupPrefix:t}=e;return"Row IDs cannot start with ".concat(t,", this is a reserved prefix for AG Grid's row grouping feature.")},15:e=>{let{expression:t}=e;return["value should be either a string or a function",t]},16:e=>{let{expression:t,params:i,e:o}=e;return["Processing of the expression failed","Expression = ",t,"Params = ",i,"Exception = ",o]},17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>'You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"',21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:e=>{let{key:t}=e;return"".concat(t," is an initial property and cannot be updated.")},23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:e=>{let{id:t}=e;return["The getRowId callback must return a string. The ID ",t," is being cast to a string."]},26:e=>{let{fnName:t,preDestroyLink:i}=e;return"Grid API function ".concat(t,"() cannot be called as the grid has been destroyed.\n Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\n To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ").concat(i)},27:e=>{let{fnName:t,module:i}=e;return"API function '".concat(t,"' not registered to module '").concat(i,"'")},28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:e=>{let{toIndex:t}=e;return["tried to insert columns in invalid location, toIndex = ",t,"remember that you should not count the moving columns when calculating the new index"]},31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:e=>{let{key:t}=e;return"the column type '".concat(t,"' is a default column type and cannot be overridden.")},35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:e=>{let{t:t}=e;return"colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes"},37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:e=>{let{iconName:t}=e;return"provided icon '".concat(t,"' needs to be a string or a function")},39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:e=>{let{e:t,method:i}=e;return"".concat(t,"\n").concat((e=>"AG Grid: Unable to use the Clipboard API (navigator.clipboard.".concat(e,"()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API."))(i))},41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:e=>{let{iconName:t}=e;return"As of v33, icon '".concat(t,"' is deprecated. Use the icon CSS name instead.")},44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:e=>{let{parentCellDataType:t}=e;return"The data type definition ".concat(t," does not exist.")},46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:e=>{let{cellDataType:t}=e;return'Missing data type definition - "'.concat(t,'"')},48:e=>{let{property:t}=e;return'Cell data type is "object" but no Value '.concat(t," has been provided. Please either provide an object data type definition with a Value ").concat(t,', or set "colDef.value').concat(t,'"')},49:e=>{let{methodName:t}=e;return"Framework component is missing the method ".concat(t,"()")},50:e=>{let{compName:t}=e;return"Could not find component ".concat(t,", did you forget to configure this component?")},51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:e=>{let{colId:t}=e;return"setFilterModel() - no column found for colId: ".concat(t)},63:e=>{let{colId:t}=e;return"setFilterModel() - unable to fully apply model, filtering disabled for colId: ".concat(t)},64:e=>{let{colId:t}=e;return"setFilterModel() - unable to fully apply model, unable to create filter for colId: ".concat(t)},65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:e=>{let{guiFromFilter:t}=e;return"getGui method from filter returned ".concat(t,"; it should be a DOM element.")},70:e=>{let{newFilter:t}=e;return"Grid option quickFilterText only supports string inputs, received: ".concat(typeof t)},71:()=>"debounceMs is ignored when apply button is present",72:e=>{let{keys:t}=e;return["ignoring FilterOptionDef as it doesn't contain one of ",t]},73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:e=>{let{filterModelType:t}=e;return['Unexpected type of filter "',t,'", it looks like the filter was configured with incorrect Filter Options']},77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:e=>{let{param:t}=e;return"DateFilter ".concat(t," is not a number")},83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:e=>{let{index:t}=e;return"Invalid row index for ensureIndexVisible: ".concat(t)},89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:e=>{let{paginationPageSizeOption:t,pageSizeSet:i,pageSizesSet:o,pageSizeOptions:n}=e;return"'paginationPageSize=".concat(t,"'").concat(i?"":" (default value)",", but ").concat(t," is not included in").concat(o?"":" the default"," paginationPageSizeSelector=[").concat(null===n||void 0===n?void 0:n.join(", "),"].")},95:e=>{let{paginationPageSizeOption:t,paginationPageSizeSelector:i}=e;return"Either set '".concat(i,"' to an array that includes ").concat(t," or to 'false' to disable the page size selector.")},96:e=>{let{id:t,data:i}=e;return["Duplicate ID",t,"found for pinned row with data",i,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."]},97:e=>{let{colId:t}=e;return"cellEditor for column ".concat(t," is missing getGui() method")},98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:e=>{let{propertyName:t,componentName:i,agGridDefaults:o,jsComps:n}=e;const s=[],r=or({inputValue:i,allSuggestions:[...Object.keys(null!==o&&void 0!==o?o:[]).filter(e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e)),...Object.keys(null!==n&&void 0!==n?n:[]).filter(e=>!!n[e])],hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return s.push("Could not find '".concat(i,"' component. It was configured as \"").concat(t,": '").concat(i,"'\" but it wasn't found in the list of registered components.\n")),r.length>0&&s.push("         Did you mean: [".concat(r.slice(0,3),"]?\n")),s.push("If using a custom component check it has been registered correctly."),s},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:e=>{let{value:t,param:i}=e;return"Numeric value ".concat(t," passed to ").concat(i," param will be interpreted as ").concat(t,' seconds. If this is intentional use "').concat(t,'s" to silence this warning.')},105:e=>{let{e:t}=e;return["chart rendering failed",t]},106:()=>"Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ".concat(Qt,"/theming-migration/"),107:e=>{let{key:t,value:i}=e;return"Invalid value for theme param ".concat(t," - ").concat(i)},108:e=>{let{e:t}=e;return["chart update failed",t]},109:e=>{let{inputValue:t,allSuggestions:i}=e;const o=or({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return["Could not find '".concat(t,"' aggregate function. It was configured as \"aggFunc: '").concat(t,"'\" but it wasn't found in the list of registered aggregations."),o.length>0?"         Did you mean: [".concat(o.slice(0,3),"]?"):"","If using a custom aggregation function check it has been registered correctly."].join("\n")},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:e=>{let{component:t}=e;return"Could not find component with name of ".concat(t,". Is it in Vue.components?")},116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:e=>{let{chartId:t}=e;return"Unable to update chart. No active chart found with ID: ".concat(t,".")},126:()=>"unable to restore chart as no chart model is provided",127:e=>{let{allRange:t}=e;return"unable to create chart as ".concat(t?"there are no columns in the grid":"no range is selected",".")},128:e=>{let{feature:t}=e;return"".concat(t," is only available if using 'multiRow' selection mode.")},129:e=>{let{feature:t,rowModel:i}=e;return"".concat(t," is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ").concat(i,".")},130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:e=>{let{iconName:t}=e;return"icon '".concat(t,"' function should return back a string or a dom object")},134:e=>{let{iconName:t}=e;return"Did not find icon '".concat(t,"'")},135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:e=>{let{type:t,currentChartType:i}=e;return"Unable to update chart as a '".concat(t,"' update type is not permitted on a ").concat(i,".")},138:e=>{let{chartType:t}=e;return"invalid chart type supplied: ".concat(t)},139:e=>{let{customThemeName:t}=e;return"a custom chart theme with the name ".concat(t," has been supplied but not added to the 'chartThemes' list")},140:e=>{let{name:t}=e;return"no stock theme exists with the name '".concat(t,"' and no custom chart theme with that name was supplied to 'customChartThemes'")},141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:e=>{let{panel:t}=e;return"'".concat(t,"' is not a valid Chart Tool Panel name")},144:e=>{let{type:t}=e;return"Invalid charts data panel group name supplied: '".concat(t,"'")},145:e=>{let{group:t}=e;return"As of v32, only one charts customize panel group can be expanded at a time. '".concat(t,"' will not be expanded.")},146:e=>{let{comp:t}=e;return"Unable to instantiate component '".concat(t,"' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.")},147:e=>{let{group:t}=e;return"Invalid charts customize panel group name supplied: '".concat(t,"'")},148:e=>{let{group:t}=e;return"invalid chartGroupsDef config '".concat(t,"'")},149:e=>{let{group:t,chartType:i}=e;return"invalid chartGroupsDef config '".concat(t,".").concat(i,"'")},150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:e=>{let{chartType:t}=e;return"invalid chartType '".concat(t,"' supplied in 'seriesChartTypes', converting to 'line' instead.")},152:e=>{let{colId:t}=e;return"no 'seriesChartType' found for colId = '".concat(t,"', defaulting to 'line'.")},153:e=>{let{chartDataType:t}=e;return"unexpected chartDataType value '".concat(t,"' supplied, instead use 'category', 'series' or 'excluded'")},154:e=>{let{colId:t}=e;return"cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ".concat(t)},155:e=>{let{option:t}=e;return"'".concat(t,"' is not a valid Chart Toolbar Option")},156:e=>{let{panel:t}=e;return"Invalid panel in chartToolPanelsDef.panels: '".concat(t,"'")},157:e=>{let{unrecognisedGroupIds:t}=e;return["unable to find group(s) for supplied groupIds:",t]},158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:e=>{let{id:t,dataType:i}=e;return"Unrecognized data type for excel export [".concat(t,".dataType=").concat(i,"]")},163:e=>{let{featureName:t}=e;return"Excel table export does not work with ".concat(t,". The exported Excel file will not contain any Excel tables.\n Please turn off ").concat(t," to enable Excel table exports.")},164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:e=>{let{unrecognisedGroupIds:t}=e;return["unable to find groups for these supplied groupIds:",t]},167:e=>{let{unrecognisedColIds:t}=e;return["unable to find columns for these supplied colIds:",t]},168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:e=>{let{providedStrategy:t}=e;return"invalid cellRendererParams.refreshStrategy = ".concat(t," supplied, defaulting to refreshStrategy = 'rows'.")},171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:e=>{let{group:t}=e;return"invalid chartGroupsDef config '".concat(t,"'")},174:e=>{let{group:t,chartType:i}=e;return"invalid chartGroupsDef config '".concat(t,".").concat(i,"'")},175:e=>{let{menuTabName:t,itemsToConsider:i}=e;return["Trying to render an invalid menu item '".concat(t,"'. Check that your 'menuTabs' contains one of "),i]},176:e=>{let{key:t}=e;return"unknown menu item type ".concat(t)},177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:e=>{let{colId:t}=e;return"column ".concat(t," is not visible")},179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:e=>{let{parentGroupData:t,childNodeData:i}=e;return["duplicate group keys for row data, keys should be unique",[t,i]]},185:e=>{let{data:t}=e;return["getDataPath() should not return an empty path",[t]]},186:e=>{let{rowId:t,rowData:i,duplicateRowsData:o}=e;return["duplicate group keys for row data, keys should be unique",t,i,...null!==o&&void 0!==o?o:[]]},187:e=>{let{rowId:t,firstData:i,secondData:o}=e;return["Duplicate node id ".concat(t,". Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),"first instance",i,"second instance",o]},188:e=>"getRowId callback must be provided for Server Side Row Model ".concat((null===e||void 0===e?void 0:e.feature)||"selection"," to work correctly."),189:e=>{let{startRow:t}=e;return"invalid value ".concat(t," for startRow, the value should be >= 0")},190:e=>{let{rowGroupId:t,data:i}=e;return["null and undefined values are not allowed for server side row model keys",t?"column = ".concat(t):"","data is ",i]},194:e=>{let{method:t}=e;return"calling gridApi.".concat(t,"() is only possible when using rowModelType=`clientSide`.")},195:e=>{let{justCurrentPage:t}=e;return"selecting just ".concat(t?"current page":"filtered"," only works when gridOptions.rowModelType='clientSide'")},196:e=>{let{key:t}=e;return"Provided ids must be of string type. Invalid id provided: ".concat(t)},197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:Fv,201:e=>{let{rowModelType:t}=e;return"Could not find row model for rowModelType = ".concat(t)},202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:e=>{let{duplicateIdText:t}=e;return"Unable to display rows as duplicate row ids (".concat(t,") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.")},206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>"Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ".concat(Qt,"/filter-set-filter-list/#filter-value-types"),210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:e=>{let{key:t}=e;return"unable to lookup Tool Panel as invalid key supplied: ".concat(t)},215:e=>{let{key:t,defaultByKey:i}=e;return"the key ".concat(t," is not a valid key for specifying a tool panel, valid keys are: ").concat(Object.keys(null!==i&&void 0!==i?i:{}).join(","))},216:e=>{let{name:t}=e;return"Missing component for '".concat(t,"'")},217:e=>{let{invalidColIds:t}=e;return["unable to find grid columns for the supplied colDef(s):",t]},218:e=>{let{property:t,defaultOffset:i}=e;return"".concat(t," must be a number, the value you provided is not a valid number. Using the default of ").concat(i,"px.")},219:e=>{let{property:t}=e;return"Property ".concat(t," does not exist on the target object.")},220:e=>{let{lineDash:t}=e;return"'".concat(t,"' is not a valid 'lineDash' option.")},221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:e=>{let{menuItemOrString:t}=e;return"unrecognised menu item ".concat(t)},230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:e=>{let{methodName:t}=e;return"Framework component is missing the method ".concat(t,"()")},234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:e=>{let{theme:t}=e;return'theme grid option must be a Theming API theme object or the string "legacy", received: '.concat(t)},243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>"Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. \nPlease rebuild the selection state and reapply it.",248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:e=>{let{chartType:t}=e;return"AG Grid: Unable to create chart as an invalid chartType = '".concat(t,"' was supplied.")},252:()=>"cannot get grid to draw rows when it is in the middle of drawing rows. \nYour code probably called a grid API method while the grid was in the render stage. \nTo overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). \nTo see what part of your code that caused the refresh check this stacktrace.",253:e=>{let{version:t}=e;return["Illegal version string: ",t]},254:()=>"Cannot create chart: no chart themes available.",255:e=>{let{point:t}=e;return"Lone surrogate U+".concat(null===t||void 0===t?void 0:t.toString(16).toUpperCase()," is not a scalar value")},256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>Rv("IntegratedChartsModule"),258:()=>Rv("SparklinesModule"),259:e=>{let{part:t}=e;return"the argument to theme.withPart must be a Theming API part object, received: ".concat(t)},260:e=>{let{propName:t,compName:i,gridScoped:o,gridId:n,rowModelType:s}=e;return Fv({reasonOrId:"AG Grid '".concat(t,"' component: ").concat(i),moduleName:Np[i],gridId:n,gridScoped:o,rowModelType:s})},261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:e=>{let{colId:t}=e;return"Unable to infer chart data type for column '".concat(t,'\' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ').concat(Qt,"/integrated-charts-range-chart#coldefchartdatatype .")},266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:e=>{let{id:t,parentId:i}=e;return"Cycle detected for row with id='".concat(t,"' and parent id='").concat(i,"'. Resetting the parent for row with id='").concat(t,"' and showing it as a root-level node.")},271:e=>{let{id:t,parentId:i}=e;return"Parent row not found for row with id='".concat(t,"' and parent id='").concat(i,"'. Showing row with id='").concat(t,"' as a root-level node.")},272:()=>"No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:\n                    \n    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';\n    \n    ModuleRegistry.registerModules([ AllCommunityModule ]);\n    ",273:e=>{let{providedId:t,usedId:i}=e;return"Provided column id '".concat(t,"' was already in use, ensure all column and group ids are unique. Using '").concat(i,"' instead.")},274:e=>{let{prop:t}=e,i="Since v33, ".concat(t," has been deprecated.");switch(t){case"maxComponentCreationTimeMs":i+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":i+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":i+=" For multiple versions AgGridReact does not support children."}return i},275:xv,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:e=>{let{colId:t}=e;return"'enableFilterHandlers' is set to true, but column '".concat(t,"' does not have 'filter.doesFilterPass' or 'filter.handler' set.")},278:e=>{let{colId:t}=e;return"Unable to create filter handler for column '".concat(t,"'")},279:e=>{},280:e=>{let{colId:t}=e;return"'name' must be provided for custom filter components for column '".concat(t)},281:e=>{let{colId:t}=e;return"Filter for column '".concat(t,"' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.")},282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:e=>{let{rowModelType:t}=e;return"Row Model '".concat(t,"' is not supported with Batch Editing")},290:e=>{let{rowIndex:t,rowPinned:i}=e;return"Row with index '".concat(t,"' and pinned state '").concat(i,"' not found")},291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:e=>{let{colId:t}=e;return"The Multi Filter for column '".concat(t,"' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.")},293:()=>"The grid was initialised detached from the DOM and was then inserted into a Shadow Root. Theme styles are probably broken. Pass the themeStyleContainer grid option to let the grid know where in the document to insert theme CSS.",294:()=>"When using the `agRichSelectCellEditor` setting `filterListAsync = true` requires `allowTyping = true` and the `values()` callback must return a Promise of filtered values.",295:e=>{let{blockedService:t}=e;return"colDef.allowFormula is not supported with ".concat(t,". Formulas has been turned off.")},296:()=>"Since v35, `api.hideOverlay()` does not hide the overlay when `activeOverlay` is set. Set `activeOverlay=null` instead.",297:()=>'`api.hideOverlay()` does not hide the no matching rows overlay as it is only controlled by grid state. Set `suppressOverlays=["noMatchingRows"] to not show it.'};function Dv(e,t){const i=Pv[e];if(!i)return["Missing error text for error id ".concat(e,"!")];const o=i(t),n=ti(e,t),s="\nSee ".concat(n);return Array.isArray(o)?o.concat(s):[o,s]}var Ev={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},Av=new WeakMap,Mv=new WeakMap;function Tv(e,t,i){if(!t)return ni(11),{};let o;if(null===i||void 0===i||!i.setThemeOnGridDiv){const t=cl({tag:"div"});t.style.height="100%",e.appendChild(t),e=t,o=()=>e.remove()}return(new Iv).create(e,t,t=>{const i=new Hu(e);t.createBean(i)},void 0,i,o)}var kv=1,Iv=class{create(e,t,i,o,n,s){var r;const a=Rt.applyGlobalGridOptions(t),l=null!==(r=a.gridId)&&void 0!==r?r:String(kv++),d=this.getRegisteredModules(n,l,a.rowModelType),c=this.createBeansList(a.rowModelType,d,l),u=this.createProvidedBeans(e,a,n);if(!c)return;const h={providedBeanInstances:u,beanClasses:c,id:l,beanInitComparator:Pu,beanDestroyComparator:Du,derivedBeans:[Fu],destroyCallback:()=>{Mv.delete(g),Av.delete(e),function(e){delete Nt[e]}(l),null===s||void 0===s||s()}},p=new fa(h);this.registerModuleFeatures(p,d),i(p),p.getBean("syncSvc").start(),null===o||void 0===o||o(p);const g=p.getBean("gridApi");return Av.set(e,g),Mv.set(g,e),g}getRegisteredModules(e,t,i){var o;return Ht(fv,void 0,!0),null===e||void 0===e||null===(o=e.modules)||void 0===o||o.forEach(e=>Ht(e,t)),function(e,t){var i,o,n,s,r;const a=null!==(i=Nt[e])&&void 0!==i?i:{};return[...Object.values(null!==(o=Lt.all)&&void 0!==o?o:{}),...Object.values(null!==(n=a.all)&&void 0!==n?n:{}),...Object.values(null!==(s=Lt[t])&&void 0!==s?s:{}),...Object.values(null!==(r=a[t])&&void 0!==r?r:{})]}(t,Lv(i))}registerModuleFeatures(e,t){const i=e.getBean("registry"),o=e.getBean("apiFunctionSvc");for(const n of t){i.registerModule(n);const e=n.apiFunctions;if(e){const t=Object.keys(e);for(const i of t)null===o||void 0===o||o.addFunction(i,e[i])}}}createProvidedBeans(e,t,i){let o=i?i.frameworkOverrides:null;m(o)&&(o=new xu);const n={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:o};return null!==i&&void 0!==i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(e,t,i){const o={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},n=Lv(e),s=o[n];if(!s)return void si(201,{rowModelType:n},"Unknown rowModelType ".concat(n,"."));if(!Ot)return void si(272,void 0,"No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:\n                    \n    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';\n    \n    ModuleRegistry.registerModules([ AllCommunityModule ]);\n    ");if(!e){const e=Object.entries(o).filter(e=>{let[t,o]=e;return zt(o,i,t)});if(1==e.length){const[t,i]=e[0];if(t!==n){const e={moduleName:i,rowModelType:t};return void si(275,e,xv(e))}}}if(!zt(s,i,n)){const e=jt(),t="rowModelType = '".concat(n,"'"),o=e?"Unable to use ".concat(t," as that requires the ag-grid-enterprise script to be included.\n"):"Missing module ".concat(s,"Module for rowModelType ").concat(n,".");return void si(200,{reasonOrId:t,moduleName:s,gridScoped:Wt(),gridId:i,rowModelType:n,isUmd:e},o)}const r=new Set;for(const l of t)for(const e of null!==(a=l.beans)&&void 0!==a?a:[]){var a;r.add(e)}return Array.from(r)}};function Lv(e){return null!==e&&void 0!==e?e:"clientSide"}function Nv(e){const t=e.rowModel;return"clientSide"===t.getType()?t:void 0}function Ov(e){const t=e.rowModel;return"infinite"===t.getType()?t:void 0}function Gv(e){const t=e.rowModel;return"serverSide"===t.getType()?t:void 0}function Bv(e){return e.filter(e=>void 0!=e)}function Vv(e){const t=[];for(const{groupId:i,open:o}of e)o&&t.push(i);return t.length?{openColumnGroupIds:t}:void 0}var Hv=class{wrap(e,t,i,o){const n=this.createWrapper(e,o);for(const s of null!==t&&void 0!==t?t:[])this.createMethod(n,s,!0);for(const s of null!==i&&void 0!==i?i:[])this.createMethod(n,s,!1);return n}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&oi(49,{methodName:t}),null)}}};function zv(e){return"whenTruncated"===e.get("tooltipShowMode")}function Wv(e,t){return zv(e)?Le(t):void 0}function Uv(e,t){if("number"!==typeof e)return"";const i=t(),o=i("thousandSeparator",","),n=i("decimalSeparator",".");return e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1".concat(o))}var jv=class extends ht{getFileName(e){var t;const i=this.getDefaultFileExtension();return null!==(t=e)&&void 0!==t&&t.length||(e=this.getDefaultFileName()),e.includes(".")?e:"".concat(e,".").concat(i)}getData(e){return this.beans.gridSerializer.serialize(this.createSerializingSession(e),e)}getDefaultFileName(){return"export.".concat(this.getDefaultFileExtension())}},_v=class{constructor(e){const{colModel:t,rowGroupColsSvc:i,colNames:o,valueSvc:n,gos:s,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=o,this.valueSvc=n,this.gos=s,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=d}prepare(e){}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return null!==t&&void 0!==t?t:""}extractRowCellValue(e){var t,i;const{column:o,node:n,currentColumnIndex:s,accumulatedRowIndex:r,type:a,useRawFormula:l}=e,d=0===s&&Mi(this.gos,n,this.colModel.isPivotMode());var c,u;if(this.processRowGroupCallback&&(this.gos.get("treeData")||n.group)&&(o.isRowGroupDisplayed(null!==(t=null===(i=n.rowGroupColumn)||void 0===i?void 0:i.getColId())&&void 0!==t?t:"")||d))return{value:null!==(c=this.processRowGroupCallback(oo(this.gos,{column:o,node:n})))&&void 0!==c?c:""};if(this.processCellCallback)return{value:null!==(u=this.processCellCallback(oo(this.gos,{accumulatedRowIndex:r,column:o,node:n,value:this.valueSvc.getValueForDisplay({column:o,node:n}).value,type:a,parseValue:e=>this.valueSvc.parseValue(o,n,e,this.valueSvc.getValue(o,n,void 0)),formatValue:e=>{var t;return null!==(t=this.valueSvc.formatValue(o,n,e))&&void 0!==t?t:e}})))&&void 0!==u?u:""};const h=this.gos.get("treeData"),p=this.valueSvc,g=-1===n.level&&n.footer,v=!0===o.colDef.showRowGroup&&(n.group||h);if(!g&&(d||v)){let e="",t=n;for(;t&&-1!==t.level;){var m;const{value:i,valueFormatted:n}=p.getValueForDisplay({column:d?void 0:o,node:t,includeValueFormatted:!0,exporting:!0});e=" -> ".concat(null!==(m=null!==n&&void 0!==n?n:i)&&void 0!==m?m:"").concat(e),t=t.parent}return{value:e,valueFormatted:e}}const{value:f,valueFormatted:C}=p.getValueForDisplay({column:o,node:n,includeValueFormatted:!0,exporting:!0,useRawFormula:l});return{value:null!==f&&void 0!==f?f:"",valueFormatted:C}}getHeaderName(e,t){return e?e(oo(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function Kv(e,t){const i=document.defaultView||window;if(!i)return void oi(52);const o=document.createElement("a"),n=i.URL.createObjectURL(t);o.setAttribute("href",n),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),o.remove(),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}var Yv={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,overlayComponent:!0,suppressOverlays:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},qv="clientSide",Qv="serverSide",Xv="infinite",$v={onGroupExpandedOrCollapsed:[qv],refreshClientSideRowModel:[qv],isRowDataEmpty:[qv],forEachLeafNode:[qv],forEachNodeAfterFilter:[qv],forEachNodeAfterFilterAndSort:[qv],resetRowHeights:[qv,Qv],applyTransaction:[qv],applyTransactionAsync:[qv],flushAsyncTransactions:[qv],getBestCostNodeSelection:[qv],getServerSideSelectionState:[Qv],setServerSideSelectionState:[Qv],applyServerSideTransaction:[Qv],applyServerSideTransactionAsync:[Qv],applyServerSideRowData:[Qv],retryServerSideLoads:[Qv],flushServerSideAsyncTransactions:[Qv],refreshServerSide:[Qv],getServerSideGroupLevelState:[Qv],refreshInfiniteCache:[Xv],purgeInfiniteCache:[Xv],getInfiniteRowCount:[Xv],isLastRowIndexKnown:[Xv,Qv],expandAll:[qv,Qv],collapseAll:[qv,Qv],onRowHeightChanged:[qv,Qv],setRowCount:[Xv,Qv],getCacheBlockState:[Xv,Qv]},Zv={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};var Jv={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},em={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,aasc:1,adesc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},tm={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",overlayLoading:"Overlay",overlayExporting:"Overlay",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",richSelectLoading:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortAbsoluteAscending:["MenuCore","Sort"],sortAbsoluteDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},im=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]);var om=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),nm={moduleName:"Validation",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,qt=Dv}warnOnInitialPropertyUpdate(e,t){"api"===e&&Yv[t]&&oi(22,{key:t})}processGridOptions(e){this.processOptions(e,{objectName:"gridOptions",allProperties:[...zp,...Hp,...Vp,...Wp,...Kp,..._p,...jp,...Up,...Object.values(Lp)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}},validations:Qp()})}validateApiFunction(e,t){return function(e,t,i){const o=Zv[e];if(o){const{version:i,new:n,old:s,message:r}=o,a=null!==s&&void 0!==s?s:e;return function(){const e=n?"Please use ".concat(n," instead. "):"";Mt("Since ".concat(i," api.").concat(a," is deprecated. ").concat(e).concat(null!==r&&void 0!==r?r:""));for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return t.apply(t,s)}}const n=$v[e];return n?function(){const o=i.rowModel.getType();if(n.includes(o)){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return t.apply(t,r)}Tt("api.".concat(e," can only be called when gridOptions.rowModelType is ").concat(n.join(" or ")))}:t}(e,t,this.beans)}missingUserComponent(e,t,i,o){const n=Np[t];n?this.gos.assertModuleRegistered(n,"AG Grid '".concat(e,"' component: ").concat(t)):oi(101,{propertyName:e,componentName:t,agGridDefaults:i,jsComps:o})}missingDynamicBean(e){const t=Jv[e];return t?li(200,(0,n.A)((0,n.A)({},this.gos.getModuleErrorParams()),{},{moduleName:t,reasonOrId:e})):void 0}checkRowEvents(e){om.has(e)&&oi(10,{eventType:e})}validateIcon(e){if(im.has(e)&&oi(43,{iconName:e}),em[e])return;const t=tm[e];t?ni(200,{reasonOrId:"icon '".concat(e,"'"),moduleName:t,gridScoped:Wt(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."}):oi(134,{iconName:e})}isProvidedUserComp(e){return!!Np[e]}validateColDef(e){this.processOptions(e,{objectName:"colDef",allProperties:Object.keys(Bp),docsUrl:"column-properties/",deprecations:{checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}},validations:{autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(e,t)=>{let{paginationAutoPageSize:i}=t;return i?"colDef.autoHeight is not supported with paginationAutoPageSize.":null}},allowFormula:{supportedRowModels:["clientSide"]},cellRendererParams:{validate:e=>null==e.rowGroup&&null==e.rowGroupIndex&&"agGroupCellRenderer"!==e.cellRenderer||!("checkbox"in e.cellRendererParams)?null:'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.'},flex:{validate:(e,t)=>t.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerValueGetter:{validate:e=>{const t=e.headerValueGetter;return"function"===typeof t||"string"===typeof t?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:e=>{let{icons:t}=e;if(t){if(t.smallDown)return li(262);if(t.smallLeft)return li(263);if(t.smallRight)return li(264)}return null}},sort:{validate:e=>fo(e.sort)||vo(e.sort)?null:"sort must be of type (SortDirection | SortDef), currently it is ".concat("object"===typeof e.sort?JSON.stringify(e.sort):Jt(e.sort))},initialSort:{validate:e=>fo(e.initialSort)||vo(e.initialSort)?null:"initialSort must be of non-null type (SortDirection | SortDef), currently it is ".concat("object"===typeof e.initialSort?JSON.stringify(e.initialSort):Jt(e.initialSort))},sortingOrder:{validate:e=>{const t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){const e=t.filter(e=>!(fo(e)||vo(e)));if(e.length>0)return"sortingOrder must be an array of type non-null (SortDirection | SortDef)[], incorrect items are: [".concat(e.map(e=>"string"===typeof e||null==e?Jt(e):JSON.stringify(e)).join(", "),"]")}else if(!Array.isArray(t)||!t.length)return"sortingOrder must be an array with at least one element, currently it is [".concat(t,"]");return null}},type:{validate:e=>{const t=e.type;return t instanceof Array?t.some(e=>"string"!==typeof e)?"if colDef.type is supplied an array it should be of type 'string[]'":null:"string"===typeof t?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(e,t)=>{let{suppressRowTransform:i}=t;return i?null:"colDef.rowSpan requires suppressRowTransform to be enabled."}},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(e,t)=>{let{rowSelection:i,cellSelection:o,suppressRowTransform:n,enableCellSpan:s,rowDragEntireRow:r,enableCellTextSelection:a}=t;return"object"===typeof i&&"singleRow"===(null===i||void 0===i?void 0:i.mode)&&null!==i&&void 0!==i&&i.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":o?"colDef.spanRows is not supported with cellSelection.":n?"colDef.spanRows is not supported with suppressRowTransform.":s?r?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."}},groupHierarchy:{validate(e,t,i){let{groupHierarchyConfig:o={}}=t;const n=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),s=[];for(const l of null!==(r=e.groupHierarchy)&&void 0!==r?r:[]){var r,a;"object"!==typeof l?n.has(l)||l in o||s.push(Op(l)):null===(a=i.validation)||void 0===a||a.validateColDef(l)}if(s.length>0){const e="The following parts of colDef.groupHierarchy are not recognised: ".concat(s.join(", "),"."),t="Choose one of ".concat([...n].map(Op).join(", "),", or define your own parts in gridOptions.groupHierarchyConfig.");return"".concat(e,"\n").concat(t)}return null}}}})}processOptions(e,t){const{validations:i,deprecations:o,allProperties:n,propertyExceptions:s,objectName:r,docsUrl:a}=t;n&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...null!==s&&void 0!==s?s:[],...Object.keys(o)],n,r,a);const l=new Set;if(Object.keys(e).forEach(t=>{const n=o[t];if(n){const{message:e,version:i}=n;l.add("As of v".concat(i,", ").concat(String(t)," is deprecated. ").concat(null!==e&&void 0!==e?e:""))}const s=e[t];if(null==s||!1===s)return;const r=i[t];if(!r)return;const{dependencies:a,validate:d,supportedRowModels:c,expectedType:u}=r;if(u){const e=typeof s;if(e!==u)return void l.add("".concat(String(t)," should be of type '").concat(u,"' but received '").concat(e,"' (").concat(s,")."))}if(c){var h;const e=null!==(h=this.gridOptions.rowModelType)&&void 0!==h?h:"clientSide";if(!c.includes(e))return void l.add("".concat(String(t)," is not supported with the '").concat(e,"' row model. It is only valid with: ").concat(c.join(", "),"."))}if(a){const i=this.checkForRequiredDependencies(t,a,e);if(i)return void l.add(i)}if(d){const t=d(e,this.gridOptions,this.beans);if(t)return void l.add(t)}}),l.size>0)for(const d of l)Mt(d)}checkForRequiredDependencies(e,t,i){const o=Object.entries(t).filter(e=>{let[t,o]=e;const n=i[t];return!o.required.includes(n)});return 0===o.length?null:o.map(t=>{var i;let[o,n]=t;return"'".concat(String(e),"' requires '").concat(o,"' to be one of [").concat(n.required.map(e=>null===e?"null":void 0===e?"undefined":e).join(", "),"]. ").concat(null!==(i=n.reason)&&void 0!==i?i:"")}).join("\n           ")}checkProperties(e,t,i,o,n){const s=function(e,t,i){const o={},n=e.filter(e=>!t.some(t=>t===e));if(n.length>0)for(const s of n)o[s]=or({inputValue:s,allSuggestions:i}).values;return o}(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i),r=Object.keys(s);for(const a of r){const e=s[a];let t="invalid ".concat(o," property '").concat(a,"' did you mean any of these: ").concat(e.slice(0,8).join(", "),".");i.includes("context")&&(t+="\nIf you are trying to annotate ".concat(o," with application data, use the '").concat(o,".context' property instead.")),Mt(t)}if(r.length>0&&n){const e=this.beans.frameworkOverrides.getDocLink(n);Mt("to see all the valid ".concat(o," properties please check: ").concat(e))}}}]};function sm(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var rm={moduleName:"SharedMenu",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=null!==e&&void 0!==e?e:t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(Lc(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,i){var o;null===(o=this.activeMenuFactory)||void 0===o||o.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){var e,t;null===(e=this.beans.contextMenuSvc)||void 0===e||e.hideActiveMenu(),null===(t=this.activeMenuFactory)||void 0===t||t.hideActiveMenu()}hideFilterMenu(){var e;null===(e=Lc(this.beans))||void 0===e||e.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var t;const{suppressHeaderMenuButton:i}=e.getColDef();return!i&&!(null===(t=this.activeMenuFactory)||void 0===t||!t.isMenuEnabled(e))&&(Ji(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&co(e)?e.getColDef():null===e||void 0===e?void 0:e.getColGroupDef();return!(null!==t&&void 0!==t&&t.suppressHeaderContextMenu)&&"new"===this.gos.get("columnMenu")}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Fs()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Ji(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!(null===(t=this.beans.filterManager)||void 0===t||!t.isFilterAllowed(e))&&!Ji(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return Ji(e)?!!e.exists("suppressMenuHide")&&t:t}showColumnMenuCommon(e,t,i,o){const{positionBy:n,onClosedCallback:s}=t,r=t.column;if("button"===n){const{buttonElement:n}=t;null===e||void 0===e||e.showMenuAfterButtonClick(r,n,i,s,o)}else if("mouse"===n){const{mouseEvent:n}=t;null===e||void 0===e||e.showMenuAfterMouseEvent(r,n,i,s,o)}else if(r){const t=this.beans,n=t.ctrlsSvc;n.getScrollFeature().ensureColumnVisible(r,"auto"),je(t,()=>{var t;const a=null===(t=n.getHeaderRowContainerCtrl(r.getPinned()))||void 0===t?void 0:t.getHeaderCtrlForColumn(r);a&&(null===e||void 0===e||e.showMenuAfterButtonClick(r,a.getAnchorElementForMenu(o),i,s,o))})}}}],apiFunctions:{showColumnMenu:function(e,t){var i;const o=e.colModel.getCol(t);o?null===(i=e.menuSvc)||void 0===i||i.showColumnMenu({column:o,positionBy:"auto"}):ni(12,{colKey:t})},hidePopupMenu:function(e){var t;null===(t=e.menuSvc)||void 0===t||t.hidePopupMenu()}}},am={moduleName:"Popup",version:Kt,beans:[class extends Aa{getDefaultPopupParent(){return this.beans.ctrlsSvc.get("gridCtrl").getGui()}callPostProcessPopup(e,t,i,o,n){const s=this.gos.getCallback("postProcessPopup");if(s){const{column:r,rowNode:a}=null!==e&&void 0!==e?e:{};s({column:r,rowNode:a,ePopup:i,type:t,eventSource:o,mouseEvent:n})}}getActivePopups(){return this.popupList.map(e=>e.element)}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return Ll(e)}}]};var lm={filterHandler:()=>({doesFilterPass:()=>!0})};var dm={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},cm=class{constructor(){this.customFilterOptions={}}init(e,t){var i;this.filterOptions=null!==(i=e.filterOptions)&&void 0!==i?i:t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){var i;const o=null!==(i=e.filterOptions)&&void 0!==i?i:t;this.filterOptions!==o&&(this.filterOptions=o,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;if(e)for(const t of e){if("string"===typeof t)continue;[["displayKey"],["displayName"],["predicate","test"]].every(e=>!!e.some(e=>null!=t[e])||(oi(72,{keys:e}),!1))?this.customFilterOptions[t.displayKey]=t:this.filterOptions=e.filter(e=>e===t)||[]}}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const e=t[0];if("string"===typeof e)return e;if(e.displayKey)return e.displayKey;oi(73)}else oi(74)}getCustomOption(e){return this.customFilterOptions[e]}};function um(e,t,i){return null==i?e.splice(t):e.splice(t,i)}function hm(e){return null==e||"string"===typeof e&&0===e.trim().length}function pm(e,t){const i=t.getCustomOption(e);if(i){const{numberOfInputs:e}=i;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}var gm=class extends Gl{constructor(e,t,i){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=i,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new cm;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){var t;this.setNumConditions(e),this.defaultJoinOperator="AND"===(t=e.defaultJoinOperator)||"OR"===t?t:"AND",this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions(),We(this.getGui(),"tabindex",this.isReadOnly()?"-1":null)}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{const o=0===i?e:this.optionsFactory.defaultOption;t.setValue(o,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return 0===e.length?t:!0===e[0].getValue()?"OR":"AND"}areNonNullModelsEqual(e,t){const i=!e.operator,o=!t.operator;if(!i&&o||i&&!o)return!1;let n;if(i){const i=e,o=t;n=this.areSimpleModelsEqual(i,o)}else{const i=e,o=t;n=i.operator===o.operator&&Eo(i.conditions,o.conditions,(e,t)=>this.areSimpleModelsEqual(e,t))}return n}setModelIntoUi(e,t){if(null==e)return this.resetUiToDefaults(t),Ln.resolve();if(e.operator){const t=e;let i=t.conditions;null==i&&(i=[],oi(77));const o=function(e,t){let i=e.length;return i>t&&(e.splice(t),oi(78),i=t),i}(i,this.maxNumConditions),n=this.getNumConditions();if(o<n)this.removeConditionsAndOperators(o);else if(o>n)for(let e=n;e<o;e++)this.createJoinOperatorPanel(),this.createOption();const s="OR"===t.operator;this.eJoinAnds.forEach(e=>e.setValue(!s,!0)),this.eJoinOrs.forEach(e=>e.setValue(s,!0)),i.forEach((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)})}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),Ln.resolve()}setNumConditions(e){var t,i;let o=null!==(t=e.maxNumConditions)&&void 0!==t?t:2;o<1&&(oi(79),o=1),this.maxNumConditions=o;let n=null!==(i=e.numAlwaysVisibleConditions)&&void 0!==i?i:1;n<1&&(oi(80),n=1),n>o&&(oi(81),n=o),this.numAlwaysVisibleConditions=n}createOption(){const e=this.getGui(),t=this.createManagedBean(new Ar);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const i=this.createEValue();this.eConditionBodies.push(i),e.appendChild(i),this.putOptionsIntoDropdown(t),this.resetType(t);const o=this.getNumConditions()-1;this.forEachPositionInput(o,e=>this.resetInput(e)),this.addChangedListeners(t,o)}createJoinOperatorPanel(){const e=cl({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),i=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const o=this.eJoinPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,o,n),this.resetJoinOperatorOr(i,o,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const o=this.createManagedBean(new vr);e.push(o);const n="ag-filter-condition-operator";return o.addCss(n),o.addCss("".concat(n,"-").concat(i)),t.appendChild(o.getGui()),o}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>"string"===typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;for(const i of t)e.addOption(i);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let o=0;o<this.getNumConditions();o++)this.isConditionUiComplete(o)?e=o:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{var i;const t=null!==(i=this.lastUiCompletePosition)&&void 0!==i?i:this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const i=e+1,o=t-i;o>0&&this.removeConditionsAndOperators(i,o),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((t,i)=>{const o=this.isConditionDisabled(i,e);t.setDisabled(o||this.filterListOptions.length<=1),1===i&&(ve(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((e,t)=>{pe(e,this.isConditionBodyVisible(t))});const i="OR"===(null!==t&&void 0!==t?t:this.getJoinOperator());for(const o of this.eJoinAnds)o.setValue(!i,!0);for(const o of this.eJoinOrs)o.setValue(i,!0);this.forEachInput((t,i,o,n)=>{this.setElementDisplayed(t,i<n),this.setElementDisabled(t,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:i,eConditionBodies:o,eJoinPanels:n,eJoinAnds:s,eJoinOrs:r}=this;this.removeComponents(i,e,t),this.removeElements(o,e,t),this.removeEValues(e,t);const a=Math.max(e-1,0);this.removeElements(n,a,t),this.removeComponents(s,a,t),this.removeComponents(r,a,t)}removeElements(e,t,i){const o=um(e,t,i);for(const n of o)Pe(n)}removeComponents(e,t,i){const o=um(e,t,i);for(const n of o)Pe(n.getGui()),this.destroyBean(n)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),null===e||void 0===e||!e.suppressFocus){let e;if(!this.isReadOnly()){const i=this.getInputs(0)[0];var t;if(i instanceof hr&&this.isConditionBodyVisible(0))e=i.getInputElement();else e=null===(t=this.eTypes[0])||void 0===t?void 0:t.getFocusableElement()}(null!==e&&void 0!==e?e:this.getGui()).focus({preventScroll:!0})}}shouldKeepInvalidInputState(){return!1}afterGuiDetached(){var e;super.afterGuiDetached();const t=this.params;if(null!==(e=this.beans.colFilter)&&void 0!==e&&e.shouldKeepStateOnDetach(t.column)||this.shouldKeepInvalidInputState())return;t.onStateChange({model:t.model});let i=-1,o=-1,n=!1;const s=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))-1===i&&(i=a,o=a);else{const e=a<i;(a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1)||e)&&(this.removeConditionsAndOperators(a,1),n=!0,e&&o--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(o===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(o,s),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=o}getModelAsString(e){var t,i,o;return null!==(t=null===(i=this.params.getHandler())||void 0===i||null===(o=i.getModelAsString)||void 0===o?void 0:o.call(i,e))&&void 0!==t?t:""}resetPlaceholder(){const e=this.getLocaleTextFunc(),{filterPlaceholder:t,eTypes:i}=this;this.forEachInput((o,n,s,r)=>{if(!(o instanceof hr))return;const a=0===n&&r>1?"inRangeStart":0===n?"filterOoo":"inRangeEnd",l=0===n&&r>1?e("ariaFilterFromValue","Filter from value"):0===n?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value"),d=i[s].getValue(),c=fl(this,t,a,d);o.setInputPlaceholder(c),o.setInputAriaLabel(l)})}setElementValue(e,t,i){e instanceof hr&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){Dn(e)&&pe(e.getGui(),t)}setElementDisabled(e,t){Dn(e)&&ve(e.getGui(),t)}attachElementOnChange(e,t){e instanceof hr&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const o=pm(t,this.optionsFactory),n=this.getInputs(e);for(let s=0;s<n.length;s++){const t=n[s];null!=t&&i(t,s,e,o)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){return pm(this.getConditionType(e),this.optionsFactory)>0}isConditionUiComplete(e){if(e>=this.getNumConditions())return!1;return"empty"!==this.getConditionType(e)&&(!this.getValues(e).some(e=>null==e)&&!this.positionHasInvalidInputs(e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(e=>this.resetType(e)),this.eJoinAnds.forEach((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t)),this.eJoinOrs.forEach((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t)),this.joinOperatorId++,this.forEachInput(e=>this.resetInput(e)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const t=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,"AND"===this.defaultJoinOperator,this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,"OR"===this.defaultJoinOperator,this.translate("orCondition"),i)}resetJoinOperator(e,t,i,o,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName("ag-simple-filter-and-or-".concat(this.getCompId(),"-").concat(n)).setLabel(o),t)}updateJoinOperatorsDisabled(){const e=(e,t)=>this.updateJoinOperatorDisabled(e,t);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((e,o,n)=>{n===t&&this.setElementValue(e,null!=i[o]?i[o]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,o)=>{this.setElementValue(t,0===i&&0===o?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,e=>{this.attachElementOnChange(e,this.listener)}))}hasInvalidInputs(){return!1}positionHasInvalidInputs(e){return!1}isReadOnly(){return!!this.params.readOnly}},vm=".ag-input-field-input",mm=class{constructor(e,t,i,o,n,s){this.context=e,this.eParent=n,this.alive=!0,this.debouncedReport=Ct({isAlive:()=>this.alive},fm,500),this.timeoutHandle=null;const r=function(e,t,i){return e.getCompDetails(t,On,"agDateInput",i,!0)}(t,i,o);null===r||void 0===r||r.newAgStackInstance().then(t=>{var i;if(!this.alive)return void e.destroyBean(t);if(this.dateComp=t,!t)return;n.appendChild(t.getGui()),null===t||void 0===t||null===(i=t.afterGuiAttached)||void 0===i||i.call(t);const{tempValue:o,disabled:r}=this;var a;(o&&t.setDate(o),null!=r)&&(null===(a=t.setDisabled)||void 0===a||a.call(t,r));null===s||void 0===s||s(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;var i;t?null===(i=t.setDisabled)||void 0===i||i.call(t,e):this.disabled=e}setDisplayed(e){pe(this.eParent,e)}setInputPlaceholder(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.setInputPlaceholder)||void 0===i||i.call(t,e)}setInputAriaLabel(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.setInputAriaLabel)||void 0===i||i.call(t,e)}afterGuiAttached(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e)}updateParams(e){var t,i;null===(t=this.dateComp)||void 0===t||null===(i=t.refresh)||void 0===i||i.call(t,e)}setCustomValidity(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=null===(t=this.dateComp)||void 0===t?void 0:t.getGui().querySelector(vm);if(o&&"setCustomValidity"in o){const t=e.length>0;o.setCustomValidity(e),t?i?this.timeoutHandle=this.debouncedReport(o):fm(o):this.timeoutHandle&&window.clearTimeout(this.timeoutHandle),z(o,t)}}getValidity(){var e;return null===(e=this.dateComp)||void 0===e||null===(e=e.getGui().querySelector(vm))||void 0===e?void 0:e.validity}};function fm(e){e.reportValidity()}var Cm=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function wm(e,t){const{dateFrom:i,dateTo:o,type:n}=e||{};return[i&&ir(i,void 0,!0)||null,o&&ir(o,void 0,!0)||null].slice(0,pm(n,t))}var bm=1/0;var ym=class extends ht{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,i=new cm;this.optionsFactory=i,i.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(i,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if("colDef"===e.source){const t=e.filterParams,i=this.optionsFactory;i.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:i,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(null==t)return!0;const{operator:i}=t,o=[];if(i){var n;const e=t;o.push(...null!==(n=e.conditions)&&void 0!==n?n:[])}else o.push(t);const s=i&&"OR"===i?"some":"every",r=this.params.getValue(e.node);return o[s](t=>this.individualConditionPasses(e,t,r))}getModelAsString(e,t){var i;return null!==(i=this.filterModelFormatter.getModelAsString(e,t))&&void 0!==i?i:""}validateModel(e){var t;const{model:i,filterParams:{filterOptions:o,maxNumConditions:s}}=e;if(null==i)return;let r=Bl(i)?i.conditions:[i];const a=null!==(t=null===o||void 0===o?void 0:o.map(e=>"string"===typeof e?e:e.displayKey))&&void 0!==t?t:this.defaultOptions;if(!(!r||r.every(e=>void 0!==a.find(t=>t===e.type))))return this.params=(0,n.A)((0,n.A)({},e),{},{model:null}),void e.onModelChange(null);let l=!1;const d=this.filterType;if((r&&!r.every(e=>e.filterType===d)||i.filterType!==d)&&(r=r.map(e=>(0,n.A)((0,n.A)({},e),{},{filterType:d})),l=!0),"number"===typeof s&&r&&r.length>s&&(r=r.slice(0,s),l=!0),l){const t=r.length>1?(0,n.A)((0,n.A)({},i),{},{filterType:d,conditions:r}):(0,n.A)((0,n.A)({},r[0]),{},{filterType:d});this.params=(0,n.A)((0,n.A)({},e),{},{model:t}),e.onModelChange(t)}}individualConditionPasses(e,t,i){const o=this.optionsFactory,n=this.mapValuesFromModel(t,o),s=function(e,t,i){if(null==e)return;const{predicate:o}=e;return null==o||t.some(e=>null==e)?void 0:o(t,i)}(o.getCustomOption(t.type),n,i);return null!=s?s:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,i,t,e)}},Sm=class extends ym{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:o,includeBlanksInLessThan:n,includeBlanksInRange:s}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(i)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(o)return!0;break;case"lessThan":case"lessThanOrEqual":if(n)return!0;break;case"inRange":if(s)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const o=i.type;if(!this.isValid(t))return"notEqual"===o||"notBlank"===o;const n=this.comparator(),s=null!=e[0]?n(e[0],t):0;switch(o){case"equals":return 0===s;case"notEqual":return 0!==s;case"greaterThan":return s>0;case"greaterThanOrEqual":return s>=0;case"lessThan":return s<0;case"lessThanOrEqual":return s<=0;case"inRange":{const i=n(e[1],t);return this.params.filterParams.inRangeInclusive?s>=0&&i<=0:s>0&&i<0}case"blank":return hm(t);case"notBlank":return!hm(t);default:return oi(76,{filterModelType:o}),!0}}},xm={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},Fm={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},Rm=class extends ht{constructor(e,t,i){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=i}getModelAsString(e,t){const i=this.getLocaleTextFunc(),o="filterToolPanel"===t;if(!e)return o?gl(this,"filterSummaryInactive"):null;if(null!=e.operator){var n;const i=e,o=(null!==(n=i.conditions)&&void 0!==n?n:[]).map(e=>this.getModelAsString(e,t)),s="AND"===i.operator?"andCondition":"orCondition";return o.join(" ".concat(gl(this,s)," "))}if("blank"===e.type||"notBlank"===e.type)return o?gl(this,"blank"===e.type?"filterSummaryBlank":"filterSummaryNotBlank"):i(e.type,e.type);{const t=e,n=this.optionsFactory.getCustomOption(t.type),{displayKey:s,displayName:r,numberOfInputs:a}=n||{};return s&&r&&0===a?i(s,r):this.conditionToString(t,o,"inRange"===t.type||2===a,s,r)}}updateParams(e){const{optionsFactory:t,filterParams:i}=e;this.optionsFactory=t,this.filterParams=i}conditionForToolPanel(e,t,i,o,n,s){let r;const a=this.getTypeKey(e);return a&&(r=gl(this,a)),n&&s&&(r=this.getLocaleTextFunc()(n,s)),null!=r?t?"".concat(r," ").concat(gl(this,"filterSummaryInRangeValues",[i(),o()])):"".concat(r," ").concat(i()):null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?"filterSummary".concat(t):null}formatValue(e){var t;const i=this.valueFormatter;return i?null!==(t=i(null!==e&&void 0!==e?e:null))&&void 0!==t?t:"":String(e)}},Pm=class extends Rm{constructor(e,t){super(e,t,e=>{const{dataTypeSvc:i,valueSvc:o}=this.beans,n=t.column,s=null===i||void 0===i?void 0:i.getDateFormatterFunction(n),r=s?s(null!==e&&void 0!==e?e:void 0):e;return o.formatValue(n,null,r)}),this.filterTypeKeys=xm}conditionToString(e,t,i,o,n){const{type:s}=e,r=ir(e.dateFrom),a=ir(e.dateTo),l=this.filterParams.inRangeFloatingFilterDateFormat,d=t?this.formatValue.bind(this):e=>er(e,l),c=()=>null!==r?d(r):"null",u=()=>null!==a?d(a):"null";if(t){const e=this.conditionForToolPanel(s,i,c,u,o,n);if(null!=e)return e}return i?"".concat(c(),"-").concat(u()):null!=r?d(r):"".concat(s)}};function Dm(e,t){return t<e?-1:t>e?1:0}var Em=class extends Tn{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.defaultOption);let t;if(e.operator){t=e.conditions[0]}else t=e;this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const t=e;this.onModelUpdated(t.model)}}setParams(e){const t=new cm;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.optionsFactory.defaultOption;t||(this.lastType=i),this.readOnly=!!e.filterParams.readOnly;const o=this.isTypeEditable(i);this.setEditable(o)}refresh(e){this.params=e;const t=e,i=this.reactive;if(i&&"colDef"!==t.source||this.updateParams(e),i){const{source:e,model:i}=t;if("dataChanged"===e||"ui"===e)return;this.onModelUpdated(i)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){null!==t&&void 0!==t&&t.afterFloatingFilter||null!==t&&void 0!==t&&t.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){var t;const i=null===(t=this.optionsFactory.getCustomOption(e))||void 0===t?void 0:t.numberOfInputs;return null==i||1==i}isTypeEditable(e){return!!e&&!this.readOnly&&this.hasSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){const t=this.beans.colNames.getDisplayNameForColumn(e,"header",!0);return"".concat(t," ").concat(this.getLocaleTextFunc()("ariaFilterInput","Filter Input"))}},Am={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},Mm={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},Tm=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function km(e){var t;return null!==(t=null===e||void 0===e?void 0:e.allowedCharPattern)&&void 0!==t?t:null}function Im(e){return null==e||isNaN(e)?null:e}function Lm(e,t){const{filter:i,filterTo:o,type:n}=e||{};return[Im(i),Im(o)].slice(0,pm(n,t))}function Nm(e,t){if("number"===typeof t)return t;let i=g(t);return null!=i&&""===i.trim()&&(i=null),e?e(i):null==i||"-"===i.trim()?null:Number.parseFloat(i)}function Om(e,t){return Im(Nm(e,t.getValue(!0)))}var Gm=class extends Rm{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=xm}conditionToString(e,t,i,o,n){const{filter:s,filterTo:r,type:a}=e,l=this.formatValue.bind(this);if(t){const e=this.conditionForToolPanel(a,i,()=>l(s),()=>l(r),o,n);if(null!=e)return e}return i?"".concat(l(s),"-").concat(l(r)):null!=s?l(s):"".concat(a)}},Bm=class extends ht{constructor(e){super(),this.params=e,this.eInput=Pn,this.onValueChanged=()=>{}}setupGui(e){var t;this.eInput=this.createManagedBean(new Cr(null===(t=this.params)||void 0===t?void 0:t.config));const i=this.eInput.getGui();e.appendChild(i);const o=e=>this.onValueChanged(e);this.addManagedListeners(i,{input:o,keydown:o})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams(e){let{ariaLabel:t,autoComplete:i,placeholder:o}=e;const{eInput:n}=this;n.setInputAriaLabel(t),void 0!==i&&n.setAutoComplete(i),n.toggleCss("ag-floating-filter-search-icon",!!o),n.setInputPlaceholder(o)}};function Vm(e){const t=null===e||void 0===e?void 0:e.trim();return""===t?e:t}function Hm(e,t){const{filter:i,filterTo:o,type:n}=e||{};return[i||null,o||null].slice(0,pm(n,t))}var zm={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},Wm=class extends Em{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Pn,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(zm)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;const{inputSvc:i,defaultDebounceMs:o,readOnly:n}=this,{filterPlaceholder:s,column:r,browserAutoComplete:a,filterParams:l}=e,d=null!==(t=this.lastType)&&void 0!==t?t:this.optionsFactory.defaultOption,c=e.filterParams.filterPlaceholder,u=!0===s?fl(this,c,"filterOoo",d):s||void 0;if(i.setParams({ariaLabel:this.getAriaLabel(r),autoComplete:null!==a&&void 0!==a&&a,placeholder:u}),this.applyActive=ml(l),!n){const e=vl(l,o);i.setValueChangedListener(Ct(this,this.syncUpWithParentFilter.bind(this),e))}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,i=t.getValue();Re(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(i,!0)}syncUpWithParentFilter(e){const t=e.key===us.ENTER,i=this.reactive;if(i){this.params.onUiChange()}if(this.applyActive&&!t)return;const{inputSvc:o,params:s,lastType:r}=this;let a=o.getValue();if(s.filterParams.trimInput&&(a=Vm(a),o.setValue(a,!0)),i){const e=s,t=e.model,i=this.convertValue(a),o=null==i?null:(0,n.A)((0,n.A)({},null!==t&&void 0!==t?t:{filterType:this.filterType,type:null!==r&&void 0!==r?r:this.optionsFactory.defaultOption}),{},{filter:i});e.onModelChange(o,{afterFloatingFilter:!0})}else s.parentFilterInstance(e=>{null===e||void 0===e||e.onFloatingFilterChanged(r||null,a||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},Um=class extends ht{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new yr),this.eTextInput=this.createManagedBean(new Cr),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),i=this.eTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,e=>this.onValueChanged(e)),this.setupListeners(i,e=>this.onValueChanged(e))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){let{ariaLabel:t,autoComplete:i,placeholder:o}=e;this.setAriaLabel(t),void 0!==i&&this.setAutoComplete(i),this.setPlaceholder(this.eNumberInput,o),this.setPlaceholder(this.eTextInput,o)}setPlaceholder(e,t){e.toggleCss("ag-floating-filter-search-icon",!!t),e.setInputPlaceholder(t)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},jm=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],_m=class extends Rm{constructor(){super(...arguments),this.filterTypeKeys=Fm}conditionToString(e,t,i,o,n){const{filter:s,filterTo:r,type:a}=e;if(t){const e=e=>()=>gl(this,"filterSummaryTextQuote",[e]),t=this.conditionForToolPanel(a,i,e(s),e(r),o,n);if(null!=t)return t}return i?"".concat(s,"-").concat(r):"".concat(null!=s?s:a)}},Km=e=>{let{filterOption:t,value:i,filterText:o}=e;if(null==o)return!1;switch(t){case"contains":return i.includes(o);case"notContains":return!i.includes(o);case"equals":return i===o;case"notEqual":return i!=o;case"startsWith":return 0===i.indexOf(o);case"endsWith":{const e=i.lastIndexOf(o);return e>=0&&e===i.length-o.length}default:return!1}},Ym=e=>e,qm=e=>null==e?null:e.toString().toLowerCase();var Qm={moduleName:"ClientSideRowModelFilter",version:Kt,rowModels:["clientSide"],beans:[class extends ht{constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){var t,i;const o=!(null===(t=this.filterManager)||void 0===t||!t.isChildFilterPresent());null!==(i=this.beans.formula)&&void 0!==i&&i.active?this.softFilter(o,e):this.filterNodes(o,e)}filterNodes(e,t){const i=(t,i)=>{t.hasChildren()?t.childrenAfterFilter=e&&!i?t.childrenAfterGroup.filter(e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i}):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,sm(t)};if(this.doingTreeDataFiltering()){const e=(t,o)=>{if(t.childrenAfterGroup)for(let n=0;n<t.childrenAfterGroup.length;n++){const s=t.childrenAfterGroup[n],r=o||this.filterManager.doesRowPassFilter({rowNode:s});s.childrenAfterGroup?e(t.childrenAfterGroup[n],r):i(s,r)}i(t,o)},o=t=>e(t,!1);t.executeFromRootNode(o)}else{const e=e=>i(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}softFilter(e,t){t.forEachChangedNodeDepthFirst(t=>{if(t.childrenAfterFilter=t.childrenAfterGroup,t.hasChildren())for(const i of t.childrenAfterGroup)i.softFiltered=e&&!(i.data&&this.filterManager.doesRowPassFilter({rowNode:i}));sm(t)},!0)}doingTreeDataFiltering(){const{gos:e}=this;return e.get("treeData")&&!e.get("excludeChildrenWhenTreeDataFiltering")}}]},Xm={moduleName:"FilterCore",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:e=>{let{enabled:t}=e;return this.onAdvFilterEnabledChanged(t)},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=i.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"===typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"===typeof t&&t(e)}setFilterState(e,t){var i;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";this.isAdvFilterEnabled()||null===(i=this.colFilter)||void 0===i||i.setState(e,t,o)}setFilterModel(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",o=arguments.length>2?arguments[2]:void 0;this.isAdvFilterEnabled()?o||this.warnAdvFilters():null===(t=this.colFilter)||void 0===t||t.setModel(e,i)}getFilterModel(){var e,t;return null!==(e=null===(t=this.colFilter)||void 0===t?void 0:t.getModel())&&void 0!==e?e:{}}getFilterState(){var e;return null===(e=this.colFilter)||void 0===e?void 0:e.getState()}isColumnFilterPresent(){var e;return!(null===(e=this.colFilter)||void 0===e||!e.isFilterPresent())}isAggregateFilterPresent(){var e;return!(null===(e=this.colFilter)||void 0===e||!e.isAggFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){var t,i;e?null!==(i=this.colFilter)&&void 0!==i&&i.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):null!==(t=this.advancedFilter)&&void 0!==t&&t.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var e;return!(null===(e=this.advancedFilter)||void 0===e||!e.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){Ri(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{source:t,additionalEventAttributes:i,columns:o=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):Ln.resolve()).then(()=>{var e;const n={source:t,type:"filterChanged",columns:o};i&&St(n,i),this.eventSvc.dispatchEvent(n),null===(e=this.colFilter)||void 0===e||e.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null===(e=this.colFilter)||void 0===e||!e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!(null===(e=this.quickFilter)||void 0===e||!e.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!Ri(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){var t;const{rowNode:i}=e;return!(null===(t=this.alwaysPassFilter)||void 0===t||!t.call(this,i))||!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(i))&&!(this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(i,e.colIdToSkip,!0))}doesRowPassFilter(e){var t;const{rowNode:i}=e;return!(null===(t=this.alwaysPassFilter)||void 0===t||!t.call(this,i))||!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(i))&&(!(this.externalFilterPresent&&!this.doesExternalFilterPass(i))&&(!(this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(i,e.colIdToSkip))&&!(this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(i))))}isFilterAllowed(e){var t;return!this.isAdvFilterEnabled()&&!(null===(t=this.colFilter)||void 0===t||!t.isFilterAllowed(e))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.isAdvFilterEnabled()&&(null!==(t=this.beans.dataTypeSvc)&&void 0!==t&&t.isPendingInference?this.advFilterModelUpdateQueue.push(e):(this.advancedFilter.setModel(null!==e&&void 0!==e?e:null),this.onFilterChanged({source:i})))}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return!this.isAdvFilterEnabled()&&!(null===(e=this.colFilter)||void 0===e||!e.hasFloatingFilters())}getColumnFilterInstance(e){var t,i;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):null!==(t=null===(i=this.colFilter)||void 0===i?void 0:i.getFilterInstance(e))&&void 0!==t?t:Promise.resolve(void 0)}warnAdvFilters(){oi(68)}setupAdvFilterHeaderComp(e){var t;null===(t=this.advancedFilter)||void 0===t||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(const e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){var i,o;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):null!==(i=null===(o=this.colFilter)||void 0===o?void 0:o.setModelForColumn(e,t))&&void 0!==i?i:Promise.resolve()}}],apiFunctions:{isAnyFilterPresent:function(e){var t;return!(null===(t=e.filterManager)||void 0===t||!t.isAnyFilterPresent())},onFilterChanged:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";null===(t=e.filterManager)||void 0===t||t.onFilterChanged({source:i})}},css:[".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}"],dependsOn:[Qm]},$m={moduleName:"FilterValue",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,i){var o;if(!t)return;const n=e.getColDef(),{selectableFilter:s,valueSvc:r,formula:a}=this.beans,l=null!==(o=null!==i&&void 0!==i?i:null===s||void 0===s?void 0:s.getFilterValueGetter(e.getColId()))&&void 0!==o?o:n.filterValueGetter;if(l)return this.executeFilterValueGetter(l,t.data,e,t,n);const d=r.getValue(e,t);return e.isAllowFormula()&&null!==a&&void 0!==a&&a.isFormula(d)?a.resolveValue(e,t):d}executeFilterValueGetter(e,t,i,o,n){const{expressionSvc:s,valueSvc:r}=this.beans,a=oo(this.gos,{data:t,node:o,column:i,colDef:n,getValue:r.getValueCallback.bind(r,o)});return"function"===typeof e?e(a):null===s||void 0===s?void 0:s.evaluate(e,a)}}]},Zm={moduleName:"ColumnFilter",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap=(0,n.A)({},il),this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const i=this.gos,o=(0,n.A)({},null!==(e=null===(t=i.get("initialState"))||void 0===t||null===(t=t.filter)||void 0===t?void 0:t.filterModel)&&void 0!==e?e:{});this.initialModel=o,this.model=(0,n.A)({},o),i.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",i=arguments.length>2?arguments[2]:void 0;const{colModel:o,dataTypeSvc:n,filterManager:s}=this.beans;if(null!==n&&void 0!==n&&n.isPendingInference)return void this.modelUpdates.push({model:e,source:t});const r=[],a=this.getModel(!0);if(e){const t=new Set(Object.keys(e));this.allColumnFilters.forEach((i,o)=>{const n=e[o];r.push(this.setModelOnFilterWrapper(i,n)),t.delete(o)}),t.forEach(t=>{const i=o.getColDefCol(t)||o.getCol(t);if(!i)return void oi(62,{colId:t});if(!i.isFilterAllowed())return void oi(63,{colId:t});const n=this.getOrCreateFilterWrapper(i,!0);n?r.push(this.setModelOnFilterWrapper(n,e[t],!0)):oi(64,{colId:t})})}else this.model={},this.allColumnFilters.forEach(e=>{r.push(this.setModelOnFilterWrapper(e,null))});Ln.all(r).then(()=>{const e=this.getModel(!0),o=[];this.allColumnFilters.forEach((t,i)=>{C(a?a[i]:null,e?e[i]:null)||o.push(t.column)}),o.length>0?null===s||void 0===s||s.onFilterChanged({columns:o,source:t}):i&&this.updateActive("filterChanged")})}getModel(e){const t={},{allColumnFilters:i,initialModel:o,beans:{colModel:n}}=this;if(i.forEach((e,i)=>{const o=this.getModelFromFilterWrapper(e);v(o)&&(t[i]=o)}),!e)for(const r of Object.keys(o)){var s;const e=o[r];v(e)&&!i.has(r)&&null!==(s=n.getCol(r))&&void 0!==s&&s.isFilterAllowed()&&(t[r]=e)}return t}setState(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";if(this.state.clear(),t)for(const o of Object.keys(t)){const e=t[o];this.state.set(o,{model:dl(this.model,o),state:e})}this.setModel(e,i,!0)}getState(){const e=this.state;if(!e.size)return;const t={};let i=!1;return e.forEach((e,o)=>{const n=e.state;null!=n&&(i=!0,t[o]=n)}),i?t:void 0}getModelFromFilterWrapper(e){const t=e.column.getColId();if(e.isHandler)return dl(this.model,t);const i=e.filter;return i?"function"!==typeof i.getModel?(oi(66),null):i.getModel():dl(this.initialModel,t)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return!!e.size&&(e.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0)}updateActiveFilters(){const{colModel:e,gos:t}=this.beans,i=!!Ri(t),o=[],n=[],s=(t,s,r)=>{s&&((t=>{if(!t.isPrimary())return!0;const o=!e.isPivotActive();return!(!t.isValueActive()||!o)&&(!!e.isPivotMode()||i)})(t)?o.push(r):n.push(r))},r=[];return this.allColumnFilters.forEach(e=>{const t=e.column,i=t.getColId();if(e.isHandler)r.push(Ln.resolve().then(()=>{s(t,this.isHandlerActive(t),{colId:i,isHandler:!0,handler:e.handler,handlerParams:e.handlerParams})}));else{const o=nl(e);o&&r.push(o.then(e=>{s(t,(e=>!!e&&(e.isFilterActive?e.isFilterActive():(oi(67),!1)))(e),{colId:i,isHandler:!1,comp:e})}))}}),Ln.all(r).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=n})}updateFilterFlagInColumns(e,t){var i;const o=[];return this.allColumnFilters.forEach(i=>{const n=i.column;if(i.isHandler)o.push(Ln.resolve().then(()=>{this.setColFilterActive(n,this.isHandlerActive(n),e,t)}));else{const s=nl(i);s&&o.push(s.then(i=>{this.setColFilterActive(n,i.isFilterActive(),e,t)}))}}),null===(i=this.beans.groupFilter)||void 0===i||i.updateFilterFlags(e,t),Ln.all(o)}doFiltersPass(e,t,i){const{data:o,aggData:n}=e,s=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?n:o,a=this.model;for(let l=0;l<s.length;l++){const i=s[l],{colId:o,isHandler:n}=i;if(o!==t)if(n){const{handler:t,handlerParams:n}=i;if(!t.doesFilterPass({node:e,data:r,model:dl(a,o),handlerParams:n}))return!1}else{const t=i.comp;if("function"!==typeof t.doesFilterPass){ni(91);continue}if(!t.doesFilterPass({node:e,data:r}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return null!==t&&void 0!==t&&t.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:i}=this.beans,o=()=>{this.isAlive()&&(null===i||void 0===i||i.onFilterChanged(e))};t.isRefreshInProgress()?setTimeout(o,0):o()}updateBeforeFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{column:t,additionalEventAttributes:i}=e,o=null===t||void 0===t?void 0:t.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(e=>{var t;const{column:i,isHandler:n}=e;if(o!==i.getColId()){var s,r;if(n)null===(s=(r=e.handler).onAnyFilterChanged)||void 0===s||s.call(r);null===(t=nl(e,n))||void 0===t||t.then(e=>{"function"===typeof(null===e||void 0===e?void 0:e.onAnyFilterChanged)&&e.onAnyFilterChanged()})}}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null!==(e=this.gos.get("allowShowChangeAfterFilter"))&&void 0!==e&&e)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(e=>{const i=e.isHandler;var o,n;i&&(null===(o=(n=e.handler).onNewRowsLoaded)||void 0===o||o.call(n));const s=nl(e,i);s&&t.push(s.then(e=>{var t;null===(t=e.onNewRowsLoaded)||void 0===t||t.call(e)}))}),Ln.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:i,colModel:o}=this.beans;return(n,s)=>{const r=s?o.getCol(s):e;return r?i.getValue(r,n,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(null!==t&&void 0!==t&&t.isHandler)return this.isHandlerActive(e);const i=null===t||void 0===t?void 0:t.filter;return i?i.isFilterActive():null!=dl(this.initialModel,e.getColId())}isHandlerActive(e){const t=v(dl(this.model,e.getColId()));if(t)return t;const i=this.beans.groupFilter;return!(null===i||void 0===i||!i.isGroupFilter(e))&&i.isFilterActive(e)}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?nl(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const i=nl(t);return i?i.then(e=>({comp:e,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const i=this.getOrCreateFilterWrapper(e,t);return null!==i&&void 0!==i&&i.isHandler?i.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let i=this.cachedFilter(e);return!i&&t&&(i=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,i)),i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getDefaultFilterFromDataType(()=>{var t;return null===(t=this.beans.dataTypeSvc)||void 0===t?void 0:t.getBaseDataType(e)},t)}getDefaultFilterFromDataType(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Zi(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":Ml(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,i,o,n,s){const r=()=>{const r=this.createFilterCompParams(e,n,s),a=o(r,n);return ss(this.beans.userCompFactory,t,a,i)},a=r();if(!a)return null;return{compDetails:a,createFilterUi:e=>(e?r():a).newAgStackInstance()}}createFilterInstance(e,t,i,o){var n;const s=this.beans.selectableFilter;null!==s&&void 0!==s&&s.isSelectable(t)&&(t=s.getFilterDef(e,t));const{handler:r,handlerParams:a,handlerGenerator:l}=null!==(n=this.createHandler(e,t,i))&&void 0!==n?n:{},d=this.createFilterComp(e,t,i,o,!!r,"init");if(!d)return{compDetails:null,createFilterUi:null,handler:r,handlerGenerator:l,handlerParams:a};const{compDetails:c,createFilterUi:u}=d;if(this.isGlobalButtons){var h;!(null===(h=c.params)||void 0===h||null===(h=h.buttons)||void 0===h||!h.length)||oi(281,{colId:e.getColId()})}return{compDetails:c,handler:r,handlerGenerator:l,handlerParams:a,createFilterUi:u}}createBaseFilterParams(e,t){const{filterManager:i,rowModel:o}=this.beans;return oo(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:t=>{var o;return null===(o=null===i||void 0===i?void 0:i.doesRowPassOtherFilters(e.getColId(),t))||void 0===o||o},rowModel:o})}createFilterCompParams(e,t,i,o){const s=this.filterChangedCallbackFactory(e),r=this.createBaseFilterParams(e,o);if(r.filterChangedCallback=s,r.filterModifiedCallback=o?()=>{}:t=>this.filterModified(e,t),t){var a;const t=r,o=e.getColId(),l=dl(this.model,o);t.model=l,t.state=null!==(a=this.state.get(o))&&void 0!==a?a:{model:l},t.onModelChange=(t,i)=>{this.updateStoredModel(o,t),this.refreshHandlerAndUi(e,t,"ui",!1,i).then(()=>{s((0,n.A)((0,n.A)({},i),{},{source:"columnFilter"}))})},t.onStateChange=t=>{this.updateState(e,t),this.updateOrRefreshFilterUi(e)},t.onAction=(t,i,o)=>{this.updateModel(e,t,i),this.dispatchLocalEvent({type:"filterAction",column:e,action:t,event:o})},t.getHandler=()=>this.getHandler(e,!0),t.onUiChange=t=>this.filterUiChanged(e,t),t.source=i}return r}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,i){const o=t(),n={created:!0,create:t,filterParams:e.params,compDetails:e,promise:o};return o.then(i),n}createFilterWrapper(e){const{compDetails:t,handler:i,handlerGenerator:o,handlerParams:s,createFilterUi:r}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),e=>e),a=e.getColId();var l;if(i)return delete this.initialModel[a],null===(l=i.init)||void 0===l||l.call(i,(0,n.A)((0,n.A)({},s),{},{source:"init",model:dl(this.model,a)})),{column:e,isHandler:!0,handler:i,handlerGenerator:o,handlerParams:s,filterUi:this.createFilterUiForHandler(t,r)};if(r){const i={column:e,filterUi:null,isHandler:!1};return i.filterUi=this.createFilterUiLegacy(t,r,e=>{i.filter=null!==e&&void 0!==e?e:void 0}),i}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,i){const{gos:o,frameworkOverrides:n,registry:s}=this.beans;let r;const a=o.get("enableFilterHandlers"),l=a?(e=>{const t=e.filter;if(kn(t)){const e=t.handler;return e||(r=t.doesFilterPass,r?()=>({doesFilterPass:r}):void 0)}return"string"===typeof t?t:void 0})(t):void 0,d=e=>()=>this.createBean(s.createDynamicBean(e,!0));let c,u;if("string"===typeof l){var h;const e=null===(h=o.get("filterHandlers"))||void 0===h?void 0:h[l];null!=e?c=e:ol.has(l)&&(c=d(l),u=l)}else c=l;if(!c){let e;const{compName:o,jsComp:s,fwComp:r}=as(n,t);if(o)e=o;else{null==s&&null==r&&!0===t.filter&&(e=i)}u=this.handlerMap[e],u&&(c=d(u))}if(!c){if(!a)return;return ui(o)&&oi(277,{colId:e.getColId()}),lm}return{filterHandler:c,handlerNameOrCallback:null!==r&&void 0!==r?r:u}}createHandler(e,t,i){const o=this.createHandlerFunc(e,t,i);if(!o)return;const n=ls(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:s,filterHandler:r}=o,{handler:a,handlerParams:l}=this.createHandlerFromFunc(e,r,n);return{handler:a,handlerParams:l,handlerGenerator:null!==s&&void 0!==s?s:r}}createHandlerFromFunc(e,t,i){const o=e.getColDef();return{handler:t(oo(this.gos,{column:e,colDef:o})),handlerParams:this.createHandlerParams(e,i)}}createHandlerParams(e,t){const i=e.getColDef(),o=e.getColId(),s=this.filterChangedCallbackFactory(e);return oo(this.gos,{colDef:i,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:e=>{var t,i;return null===(t=null===(i=this.beans.filterManager)||void 0===i?void 0:i.doesRowPassOtherFilters(o,e))||void 0===t||t},onModelChange:(t,i)=>{this.updateStoredModel(o,t),this.refreshHandlerAndUi(e,t,"handler",!1,i).then(()=>{s((0,n.A)((0,n.A)({},i),{},{source:"columnFilter"}))})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:i,groupFilter:o}=this.beans;this.allColumnFilters.forEach((i,o)=>{let n;n=i.column.isPrimary()?t.getColDefCol(o):t.getCol(o),n&&n===i.column||(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(o))});const n=o&&e.every(e=>o.isGroupFilter(e));e.length>0&&!n&&(null===i||void 0===i||i.onFilterChanged({columns:e,source:"api"}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const t=this.beans.groupFilter;return null===t||void 0===t||!t.isGroupFilter(e)||t.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){var i;const{userCompFactory:o,frameworkOverrides:s,selectableFilter:r,gos:a}=this.beans,l=e.getColDef(),d=null!==r&&void 0!==r&&r.isSelectable(l)?r.getFilterDef(e,l):l,c=null!==(i=Vl(s,d,()=>this.getDefaultFloatingFilter(e)))&&void 0!==i?i:"agReadOnlyFloatingFilter",u=a.get("enableFilterHandlers"),h=ls(o,d,this.createFilterCompParams(e,u,"init",!0)),p=oo(a,{column:e,filterParams:h,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:t=>{const i=this.getOrCreateFilterUi(e);null===i||void 0===i||i.then(e=>{t(ds(e))})},showParentFilter:t});if(u){const t=p,i=e.getColId(),o=this.filterChangedCallbackFactory(e);t.onUiChange=t=>this.floatingFilterUiChanged(e,t),t.model=dl(this.model,i),t.onModelChange=(t,s)=>{this.updateStoredModel(i,t),this.refreshHandlerAndUi(e,t,"floating",!0,s).then(()=>{o((0,n.A)((0,n.A)({},s),{},{source:"columnFilter"}))})},t.getHandler=()=>this.getHandler(e,!0),t.source="init"}return rs(o,l,p,c)}getCurrentFloatingFilterParentModel(e){var t;return this.getModelFromFilterWrapper(null!==(t=this.cachedFilter(e))&&void 0!==t?t:{column:e})}destroyFilterUi(e,t,i,o){const n="paramsUpdated";if(e.isHandler){const s=t.getColId();delete this.initialModel[s],this.state.delete(s);const r=e.filterUi,a=this.createFilterUiForHandler(i,o);e.filterUi=a;const l=this.eventSvc;null!==r&&void 0!==r&&r.created?r.promise.then(e=>{this.destroyBean(e),l.dispatchEvent({type:"filterDestroyed",source:n,column:t})}):l.dispatchEvent({type:"filterHandlerDestroyed",source:n,column:t})}else this.destroyFilter(t,n)}destroyFilter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const i=e.getColId(),o=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialModel[i],o&&this.disposeFilterWrapper(o,t).then(t=>{var i;t&&this.isAlive()&&(null===(i=this.beans.filterManager)||void 0===i||i.onFilterChanged({columns:[e],source:"api"}))})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let i=!1;const{column:o,isHandler:n,filterUi:s}=e,r=o.getColId();n&&(i=this.isHandlerActive(o),this.destroyBean(e.handler),delete this.model[r],this.state.delete(r));const a=()=>{this.setColFilterActive(o,!1,"filterDestroyed"),this.allColumnFilters.delete(r),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:o})};if(s){if(s.created)return s.promise.then(e=>(i=n?i:!(null===e||void 0===e||!e.isFilterActive()),this.destroyBean(e),a(),i));a()}return Ln.resolve(i)}filterChangedCallbackFactory(e){return t=>{var i;this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:null!==(i=null===t||void 0===t?void 0:t.source)&&void 0!==i?i:"columnFilter"})}}filterParamsChanged(e){var t,i,o,s,r;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const l=this.allColumnFilters.get(e);if(!l)return;const d=this.beans,c=l.column,u=c.getColDef(),h=c.isFilterAllowed(),p=this.getDefaultFilter(c),g=d.selectableFilter,v=null!==g&&void 0!==g&&g.isSelectable(u)?g.getFilterDef(c,u):u,m=h?this.createHandlerFunc(c,v,this.getDefaultFilter(c)):void 0,f=!!m,C=l.isHandler;if(C!=f)return void this.destroyFilter(c,"paramsUpdated");const{compDetails:w,createFilterUi:b}=null!==(t=h?this.createFilterComp(c,v,p,e=>e,f,"colDef"):null)&&void 0!==t?t:{compDetails:null,createFilterUi:null},y=null!==(i=null===w||void 0===w?void 0:w.params)&&void 0!==i?i:ls(d.userCompFactory,v,this.createFilterCompParams(c,f,"colDef"));if(C){var S;const t=null!==(S=null===m||void 0===m?void 0:m.handlerNameOrCallback)&&void 0!==S?S:null===m||void 0===m?void 0:m.filterHandler,i=dl(this.model,e);if(l.handlerGenerator!=t){var x;const o=l.handler,{handler:s,handlerParams:r}=this.createHandlerFromFunc(c,m.filterHandler,y);var F;if(l.handler=s,l.handlerParams=r,l.handlerGenerator=t,delete this.model[e],null===(x=s.init)||void 0===x||x.call(s,(0,n.A)((0,n.A)({},r),{},{source:"init",model:null})),this.destroyBean(o),null!=i)null===(F=this.beans.filterManager)||void 0===F||F.onFilterChanged({columns:[c],source:a})}else{var R,P;const e=this.createHandlerParams(c,null===w||void 0===w?void 0:w.params);l.handlerParams=e,null===(R=(P=l.handler).refresh)||void 0===R||R.call(P,(0,n.A)((0,n.A)({},e),{},{source:"colDef",model:i}))}}!this.areFilterCompsDifferent(null!==(o=null===(s=l.filterUi)||void 0===s?void 0:s.compDetails)&&void 0!==o?o:null,w)&&l.filterUi&&w?(l.filterUi.filterParams=y,null===(r=nl(l,C))||void 0===r||r.then(e=>{!1===(null===e||void 0===e||!e.refresh||e.refresh(y))?this.destroyFilterUi(l,c,w,b):this.dispatchLocalEvent({type:"filterParamsChanged",column:c,params:y})})):this.destroyFilterUi(l,c,w,b)}refreshHandlerAndUi(e,t,i,o,n){var s;const r=this.cachedFilter(e);if(!r)return o&&this.getOrCreateFilterWrapper(e,!0),Ln.resolve();if(!r.isHandler)return Ln.resolve();const{filterUi:a,handler:l,handlerParams:d}=r;return sl(()=>{if(a){const{created:e,filterParams:t}=a;if(e)return a.promise.then(e=>e?{filter:e,filterParams:t}:void 0);a.refreshed=!0}return Ln.resolve(void 0)},l,d,t,null!==(s=this.state.get(e.getColId()))&&void 0!==s?s:{model:t},i,n)}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:o}=t;return!(i===o||(null===i||void 0===i?void 0:i.render)&&(null===o||void 0===o?void 0:o.render)&&i.render===o.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(e=>e.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const i=this.getOrCreateFilterUi(t);return i?new Promise(e=>{i.then(t=>{e(ds(t))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(e=>{let{model:t,source:i}=e;return this.setModel(t,i)}),this.modelUpdates=[],this.columnModelUpdates.forEach(e=>{let{key:t,model:i,resolve:o}=e;this.setModelForColumn(t,i).then(()=>o())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:t,model:o}=this,n=e.getColId(),s=t.get(n);var i;return s?null!==(i=s.model)&&void 0!==i?i:null:dl(o,n)}const o=this.cachedFilter(e);return o?this.getModelFromFilterWrapper(o):null}setModelForColumn(e,t){var i;if(null!==(i=this.beans.dataTypeSvc)&&void 0!==i&&i.isPendingInference){let i=()=>{};const o=new Promise(e=>{i=e});return this.columnModelUpdates.push({key:e,model:t,resolve:i}),o}return new Promise(i=>{this.setModelForColumnLegacy(e,t).then(e=>i(e))})}getStateForColumn(e){var t;return null!==(t=this.state.get(e))&&void 0!==t?t:{model:dl(this.model,e)}}setModelForColumnLegacy(e,t){const i=this.beans.colModel.getColDefCol(e),o=i?this.getOrCreateFilterWrapper(i,!0):null;return o?this.setModelOnFilterWrapper(o,t):Ln.resolve()}setColDefPropsForDataType(e,t,i){const o=e.filter,n=!0===o?this.getDefaultFilterFromDataType(()=>t.baseDataType):o;if("string"!==typeof n)return;let s,r;const a=this.beans,{filterParams:l,filterValueGetter:d}=e;var c,u;"agMultiColumnFilter"===n?({filterParams:s,filterValueGetter:r}=null!==(c=null===(u=a.multiFilter)||void 0===u?void 0:u.getParamsForDataType(l,d,t,i))&&void 0!==c?c:{}):({filterParams:s,filterValueGetter:r}=Dl(n,l,d,t,i,a,this.getLocaleTextFunc()));e.filterParams=s,r&&(e.filterValueGetter=r)}setColFilterActive(e,t,i,o){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",i)),e.dispatchColEvent("filterChanged",i,o)}setModelOnFilterWrapper(e,t,i){return new Ln(o=>{if(e.isHandler){const n=e.column,s=n.getColId(),r=this.model[s];return this.updateStoredModel(s,t),i&&t===r?void o():void this.refreshHandlerAndUi(n,t,"api").then(()=>o())}const n=nl(e);n?n.then(e=>{if("function"!==typeof(null===e||void 0===e?void 0:e.setModel))return oi(65),void o();(e.setModel(t)||Ln.resolve()).then(()=>o())}):o()})}updateStoredModel(e,t){v(t)?this.model[e]=t:delete this.model[e];const i=this.state.get(e),o={model:t,state:null===i||void 0===i?void 0:i.state};this.state.set(e,o)}filterModified(e,t){var i;null===(i=this.getOrCreateFilterUi(e))||void 0===i||i.then(i=>{this.eventSvc.dispatchEvent((0,n.A)({type:"filterModified",column:e,filterInstance:i},t))})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent((0,n.A)({type:"filterUiChanged",column:e},t))}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent((0,n.A)({type:"floatingFilterUiChanged",column:e},t))}updateModel(e,t,i){var o,s;const r=e.getColId(),a=this.cachedFilter(e),l=()=>null===a||void 0===a?void 0:a.filterUi;ll({action:t,filterParams:null===a||void 0===a||null===(o=a.filterUi)||void 0===o?void 0:o.filterParams,getFilterUi:l,getModel:()=>dl(this.model,r),getState:()=>this.state.get(r),updateState:t=>this.updateState(e,t),updateModel:e=>{var o;return null===(o=l())||void 0===o||null===(o=o.filterParams)||void 0===o?void 0:o.onModelChange(e,(0,n.A)((0,n.A)({},i),{},{fromAction:t}))},processModelToApply:null!==a&&void 0!==a&&a.isHandler?null===(s=a.handler.processModelToApply)||void 0===s?void 0:s.bind(a.handler):void 0})}updateAllModels(e,t){const i=[];this.allColumnFilters.forEach((t,o)=>{const n=this.beans.colModel.getColDefCol(o);var s,r;n&&ll({action:e,filterParams:null===(s=t.filterUi)||void 0===s?void 0:s.filterParams,getFilterUi:()=>t.filterUi,getModel:()=>dl(this.model,o),getState:()=>this.state.get(o),updateState:e=>this.updateState(n,e),updateModel:t=>{this.updateStoredModel(o,t),this.dispatchLocalEvent({type:"filterAction",column:n,action:e}),i.push(this.refreshHandlerAndUi(n,t,"ui"))},processModelToApply:null!==t&&void 0!==t&&t.isHandler?null===(r=t.handler.processModelToApply)||void 0===r?void 0:r.bind(t.handler):void 0})}),i.length&&Ln.all(i).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();al(()=>{var t;return null===(t=this.cachedFilter(e))||void 0===t?void 0:t.filterUi},()=>dl(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:i}=this;for(const s of i)if("COLUMN_MENU"===s.source)return!1;let o=!1;for(const s of e.keys()){var n;const i=e.get(s);if(!1===i.valid)return!1;(null!==(n=i.model)&&void 0!==n?n:null)!==dl(t,s)&&(o=!0)}return o}hasUnappliedModel(e){var t,i;const{model:o,state:n}=this;return(null!==(t=null===(i=n.get(e))||void 0===i?void 0:i.model)&&void 0!==t?t:null)!==dl(o,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if("newFiltersToolPanel"===t)return!0;const i=this.beans.filterPanelSvc;return!(null===i||void 0===i||!i.isActive)&&!!i.getState(e.getColId())}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}},class extends ht{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){var e;null===(e=this.hidePopup)||void 0===e||e.call(this)}showMenuAfterMouseEvent(e,t,i,o){e&&!e.isColumn||this.showPopup(e,o=>{var n;null===(n=this.popupSvc)||void 0===n||n.positionPopupUnderMouseEvent({additionalParams:{column:e},type:i,mouseEvent:t,ePopup:o})},i,t.target,Ji(this.gos),o)}showMenuAfterButtonClick(e,t,i,o){if(e&&!e.isColumn)return;let n=-1,s="left";const r=Ji(this.gos);!r&&this.gos.get("enableRtl")&&(n=1,s="right");const a=r?void 0:4*n,l=r?void 0:4;this.showPopup(e,o=>{var n;null===(n=this.popupSvc)||void 0===n||n.positionPopupByComponent({type:i,eventSource:t,ePopup:o,nudgeX:a,nudgeY:l,alignSide:s,keepWithinBounds:!0,position:"under",additionalParams:{column:e}})},i,t,r,o)}showPopup(e,t,i,o,n,s){var r;const a=e?this.createBean(new bl(e,"COLUMN_MENU")):void 0;if(this.activeMenu=a,null===a||void 0===a||!a.hasFilter()||!e)return void ni(57);const l=cl({tag:"div",cls:"ag-menu".concat(n?"":" ag-filter-menu"),role:"presentation"});let d;[this.tabListener]=this.addManagedElementListeners(l,{keydown:e=>this.trapFocusWithin(e,l)}),l.appendChild(null===a||void 0===a?void 0:a.getGui());const c=eo(this.gos)?null!==o&&void 0!==o?o:this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,u=this.getLocaleTextFunc(),h=n&&"columnFilter"!==i?u("ariaLabelColumnMenu","Column Menu"):u("ariaLabelColumnFilter","Column Filter"),p=null===(r=this.popupSvc)||void 0===r?void 0:r.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:t=>{Ic(e,!1,"contextMenu");const n=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),n&&o&&Ee(o)){const e=Os(o);null===e||void 0===e||e.focus({preventScroll:!0})}null===a||void 0===a||a.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e),null===s||void 0===s||s()},positionCallback:()=>t(l),anchorToElement:c,ariaLabel:h});p&&(this.hidePopup=d=p.hideFunc),a.afterInit().then(()=>{t(l),a.afterGuiAttached({container:i,hidePopup:d})}),Ic(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==us.TAB||e.defaultPrevented||Ns(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),Ls(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:null!==i&&void 0!==i?i:null,columnGroup:null})}isMenuEnabled(e){var t;return e.isFilterAllowed()&&(null!==(t=e.getColDef().menuTabs)&&void 0!==t?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}}],dynamicBeans:{headerFilterCellCtrl:class extends Dc{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,i,o,n){this.comp=e;const s=Rn(this,this.beans.context,n);this.eButtonShowMainFilter=i,this.eFloatingFilterBody=o,this.setGui(t,s),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(s),this.setupLeft(s),this.setupHover(s),this.setupFocus(s),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(s),this.setupUi(),s.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(s);const r=()=>this.onColDefChanged(s);s.addManagedListeners(this.column,{colDefChanged:r}),s.addManagedEventListeners({filterSwitched:e=>{let{column:t}=e;t===this.column&&r()}}),s.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return oo(t.gos,{colDef:i,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Bc("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Ol(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();G(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if(P(t)===this.eGui)return;const i=Ns(t,this.eGui,null,e.shiftKey);var o;if(i)return null===(o=t.headerNavigation)||void 0===o||o.scrollToColumn(this.column),e.preventDefault(),void i.focus();const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let i=this.column;do{if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case us.UP:case us.DOWN:case us.LEFT:case us.RIGHT:if(t)return;Il(e);case us.ENTER:t&&Ls(this.eGui)&&e.preventDefault();break;case us.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&me(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==us.TAB);if(e&&t){const t=e.shiftKey;Ls(this.eGui,t)}}this.focusThis()}setupHover(e){var t;null===(t=this.beans.colHover)||void 0===t||t.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new Fc(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){var e;this.suppressFilterButton=!(null!==(e=this.beans.menuSvc)&&void 0!==e&&e.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!Ji(this.gos)}setupUserComp(){var e;if(!this.active)return;const t=null===(e=this.beans.colFilter)||void 0===e?void 0:e.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());t&&this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){var e;const t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;null===(e=this.beans.menuSvc)||void 0===e||e.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:i,gos:o}=this,s=e=>{if("filterDestroyed"===(null===e||void 0===e?void 0:e.source)&&(!this.isAlive()||null===t||void 0===t||!t.isAlive()))return;const s=this.comp.getFloatingFilterComp();s&&s.then(s=>{if(s){var r;if(o.get("enableFilterHandlers")){const t=e;let i="filter";return null!==t&&void 0!==t&&t.afterFloatingFilter?i="ui":null!==t&&void 0!==t&&t.afterDataChange?i="dataChanged":"api"===(null===e||void 0===e?void 0:e.source)&&(i="api"),void this.updateFloatingFilterParams(this.userCompDetails,i)}const a=null===t||void 0===t?void 0:t.getCurrentFloatingFilterParentModel(i),l=e?(0,n.A)((0,n.A)({},e),{},{columns:null!==(r=e.columns)&&void 0!==r?r:[],source:"api"===e.source?"api":"columnFilter"}):null;s.onParentModelChanged(a,l)}})};[this.destroySyncListener]=e.addManagedListeners(i,{filterChanged:s}),null!==t&&void 0!==t&&t.isFilterActive(i)&&s(null)}setupWidth(e){const t=()=>{const e="".concat(this.column.getActualWidth(),"px");this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){var e;const t=!(null===(e=this.beans.filterManager)||void 0===e||!e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const o=this.beans.colFilter,n=this.active?null===o||void 0===o?void 0:o.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,s=this.comp.getFloatingFilterComp();s&&n?s.then(t=>{var s;!t||null!==o&&void 0!==o&&o.areFilterCompsDifferent(null!==(s=this.userCompDetails)&&void 0!==s?s:null,n)?this.updateCompDetails(e,n,i):this.updateFloatingFilterParams(n,"colDef")}):this.updateCompDetails(e,n,i)}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){var i;if(!e)return;let o=e.params;null===(i=this.comp.getFloatingFilterComp())||void 0===i||i.then(e=>{if("function"===typeof(null===e||void 0===e?void 0:e.refresh)){var i,s;if(this.gos.get("enableFilterHandlers"))o=(0,n.A)((0,n.A)({},o),{},{model:dl(null!==(i=null===(s=this.beans.colFilter)||void 0===s?void 0:s.model)&&void 0!==i?i:{},this.column.getColId()),source:t});e.refresh(o)}})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}}},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:function(e){const t=e.filterManager;return!(null===t||void 0===t||!t.isColumnFilterPresent())||!(null===t||void 0===t||!t.isAggregateFilterPresent())},getColumnFilterInstance:function(e,t){var i,o;return null!==(i=null===(o=e.filterManager)||void 0===o?void 0:o.getColumnFilterInstance(t))&&void 0!==i?i:Promise.resolve(void 0)},destroyFilter:function(e,t){const i=e.colModel.getColDefCol(t);var o;if(i)return null===(o=e.colFilter)||void 0===o?void 0:o.destroyFilter(i,"api")},setFilterModel:function(e,t){e.frameworkOverrides.wrapIncoming(()=>{var i;return null===(i=e.filterManager)||void 0===i?void 0:i.setFilterModel(t)})},getFilterModel:function(e){var t,i;return null!==(t=null===(i=e.filterManager)||void 0===i?void 0:i.getFilterModel())&&void 0!==t?t:{}},getColumnFilterModel:function(e,t,i){var o;const{gos:n,colModel:s,colFilter:r}=e;i&&!n.get("enableFilterHandlers")&&(oi(288),i=!1);const a=s.getColDefCol(t);return a&&null!==(o=null===r||void 0===r?void 0:r.getModelForColumn(a,i))&&void 0!==o?o:null},setColumnFilterModel:function(e,t,i){var o,n;return null!==(o=null===(n=e.filterManager)||void 0===n?void 0:n.setColumnFilterModel(t,i))&&void 0!==o?o:Promise.resolve()},showColumnFilter:function(e,t){var i;const o=e.colModel.getCol(t);o?null===(i=e.menuSvc)||void 0===i||i.showFilterMenu({column:o,containerType:"columnFilter",positionBy:"auto"}):ni(12,{colKey:t})},hideColumnFilter:function(e){var t;null===(t=e.menuSvc)||void 0===t||t.hideFilterMenu()},getColumnFilterHandler:function(e,t){var i;const o=e.colModel.getCol(t);if(o)return null===(i=e.colFilter)||void 0===i?void 0:i.getHandler(o,!0);ni(12,{colKey:t})},doFilterAction:function(e,t){const{colModel:i,colFilter:o,gos:n}=e;if(!n.get("enableFilterHandlers"))return void oi(287);const{colId:s,action:r}=t;if(s){const e=i.getColById(s);e&&(null===o||void 0===o||o.updateModel(e,r))}else null===o||void 0===o||o.updateAllModels(r)}},dependsOn:[Xm,am,$m,rm]},Jm={moduleName:"CustomFilter",version:Kt,userComponents:{agReadOnlyFloatingFilter:class extends Tn{constructor(){super(dm,[wr]),this.eFloatingFilterText=Pn}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel("".concat(t," ").concat(this.getLocaleTextFunc()("ariaFilterInput","Filter Input"))),this.gos.get("enableFilterHandlers")){const t=e,i=t.getHandler();if(i.getModelAsString){const e=i.getModelAsString(t.model);this.eFloatingFilterText.setValue(e)}}}onParentModelChanged(e){null!=e?this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}}):this.eFloatingFilterText.setValue("")}refresh(e){this.init(e)}}},dependsOn:[Zm]},ef={moduleName:"TextFilter",version:Kt,dependsOn:[Zm],userComponents:{agTextColumnFilter:{classImp:class extends gm{constructor(){super("textFilter",Hm,jm),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},o=this.getValues(e);return o.length>0&&(i.filter=o[0]),o.length>1&&(i.filterTo=o[1]),i}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(e,i,o,n)=>{i<n&&t.push(g(e.getValue()))}),t}createEValue(){const e=cl({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:i}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,i,"to"),e}createFromToElement(e,t,i){const o=this.createManagedBean(new Cr);o.addCss("ag-filter-".concat(i)),o.addCss("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeEValues(e,t){const i=i=>this.removeComponents(i,e,t),{eValuesFrom:o,eValuesTo:n}=this;i(o),i(n)}},params:{useForm:!0}},agTextColumnFloatingFilter:class extends Wm{constructor(){super(...arguments),this.FilterModelFormatterClass=_m,this.filterType="text",this.defaultOptions=jm}createFloatingFilterInputService(){return this.createManagedBean(new Bm)}}},dynamicBeans:{agTextColumnFilterHandler:class extends ym{constructor(){super(Hm,jm),this.filterType="text",this.FilterModelFormatterClass=_m}updateParams(e){var t,i;super.updateParams(e);const o=e.filterParams;this.matcher=null!==(t=o.textMatcher)&&void 0!==t?t:Km,this.formatter=null!==(i=o.textFormatter)&&void 0!==i?i:o.caseSensitive?Ym:qm}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,o){const s=e.map(e=>this.formatter(e))||[],r=this.formatter(t),{api:a,colDef:l,column:d,context:c,filterParams:{textFormatter:u}}=this.params;if("blank"===i.type)return hm(t);if("notBlank"===i.type)return!hm(t);const h={api:a,colDef:l,column:d,context:c,node:o.node,data:o.data,filterOption:i.type,value:r,textFormatter:u};return s.some(e=>this.matcher((0,n.A)((0,n.A)({},h),{},{filterText:e})))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){const t=e=>{const t=(0,n.A)({},e),{filter:i,filterTo:o}=e;var s,r;i&&(t.filter=null!==(s=Vm(i))&&void 0!==s?s:null);o&&(t.filterTo=null!==(r=Vm(o))&&void 0!==r?r:null);return t};return Bl(e)?(0,n.A)((0,n.A)({},e),{},{conditions:e.conditions.map(t)}):t(e)}return e}}}},tf={moduleName:"NumberFilter",version:Kt,dependsOn:[Zm],userComponents:{agNumberColumnFilter:{classImp:class extends gm{constructor(){super("numberFilter",Lm,Tm),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}afterGuiAttached(e){super.afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!Ss()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}refreshInputValidation(){for(let e=0;e<this.eValuesFrom.length;e++){const t=this.eValuesFrom[e],i=this.eValuesTo[e];this.refreshInputPairValidation(t,i)}}refreshInputPairValidation(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.params.numberParser,n=Om(o,e),s=Om(o,t),r=function(e,t,i){const o=null!=e&&null!=t&&e>=t;if(!o)return null;return"strict".concat(i?"Max":"Min","ValueValidation")}(n,s,i),a=r?this.translate(r,[String(i?s:n)]):"";(i?e:t).setCustomValidity(a),(i?t:e).setCustomValidity(""),a.length>0&&this.beans.ariaAnnounce.announceValue(a,"dateFilter")}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){var i,o;return(null!==(i=null===e||void 0===e?void 0:e.isInvalid)&&void 0!==i&&i)===(null!==(o=null===t||void 0===t?void 0:t.isInvalid)&&void 0!==o&&o)}refresh(e){const t=super.refresh(e),{state:i,additionalEventAttributes:o}=e,n=this.state,s=null===o||void 0===o?void 0:o.fromAction;return!(s&&"apply"!=s)&&i.model===n.model&&this.areStatesEqual(i.state,n.state)||this.refreshInputValidation(),t}setElementValue(e,t,i){const{numberFormatter:o}=this.params,n=!i&&o?o(null!==t&&void 0!==t?t:null):t;super.setElementValue(e,n),null===n&&e.setCustomValidity("")}createEValue(){const{params:e,eValuesFrom:t,eValuesTo:i}=this,o=km(e),n=cl({tag:"div",cls:"ag-filter-body",role:"presentation"}),s=this.createFromToElement(n,t,"from",o),r=this.createFromToElement(n,i,"to",o),a=(e,t,i)=>()=>this.refreshInputPairValidation(e,t,i),l=a(s,r,!0);s.onValueChange(l),s.addGuiEventListener("focusin",l);const d=a(s,r,!1);return r.onValueChange(d),r.addGuiEventListener("focusin",d),n}createFromToElement(e,t,i,o){const n=this.createManagedBean(o?new Cr({allowedCharPattern:o}):new yr);return n.addCss("ag-filter-".concat(i)),n.addCss("ag-filter-filter"),t.push(n),e.appendChild(n.getGui()),n}removeEValues(e,t){const i=i=>this.removeComponents(i,e,t);i(this.eValuesFrom),i(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(e,i,o,n)=>{i<n&&t.push(Im(Nm(this.params.numberParser,e.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},o=this.getValues(e);return o.length>0&&(i.filter=o[0]),o.length>1&&(i.filterTo=o[1]),i}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>e||(e=!t.getInputElement().validity.valid)),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,e=>t||(t=!e.getInputElement().validity.valid)),t}canApply(e){return!this.hasInvalidInputs()}},params:{useForm:!0}},agNumberColumnFloatingFilter:class extends Wm{constructor(){super(...arguments),this.FilterModelFormatterClass=Gm,this.filterType="number",this.defaultOptions=Tm}updateParams(e){km(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=km(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Bm({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Um)}convertValue(e){return e?Number(e):null}}},dynamicBeans:{agNumberColumnFilterHandler:class extends Sm{constructor(){super(Lm,Tm),this.filterType="number",this.FilterModelFormatterClass=Gm}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}}}},of={moduleName:"DateFilter",version:Kt,dependsOn:[Zm],userComponents:{agDateColumnFilter:{classImp:class extends gm{constructor(){super("dateFilter",wm,Cm),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=bm,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!Ss()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(t,i)=>{const o=e[t];if(null!=o){if(!isNaN(o))return null==o?i:Number(o);oi(82,{param:t})}return i},i=t("minValidYear",1e3),o=t("maxValidYear",bm);this.minValidYear=i,this.maxValidYear=o,i>o&&oi(83);const{minValidDate:n,maxValidDate:s}=e,r=n instanceof Date?n:ir(n);this.minValidDate=r;const a=s instanceof Date?s:ir(s);this.maxValidDate=a,r&&a&&r>a&&oi(84)}refreshInputValidation(){for(let e=0;e<this.dateConditionFromComps.length;e++)this.refreshInputPairValidation(e,!1,!0)}refreshInputPairValidation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{dateConditionFromComps:o,dateConditionToComps:n,beans:s}=this,r=o[e],a=n[e],l=r.getDate(),d=a.getDate(),c=function(e,t,i){const o=null!=e&&null!=t&&e>=t;if(!o)return null;return"".concat(i?"max":"min","DateValidation")}(l,d,t),u=c?this.translate(c,[String(t?d:l)]):"",h=!Ss()&&!i;(t?r:a).setCustomValidity(u,h),(t?a:r).setCustomValidity("",h),u.length>0&&s.ariaAnnounce.announceValue(u,"dateFilter")}createDateCompWrapper(e,t,i){const{beans:{userCompFactory:o,context:n,gos:s},params:r}=this,a="from"===i,l=new mm(n,o,r.colDef,oo(s,{onDateChanged:()=>{this.refreshInputPairValidation(t,a),this.onUiChanged()},onFocusIn:()=>this.refreshInputPairValidation(t,a),filterParams:r,location:"filter"}),e);return this.addDestroyFunc(()=>l.destroy()),l}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){var i,o;return(null!==(i=null===e||void 0===e?void 0:e.isInvalid)&&void 0!==i&&i)===(null!==(o=null===t||void 0===t?void 0:t.isInvalid)&&void 0!==o&&o)}setElementValue(e,t){e.setDate(t),t||e.setCustomValidity("")}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=cl({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,o){const n=cl({tag:"div",cls:"ag-filter-".concat(o," ag-filter-date-").concat(o)});t.push(n),e.appendChild(n),i.push(this.createDateCompWrapper(n,t.length-1,o))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),um(this.eConditionPanelsFrom,e,t),um(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){const o=um(e,t,i);for(const n of o)n.destroy()}isValidDateValue(e){if(null===e)return!1;const{minValidDate:t,maxValidDate:i,minValidYear:o,maxValidYear:n}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<o)return!1;if(i){if(e>i)return!1}else if(e.getUTCFullYear()>n)return!1;return!0}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{var i,o;return e||(e=null!=t.getDate()&&!(null===(i=null===(o=t.getValidity())||void 0===o?void 0:o.valid)||void 0===i||i))}),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,e=>{var i,o;return t||(t=!(null===(i=null===(o=e.getValidity())||void 0===o?void 0:o.valid)||void 0===i||i))}),t}canApply(e){return!this.hasInvalidInputs()}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachPositionInput(e,(e,i,o,n)=>{!t||i>=n||t&&(t=this.isValidDateValue(e.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),i={},o=this.getValues(e),s=this.params.useIsoSeparator?"T":" ";return o.length>0&&(i.dateFrom=Qs(o[0],!0,s)),o.length>1&&(i.dateTo=Qs(o[1],!0,s)),(0,n.A)({dateFrom:null,dateTo:null,filterType:this.filterType,type:t},i)}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(e,i,o,n)=>{i<n&&t.push(e.getDate())}),t}translate(e,t){let i=e;return"lessThan"===e?i="before":"greaterThan"===e&&(i="after"),super.translate(i,t)}},params:{useForm:!0}},agDateInput:class extends Tn{constructor(){super(Mm,[wr]),this.eDateInput=Pn,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this),focusin:this.handleFocusIn.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled())return this.isApply?(this.applyOnFocusOut=!e,void(e&&this.params.onDateChanged())):void(e||this.params.onDateChanged())}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}handleFocusIn(){var e,t;null===(e=(t=this.params).onFocusIn)||void 0===e||e.call(t)}setParams(e){var t,i;const o=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&ys();const{minValidYear:s,maxValidYear:r,minValidDate:a,maxValidDate:l,buttons:d,includeTime:c,colDef:u}=e.filterParams||{},h=this.beans.dataTypeSvc,p=null!==(t=null!==c&&void 0!==c?c:null===h||void 0===h||null===(i=h.getDateIncludesTimeFlag)||void 0===i?void 0:i.call(h,u.cellDataType))&&void 0!==t&&t;if(n?p?(o.type="datetime-local",o.step="1"):o.type="date":o.type="text",a&&s&&oi(85),l&&r&&oi(86),a&&l){const[e,t]=[a,l].map(e=>e instanceof Date?e:ir(e));e&&t&&e.getTime()>t.getTime()&&oi(87)}a?a instanceof Date?o.min=er(a):o.min=a:s&&(o.min="".concat(s,"-01-01")),l?l instanceof Date?o.max=er(l):o.max=l:r&&(o.max="".concat(r,"-12-31")),this.isApply="floatingFilter"===e.location&&!(null===d||void 0===d||!d.includes("apply"))}refresh(e){this.params=e,this.setParams(e)}getDate(){return ir(this.eDateInput.getValue())}setDate(e){var t,i;const o=this.params.filterParams.colDef.cellDataType,n=null!==(t=null===(i=this.beans.dataTypeSvc)||void 0===i?void 0:i.getDateIncludesTimeFlag(o))&&void 0!==t&&t;this.eDateInput.setValue(Qs(e,n))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){null!==e&&void 0!==e&&e.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){var t,i;return null===(t=null===e||void 0===e||null===(i=e.filterParams)||void 0===i?void 0:i.browserDatePicker)||void 0===t||t}},agDateColumnFloatingFilter:class extends Em{constructor(){super(Am,[wr]),this.eReadOnlyText=Pn,this.eDateWrapper=Pn,this.FilterModelFormatterClass=Pm,this.filterType="date",this.defaultOptions=Cm}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const t=e?ir(e.dateFrom):null;this.dateComp.setDate(t),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){pe(this.eDateWrapper,e),pe(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){var t;const i=this.params;i.onUiChange();const o=i.model,s=Qs(e),r=null==s?null:(0,n.A)((0,n.A)({},null!==o&&void 0!==o?o:{filterType:this.filterType,type:null!==(t=this.lastType)&&void 0!==t?t:this.optionsFactory.defaultOption}),{},{dateFrom:s});i.onModelChange(r,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{null===t||void 0===t||t.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=vl(e,this.defaultDebounceMs);return oo(this.gos,{onDateChanged:Ct(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:i,params:{column:o}}=this;this.dateComp=new mm(e,t,o.getColDef(),this.getDateComponentParams(),i,e=>{e.setInputAriaLabel(this.getAriaLabel(o))}),this.addDestroyFunc(()=>this.dateComp.destroy())}}},dynamicBeans:{agDateColumnFilterHandler:class extends Sm{constructor(){super(wm,Cm),this.filterType="date",this.FilterModelFormatterClass=Pm}comparator(){var e;return null!==(e=this.params.filterParams.comparator)&&void 0!==e?e:Dm}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}}}},nf={moduleName:"QuickFilterCore",version:Kt,rowModels:["clientSide"],beans:[class extends ht{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",e=>this.setFilter(e.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){var e,t;const{autoColSvc:i,colModel:o,gos:n,pivotResultCols:s}=this.beans,r=o.isPivotMode(),a=null===i||void 0===i?void 0:i.getColumns(),l=o.getColDefCols();let d=null!==(e=r&&!n.get("applyQuickFilterBeforePivotOrAgg")?null===s||void 0===s||null===(t=s.getPivotResultCols())||void 0===t?void 0:t.list:l)&&void 0!==e?e:[];a&&(d=d.concat(a)),this.colsToUse=n.get("includeHiddenColumnsInQuickFilter")?d:d.filter(e=>e.isVisible()||e.isRowGroupActive())}isFilterPresent(){return null!==this.quickFilter}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassCache(e,i):this.doesRowPassNoCache(e,i))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseFilter(e){return v(e)?e.toUpperCase():null}setFilter(e){if(null!=e&&"string"!==typeof e)return void oi(70,{newFilter:e});const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(i=>{const o=this.getTextForColumn(i,e);return v(o)&&o.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let i;e?(this.checkGenerateAggText(t),i=t.quickFilterAggregateText):i=this.getAggText(t);const{quickFilterParts:o,matcher:n}=this;return n(o,i)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let i=this.beans.filterValueSvc.getValue(e,t);const o=e.getColDef();if(o.getQuickFilterText){const n=oo(this.gos,{value:i,node:t,data:t.data,column:e,colDef:o});i=o.getQuickFilterText(n)}return v(i)?i.toString().toUpperCase():null}getAggText(e){const t=[];for(const i of this.colsToUse){const o=this.getTextForColumn(i,e);v(o)&&t.push(o)}return t.join("\n")}}],dependsOn:[Xm,$m]},sf={moduleName:"QuickFilter",version:Kt,apiFunctions:{isQuickFilterPresent:function(e){var t;return!(null===(t=e.quickFilter)||void 0===t||!t.isFilterPresent())},getQuickFilter:function(e){var t;return null===(t=e.quickFilter)||void 0===t?void 0:t.getText()},resetQuickFilter:function(e){var t;null===(t=e.quickFilter)||void 0===t||t.resetCache()}},dependsOn:[nf]},rf={moduleName:"ExternalFilter",version:Kt,dependsOn:[Xm]},af=(e,t,i)=>{var o,n;const{editModelSvc:s}=e,r=null===s||void 0===s||null===(o=s.getCellValidationModel())||void 0===o||null===(o=o.getCellValidation(t))||void 0===o?void 0:o.errorMessages,a=null===s||void 0===s||null===(n=s.getRowValidationModel().getRowValidation(t))||void 0===n?void 0:n.errorMessages,l=r||a;return null!==l&&void 0!==l&&l.length?l.join(i("tooltipValidationErrorSeparator",". ")):void 0},lf={moduleName:"Tooltip",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,o){e&&t.destroyBean(e);const n=this.gos,s=zv(n),{column:r,eGui:a}=t,l=r.getColDef();o||!s||l.headerComponent||(o=Le(()=>a.querySelector(".ag-header-cell-text")));const d="header",c=this.beans.colNames.getDisplayNameForColumn(r,"header",!0),u=null!==i&&void 0!==i?i:c,h={getGui:()=>a,getLocation:()=>d,getTooltipValue:()=>{var e,t;return null!==(e=null!==i&&void 0!==i?i:null===l||void 0===l||null===(t=l.headerTooltipValueGetter)||void 0===t?void 0:t.call(l,oo(n,{location:d,colDef:l,column:r,value:u,valueFormatted:c})))&&void 0!==e?e:null===l||void 0===l?void 0:l.headerTooltip},shouldDisplayTooltip:o,getAdditionalParams:()=>({column:r,colDef:r.getColDef()})};let p=this.createTooltipFeature(h);return p&&(p=t.createBean(p),t.setRefreshFunction("tooltip",()=>p.refreshTooltip())),p}setupHeaderGroupTooltip(e,t,i,o){e&&t.destroyBean(e);const n=this.gos,s=zv(n),{column:r,eGui:a}=t,l=r.getColGroupDef();o||!s||null!==l&&void 0!==l&&l.headerGroupComponent||(o=Le(()=>a.querySelector(".ag-header-group-text")));const d="headerGroup",c=this.beans.colNames.getDisplayNameForColumnGroup(r,"header"),u=null!==i&&void 0!==i?i:c,h={getGui:()=>a,getLocation:()=>d,getTooltipValue:()=>{var e,t;return null!==(e=null!==i&&void 0!==i?i:null===l||void 0===l||null===(t=l.headerTooltipValueGetter)||void 0===t?void 0:t.call(l,oo(n,{location:d,colDef:l,column:r,value:u,valueFormatted:c})))&&void 0!==e?e:null===l||void 0===l?void 0:l.headerTooltip},shouldDisplayTooltip:o,getAdditionalParams:()=>{const e={column:r};return l&&(e.colDef=l),e}},p=this.createTooltipFeature(h);return p?t.createBean(p):p}enableCellTooltipFeature(e,t,i){const{beans:o}=this,{gos:n,editSvc:s}=o,{column:r,rowNode:a}=e;let l="cell";const d=zv(n);i||(i=d&&!e.isCellRenderer()?()=>{const t=!(null===s||void 0===s||!s.isEditing(e));if(!t&&af(o,e,this.getLocaleTextFunc()))return!0;if(!r.isTooltipEnabled())return!1;const i=Le(()=>{const t=e.eGui;return 0===t.children.length?t:t.querySelector(".ag-cell-value")});return!t&&i()}:()=>!(null!==s&&void 0!==s&&s.isEditing(e)));const c={getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:null!=t?()=>t:()=>{const t=!!(null===s||void 0===s||!s.isEditing(e))&&af(o,e,this.getLocaleTextFunc());if(t)return l="cellEditor",t;l="cell";const i=r.getColDef(),d=a.data;if(i.tooltipField&&v(d))return Ih(d,i.tooltipField,r.isTooltipFieldContainsDots());const c=i.tooltipValueGetter;return c?c(oo(n,{location:"cell",colDef:r.getColDef(),column:r,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},shouldDisplayTooltip:i,getAdditionalParams:()=>({column:r,colDef:r.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(c,o)}setupFullWidthRowTooltip(e,t,i,o){const n={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:o},s=this.beans,r=s.context;e&&t.destroyBean(e,r);const a=this.createTooltipFeature(n,s);if(a)return t.createBean(a,r)}setupFormulaTooltip(e){var t;const{beans:i}=this,{context:o,formula:n}=i;if(null===(t=this.beans.formula)||void 0===t||!t.active||!e.column.isAllowFormula())return;const s={getGui:()=>e.eGui,getTooltipValue:()=>{const t=null===n||void 0===n?void 0:n.getFormulaError(e.column,e.rowNode);return t?t.message:void 0},getLocation:()=>"cellFormula",shouldDisplayTooltip:()=>!!(null===n||void 0===n?void 0:n.getFormulaError(e.column,e.rowNode))},r=this.createTooltipFeature(s,i);return r?e.createBean(r,o):void 0}setupCellEditorTooltip(e,t){var i,o;const{beans:n}=this,{context:s}=n,r=(null===(i=t.getValidationElement)||void 0===i?void 0:i.call(t,!0))||!(null!==(o=t.isPopup)&&void 0!==o&&o.call(t))&&e.eGui;if(!r)return;const a={getGui:()=>r,getTooltipValue:()=>af(n,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{var e,t;const{editModelSvc:i}=n,o=null===i||void 0===i||null===(e=i.getRowValidationModel())||void 0===e?void 0:e.getRowValidationMap(),s=null===i||void 0===i||null===(t=i.getCellValidationModel())||void 0===t?void 0:t.getCellValidationMap(),r=!!o&&o.size>0,a=!!s&&s.size>0;return r||a}},l=this.createTooltipFeature(a,n);return l?e.createBean(l,s):void 0}initCol(e){const{colDef:t}=e;e.tooltipEnabled=v(t.tooltipField)||v(t.tooltipValueGetter)||v(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}}],dynamicBeans:{tooltipFeature:Ra,highlightTooltipFeature:class extends Ra{constructor(e,t,i){super(e,i),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",e=>{let{currentValue:t}=e;this.setTooltipMode(t)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){1===this.tooltipMode&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"focus";this.tooltipMode="focus"===e?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},tooltipStateManager:class extends Da{createTooltipComp(e,t){const i=function(e,t){return e.getCompDetails(t.colDef,Yn,"agTooltipComponent",t,!0)}(this.beans.userCompFactory,e);null===i||void 0===i||i.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){var e;null===(e=this.onColumnMovedEventCallback)||void 0===e||e.call(this),this.onColumnMovedEventCallback=void 0}}},userComponents:{agTooltipComponent:class extends bs{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){const{value:t}=e,i=this.getGui();i.textContent=S(t);const o=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();i.classList.add("ag-".concat(o,"-tooltip"))}}},dependsOn:[am],css:[".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip),&:where(.ag-cell-formula-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}"]},df=class{constructor(e){this.cellValueChanges=e}},cf=class extends df{constructor(e,t,i,o){super(e),this.initialRange=t,this.finalRange=i,this.ranges=o}},uf=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},hf={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},pf=class extends Nc{constructor(e){super(),this.cellEditorInput=e,this.eEditor=Pn}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:i}=this,{cellStartedEdit:o,eventKey:n,suppressPreventDefault:s}=e;let r;i.getInputElement().setAttribute("title",""),t.init(i,e);let a=!0;o?(this.focusAfterAttached=!0,n===us.BACKSPACE||n===us.DELETE?r="":n&&1===n.length?s?a=!1:r=n:(r=t.getStartValue(),n!==us.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=t.getStartValue()),a&&null!=r&&i.setStartValue(r),this.addGuiEventListener("keydown",e=>{const{key:t}=e;t!==us.PAGE_UP&&t!==us.PAGE_DOWN||e.preventDefault()})}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;ys()||t.getFocusableElement().focus();const i=t.getInputElement();var o,n;this.highlightAllOnFocus?i.select():null===(o=(n=this.cellEditorInput).setCaret)||void 0===o||o.call(n)}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},gf={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},vf=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return gf}getAgComponents(){return[Fr]}init(e,t){var i,o,n;this.eEditor=e,this.params=t;const{min:s,max:r,step:a,colDef:l}=t;null!=s&&e.setMin(s),null!=r&&e.setMax(r),null!=a&&e.setStep(a),this.includeTime=null!==(i=t.includeTime)&&void 0!==i?i:null===(o=this.getDataTypeService())||void 0===o||null===(n=o.getDateIncludesTimeFlag)||void 0===n?void 0:n.call(o,l.cellDataType),null!=this.includeTime&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const e=this.eEditor.getInputElement().valueAsDate,{params:t}=this,{min:i,max:o,getValidationErrors:n}=t;let s=[];const r=this.getLocaleTextFunc();if(e instanceof Date&&!isNaN(e.getTime())){if(i){const t=i instanceof Date?i:new Date(i);if(e<t){const e=t.toLocaleDateString();s.push(r("minDateValidation","Date must be after ".concat(e),[e]))}}if(o){const t=o instanceof Date?o:new Date(o);if(e>t){const e=t.toLocaleDateString();s.push(r("maxDateValidation","Date must be before ".concat(e),[e]))}}}return s.length||(s=null),n?n({value:e,cellEditorParams:t,internalErrors:s}):s}getValue(){const{eEditor:e,params:t}=this,i=e.getDate();return v(i)||v(t.value)?null!==i&&void 0!==i?i:null:t.value}getStartValue(){var e;const{value:t}=this.params;if(t instanceof Date)return Qs(t,null!==(e=this.includeTime)&&void 0!==e&&e)}},mf={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},ff=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return mf}getAgComponents(){return[Fr]}init(e,t){var i,o,n;this.eEditor=e,this.params=t;const{min:s,max:r,step:a,colDef:l}=t;null!=s&&e.setMin(s),null!=r&&e.setMax(r),null!=a&&e.setStep(a),this.includeTime=null!==(i=t.includeTime)&&void 0!==i?i:null===(o=this.getDataTypeService())||void 0===o||null===(n=o.getDateIncludesTimeFlag)||void 0===n?void 0:n.call(o,l.cellDataType),null!=this.includeTime&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,i=e.getInputElement().value,o=this.formatDate(this.parseDate(null!==i&&void 0!==i?i:void 0)),{min:n,max:s,getValidationErrors:r}=t;let a=[];if(o){const e=new Date(o),t=this.getLocaleTextFunc();if(n){const i=new Date(n);if(e<i){const e=i.toLocaleDateString();a.push(t("minDateValidation","Date must be after ".concat(e),[e]))}}if(s){const i=new Date(s);if(e>i){const e=i.toLocaleDateString();a.push(t("maxDateValidation","Date must be before ".concat(e),[e]))}}}return a.length||(a=null),r?r({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){const{params:e,eEditor:t}=this,i=this.formatDate(t.getDate());return v(i)||v(e.value)?e.parseValue(null!==i&&void 0!==i?i:""):e.value}getStartValue(){var e,t,i;return Qs(null!==(e=this.parseDate(null!==(t=this.params.value)&&void 0!==t?t:void 0))&&void 0!==e?e:null,null!==(i=this.includeTime)&&void 0!==i&&i)}parseDate(e){var t;const i=this.getDataTypeService();return i?i.getDateParserFunction(this.params.column)(e):null!==(t=ir(e))&&void 0!==t?t:void 0}formatDate(e){var t,i;const o=this.getDataTypeService();return o?o.getDateFormatterFunction(this.params.column)(e):null!==(t=Qs(null!==e&&void 0!==e?e:null,null!==(i=this.includeTime)&&void 0!==i&&i))&&void 0!==t?t:void 0}},Cf={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},wf={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},bf=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return wf}getAgComponents(){return[Sr]}init(e,t){this.eEditor=e,this.params=t;const{max:i,min:o,precision:n,step:s}=t;null!=i&&e.setMax(i),null!=o&&e.setMin(o),null!=n&&e.setPrecision(n),null!=s&&e.setStep(s);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:i,getValidationErrors:o}=e,n=this.eEditor.getInputElement().valueAsNumber,s=this.getLocaleTextFunc();let r=[];return"number"===typeof n&&(null!=t&&n<t&&r.push(s("minValueValidation","Must be greater than or equal to ".concat(t,"."),[String(t)])),null!=i&&n>i&&r.push(s("maxValueValidation","Must be less than or equal to ".concat(i,"."),[String(i)]))),r.length||(r=null),o?o({value:n,cellEditorParams:e,internalErrors:r}):r}preventStepping(e){e.key!==us.UP&&e.key!==us.DOWN||e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();if(!v(i)&&!v(t.value))return t.value;let o=t.parseValue(i);if(null==o)return o;if("string"===typeof o){if(""===o)return null;o=Number(o)}return isNaN(o)?null:o}getStartValue(){return this.params.value}setCaret(){ys()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},yf={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},Sf={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},xf=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return Sf}getAgComponents(){return[wr]}init(e,t){this.eEditor=e,this.params=t;const i=t.maxLength;null!=i&&e.setMaxLength(i)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,o=this.getValue(),n=this.getLocaleTextFunc();let s=[];return null!=t&&"string"===typeof o&&o.length>t&&s.push(n("maxLengthValidation","Must be ".concat(t," characters or fewer."),[String(t)])),s.length||(s=null),i?i({value:o,cellEditorParams:e,internalErrors:s}):s}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();return v(i)||v(t.value)?t.parseValue(i):t.value}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){ys()&&this.eEditor.getInputElement().focus({preventScroll:!0});const e=this.eEditor,t=e.getValue(),i=v(t)&&t.length||0;i&&e.getInputElement().setSelectionRange(i,i)}},Ff=class extends pf{constructor(){super(new xf(()=>this.getLocaleTextFunc()))}};function Rf(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function Pf(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}var Df={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},Ef=class extends bs{constructor(e){super(Df),this.params=e}postConstruct(){yi(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{id(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}};function Af(e,t){let{rowNode:i,column:o}=t;const n=o.getColDef().editable,s=e.editModelSvc;return o.isColumnFunc(i,n)||!!s&&s.hasEdits({rowNode:i,column:o},{withOpenEditor:!0})}var Mf=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0!==e)return pg(e)||t&&"editing"===e.state};function Tf(e,t){var i;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Mf(null===(i=e.editModelSvc)||void 0===i?void 0:i.getEdit(t),o)}var kf=(e,t,i)=>{if(e)for(let o=0,n=e.length;o<n;++o){const n=e[o];if(n.data){if(Mf(null===t||void 0===t?void 0:t.getEdit({rowNode:n,column:i}))||Mf(null===t||void 0===t?void 0:t.getEdit({rowNode:n.pinnedSibling,column:i})))return!0}if(kf(n.childrenAfterGroup,t,i))return!0}};function If(e,t){const{column:i,rowNode:o}=t;return!(e.gos.get("groupTotalRow")&&(null===o||void 0===o||!o.footer))&&kf(null===o||void 0===o?void 0:o.childrenAfterGroup,e.editModelSvc,i)}function Lf(e,t){var i;let{rowNode:o,column:n}=t;if(o=o.pinnedSibling,o)return Mf(null===(i=e.editModelSvc)||void 0===i?void 0:i.getEdit({rowNode:o,column:n}))}var Nf=class extends ht{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){var e;const{cellCtrl:t,editSvc:i,beans:o}=this;if(null!==i&&void 0!==i&&i.isBatchEditing()&&i.isEditing()){const e=Tf(o,t)||If(o,t)||Lf(o,t);this.applyBatchingStyle(e)}else this.applyBatchingStyle(!1);const n=!(null===(e=this.editModelSvc)||void 0===e||!e.getCellValidationModel().hasCellValidation(this.cellCtrl));this.cellComp.toggleCss("ag-cell-editing-error",n)}applyBatchingStyle(e){var t,i;this.cellComp.toggleCss("ag-cell-editing",null!==e&&void 0!==e&&e),this.cellComp.toggleCss("ag-cell-batch-edit",null!==(t=e&&(null===(i=this.editSvc)||void 0===i?void 0:i.isBatchEditing()))&&void 0!==t&&t)}},Of=class extends ht{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){var e;const{rowCtrl:t,editModelSvc:i,beans:o}=this;let n=t.rowNode,s=null===i||void 0===i?void 0:i.getEditRow(n);const r=null===(e=this.editModelSvc)||void 0===e?void 0:e.getRowValidationModel().hasRowValidation({rowNode:n});if(!s&&n.pinnedSibling&&(n=n.pinnedSibling,s=null===i||void 0===i?void 0:i.getEditRow(n)),s){const e=Array.from(s.keys()).some(e=>{const t={rowNode:n,column:e};return Tf(o,t,!0)||If(o,t)||Lf(o,t)});return void this.applyStyle(r,e)}this.applyStyle(r)}applyStyle(){var e,t,i;let o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=null!==(e=null===(t=this.editSvc)||void 0===t?void 0:t.isBatchEditing())&&void 0!==e&&e,r="fullRow"===this.gos.get("editType");null===(i=this.rowCtrl)||void 0===i||i.forEachGui(void 0,e=>{let{rowComp:t}=e;t.toggleCss("ag-row-editing",r&&n),t.toggleCss("ag-row-batch-edit",r&&n&&s),t.toggleCss("ag-row-inline-editing",n),t.toggleCss("ag-row-not-inline-editing",!n),t.toggleCss("ag-row-editing-invalid",r&&n&&o)})}},Gf=e=>()=>{const t=new Set(e.colModel.getCols()),i=e.editModelSvc.getEditMap(!0),o=new Set(i.keys());((e,t,i)=>{let{editModelSvc:o}=e;for(const s of t){var n;null===o||void 0===o||null===(n=o.getEditRow(s))||void 0===n||n.forEach((e,t)=>!i.has(t)&&o.removeEdits({rowNode:s,column:t}))}})(e,((e,t)=>{let{rowModel:i,pinnedRowModel:o,editModelSvc:n}=e;const s=new Set;i.forEachNode(e=>t.has(e)&&s.add(e)),null===o||void 0===o||o.forEachPinnedRow("top",e=>t.has(e)&&s.add(e)),null===o||void 0===o||o.forEachPinnedRow("bottom",e=>t.has(e)&&s.add(e));for(const r of t)s.has(r)||n.removeEdits({rowNode:r});return s})(e,o),t)},Bf=new Set(["undo","redo","paste","bulk","rangeSvc"]),Vf=new Set(["ui","api"]),Hf={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},zf=new Set(Object.keys(Hf)),Wf=new Set(["paste","rangeSvc","cellClear","redo","undo"]),Uf={cancel:!0,source:"api"},jf={cancel:!1,source:"api"},_f={checkSiblings:!0},Kf={force:!0,suppressFlash:!0};function Yf(e,t){var i;return null!==(i=null!==t&&void 0!==t?t:e.get("editType"))&&void 0!==i?i:"singleCell"}var qf=class extends ht{postConstruct(){var e,t;this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:null===(e=this.onCellFocusChanged)||void 0===e?void 0:e.bind(this),cellFocusCleared:null===(t=this.onCellFocusChanged)||void 0===t?void 0:t.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){var t;let i;const o=e.previousParams,{editSvc:n,beans:s}=this,r="cellFocused"===e.type?e.sourceEvent:null;o&&(i=lg(s,o));const{gos:a,editModelSvc:l}=s,d="cellFocusCleared"===e.type;if(n.isEditing(void 0,{withOpenEditor:!0})){const{column:t,rowIndex:i,rowPinned:c}=e,u={column:t,rowNode:Qd(s,{rowIndex:i,rowPinned:c})},h="block"===a.get("invalidEditValueMode");if(h)return;const p=!h,g=!(null===l||void 0===l||!l.getCellValidationModel().hasCellValidation(u)),v=p&&g;!o&&!d||n.stopEditing(void 0,{cancel:v,source:d&&p?"api":void 0,event:r})||(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"}))}null===(t=i)||void 0===t||t.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){const i=this.model.getEditPositions(),o={all:[],pass:[],fail:[]};for(const a of i){var n,s;o.all.push(a);const e=this.model.getCellValidationModel().getCellValidation(a);(null!==(n=null===e||void 0===e||null===(s=e.errorMessages)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0?o.fail.push(a):o.pass.push(a)}if(e)for(const a of i)xg(this.beans,a,{cancel:e}),this.model.stop(a);else{const i=this.processValidationResults(o);if(i.destroy.length>0)for(const o of i.destroy)xg(this.beans,o,{event:t,cancel:e}),this.model.stop(o);if(i.keep.length>0)for(const e of i.keep){var r;const t=lg(this.beans,e);null!==(r=this.editSvc)&&void 0!==r&&r.cellEditingInvalidCommitBlocks()||t&&this.editSvc.revertSingleCellEdit(t)}}return!0}cleanupEditors(){let{rowNode:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;wg(this.beans,{persist:!1});const i=this.model.getEditPositions(),o=[];if(e)for(const n of i)n.rowNode!==e&&o.push(n);else for(const n of i)o.push(n);Sg(this.beans,o),fg(this.beans,t)}setFocusOutOnEditor(e){var t,i;null===(t=e.comp)||void 0===t||null===(t=t.getCellEditor())||void 0===t||null===(i=t.focusOut)||void 0===i||i.call(t)}setFocusInOnEditor(e){const t=e.comp,i=null===t||void 0===t?void 0:t.getCellEditor();if(null!==i&&void 0!==i&&i.focusIn)i.focusIn();else{const i="fullRow"===this.beans.gos.get("editType");e.focusCell(i),e.onEditorAttachedFuncs.push(()=>{var e,i;return null===t||void 0===t||null===(e=t.getCellEditor())||void 0===e||null===(i=e.focusIn)||void 0===i?void 0:i.call(e)})}}setupEditors(e){const{event:t,ignoreEventKey:i=!1,startedEdit:o,position:n,cells:s=this.model.getEditPositions()}=e,r=t instanceof KeyboardEvent&&!i&&t.key||void 0;!function(e,t,i,o,n,s){0===t.length&&null!==i&&void 0!==i&&i.rowNode&&null!==i&&void 0!==i&&i.column&&gg(e,i,{key:o,event:n,cellStartedEdit:s});const{valueSvc:r,editSvc:a,editModelSvc:l}=e,{rowNode:d,column:c}=null!==i&&void 0!==i?i:{};for(const v of t){const{rowNode:t,column:m}=v,f=lg(e,v);if(!f){if(t&&m){var u,h,p,g;const n=r.getValue(m,t,void 0,"api"),s=(null===i||void 0===i?void 0:i.rowNode)===t&&(null===i||void 0===i?void 0:i.column)===m&&o||void 0,d=null!==(u=null!==(h=null!==(p=null!==s&&void 0!==s?s:null===a||void 0===a?void 0:a.getCellDataValue(v,!1))&&void 0!==p?p:null===(g=r.getValueForDisplay({column:m,node:t}))||void 0===g?void 0:g.value)&&void 0!==h?h:n)&&void 0!==u?u:ug;null===l||void 0===l||l.setEdit(v,{pendingValue:yg(e,d,!1,m),sourceValue:n,state:"editing"})}continue}const C=s&&d===f.rowNode&&f.column===c;gg(e,{rowNode:d,column:f.column},{key:C?o:null,event:C?n:null,cellStartedEdit:C&&s})}}(this.beans,s,n,r,t,o)}dispatchCellEvent(e,t,i,o){const s=lg(this.beans,e);s&&this.eventSvc.dispatchEvent((0,n.A)((0,n.A)({},s.createEvent(null!==t&&void 0!==t?t:null,i)),o))}dispatchRowEvent(e,t,i){if(i)return;const o=ag(this.beans,e);o&&this.eventSvc.dispatchEvent(o.createRowEvent(t))}shouldStop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";const o=this.editSvc.isBatchEditing();return!(!o||"api"!==i)||(!o||"ui"!==i&&"edit"!==i)&&("api"===i||(t instanceof KeyboardEvent&&!o?t.key===us.ENTER:null))}shouldCancel(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";const o=this.editSvc.isBatchEditing();if(t instanceof KeyboardEvent&&!o){if(t.key===us.ESCAPE)return!0}return!(!o||"api"!==i)||"api"===i}setEditMap(e,t){var i;null!==t&&void 0!==t&&t.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const o=[];if(e.forEach((e,t)=>{e.forEach((e,i)=>{"editing"===e.state&&o.push((0,n.A)((0,n.A)({},e),{},{rowNode:t,column:i}))})}),null!==t&&void 0!==t&&t.update&&(e=new Map([...this.model.getEditMap(),...e])),null===(i=this.model)||void 0===i||i.setEditMap(e),o.length>0){const e=o.at(-1),t=e.pendingValue===ug?void 0:e.pendingValue;this.start({position:e,event:new KeyboardEvent("keydown",{key:t}),source:"api"});const i=lg(this.beans,e);i&&this.setFocusInOnEditor(i)}}destroy(){this.cleanupEditors(),super.destroy()}},Qf={moduleName:"EditCore",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new sg,this.rowValidations=new rg,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits(e){let{rowNode:t,column:i}=e;if(!this.hasEdits({rowNode:t})||!t)return;const o=this.getEditRow(t);i?o.delete(i):o.clear(),0===o.size&&this.edits.delete(t)}getEditRow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.suspendEdits)return;if(0===this.edits.size)return;const i=e&&this.edits.get(e);if(i)return i;if(t.checkSiblings){const t=e.pinnedSibling;if(t)return this.getEditRow(t)}}getEditRowDataValue(e){let{checkSiblings:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||0===this.edits.size)return;const i=this.getEditRow(e),o=e.pinnedSibling,n=t&&o&&this.getEditRow(o);if(!i&&!n)return;const s=Object.assign({},e.data),r=(e,t)=>e.forEach((e,i)=>{let{pendingValue:o}=e;o!==ug&&(t[i.getColId()]=o)});return i&&r(i,s),n&&r(n,s),s}getEdit(e,t){const i=this._getEdit(e);return t&&i?(0,n.A)({},i):i}_getEdit(e){var t;if(!this.suspendEdits&&0!==this.edits.size)return e.rowNode&&e.column&&(null===(t=this.getEditRow(e.rowNode))||void 0===t?void 0:t.get(e.column))}getEditMap(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.suspendEdits||0===this.edits.size)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((e,i)=>{const r=new Map;e.forEach((e,t)=>{let{editorState:i}=e,a=(0,o.A)(e,s);return r.set(t,(0,n.A)({},a))}),t.set(i,r)}),t}setEditMap(e){this.edits.clear(),e.forEach((e,t)=>{const i=new Map;e.forEach((e,t)=>i.set(t,(0,n.A)({},e))),this.edits.set(t,i)})}setEdit(e,t){(0===this.edits.size||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const i=this._getEdit(e),o=Object.assign((0,n.A)((0,n.A)({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}},i),t));return this.getEditRow(e.rowNode).set(e.column,o),o}clearEditValue(e){const{rowNode:t,column:i}=e;if(t)if(i){const t=this._getEdit(e);t&&(t.editorValue=void 0,t.pendingValue=t.sourceValue,t.state="changed")}else{var o;null===(o=this.getEditRow(t))||void 0===o||o.forEach(e=>{e.editorValue=void 0,e.pendingValue=e.sourceValue,e.state="changed"})}}getState(e){var t;if(!this.suspendEdits)return null===(t=this.getEdit(e))||void 0===t?void 0:t.state}getEditPositions(e){if(this.suspendEdits||0===(null!==e&&void 0!==e?e:this.edits).size)return[];const t=[];return(null!==e&&void 0!==e?e:this.edits).forEach((e,i)=>{for(const s of e.keys()){const a=e.get(s),{editorState:l}=a,d=(0,o.A)(a,r);t.push((0,n.A)({rowNode:i,column:s},d))}}),t}hasRowEdits(e,t){if(this.suspendEdits)return!1;if(0===this.edits.size)return!1;return!!this.getEditRow(e,t)}hasEdits(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.suspendEdits)return!1;if(0===this.edits.size)return!1;const{rowNode:i,column:o}=e,{withOpenEditor:n}=t;if(i){const a=this.getEditRow(i,t);return!!a&&(o?n?"editing"===(null===(r=this.getEdit(e))||void 0===r?void 0:r.state):null!==(s=a.has(o))&&void 0!==s&&s:0!==a.size&&(!n||Array.from(a.values()).some(e=>{let{state:t}=e;return"editing"===t})));var s,r}return n?this.getEditPositions().some(e=>{let{state:t}=e;return"editing"===t}):this.edits.size>0}start(e){var t;const i=null!==(t=this.getEditRow(e.rowNode))&&void 0!==t?t:new Map,{rowNode:o,column:n}=e;n&&!i.has(n)&&i.set(n,{editorValue:void 0,pendingValue:ug,sourceValue:this.beans.valueSvc.getValue(n,o,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(o,i)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},class extends ht{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",e=>{let{currentValue:t}=e;this.stopEditing(void 0,Uf),this.createStrategy(t)});const t=Gf(e),i=()=>{const t=this.model.getCellValidationModel().getCellValidationMap().size>0,i=this.model.getRowValidationModel().getRowValidationMap().size>0;return t||i?this.stopEditing(void 0,Uf):this.isEditing()&&(this.batch?Sg(e,this.model.getEditPositions()):this.stopEditing(void 0,jf)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:i,filterChanged:i,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,Uf)):(this.stopEditing(void 0,Uf),this.batch=!1)}createStrategy(e){const{beans:t,gos:i,strategy:o}=this,n=Yf(i,e);if(o){if(o.beanName===n)return o;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(n,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";const n=function(e,t,i,o){var n;let{column:s}=t,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ui";if(i instanceof KeyboardEvent&&(i.key===us.TAB||i.key===us.ENTER||i.key===us.F2||i.key===us.BACKSPACE&&o))return!0;if((null===i||void 0===i?void 0:i.shiftKey)&&0!=(null===(n=e.rangeSvc)||void 0===n?void 0:n.getCellRanges().length))return!1;const a=null===s||void 0===s?void 0:s.getColDef(),l=function(e,t){return!0===e.get("suppressClickEdit")?0:!0===e.get("singleClickEdit")||null!==t&&void 0!==t&&t.singleClickEdit?1:2}(e.gos,a),d=null===i||void 0===i?void 0:i.type;return"click"===d&&1===(null===i||void 0===i?void 0:i.detail)&&1===l||"dblclick"===d&&2===(null===i||void 0===i?void 0:i.detail)&&2===l||"api"===r&&null!==o&&void 0!==o&&o}(this.beans,e,t,i,o);var s;n&&(null!==(s=this.strategy)&&void 0!==s||(this.strategy=this.createStrategy()));return n}shouldStopEditing(e,t){var i,o;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";return null!==(i=null===(o=this.strategy)||void 0===o?void 0:o.shouldStop(e,t,n))&&void 0!==i?i:null}shouldCancelEditing(e,t){var i,o;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";return null!==(i=null===(o=this.strategy)||void 0===o?void 0:o.shouldCancel(e,t,n))&&void 0!==i?i:null}validateEdit(){return function(e){var t;Dg(e,!0);const i=null===(t=e.editModelSvc)||void 0===t?void 0:t.getCellValidationModel().getCellValidationMap();if(!i)return null;const o=[];return i.forEach((e,t)=>{e.forEach((e,i)=>{let{errorMessages:n}=e;o.push({column:i,rowIndex:t.rowIndex,rowPinned:t.rowPinned,messages:null!==n&&void 0!==n?n:null})})}),o}(this.beans)}isEditing(e,t){return this.model.hasEdits(e,null!==t&&void 0!==t?t:_f)}isRowEditing(e,t){var i;return null!==(i=e&&this.model.hasRowEdits(e,t))&&void 0!==i&&i}startEditing(e,t){var i;const{startedEdit:o=!0,event:n=null,source:s="ui",ignoreEventKey:r=!1,silent:a}=t;if(null!==(i=this.strategy)&&void 0!==i||(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const l=lg(this.beans,e);if(l&&!l.comp)return void l.onCompAttachedFuncs.push(()=>this.startEditing(e,t));const d=this.shouldStartEditing(e,n,o,s);!1!==d||"api"===s?(this.batch||!this.shouldStopEditing(e,void 0,s)||t.continueEditing||this.stopEditing(void 0,{source:s}),d&&this.batch&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:n,source:s,ignoreEventKey:r,startedEdit:o,silent:a})):this.isEditing(e)&&this.stopEditing()}stopEditing(e,t){const i=this.prepareStopContext(e,t);if(!i)return!1;this.stopping=!0;let o=!1,{edits:s}=i;try{const r=this.processStopRequest(i);return o||(o=r.res),s=r.edits,this.finishStopEditing((0,n.A)((0,n.A)({},i),{},{edits:s,params:t,position:e,res:o})),o}finally{this.stopping=!1}}prepareStopContext(e,t){const{event:i,cancel:o,source:n="ui",forceCancel:s,forceStop:r}=t||{};if(zf.has(n)&&this.batch)return this.bulkRefresh(e),null;const a=this.committing?Hf[n]:n;if(!(this.committing||this.isEditing(e)||this.batch&&this.model.hasEdits(e,_f))||!this.strategy||this.stopping)return null;const l=lg(this.beans,e);l&&(l.onEditorAttachedFuncs=[]);const d=!o&&(!!this.shouldStopEditing(e,i,a)||(this.committing||"paste"===n)&&!this.batch)||null!==r&&void 0!==r&&r,c=o&&!!this.shouldCancelEditing(e,i,a)||null!==s&&void 0!==s&&s;return{cancel:o,cellCtrl:null!==l&&void 0!==l?l:void 0,edits:this.model.getEditMap(!0),event:i,forceCancel:s,forceStop:r,position:e,source:n,treatAsSource:a,willCancel:c,willStop:d}}processStopRequest(e){const{event:t,position:i,willCancel:o,willStop:n}=e;if(n||o)return this.handleStopOrCancel(e);if(this.shouldHandleMidBatchKey(t,i))return{res:!1,edits:this.handleMidBatchKey(t,i,e)};var s;(wg(this.beans,{persist:!0}),this.batch)&&(null===(s=this.strategy)||void 0===s||s.cleanupEditors(i));return{res:!1,edits:this.model.getEditMap()}}handleStopOrCancel(e){var t;const{beans:i,model:o}=this,{cancel:n,edits:s,event:r,source:a,willCancel:l,willStop:d}=e;wg(i,{persist:!0,isCancelling:l||n,isStopping:d});const c=o.getEditMap(),u=this.processEdits(c,n,a);null===(t=this.strategy)||void 0===t||t.stop(n,r),this.clearValidationIfNoOpenEditors();for(const h of u)o.clearEditValue(h);this.bulkRefresh(void 0,s);for(const h of o.getEditPositions(c)){const e=lg(i,h),t=pg(h);null===e||void 0===e||e.refreshCell({force:!0,suppressFlash:!t})}return{res:d,edits:c}}shouldHandleMidBatchKey(e,t){var i;return e instanceof KeyboardEvent&&this.batch&&!(null===(i=this.strategy)||void 0===i||!i.midBatchInputsAllowed(t))&&this.isEditing(t,{withOpenEditor:!0})}handleMidBatchKey(e,t,i){const{beans:o,model:n}=this,{cellCtrl:s,edits:r}=i,{key:a}=e,l=a===us.ENTER,d=a===us.ESCAPE,c=a===us.TAB;if(l||c||d){var u;if(l||c?wg(o,{persist:!0}):d&&this.revertSingleCellEdit(s),this.batch)null===(u=this.strategy)||void 0===u||u.cleanupEditors();else Sg(o,n.getEditPositions(),{event:e,cancel:d});return e.preventDefault(),this.bulkRefresh(t,r,{suppressFlash:!0}),n.getEditMap()}return r}finishStopEditing(e){let{cellCtrl:t,edits:i,params:o,position:n,res:s,willCancel:r,willStop:a}=e;const l=this.beans;s&&n&&this.model.removeEdits(n),this.navigateAfterEdit(o,null===t||void 0===t?void 0:t.cellPosition),fg(l),this.clearValidationIfNoOpenEditors(),this.bulkRefresh();const{rowRenderer:d,formula:c}=l;r&&d.refreshRows({rowNodes:Array.from(i.keys())}),this.batch&&(c?c.refreshFormulas(!0):d.refreshRows({suppressFlash:!0,force:!0}),s&&a&&this.dispatchBatchEvent("batchEditingStopped",i))}clearValidationIfNoOpenEditors(){this.model.hasEdits(void 0,{withOpenEditor:!0})||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap())}navigateAfterEdit(e,t){var i;if(!e||!t)return;const{event:o,suppressNavigateAfterEdit:n}=e;if(!(o instanceof KeyboardEvent)||n)return;const{key:s,shiftKey:r}=o,a=this.gos.get("enterNavigatesVerticallyAfterEdit");if(s!==us.ENTER||!a)return;const l=r?us.UP:us.DOWN;null===(i=this.beans.navigation)||void 0===i||i.navigateToNextCell(null,l,t,!1)}processEdits(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const o=Array.from(e.keys()),n=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,s=[];for(const r of o){const o=e.get(r);for(const e of o.keys()){const a=o.get(e),l={rowNode:r,column:e},d=pg(a);if(!t&&d&&!n){this.setNodeDataValue(r,e,a.pendingValue,void 0,i)||s.push(l)}}}return s}setNodeDataValue(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"edit";const{beans:s}=this,r=lg(s,{rowNode:e,column:t}),a=Vf.has(n)?"edit":n;r&&(r.suppressRefreshCell=!0),this.committing=!0;const l=e.setDataValue(t,i,a);return this.committing=!1,r&&(r.suppressRefreshCell=!1),o&&(null===r||void 0===r||r.refreshCell(Kf)),l}setEditMap(e,t){var i,o;null!==(i=this.strategy)&&void 0!==i||(this.strategy=this.createStrategy()),null===(o=this.strategy)||void 0===o||o.setEditMap(e,t),this.bulkRefresh();let s=Kf;null!==t&&void 0!==t&&t.forceRefreshOfEditCellsOnly&&(s=(0,n.A)((0,n.A)({},function(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(e=>Array.from(e.keys())))]:void 0}}(e)),Kf)),this.beans.rowRenderer.refreshCells(s)}dispatchEditValuesChanged(e){let{rowNode:t,column:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!i||!o)return;const{pendingValue:n,sourceValue:s}=o,{rowIndex:r,rowPinned:a,data:l}=t;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:t,rowIndex:r,rowPinned:a,column:i,source:"api",data:l,newValue:n,oldValue:s,value:n,colDef:i.getColDef()})}bulkRefresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{beans:o,gos:n}=this,{editModelSvc:s,rowModel:r}=o;if(ui(n))if(e.rowNode&&e.column)this.refCell(e,this.model.getEdit(e),i);else if(t){var a;null===s||void 0===s||null===(a=s.getEditMap(!1))||void 0===a||a.forEach((e,t)=>{for(const o of e.keys())this.refCell({rowNode:t,column:o},e.get(o),i)})}}refCell(e,t){let{rowNode:i,column:o}=e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{beans:s,gos:r}=this,a=new Set([i]),l=new Set,d=i.pinnedSibling;d&&a.add(d);const c=i.sibling;c&&l.add(c);let u=i.parent;for(;u;){var h;null!==(h=u.sibling)&&void 0!==h&&h.footer&&r.get("groupTotalRow")||!u.parent&&u.sibling&&r.get("grandTotalRow")?l.add(u.sibling):l.add(u),u=u.parent}for(const v of a)this.dispatchEditValuesChanged({rowNode:v,column:o},t);for(const v of a){var p;null===(p=lg(s,{rowNode:v,column:o}))||void 0===p||p.refreshCell(n)}for(const v of l){var g;null===(g=lg(s,{rowNode:v,column:o}))||void 0===g||g.refreshCell(n)}}stopAllEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ui";this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ui";const{rowNode:i}=e,{gos:o,beans:n}=this;if(i.group)if(o.get("treeData")){if(!i.data&&!o.get("enableGroupEdit"))return!1}else if(!o.get("enableGroupEdit"))return!1;const s="fullRow"===Yf(o)?function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";const o=Af(e,t,i);return!0===o||"ui"===i?o:e.colModel.getCols().some(o=>Af(e,{rowNode:t.rowNode,column:o},i))}(n,e,t):Af(n,e,t);var r;s&&(null!==(r=this.strategy)&&void 0!==r||(this.strategy=this.createStrategy()));return s}cellEditingInvalidCommitBlocks(){return"block"===this.gos.get("invalidEditValueMode")}checkNavWithValidation(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.hasValidationErrors(e)){const r=lg(this.beans,e);if(this.cellEditingInvalidCommitBlocks()){var o,n,s;if(null===t||void 0===t||null===(o=t.preventDefault)||void 0===o||o.call(t),i)(null===r||void 0===r||!r.hasBrowserFocus())&&(null===r||void 0===r||r.focusCell()),null===r||void 0===r||null===(n=r.comp)||void 0===n||null===(n=n.getCellEditor())||void 0===n||null===(s=n.focusIn)||void 0===s||s.call(n);return"block-stop"}return r&&this.revertSingleCellEdit(r),"revert-continue"}return"continue"}revertSingleCellEdit(e){var t,i,o;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=lg(this.beans,e);null!==s&&void 0!==s&&null!==(t=s.comp)&&void 0!==t&&t.getCellEditor()&&(Sg(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),gg(this.beans,e,{silent:!0}),Dg(this.beans),null===s||void 0===s||s.refreshCell(Kf),n&&(null===s||void 0===s||s.focusCell(),null===s||void 0===s||null===(i=s.comp)||void 0===i||null===(i=i.getCellEditor())||void 0===i||null===(o=i.focusIn)||void 0===o||o.call(i)))}hasValidationErrors(e){Dg(this.beans);const t=lg(this.beans,e);var i;t&&(t.refreshCell(Kf),null===(i=t.rowCtrl.rowEditStyleFeature)||void 0===i||i.applyRowStyles());let o=!1;return null!==e&&void 0!==e&&e.rowNode?(o||(o=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(o||(o=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(o||(o=this.model.getCellValidationModel().getCellValidationMap().size>0),o||(o=this.model.getRowValidationModel().getRowValidationMap().size>0)),o}moveToNextCell(e,t,i){let o,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui";const s=this.isEditing(),r=s&&"block-stop"===this.checkNavWithValidation(void 0,i);var a;e instanceof Ig&&s&&(o=null===(a=this.strategy)||void 0===a?void 0:a.moveToNextEditingCell(e,t,i,n,r));return null===o||(o=o||!!this.beans.focusSvc.focusedHeader,!1!==o||r||this.stopEditing()),o}getCellDataValue(e){var t,i,o,n,s,r;let{rowNode:a,column:l}=e,d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!a||!l)return;let c=this.model.getEdit({rowNode:a,column:l});const u=a.pinnedSibling;if(u){const e=this.model.getEdit({rowNode:u,column:l});e&&(c=e)}const h=d?null!==(t=null===(i=c)||void 0===i?void 0:i.editorValue)&&void 0!==t?t:null===(o=c)||void 0===o?void 0:o.pendingValue:null===(n=c)||void 0===n?void 0:n.pendingValue;return h!==ug&&c?h:null!==(s=null===(r=c)||void 0===r?void 0:r.sourceValue)&&void 0!==s?s:this.valueSvc.getValue(l,a,!1,"api")}addStopEditingWhenGridLosesFocus(e){!function(e,t,i){const{gos:o,popupSvc:n}=t;if(!o.get("stopEditingWhenCellsLoseFocus"))return;const s=e=>{const s=e.relatedTarget;if(null===Rs(s))return void dg(t);let r=i.some(e=>e.contains(s))&&o.isElementInThisInstance(s);r||(r=!!n&&(n.getActivePopups().some(e=>e.contains(s))||n.isElementWithinCustomPopup(s))),r||dg(t)};for(const r of i)e.addManagedElementListeners(r,{focusout:s})}(this,this.beans,e)}createPopupEditorWrapper(e){return new Ef(e)}setDataValue(e,t,i){try{var o;if((!this.isEditing()||this.committing)&&!Wf.has(i))return;const{beans:r}=this;null!==(o=this.strategy)&&void 0!==o||(this.strategy=this.createStrategy());const a=this.batch?"ui":this.committing&&null!==i&&void 0!==i?i:"api";if(!i||Bf.has(i))return bg(r,e,t,0,void 0,{persist:!0}),this.batch?(this.cleanupEditors(),fg(r),this.bulkRefresh(),!0):this.setNodeDataValue(e.rowNode,e.column,t,!0,i);const l=this.model.getEdit(e);if(l){if(l.pendingValue===t)return!1;if(l.sourceValue!==t)return bg(r,e,t,0,void 0,{persist:!0}),this.stopEditing(e,{source:a,suppressNavigateAfterEdit:!0}),!0;var s;if(l.sourceValue===t)return null===(s=r.editModelSvc)||void 0===s||s.removeEdits(e),this.dispatchEditValuesChanged(e,(0,n.A)((0,n.A)({},l),{},{pendingValue:t})),!0}return bg(r,e,t,0,void 0,{persist:!0}),this.stopEditing(e,{source:a,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){!function(e,t){var i;const o=null===(i=t.comp)||void 0===i?void 0:i.getCellEditor();if(null===o||void 0===o||!o.refresh)return;const{eventKey:n,cellStartedEdit:s}=t.editCompDetails.params,{column:r}=t,a=mg(e,t,n,s),l=r.getColDef(),d=ns(e.userCompFactory,l,a);o.refresh(Cg(d.params,n))}(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){const{model:i}=this;if(!this.batch)return;if(!i.hasRowEdits(e.rowNode,_f))return;const{rowNode:o}=e,{compDetails:n,valueToDisplay:s}=t;if(n){const{params:e}=n;return e.data=i.getEditRowDataValue(o,_f),{compDetails:n}}return{valueToDisplay:s}}cleanupEditors(){var e;null===(e=this.strategy)||void 0===e||e.cleanupEditors()}dispatchCellEvent(e,t,i,o){var n;null===(n=this.strategy)||void 0===n||n.dispatchCellEvent(e,t,i,o)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return oo(this.gos,(0,n.A)({type:e},"batchEditingStopped"===e?{changes:this.toEventChangeList(t)}:{}))}toEventChangeList(e){return this.model.getEditPositions(e).map(e=>({rowIndex:e.rowNode.rowIndex,rowPinned:e.rowNode.rowPinned,columnId:e.column.getColId(),newValue:e.pendingValue,oldValue:e.sourceValue}))}applyBulkEdit(e,t){var i,o;let{rowNode:n,column:s}=e;if(!t||0===t.length)return;const{beans:r,rangeSvc:a,valueSvc:l}=this,{formula:d}=r;wg(r,{persist:!0});const c=this.model.getEditMap(!0);let u=null===(i=c.get(n))||void 0===i||null===(i=i.get(s))||void 0===i?void 0:i.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"});const h=null!==(o=null===d||void 0===d?void 0:d.isFormula(u))&&void 0!==o&&o;t.forEach(e=>{const t=e.columns.some(e=>null===e||void 0===e?void 0:e.isAllowFormula());if(null===a||void 0===a||a.forEachRowInRange(e,i=>{var o;const n=Qd(r,i);if(void 0===n)return;const s=null!==(o=c.get(n))&&void 0!==o?o:new Map;let a=u;for(const t of e.columns){if(!t)continue;const e=!!h&&t.isAllowFormula();if(this.isCellEditable({rowNode:n,column:t},"api")){const e=l.getValue(t,n,!0,"api");let i=l.parseValue(t,null!==n&&void 0!==n?n:null,a,e);Number.isNaN(i)&&(i=null),s.set(t,{editorValue:void 0,pendingValue:i,sourceValue:e,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}e&&(a=null===d||void 0===d?void 0:d.updateFormulaByOffset({value:a,columnDelta:1}))}s.size>0&&c.set(n,s),h&&t&&(u=null===d||void 0===d?void 0:d.updateFormulaByOffset({value:u,rowDelta:1}))}),this.setEditMap(c),this.batch)return this.cleanupEditors(),fg(r),void this.bulkRefresh();this.committing=!0,this.stopEditing(void 0,{source:"bulk"}),this.committing=!1,this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(c)})}),this.bulkRefresh();const p=lg(r,{rowNode:n,column:s});p&&p.focusCell(!0)}createCellStyleFeature(e){return new Nf(e,this.beans)}createRowStyleFeature(e){return new Of(e,this.beans)}setEditingCells(e,t){const{beans:i}=this,{colModel:o,valueSvc:n}=i,s=new Map;for(let{colId:r,column:a,colKey:l,rowIndex:d,rowPinned:c,newValue:u,state:h}of e){const e=r?o.getCol(r):l?o.getCol(l):a;if(!e)continue;const p=Qd(i,{rowIndex:d,rowPinned:c});if(!p)continue;const g=n.getValue(e,p,!0,"api");if((null===t||void 0===t||!t.forceRefreshOfEditCellsOnly)&&!pg({pendingValue:u,sourceValue:g})&&"editing"!==h)continue;let v=s.get(p);v||(v=new Map,s.set(p,v)),void 0===u&&(u=ug),v.set(e,{editorValue:void 0,pendingValue:u,sourceValue:g,state:null!==h&&void 0!==h?h:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(s,t)}onCellFocused(e){var t;const i=lg(this.beans,e);if(!i||!this.isEditing(i,_f))return;const o=this.model.getEdit(i);if(!o||!pg(o))return;const n=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");null===(t=this.beans.ariaAnnounce)||void 0===t||t.announceValue(n,"pendingChange")}allowedFocusTargetOnValidation(e){return lg(this.beans,e)}}],apiFunctions:{getEditingCells:function(e){var t;const i=null===(t=e.editModelSvc)||void 0===t?void 0:t.getEditMap(),o=[];return null===i||void 0===i||i.forEach((e,t)=>{const{rowIndex:i,rowPinned:n}=t;e.forEach((e,t)=>{const{editorValue:s,pendingValue:r,sourceValue:a,state:l}=e,d=pg(e);let c=null!==s&&void 0!==s?s:r;c===ug&&(c=void 0);const u={newValue:c,oldValue:a,state:l,column:t,colId:t.getColId(),colKey:t.getColId(),rowIndex:i,rowPinned:n};("editing"===l||"changed"===l&&d)&&o.push(u)})}),o},getEditRowValues:function(e,t){var i;return null===(i=e.editModelSvc)||void 0===i?void 0:i.getEditRowDataValue(t,{checkSiblings:!0})},getCellEditorInstances:function(e){return hg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).map(e=>e.editor)},startEditingCell:function(e,t){const{key:i,colKey:o,rowIndex:n,rowPinned:s}=t,{editSvc:r,colModel:a}=e,l=a.getCol(o);if(!l)return void oi(12,{colKey:o});const d=Qd(e,{rowIndex:n,rowPinned:s||null,column:l});if(!d)return void oi(290,{rowIndex:n,rowPinned:s});if(null===r||void 0===r||!r.isCellEditable({rowNode:d,column:l},"api"))return;null==s&&Pf(e,n),Rf(e,o),null===r||void 0===r||r.startEditing({rowNode:d,column:l},{event:i?new KeyboardEvent("keydown",{key:i}):void 0,source:"api"})},stopEditing:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{editSvc:i}=e;if(null!==i&&void 0!==i&&i.isBatchEditing()){if(t)for(const t of null!==(o=null===(n=e.editModelSvc)||void 0===n?void 0:n.getEditPositions())&&void 0!==o?o:[]){var o,n;"editing"===t.state&&i.revertSingleCellEdit(t)}else wg(e,{persist:!0});Sg(e,void 0,{cancel:t})}else null===i||void 0===i||i.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})},isEditing:function(e,t){var i,o;const n=lg(e,t);return null!==(i=null===(o=e.editSvc)||void 0===o?void 0:o.isEditing(n))&&void 0!==i&&i},validateEdit:function(e){var t;return(null===(t=e.editSvc)||void 0===t?void 0:t.validateEdit())||null}},dynamicBeans:{singleCell:class extends qf{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";const o=super.shouldStop(e,t,i);if(null!==o)return o;const{rowNode:n,column:s}=e||{};return this.rowNode&&this.column||!n||!s?this.rowNode!==n||this.column!==s:null}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){const{position:t,startedEdit:i,event:o,ignoreEventKey:n}=e;this.rowNode===t.rowNode&&this.column===t.column||super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:i,event:o,ignoreEventKey:n})}dispatchRowEvent(e,t,i){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:i}=this.beans,{rowIndex:o,column:n,rowPinned:s}=e,r=Qd(this.beans,{rowIndex:o,rowPinned:s}),a=cg(n),l=t.getCol(a),d=e.previousParams;if(d){const e=cg(d.column);if((null===d||void 0===d?void 0:d.rowIndex)===o&&e===a&&(null===d||void 0===d?void 0:d.rowPinned)===s)return}null!==i&&void 0!==i&&i.isEditing({rowNode:r,column:l},{withOpenEditor:!0})&&"cellFocused"===e.type||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,i){var o;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=this.beans.focusSvc.getFocusedCell();var a;r&&(e=null!==(a=Xd(this.beans,r))&&void 0!==a?a:e);const l=e.cellPosition;let d;const c="fullRow"===this.beans.gos.get("editType");var u,h;(c&&this.model.suspend(!0),s)||(e.eGui.focus(),null===(u=this.editSvc)||void 0===u||u.stopEditing(e,{source:null!==(h=this.editSvc)&&void 0!==h&&h.isBatchEditing()?"ui":"api",event:i}));try{var p;d=null===(p=this.beans.navigation)||void 0===p?void 0:p.findNextCellToFocusOn(l,{backwards:t,startEditing:!0})}finally{c&&this.model.suspend(!1)}if(!1===d)return null;if(null==d)return!1;const g=d.cellPosition,v=e.isCellEditable(),m=d.isCellEditable(),f=g&&l.rowIndex===g.rowIndex&&l.rowPinned===g.rowPinned;v&&!s&&this.setFocusOutOnEditor(e);const C=this.gos.get("suppressStartEditOnTab");var w;if(f||s||(super.cleanupEditors(d,!0),C?d.focusCell(!0,i):this.editSvc.startEditing(d,{startedEdit:!0,event:i,source:n,ignoreEventKey:!0})),m&&!s){if(d.focusCell(!1,i),C)d.focusCell(!0,i);else if(null===(w=d.comp)||void 0===w||!w.getCellEditor()){var b;const e=null===(b=this.editSvc)||void 0===b?void 0:b.isEditing(d,{withOpenEditor:!0});gg(this.beans,d,{event:i,cellStartedEdit:!0,silent:e}),this.setFocusInOnEditor(d),this.cleanupEditors(d)}}else m&&s&&this.setFocusInOnEditor(d),d.focusCell(!0,i);return null===(o=e.rowCtrl)||void 0===o||o.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},fullRow:class extends qf{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ui";const{rowNode:o}=e||{};if(!ag(this.beans,{rowNode:this.rowNode}))return!0;const n=super.shouldStop({rowNode:this.rowNode},t,i);return null!==n?n:!!this.rowNode&&o!==this.rowNode}midBatchInputsAllowed(e){let{rowNode:t}=e;return!!t&&this.model.hasEdits({rowNode:t})}clearEdits(e){this.model.clearEditValue(e)}start(e){const{position:t,silent:i,startedEdit:o,event:n,ignoreEventKey:s}=e,{rowNode:r}=t;this.rowNode!==r&&super.cleanupEditors(t);const a=this.beans.visibleCols.allCols,l=[],d=[];for(const c of a)c.isCellEditable(r)&&d.push(c);if(0!=d.length){this.dispatchRowEvent({rowNode:r},"rowEditingStarted",i),this.startedRows.push(r);for(const e of d){const t={rowNode:r,column:e};l.push(t),this.model.hasEdits(t)||this.model.start(t)}this.rowNode=r,this.setupEditors({cells:l,position:t,startedEdit:o,event:n,ignoreEventKey:s})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){var i;const{rowNode:o}=this;if(o&&!this.model.hasRowEdits(o))return!1;const n=[];if(e||this.model.getEditMap().forEach((e,t)=>{if(e&&0!==e.size)for(const i of e.values())if(pg(i)){n.push(t);break}}),Dg(this.beans),!e&&"block-stop"===(null===(i=this.editSvc)||void 0===i?void 0:i.checkNavWithValidation({rowNode:o})))return!1;super.stop(e,t);for(const s of n)this.dispatchRowEvent({rowNode:s},"rowValueChanged");return this.cleanupEditors({rowNode:o},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){const{rowIndex:t}=e,i=e.previousParams;if((null===i||void 0===i?void 0:i.rowIndex)===t||e.sourceEvent instanceof KeyboardEvent)return;const o=lg(this.beans,i);"block"===this.gos.get("invalidEditValueMode")&&o&&(this.model.getCellValidationModel().getCellValidation(o)||this.model.getRowValidationModel().getRowValidation(o))||super.onCellFocusChanged(e)}cleanupEditors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;super.cleanupEditors(e,t);for(const i of this.startedRows)this.dispatchRowEvent({rowNode:i},"rowEditingStopped");this.startedRows.length=0}moveToNextEditingCell(e,t,i){var o;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ui",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=e.cellPosition;let a;this.model.suspend(!0);try{var l;a=null===(l=this.beans.navigation)||void 0===l?void 0:l.findNextCellToFocusOn(r,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(!1===a)return null;if(null==a)return!1;const d=a.cellPosition,c=e.isCellEditable(),u=a.isCellEditable(),h=d&&r.rowIndex===d.rowIndex&&r.rowPinned===d.rowPinned;c&&this.setFocusOutOnEditor(e),this.restoreEditors();const p=this.gos.get("suppressStartEditOnTab");var g,v;u&&!s?p?a.focusCell(!0,i):(null!==(g=a.comp)&&void 0!==g&&g.getCellEditor()||gg(this.beans,a,{event:i,cellStartedEdit:!0}),this.setFocusInOnEditor(a),a.focusCell(!1,i)):(u&&s&&this.setFocusInOnEditor(a),a.focusCell(!0,i));h||s||(null===(v=this.editSvc)||void 0===v||v.stopEditing({rowNode:e.rowNode},{event:i}),this.cleanupEditors(a,!0),p?a.focusCell(!0,i):this.editSvc.startEditing(a,{startedEdit:!0,event:i,source:n,ignoreEventKey:!0}));return null===(o=e.rowCtrl)||void 0===o||o.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach((e,i)=>{var o;let{state:n}=e;if("editing"!==n)return;const s=lg(this.beans,{rowNode:t,column:i});!s||null!==(o=s.comp)&&void 0!==o&&o.getCellEditor()||gg(this.beans,s,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}}},dependsOn:[am,lf],css:[".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}"]},Xf={moduleName:"UndoRedoEdit",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&jd(this.activeCellEdit,t),o=null!==this.activeRowEdit&&Kd(this.activeRowEdit,t);if(!(i||o||this.isPasting||this.isRangeInAction))return;const{rowPinned:n,rowIndex:s,column:r,oldValue:a,value:l}=e,d={rowPinned:n,rowIndex:s,columnId:r.getColId(),newValue:l,oldValue:a};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const i=e.get("undoRedoCellEditingLimit");if(i<=0)return;this.undoStack=new uf(i),this.redoStack=new uf(i),this.addListeners();const o=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:o,newColumnsLoaded:o,columnGroupOpened:o,columnRowGroupChanged:o,columnMoved:o,columnPinned:o,columnVisible:o,rowDragEnd:o}),t.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getCurrentUndoStackSize(){var e,t;return null!==(e=null===(t=this.undoStack)||void 0===t?void 0:t.getCurrentStackSize())&&void 0!==e?e:0}getCurrentRedoStackSize(){var e,t;return null!==(e=null===(t=this.redoStack)||void 0===t?void 0:t.getCurrentStackSize())&&void 0!==e?e:0}undo(e){const{eventSvc:t,undoStack:i,redoStack:o}=this;t.dispatchEvent({type:"undoStarted",source:e});const n=this.undoRedo(i,o,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:n})}redo(e){const{eventSvc:t,undoStack:i,redoStack:o}=this;t.dispatchEvent({type:"redoStarted",source:e});const n=this.undoRedo(o,i,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:n})}undoRedo(e,t,i,o,n){if(!e)return!1;const s=e.pop();return!(null===s||void 0===s||!s.cellValueChanges)&&(this.processAction(s,e=>e[o],n),s instanceof cf?this.processRange(s.ranges||[s[i]]):this.processCell(s.cellValueChanges),t.push(s),!0)}processAction(e,t,i){for(const o of e.cellValueChanges){const{rowIndex:e,rowPinned:n,columnId:s}=o,r={rowIndex:e,rowPinned:n},a=Qd(this.beans,r);a.displayed&&a.setDataValue(s,t(o),i)}}processRange(e){let t;const i=this.beans.rangeSvc;i.removeAllCellRanges(!0),e.forEach((o,n)=>{if(!o)return;const s=o.startRow,r=o.endRow;n===e.length-1&&(t={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:o.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:o.startColumn,columns:o.columns};i.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:o}=t,n={rowIndex:i,rowPinned:o},s=Qd(this.beans,n),r={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(e){const{rowIndex:t,columnId:i,rowPinned:o}=e,{colModel:s,focusSvc:r,rangeSvc:a}=this.beans,l=s.getCol(i);if(!l)return;const{scrollFeature:d}=this.gridBodyCtrl;d.ensureIndexVisible(t),d.ensureColumnVisible(l);const c={rowIndex:t,column:l,rowPinned:o};r.setFocusedCell((0,n.A)((0,n.A)({},c),{},{forceBrowserFocus:!0})),null===a||void 0===a||a.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new df(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{this.activeCellEdit=null;if(e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new df(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new df(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new cf(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:i}=this.beans;e=t&&zi(i)?new cf(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):new df(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:e=>{let{changes:t}=e;return this.stopBigChange("batchEditing",t)},bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:e=>{let{changes:t}=e;return this.stopBigChange("bulkEditing",t)}})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){"bulkEditing"===e?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if("bulkEditing"===e&&!this.bulkEditing||"batchEditing"===e&&!this.batchEditing)return;if(this.updateBigChange(e,!1),0===(null===t||void 0===t?void 0:t.length))return;const i=new df(null!==t&&void 0!==t?t:[]);this.pushActionsToUndoStack(i),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}],apiFunctions:{undoCellEditing:function(e){var t;null===(t=e.undoRedo)||void 0===t||t.undo("api")},redoCellEditing:function(e){var t;null===(t=e.undoRedo)||void 0===t||t.redo("api")},getCurrentUndoSize:function(e){var t,i;return null!==(t=null===(i=e.undoRedo)||void 0===i?void 0:i.getCurrentUndoStackSize())&&void 0!==t?t:0},getCurrentRedoSize:function(e){var t,i;return null!==(t=null===(i=e.undoRedo)||void 0===i?void 0:i.getCurrentRedoStackSize())&&void 0!==t?t:0}},dependsOn:[Qf]},$f={moduleName:"TextEditor",version:Kt,userComponents:{agCellEditor:Ff,agTextCellEditor:Ff},dependsOn:[Qf]},Zf={moduleName:"NumberEditor",version:Kt,userComponents:{agNumberCellEditor:{classImp:class extends pf{constructor(){super(new bf(()=>this.getLocaleTextFunc()))}}}},dependsOn:[Qf]},Jf={moduleName:"DateEditor",version:Kt,userComponents:{agDateCellEditor:class extends pf{constructor(){super(new vf(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},agDateStringCellEditor:class extends pf{constructor(){super(new ff(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}}},dependsOn:[Qf]},eC={moduleName:"CheckboxEditor",version:Kt,userComponents:{agCheckboxCellEditor:class extends Nc{constructor(){super(hf,[gr]),this.eEditor=Pn}initialiseEditor(e){var t;const i=null!==(t=e.value)&&void 0!==t?t:void 0,o=this.eEditor;o.setValue(i);o.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListeners(o,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),i=de(t,e),o=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel("".concat(o," (").concat(i,")"))}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,i=this.getValue();return t?t({value:i,internalErrors:null,cellEditorParams:e}):null}}},dependsOn:[Qf]},tC={moduleName:"SelectEditor",version:Kt,userComponents:{agSelectCellEditor:class extends Nc{constructor(){super(yf,[Mr]),this.eEditor=Pn,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:i,gos:o}=this,{values:n,value:s,eventKey:r}=e;if(m(n))return void oi(58);this.startedByEnter=null!=r&&r===us.ENTER;let a=!1;n.forEach(o=>{const n={value:o},r=i.formatValue(e.column,null,o),l=null!==r&&void 0!==r;n.text=l?r:o,t.addOption(n),a=a||s===o}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:d,valueListMaxHeight:c}=e;null!=l&&t.setPickerGap(l),null!=c&&t.setPickerMaxHeight(c),null!=d&&t.setPickerMaxWidth(d),"fullRow"!==o.get("editType")&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:i}=e,o=this.getValue();let n=[];if(t&&!t.includes(o)){const e=this.getLocaleTextFunc();n.push(e("invalidSelectionValidation","Invalid selection."))}else n=null;return i?i({value:o,internalErrors:n,cellEditorParams:e}):n}}},dependsOn:[Qf]},iC={moduleName:"LargeTextEditor",version:Kt,userComponents:{agLargeTextCellEditor:class extends Nc{constructor(){super(Cf,[br]),this.eEditor=Pn}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:i,eventKey:o,maxLength:n,cols:s,rows:r}=e;let a;this.focusAfterAttached=i,t.getInputElement().setAttribute("title",""),t.setMaxLength(n||200).setCols(s||60).setRows(r||10),i?(this.focusAfterAttached=!0,o===us.BACKSPACE||o===us.DELETE?a="":o&&1===o.length?a=o:(a=this.getStartValue(e),o!==us.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=this.getStartValue(e)),null!=a&&t.setValue(a,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){var t;const{value:i}=e;return null!==(t=null===i||void 0===i?void 0:i.toString())&&void 0!==t?t:i}onKeyDown(e){const t=e.key;(t===us.LEFT||t===us.UP||t===us.RIGHT||t===us.DOWN||e.shiftKey&&t===us.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:i}=this,o=this.getLocaleTextFunc();e.setInputAriaLabel(o("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),i&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:i}=t,o=e.getValue();return v(o)||v(i)?t.parseValue(o):i}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,o=this.getLocaleTextFunc(),n=this.getValue();let s=[];return"string"===typeof n&&null!=t&&n.length>t&&s.push(o("maxLengthValidation","Must be ".concat(t," characters or fewer."),[String(t)])),s.length||(s=null),i?i({value:n,internalErrors:s,cellEditorParams:e}):s}}},dependsOn:[Qf]},oC={moduleName:"CustomEditor",version:Kt,dependsOn:[Qf]};function nC(e){return cu(e)?e.pinnedSibling:e.footer?e.sibling:e}function sC(e,t){return(0!==e||0!==t)&&(e>0&&t>0?void 0:e>0)}function rC(e){var t,i;const o=!1===e.isSelected(),n=null!==(t=null===(i=e.childrenAfterFilter)||void 0===i?void 0:i.some(rC))&&void 0!==t&&t;return o||n}var aC={moduleName:"SharedRowSelection",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,qo(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;null!=t&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),Yo(e))}createColumns(e,t){var i,o,n,s,r,a;const l=e.treeDepth,d=(null!==(i=null===(o=this.columns)||void 0===o?void 0:o.treeDepth)&&void 0!==i?i:-1)==l,c=this.generateSelectionCols();if(Ko(c,null!==(n=null===(s=this.columns)||void 0===s?void 0:s.list)&&void 0!==n?n:[])&&d)return;(()=>{var e;Ho(this.beans,null===(e=this.columns)||void 0===e?void 0:e.tree),this.columns=null})();const{colGroupSvc:u}=this.beans,h=null!==(r=null===u||void 0===u?void 0:u.findDepth(e.tree))&&void 0!==r?r:0,p=null!==(a=null===u||void 0===u?void 0:u.balanceTreeForAutoCols(c,h))&&void 0!==a?a:[];this.columns={list:c,tree:p,treeDepth:h,map:{}};t(e=>{if(!e)return null;const t=e.filter(e=>!Wo(e));return[...c,...t]})}updateColumns(e){const t=qo(e.source),{beans:i}=this;for(const s of null!==(o=null===(n=this.columns)||void 0===n?void 0:n.list)&&void 0!==o?o:[]){var o,n;const r=this.createSelectionColDef(e.currentValue);s.setColDef(r,null,t),mn(i,{state:[Xo(r,s.colId)]},t)}}getColumn(e){var t,i;return null!==(t=null===(i=this.columns)||void 0===i?void 0:i.list.find(t=>Qo(t,e)))&&void 0!==t?t:null}getColumns(){var e,t;return null!==(e=null===(t=this.columns)||void 0===t?void 0:t.list)&&void 0!==e?e:null}isSelectionColumnEnabled(){var e,t;const{gos:i,beans:o}=this,n=i.get("rowSelection");if("object"!==typeof n||!gi(i))return!1;const s=(null!==(e=null===(t=o.autoColSvc)||void 0===t||null===(t=t.getColumns())||void 0===t?void 0:t.length)&&void 0!==e?e:0)>0;if("autoGroupColumn"===n.checkboxLocation&&s)return!1;const r=!!Li(n),a=Ni(n);return r||a}createSelectionColDef(e){const{gos:t}=this,i=null!==e&&void 0!==e?e:t.get("selectionColumnDef"),s=t.get("enableRtl"),r=null!==i&&void 0!==i?i:{},{rowSpan:l,spanRows:d}=r,c=(0,o.A)(r,a);return(0,n.A)((0,n.A)({width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:s?"right":"left",comparator(e,t,i,o){const n=i.isSelected();return n===o.isSelected()?0:n?1:-1},editable:!1,suppressFillHandle:!0,suppressAutoSize:!0,pinned:null},c),{},{colId:No,chartDataType:"excluded"})}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const i=new po(e,null,t,!1);return this.createBean(i),[i]}onSelectionOptionsChanged(e,t,i){const o=(t&&"string"!==typeof t?Li(t):void 0)!==(e&&"string"!==typeof e?Li(e):void 0),n=(t&&"string"!==typeof t?Ni(t):void 0)!==(e&&"string"!==typeof e?Ni(e):void 0),s=Oi(e),r=Oi(t);(o||n||s!==r)&&this.beans.colModel.refreshAll(i)}destroy(){var e;Ho(this.beans,null===(e=this.columns)||void 0===e?void 0:e.tree),super.destroy()}refreshVisibility(e,t,i){var o,n;if(null===(o=this.columns)||void 0===o||!o.list.length)return;const s=e.length+t.length+i.length;if(0===s)return;const r=this.columns.list[0];if(!r.isVisible())return;((null===(n=this.beans.rowNumbersSvc)||void 0===n?void 0:n.getColumn(Oo))?2:1)===s&&(()=>{let o;switch(r.pinned){case"left":case!0:o=e;break;case"right":o=i;break;default:o=t}o&&Mo(o,r)})()}}],css:[':where(.ag-selection-checkbox) .ag-checkbox-input-wrapper{&:before{content:"";cursor:pointer;inset:-8px;position:absolute}}'],apiFunctions:{setNodesSelected:function(e,t){var i;if(!t.nodes.every(e=>e.rowPinned&&!cu(e)?(oi(59),!1):void 0!==e.id||(oi(60),!1)))return;const{nodes:o,source:n,newValue:s}=t;null===(i=e.selectionSvc)||void 0===i||i.setNodesSelected({nodes:o,source:null!==n&&void 0!==n?n:"api",newValue:s})},selectAll:function(e,t){var i;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"apiSelectAll";null===(i=e.selectionSvc)||void 0===i||i.selectAllRowNodes({source:o,selectAll:t})},deselectAll:function(e,t){var i;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"apiSelectAll";null===(i=e.selectionSvc)||void 0===i||i.deselectAllRowNodes({source:o,selectAll:t})},selectAllFiltered:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";null===(t=e.selectionSvc)||void 0===t||t.selectAllRowNodes({source:i,selectAll:"filtered"})},deselectAllFiltered:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";null===(t=e.selectionSvc)||void 0===t||t.deselectAllRowNodes({source:i,selectAll:"filtered"})},selectAllOnCurrentPage:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";null===(t=e.selectionSvc)||void 0===t||t.selectAllRowNodes({source:i,selectAll:"currentPage"})},deselectAllOnCurrentPage:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";null===(t=e.selectionSvc)||void 0===t||t.deselectAllRowNodes({source:i,selectAll:"currentPage"})},getSelectedNodes:function(e){var t,i;return null!==(t=null===(i=e.selectionSvc)||void 0===i?void 0:i.getSelectedNodes())&&void 0!==t?t:[]},getSelectedRows:function(e){var t,i;return null!==(t=null===(i=e.selectionSvc)||void 0===i?void 0:i.getSelectedRows())&&void 0!==t?t:[]}}},lC={moduleName:"RowSelection",version:Kt,rowModels:["clientSide","infinite","viewport"],beans:[class extends Cu{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=Ki(e),this.groupSelectsDescendants=Xi(e),this.groupSelectsFiltered="filteredDescendants"===qi(e),this.masterSelectsDetail="detail"===$i(e),this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=Xi(e),i=Ki(e),o="filteredDescendants"===qi(e);this.masterSelectsDetail="detail"===$i(e),t===this.groupSelectsDescendants&&o===this.groupSelectsFiltered&&i===this.mode||(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=o,this.mode=i)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;const o=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);if(null==o)return 0;if(this.selectionCtx.selectAll=!1,"select"in o)return o.reset?this.resetNodes():this.selectRange(o.deselect,!1,i),this.selectRange(o.select,!0,i);{const t=o.checkFilteredNodes?rC(o.node):o.newValue;return this.setNodesSelected({nodes:[o.node],newValue:t,clearSelection:o.clearSelection,keepDescendants:o.keepDescendants,event:e,source:i})}}setNodesSelected(e){let{newValue:t,clearSelection:i,suppressFinishActions:o,nodes:n,event:s,source:r,keepDescendants:a=!1}=e;if(0===n.length)return 0;const{gos:l}=this;if(!gi(l)&&t)return oi(132),0;if(n.length>1&&!this.isMultiSelect())return oi(130),0;let d=0;for(let u=0;u<n.length;u++){var c;const e=n[u],i=nC(e);if(i.rowPinned&&!cu(i)){oi(59);continue}if(void 0===i.id){oi(60);continue}if(t&&e.destroyed)continue;if(!(this.groupSelectsFiltered&&i.group&&!l.get("treeData"))){this.selectRowNode(i,t,s,r)&&(this.detailSelection.delete(i.id),d++)}this.groupSelectsDescendants&&null!==(c=i.childrenAfterGroup)&&void 0!==c&&c.length&&(d+=this.selectChildren(i,t,r))}if(!o){1===n.length&&"api"===r&&this.selectionCtx.setRoot(nC(n[0]));t&&(i||!this.isMultiSelect())&&(d+=this.clearOtherNodes(nC(n[0]),a,r)),d>0&&(this.updateGroupsFromChildrenSelections(r),this.dispatchSelectionChanged(r))}return d}selectRange(e,t,i){let o=0;return e.forEach(e=>{const n=nC(e);if(n.group&&this.groupSelectsDescendants)return;this.selectRowNode(n,t,void 0,i)&&o++}),o>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),o}selectChildren(e,t,i){const o=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return o?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:i,nodes:o}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,o)=>{e(i)&&t.set(o,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:i,rowModel:o}=this.beans;if(!ui(i))return!1;const n=o.rootNode;if(!n)return!1;t||((t=new Zu(!0,n)).active=!1);let s=!1;return t.forEachChangedNodeDepthFirst(t=>{if(t!==n){const i=this.calculateSelectedFromChildren(t);s=this.selectRowNode(t,null!==i&&i,void 0,e)||s}}),s}clearOtherNodes(e,t,i){const o=new Map;let n=0;return this.selectedNodes.forEach(s=>{const r=s.id==e.id;if((!t||!function(e,t){let i=t.parent;for(;i;){if(i===e)return!0;i=i.parent}return!1}(e,s))&&!r){const e=this.selectedNodes.get(s.id);n+=this.setNodesSelected({nodes:[e],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:i}),this.groupSelectsDescendants&&s.parent&&o.set(s.parent.id,s.parent)}}),o.forEach(e=>{const t=this.calculateSelectedFromChildren(e);this.selectRowNode(e,null!==t&&t,void 0,i)}),n}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new $a(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){if(t&&e.id!==t.id){this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!ui(e))return;const i=t.getTopLevelNodes();if(null===i)return;const o=[];return function e(t){for(let i=0,n=t.length;i<n;i++){const n=t[i];n.isSelected()?o.push(n):n.group&&n.childrenAfterGroup&&e(n.childrenAfterGroup)}}(i),o}isEmpty(){return 0===this.getSelectionCount()}deselectAllRowNodes(e){let{source:t,selectAll:i}=e;const o=ui(this.gos);let n=!1;const s=e=>{const i=this.selectRowNode(nC(e),!1,void 0,t);n||(n=i)};if("currentPage"===i||"filtered"===i){if(!o)return void ni(102);this.getNodesToSelect(i).forEach(s)}else this.selectedNodes.forEach(s),this.reset(t);if(this.selectionCtx.selectAll=!1,o&&this.groupSelectsDescendants){const e=this.updateGroupsFromChildrenSelections(t);n||(n=e)}n&&this.dispatchSelectionChanged(t)}getSelectedCounts(e){let t=0,i=0;return this.getNodesToSelect(e).forEach(e=>{this.groupSelectsDescendants&&e.group||(e.isSelected()?t++:e.selectable&&i++)}),{selectedCount:t,notSelectedCount:i}}getSelectAllState(e){var t;const{selectedCount:i,notSelectedCount:o}=this.getSelectedCounts(e);return null!==(t=sC(i,o))&&void 0!==t?t:null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(e=>e.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],i=e=>t.push(e);if("currentPage"===e)return this.forEachNodeOnPage(e=>{if(e.group){if(!e.expanded&&!e.footer){const t=e=>{var o;i(e),null===(o=e.childrenAfterFilter)||void 0===o||o.forEach(t)};return void t(e)}this.groupSelectsDescendants||i(e)}else i(e)}),t;const o=this.beans.rowModel;return"filtered"===e?(o.forEachNodeAfterFilter(i),t):(o.forEachNode(i),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:i}=this.beans,o=t.getFirstRow(),n=t.getLastRow();for(let s=o;s<=n;s++){const t=i.getRow(s);t&&e(t)}}selectAllRowNodes(e){const{gos:t,selectionCtx:i}=this;if(!gi(t))return void oi(132);if(Bi(t)&&!Yi(t))return void oi(130);if(!this.canSelectAll())return;const{source:o,selectAll:n}=e;let s=!1;if(this.getNodesToSelect(n).forEach(e=>{const t=this.selectRowNode(nC(e),!0,void 0,o);s||(s=t)}),i.selectAll=!0,ui(t)&&this.groupSelectsDescendants){const e=this.updateGroupsFromChildrenSelections(o);s||(s=e)}s&&this.dispatchSelectionChanged(o)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,i){if(e||(e=[]),!Array.isArray(e))return void ni(103);const o=new Set(e),n=[];this.beans.rowModel.forEachNode(e=>{o.has(e.id)&&n.push(e)}),i&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:n,source:t})}canSelectAll(){return ui(this.beans.gos)}updateSelectable(e){const{gos:t,rowModel:i}=this.beans;if(!gi(t))return;const o="selectableChanged",n=void 0!==e,s=ui(t)&&this.groupSelectsDescendants,r=[],a=e=>{if(n&&!e.group)return;if(s&&e.group){var t,i;const o=null!==(t=null===(i=e.childrenAfterGroup)||void 0===i?void 0:i.some(e=>e.selectable))&&void 0!==t&&t;return void this.setRowSelectable(e,o,!0)}!this.updateRowSelectable(e,!0)&&e.isSelected()&&r.push(e)};if(s){var l;if(void 0===e){const t=i.rootNode;e=t?new Zu(!1,t):void 0}null===(l=e)||void 0===l||l.forEachChangedNodeDepthFirst(a,!n,!n)}else i.forEachNode(a);var d;(r.length&&this.setNodesSelected({nodes:r,newValue:!1,source:o}),!n&&s)&&(null===(d=this.updateGroupsFromChildrenSelections)||void 0===d||d.call(this,o))}updateSelectableAfterGrouping(e){if(this.updateSelectable(e),this.groupSelectsDescendants){var t;(null===(t=this.updateGroupsFromChildrenSelections)||void 0===t?void 0:t.call(this,"rowGroupChanged",e))&&this.dispatchSelectionChanged("rowGroupChanged")}}refreshMasterNodeState(e,t){var i;if(!this.masterSelectsDetail)return;const o=null===(i=e.detailNode)||void 0===i||null===(i=i.detailGridInfo)||void 0===i?void 0:i.api;if(!o)return;const n=function(e){let t=0,i=0;return e.forEachNode(e=>{e.isSelected()?t++:e.selectable&&i++}),sC(t,i)}(o);if(e.isSelected()!==n){this.selectRowNode(e,n,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail")}if(!n){var s;const t=null!==(s=this.detailSelection.get(e.id))&&void 0!==s?s:new Set;for(const e of o.getSelectedNodes())t.add(e.id);this.detailSelection.set(e.id,t)}}setDetailSelectionState(e,t,i){if(this.masterSelectsDetail)if(Yi(t))switch(e.isSelected()){case!0:i.selectAll();break;case!1:i.deselectAll();break;case void 0:{const t=this.detailSelection.get(e.id);if(t){const e=[];for(const o of t){const t=i.getRowNode(o);t&&e.push(t)}i.setNodesSelected({nodes:e,newValue:!0,source:"masterDetail"})}break}}else oi(269)}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}}],dependsOn:[aC]};function dC(e){var t;null===(t=e.rowModel)||void 0===t||t.onRowHeightChanged()}function cC(e){var t,i;null!==(t=e.rowAutoHeight)&&void 0!==t&&t.active?oi(3):null===(i=e.rowModel)||void 0===i||i.resetRowHeights()}var uC={moduleName:"CsrmSsrmSharedApi",version:Kt,apiFunctions:{expandAll:function(e){var t;null===(t=e.expansionSvc)||void 0===t||t.expandAll(!0)},collapseAll:function(e){var t;null===(t=e.expansionSvc)||void 0===t||t.expandAll(!1)}}},hC={moduleName:"RowModelSharedApi",version:Kt,apiFunctions:{onRowHeightChanged:dC,resetRowHeights:cC}},pC={moduleName:"SsrmInfiniteSharedApi",version:Kt,apiFunctions:{setRowCount:function(e,t,i){var o;const n=Gv(e);var s;if(n)return 0===(null===(s=e.rowGroupColsSvc)||void 0===s?void 0:s.columns.length)?t<0?void ni(238):void n.setRowCount(t,i):void ni(28);null===(o=Ov(e))||void 0===o||o.setRowCount(t,i)},getCacheBlockState:function(e){var t,i;if(hi(e.gos)){return e.rowModel.getBlockStates()}return null!==(t=null===(i=e.rowNodeBlockLoader)||void 0===i?void 0:i.getBlockState())&&void 0!==t?t:{}},isLastRowIndexKnown:function(e){return e.rowModel.isLastRowIndexKnown()}}},gC={moduleName:"AlignedGrids",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){var e;let t=null!==(e=this.gos.get("alignedGrids"))&&void 0!==e?e:[];const i="function"===typeof t;"function"===typeof t&&(t=t());return t.map(e=>{if(!e)return ni(18),void(i||ni(20));if(this.isGridApi(e))return e;const t=e;var o;return"current"in t?null===(o=t.current)||void 0===o?void 0:o.api:(t.api||ni(19),t.api)}).filter(e=>!!e&&!e.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:e=>{let{event:t}=e;return this.onColumnEvent(t)},alignedGridScroll:e=>{let{event:t}=e;return this.onScrollEvent(t)}})}fireEvent(e){if(!this.consuming)for(const t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(e=>{i.push(t(e))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,e=>e)}getColumnIds(e){return this.extractDataFromEvent(e,e=>e.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":oi(21)}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;if(t)for(const i of e.columnGroups){let e=null;i&&(e=t.getProvidedColGroup(i.getGroupId())),i&&!e||t.setColumnGroupOpened(e,i.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){const t=e.column;let i=null;const o=this.beans,{colResize:n,ctrlsSvc:s,colModel:r}=o;if(t&&(i=r.getColDefCol(t.getColId())),t&&!i)return;const a=this.getMasterColumns(e);switch(e.type){case"columnMoved":mn(o,{state:e.api.getColumnState().map(e=>({colId:e.colId})),applyOrder:!0},"alignedGridChanged");break;case"columnVisible":mn(o,{state:e.api.getColumnState().map(e=>({colId:e.colId,hide:e.hide}))},"alignedGridChanged");break;case"columnPinned":mn(o,{state:e.api.getColumnState().map(e=>({colId:e.colId,pinned:e.pinned}))},"alignedGridChanged");break;case"columnResized":{const t=e,i={};for(const e of a)i[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()};for(const e of null!==(l=t.flexColumns)&&void 0!==l?l:[]){var l;i[e.getId()]&&delete i[e.getId()]}null===n||void 0===n||n.setColumnWidths(Object.values(i),!1,t.finished,"alignedGridChanged");break}}const d=s.getGridBodyCtrl().isVerticalScrollShowing();for(const c of this.getAlignedGridApis())c.setGridOption("alwaysShowVerticalScroll",d)}}],dependsOn:[Wh]},vC=class extends ht{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},fC(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){var t;this.dispatchRowDataUpdateStarted(e),this.destroyAllNodes();const i=fC(this.rootNode),o=new Array(e.length);i._leafs=o;let n=0;const s=null===(t=this.beans.groupStage)||void 0===t?void 0:t.getNestedDataGetter(),r=s?new Set:null,a=(e,t)=>{const i=e.level+1;for(let l=0,d=t.length;l<d;++l){const d=t[l];if(!d)continue;const c=this.createRowNode(d,i);if(c.sourceRowIndex=n,o[n++]=c,r&&!r.has(d)){r.add(d),c.treeParent=e;const t=s(d);t&&a(c,t)}}};a(i,e),o.length=n}destroyAllNodes(){const{selectionSvc:e,pinnedRowModel:t,groupStage:i}=this.beans;null===e||void 0===e||e.reset("rowDataChanged"),null!==t&&void 0!==t&&t.isManual()&&t.reset(),null===i||void 0===i||i.clearNonLeafs();const o=this.rootNode._leafs;if(o)for(let n=0,s=o.length;n<s;++n)o[n]._destroy(!1);this.allNodesMap=Object.create(null),this.nextId=0}setImmutableRowData(e,t){var i;const{rootNode:o,gos:n}=this;this.dispatchRowDataUpdateStarted(t);const s=Ti(n),r=e.changedRowNodes,{adds:a,updates:l}=r,d=new Set,c=[],u=null===(i=this.beans.groupStage)||void 0===i?void 0:i.getNestedDataGetter();let h=!!n.get("suppressMaintainUnsortedOrder")&&void 0,p=-1,g=!1;const v=(e,t)=>{if(!h&&void 0!==h){const t=e.sourceRowIndex;h=t<=p,p=t}e.data!==t&&(e.updateData(t),a.has(e)||l.add(e),!e.selectable&&e.isSelected()&&c.push(e))},m=(e,t,i)=>{for(let o=0,n=t.length;o<n;++o){const n=t[o];if(!n)continue;let r=this.getRowNode(s({data:n,level:i}));if(r?(v(r,n),g||(g=!!u&&r.treeParent!==e)):(r=this.createRowNode(n,i),a.add(r)),!u||d.has(r)){d.add(r);continue}d.add(r),r.treeParent=e;const l=u(n);l&&m(r,l,i+1)}};m(o,t,0);const f=this.deleteUnusedNodes(d,r,c,!!e.animate)||h||a.size>0;if(f){var C;const e=null!==(C=o._leafs)&&void 0!==C?C:o._leafs=[];void 0===h?yC(e,d,r):bC(e,d)&&(r.reordered=!0)}(f||g||l.size)&&(e.rowDataUpdated=!0,this.deselect(c))}deleteUnusedNodes(e,t,i,o){let{removals:n}=t;const s=this.rootNode._leafs;for(let r=0,a=s.length;r<a;r++){const t=s[r];e.has(t)||this.destroyNode(t,o)&&(n.push(t),t.isSelected()&&i.push(t))}return n.length>0}updateRowData(e,t,i){var o;if(this.dispatchRowDataUpdateStarted(e.add),null!==(o=this.beans.groupStage)&&void 0!==o&&o.getNestedDataGetter())return oi(268),{remove:[],update:[],add:[]};const n=[],s=Ti(this.gos),r=this.executeRemove(s,e,t,n,i),a=this.executeUpdate(s,e,t,n),l=this.executeAdd(e,t);return this.deselect(n),{remove:r,update:a,add:l}}executeRemove(e,t,i,o,n){let{remove:s}=t,{adds:r,updates:a,removals:l}=i;const d=this.rootNode._leafs,c=null===d||void 0===d?void 0:d.length,u=null===s||void 0===s?void 0:s.length;if(!u||!c)return[];let h=0,p=c,g=0;const v=new Array(u);for(let m=0;m<u;++m){const t=this.lookupNode(e,s[m]);if(!t)continue;const i=t.sourceRowIndex;i<p&&(p=i),i>g&&(g=i),v[h++]=t,this.destroyNode(t,n)&&(t.isSelected()&&o.push(t),r.delete(t)||(a.delete(t),l.push(t)))}return v.length=h,h&&wC(d,p,g),v}executeUpdate(e,t,i,o){let{update:n}=t,{adds:s,updates:r}=i;const a=null===n||void 0===n?void 0:n.length;if(!a)return[];const l=new Array(a);let d=0;for(let c=0;c<a;c++){const t=n[c],i=this.lookupNode(e,t);i&&(i.updateData(t),!i.selectable&&i.isSelected()&&o.push(i),l[d++]=i,s.has(i)||r.add(i))}return l.length=d,l}executeAdd(e,t){var i,o;const n=null!==(i=(o=this.rootNode)._leafs)&&void 0!==i?i:o._leafs=[],s=n.length,r=e.add,a=null===r||void 0===r?void 0:r.length;if(!a)return[];const l=s+a;let d=this.sanitizeAddIndex(n,e.addIndex);if(d<s){for(let e=s-1,t=l-1;e>=d;--e){const i=n[e];i.sourceRowIndex=t,n[t--]=i}t.reordered=!0}n.length=l;const c=new Array(a),u=t.adds;for(let h=0;h<a;h++){const e=this.createRowNode(r[h],0);u.add(e),e.sourceRowIndex=d,n[d]=e,c[h]=e,d++}return c}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:null!==e&&void 0!==e&&e.length?e[0]:null})}deselect(e){var t;const i="rowDataChanged",o=this.beans.selectionSvc;var n;(e.length&&(null===o||void 0===o||o.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:i})),null===o||void 0===o||null===(t=o.updateGroupsFromChildrenSelections)||void 0===t||t.call(o,i),e.length)&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:i,selectedNodes:null!==(n=null===o||void 0===o?void 0:o.getSelectedNodes())&&void 0!==n?n:null,serverSideState:null})}createRowNode(e,t){const i=new $a(this.beans);i.parent=this.rootNode,i.level=t,i.group=!1,i.expanded=!1,i.setDataAndId(e,String(this.nextId++));const o=i.id,n=this.allNodesMap;return n[o]&&oi(2,{nodeId:o}),n[o]=i,i}destroyNode(e,t){if(!e._destroy(t))return!1;const i=e.id,o=this.allNodesMap;o[i]===e&&delete o[i];const n=e.pinnedSibling;var s;n&&(null===(s=this.beans.pinnedRowModel)||void 0===s||s.pinRow(n,null));return!0}lookupNode(e,t){if(!e)return CC(this.rootNode._leafs,t);const i=e({data:t,level:0}),o=this.allNodesMap[i];return o||(ni(4,{id:i}),null)}sanitizeAddIndex(e,t){const i=e.length;if("number"!==typeof t)return i;if(t<0||t>=i||Number.isNaN(t))return i;t=Math.ceil(t);const o=this.gos;return t>0&&o.get("treeData")&&o.get("getDataPath")&&(t=mC(e,t)),t}},mC=(e,t)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if((null===o||void 0===o?void 0:o.rowIndex)==t-1)return i+1}return t},fC=e=>{var t;e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",0!==(null===(t=e._leafs)||void 0===t?void 0:t.length)&&(e._leafs=[]);const i=[],o=[],n=[],s=[];e.childrenAfterGroup=i,e.childrenAfterSort=o,e.childrenAfterAggFilter=n,e.childrenAfterFilter=s;const r=e.sibling;return r&&(r.childrenAfterGroup=i,r.childrenAfterSort=o,r.childrenAfterAggFilter=n,r.childrenAfterFilter=s,r.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},CC=(e,t)=>{if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i];if(o.data===t)return o}return ni(5,{data:t}),null},wC=(e,t,i)=>{for(let o=t=Math.max(0,t),n=e.length;o<n;++o){const n=e[o];o<=i&&n.destroyed||(n.sourceRowIndex=t,e[t++]=n)}e.length=t},bC=(e,t)=>{const i=t.size;e.length=i;let o=0,n=!1,s=!1;for(const r of t){const t=r.sourceRowIndex;t===o?s||(s=n):(t>=0?s=!0:n=!0,r.sourceRowIndex=o,e[o]=r),++o}return s},yC=(e,t,i)=>{let{adds:o}=i;const n=e.length,s=t.size;s>n&&(e.length=s);let r=0;for(let a=0;a<n;++a){const t=e[a];t.destroyed||(r!==a&&(t.sourceRowIndex=r,e[r]=t),++r)}for(const a of o)a.sourceRowIndex<0&&(a.sourceRowIndex=r,e[r++]=a);e.length=r},SC=e=>{const t=e.childrenAfterSort,i=e.sibling;if(i&&(i.childrenAfterSort=t),t)for(let o=0,n=t.length-1;o<=n;o++){const e=t[o],i=0===o,s=o===n;e.firstChild!==i&&(e.firstChild=i,e.dispatchRowEvent("firstChildChanged")),e.lastChild!==s&&(e.lastChild=s,e.dispatchRowEvent("lastChildChanged")),e.childIndex!==o&&(e.childIndex=o,e.dispatchRowEvent("childIndexChanged"))}},xC=(e,t,i,o,n)=>{const s=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return e.doFullSort(s,n);const a=new Set,l=[],{updates:d,adds:c}=i;for(let h=0,p=s.length;h<p;++h){const e=s[h];d.has(e)||c.has(e)||o&&!o.canSkip(e)?l.push({currentPos:l.length,rowNode:e}):a.add(e)}const u=r.filter(e=>a.has(e)).map((e,t)=>({currentPos:t,rowNode:e}));return l.sort((t,i)=>e.compareRowNodes(n,t,i)),FC(e,n,l,u)},FC=(e,t,i,o)=>{let n=0,s=0;const r=i.length,a=o.length,l=new Array(r+a);let d=0;for(;n<r&&s<a;){const r=i[n],a=o[s];e.compareRowNodes(t,r,a)<0?(l[d++]=r.rowNode,++n):(l[d++]=a.rowNode,++s)}for(;n<r;)l[d++]=i[n++].rowNode;for(;s<a;)l[d++]=o[s++].rowNode;return l},RC=e=>{const t=e.childrenAfterSort,i=e.childrenAfterAggFilter,o=null===t||void 0===t?void 0:t.length,n=null===i||void 0===i?void 0:i.length;if(!o||!n)return null;const s=new Array(n),r=new Set;for(let l=0;l<n;++l)r.add(i[l]);let a=0;for(let l=0;l<o;++l){const e=t[l];r.delete(e)&&(s[a++]=e)}if(0===r.size&&a===o)return t;for(const l of r)s[a++]=l;return s.length=a,s},PC=(e,t)=>{const i=t.childrenAfterGroup;if(i)for(let o=0,n=i.length;o<n;++o){const t=i[o];t.data&&e.push(t),t.group&&PC(e,t)}};var DC={moduleName:"ClientSideRowModel",version:Kt,rowModels:["clientSide"],beans:[class extends ht{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.formulaRows=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=null,this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=Ct(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){const e=this.beans,t=new $a(e);this.rootNode=t,this.nodeManager=this.createBean(new vC(t));const i=()=>{var e;null===(e=this.beans.groupStage)||void 0===e||e.invalidateGroupCols(),this.refreshModel({step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")})};this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:i,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:()=>this.refreshModel({step:"pivot"}),columnPivotModeChanged:()=>this.refreshModel({step:"group"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),stylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){const{beans:e,stagesRefreshProps:t}=this,i=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(e=>!!e);this.stages=i;for(let o=i.length-1;o>=0;--o){const e=i[o];for(const i of e.refreshProps)t.set(i,o)}this.addManagedPropertyListeners([...t.keys(),"rowData"],e=>{var t;const i=null===(t=e.changeSet)||void 0===t?void 0:t.properties;i&&this.onPropChange(i)}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,i,o){let n,s=!1;do{n=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),d=Math.min(a,o);for(let e=l;e<=d;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=fi(this.beans,t);t.setRowHeight(e.height),n=!0,s=!0}}n&&this.setRowTopAndRowIndex()}while(n);return s}onPropChange(e){const{nodeManager:t,gos:i,beans:o}=this,n=o.groupStage;if(!t)return;const s=new Set(e),r=null===n||void 0===n?void 0:n.onPropChange(s);let a;s.has("rowData")?a=i.get("rowData"):r&&(a=null===n||void 0===n?void 0:n.extractData()),a&&!Array.isArray(a)&&(a=null,oi(1));const l={step:"nothing",changedProps:s};if(a){!r&&!this.isEmpty()&&a.length>0&&i.exists("getRowId")&&!i.get("resetRowDataOnUpdate")?(l.keepRenderedRows=!0,l.animate=!i.get("suppressAnimationFrame"),l.changedRowNodes=new lu,t.setImmutableRowData(l,a)):(l.rowDataUpdated=!0,l.newData=!0,t.setNewRowData(a),this.rowNodesCountReady=!0)}const d=l.rowDataUpdated?"group":this.getRefreshedStage(e);d&&(l.step=d,this.refreshModel(l))}getRefreshedStage(e){const{stages:t,stagesRefreshProps:i}=this;if(!t)return null;const o=t.length;let n=o;for(let r=0,a=e.length;r<a&&n;++r){var s;n=Math.min(n,null!==(s=i.get(e[r]))&&void 0!==s?s:n)}return n<o?t[n].step:null}setRowTopAndRowIndex(e){var t;const{beans:i,rowsToDisplay:o}=this,n=i.environment.getDefaultRowHeight();let s=0;const r=pi(this.gos,"normal");for(let a=0,l=o.length;a<l;++a){const t=o[a],l=t.id;if(null!=l&&(null===e||void 0===e||e.add(l)),null==t.rowHeight){const e=fi(i,t,r,n);t.setRowHeight(e.height,e.estimated)}t.setRowTop(s),t.setRowIndex(a),s+=t.rowHeight}if(null!==(t=this.beans.formula)&&void 0!==t&&t.active){const e=this.formulaRows;for(let t=0,i=e.length;t<i;++t){e[t].formulaRowIndex=t}}}clearRowTopAndRowIndex(e,t){const i=e.active,o=e=>{null==(null===e||void 0===e?void 0:e.id)||t.has(e.id)||e.clearRowTopAndRowIndex()},n=e=>{o(e),o(e.detailNode),o(e.sibling);const t=e.childrenAfterGroup;if(!e.hasChildren()||!t)return;const s=-1==e.level;if(!(i&&!s&&!e.expanded))for(let i=0,o=t.length;i<o;++i)n(t[i])},s=this.rootNode;s&&n(s)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){var e,t,i;const{rootNode:o,rowsToDisplay:n}=this;if(!o||!n.length)return 0;if(n[0]===o)return 1;const s=null!==(e=o.sibling)&&void 0!==e&&e.displayed?1:0;return(null!==(t=null===(i=o.childrenAfterSort)||void 0===i?void 0:i.length)&&void 0!==t?t:0)+s}getTopLevelRowDisplayedIndex(e){const{beans:t,rootNode:i,rowsToDisplay:o}=this;if(!i||!o.length||o[0]===i)return e;const n=i.childrenAfterSort,s=e=>{let t=n[e];if(this.gos.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},r=t.footerSvc;return r?null===r||void 0===r?void 0:r.getTopDisplayIndex(o,e,n,s):s(e)}getTopLevelIndexFromDisplayedIndex(e){var t,i;const{rootNode:o,rowsToDisplay:n}=this;if(!o||!n.length||n[0]===o)return e;let s=this.getRow(e);s.footer&&(s=s.sibling);let r=s.parent;for(;r&&r!==o;)s=r,r=s.parent;const a=null!==(t=null===(i=o.childrenAfterSort)||void 0===i?void 0:i.indexOf(s))&&void 0!==t?t:-1;return a>=0?a:e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:Si(this.gos)})}onFilterChanged(e){let{afterDataChange:t,columns:i}=e;if(!t){const e=0===i.length||i.some(e=>e.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:e,keepRenderedRows:!0,animate:Si(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:Si(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new Zu(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:i,rowDataUpdated:o}=e;return!(!t||i||!o)&&(!t.removals.length&&!t.adds.size)}refreshModel(e){var t,i;const{nodeManager:o,beans:n,eventSvc:s,started:r,refreshingModel:a}=this;if(!o)return;const l=!!e.rowDataUpdated,d=null!==(t=e.changedPath)&&void 0!==t?t:e.changedPath=this.createChangePath(!e.newData&&l);if(r&&l&&s.dispatchEvent({type:"rowDataUpdated"}),!r||a||n.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e))return void(this.rowDataUpdatedPending||(this.rowDataUpdatedPending=l));var c;(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,null===(i=n.masterDetailSvc)||void 0===i||i.refreshModel(e),l&&"group"!==e.step)&&(null===(c=n.colFilter)||void 0===c||c.refreshModel());switch(e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(d);case"pivot":this.doPivot(d);case"aggregate":this.doAggregate(d);case"filter_aggregates":this.doFilterAggregates(d);case"sort":this.doSort(d,e.changedRowNodes);case"map":this.doRowsToDisplay()}const u=new Set;this.setRowTopAndRowIndex(u),this.clearRowTopAndRowIndex(d,u),this.refreshingModel=!1,s.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t;return!(null!==(e=this.rootNode)&&void 0!==e&&null!==(e=e._leafs)&&void 0!==e&&e.length)||!(null!==(t=this.beans.colModel)&&void 0!==t&&t.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getOverlayType(){var e;return this.isEmpty()?"noRows":null!==(e=this.beans.filterManager)&&void 0!==e&&e.isAnyFilterPresent()&&0===this.getRowCount()?"noMatchingRows":null}getNodesInRangeForSelection(e,t){let i=!1,o=!1;const n=[],s=Xi(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(o)return;if(i&&(r===t||r===e)&&(o=!0,s&&r.group))return void PC(n,r);if(!i){if(r!==t&&r!==e)return;i=!0,t===e&&(o=!0)}(!r.group||!s)&&n.push(r)}),n}getTopLevelNodes(){var e,t;return null!==(e=null===(t=this.rootNode)||void 0===t?void 0:t.childrenAfterGroup)&&void 0!==e?e:null}getRow(e){return this.rowsToDisplay[e]}getFormulaRow(e){return this.formulaRows[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay,i=t.length;if(this.isEmpty()||0===i)return-1;let o=0,n=i-1;if(e<=0)return 0;if(t[n].rowTop<=e)return n;let s=-1,r=-1;for(;;){const i=Math.floor((o+n)/2),a=t[i];if(this.isRowInPixel(a,e))return i;a.rowTop<e?o=i+1:a.rowTop>e&&(n=i-1);if(s===o&&r===n)return i;s=o,r=n}}isRowInPixel(e,t){const i=e.rowTop,o=i+e.rowHeight;return i<=t&&o>t}forEachLeafNode(e){var t;const i=null===(t=this.rootNode)||void 0===t?void 0:t._leafs;if(i)for(let o=0,n=i.length;o<n;++o)e(i[o],o)}forEachNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){const t=this.rowsToDisplay;for(let i=0,o=t.length;i<o;++i)e(t[i],i)}forEachNodeAfterFilter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterSort)}forEachPivotNode(e,t,i){const{colModel:o,rowGroupColsSvc:n}=this.beans;if(!o.isPivotMode())return;if(null===n||void 0===n||!n.columns.length)return void e(this.rootNode,0);const s=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,e=>e.leafGroup?null:e[s])}depthFirstSearchRowNodes(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e.childrenAfterGroup,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rootNode,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!o)return n;const s=o===this.rootNode;if(s||e(o,n++),o.hasChildren()&&!o.footer){const l=i(o);if(l){var r,a;const d=this.beans.footerSvc;n=null!==(r=null===d||void 0===d?void 0:d.addTotalRows(n,o,e,t,s,"top"))&&void 0!==r?r:n;for(const o of l)n=this.depthFirstSearchRowNodes(e,t,i,o,n);return null!==(a=null===d||void 0===d?void 0:d.addTotalRows(n,o,e,t,s,"bottom"))&&void 0!==a?a:n}}return n}doAggregate(e){var t;this.rootNode&&(null===(t=this.beans.aggStage)||void 0===t||t.execute(e))}doFilterAggregates(e){const t=this.rootNode,i=this.beans.filterAggStage;i?i.execute(e):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const i=this.beans.sortStage;i?i.execute(e,t):e.forEachChangedNodeDepthFirst(e=>{e.childrenAfterSort=e.childrenAfterAggFilter.slice(0),SC(e)})}doGrouping(e){const t=this.rootNode;if(!t)return;const i=this.beans.groupStage,o=null===i||void 0===i?void 0:i.execute(e);if(void 0===o){const e=t._leafs;t.childrenAfterGroup=e,t.updateHasChildren();const i=t.sibling;i&&(i.childrenAfterGroup=e)}var n;(o||e.rowDataUpdated)&&(null===(n=this.beans.colFilter)||void 0===n||n.refreshModel());!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){const t=this.beans.filterStage;t?t.execute(e):e.forEachChangedNodeDepthFirst(e=>{e.childrenAfterFilter=e.childrenAfterGroup,sm(e)},!0)}doPivot(e){var t;null===(t=this.beans.pivotStage)||void 0===t||t.execute(e)}getRowNode(e){var t,i;const o=null===(t=this.nodeManager)||void 0===t?void 0:t.getRowNode(e);return"object"===typeof o?o:null===(i=this.beans.groupStage)||void 0===i?void 0:i.getNonLeaf(e)}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];const e=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),e)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){const e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var e;const{nodeManager:t,beans:i,eventSvc:o,asyncTransactions:n}=this;if(!t)return;null===(e=i.valueCache)||void 0===e||e.onDataChanged();const s=[],r=[],a=new lu,l=!this.gos.get("suppressAnimationFrame");for(const{rowDataTransaction:d,callback:c}of null!==n&&void 0!==n?n:[]){this.rowNodesCountReady=!0;const e=t.updateRowData(d,a,l);s.push(e),c&&r.push(c.bind(null,e))}this.commitTransactions(a,l),r.length>0&&setTimeout(()=>{for(let e=0,t=r.length;e<t;e++)r[e]()},0),s.length>0&&o.dispatchEvent({type:"asyncTransactionsFlushed",results:s}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){var t;const i=this.nodeManager;if(!i)return null;null===(t=this.beans.valueCache)||void 0===t||t.onDataChanged(),this.rowNodesCountReady=!0;const o=new lu,n=!this.gos.get("suppressAnimationFrame"),s=i.updateRowData(e,o,n);return this.commitTransactions(o,n),s}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:t,changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){var e,t;const{rootNode:i,beans:o}=this;if(null!==(e=o.formula)&&void 0!==e&&e.active){var n;const e=null!==(n=null===i||void 0===i?void 0:i.childrenAfterSort)&&void 0!==n?n:[];this.formulaRows=e,this.rowsToDisplay=e.filter(e=>!e.softFiltered);for(const t of this.rowsToDisplay)t.setUiLevel(0);return}const s=o.flattenStage;if(s)return void(this.rowsToDisplay=s.execute());const r=null!==(t=this.rootNode.childrenAfterSort)&&void 0!==t?t:[];for(const a of r)a.setUiLevel(0);this.rowsToDisplay=r}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);const i=e.sibling;null===i||void 0===i||i.setRowHeight(i.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;null===i||void 0===i||i.setRowHeight(i.rowHeight,!0);const o=t.sibling;null===o||void 0===o||o.setRowHeight(o.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){var t;!e.rowHeightChanged||null!==(t=this.beans.rowAutoHeight)&&void 0!==t&&t.active||this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,this.stages=null,this.stagesRefreshProps.clear(),clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},class extends ht{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e,t){const i=this.beans.sortSvc.getSortOptions(),o=i.length>0&&!!t&&this.gos.get("deltaSort"),{gos:n,colModel:s,rowGroupColsSvc:r,rowNodeSorter:a,rowRenderer:l,showRowGroupCols:d}=this.beans,c=n.get("groupMaintainOrder"),u=s.getCols().some(e=>e.isRowGroupActive()),h=null===r||void 0===r?void 0:r.columns,p=s.isPivotMode(),g=n.getCallback("postSortRows");let v,m=!1;if(null===e||void 0===e||e.forEachChangedNodeDepthFirst(n=>{var s,r,l;const d=p&&n.leafGroup;let f=c&&u&&!n.leafGroup;f&&(null!==v&&void 0!==v||(v=this.shouldSortContainsGroupCols(i)),f&&(f=!v));let C=null;if(f){let e=!1;if(h){const t=n.level+1;t<h.length&&(e=h[t].wasSortExplicitlyRemoved)}e||(C=RC(n))}else!i.length||d||(C=o&&t?xC(a,n,t,e,i):a.doFullSort(n.childrenAfterAggFilter,i));if(C||(C=null!==(s=null===(r=n.childrenAfterAggFilter)||void 0===r?void 0:r.slice(0))&&void 0!==s?s:[]),m||(m=(null===(l=n.childrenAfterSort)||void 0===l?void 0:l[0])!==C[0]),n.childrenAfterSort=C,SC(n),g){const e={nodes:n.childrenAfterSort};g(e)}}),m&&n.get("groupHideOpenParents")){const e=null===d||void 0===d?void 0:d.columns;null!==e&&void 0!==e&&e.length&&l.refreshCells({columns:e,force:!0})}}shouldSortContainsGroupCols(e){const t=e.length;if(!t)return!1;if(Fi(this.gos)){for(let i=0;i<t;++i){const t=e[i].column;if(t.isPrimary()&&t.isRowGroupActive())return!0}return!1}for(let i=0;i<t;++i)if(e[i].column.getColDef().showRowGroup)return!0;return!1}}],dependsOn:[hv]},EC={moduleName:"ClientSideRowModelApi",version:Kt,apiFunctions:{onGroupExpandedOrCollapsed:function(e){var t;null===(t=e.expansionSvc)||void 0===t||t.onGroupExpandedOrCollapsed()},refreshClientSideRowModel:function(e,t){const i=Nv(e);i&&(t&&"everything"!==t||(t="group"),i.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))},isRowDataEmpty:function(e){var t,i;return null===(t=null===(i=Nv(e))||void 0===i?void 0:i.isEmpty())||void 0===t||t},forEachLeafNode:function(e,t){var i;null===(i=Nv(e))||void 0===i||i.forEachLeafNode(t)},forEachNodeAfterFilter:function(e,t){var i;null===(i=Nv(e))||void 0===i||i.forEachNodeAfterFilter(t)},forEachNodeAfterFilterAndSort:function(e,t){var i;null===(i=Nv(e))||void 0===i||i.forEachNodeAfterFilterAndSort(t)},applyTransaction:function(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var i;return null===(i=Nv(e))||void 0===i?void 0:i.updateRowData(t)})},applyTransactionAsync:function(e,t,i){e.frameworkOverrides.wrapIncoming(()=>{var o;return null===(o=Nv(e))||void 0===o?void 0:o.batchUpdateRowData(t,i)})},flushAsyncTransactions:function(e){e.frameworkOverrides.wrapIncoming(()=>{var t;return null===(t=Nv(e))||void 0===t?void 0:t.flushAsyncTransactions()})},getBestCostNodeSelection:function(e){var t;return null===(t=e.selectionSvc)||void 0===t?void 0:t.getBestCostNodeSelection()},resetRowHeights:cC,onRowHeightChanged:dC},dependsOn:[uC,hC]},AC={moduleName:"SharedExport",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allColumns:i,columnKeys:o,skipRowGroups:n,exportRowNumbers:s}=t,r=this.getColumnsToExport({allColumns:i,skipRowGroups:n,columnKeys:o,exportRowNumbers:s});return[this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t)].reduce((e,t)=>t(e),e).parse()}processRow(e,t,i,o){var n;const s=t.shouldRowBeSkipped||(()=>!1),r=null!=t.rowPositions||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?o.leafGroup:!o.group,d=!!o.footer,c=1===o.allChildrenCount&&1===(null===(n=o.childrenAfterGroup)||void 0===n?void 0:n.length)&&function(e,t){const i=e.get("groupHideParentOfSingleChild");return!0===i||!("leafGroupsOnly"!==i||!t.leafGroup)||!!e.get("groupRemoveSingleChildren")||!(!e.get("groupRemoveLowestSingleChildren")||!t.leafGroup)}(this.gos,o);if(!l&&!d&&(t.skipRowGroups||c||a)||t.onlySelected&&!o.isSelected()||t.skipPinnedTop&&"top"===o.rowPinned||t.skipPinnedBottom&&"bottom"===o.rowPinned||o.stub)return;if(-1===o.level&&!l&&!d)return;if(s(oo(this.gos,{node:o})))return;const u=e.onNewBodyRow(o);if(i.forEach((e,t)=>{u.onColumn(e,t,o)}),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow(oo(this.gos,{node:o}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const o=new xn,{colGroupSvc:n}=this.beans,s=n?n.createColumnGroups({columns:t,idCreator:o,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(s,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach((t,i)=>{e.onColumn(t,i,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{var o;const n=this.processRow.bind(this,i,e,t);if(e.rowPositions)e.rowPositions.filter(e=>"top"===e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>{var t;return null===(t=this.pinnedRowModel)||void 0===t?void 0:t.getPinnedTopRow(e.rowIndex)}).forEach(n);else if(null===(o=this.pinnedRowModel)||void 0===o||!o.isManual()){var s;null===(s=this.pinnedRowModel)||void 0===s||s.forEachPinnedRow("top",n)}return i}}processRows(e,t){return i=>{const o=this.rowModel,n=ui(this.gos),s=hi(this.gos),r=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(e=>null==e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>o.getRow(e.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())n?o.forEachPivotNode(a,!0,"filteredAndSorted"===l):s?o.forEachNodeAfterFilterAndSort(a,!0):o.forEachNode(a);else if(e.onlySelectedAllPages||r){var d,c;const e=null!==(d=null===(c=this.beans.selectionSvc)||void 0===c?void 0:c.getSelectedNodes())&&void 0!==d?d:[];this.replicateSortedOrder(e),e.forEach(a)}else"all"===l?o.forEachNode(a):n||s?o.forEachNodeAfterFilterAndSort(a,!0):o.forEachNode(a);return i}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;const o=t.getSortOptions(),n=(e,t)=>{return null!=e.rowIndex&&null!=t.rowIndex?e.rowIndex-t.rowIndex:e.level===t.level?(null===(s=e.parent)||void 0===s?void 0:s.id)===(null===(r=t.parent)||void 0===r?void 0:r.id)?i.compareRowNodes(o,{rowNode:e,currentPos:null!==(a=e.rowIndex)&&void 0!==a?a:-1},{rowNode:t,currentPos:null!==(l=t.rowIndex)&&void 0!==l?l:-1}):n(e.parent,t.parent):e.level>t.level?n(e.parent,t):n(e,t.parent);var s,r,a,l};e.sort(n)}processPinnedBottomRows(e,t){return i=>{var o;const n=this.processRow.bind(this,i,e,t);if(e.rowPositions)e.rowPositions.filter(e=>"bottom"===e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>{var t;return null===(t=this.pinnedRowModel)||void 0===t?void 0:t.getPinnedBottomRow(e.rowIndex)}).forEach(n);else if(null===(o=this.pinnedRowModel)||void 0===o||!o.isManual()){var s;null===(s=this.pinnedRowModel)||void 0===s||s.forEachPinnedRow("bottom",n)}return i}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:i=!1,exportRowNumbers:o=!1,columnKeys:n}=e,{colModel:s,gos:r,visibleCols:a}=this,l=s.isPivotMode(),d=e=>!Wo(e)&&(!Uo(e)||o);if(null!==n&&void 0!==n&&n.length)return s.getColsForKeys(n).filter(d);const c=r.get("treeData");let u=[];return u=t&&!l?s.getCols():a.allCols,u=u.filter(e=>d(e)&&(!(i&&!c)||!zo(e))),u}recursivelyAddHeaderGroups(e,t,i){const o=[];for(const s of e){const e=s;if(e.getChildren)for(const t of null!==(n=e.getChildren())&&void 0!==n?n:[]){var n;o.push(t)}}e.length>0&&_a(e[0])&&this.doAddHeaderHeader(t,e,i),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,t,i)}doAddHeaderHeader(e,t,i){const o=e.onNewHeaderGroupingRow();let n=0;for(const s of t){const e=s;let t;t=i?i(oo(this.gos,{columnGroup:e})):this.beans.colNames.getDisplayNameForColumnGroup(e,"header");const r=(e.isExpandable()?e.getLeafColumns():[]).reduce((e,t,i,o)=>{let n=Do(e);return"open"===t.getColumnGroupShow()?n&&null==n[1]||(n=[i],e.push(n)):n&&null==n[1]&&(n[1]=i-1),i===o.length-1&&n&&null==n[1]&&(n[1]=i),e},[]);o.onColumn(e,t||"",n++,e.getLeafColumns().length-1,r)}}}]},MC=class extends _v{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"===typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(e=>{this.beginNewLine(),e.forEach((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,o){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(o)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){var o;0!=t&&(this.result+=this.columnSeparator);const n=this.extractRowCellValue({column:e,node:i,currentColumnIndex:t,accumulatedRowIndex:t,type:"csv",useRawFormula:!1});this.result+=this.putInQuotes(null!==(o=n.valueFormatted)&&void 0!==o?o:n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null===e||void 0===e)return'""';let t;"string"===typeof e?t=e:"function"===typeof e.toString?t=e.toString():(oi(53),t="");return'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}};var TC={moduleName:"CsvExport",version:Kt,beans:[class extends jv{constructor(){super(...arguments),this.beanName="csvCreator"}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void oi(51);const t=()=>{const t=this.getMergedParams(e),i=this.getData(t),o=new Blob(["\ufeff",i],{type:"text/plain"}),n=t.fileName,s="function"===typeof n?n(oo(this.gos,{})):n;Kv(this.getFileName(s),o)},{overlays:i}=this.beans;i?i.showExportOverlay(t):t()}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.assign({},e):this.getMergedParams(e);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:i,rowGroupColsSvc:o,valueSvc:n,gos:s}=this.beans,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d,suppressQuotes:c,columnSeparator:u}=e;return new MC({colModel:t,colNames:i,valueSvc:n,gos:s,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:d||void 0,suppressQuotes:c||!1,columnSeparator:u||",",rowGroupColsSvc:o})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}}],apiFunctions:{getDataAsCsv:function(e,t){var i;return null===(i=e.csvCreator)||void 0===i?void 0:i.getDataAsCsv(t)},exportDataAsCsv:function(e,t){var i;null===(i=e.csvCreator)||void 0===i||i.exportDataAsCsv(t)}},dependsOn:[AC]},kC=class extends ht{constructor(e,t,i){super(),this.id=e,this.parentCache=t,this.params=i,this.state="needsLoading",this.version=0,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"});this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:i,beans:o,rowNodes:n}=this;for(let s=0;s<e;s++){const e=i+s,r=new $a(o);r.setRowHeight(t),r.uiLevel=0,r.setRowIndex(e),r.setRowTop(t*e),n.push(r)}}getBlockStateJson(){const{id:e,startRow:t,endRow:i,state:o}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:i,pageStatus:o}}}setDataAndId(e,t,i){v(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();m(this.params.datasource.getRows)?oi(90):window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:i,params:{sortModel:o,filterModel:n},gos:s}=this;return oo(s,{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:o,filterModel:n})}forEachNode(e,t,i){this.rowNodes.forEach((o,n)=>{this.startRow+n<i&&e(o,t.value++)})}getRow(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.lastAccessed=this.params.lastAccessedSequence.value++);const t=e-this.startRow;return this.rowNodes[t]}processServerResult(e){const{rowNodes:t,beans:i}=this;t.forEach((o,n)=>{const s=e.rowData?e.rowData[n]:void 0;!o.id&&o.alreadyRendered&&s&&(t[n]=new $a(i),t[n].setRowIndex(o.rowIndex),t[n].setRowTop(o.rowTop),t[n].setRowHeight(o.rowHeight),o._destroy(!0)),this.setDataAndId(t[n],s,this.startRow+n)});const o=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,o)}destroy(){const e=this.rowNodes;for(let t=0,i=e.length;t<i;t++)e[t]._destroy(!1);e.length=0,super.destroy()}},IC=class extends ht{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Math.floor(e/this.params.blockSize);let o=this.blocks[i];if(!o){if(t)return;o=this.createBlock(i)}return o.getRow(e)}createBlock(e){const t=this.params,i=this.createBean(new kC(e,this,t));return this.blocks[i.id]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),t.rowNodeBlockLoader.addBlock(i),i}refreshCache(){if(0==this.blockCount)this.purgeCache();else{for(const e of this.getBlocksInOrder())e.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}}destroy(){for(const e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(At(this.gos,"InfiniteCache - onPageLoaded: page = ".concat(e.id,", lastRow = ").concat(t)),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(t=>t!=e);t.sort((e,t)=>t.lastAccessed-e.lastAccessed);const i=this.params.maxBlocksInCache>0,o=i?this.params.maxBlocksInCache-1:null;t.forEach((e,t)=>{if("needsLoading"===e.state&&t>=1||!!i&&t>=o){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const{startRow:i,endRow:o}=e;return t.rowIndex>=i&&t.rowIndex<o}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:i}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,i-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"===typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:t,overflowSize:i}=this.params,o=(e.id+1)*t+i;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,t){this.rowCount=e,v(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};for(const i of this.getBlocksInOrder())i.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){return Object.values(this.blocks).sort((e,t)=>e.id-t.id)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];for(const t of this.getBlocksInOrder()){t.id*this.params.blockSize>=this.rowCount&&e.push(t)}if(e.length>0)for(const t of e)this.destroyBlock(t)}purgeCache(){for(const e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let o=-1,n=!1;const s={value:0};let r=!1;for(const a of this.getBlocksInOrder())r||(n&&o+1!==a.id?r=!0:(o=a.id,a.forEachNode(o=>{const s=o===e||o===t;(n||s)&&i.push(o),s&&(n=!n)},s,this.rowCount)));return r||n?[]:i}};var LC={moduleName:"InfiniteRowModelCore",version:Kt,rowModels:["infinite"],beans:[class extends ht{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if("infinite"!==this.gos.get("rowModelType"))return;const e=this.beans,t=new $a(e);this.rootNode=t,t.level=-1,this.rowHeight=Ci(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Ci(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;var t,i;this.cacheParams?e=!C(this.cacheParams.sortModel,null!==(t=null===(i=this.beans.sortSvc)||void 0===i?void 0:i.getSortModel())&&void 0!==t?t:[]):e=!0;e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getOverlayType(){const e=this.infiniteCache;var t;return 0===(null===e||void 0===e?void 0:e.getRowCount())?null!==(t=this.beans.filterManager)&&void 0!==t&&t.isAnyFilterPresent()?"noMatchingRows":"noRows":null}getNodesInRangeForSelection(e,t){var i,o;return null!==(i=null===(o=this.infiniteCache)||void 0===o?void 0:o.getRowNodesInRange(e,t))&&void 0!==i?i:[]}reset(){if(!this.datasource)return;var e;null!=Ti(this.gos)||(null===(e=this.beans.selectionSvc)||void 0===e||e.reset("rowDataChanged"));this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){var e,t;this.destroyCache();const i=this.beans,{filterManager:o,sortSvc:n,rowNodeBlockLoader:s,eventSvc:r,gos:a}=i;this.cacheParams={datasource:this.datasource,filterModel:null!==(e=null===o||void 0===o?void 0:o.getFilterModel())&&void 0!==e?e:{},sortModel:null!==(t=null===n||void 0===n?void 0:n.getSortModel())&&void 0!==t?t:[],rowNodeBlockLoader:s,initialRowCount:a.get("infiniteInitialRowCount"),maxBlocksInCache:a.get("maxBlocksInCache"),rowHeight:Ci(i),overflowSize:a.get("cacheOverflowSize"),blockSize:a.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new IC(this.cacheParams)),r.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){var t;null===(t=this.infiniteCache)||void 0===t||t.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){var e;null===(e=this.infiniteCache)||void 0===e||e.refreshCache()}purgeCache(){var e;null===(e=this.infiniteCache)||void 0===e||e.purgeCache()}isLastRowIndexKnown(){var e,t;return null!==(e=null===(t=this.infiniteCache)||void 0===t?void 0:t.isLastRowIndexKnown())&&void 0!==e&&e}setRowCount(e,t){var i;null===(i=this.infiniteCache)||void 0===i||i.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}},class extends ht{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=ki(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Ct(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Mo(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void At(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");const e=null!=this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(e=>"needsLoading"===e.state).slice(0,e);this.activeBlockLoadsCount+=t.length;for(const i of t)i.load();this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:i,state:o}=t.getBlockStateJson();e[i]=o}),e}printCacheStatus(){At(this.gos,"RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ".concat(this.activeBlockLoadsCount,", blocks = ").concat(JSON.stringify(this.getBlockState())))}}]},NC={moduleName:"InfiniteRowModel",version:Kt,apiFunctions:{refreshInfiniteCache:function(e){var t;null===(t=Ov(e))||void 0===t||t.refreshCache()},purgeInfiniteCache:function(e){var t;null===(t=Ov(e))||void 0===t||t.purgeCache()},getInfiniteRowCount:function(e){var t;return null===(t=Ov(e))||void 0===t?void 0:t.getRowCount()}},dependsOn:[LC,pC]},OC={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},GC={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]};var BC={moduleName:"HighlightChanges",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.beans.gos.get("cellFlashDuration"),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.beans.gos.get("cellFadeDuration");const n=this.animations[t];n.delete(e);const s=Date.now(),r=s+i,a={phase:"flash",flashEndTime:r,fadeEndTime:s+i+o};n.set(e,a);const l="ag-cell-".concat(t),d="".concat(l,"-animation"),{comp:c,eGui:{style:u}}=e;c.toggleCss(l,!0),c.toggleCss(d,!1),u.removeProperty("transition"),u.removeProperty("transition-delay"),this.nextAnimationTime&&r+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),i)}),this.nextAnimationTime=r)}advanceAnimations(){const e=Date.now();let t=null;for(const i of Object.keys(this.animations)){const o=this.animations[i],n="ag-cell-".concat(i),s="".concat(n,"-animation");for(const[i,r]of o){if(!i.isAlive()||!i.comp){o.delete(i);continue}const{phase:a,flashEndTime:l,fadeEndTime:d}=r,c="flash"===a?l:d;if(!(e+15>=c)){t=Math.min(c,null!==t&&void 0!==t?t:1/0);continue}const{comp:u,eGui:{style:h}}=i;switch(a){case"flash":u.toggleCss(n,!1),u.toggleCss(s,!0),h.transition="background-color ".concat(d-l,"ms"),h.transitionDelay="".concat(l-e,"ms"),t=Math.min(d,null!==t&&void 0!==t?t:1/0),r.phase="fade";break;case"fade":u.toggleCss(n,!1),u.toggleCss(s,!1),h.removeProperty("transition"),h.removeProperty("transition-delay"),o.delete(i)}}}null==t?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const i=Ud(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",null===t||void 0===t?void 0:t.flashDuration,null===t||void 0===t?void 0:t.fadeDuration)}destroy(){for(const e of Object.keys(this.animations)){this.animations[e].clear()}}}],userComponents:{agAnimateShowChangeCellRenderer:class extends Tn{constructor(){super(OC),this.eValue=Pn,this.eDelta=Pn,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),o=e.formatValue(i),n=v(o)?o:i,s=t>=0,r=this.eDelta;r.textContent=s?"\u2191"+n:"\u2193"+n,r.classList.toggle("ag-value-change-delta-up",s),r.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Re(this.eDelta)}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{value:o,valueFormatted:n}=e,{eValue:s,lastValue:r,beans:a}=this;if(o===r)return!1;if(v(n)?s.textContent=n:v(o)?s.textContent=o:Re(s),null!==(t=a.filterManager)&&void 0!==t&&t.isSuppressFlashingCellsBecauseFiltering())return!1;const l=o&&"object"===typeof o&&"toNumber"in o?o.toNumber():o,d=r&&"object"===typeof r&&"toNumber"in r?r.toNumber():r;if(l===d)return!1;if("number"===typeof l&&"number"===typeof d){const t=l-d;this.showDelta(e,t)}return r&&s.classList.add("ag-value-change-value-highlight"),i||this.setTimerToRemoveDelta(),this.lastValue=o,!0}},agAnimateSlideCellRenderer:class extends Tn{constructor(){super(GC),this.eCurrent=Pn,this.refreshCount=0,this.registerCSS(".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}")}init(e){this.refresh(e,!0)}addSlideAnimation(){var e;this.refreshCount++;const t=this.refreshCount;null===(e=this.ePrevious)||void 0===e||e.remove();const{beans:i,eCurrent:o}=this,n=cl({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=n,n.textContent=o.textContent,this.getGui().insertBefore(n,o),i.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{var e;t===this.refreshCount&&(null===(e=this.ePrevious)||void 0===e||e.remove(),this.ePrevious=null)},3e3)})}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.value;if(m(o)&&(o=""),o===this.lastValue)return!1;if(null!==(t=this.beans.filterManager)&&void 0!==t&&t.isSuppressFlashingCellsBecauseFiltering())return!1;i||this.addSlideAnimation(),this.lastValue=o;const n=this.eCurrent;return v(e.valueFormatted)?n.textContent=e.valueFormatted:v(e.value)?n.textContent=o:Re(n),!0}}},apiFunctions:{flashCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming(()=>{for(const o of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))i.flashCell(o,t)})}}};function VC(e){return(e=(0,n.A)({},e)).version||(e.version="32.1.0"),"32.1.0"===e.version&&(e=function(e){return e.cellSelection=function(e,t){if(e&&"object"===typeof e)return e[t]}(e,"rangeSelection"),e}(e)),e.version=Kt,e}var HC={moduleName:"GridState",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Ct(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Ct(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=Ct(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var e;const{gos:t,ctrlsSvc:i,colDelayRenderSvc:o}=this.beans;this.isClientSideRowModel=ui(t);const n=VC(null!==(e=t.get("initialState"))&&void 0!==e?e:{}),s=n.partialColumnState;delete n.partialColumnState,this.cachedState=n;const r=this.suppressEventsAndDispatchInitEvent.bind(this);i.whenReady(this,()=>r(()=>this.setupStateOnGridReady(n))),(n.columnOrder||n.columnVisibility||n.columnSizing||n.columnPinning||n.columnGroup)&&(null===o||void 0===o||o.hideColumns("columnState"));const[a,l,d]=this.addManagedEventListeners({newColumnsLoaded:e=>{let{source:t}=e;"gridInitializing"===t&&(a(),r(()=>{this.setupStateOnColumnsInitialised(n,!!s),null===o||void 0===o||o.revealColumns("columnState")}))},rowCountReady:()=>{null===l||void 0===l||l(),r(()=>this.setupStateOnRowCountReady(n))},firstDataRendered:()=>{null===d||void 0===d||d(),r(()=>this.setupStateOnFirstDataRendered(n))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const i=VC(e);delete i.partialColumnState,this.cachedState=i,this.startSuppressEvents();const o="api",n=t?new Set(t):void 0;this.setGridReadyState(i,o,n),this.setColumnsInitialisedState(i,o,!!n,n),this.setRowCountState(i,o,n),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(i,o,n),this.stopSuppressEvents(o)})}setGridReadyState(e,t,i){var o;"api"!==t||null!==i&&void 0!==i&&i.has("sideBar")||(null===(o=this.beans.sideBar)||void 0===o||null===(o=o.comp)||void 0===o||o.setState(e.sideBar));this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,i,o){this.setColumnState(e,t,i,o),this.setColumnGroupState(e,t,o),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const i=e=>()=>this.updateColumnState([e]);this.addManagedEventListeners({columnValueChanged:i("aggregation"),columnMoved:i("columnOrder"),columnPinned:i("columnPinning"),columnResized:i("columnSizing"),columnVisible:i("columnVisibility"),columnPivotChanged:i("pivot"),columnPivotModeChanged:i("pivot"),columnRowGroupChanged:i("rowGroup"),sortChanged:i("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,i){const{filter:o,rowGroupExpansion:n,ssrmRowGroupExpansion:s,rowSelection:r,pagination:a,rowPinning:l}=e,d=(e,o)=>!(null!==i&&void 0!==i&&i.has(e))&&(o||"api"===t);d("filter",o)&&this.setFilterState(o),d("rowGroupExpansion",n)&&this.setRowGroupExpansionState(s,n,t),d("rowSelection",r)&&this.setRowSelectionState(r,t),d("pagination",a)&&this.setPaginationState(a,t),d("rowPinning",l)&&this.setRowPinningState(l);const c=this.updateCachedState.bind(this);c("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(c("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),c("rowGroupExpansion",void 0)):(c("rowGroupExpansion",this.getRowGroupExpansionState()),c("ssrmRowGroupExpansion",void 0)),c("rowSelection",this.getRowSelectionState()),c("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),i=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},o=()=>t("filter",this.getFilterState()),{gos:n,colFilter:s,selectableFilter:r}=this.beans;this.addManagedEventListeners({filterChanged:o,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:i,columnRowGroupChanged:i,rowDataUpdated:()=>{(0!==n.get("groupDefaultExpanded")||n.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(i)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&t("pagination",this.getPaginationState())},pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())}),s&&this.addManagedListeners(s,{filterStateChanged:o}),r&&this.addManagedListeners(r,{selectedFilterChanged:o})}setFirstDataRenderedState(e,t,i){const{scroll:o,cellSelection:n,focusedCell:s,columnOrder:r}=e,a=(e,o)=>!(null!==i&&void 0!==i&&i.has(e))&&(o||"api"===t);a("focusedCell",s)&&this.setFocusedCellState(s),a("cellSelection",n)&&this.setCellSelectionState(n),a("scroll",o)&&this.setScrollState(o),this.setColumnPivotState(!(null===r||void 0===r||!r.orderedColIds),t);const l=this.updateCachedState.bind(this);l("sideBar",this.getSideBarState()),l("focusedCell",this.getFocusedCellState());const d=this.getRangeSelectionState();l("rangeSelection",d),l("cellSelection",d),l("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this),i=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:i,cellFocusCleared:i,cellSelectionChanged:e=>{if(e.finished){const e=this.getRangeSelectionState();t("rangeSelection",e),t("cellSelection",e)}},bodyScrollEnd:()=>t("scroll",this.getScrollState())})}getColumnState(){const e=this.beans;return function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=[],o=[],n=[],s=[],r=[],a=[],l=[],d=[],c=[];let u=0;for(let h=0;h<e.length;h++){const{colId:t,sort:p,sortType:g,sortIndex:v,rowGroup:m,rowGroupIndex:f,aggFunc:C,pivot:w,pivotIndex:b,pinned:y,hide:S,width:x,flex:F}=e[h];c.push(t),p&&(i[null!==v&&void 0!==v?v:u++]={colId:t,sort:p,type:g}),m&&(o[null!==f&&void 0!==f?f:0]=t),"string"===typeof C&&n.push({colId:t,aggFunc:C}),w&&(s[null!==b&&void 0!==b?b:0]=t),y&&("right"===y?a:r).push(t),S&&l.push(t),(null!=F||x)&&d.push({colId:t,flex:null!==F&&void 0!==F?F:void 0,width:null===x?void 0:x})}return{sort:i.length?{sortModel:Bv(i)}:void 0,rowGroup:o.length?{groupColIds:Bv(o)}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:s.length||t?{pivotMode:t,pivotColIds:Bv(s)}:void 0,columnPinning:r.length||a.length?{leftColIds:r,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:d.length?{columnSizingModel:d}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}(wn(e),e.colModel.isPivotMode())}setColumnState(e,t,i,o){const{sort:n,rowGroup:s,aggregation:r,pivot:a,columnPinning:l,columnVisibility:d,columnSizing:c,columnOrder:u}=e;let h=!1;const p=(e,i)=>{const n=!(null!==o&&void 0!==o&&o.has(e))&&!(!i&&"api"!==t);return h||(h=n),n},g={},v=e=>{let t=g[e];return t||(t={colId:e},g[e]=t,t)},m={},f=p("sort",n);f&&(null===n||void 0===n||n.sortModel.forEach((e,t)=>{let{colId:i,sort:o}=e;const n=v(i);n.sort=o,n.sortIndex=t})),!f&&i||(m.sort=null,m.sortIndex=null);const C=p("rowGroup",s);C&&(null===s||void 0===s||s.groupColIds.forEach((e,t)=>{const i=v(e);i.rowGroup=!0,i.rowGroupIndex=t})),!C&&i||(m.rowGroup=null,m.rowGroupIndex=null);const w=p("aggregation",r);w&&(null===r||void 0===r||r.aggregationModel.forEach(e=>{let{colId:t,aggFunc:i}=e;v(t).aggFunc=i})),!w&&i||(m.aggFunc=null);const b=p("pivot",a);b&&(null===a||void 0===a||a.pivotColIds.forEach((e,t)=>{const i=v(e);i.pivot=!0,i.pivotIndex=t}),this.gos.updateGridOptions({options:{pivotMode:!(null===a||void 0===a||!a.pivotMode)},source:t})),!b&&i||(m.pivot=null,m.pivotIndex=null);const y=p("columnPinning",l);if(y){for(const e of null!==(S=null===l||void 0===l?void 0:l.leftColIds)&&void 0!==S?S:[]){var S;v(e).pinned="left"}for(const e of null!==(x=null===l||void 0===l?void 0:l.rightColIds)&&void 0!==x?x:[]){var x;v(e).pinned="right"}}!y&&i||(m.pinned=null);const F=p("columnVisibility",d);if(F)for(const T of null!==(R=null===d||void 0===d?void 0:d.hiddenColIds)&&void 0!==R?R:[]){var R;v(T).hide=!0}!F&&i||(m.hide=null);const P=p("columnSizing",c);if(P)for(const{colId:T,flex:k,width:I}of null!==(D=null===c||void 0===c?void 0:c.columnSizingModel)&&void 0!==D?D:[]){var D;const e=v(T);e.flex=null!==k&&void 0!==k?k:null,e.width=I}!P&&i||(m.flex=null);const E=null===u||void 0===u?void 0:u.orderedColIds,A=!(null===E||void 0===E||!E.length)&&!(null!==o&&void 0!==o&&o.has("columnOrder")),M=A?E.map(e=>v(e)):Object.values(g);(M.length||h)&&(this.columnStates=M,mn(this.beans,{state:M,applyOrder:A,defaultState:m},t))}setColumnPivotState(e,t){const i=this.columnStates;this.columnStates=void 0;const o=this.columnGroupStates;this.columnGroupStates=void 0;const n=this.beans,{pivotResultCols:s,colGroupSvc:r}=n;if(null!==s&&void 0!==s&&s.isPivotResultColsPresent()){if(i){const o=[];for(const e of i)s.getPivotResultCol(e.colId)&&o.push(e);mn(n,{state:o,applyOrder:e},t)}o&&(null===r||void 0===r||r.setColumnGroupState(o,t))}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;return Vv(e.getColumnGroupState())}setColumnGroupState(e,t,i){var o;const n=this.beans.colGroupSvc;if(!n||null!==i&&void 0!==i&&i.has("columnGroup")||"api"!==t&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const s=new Set(null===(o=e.columnGroup)||void 0===o?void 0:o.openColumnGroupIds),r=n.getColumnGroupState().map(e=>{let{groupId:t}=e;const i=s.has(t);return i&&s.delete(t),{groupId:t,open:i}});for(const a of s)r.push({groupId:a,open:!0});r.length&&(this.columnGroupStates=r),n.setColumnGroupState(r,t)}getFilterState(){var e;const{filterManager:t,selectableFilter:i}=this.beans;let o=null===t||void 0===t?void 0:t.getFilterModel();o&&0===Object.keys(o).length&&(o=void 0);const n=null===t||void 0===t?void 0:t.getFilterState(),s=null!==(e=null===t||void 0===t?void 0:t.getAdvFilterModel())&&void 0!==e?e:void 0,r=null===i||void 0===i?void 0:i.getState();return o||s||n||r?{filterModel:o,columnFilterState:n,advancedFilterModel:s,selectableFilters:r}:void 0}setFilterState(e){const{filterManager:t,selectableFilter:i}=this.beans,{filterModel:o,columnFilterState:n,advancedFilterModel:s,selectableFilters:r}=null!==e&&void 0!==e?e:{filterModel:null,columnFilterState:null,advancedFilterModel:null};void 0!==r&&(null===i||void 0===i||i.setState(null!==r&&void 0!==r?r:{})),void 0===o&&void 0===n||null===t||void 0===t||t.setFilterState(null!==o&&void 0!==o?o:null,null!==n&&void 0!==n?n:null,"columnFilter"),void 0!==s&&(null===t||void 0===t||t.setAdvFilterModel(null!==s&&void 0!==s?s:null,"advancedFilter"))}getRangeSelectionState(){var e;const t=null===(e=this.beans.rangeSvc)||void 0===e?void 0:e.getCellRanges().map(e=>{const{id:t,type:i,startRow:o,endRow:n,columns:s,startColumn:r}=e;return{id:t,type:i,startRow:o,endRow:n,colIds:s.map(e=>e.getColId()),startColId:r.getColId()}});return null!==t&&void 0!==t&&t.length?{cellRanges:t}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:i,colModel:o,visibleCols:s}=this.beans;if(!zi(t)||!i)return;const r=[];for(const l of null!==(a=null===e||void 0===e?void 0:e.cellRanges)&&void 0!==a?a:[]){var a;const e=[];for(const i of l.colIds){const t=o.getCol(i);t&&e.push(t)}if(!e.length)continue;let t=o.getCol(l.startColId);if(!t){const i=s.allCols,o=new Set(e);t=i.find(e=>o.has(e))}r.push((0,n.A)((0,n.A)({},l),{},{columns:e,startColumn:t}))}i.setCellRanges(r)}getScrollState(){var e,t;if(!this.isClientSideRowModel)return;const i=this.beans.ctrlsSvc.getScrollFeature(),{left:o}=null!==(e=null===i||void 0===i?void 0:i.getHScrollPosition())&&void 0!==e?e:{left:0},{top:n}=null!==(t=null===i||void 0===i?void 0:i.getVScrollPosition())&&void 0!==t?t:{top:0};return n||o?{top:n,left:o}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=null!==e&&void 0!==e?e:{top:0,left:0},{frameworkOverrides:o,rowRenderer:n,animationFrameSvc:s,ctrlsSvc:r}=this.beans;o.wrapIncoming(()=>{var e;r.get("center").setCenterViewportScrollLeft(i),null===(e=r.getScrollFeature())||void 0===e||e.setVerticalScrollPosition(t),n.redraw({afterScroll:!0}),null===s||void 0===s||s.flushAllFrames()})}getSideBarState(){var e;return null===(e=this.beans.sideBar)||void 0===e||null===(e=e.comp)||void 0===e?void 0:e.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:o}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:o}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:i}=this.beans;if(!e)return void t.clearFocusedCell();const{colId:o,rowIndex:n,rowPinned:s}=e;t.setFocusedCell({column:i.getCol(o),rowIndex:n,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const i=e.getCurrentPage(),o=t.get("paginationAutoPageSize")?void 0:e.getPageSize();return i||o?{page:i,pageSize:o}:void 0}setPaginationState(e,t){const{pagination:i,gos:o}=this.beans;if(!i)return;const{pageSize:n,page:s}=null!==e&&void 0!==e?e:{page:0,pageSize:o.get("paginationPageSize")},r="gridInitializing"===t;n&&!o.get("paginationAutoPageSize")&&i.setPageSize(n,r?"initialState":"pageSizeSelector"),"number"===typeof s&&(r?i.setPage(s):i.goToPage(s))}getRowSelectionState(){var e;const t=this.beans.selectionSvc;if(!t)return;const i=t.getSelectionState();return!i||!Array.isArray(i)&&(!1===i.selectAll||!1===i.selectAllChildren)&&!(null!==i&&void 0!==i&&null!==(e=i.toggledNodes)&&void 0!==e&&e.length)?void 0:i}setRowSelectionState(e,t){var i;null===(i=this.beans.selectionSvc)||void 0===i||i.setSelectionState(e,t,"api"===t)}getRowGroupExpansionState(){const{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){var e;return null===(e=this.beans.pinnedRowModel)||void 0===e?void 0:e.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?null===t||void 0===t||t.setPinnedState(e):null===t||void 0===t||t.reset()}setRowGroupExpansionState(e,t,i){const o=this.beans.expansionSvc;if(!o)return;const n=null!==t&&void 0!==t?t:{expandedRowGroupIds:[],collapsedRowGroupIds:[]};o.setExpansionState(n,i)}updateColumnState(e){const t=this.getColumnState();let i=!1;const o=this.cachedState;for(const n of Object.keys(t)){C(t[n],o[n])||(i=!0)}this.cachedState=(0,n.A)((0,n.A)({},o),t),i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),C(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=(0,n.A)((0,n.A)({},this.cachedState),{},{[e]:t})}refreshStaleState(){const e=this.staleStateKeys;for(const t of e)"rowSelection"===t&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(const t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){var e;this.suppressEvents=!0,null===(e=this.beans.colAnimation)||void 0===e||e.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{var t;this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(null===(t=this.beans.colAnimation)||void 0===t||t.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}}],apiFunctions:{getState:function(e){var t,i;return null!==(t=null===(i=e.stateSvc)||void 0===i?void 0:i.getState())&&void 0!==t?t:{}},setState:function(e,t,i){var o;return null===(o=e.stateSvc)||void 0===o?void 0:o.setState(t,i)}}};var zC="paginationPageSizeSelector",WC={tag:"span",cls:"ag-paging-page-size"},UC={selector:"AG-PAGE-SIZE-SELECTOR",component:class extends Tn{constructor(){super(WC),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(zC,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||null===e||void 0===e||!e.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Re(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(zC)}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),i=!t||!e.includes(t);if(i){const i=this.gos.exists("paginationPageSize"),o=!0!==this.gos.get(zC);oi(94,{pageSizeSet:i,pageSizesSet:o,pageSizeOptions:e,paginationPageSizeOption:t}),o||oi(95,{paginationPageSizeOption:t,paginationPageSizeSelector:zC}),e.unshift("")}const o=String(i?"":t);this.selectPageSizeComp?(Eo(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(o,!0)):this.createPageSizeSelectorComp(e,o),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(e=>({value:String(e)}))}createPageSizeSelectorComp(e,t){const i=this.getLocaleTextFunc(),o=i("pageSizeSelectorLabel","Page Size:"),n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Ar).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(o).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(zC);return Array.isArray(t)&&null!==t&&void 0!==t&&t.length?[...t].sort((e,t)=>e-t):e}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}},jC={selector:"AG-PAGINATION",component:class extends wu{constructor(){super(),this.btFirst=Pn,this.btPrevious=Pn,this.btNext=Pn,this.btLast=Pn,this.lbRecordCount=Pn,this.lbFirstRowOnPage=Pn,this.lbLastRowOnPage=Pn,this.lbCurrent=Pn,this.lbTotal=Pn,this.pageSizeComp=Pn,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}")}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[UC]);const{btFirst:t,btPrevious:i,btNext:o,btLast:n}=this;this.activateTabIndex([t,i,o,n]),t.insertAdjacentElement("afterbegin",Bc(e?"last":"first",this.beans)),i.insertAdjacentElement("afterbegin",Bc(e?"next":"previous",this.beans)),o.insertAdjacentElement("afterbegin",Bc(e?"previous":"next",this.beans)),n.insertAdjacentElement("afterbegin",Bc(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):ic(this.beans,e),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(const e of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{e.key!==us.ENTER&&e.key!==us.SPACE||(e.preventDefault(),i())}})}tc(this.beans,this,this.getGui()),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t){return t({value:e})}return Uv(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t="ag-".concat(this.getCompId());return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:"".concat(t)},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:"".concat(t,"-first-row")}},{tag:"span",attrs:{id:"".concat(t,"-to")},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:"".concat(t,"-last-row")}},{tag:"span",attrs:{id:"".concat(t,"-of")},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:"".concat(t,"-row-count")}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:"".concat(t,"-start-page")},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:"".concat(t,"-start-page-number")}},{tag:"span",attrs:{id:"".concat(t,"-of-page")},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:"".concat(t,"-of-page-number")}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const o=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||o,this.lastButtonDisabled=!t||o||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){U(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&0===t}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),i=this.pagination.getMasterRowCount(),o=e?i:null,n=this.pagination.getCurrentPage(),s=this.pagination.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=s*n+1,a=r+s-1,e&&a>o&&(a=o));const l=!e&&i<r+s-1,d=this.formatNumber(r);let c;this.lbFirstRowOnPage.textContent=d;const u=this.getLocaleTextFunc();c=l?u("pageLastRowUnknown","?"):this.formatNumber(a),this.lbLastRowOnPage.textContent=c;const h=t>0?n+1:0,p=this.formatNumber(h);let g,v;if(this.lbCurrent.textContent=p,e)g=this.formatNumber(t),v=this.formatNumber(o);else{const e=u("more","more");g=e,v=e}this.lbTotal.textContent=g,this.lbRecordCount.textContent=v,this.announceAriaStatus(d,c,v,p,g)}announceAriaStatus(e,t,i,o,n){const s=this.getLocaleTextFunc(),r=s("page","Page"),a=s("to","to"),l=s("of","of"),d="".concat(e," ").concat(a," ").concat(t," ").concat(l," ").concat(i),c="".concat(r," ").concat(o," ").concat(l," ").concat(n);var u,h;d!==this.ariaRowStatus&&(this.ariaRowStatus=d,null===(u=this.ariaAnnounce)||void 0===u||u.announceValue(d,"paginationRow"));c!==this.ariaPageStatus&&(this.ariaPageStatus=c,null===(h=this.ariaAnnounce)||void 0===h||h.announceValue(c,"paginationPage"))}}},_C={moduleName:"Pagination",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return jC}isPaginateChildRows(){const e=this.gos;return!!(e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren"))||e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||"number"!==typeof t)return;const{editSvc:i}=this.beans;null!==i&&void 0!==i&&i.isEditing()&&(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;var i,o,n;this.paginateChildRows||(t=null!==(i=null===(o=(n=this.beans.rowModel).getTopLevelIndexFromDisplayedIndex)||void 0===o?void 0:o.call(n,e))&&void 0!==i?i:e);this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return!this.active||e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return v(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:v(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:v(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:v(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0)return void this.setZeroRows();const i=this.pageSize,o=t-1;this.totalPages=Math.floor(o/i)+1,this.adjustCurrentPageIfInvalid();const n=this.currentPage,s=i*n;let r=i*(n+1)-1;if(r>o&&(r=o),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(s),r===o)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const t=e.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=t-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,0===e)return void this.setZeroRows();const{pageSize:t,currentPage:i}=this,o=e-1;this.totalPages=Math.floor(o/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*i,this.bottomDisplayedRowIndex=t*(i+1)-1,this.bottomDisplayedRowIndex>o&&(this.bottomDisplayedRowIndex=o)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:o=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:o,keepRenderedRows:t})}},class extends ht{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,i=()=>{const i=Math.max(Ci(t),1),o=Math.floor(e/i);t.pagination.setPageSize(o,"autoCalculated")};this.isBodyRendered?Ct(this,i,50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:function(e){return e.rowModel.isLastRowIndexKnown()},paginationGetPageSize:function(e){var t,i;return null!==(t=null===(i=e.pagination)||void 0===i?void 0:i.getPageSize())&&void 0!==t?t:100},paginationGetCurrentPage:function(e){var t,i;return null!==(t=null===(i=e.pagination)||void 0===i?void 0:i.getCurrentPage())&&void 0!==t?t:0},paginationGetTotalPages:function(e){var t,i;return null!==(t=null===(i=e.pagination)||void 0===i?void 0:i.getTotalPages())&&void 0!==t?t:1},paginationGetRowCount:function(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()},paginationGoToNextPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToNextPage()},paginationGoToPreviousPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToPreviousPage()},paginationGoToFirstPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToFirstPage()},paginationGoToLastPage:function(e){var t;null===(t=e.pagination)||void 0===t||t.goToLastPage()},paginationGoToPage:function(e,t){var i;null===(i=e.pagination)||void 0===i||i.goToPage(t)}},dependsOn:[am]};var KC={moduleName:"RowApi",version:Kt,apiFunctions:{redrawRows:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))},setRowNodeExpanded:function e(t,i,o,n,s){i&&(n&&i.parent&&-1!==i.parent.level&&e(t,i.parent,o,n,s),i.setExpanded(o,void 0,s))},getRowNode:function(e,t){return e.rowModel.getRowNode(t)},addRenderedRowListener:function(e,t,i,o){e.rowRenderer.addRenderedRowListener(t,i,o)},getRenderedNodes:function(e){return e.rowRenderer.getRenderedNodes()},forEachNode:function(e,t,i){e.rowModel.forEachNode(t,i)},getFirstDisplayedRowIndex:function(e){return e.rowRenderer.firstRenderedRow},getLastDisplayedRowIndex:function(e){return e.rowRenderer.lastRenderedRow},getDisplayedRowAtIndex:function(e,t){return e.rowModel.getRow(t)},getDisplayedRowCount:function(e){return e.rowModel.getRowCount()}}},YC={moduleName:"ScrollApi",version:Kt,apiFunctions:{getVerticalPixelRange:function(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()},getHorizontalPixelRange:function(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()},ensureColumnVisible:Rf,ensureIndexVisible:Pf,ensureNodeVisible:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}}};var qC={moduleName:"RenderApi",version:Kt,apiFunctions:{setGridAriaProperty:function(e,t,i){if(!t)return;const o=e.ctrlsSvc.getGridBodyCtrl().eGridBody,n="aria-".concat(t);null===i?o.removeAttribute(n):o.setAttribute(n,i)},refreshCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))},refreshHeader:function(e){e.frameworkOverrides.wrapIncoming(()=>{for(const t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})},isAnimationFrameQueueEmpty:function(e){var t,i;return null===(t=null===(i=e.animationFrameSvc)||void 0===i?void 0:i.isQueueEmpty())||void 0===t||t},flushAllAnimationFrames:function(e){var t;null===(t=e.animationFrameSvc)||void 0===t||t.flushAllFrames()},getSizesForCurrentTheme:function(e){return{rowHeight:Ci(e),headerHeight:hc(e)}},getCellRendererInstances:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=[];for(const r of e.rowRenderer.getCellCtrls(i.rowNodes,i.columns)){const e=r.getCellRenderer();null!=e&&o.push(ds(e))}if(null!==(t=i.columns)&&void 0!==t&&t.length)return o;const n=[],s=nv(i.rowNodes);for(const r of e.rowRenderer.getAllRowCtrls()){if(s&&!sv(r.rowNode,s))continue;if(!r.isFullWidth())continue;const e=r.getFullWidthCellRenderers();for(let t=0;t<e.length;t++){const i=e[t];null!=i&&n.push(ds(i))}}return[...n,...o]}}};function QC(e,t,i){let{colAutosize:o,visibleCols:s}=e;var r;Array.isArray(t)?null===o||void 0===o||o.autoSizeCols({colKeys:t,skipHeader:i,source:"api"}):null===o||void 0===o||o.autoSizeCols((0,n.A)((0,n.A)({},t),{},{colKeys:null!==(r=t.colIds)&&void 0!==r?r:s.allCols,source:"api"}))}function XC(e,t){var i,o;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=null!==(i=n.minWidth)&&void 0!==i?i:e.getMinWidth();t<s&&(t=s);const r=null!==(o=n.maxWidth)&&void 0!==o?o:e.getMaxWidth();return t>r&&(t=r),t}function $C(e){let{ctrlsSvc:t,scrollVisibleSvc:i}=e;const o=t.getGridBodyCtrl(),n=o.isVerticalScrollShowing()?i.getScrollbarWidth():0;return we(o.eGridBody)-n}var ZC="ag-animate-autosize";function JC(e,t){let{ctrlsSvc:i,gos:o}=e;if(!o.get("animateColumnResizing")||o.get("enableRtl")||!i.isAlive())return;const n=i.getGridBodyCtrl().eGridBody.classList;t?n.add(ZC):n.remove(ZC)}var ew={moduleName:"ColumnAutoSize",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){const{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let o=!1;const n=t.type;if("fitGridWidth"===n||"fitProvidedWidth"===n)o=!0;else if("fitCellContents"===n){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});const i=e.get("rowData");o=null!=i&&i.length>0&&ui(e)}var i;if(o)null===(i=this.beans.colDelayRenderSvc)||void 0===i||i.hideColumns(n)}}autoSizeCols(e){const{eventSvc:t,visibleCols:i,colModel:o}=this.beans;JC(this.beans,!0),this.innerAutoSizeCols(e).then(s=>{var r;const a=e=>vn(t,Array.from(e),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return JC(this.beans,!1),a(s);const l=$C(this.beans),d=e.colKeys.filter(e=>{var t;return!(null!==(t=o.getCol(e))&&void 0!==t&&t.getColDef().suppressAutoSize)&&!Uo(e)&&!(e=>i.leftCols.some(t=>Qo(t,e)))(e)&&!(e=>i.rightCols.some(t=>Qo(t,e)))(e)});this.sizeColumnsToFit(l,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:null===(r=e.columnLimits)||void 0===r?void 0:r.map(e=>(0,n.A)((0,n.A)({},e),{},{key:e.colId})),colKeys:d,onlyScaleUp:!0,animate:!1}),JC(this.beans,!1),a(s)})}innerAutoSizeCols(e){return new Promise((t,i)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,i));const{colKeys:n,skipHeader:s,skipHeaderGroups:r,stopAtGroup:a,defaultMaxWidth:d,defaultMinWidth:c,columnLimits:u=[],source:h="api"}=e,{animationFrameSvc:p,renderStatus:g,colModel:v,autoWidthCalc:m,visibleCols:f}=this.beans;if(null===p||void 0===p||p.flushAllFrames(),this.timesDelayed<5&&g&&(!g.areHeaderCellsRendered()||!g.areCellsRendered()))return this.timesDelayed++,void setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,i)});this.timesDelayed=0;const C=new Set;let w=-1;const b=Object.fromEntries(u.map(e=>{let{colId:t}=e;return[t,(0,o.A)(e,l)]})),y=null!==s&&void 0!==s?s:this.gos.get("skipHeaderOnAutoSize"),S=null!==r&&void 0!==r?r:y;for(;0!==w;){w=0;const e=[];for(const t of n){if(!t||jo(t))continue;const i=v.getCol(t);if(!i||C.has(i)||i.getColDef().suppressAutoSize)continue;const o=m.getPreferredWidthForColumn(i,y);if(o>0){var x,F,R;const e=null!==(x=b[i.colId])&&void 0!==x?x:{};null!==(F=e.minWidth)&&void 0!==F||(e.minWidth=c),null!==(R=e.maxWidth)&&void 0!==R||(e.maxWidth=d);const t=XC(i,o,e);i.setActualWidth(t,h),C.add(i),w++}e.push(i)}e.length&&f.refresh(h)}S||this.autoSizeColumnGroupsByColumns(n,h,a),t(C)})}autoSizeColumn(e,t,i){this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const{colModel:o,ctrlsSvc:n}=this.beans,s=new Set,r=o.getColsForKeys(e);for(const d of r){let e=d.getParent();for(;e&&e!=i;)e.isPadding()||s.add(e),e=e.getParent()}let a;for(const d of s){var l;for(const e of n.getHeaderRowContainerCtrls())if(a=e.getHeaderCtrlForColumn(d),a)break;null===(l=a)||void 0===l||l.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){this.shouldQueueResizeOperations?this.pushResizeOperation(()=>this.autoSizeAllColumns(e)):this.autoSizeCols((0,n.A)({colKeys:this.beans.visibleCols.allCols},e))}addColumnAutosizeListeners(e,t){const i=this.gos.get("skipHeaderOnAutoSize"),o=()=>{this.autoSizeColumn(t,"uiColumnResized",i)};e.addEventListener("dblclick",o);const n=new yu(e);return n.addEventListener("doubleTap",o),()=>{e.removeEventListener("dblclick",o),n.destroy()}}addColumnGroupResize(e,t,i){const o=this.gos.get("skipHeaderOnAutoSize"),n=()=>{const e=[],n=t.getDisplayedLeafColumns();for(const t of n)t.getColDef().suppressAutoSize||e.push(t.getColId());e.length>0&&this.autoSizeCols({colKeys:e,skipHeader:o,stopAtGroup:t,source:"uiColumnResized"}),i()};return e.addEventListener("dblclick",n),()=>e.removeEventListener("dblclick",n)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const i=$C(this.beans);i>0?this.sizeColumnsToFit(i,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):100===t?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):500===t?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):oi(29)}sizeColumnsToFit(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sizeColumnsToFit",n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(this.shouldQueueResizeOperations)return void this.pushResizeOperation(()=>this.sizeColumnsToFit(e,i,n,s));const{beans:r}=this,a=null===(t=null===s||void 0===s?void 0:s.animate)||void 0===t||t;a&&JC(r,!0);const l={};for(const E of null!==(c=null===s||void 0===s?void 0:s.columnLimits)&&void 0!==c?c:[]){var c;const{key:e}=E,t=(0,o.A)(E,d);l["string"===typeof e?e:e.getColId()]=t}const u=r.visibleCols.allCols;if(e<=0||!u.length)return;const h=Vo(u);if(null!==s&&void 0!==s&&s.onlyScaleUp&&h>e)return;if(e===h){if(u.every(e=>{var t,i;if(e.colDef.suppressSizeToFit)return!0;const o=null===l||void 0===l?void 0:l[e.getId()],n=null!==(t=null===o||void 0===o?void 0:o.minWidth)&&void 0!==t?t:null===s||void 0===s?void 0:s.defaultMinWidth,r=null!==(i=null===o||void 0===o?void 0:o.maxWidth)&&void 0!==i?i:null===s||void 0===s?void 0:s.defaultMaxWidth,a=e.getActualWidth();return(null==n||a>=n)&&(null==r||a<=r)}))return}const p=[],g=[];for(const o of u){var v,m;const e=null===(v=null===s||void 0===s||null===(m=s.colKeys)||void 0===m?void 0:m.some(e=>Qo(o,e)))||void 0===v||v;o.getColDef().suppressSizeToFit||!e?g.push(o):p.push(o)}const f=p.slice(0);let C=!1;const w=e=>{Mo(p,e),g.push(e)};for(const o of p){var b,y;o.resetActualWidth(i);const e=null===l||void 0===l?void 0:l[o.getId()],t=null!==(b=null===e||void 0===e?void 0:e.minWidth)&&void 0!==b?b:null===s||void 0===s?void 0:s.defaultMinWidth,n=null!==(y=null===e||void 0===e?void 0:e.maxWidth)&&void 0!==y?y:null===s||void 0===s?void 0:s.defaultMaxWidth,r=o.getActualWidth();"number"===typeof t&&r<t?o.setActualWidth(t,i,!0):"number"===typeof n&&r>n&&o.setActualWidth(n,i,!0)}for(;!C;){C=!0;const t=e-Vo(g);if(t<=0)for(const e of p){var S,x,F;const t=null!==(S=null!==(x=null===l||void 0===l||null===(F=l[e.getId()])||void 0===F?void 0:F.minWidth)&&void 0!==x?x:null===s||void 0===s?void 0:s.defaultMinWidth)&&void 0!==S?S:e.minWidth;e.setActualWidth(t,i,!0)}else{const e=t/Vo(p);let o=t;for(let t=p.length-1;t>=0;t--){var R,P;const n=p[t],r=null===l||void 0===l?void 0:l[n.getId()],a=null!==(R=null===r||void 0===r?void 0:r.minWidth)&&void 0!==R?R:null===s||void 0===s?void 0:s.defaultMinWidth,d=null!==(P=null===r||void 0===r?void 0:r.maxWidth)&&void 0!==P?P:null===s||void 0===s?void 0:s.defaultMaxWidth,c=n.getMinWidth(),u=n.getMaxWidth(),h="number"===typeof a&&a>c?a:c,g="number"===typeof d&&d<u?d:u;let v=Math.round(n.getActualWidth()*e);v<h?(v=h,w(n),C=!1):v>g?(v=g,w(n),C=!1):0===t&&(v=o),n.setActualWidth(v,i,!0),o-=v}}}for(const o of f)o.fireColumnWidthChangedEvent(i);const D=r.visibleCols;D.setLeftValues(i),D.updateBodyWidths(),n||(vn(this.eventSvc,f,!0,i),a&&JC(r,!1))}applyAutosizeStrategy(){const{gos:e,colDelayRenderSvc:t}=this.beans,i=e.get("autoSizeStrategy");"fitGridWidth"!==(null===i||void 0===i?void 0:i.type)&&"fitProvidedWidth"!==(null===i||void 0===i?void 0:i.type)||setTimeout(()=>{if(!this.isAlive())return;const e=i.type;if("fitGridWidth"===e){const{columnLimits:e,defaultMinWidth:t,defaultMaxWidth:o}=i,n=null===e||void 0===e?void 0:e.map(e=>{let{colId:t,minWidth:i,maxWidth:o}=e;return{key:t,minWidth:i,maxWidth:o}});this.sizeColumnsToFitGridBody({defaultMinWidth:t,defaultMaxWidth:o,columnLimits:n})}else"fitProvidedWidth"===e&&this.sizeColumnsToFit(i.width,"sizeColumnsToFit");null===t||void 0===t||t.revealColumns(e)})}onFirstDataRendered(e){let{colIds:t}=e,i=(0,o.A)(e,c);setTimeout(()=>{var e;if(!this.isAlive())return;const o="autosizeColumns";t?this.autoSizeCols((0,n.A)((0,n.A)({},i),{},{source:o,colKeys:t})):this.autoSizeAllColumns((0,n.A)((0,n.A)({},i),{},{source:o})),null===(e=this.beans.colDelayRenderSvc)||void 0===e||e.revealColumns(i.type)})}processResizeOperations(){this.shouldQueueResizeOperations=!1;for(const e of this.resizeOperationQueue)e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}}],apiFunctions:{sizeColumnsToFit:function(e,t){var i,o;"number"===typeof t?null===(i=e.colAutosize)||void 0===i||i.sizeColumnsToFit(t,"api"):null===(o=e.colAutosize)||void 0===o||o.sizeColumnsToFitGridBody(t)},autoSizeColumns:QC,autoSizeAllColumns:function(e,t){var i;t&&"object"===typeof t?QC(e,t):null===(i=e.colAutosize)||void 0===i||i.autoSizeAllColumns({source:"api",skipHeader:t})}},dependsOn:[bh],css:[":where(.ag-ltr) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,left .2s ease-in-out}}:where(.ag-rtl) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,right .2s ease-in-out}}"]};var tw={moduleName:"PinnedRow",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const t=e.get("enableRowPinning"),i=Pi(e),o=!!t||("pinnedBottom"===i||"pinnedTop"===i),n=o?this.inner instanceof eu:this.inner instanceof Qc;this.inner&&n&&this.destroyBean(this.inner),!n&&this.inner||(this.inner=this.createManagedBean(o?new Qc:new eu))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,i){return this.inner.pinRow(e,t,i)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}}],css:[".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}"],apiFunctions:{getPinnedTopRowCount:function(e){var t,i;return null!==(t=null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRowCount())&&void 0!==t?t:0},getPinnedBottomRowCount:function(e){var t,i;return null!==(t=null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedBottomRowCount())&&void 0!==t?t:0},getPinnedTopRow:function(e,t){var i;return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedTopRow(t)},getPinnedBottomRow:function(e,t){var i;return null===(i=e.pinnedRowModel)||void 0===i?void 0:i.getPinnedBottomRow(t)},forEachPinnedRow:function(e,t,i){var o;return null===(o=e.pinnedRowModel)||void 0===o?void 0:o.forEachPinnedRow(t,i)}},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},iw=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column===this.col&&(e.rowPinned==this.firstNode.rowPinned&&(this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex))}getLastNodeAutoHeight(){var e;const t=null===(e=this.firstNode.__autoHeights)||void 0===e?void 0:e[this.col.getColId()];if(null==t)return;let i=0;for(const o of this.spannedNodes)o!==this.lastNode&&(i+=o.rowHeight);return t-i}},ow=class extends ht{constructor(e){super(),this.column=e}buildCache(e){var t;const{column:i,beans:{gos:o,pinnedRowModel:n,rowModel:s,valueSvc:r,pagination:a}}=this,{colDef:l}=i,d=this.getNodeMap(e),c=new Map,u=o.getCallback("isFullWidthRow"),h=l.equals,p=l.spanRows,g="function"===typeof p;let v,m=null,f=null;const C=(e,t)=>{m=e,f=null,v=t},w=e=>{var t;const n=!e.isExpandable()&&!e.group&&!e.detail&&(!u||!u({rowNode:e}));if(null==e.rowIndex||!n)return void C(null,null);if(null==m||e.level!==m.level||e.footer||f&&e.rowIndex-1!==(null===(t=f)||void 0===t?void 0:t.getLastNode().rowIndex))return void C(e,r.getValue(i,e));const s=r.getValue(i,e);if(g){const t=oo(o,{valueA:v,nodeA:m,valueB:s,nodeB:e,column:i,colDef:l});if(!p(t))return void C(e,s)}else if(h?!h(v,s):v!==s)return void C(e,s);if(!f){const e=null===d||void 0===d?void 0:d.get(m);(null===e||void 0===e?void 0:e.firstNode)===m?(e.reset(),f=e):f=new iw(i,m),c.set(m,f)}f.addSpannedNode(e),c.set(e,f)};switch(e){case"center":null===(t=s.forEachDisplayedNode)||void 0===t||t.call(s,e=>{(!a||a.isRowInPage(e.rowIndex))&&w(e)}),this.centerValueNodeMap=c;break;case"top":null===n||void 0===n||n.forEachPinnedRow("top",w),this.topValueNodeMap=c;break;case"bottom":null===n||void 0===n||n.forEachPinnedRow("bottom",w),this.bottomValueNodeMap=c}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},nw=class extends Ig{constructor(e,t,i){super(e.col,e.firstNode,i,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,i,o,n,s,r){this.eWrapper=i,super.setComp(e,t,i,o,n,s,r),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){const{eGui:e,rowNode:t}=this;e&&null!=t.rowIndex&&$(e,t.rowIndex)}setAriaRowSpan(){var e,t;e=this.eGui,t=this.cellSpan.spannedNodes.size,k(e,"rowspan",t)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){var e;return null!==(e=this.focusedCellPosition)&&void 0!==e?e:this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(nc(t))return void(this.focusedCellPosition=void 0);const i=this.isCellFocused();i||(this.focusedCellPosition=void 0),e&&i&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},sw=class extends Gg{onRowIndexChanged(){super.onRowIndexChanged();for(const e of this.getAllCellCtrls())e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){var t;const i=null===(t=this.beans.rowSpanSvc)||void 0===t?void 0:t.getCellSpan(e,this.rowNode);if(!i)return;return i.firstNode!==this.rowNode?void 0:new nw(i,this,this.beans)}isCorrectCtrlForSpan(e){var t;const i=null===(t=this.beans.rowSpanSvc)||void 0===t?void 0:t.getCellSpan(e.column,this.rowNode);if(!i)return!1;return!(i.firstNode!==this.rowNode)&&e.getCellSpan()===i}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},rw={moduleName:"CellSpan",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=Ct(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=Ct(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan"))return;if(this.spanningColumns.has(e))return;const i=this.createManagedBean(new ow(e));this.spanningColumns.set(e,i),i.buildCache("top"),i.buildCache("bottom"),i.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated(e){let{node:t}=e;const{spannedRowRenderer:i}=this.beans;if(t.rowPinned){if(null!=this.pinnedTimeout)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),null===i||void 0===i||i.createCtrls("top"),null===i||void 0===i||i.createCtrls("bottom")},0)}else null==this.modelTimeout&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),null===i||void 0===i||i.createCtrls("center")},0))}buildModelCaches(){null!=this.modelTimeout&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){null!=this.pinnedTimeout&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const i=this.spanningColumns.get(e);return!!i&&i.isCellSpanning(t)}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:i}=this.beans,o=e.column,n=e.rowIndex,s=this.spanningColumns.get(o);if(!s)return;let r;switch(e.rowPinned){case"top":r=null===t||void 0===t?void 0:t.getPinnedTopRow(n);break;case"bottom":r=null===t||void 0===t?void 0:t.getPinnedBottomRow(n);break;default:r=i.getRow(n)}return r?s.getCellSpan(r):void 0}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?(0,n.A)((0,n.A)({},e),{},{rowIndex:t.firstNode.rowIndex}):e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?(0,n.A)((0,n.A)({},e),{},{rowIndex:t.getLastNode().rowIndex}):e}getCellSpan(e,t){const i=this.spanningColumns.get(e);if(i)return i.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[i,o]of this.spanningColumns)if(o.isCellSpanning(e)){t(i,o.getCellSpan(e))}}destroy(){super.destroy(),this.spanningColumns.clear()}},class extends ht{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,i=this.getCtrlsMap(e),o=i.size,n=this.getAllRelevantRowControls(e),s=new Map;let r=!1;for(const l of n)l.isAlive()&&(null===t||void 0===t||t.forEachSpannedColumn(l.rowNode,(e,t)=>{if(s.has(t.firstNode))return;const o=i.get(t.firstNode);if(o)return s.set(t.firstNode,o),void i.delete(t.firstNode);r=!0;const n=new sw(t.firstNode,this.beans,!1,!1,!1);s.set(t.firstNode,n)}));this.setCtrlsMap(e,s);const a=s.size===o;if(r||!a){for(const e of i.values())e.destroyFirstPass(!0),e.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,i=null===t||void 0===t?void 0:t.getCellSpanByPosition(e);if(!i)return;const o=this.getCtrlsMap(e.rowPinned).get(i.firstNode);return o?o.getAllCellCtrls().find(t=>t.column===e.column):void 0}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(const t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}}]},aw=class extends ht{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,i=e.colDef,o=i.cellClassRules,n=this.getCellClassParams(e,i);Lg(this.beans.expressionSvc,o===this.cellClassRules?void 0:this.cellClassRules,o,n,e=>t.toggleCss(e,!0),e=>t.toggleCss(e,!1)),this.cellClassRules=o}applyUserStyles(){const e=this.column,t=e.colDef,i=t.cellStyle;if(!i)return;let o;if("function"===typeof i){o=i(this.getCellClassParams(e,t))}else o=i;o&&this.cellComp.setUserStyles(o)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,i=e.colDef,o=this.getCellClassParams(e,i);for(const s of this.staticClasses)t.toggleCss(s,!1);const n=this.beans.cellStyles.getStaticCellClasses(i,o);this.staticClasses=n;for(const s of n)t.toggleCss(s,!0)}getCellClassParams(e,t){const{value:i,rowNode:o}=this.cellCtrl;return oo(this.beans.gos,{value:i,data:o.data,node:o,colDef:t,column:e,rowIndex:o.rowIndex})}},lw={moduleName:"CellStyle",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,o){Lg(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,o),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let o;if("function"===typeof i){o=i(t)}else o=i;return"string"===typeof o&&(o=[o]),o||[]}createCellCustomStyleFeature(e){return new aw(e,this.beans)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(e=>{i(e)})}}]},dw={moduleName:"RowStyle",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const i=this.gos,o=t=>{if("string"===typeof t)e.push(t);else if(Array.isArray(t))for(const i of t)e.push(i)},n=i.get("rowClass");n&&o(n);const s=i.getCallback("getRowClass");if(s){o(s({data:t.data,node:t,rowIndex:t.rowIndex}))}}preProcessRowClassRules(e,t){this.processRowClassRules(t,t=>{e.push(t)},()=>{})}processRowClassRules(e,t,i){const{gos:o,expressionSvc:n}=this.beans,s=oo(o,{data:e.data,node:e,rowIndex:e.rowIndex});Lg(n,void 0,o.get("rowClassRules"),s,t,i)}processStylesFromGridOptions(e){const t=this.gos,i=t.get("rowStyle"),o=t.getCallback("getRowStyle");let n;if(o){n=o({data:e.data,node:e,rowIndex:e.rowIndex})}if(n||i)return Object.assign({},i,n)}}]};var cw=class extends ht{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=e=>{const{beans:t,gos:i,element:o,columns:n}=this,s=t.colHover;if(null!==e&&void 0!==e?e:!!i.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(o,{mouseover:s.setMouseOver.bind(s,n),mouseout:s.clearMouseOver.bind(s)});else{for(const e of this.destroyManagedListeners)e();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",e=>{let{currentValue:t}=e;this.enableFeature(t)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},uw={moduleName:"ColumnHover",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",e=>{let{currentValue:t}=e;t||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,i){const o=()=>{const e=this.isHovered(i);t.toggleCss("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:o}),o()}onCellColumnHover(e,t){if(!t)return;const i=this.isHovered(e);t.toggleCss("ag-column-hover",i)}addHeaderFilterColumnHoverListener(e,t,i,o){this.createHoverFeature(e,[i],o);const n=()=>{const e=this.isHovered(i);t.toggleCss("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:n}),n()}createHoverFeature(e,t,i){e.createManagedBean(new cw(t,i))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}}],apiFunctions:{isColumnHovered:function(e,t){var i;return!(null===(i=e.colHover)||void 0===i||!i.isHovered(t))}}};var hw={moduleName:"EventApi",version:Kt,apiFunctions:{addEventListener:function(e,t,i){var o;null===(o=e.apiEventSvc)||void 0===o||o.addListener(t,i)},addGlobalListener:function(e,t){var i;null===(i=e.apiEventSvc)||void 0===i||i.addGlobalListener(t)},removeEventListener:function(e,t,i){var o;null===(o=e.apiEventSvc)||void 0===o||o.removeListener(t,i)},removeGlobalListener:function(e,t){var i;null===(i=e.apiEventSvc)||void 0===i||i.removeGlobalListener(t)}},beans:[class extends ht{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){var e,t;this.wrapSvc=null===(e=(t=this.beans.frameworkOverrides).createGlobalEventListenerWrapper)||void 0===e?void 0:e.call(t)}addListener(e,t){var i,o;const n=null!==(i=null===(o=this.wrapSvc)||void 0===o?void 0:o.wrap(e,t))&&void 0!==i?i:t,s=!kp.has(e),r=s?this.asyncListeners:this.syncListeners;r.has(e)||r.set(e,new Set),r.get(e).add(n),this.eventSvc.addListener(e,n,s)}removeListener(e,t){var i,o;const n=null!==(i=null===(o=this.wrapSvc)||void 0===o?void 0:o.unwrap(e,t))&&void 0!==i?i:t,s=this.asyncListeners.get(e),r=!(null===s||void 0===s||!s.delete(n));var a;r||(null===(a=this.syncListeners.get(e))||void 0===a||a.delete(n));this.eventSvc.removeListener(e,n,r)}addGlobalListener(e){var t,i;const o=null!==(t=null===(i=this.wrapSvc)||void 0===i?void 0:i.wrapGlobal(e))&&void 0!==t?t:e,n=(e,t)=>{kp.has(e)&&o(e,t)},s=(e,t)=>{kp.has(e)||o(e,t)};this.globalListenerPairs.set(e,{syncListener:n,asyncListener:s});const r=this.eventSvc;r.addGlobalListener(n,!1),r.addGlobalListener(s,!0)}removeGlobalListener(e){var t;const{eventSvc:i,wrapSvc:o,globalListenerPairs:n}=this,s=null!==(t=null===o||void 0===o?void 0:o.unwrapGlobal(e))&&void 0!==t?t:e;if(n.has(s)){const{syncListener:t,asyncListener:o}=n.get(s);i.removeGlobalListener(t,!1),i.removeGlobalListener(o,!0),n.delete(e)}else this.syncGlobalListeners.delete(s),i.removeGlobalListener(s,!1)}destroyEventListeners(e,t){e.forEach((e,i)=>{e.forEach(e=>this.eventSvc.removeListener(i,e,t)),e.clear()}),e.clear()}destroyGlobalListeners(e,t){for(const i of e)this.eventSvc.removeGlobalListener(i,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(e=>{let{syncListener:i,asyncListener:o}=e;t.removeGlobalListener(i,!1),t.removeGlobalListener(o,!0)}),e.clear()}}]},pw={moduleName:"Locale",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");return t?function(e){return(t,i,o)=>e({key:t,defaultValue:i,variableValues:o})}(t):(i=e.get("localeText"),(e,t,o)=>{let n=null===i||void 0===i?void 0:i[e];if(n&&null!==o&&void 0!==o&&o.length){let e=0;for(;!(e>=o.length)&&-1!==n.indexOf("${variable}");)n=n.replace("${variable}",o[e++])}return null!==n&&void 0!==n?n:t});var i}}]},gw={moduleName:"RowAutoHeight",version:Kt,beans:[class extends ht{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=Ct(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){var e,t,i;const{visibleCols:o,rowModel:n,rowSpanSvc:s,pinnedRowModel:r}=this.beans,a=o.autoHeightCols;let l=!1;const d=e=>{const t=e.__autoHeights;let i=fi(this.beans,e).height;for(const n of a){let r=null===t||void 0===t?void 0:t[n.getColId()];const a=null===s||void 0===s?void 0:s.getCellSpan(n,e);if(a){var o;if(a.getLastNode()!==e)continue;if(r=null===s||void 0===s||null===(o=s.getCellSpan(n,e))||void 0===o?void 0:o.getLastNodeAutoHeight(),!r)return}if(null==r){if(this.colSpanSkipCell(n,e))continue;return}i=Math.max(r,i)}i!==e.rowHeight&&(e.setRowHeight(i),l=!0)};var c;(null===r||void 0===r||null===(e=r.forEachPinnedRow)||void 0===e||e.call(r,"top",d),null===r||void 0===r||null===(t=r.forEachPinnedRow)||void 0===t||t.call(r,"bottom",d),null===(i=n.forEachDisplayedNode)||void 0===i||i.call(n,d),l)&&(null===(c=n.onRowHeightChanged)||void 0===c||c.call(n))}setRowAutoHeight(e,t,i){var o;if(null!==(o=e.__autoHeights)&&void 0!==o||(e.__autoHeights={}),void 0==t)return void delete e.__autoHeights[i.getId()];const n=e.__autoHeights[i.getId()];e.__autoHeights[i.getId()]=t,n!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:i,colViewport:o,visibleCols:n}=this.beans;if(!i.colSpanActive)return!1;let s=[];switch(e.getPinned()){case"left":s=n.getLeftColsForRow(t);break;case"right":s=n.getRightColsForRow(t);break;case null:s=o.getColsWithinViewport(t)}return!s.includes(e)}setupCellAutoHeight(e,t,i){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const o=t.parentElement,{rowNode:n,column:s}=e,r=this.beans,a=l=>{var d;if(null!==(d=this.beans.editSvc)&&void 0!==d&&d.isEditing(e))return;if(!e.isAlive()||!i.isAlive())return;const{paddingTop:c,paddingBottom:u,borderBottomWidth:h,borderTopWidth:p}=fe(o),g=c+u+h+p,v=t.offsetHeight+g;if(l<5){const e=D(r);if(!(null!==e&&void 0!==e&&e.contains(t))||0==v)return void window.setTimeout(()=>a(l+1),0)}this.setRowAutoHeight(n,v,s)},l=()=>a(0);l();const d=Ue(r,t,l);return i.addDestroyFunc(()=>{d(),this.setRowAutoHeight(n,void 0,s)}),!0}setAutoHeightActive(e){this.active=e.list.some(e=>e.isVisible()&&e.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:i}of e){if(!t||this.beans.colModel.colSpanActive){t=this.beans.colViewport.getColsWithinViewport(i).filter(e=>e.isAutoHeight())}if(0!==t.length){if(!i.__autoHeights)return!1;for(const e of t){const t=i.__autoHeights[e.getColId()];if(!t||i.rowHeight<t)return!1}}}return!0}}]},vw={moduleName:"AllCommunity",version:Kt,dependsOn:[DC,TC,NC,nm,$f,Zf,Jf,eC,tC,iC,oC,Xf,ef,tf,of,Jm,sf,rf,HC,gC,_C,Wh,KC,YC,qC,ew,lh,tw,lC,pv,lw,uw,dw,hw,mv,BC,lf,pw,gw,rh,EC,rw]}},986(e,t,i){function o(e,t){if(null==e)return{};var i,o,n=function(e,t){if(null==e)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;i[o]=e[o]}return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}i.d(t,{A:()=>o})}},t={};function i(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,i),s.exports}i.m=e,(()=>{var e="function"===typeof Symbol,t=e?Symbol("webpack queues"):"__webpack_queues__",o=e?Symbol("webpack exports"):"__webpack_exports__",n=e?Symbol("webpack error"):"__webpack_error__",s=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))};i.a=(e,i,r)=>{var a;r&&((a=[]).d=-1);var l,d,c,u=new Set,h=e.exports,p=new Promise((e,t)=>{c=t,d=e});p[o]=h,p[t]=e=>(a&&e(a),u.forEach(e),p.catch(e=>{})),e.exports=p;i(e=>{var i;l=(e=>e.map(e=>{if(null!==e&&"object"===typeof e){if(e[t])return e;if(e.then){var i=[];i.d=0,e.then(e=>{r[o]=e,s(i)},e=>{r[n]=e,s(i)});var r={};return r[t]=e=>e(i),r}}var a={};return a[t]=e=>{},a[o]=e,a}))(e);var r=()=>l.map(e=>{if(e[n])throw e[n];return e[o]}),d=new Promise(e=>{(i=()=>e(r)).r=0;var o=e=>e!==a&&!u.has(e)&&(u.add(e),e&&!e.d&&(i.r++,e.push(i)));l.map(e=>e[t](o))});return i.r?d:r()},e=>(e?c(p[n]=e):d(h),s(a))),a&&a.d<0&&(a.d=0)}})(),i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,o)=>(i.f[o](e,t),t),[])),i.u=e=>"static/js/"+e+".47bb2cde.chunk.js",i.miniCssF=e=>{},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="bomber:";i.l=(o,n,s,r)=>{if(e[o])e[o].push(n);else{var a,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+s){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+s),a.src=o),e[o]=[n];var h=(t,i)=>{a.onerror=a.onload=null,clearTimeout(p);var n=e[o];if(delete e[o],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach(e=>e(i)),t)return t(i)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),i.p="/Bomber/",(()=>{var e={792:0};i.f.j=(t,o)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var s=new Promise((i,o)=>n=e[t]=[i,o]);o.push(n[2]=s);var r=i.p+i.u(t),a=new Error;i.l(r,o=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,n[1](a)}},"chunk-"+t,t)}};var t=(t,o)=>{var n,s,[r,a,l]=o,d=0;if(r.some(t=>0!==e[t])){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)l(i)}for(t&&t(o);d<r.length;d++)s=r[d],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},o=self.webpackChunkbomber=self.webpackChunkbomber||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();i(812)})();
//# sourceMappingURL=main.bf630363.js.map